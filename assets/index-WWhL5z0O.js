(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();function xD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dm={exports:{}},vf={};var ow;function ED(){if(ow)return vf;ow=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:a}}return vf.Fragment=t,vf.jsx=e,vf.jsxs=e,vf}var uw;function AD(){return uw||(uw=1,Dm.exports=ED()),Dm.exports}var L=AD(),Om={exports:{}},Mt={};var lw;function wD(){if(lw)return Mt;lw=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function O(q,lt,mt){this.props=q,this.context=lt,this.refs=C,this.updater=mt||A}O.prototype.isReactComponent={},O.prototype.setState=function(q,lt){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,lt,"setState")},O.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function D(){}D.prototype=O.prototype;function P(q,lt,mt){this.props=q,this.context=lt,this.refs=C,this.updater=mt||A}var k=P.prototype=new D;k.constructor=P,S(k,O.prototype),k.isPureReactComponent=!0;var j=Array.isArray;function K(){}var R={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function M(q,lt,mt){var vt=mt.ref;return{$$typeof:n,type:q,key:lt,ref:vt!==void 0?vt:null,props:mt}}function B(q,lt){return M(q.type,lt,q.props)}function U(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function H(q){var lt={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(mt){return lt[mt]})}var F=/\/+/g;function Ut(q,lt){return typeof q=="object"&&q!==null&&q.key!=null?H(""+q.key):lt.toString(36)}function ae(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(K,K):(q.status="pending",q.then(function(lt){q.status==="pending"&&(q.status="fulfilled",q.value=lt)},function(lt){q.status==="pending"&&(q.status="rejected",q.reason=lt)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function nt(q,lt,mt,vt,Nt){var Bt=typeof q;(Bt==="undefined"||Bt==="boolean")&&(q=null);var Zt=!1;if(q===null)Zt=!0;else switch(Bt){case"bigint":case"string":case"number":Zt=!0;break;case"object":switch(q.$$typeof){case n:case t:Zt=!0;break;case p:return Zt=q._init,nt(Zt(q._payload),lt,mt,vt,Nt)}}if(Zt)return Nt=Nt(q),Zt=vt===""?"."+Ut(q,0):vt,j(Nt)?(mt="",Zt!=null&&(mt=Zt.replace(F,"$&/")+"/"),nt(Nt,lt,mt,"",function(eo){return eo})):Nt!=null&&(U(Nt)&&(Nt=B(Nt,mt+(Nt.key==null||q&&q.key===Nt.key?"":(""+Nt.key).replace(F,"$&/")+"/")+Zt)),lt.push(Nt)),1;Zt=0;var fn=vt===""?".":vt+":";if(j(q))for(var Me=0;Me<q.length;Me++)vt=q[Me],Bt=fn+Ut(vt,Me),Zt+=nt(vt,lt,mt,Bt,Nt);else if(Me=x(q),typeof Me=="function")for(q=Me.call(q),Me=0;!(vt=q.next()).done;)vt=vt.value,Bt=fn+Ut(vt,Me++),Zt+=nt(vt,lt,mt,Bt,Nt);else if(Bt==="object"){if(typeof q.then=="function")return nt(ae(q),lt,mt,vt,Nt);throw lt=String(q),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return Zt}function ft(q,lt,mt){if(q==null)return q;var vt=[],Nt=0;return nt(q,vt,"","",function(Bt){return lt.call(mt,Bt,Nt++)}),vt}function yt(q){if(q._status===-1){var lt=q._result;lt=lt(),lt.then(function(mt){(q._status===0||q._status===-1)&&(q._status=1,q._result=mt)},function(mt){(q._status===0||q._status===-1)&&(q._status=2,q._result=mt)}),q._status===-1&&(q._status=0,q._result=lt)}if(q._status===1)return q._result.default;throw q._result}var kt=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Kt={map:ft,forEach:function(q,lt,mt){ft(q,function(){lt.apply(this,arguments)},mt)},count:function(q){var lt=0;return ft(q,function(){lt++}),lt},toArray:function(q){return ft(q,function(lt){return lt})||[]},only:function(q){if(!U(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Mt.Activity=g,Mt.Children=Kt,Mt.Component=O,Mt.Fragment=e,Mt.Profiler=i,Mt.PureComponent=P,Mt.StrictMode=r,Mt.Suspense=c,Mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Mt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return R.H.useMemoCache(q)}},Mt.cache=function(q){return function(){return q.apply(null,arguments)}},Mt.cacheSignal=function(){return null},Mt.cloneElement=function(q,lt,mt){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var vt=S({},q.props),Nt=q.key;if(lt!=null)for(Bt in lt.key!==void 0&&(Nt=""+lt.key),lt)!I.call(lt,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&lt.ref===void 0||(vt[Bt]=lt[Bt]);var Bt=arguments.length-2;if(Bt===1)vt.children=mt;else if(1<Bt){for(var Zt=Array(Bt),fn=0;fn<Bt;fn++)Zt[fn]=arguments[fn+2];vt.children=Zt}return M(q.type,Nt,vt)},Mt.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Mt.createElement=function(q,lt,mt){var vt,Nt={},Bt=null;if(lt!=null)for(vt in lt.key!==void 0&&(Bt=""+lt.key),lt)I.call(lt,vt)&&vt!=="key"&&vt!=="__self"&&vt!=="__source"&&(Nt[vt]=lt[vt]);var Zt=arguments.length-2;if(Zt===1)Nt.children=mt;else if(1<Zt){for(var fn=Array(Zt),Me=0;Me<Zt;Me++)fn[Me]=arguments[Me+2];Nt.children=fn}if(q&&q.defaultProps)for(vt in Zt=q.defaultProps,Zt)Nt[vt]===void 0&&(Nt[vt]=Zt[vt]);return M(q,Bt,Nt)},Mt.createRef=function(){return{current:null}},Mt.forwardRef=function(q){return{$$typeof:l,render:q}},Mt.isValidElement=U,Mt.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:yt}},Mt.memo=function(q,lt){return{$$typeof:h,type:q,compare:lt===void 0?null:lt}},Mt.startTransition=function(q){var lt=R.T,mt={};R.T=mt;try{var vt=q(),Nt=R.S;Nt!==null&&Nt(mt,vt),typeof vt=="object"&&vt!==null&&typeof vt.then=="function"&&vt.then(K,kt)}catch(Bt){kt(Bt)}finally{lt!==null&&mt.types!==null&&(lt.types=mt.types),R.T=lt}},Mt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Mt.use=function(q){return R.H.use(q)},Mt.useActionState=function(q,lt,mt){return R.H.useActionState(q,lt,mt)},Mt.useCallback=function(q,lt){return R.H.useCallback(q,lt)},Mt.useContext=function(q){return R.H.useContext(q)},Mt.useDebugValue=function(){},Mt.useDeferredValue=function(q,lt){return R.H.useDeferredValue(q,lt)},Mt.useEffect=function(q,lt){return R.H.useEffect(q,lt)},Mt.useEffectEvent=function(q){return R.H.useEffectEvent(q)},Mt.useId=function(){return R.H.useId()},Mt.useImperativeHandle=function(q,lt,mt){return R.H.useImperativeHandle(q,lt,mt)},Mt.useInsertionEffect=function(q,lt){return R.H.useInsertionEffect(q,lt)},Mt.useLayoutEffect=function(q,lt){return R.H.useLayoutEffect(q,lt)},Mt.useMemo=function(q,lt){return R.H.useMemo(q,lt)},Mt.useOptimistic=function(q,lt){return R.H.useOptimistic(q,lt)},Mt.useReducer=function(q,lt,mt){return R.H.useReducer(q,lt,mt)},Mt.useRef=function(q){return R.H.useRef(q)},Mt.useState=function(q){return R.H.useState(q)},Mt.useSyncExternalStore=function(q,lt,mt){return R.H.useSyncExternalStore(q,lt,mt)},Mt.useTransition=function(){return R.H.useTransition()},Mt.version="19.2.3",Mt}var cw;function jv(){return cw||(cw=1,Om.exports=wD()),Om.exports}var st=jv();const TD=xD(st);var Nm={exports:{}},_f={},Pm={exports:{}},Mm={};var fw;function SD(){return fw||(fw=1,(function(n){function t(nt,ft){var yt=nt.length;nt.push(ft);t:for(;0<yt;){var kt=yt-1>>>1,Kt=nt[kt];if(0<i(Kt,ft))nt[kt]=ft,nt[yt]=Kt,yt=kt;else break t}}function e(nt){return nt.length===0?null:nt[0]}function r(nt){if(nt.length===0)return null;var ft=nt[0],yt=nt.pop();if(yt!==ft){nt[0]=yt;t:for(var kt=0,Kt=nt.length,q=Kt>>>1;kt<q;){var lt=2*(kt+1)-1,mt=nt[lt],vt=lt+1,Nt=nt[vt];if(0>i(mt,yt))vt<Kt&&0>i(Nt,mt)?(nt[kt]=Nt,nt[vt]=yt,kt=vt):(nt[kt]=mt,nt[lt]=yt,kt=lt);else if(vt<Kt&&0>i(Nt,yt))nt[kt]=Nt,nt[vt]=yt,kt=vt;else break t}}return ft}function i(nt,ft){var yt=nt.sortIndex-ft.sortIndex;return yt!==0?yt:nt.id-ft.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,g=null,v=3,x=!1,A=!1,S=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function k(nt){for(var ft=e(h);ft!==null;){if(ft.callback===null)r(h);else if(ft.startTime<=nt)r(h),ft.sortIndex=ft.expirationTime,t(c,ft);else break;ft=e(h)}}function j(nt){if(S=!1,k(nt),!A)if(e(c)!==null)A=!0,K||(K=!0,H());else{var ft=e(h);ft!==null&&ae(j,ft.startTime-nt)}}var K=!1,R=-1,I=5,M=-1;function B(){return C?!0:!(n.unstable_now()-M<I)}function U(){if(C=!1,K){var nt=n.unstable_now();M=nt;var ft=!0;try{t:{A=!1,S&&(S=!1,D(R),R=-1),x=!0;var yt=v;try{e:{for(k(nt),g=e(c);g!==null&&!(g.expirationTime>nt&&B());){var kt=g.callback;if(typeof kt=="function"){g.callback=null,v=g.priorityLevel;var Kt=kt(g.expirationTime<=nt);if(nt=n.unstable_now(),typeof Kt=="function"){g.callback=Kt,k(nt),ft=!0;break e}g===e(c)&&r(c),k(nt)}else r(c);g=e(c)}if(g!==null)ft=!0;else{var q=e(h);q!==null&&ae(j,q.startTime-nt),ft=!1}}break t}finally{g=null,v=yt,x=!1}ft=void 0}}finally{ft?H():K=!1}}}var H;if(typeof P=="function")H=function(){P(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Ut=F.port2;F.port1.onmessage=U,H=function(){Ut.postMessage(null)}}else H=function(){O(U,0)};function ae(nt,ft){R=O(function(){nt(n.unstable_now())},ft)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(nt){nt.callback=null},n.unstable_forceFrameRate=function(nt){0>nt||125<nt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<nt?Math.floor(1e3/nt):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(nt){switch(v){case 1:case 2:case 3:var ft=3;break;default:ft=v}var yt=v;v=ft;try{return nt()}finally{v=yt}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(nt,ft){switch(nt){case 1:case 2:case 3:case 4:case 5:break;default:nt=3}var yt=v;v=nt;try{return ft()}finally{v=yt}},n.unstable_scheduleCallback=function(nt,ft,yt){var kt=n.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?kt+yt:kt):yt=kt,nt){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=yt+Kt,nt={id:p++,callback:ft,priorityLevel:nt,startTime:yt,expirationTime:Kt,sortIndex:-1},yt>kt?(nt.sortIndex=yt,t(h,nt),e(c)===null&&nt===e(h)&&(S?(D(R),R=-1):S=!0,ae(j,yt-kt))):(nt.sortIndex=Kt,t(c,nt),A||x||(A=!0,K||(K=!0,H()))),nt},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(nt){var ft=v;return function(){var yt=v;v=ft;try{return nt.apply(this,arguments)}finally{v=yt}}}})(Mm)),Mm}var hw;function ID(){return hw||(hw=1,Pm.exports=SD()),Pm.exports}var Vm={exports:{}},Hn={};var dw;function CD(){if(dw)return Hn;dw=1;var n=jv();function t(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:h,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hn.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return a(c,h,null,p)},Hn.flushSync=function(c){var h=o.T,p=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=h,r.p=p,r.d.f()}},Hn.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},Hn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Hn.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Hn.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},Hn.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Hn.preloadModule=function(c,h){if(typeof c=="string")if(h){var p=l(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},Hn.requestFormReset=function(c){r.d.r(c)},Hn.unstable_batchedUpdates=function(c,h){return c(h)},Hn.useFormState=function(c,h,p){return o.H.useFormState(c,h,p)},Hn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Hn.version="19.2.3",Hn}var pw;function bD(){if(pw)return Vm.exports;pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Vm.exports=CD(),Vm.exports}var gw;function RD(){if(gw)return _f;gw=1;var n=ID(),t=jv(),e=bD();function r(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var u=s,f=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(f=u.return),s=u.return;while(s)}return u.tag===3?f:null}function o(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function l(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function c(s){if(a(s)!==s)throw Error(r(188))}function h(s){var u=s.alternate;if(!u){if(u=a(s),u===null)throw Error(r(188));return u!==s?null:s}for(var f=s,d=u;;){var y=f.return;if(y===null)break;var _=y.alternate;if(_===null){if(d=y.return,d!==null){f=d;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===f)return c(y),s;if(_===d)return c(y),u;_=_.sibling}throw Error(r(188))}if(f.return!==d.return)f=y,d=_;else{for(var w=!1,b=y.child;b;){if(b===f){w=!0,f=y,d=_;break}if(b===d){w=!0,d=y,f=_;break}b=b.sibling}if(!w){for(b=_.child;b;){if(b===f){w=!0,f=_,d=y;break}if(b===d){w=!0,d=_,f=y;break}b=b.sibling}if(!w)throw Error(r(189))}}if(f.alternate!==d)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:u}function p(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=p(s),u!==null)return u;s=s.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),P=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var F=Symbol.for("react.client.reference");function Ut(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===F?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case K:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case P:return s.displayName||"Context";case D:return(s._context.displayName||"Context")+".Consumer";case k:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return u=s.displayName||null,u!==null?u:Ut(s.type)||"Memo";case I:u=s._payload,s=s._init;try{return Ut(s(u))}catch{}}return null}var ae=Array.isArray,nt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},kt=[],Kt=-1;function q(s){return{current:s}}function lt(s){0>Kt||(s.current=kt[Kt],kt[Kt]=null,Kt--)}function mt(s,u){Kt++,kt[Kt]=s.current,s.current=u}var vt=q(null),Nt=q(null),Bt=q(null),Zt=q(null);function fn(s,u){switch(mt(Bt,u),mt(Nt,s),mt(vt,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?DA(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=DA(u),s=OA(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}lt(vt),mt(vt,s)}function Me(){lt(vt),lt(Nt),lt(Bt)}function eo(s){s.memoizedState!==null&&mt(Zt,s);var u=vt.current,f=OA(u,s.type);u!==f&&(mt(Nt,s),mt(vt,f))}function vu(s){Nt.current===s&&(lt(vt),lt(Nt)),Zt.current===s&&(lt(Zt),pf._currentValue=yt)}var _u,xu;function wi(s){if(_u===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);_u=u&&u[1]||"",xu=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_u+s+xu}var dc=!1;function no(s,u){if(!s||dc)return"";dc=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(u){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(et){var J=et}Reflect.construct(s,[],ut)}else{try{ut.call()}catch(et){J=et}s.call(ut.prototype)}}else{try{throw Error()}catch(et){J=et}(ut=s())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(et){if(et&&J&&typeof et.stack=="string")return[et.stack,J.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),w=_[0],b=_[1];if(w&&b){var z=w.split(`
`),Z=b.split(`
`);for(y=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(d===z.length||y===Z.length)for(d=z.length-1,y=Z.length-1;1<=d&&0<=y&&z[d]!==Z[y];)y--;for(;1<=d&&0<=y;d--,y--)if(z[d]!==Z[y]){if(d!==1||y!==1)do if(d--,y--,0>y||z[d]!==Z[y]){var it=`
`+z[d].replace(" at new "," at ");return s.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",s.displayName)),it}while(1<=d&&0<=y);break}}}finally{dc=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?wi(f):""}function pc(s,u){switch(s.tag){case 26:case 27:case 5:return wi(s.type);case 16:return wi("Lazy");case 13:return s.child!==u&&u!==null?wi("Suspense Fallback"):wi("Suspense");case 19:return wi("SuspenseList");case 0:case 15:return no(s.type,!1);case 11:return no(s.type.render,!1);case 1:return no(s.type,!0);case 31:return wi("Activity");default:return""}}function gc(s){try{var u="",f=null;do u+=pc(s,f),f=s,s=s.return;while(s);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ze=Object.prototype.hasOwnProperty,hn=n.unstable_scheduleCallback,ja=n.unstable_cancelCallback,Np=n.unstable_shouldYield,qh=n.unstable_requestPaint,tr=n.unstable_now,ro=n.unstable_getCurrentPriorityLevel,mc=n.unstable_ImmediatePriority,yc=n.unstable_UserBlockingPriority,Ha=n.unstable_NormalPriority,Pp=n.unstable_LowPriority,Kh=n.unstable_IdlePriority,Xh=n.log,Wh=n.unstable_setDisableYieldValue,ni=null,Nn=null;function Lr(s){if(typeof Xh=="function"&&Wh(s),Nn&&typeof Nn.setStrictMode=="function")try{Nn.setStrictMode(ni,s)}catch{}}var qe=Math.clz32?Math.clz32:$h,Yh=Math.log,Eu=Math.LN2;function $h(s){return s>>>=0,s===0?32:31-(Yh(s)/Eu|0)|0}var Ti=256,io=262144,Je=4194304;function Si(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ii(s,u,f){var d=s.pendingLanes;if(d===0)return 0;var y=0,_=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var b=d&134217727;return b!==0?(d=b&~_,d!==0?y=Si(d):(w&=b,w!==0?y=Si(w):f||(f=b&~s,f!==0&&(y=Si(f))))):(b=d&~_,b!==0?y=Si(b):w!==0?y=Si(w):f||(f=d&~s,f!==0&&(y=Si(f)))),y===0?0:u!==0&&u!==y&&(u&_)===0&&(_=y&-y,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:y}function ri(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function Mp(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qh(){var s=Je;return Je<<=1,(Je&62914560)===0&&(Je=4194304),s}function Ci(s){for(var u=[],f=0;31>f;f++)u.push(s);return u}function ao(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Vp(s,u,f,d,y,_){var w=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var b=s.entanglements,z=s.expirationTimes,Z=s.hiddenUpdates;for(f=w&~f;0<f;){var it=31-qe(f),ut=1<<it;b[it]=0,z[it]=-1;var J=Z[it];if(J!==null)for(Z[it]=null,it=0;it<J.length;it++){var et=J[it];et!==null&&(et.lane&=-536870913)}f&=~ut}d!==0&&so(s,d,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(w&~u))}function so(s,u,f){s.pendingLanes|=u,s.suspendedLanes&=~u;var d=31-qe(u);s.entangledLanes|=u,s.entanglements[d]=s.entanglements[d]|1073741824|f&261930}function vc(s,u){var f=s.entangledLanes|=u;for(s=s.entanglements;f;){var d=31-qe(f),y=1<<d;y&u|s[d]&u&&(s[d]|=u),f&=~y}}function _c(s,u){var f=u&-u;return f=(f&42)!==0?1:oo(f),(f&(s.suspendedLanes|u))!==0?0:f}function oo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function aa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Zh(){var s=ft.p;return s!==0?s:(s=window.event,s===void 0?32:tw(s.type))}function ii(s,u){var f=ft.p;try{return ft.p=s,u()}finally{ft.p=f}}var ai=Math.random().toString(36).slice(2),tn="__reactFiber$"+ai,wn="__reactProps$"+ai,bi="__reactContainer$"+ai,Au="__reactEvents$"+ai,Lp="__reactListeners$"+ai,Jh="__reactHandles$"+ai,td="__reactResources$"+ai,Ri="__reactMarker$"+ai;function wu(s){delete s[tn],delete s[wn],delete s[Au],delete s[Lp],delete s[Jh]}function Di(s){var u=s[tn];if(u)return u;for(var f=s.parentNode;f;){if(u=f[bi]||f[tn]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(s=BA(s);s!==null;){if(f=s[tn])return f;s=BA(s)}return u}s=f,f=s.parentNode}return null}function kr(s){if(s=s[tn]||s[bi]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function Ar(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(r(33))}function Oi(s){var u=s[td];return u||(u=s[td]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function en(s){s[Ri]=!0}var xc=new Set,Ec={};function Ni(s,u){Pi(s,u),Pi(s+"Capture",u)}function Pi(s,u){for(Ec[s]=u,s=0;s<u.length;s++)xc.add(u[s])}var Ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wc={},Tc={};function ed(s){return Ze.call(Tc,s)?!0:Ze.call(wc,s)?!1:Ac.test(s)?Tc[s]=!0:(wc[s]=!0,!1)}function Tu(s,u,f){if(ed(u))if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var d=u.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+f)}}function wr(s,u,f){if(f===null)s.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+f)}}function nn(s,u,f,d){if(d===null)s.removeAttribute(f);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(u,f,""+d)}}function Tn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ga(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Sc(s,u,f){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return y.call(this)},set:function(w){f=""+w,_.call(this,w)}}),Object.defineProperty(s,u,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function he(s){if(!s._valueTracker){var u=Ga(s)?"checked":"value";s._valueTracker=Sc(s,u,""+s[u])}}function uo(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var f=u.getValue(),d="";return s&&(d=Ga(s)?s.checked?"true":"false":s.value),s=d,s!==f?(u.setValue(s),!0):!1}function Mi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var lo=/[\n"\\]/g;function ur(s){return s.replace(lo,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Su(s,u,f,d,y,_,w,b){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),u!=null?w==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+Tn(u)):s.value!==""+Tn(u)&&(s.value=""+Tn(u)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),u!=null?Ic(s,w,Tn(u)):f!=null?Ic(s,w,Tn(f)):d!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+Tn(b):s.removeAttribute("name")}function nd(s,u,f,d,y,_,w,b){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){he(s);return}f=f!=null?""+Tn(f):"",u=u!=null?""+Tn(u):f,b||u===s.value||(s.value=u),s.defaultValue=u}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=b?s.checked:!!d,s.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),he(s)}function Ic(s,u,f){u==="number"&&Mi(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function qa(s,u,f,d){if(s=s.options,u){u={};for(var y=0;y<f.length;y++)u["$"+f[y]]=!0;for(f=0;f<s.length;f++)y=u.hasOwnProperty("$"+s[f].value),s[f].selected!==y&&(s[f].selected=y),y&&d&&(s[f].defaultSelected=!0)}else{for(f=""+Tn(f),u=null,y=0;y<s.length;y++){if(s[y].value===f){s[y].selected=!0,d&&(s[y].defaultSelected=!0);return}u!==null||s[y].disabled||(u=s[y])}u!==null&&(u.selected=!0)}}function rd(s,u,f){if(u!=null&&(u=""+Tn(u),u!==s.value&&(s.value=u),f==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=f!=null?""+Tn(f):""}function Ka(s,u,f,d){if(u==null){if(d!=null){if(f!=null)throw Error(r(92));if(ae(d)){if(1<d.length)throw Error(r(93));d=d[0]}f=d}f==null&&(f=""),u=f}f=Tn(u),s.defaultValue=f,d=s.textContent,d===f&&d!==""&&d!==null&&(s.value=d),he(s)}function lr(s,u){if(u){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=u;return}}s.textContent=u}var id=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cc(s,u,f){var d=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?d?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":d?s.setProperty(u,f):typeof f!="number"||f===0||id.has(u)?u==="float"?s.cssFloat=f:s[u]=(""+f).trim():s[u]=f+"px"}function bc(s,u,f){if(u!=null&&typeof u!="object")throw Error(r(62));if(s=s.style,f!=null){for(var d in f)!f.hasOwnProperty(d)||u!=null&&u.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var y in u)d=u[y],u.hasOwnProperty(y)&&f[y]!==d&&Cc(s,y,d)}else for(var _ in u)u.hasOwnProperty(_)&&Cc(s,_,u[_])}function Iu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ad=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cu(s){return Xa.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function si(){}var Rc=null;function Br(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Wa=null,Vi=null;function co(s){var u=kr(s);if(u&&(s=u.stateNode)){var f=s[wn]||null;t:switch(s=u.stateNode,u.type){case"input":if(Su(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ur(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var d=f[u];if(d!==s&&d.form===s.form){var y=d[wn]||null;if(!y)throw Error(r(90));Su(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(u=0;u<f.length;u++)d=f[u],d.form===s.form&&uo(d)}break t;case"textarea":rd(s,f.value,f.defaultValue);break t;case"select":u=f.value,u!=null&&qa(s,!!f.multiple,u,!1)}}}var bu=!1;function Ya(s,u,f){if(bu)return s(u,f);bu=!0;try{var d=s(u);return d}finally{if(bu=!1,(Wa!==null||Vi!==null)&&(Zd(),Wa&&(u=Wa,s=Vi,Vi=Wa=null,co(u),s)))for(u=0;u<s.length;u++)co(s[u])}}function oi(s,u){var f=s.stateNode;if(f===null)return null;var d=f[wn]||null;if(d===null)return null;f=d[u];t:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,u,typeof f));return f}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fo=!1;if(Fr)try{var xe={};Object.defineProperty(xe,"passive",{get:function(){fo=!0}}),window.addEventListener("test",xe,xe),window.removeEventListener("test",xe,xe)}catch{fo=!1}var Li=null,Dc=null,ho=null;function Oc(){if(ho)return ho;var s,u=Dc,f=u.length,d,y="value"in Li?Li.value:Li.textContent,_=y.length;for(s=0;s<f&&u[s]===y[s];s++);var w=f-s;for(d=1;d<=w&&u[f-d]===y[_-d];d++);return ho=y.slice(s,1<d?1-d:void 0)}function po(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function sa(){return!0}function ui(){return!1}function Pn(s){function u(f,d,y,_,w){this._reactName=f,this._targetInst=y,this.type=d,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(f=s[b],this[b]=f?f(_):_[b]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?sa:ui,this.isPropagationStopped=ui,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=sa)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=sa)},persist:function(){},isPersistent:sa}),u}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Pn(oa),$a=g({},oa,{view:0,detail:0}),Nc=Pn($a),Qa,Ru,Bi,Du=g({},$a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Za,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bi&&(Bi&&s.type==="mousemove"?(Qa=s.screenX-Bi.screenX,Ru=s.screenY-Bi.screenY):Ru=Qa=0,Bi=s),Qa)},movementY:function(s){return"movementY"in s?s.movementY:Ru}}),Pc=Pn(Du),go=g({},Du,{dataTransfer:0}),sd=Pn(go),od=g({},$a,{relatedTarget:0}),mo=Pn(od),Mc=g({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),ud=Pn(Mc),Ou=g({},oa,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ld=Pn(Ou),cd=g({},oa,{data:0}),Fi=Pn(cd),fd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pd(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=dd[s])?!!u[s]:!1}function Za(){return pd}var er=g({},$a,{key:function(s){if(s.key){var u=fd[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=po(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?hd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Za,charCode:function(s){return s.type==="keypress"?po(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?po(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),gd=Pn(er),md=g({},Du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=Pn(md),m=g({},$a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Za}),E=Pn(m),T=g({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Pn(T),Y=g({},Du,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Pn(Y),ht=g({},oa,{newState:0,oldState:0}),Vt=Pn(ht),Ke=[9,13,27,32],se=Fr&&"CompositionEvent"in window,Ve=null;Fr&&"documentMode"in document&&(Ve=document.documentMode);var Ur=Fr&&"TextEvent"in window&&!Ve,Ui=Fr&&(!se||Ve&&8<Ve&&11>=Ve),li=" ",ci=!1;function yo(s,u){switch(s){case"keyup":return Ke.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Pu=!1;function G8(s,u){switch(s){case"compositionend":return Nu(u);case"keypress":return u.which!==32?null:(ci=!0,li);case"textInput":return s=u.data,s===li&&ci?null:s;default:return null}}function q8(s,u){if(Pu)return s==="compositionend"||!se&&yo(s,u)?(s=Oc(),ho=Dc=Li=null,Pu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ui&&u.locale!=="ko"?null:u.data;default:return null}}var K8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z2(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!K8[s.type]:u==="textarea"}function j2(s,u,f,d){Wa?Vi?Vi.push(d):Vi=[d]:Wa=d,u=a0(u,"onChange"),0<u.length&&(f=new ki("onChange","change",null,f,d),s.push({event:f,listeners:u}))}var Vc=null,Lc=null;function X8(s){TA(s,0)}function yd(s){var u=Ar(s);if(uo(u))return s}function H2(s,u){if(s==="change")return u}var G2=!1;if(Fr){var kp;if(Fr){var Bp="oninput"in document;if(!Bp){var q2=document.createElement("div");q2.setAttribute("oninput","return;"),Bp=typeof q2.oninput=="function"}kp=Bp}else kp=!1;G2=kp&&(!document.documentMode||9<document.documentMode)}function K2(){Vc&&(Vc.detachEvent("onpropertychange",X2),Lc=Vc=null)}function X2(s){if(s.propertyName==="value"&&yd(Lc)){var u=[];j2(u,Lc,s,Br(s)),Ya(X8,u)}}function W8(s,u,f){s==="focusin"?(K2(),Vc=u,Lc=f,Vc.attachEvent("onpropertychange",X2)):s==="focusout"&&K2()}function Y8(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yd(Lc)}function $8(s,u){if(s==="click")return yd(u)}function Q8(s,u){if(s==="input"||s==="change")return yd(u)}function Z8(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Tr=typeof Object.is=="function"?Object.is:Z8;function kc(s,u){if(Tr(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var f=Object.keys(s),d=Object.keys(u);if(f.length!==d.length)return!1;for(d=0;d<f.length;d++){var y=f[d];if(!Ze.call(u,y)||!Tr(s[y],u[y]))return!1}return!0}function W2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Y2(s,u){var f=W2(s);s=0;for(var d;f;){if(f.nodeType===3){if(d=s+f.textContent.length,s<=u&&d>=u)return{node:f,offset:u-s};s=d}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=W2(f)}}function $2(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?$2(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function Q2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=Mi(s.document);u instanceof s.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)s=u.contentWindow;else break;u=Mi(s.document)}return u}function Fp(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var J8=Fr&&"documentMode"in document&&11>=document.documentMode,Mu=null,Up=null,Bc=null,zp=!1;function Z2(s,u,f){var d=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;zp||Mu==null||Mu!==Mi(d)||(d=Mu,"selectionStart"in d&&Fp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bc&&kc(Bc,d)||(Bc=d,d=a0(Up,"onSelect"),0<d.length&&(u=new ki("onSelect","select",null,u,f),s.push({event:u,listeners:d}),u.target=Mu)))}function vo(s,u){var f={};return f[s.toLowerCase()]=u.toLowerCase(),f["Webkit"+s]="webkit"+u,f["Moz"+s]="moz"+u,f}var Vu={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionrun:vo("Transition","TransitionRun"),transitionstart:vo("Transition","TransitionStart"),transitioncancel:vo("Transition","TransitionCancel"),transitionend:vo("Transition","TransitionEnd")},jp={},J2={};Fr&&(J2=document.createElement("div").style,"AnimationEvent"in window||(delete Vu.animationend.animation,delete Vu.animationiteration.animation,delete Vu.animationstart.animation),"TransitionEvent"in window||delete Vu.transitionend.transition);function _o(s){if(jp[s])return jp[s];if(!Vu[s])return s;var u=Vu[s],f;for(f in u)if(u.hasOwnProperty(f)&&f in J2)return jp[s]=u[f];return s}var tx=_o("animationend"),ex=_o("animationiteration"),nx=_o("animationstart"),t6=_o("transitionrun"),e6=_o("transitionstart"),n6=_o("transitioncancel"),rx=_o("transitionend"),ix=new Map,Hp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hp.push("scrollEnd");function fi(s,u){ix.set(s,u),Ni(u,[s])}var vd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},zr=[],Lu=0,Gp=0;function _d(){for(var s=Lu,u=Gp=Lu=0;u<s;){var f=zr[u];zr[u++]=null;var d=zr[u];zr[u++]=null;var y=zr[u];zr[u++]=null;var _=zr[u];if(zr[u++]=null,d!==null&&y!==null){var w=d.pending;w===null?y.next=y:(y.next=w.next,w.next=y),d.pending=y}_!==0&&ax(f,y,_)}}function xd(s,u,f,d){zr[Lu++]=s,zr[Lu++]=u,zr[Lu++]=f,zr[Lu++]=d,Gp|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function qp(s,u,f,d){return xd(s,u,f,d),Ed(s)}function xo(s,u){return xd(s,null,null,u),Ed(s)}function ax(s,u,f){s.lanes|=f;var d=s.alternate;d!==null&&(d.lanes|=f);for(var y=!1,_=s.return;_!==null;)_.childLanes|=f,d=_.alternate,d!==null&&(d.childLanes|=f),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&u!==null&&(y=31-qe(f),s=_.hiddenUpdates,d=s[y],d===null?s[y]=[u]:d.push(u),u.lane=f|536870912),_):null}function Ed(s){if(50<of)throw of=0,tm=null,Error(r(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var ku={};function r6(s,u,f,d){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(s,u,f,d){return new r6(s,u,f,d)}function Kp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function la(s,u){var f=s.alternate;return f===null?(f=Sr(s.tag,u,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=u,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,u=s.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function sx(s,u){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,u=f.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function Ad(s,u,f,d,y,_){var w=0;if(d=s,typeof s=="function")Kp(s)&&(w=1);else if(typeof s=="string")w=uD(s,f,vt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case M:return s=Sr(31,f,u,y),s.elementType=M,s.lanes=_,s;case S:return Eo(f.children,y,_,u);case C:w=8,y|=24;break;case O:return s=Sr(12,f,u,y|2),s.elementType=O,s.lanes=_,s;case j:return s=Sr(13,f,u,y),s.elementType=j,s.lanes=_,s;case K:return s=Sr(19,f,u,y),s.elementType=K,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case P:w=10;break t;case D:w=9;break t;case k:w=11;break t;case R:w=14;break t;case I:w=16,d=null;break t}w=29,f=Error(r(130,s===null?"null":typeof s,"")),d=null}return u=Sr(w,f,u,y),u.elementType=s,u.type=d,u.lanes=_,u}function Eo(s,u,f,d){return s=Sr(7,s,d,u),s.lanes=f,s}function Xp(s,u,f){return s=Sr(6,s,null,u),s.lanes=f,s}function ox(s){var u=Sr(18,null,null,0);return u.stateNode=s,u}function Wp(s,u,f){return u=Sr(4,s.children!==null?s.children:[],s.key,u),u.lanes=f,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var ux=new WeakMap;function jr(s,u){if(typeof s=="object"&&s!==null){var f=ux.get(s);return f!==void 0?f:(u={value:s,source:u,stack:gc(u)},ux.set(s,u),u)}return{value:s,source:u,stack:gc(u)}}var Bu=[],Fu=0,wd=null,Fc=0,Hr=[],Gr=0,Ja=null,zi=1,ji="";function ca(s,u){Bu[Fu++]=Fc,Bu[Fu++]=wd,wd=s,Fc=u}function lx(s,u,f){Hr[Gr++]=zi,Hr[Gr++]=ji,Hr[Gr++]=Ja,Ja=s;var d=zi;s=ji;var y=32-qe(d)-1;d&=~(1<<y),f+=1;var _=32-qe(u)+y;if(30<_){var w=y-y%5;_=(d&(1<<w)-1).toString(32),d>>=w,y-=w,zi=1<<32-qe(u)+y|f<<y|d,ji=_+s}else zi=1<<_|f<<y|d,ji=s}function Yp(s){s.return!==null&&(ca(s,1),lx(s,1,0))}function $p(s){for(;s===wd;)wd=Bu[--Fu],Bu[Fu]=null,Fc=Bu[--Fu],Bu[Fu]=null;for(;s===Ja;)Ja=Hr[--Gr],Hr[Gr]=null,ji=Hr[--Gr],Hr[Gr]=null,zi=Hr[--Gr],Hr[Gr]=null}function cx(s,u){Hr[Gr++]=zi,Hr[Gr++]=ji,Hr[Gr++]=Ja,zi=u.id,ji=u.overflow,Ja=s}var Mn=null,be=null,Qt=!1,ts=null,qr=!1,Qp=Error(r(519));function es(s){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uc(jr(u,s)),Qp}function fx(s){var u=s.stateNode,f=s.type,d=s.memoizedProps;switch(u[tn]=s,u[wn]=d,f){case"dialog":qt("cancel",u),qt("close",u);break;case"iframe":case"object":case"embed":qt("load",u);break;case"video":case"audio":for(f=0;f<lf.length;f++)qt(lf[f],u);break;case"source":qt("error",u);break;case"img":case"image":case"link":qt("error",u),qt("load",u);break;case"details":qt("toggle",u);break;case"input":qt("invalid",u),nd(u,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":qt("invalid",u);break;case"textarea":qt("invalid",u),Ka(u,d.value,d.defaultValue,d.children)}f=d.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||d.suppressHydrationWarning===!0||bA(u.textContent,f)?(d.popover!=null&&(qt("beforetoggle",u),qt("toggle",u)),d.onScroll!=null&&qt("scroll",u),d.onScrollEnd!=null&&qt("scrollend",u),d.onClick!=null&&(u.onclick=si),u=!0):u=!1,u||es(s,!0)}function hx(s){for(Mn=s.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:Mn=Mn.return}}function Uu(s){if(s!==Mn)return!1;if(!Qt)return hx(s),Qt=!0,!1;var u=s.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||gm(s.type,s.memoizedProps)),f=!f),f&&be&&es(s),hx(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));be=kA(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));be=kA(s)}else u===27?(u=be,gs(s.type)?(s=xm,xm=null,be=s):be=u):be=Mn?Xr(s.stateNode.nextSibling):null;return!0}function Ao(){be=Mn=null,Qt=!1}function Zp(){var s=ts;return s!==null&&(dr===null?dr=s:dr.push.apply(dr,s),ts=null),s}function Uc(s){ts===null?ts=[s]:ts.push(s)}var Jp=q(null),wo=null,fa=null;function ns(s,u,f){mt(Jp,u._currentValue),u._currentValue=f}function ha(s){s._currentValue=Jp.current,lt(Jp)}function tg(s,u,f){for(;s!==null;){var d=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,d!==null&&(d.childLanes|=u)):d!==null&&(d.childLanes&u)!==u&&(d.childLanes|=u),s===f)break;s=s.return}}function eg(s,u,f,d){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var w=y.child;_=_.firstContext;t:for(;_!==null;){var b=_;_=y;for(var z=0;z<u.length;z++)if(b.context===u[z]){_.lanes|=f,b=_.alternate,b!==null&&(b.lanes|=f),tg(_.return,f,s),d||(w=null);break t}_=b.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(r(341));w.lanes|=f,_=w.alternate,_!==null&&(_.lanes|=f),tg(w,f,s),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===s){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function zu(s,u,f,d){s=null;for(var y=u,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var b=y.type;Tr(y.pendingProps.value,w.value)||(s!==null?s.push(b):s=[b])}}else if(y===Zt.current){if(w=y.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(pf):s=[pf])}y=y.return}s!==null&&eg(u,s,f,d),u.flags|=262144}function Td(s){for(s=s.firstContext;s!==null;){if(!Tr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function To(s){wo=s,fa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Vn(s){return dx(wo,s)}function Sd(s,u){return wo===null&&To(s),dx(s,u)}function dx(s,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},fa===null){if(s===null)throw Error(r(308));fa=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else fa=fa.next=u;return f}var i6=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(f,d){s.push(d)}};this.abort=function(){u.aborted=!0,s.forEach(function(f){return f()})}},a6=n.unstable_scheduleCallback,s6=n.unstable_NormalPriority,rn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ng(){return{controller:new i6,data:new Map,refCount:0}}function zc(s){s.refCount--,s.refCount===0&&a6(s6,function(){s.controller.abort()})}var jc=null,rg=0,ju=0,Hu=null;function o6(s,u){if(jc===null){var f=jc=[];rg=0,ju=sm(),Hu={status:"pending",value:void 0,then:function(d){f.push(d)}}}return rg++,u.then(px,px),u}function px(){if(--rg===0&&jc!==null){Hu!==null&&(Hu.status="fulfilled");var s=jc;jc=null,ju=0,Hu=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function u6(s,u){var f=[],d={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return s.then(function(){d.status="fulfilled",d.value=u;for(var y=0;y<f.length;y++)(0,f[y])(u)},function(y){for(d.status="rejected",d.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),d}var gx=nt.S;nt.S=function(s,u){ZE=tr(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&o6(s,u),gx!==null&&gx(s,u)};var So=q(null);function ig(){var s=So.current;return s!==null?s:Se.pooledCache}function Id(s,u){u===null?mt(So,So.current):mt(So,u.pool)}function mx(){var s=ig();return s===null?null:{parent:rn._currentValue,pool:s}}var Gu=Error(r(460)),ag=Error(r(474)),Cd=Error(r(542)),bd={then:function(){}};function yx(s){return s=s.status,s==="fulfilled"||s==="rejected"}function vx(s,u,f){switch(f=s[f],f===void 0?s.push(u):f!==u&&(u.then(si,si),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,xx(s),s;default:if(typeof u.status=="string")u.then(si,si);else{if(s=Se,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=u,s.status="pending",s.then(function(d){if(u.status==="pending"){var y=u;y.status="fulfilled",y.value=d}},function(d){if(u.status==="pending"){var y=u;y.status="rejected",y.reason=d}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,xx(s),s}throw Co=u,Gu}}function Io(s){try{var u=s._init;return u(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Co=f,Gu):f}}var Co=null;function _x(){if(Co===null)throw Error(r(459));var s=Co;return Co=null,s}function xx(s){if(s===Gu||s===Cd)throw Error(r(483))}var qu=null,Hc=0;function Rd(s){var u=Hc;return Hc+=1,qu===null&&(qu=[]),vx(qu,s,u)}function Gc(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function Dd(s,u){throw u.$$typeof===v?Error(r(525)):(s=Object.prototype.toString.call(u),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function Ex(s){function u(X,G){if(s){var Q=X.deletions;Q===null?(X.deletions=[G],X.flags|=16):Q.push(G)}}function f(X,G){if(!s)return null;for(;G!==null;)u(X,G),G=G.sibling;return null}function d(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function y(X,G){return X=la(X,G),X.index=0,X.sibling=null,X}function _(X,G,Q){return X.index=Q,s?(Q=X.alternate,Q!==null?(Q=Q.index,Q<G?(X.flags|=67108866,G):Q):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function w(X){return s&&X.alternate===null&&(X.flags|=67108866),X}function b(X,G,Q,ot){return G===null||G.tag!==6?(G=Xp(Q,X.mode,ot),G.return=X,G):(G=y(G,Q),G.return=X,G)}function z(X,G,Q,ot){var St=Q.type;return St===S?it(X,G,Q.props.children,ot,Q.key):G!==null&&(G.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===I&&Io(St)===G.type)?(G=y(G,Q.props),Gc(G,Q),G.return=X,G):(G=Ad(Q.type,Q.key,Q.props,null,X.mode,ot),Gc(G,Q),G.return=X,G)}function Z(X,G,Q,ot){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=Wp(Q,X.mode,ot),G.return=X,G):(G=y(G,Q.children||[]),G.return=X,G)}function it(X,G,Q,ot,St){return G===null||G.tag!==7?(G=Eo(Q,X.mode,ot,St),G.return=X,G):(G=y(G,Q),G.return=X,G)}function ut(X,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Xp(""+G,X.mode,Q),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return Q=Ad(G.type,G.key,G.props,null,X.mode,Q),Gc(Q,G),Q.return=X,Q;case A:return G=Wp(G,X.mode,Q),G.return=X,G;case I:return G=Io(G),ut(X,G,Q)}if(ae(G)||H(G))return G=Eo(G,X.mode,Q,null),G.return=X,G;if(typeof G.then=="function")return ut(X,Rd(G),Q);if(G.$$typeof===P)return ut(X,Sd(X,G),Q);Dd(X,G)}return null}function J(X,G,Q,ot){var St=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return St!==null?null:b(X,G,""+Q,ot);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===St?z(X,G,Q,ot):null;case A:return Q.key===St?Z(X,G,Q,ot):null;case I:return Q=Io(Q),J(X,G,Q,ot)}if(ae(Q)||H(Q))return St!==null?null:it(X,G,Q,ot,null);if(typeof Q.then=="function")return J(X,G,Rd(Q),ot);if(Q.$$typeof===P)return J(X,G,Sd(X,Q),ot);Dd(X,Q)}return null}function et(X,G,Q,ot,St){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return X=X.get(Q)||null,b(G,X,""+ot,St);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case x:return X=X.get(ot.key===null?Q:ot.key)||null,z(G,X,ot,St);case A:return X=X.get(ot.key===null?Q:ot.key)||null,Z(G,X,ot,St);case I:return ot=Io(ot),et(X,G,Q,ot,St)}if(ae(ot)||H(ot))return X=X.get(Q)||null,it(G,X,ot,St,null);if(typeof ot.then=="function")return et(X,G,Q,Rd(ot),St);if(ot.$$typeof===P)return et(X,G,Q,Sd(G,ot),St);Dd(G,ot)}return null}function xt(X,G,Q,ot){for(var St=null,ne=null,wt=G,Ft=G=0,Wt=null;wt!==null&&Ft<Q.length;Ft++){wt.index>Ft?(Wt=wt,wt=null):Wt=wt.sibling;var re=J(X,wt,Q[Ft],ot);if(re===null){wt===null&&(wt=Wt);break}s&&wt&&re.alternate===null&&u(X,wt),G=_(re,G,Ft),ne===null?St=re:ne.sibling=re,ne=re,wt=Wt}if(Ft===Q.length)return f(X,wt),Qt&&ca(X,Ft),St;if(wt===null){for(;Ft<Q.length;Ft++)wt=ut(X,Q[Ft],ot),wt!==null&&(G=_(wt,G,Ft),ne===null?St=wt:ne.sibling=wt,ne=wt);return Qt&&ca(X,Ft),St}for(wt=d(wt);Ft<Q.length;Ft++)Wt=et(wt,X,Ft,Q[Ft],ot),Wt!==null&&(s&&Wt.alternate!==null&&wt.delete(Wt.key===null?Ft:Wt.key),G=_(Wt,G,Ft),ne===null?St=Wt:ne.sibling=Wt,ne=Wt);return s&&wt.forEach(function(xs){return u(X,xs)}),Qt&&ca(X,Ft),St}function Rt(X,G,Q,ot){if(Q==null)throw Error(r(151));for(var St=null,ne=null,wt=G,Ft=G=0,Wt=null,re=Q.next();wt!==null&&!re.done;Ft++,re=Q.next()){wt.index>Ft?(Wt=wt,wt=null):Wt=wt.sibling;var xs=J(X,wt,re.value,ot);if(xs===null){wt===null&&(wt=Wt);break}s&&wt&&xs.alternate===null&&u(X,wt),G=_(xs,G,Ft),ne===null?St=xs:ne.sibling=xs,ne=xs,wt=Wt}if(re.done)return f(X,wt),Qt&&ca(X,Ft),St;if(wt===null){for(;!re.done;Ft++,re=Q.next())re=ut(X,re.value,ot),re!==null&&(G=_(re,G,Ft),ne===null?St=re:ne.sibling=re,ne=re);return Qt&&ca(X,Ft),St}for(wt=d(wt);!re.done;Ft++,re=Q.next())re=et(wt,X,Ft,re.value,ot),re!==null&&(s&&re.alternate!==null&&wt.delete(re.key===null?Ft:re.key),G=_(re,G,Ft),ne===null?St=re:ne.sibling=re,ne=re);return s&&wt.forEach(function(_D){return u(X,_D)}),Qt&&ca(X,Ft),St}function we(X,G,Q,ot){if(typeof Q=="object"&&Q!==null&&Q.type===S&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:t:{for(var St=Q.key;G!==null;){if(G.key===St){if(St=Q.type,St===S){if(G.tag===7){f(X,G.sibling),ot=y(G,Q.props.children),ot.return=X,X=ot;break t}}else if(G.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===I&&Io(St)===G.type){f(X,G.sibling),ot=y(G,Q.props),Gc(ot,Q),ot.return=X,X=ot;break t}f(X,G);break}else u(X,G);G=G.sibling}Q.type===S?(ot=Eo(Q.props.children,X.mode,ot,Q.key),ot.return=X,X=ot):(ot=Ad(Q.type,Q.key,Q.props,null,X.mode,ot),Gc(ot,Q),ot.return=X,X=ot)}return w(X);case A:t:{for(St=Q.key;G!==null;){if(G.key===St)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){f(X,G.sibling),ot=y(G,Q.children||[]),ot.return=X,X=ot;break t}else{f(X,G);break}else u(X,G);G=G.sibling}ot=Wp(Q,X.mode,ot),ot.return=X,X=ot}return w(X);case I:return Q=Io(Q),we(X,G,Q,ot)}if(ae(Q))return xt(X,G,Q,ot);if(H(Q)){if(St=H(Q),typeof St!="function")throw Error(r(150));return Q=St.call(Q),Rt(X,G,Q,ot)}if(typeof Q.then=="function")return we(X,G,Rd(Q),ot);if(Q.$$typeof===P)return we(X,G,Sd(X,Q),ot);Dd(X,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,G!==null&&G.tag===6?(f(X,G.sibling),ot=y(G,Q),ot.return=X,X=ot):(f(X,G),ot=Xp(Q,X.mode,ot),ot.return=X,X=ot),w(X)):f(X,G)}return function(X,G,Q,ot){try{Hc=0;var St=we(X,G,Q,ot);return qu=null,St}catch(wt){if(wt===Gu||wt===Cd)throw wt;var ne=Sr(29,wt,null,X.mode);return ne.lanes=ot,ne.return=X,ne}}}var bo=Ex(!0),Ax=Ex(!1),rs=!1;function sg(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function og(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function is(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function as(s,u,f){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(oe&2)!==0){var y=d.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),d.pending=u,u=Ed(s),ax(s,null,f),u}return xd(s,d,u,f),Ed(s)}function qc(s,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var d=u.lanes;d&=s.pendingLanes,f|=d,u.lanes=f,vc(s,f)}}function ug(s,u){var f=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,f===d)){var y=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var w={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?y=_=w:_=_.next=w,f=f.next}while(f!==null);_===null?y=_=u:_=_.next=u}else y=_=u;f={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=u}var lg=!1;function Kc(){if(lg){var s=Hu;if(s!==null)throw s}}function Xc(s,u,f,d){lg=!1;var y=s.updateQueue;rs=!1;var _=y.firstBaseUpdate,w=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var z=b,Z=z.next;z.next=null,w===null?_=Z:w.next=Z,w=z;var it=s.alternate;it!==null&&(it=it.updateQueue,b=it.lastBaseUpdate,b!==w&&(b===null?it.firstBaseUpdate=Z:b.next=Z,it.lastBaseUpdate=z))}if(_!==null){var ut=y.baseState;w=0,it=Z=z=null,b=_;do{var J=b.lane&-536870913,et=J!==b.lane;if(et?(Xt&J)===J:(d&J)===J){J!==0&&J===ju&&(lg=!0),it!==null&&(it=it.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});t:{var xt=s,Rt=b;J=u;var we=f;switch(Rt.tag){case 1:if(xt=Rt.payload,typeof xt=="function"){ut=xt.call(we,ut,J);break t}ut=xt;break t;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Rt.payload,J=typeof xt=="function"?xt.call(we,ut,J):xt,J==null)break t;ut=g({},ut,J);break t;case 2:rs=!0}}J=b.callback,J!==null&&(s.flags|=64,et&&(s.flags|=8192),et=y.callbacks,et===null?y.callbacks=[J]:et.push(J))}else et={lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},it===null?(Z=it=et,z=ut):it=it.next=et,w|=J;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;et=b,b=et.next,et.next=null,y.lastBaseUpdate=et,y.shared.pending=null}}while(!0);it===null&&(z=ut),y.baseState=z,y.firstBaseUpdate=Z,y.lastBaseUpdate=it,_===null&&(y.shared.lanes=0),cs|=w,s.lanes=w,s.memoizedState=ut}}function wx(s,u){if(typeof s!="function")throw Error(r(191,s));s.call(u)}function Tx(s,u){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)wx(f[s],u)}var Ku=q(null),Od=q(0);function Sx(s,u){s=Ea,mt(Od,s),mt(Ku,u),Ea=s|u.baseLanes}function cg(){mt(Od,Ea),mt(Ku,Ku.current)}function fg(){Ea=Od.current,lt(Ku),lt(Od)}var Ir=q(null),Kr=null;function ss(s){var u=s.alternate;mt(Xe,Xe.current&1),mt(Ir,s),Kr===null&&(u===null||Ku.current!==null||u.memoizedState!==null)&&(Kr=s)}function hg(s){mt(Xe,Xe.current),mt(Ir,s),Kr===null&&(Kr=s)}function Ix(s){s.tag===22?(mt(Xe,Xe.current),mt(Ir,s),Kr===null&&(Kr=s)):os()}function os(){mt(Xe,Xe.current),mt(Ir,Ir.current)}function Cr(s){lt(Ir),Kr===s&&(Kr=null),lt(Xe)}var Xe=q(0);function Nd(s){for(var u=s;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||vm(f)||_m(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var da=0,Lt=null,Ee=null,an=null,Pd=!1,Xu=!1,Ro=!1,Md=0,Wc=0,Wu=null,l6=0;function ze(){throw Error(r(321))}function dg(s,u){if(u===null)return!1;for(var f=0;f<u.length&&f<s.length;f++)if(!Tr(s[f],u[f]))return!1;return!0}function pg(s,u,f,d,y,_){return da=_,Lt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,nt.H=s===null||s.memoizedState===null?lE:Rg,Ro=!1,_=f(d,y),Ro=!1,Xu&&(_=bx(u,f,d,y)),Cx(s),_}function Cx(s){nt.H=Qc;var u=Ee!==null&&Ee.next!==null;if(da=0,an=Ee=Lt=null,Pd=!1,Wc=0,Wu=null,u)throw Error(r(300));s===null||sn||(s=s.dependencies,s!==null&&Td(s)&&(sn=!0))}function bx(s,u,f,d){Lt=s;var y=0;do{if(Xu&&(Wu=null),Wc=0,Xu=!1,25<=y)throw Error(r(301));if(y+=1,an=Ee=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}nt.H=cE,_=u(f,d)}while(Xu);return _}function c6(){var s=nt.H,u=s.useState()[0];return u=typeof u.then=="function"?Yc(u):u,s=s.useState()[0],(Ee!==null?Ee.memoizedState:null)!==s&&(Lt.flags|=1024),u}function gg(){var s=Md!==0;return Md=0,s}function mg(s,u,f){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~f}function yg(s){if(Pd){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}Pd=!1}da=0,an=Ee=Lt=null,Xu=!1,Wc=Md=0,Wu=null}function nr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?Lt.memoizedState=an=s:an=an.next=s,an}function We(){if(Ee===null){var s=Lt.alternate;s=s!==null?s.memoizedState:null}else s=Ee.next;var u=an===null?Lt.memoizedState:an.next;if(u!==null)an=u,Ee=s;else{if(s===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));Ee=s,s={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},an===null?Lt.memoizedState=an=s:an=an.next=s}return an}function Vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yc(s){var u=Wc;return Wc+=1,Wu===null&&(Wu=[]),s=vx(Wu,s,u),u=Lt,(an===null?u.memoizedState:an.next)===null&&(u=u.alternate,nt.H=u===null||u.memoizedState===null?lE:Rg),s}function Ld(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Yc(s);if(s.$$typeof===P)return Vn(s)}throw Error(r(438,String(s)))}function vg(s){var u=null,f=Lt.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var d=Lt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(u={data:d.data.map(function(y){return y.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Vd(),Lt.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(s),d=0;d<s;d++)f[d]=B;return u.index++,f}function pa(s,u){return typeof u=="function"?u(s):u}function kd(s){var u=We();return _g(u,Ee,s)}function _g(s,u,f){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=f;var y=s.baseQueue,_=d.pending;if(_!==null){if(y!==null){var w=y.next;y.next=_.next,_.next=w}u.baseQueue=y=_,d.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{u=y.next;var b=w=null,z=null,Z=u,it=!1;do{var ut=Z.lane&-536870913;if(ut!==Z.lane?(Xt&ut)===ut:(da&ut)===ut){var J=Z.revertLane;if(J===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ut===ju&&(it=!0);else if((da&J)===J){Z=Z.next,J===ju&&(it=!0);continue}else ut={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(b=z=ut,w=_):z=z.next=ut,Lt.lanes|=J,cs|=J;ut=Z.action,Ro&&f(_,ut),_=Z.hasEagerState?Z.eagerState:f(_,ut)}else J={lane:ut,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(b=z=J,w=_):z=z.next=J,Lt.lanes|=ut,cs|=ut;Z=Z.next}while(Z!==null&&Z!==u);if(z===null?w=_:z.next=b,!Tr(_,s.memoizedState)&&(sn=!0,it&&(f=Hu,f!==null)))throw f;s.memoizedState=_,s.baseState=w,s.baseQueue=z,d.lastRenderedState=_}return y===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function xg(s){var u=We(),f=u.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var d=f.dispatch,y=f.pending,_=u.memoizedState;if(y!==null){f.pending=null;var w=y=y.next;do _=s(_,w.action),w=w.next;while(w!==y);Tr(_,u.memoizedState)||(sn=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,d]}function Rx(s,u,f){var d=Lt,y=We(),_=Qt;if(_){if(f===void 0)throw Error(r(407));f=f()}else f=u();var w=!Tr((Ee||y).memoizedState,f);if(w&&(y.memoizedState=f,sn=!0),y=y.queue,wg(Nx.bind(null,d,y,s),[s]),y.getSnapshot!==u||w||an!==null&&an.memoizedState.tag&1){if(d.flags|=2048,Yu(9,{destroy:void 0},Ox.bind(null,d,y,f,u),null),Se===null)throw Error(r(349));_||(da&127)!==0||Dx(d,u,f)}return f}function Dx(s,u,f){s.flags|=16384,s={getSnapshot:u,value:f},u=Lt.updateQueue,u===null?(u=Vd(),Lt.updateQueue=u,u.stores=[s]):(f=u.stores,f===null?u.stores=[s]:f.push(s))}function Ox(s,u,f,d){u.value=f,u.getSnapshot=d,Px(u)&&Mx(s)}function Nx(s,u,f){return f(function(){Px(u)&&Mx(s)})}function Px(s){var u=s.getSnapshot;s=s.value;try{var f=u();return!Tr(s,f)}catch{return!0}}function Mx(s){var u=xo(s,2);u!==null&&pr(u,s,2)}function Eg(s){var u=nr();if(typeof s=="function"){var f=s;if(s=f(),Ro){Lr(!0);try{f()}finally{Lr(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:s},u}function Vx(s,u,f,d){return s.baseState=f,_g(s,Ee,typeof d=="function"?d:pa)}function f6(s,u,f,d,y){if(Ud(s))throw Error(r(485));if(s=u.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};nt.T!==null?f(!0):_.isTransition=!1,d(_),f=u.pending,f===null?(_.next=u.pending=_,Lx(u,_)):(_.next=f.next,u.pending=f.next=_)}}function Lx(s,u){var f=u.action,d=u.payload,y=s.state;if(u.isTransition){var _=nt.T,w={};nt.T=w;try{var b=f(y,d),z=nt.S;z!==null&&z(w,b),kx(s,u,b)}catch(Z){Ag(s,u,Z)}finally{_!==null&&w.types!==null&&(_.types=w.types),nt.T=_}}else try{_=f(y,d),kx(s,u,_)}catch(Z){Ag(s,u,Z)}}function kx(s,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(d){Bx(s,u,d)},function(d){return Ag(s,u,d)}):Bx(s,u,f)}function Bx(s,u,f){u.status="fulfilled",u.value=f,Fx(u),s.state=f,u=s.pending,u!==null&&(f=u.next,f===u?s.pending=null:(f=f.next,u.next=f,Lx(s,f)))}function Ag(s,u,f){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do u.status="rejected",u.reason=f,Fx(u),u=u.next;while(u!==d)}s.action=null}function Fx(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function Ux(s,u){return u}function zx(s,u){if(Qt){var f=Se.formState;if(f!==null){t:{var d=Lt;if(Qt){if(be){e:{for(var y=be,_=qr;y.nodeType!==8;){if(!_){y=null;break e}if(y=Xr(y.nextSibling),y===null){y=null;break e}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){be=Xr(y.nextSibling),d=y.data==="F!";break t}}es(d)}d=!1}d&&(u=f[0])}}return f=nr(),f.memoizedState=f.baseState=u,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ux,lastRenderedState:u},f.queue=d,f=sE.bind(null,Lt,d),d.dispatch=f,d=Eg(!1),_=bg.bind(null,Lt,!1,d.queue),d=nr(),y={state:u,dispatch:null,action:s,pending:null},d.queue=y,f=f6.bind(null,Lt,y,_,f),y.dispatch=f,d.memoizedState=s,[u,f,!1]}function jx(s){var u=We();return Hx(u,Ee,s)}function Hx(s,u,f){if(u=_g(s,u,Ux)[0],s=kd(pa)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var d=Yc(u)}catch(w){throw w===Gu?Cd:w}else d=u;u=We();var y=u.queue,_=y.dispatch;return f!==u.memoizedState&&(Lt.flags|=2048,Yu(9,{destroy:void 0},h6.bind(null,y,f),null)),[d,_,s]}function h6(s,u){s.action=u}function Gx(s){var u=We(),f=Ee;if(f!==null)return Hx(u,f,s);We(),u=u.memoizedState,f=We();var d=f.queue.dispatch;return f.memoizedState=s,[u,d,!1]}function Yu(s,u,f,d){return s={tag:s,create:f,deps:d,inst:u,next:null},u=Lt.updateQueue,u===null&&(u=Vd(),Lt.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=s.next=s:(d=f.next,f.next=s,s.next=d,u.lastEffect=s),s}function qx(){return We().memoizedState}function Bd(s,u,f,d){var y=nr();Lt.flags|=s,y.memoizedState=Yu(1|u,{destroy:void 0},f,d===void 0?null:d)}function Fd(s,u,f,d){var y=We();d=d===void 0?null:d;var _=y.memoizedState.inst;Ee!==null&&d!==null&&dg(d,Ee.memoizedState.deps)?y.memoizedState=Yu(u,_,f,d):(Lt.flags|=s,y.memoizedState=Yu(1|u,_,f,d))}function Kx(s,u){Bd(8390656,8,s,u)}function wg(s,u){Fd(2048,8,s,u)}function d6(s){Lt.flags|=4;var u=Lt.updateQueue;if(u===null)u=Vd(),Lt.updateQueue=u,u.events=[s];else{var f=u.events;f===null?u.events=[s]:f.push(s)}}function Xx(s){var u=We().memoizedState;return d6({ref:u,nextImpl:s}),function(){if((oe&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function Wx(s,u){return Fd(4,2,s,u)}function Yx(s,u){return Fd(4,4,s,u)}function $x(s,u){if(typeof u=="function"){s=s();var f=u(s);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function Qx(s,u,f){f=f!=null?f.concat([s]):null,Fd(4,4,$x.bind(null,u,s),f)}function Tg(){}function Zx(s,u){var f=We();u=u===void 0?null:u;var d=f.memoizedState;return u!==null&&dg(u,d[1])?d[0]:(f.memoizedState=[s,u],s)}function Jx(s,u){var f=We();u=u===void 0?null:u;var d=f.memoizedState;if(u!==null&&dg(u,d[1]))return d[0];if(d=s(),Ro){Lr(!0);try{s()}finally{Lr(!1)}}return f.memoizedState=[d,u],d}function Sg(s,u,f){return f===void 0||(da&1073741824)!==0&&(Xt&261930)===0?s.memoizedState=u:(s.memoizedState=f,s=tA(),Lt.lanes|=s,cs|=s,f)}function tE(s,u,f,d){return Tr(f,u)?f:Ku.current!==null?(s=Sg(s,f,d),Tr(s,u)||(sn=!0),s):(da&42)===0||(da&1073741824)!==0&&(Xt&261930)===0?(sn=!0,s.memoizedState=f):(s=tA(),Lt.lanes|=s,cs|=s,u)}function eE(s,u,f,d,y){var _=ft.p;ft.p=_!==0&&8>_?_:8;var w=nt.T,b={};nt.T=b,bg(s,!1,u,f);try{var z=y(),Z=nt.S;if(Z!==null&&Z(b,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var it=u6(z,d);$c(s,u,it,Dr(s))}else $c(s,u,d,Dr(s))}catch(ut){$c(s,u,{then:function(){},status:"rejected",reason:ut},Dr())}finally{ft.p=_,w!==null&&b.types!==null&&(w.types=b.types),nt.T=w}}function p6(){}function Ig(s,u,f,d){if(s.tag!==5)throw Error(r(476));var y=nE(s).queue;eE(s,y,u,yt,f===null?p6:function(){return rE(s),f(d)})}function nE(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:yt},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:f},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function rE(s){var u=nE(s);u.next===null&&(u=s.alternate.memoizedState),$c(s,u.next.queue,{},Dr())}function Cg(){return Vn(pf)}function iE(){return We().memoizedState}function aE(){return We().memoizedState}function g6(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var f=Dr();s=is(f);var d=as(u,s,f);d!==null&&(pr(d,u,f),qc(d,u,f)),u={cache:ng()},s.payload=u;return}u=u.return}}function m6(s,u,f){var d=Dr();f={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ud(s)?oE(u,f):(f=qp(s,u,f,d),f!==null&&(pr(f,s,d),uE(f,u,d)))}function sE(s,u,f){var d=Dr();$c(s,u,f,d)}function $c(s,u,f,d){var y={lane:d,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Ud(s))oE(u,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var w=u.lastRenderedState,b=_(w,f);if(y.hasEagerState=!0,y.eagerState=b,Tr(b,w))return xd(s,u,y,0),Se===null&&_d(),!1}catch{}if(f=qp(s,u,y,d),f!==null)return pr(f,s,d),uE(f,u,d),!0}return!1}function bg(s,u,f,d){if(d={lane:2,revertLane:sm(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ud(s)){if(u)throw Error(r(479))}else u=qp(s,f,d,2),u!==null&&pr(u,s,2)}function Ud(s){var u=s.alternate;return s===Lt||u!==null&&u===Lt}function oE(s,u){Xu=Pd=!0;var f=s.pending;f===null?u.next=u:(u.next=f.next,f.next=u),s.pending=u}function uE(s,u,f){if((f&4194048)!==0){var d=u.lanes;d&=s.pendingLanes,f|=d,u.lanes=f,vc(s,f)}}var Qc={readContext:Vn,use:Ld,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};Qc.useEffectEvent=ze;var lE={readContext:Vn,use:Ld,useCallback:function(s,u){return nr().memoizedState=[s,u===void 0?null:u],s},useContext:Vn,useEffect:Kx,useImperativeHandle:function(s,u,f){f=f!=null?f.concat([s]):null,Bd(4194308,4,$x.bind(null,u,s),f)},useLayoutEffect:function(s,u){return Bd(4194308,4,s,u)},useInsertionEffect:function(s,u){Bd(4,2,s,u)},useMemo:function(s,u){var f=nr();u=u===void 0?null:u;var d=s();if(Ro){Lr(!0);try{s()}finally{Lr(!1)}}return f.memoizedState=[d,u],d},useReducer:function(s,u,f){var d=nr();if(f!==void 0){var y=f(u);if(Ro){Lr(!0);try{f(u)}finally{Lr(!1)}}}else y=u;return d.memoizedState=d.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},d.queue=s,s=s.dispatch=m6.bind(null,Lt,s),[d.memoizedState,s]},useRef:function(s){var u=nr();return s={current:s},u.memoizedState=s},useState:function(s){s=Eg(s);var u=s.queue,f=sE.bind(null,Lt,u);return u.dispatch=f,[s.memoizedState,f]},useDebugValue:Tg,useDeferredValue:function(s,u){var f=nr();return Sg(f,s,u)},useTransition:function(){var s=Eg(!1);return s=eE.bind(null,Lt,s.queue,!0,!1),nr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,f){var d=Lt,y=nr();if(Qt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=u(),Se===null)throw Error(r(349));(Xt&127)!==0||Dx(d,u,f)}y.memoizedState=f;var _={value:f,getSnapshot:u};return y.queue=_,Kx(Nx.bind(null,d,_,s),[s]),d.flags|=2048,Yu(9,{destroy:void 0},Ox.bind(null,d,_,f,u),null),f},useId:function(){var s=nr(),u=Se.identifierPrefix;if(Qt){var f=ji,d=zi;f=(d&~(1<<32-qe(d)-1)).toString(32)+f,u="_"+u+"R_"+f,f=Md++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=l6++,u="_"+u+"r_"+f.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:Cg,useFormState:zx,useActionState:zx,useOptimistic:function(s){var u=nr();u.memoizedState=u.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=bg.bind(null,Lt,!0,f),f.dispatch=u,[s,u]},useMemoCache:vg,useCacheRefresh:function(){return nr().memoizedState=g6.bind(null,Lt)},useEffectEvent:function(s){var u=nr(),f={impl:s};return u.memoizedState=f,function(){if((oe&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},Rg={readContext:Vn,use:Ld,useCallback:Zx,useContext:Vn,useEffect:wg,useImperativeHandle:Qx,useInsertionEffect:Wx,useLayoutEffect:Yx,useMemo:Jx,useReducer:kd,useRef:qx,useState:function(){return kd(pa)},useDebugValue:Tg,useDeferredValue:function(s,u){var f=We();return tE(f,Ee.memoizedState,s,u)},useTransition:function(){var s=kd(pa)[0],u=We().memoizedState;return[typeof s=="boolean"?s:Yc(s),u]},useSyncExternalStore:Rx,useId:iE,useHostTransitionStatus:Cg,useFormState:jx,useActionState:jx,useOptimistic:function(s,u){var f=We();return Vx(f,Ee,s,u)},useMemoCache:vg,useCacheRefresh:aE};Rg.useEffectEvent=Xx;var cE={readContext:Vn,use:Ld,useCallback:Zx,useContext:Vn,useEffect:wg,useImperativeHandle:Qx,useInsertionEffect:Wx,useLayoutEffect:Yx,useMemo:Jx,useReducer:xg,useRef:qx,useState:function(){return xg(pa)},useDebugValue:Tg,useDeferredValue:function(s,u){var f=We();return Ee===null?Sg(f,s,u):tE(f,Ee.memoizedState,s,u)},useTransition:function(){var s=xg(pa)[0],u=We().memoizedState;return[typeof s=="boolean"?s:Yc(s),u]},useSyncExternalStore:Rx,useId:iE,useHostTransitionStatus:Cg,useFormState:Gx,useActionState:Gx,useOptimistic:function(s,u){var f=We();return Ee!==null?Vx(f,Ee,s,u):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:vg,useCacheRefresh:aE};cE.useEffectEvent=Xx;function Dg(s,u,f,d){u=s.memoizedState,f=f(d,u),f=f==null?u:g({},u,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Og={enqueueSetState:function(s,u,f){s=s._reactInternals;var d=Dr(),y=is(d);y.payload=u,f!=null&&(y.callback=f),u=as(s,y,d),u!==null&&(pr(u,s,d),qc(u,s,d))},enqueueReplaceState:function(s,u,f){s=s._reactInternals;var d=Dr(),y=is(d);y.tag=1,y.payload=u,f!=null&&(y.callback=f),u=as(s,y,d),u!==null&&(pr(u,s,d),qc(u,s,d))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var f=Dr(),d=is(f);d.tag=2,u!=null&&(d.callback=u),u=as(s,d,f),u!==null&&(pr(u,s,f),qc(u,s,f))}};function fE(s,u,f,d,y,_,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,_,w):u.prototype&&u.prototype.isPureReactComponent?!kc(f,d)||!kc(y,_):!0}function hE(s,u,f,d){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,d),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,d),u.state!==s&&Og.enqueueReplaceState(u,u.state,null)}function Do(s,u){var f=u;if("ref"in u){f={};for(var d in u)d!=="ref"&&(f[d]=u[d])}if(s=s.defaultProps){f===u&&(f=g({},f));for(var y in s)f[y]===void 0&&(f[y]=s[y])}return f}function dE(s){vd(s)}function pE(s){console.error(s)}function gE(s){vd(s)}function zd(s,u){try{var f=s.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(d){setTimeout(function(){throw d})}}function mE(s,u,f){try{var d=s.onCaughtError;d(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ng(s,u,f){return f=is(f),f.tag=3,f.payload={element:null},f.callback=function(){zd(s,u)},f}function yE(s){return s=is(s),s.tag=3,s}function vE(s,u,f,d){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var _=d.value;s.payload=function(){return y(_)},s.callback=function(){mE(u,f,d)}}var w=f.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){mE(u,f,d),typeof y!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var b=d.stack;this.componentDidCatch(d.value,{componentStack:b!==null?b:""})})}function y6(s,u,f,d,y){if(f.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(u=f.alternate,u!==null&&zu(u,f,y,!0),f=Ir.current,f!==null){switch(f.tag){case 31:case 13:return Kr===null?Jd():f.alternate===null&&je===0&&(je=3),f.flags&=-257,f.flags|=65536,f.lanes=y,d===bd?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([d]):u.add(d),rm(s,d,y)),!1;case 22:return f.flags|=65536,d===bd?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([d])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([d]):f.add(d)),rm(s,d,y)),!1}throw Error(r(435,f.tag))}return rm(s,d,y),Jd(),!1}if(Qt)return u=Ir.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=y,d!==Qp&&(s=Error(r(422),{cause:d}),Uc(jr(s,f)))):(d!==Qp&&(u=Error(r(423),{cause:d}),Uc(jr(u,f))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,d=jr(d,f),y=Ng(s.stateNode,d,y),ug(s,y),je!==4&&(je=2)),!1;var _=Error(r(520),{cause:d});if(_=jr(_,f),sf===null?sf=[_]:sf.push(_),je!==4&&(je=2),u===null)return!0;d=jr(d,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,s=y&-y,f.lanes|=s,s=Ng(f.stateNode,d,s),ug(f,s),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fs===null||!fs.has(_))))return f.flags|=65536,y&=-y,f.lanes|=y,y=yE(y),vE(y,s,f,d),ug(f,y),!1}f=f.return}while(f!==null);return!1}var Pg=Error(r(461)),sn=!1;function Ln(s,u,f,d){u.child=s===null?Ax(u,null,f,d):bo(u,s.child,f,d)}function _E(s,u,f,d,y){f=f.render;var _=u.ref;if("ref"in d){var w={};for(var b in d)b!=="ref"&&(w[b]=d[b])}else w=d;return To(u),d=pg(s,u,f,w,_,y),b=gg(),s!==null&&!sn?(mg(s,u,y),ga(s,u,y)):(Qt&&b&&Yp(u),u.flags|=1,Ln(s,u,d,y),u.child)}function xE(s,u,f,d,y){if(s===null){var _=f.type;return typeof _=="function"&&!Kp(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,EE(s,u,_,d,y)):(s=Ad(f.type,null,d,u,u.mode,y),s.ref=u.ref,s.return=u,u.child=s)}if(_=s.child,!zg(s,y)){var w=_.memoizedProps;if(f=f.compare,f=f!==null?f:kc,f(w,d)&&s.ref===u.ref)return ga(s,u,y)}return u.flags|=1,s=la(_,d),s.ref=u.ref,s.return=u,u.child=s}function EE(s,u,f,d,y){if(s!==null){var _=s.memoizedProps;if(kc(_,d)&&s.ref===u.ref)if(sn=!1,u.pendingProps=d=_,zg(s,y))(s.flags&131072)!==0&&(sn=!0);else return u.lanes=s.lanes,ga(s,u,y)}return Mg(s,u,f,d,y)}function AE(s,u,f,d){var y=d.children,_=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,s!==null){for(d=u.child=s.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~_}else d=0,u.child=null;return wE(s,u,_,f,d)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&Id(u,_!==null?_.cachePool:null),_!==null?Sx(u,_):cg(),Ix(u);else return d=u.lanes=536870912,wE(s,u,_!==null?_.baseLanes|f:f,f,d)}else _!==null?(Id(u,_.cachePool),Sx(u,_),os(),u.memoizedState=null):(s!==null&&Id(u,null),cg(),os());return Ln(s,u,y,f),u.child}function Zc(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function wE(s,u,f,d,y){var _=ig();return _=_===null?null:{parent:rn._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},s!==null&&Id(u,null),cg(),Ix(u),s!==null&&zu(s,u,d,!0),u.childLanes=y,null}function jd(s,u){return u=Gd({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function TE(s,u,f){return bo(u,s.child,null,f),s=jd(u,u.pendingProps),s.flags|=2,Cr(u),u.memoizedState=null,s}function v6(s,u,f){var d=u.pendingProps,y=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(Qt){if(d.mode==="hidden")return s=jd(u,d),u.lanes=536870912,Zc(null,s);if(hg(u),(s=be)?(s=LA(s,qr),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Ja!==null?{id:zi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},f=ox(s),f.return=u,u.child=f,Mn=u,be=null)):s=null,s===null)throw es(u);return u.lanes=536870912,null}return jd(u,d)}var _=s.memoizedState;if(_!==null){var w=_.dehydrated;if(hg(u),y)if(u.flags&256)u.flags&=-257,u=TE(s,u,f);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(r(558));else if(sn||zu(s,u,f,!1),y=(f&s.childLanes)!==0,sn||y){if(d=Se,d!==null&&(w=_c(d,f),w!==0&&w!==_.retryLane))throw _.retryLane=w,xo(s,w),pr(d,s,w),Pg;Jd(),u=TE(s,u,f)}else s=_.treeContext,be=Xr(w.nextSibling),Mn=u,Qt=!0,ts=null,qr=!1,s!==null&&cx(u,s),u=jd(u,d),u.flags|=4096;return u}return s=la(s.child,{mode:d.mode,children:d.children}),s.ref=u.ref,u.child=s,s.return=u,s}function Hd(s,u){var f=u.ref;if(f===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(u.flags|=4194816)}}function Mg(s,u,f,d,y){return To(u),f=pg(s,u,f,d,void 0,y),d=gg(),s!==null&&!sn?(mg(s,u,y),ga(s,u,y)):(Qt&&d&&Yp(u),u.flags|=1,Ln(s,u,f,y),u.child)}function SE(s,u,f,d,y,_){return To(u),u.updateQueue=null,f=bx(u,d,f,y),Cx(s),d=gg(),s!==null&&!sn?(mg(s,u,_),ga(s,u,_)):(Qt&&d&&Yp(u),u.flags|=1,Ln(s,u,f,_),u.child)}function IE(s,u,f,d,y){if(To(u),u.stateNode===null){var _=ku,w=f.contextType;typeof w=="object"&&w!==null&&(_=Vn(w)),_=new f(d,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Og,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=d,_.state=u.memoizedState,_.refs={},sg(u),w=f.contextType,_.context=typeof w=="object"&&w!==null?Vn(w):ku,_.state=u.memoizedState,w=f.getDerivedStateFromProps,typeof w=="function"&&(Dg(u,f,w,d),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&Og.enqueueReplaceState(_,_.state,null),Xc(u,d,_,y),Kc(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),d=!0}else if(s===null){_=u.stateNode;var b=u.memoizedProps,z=Do(f,b);_.props=z;var Z=_.context,it=f.contextType;w=ku,typeof it=="object"&&it!==null&&(w=Vn(it));var ut=f.getDerivedStateFromProps;it=typeof ut=="function"||typeof _.getSnapshotBeforeUpdate=="function",b=u.pendingProps!==b,it||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b||Z!==w)&&hE(u,_,d,w),rs=!1;var J=u.memoizedState;_.state=J,Xc(u,d,_,y),Kc(),Z=u.memoizedState,b||J!==Z||rs?(typeof ut=="function"&&(Dg(u,f,ut,d),Z=u.memoizedState),(z=rs||fE(u,f,z,d,J,Z,w))?(it||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=d,u.memoizedState=Z),_.props=d,_.state=Z,_.context=w,d=z):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),d=!1)}else{_=u.stateNode,og(s,u),w=u.memoizedProps,it=Do(f,w),_.props=it,ut=u.pendingProps,J=_.context,Z=f.contextType,z=ku,typeof Z=="object"&&Z!==null&&(z=Vn(Z)),b=f.getDerivedStateFromProps,(Z=typeof b=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ut||J!==z)&&hE(u,_,d,z),rs=!1,J=u.memoizedState,_.state=J,Xc(u,d,_,y),Kc();var et=u.memoizedState;w!==ut||J!==et||rs||s!==null&&s.dependencies!==null&&Td(s.dependencies)?(typeof b=="function"&&(Dg(u,f,b,d),et=u.memoizedState),(it=rs||fE(u,f,it,d,J,et,z)||s!==null&&s.dependencies!==null&&Td(s.dependencies))?(Z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,et,z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,et,z)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&J===s.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&J===s.memoizedState||(u.flags|=1024),u.memoizedProps=d,u.memoizedState=et),_.props=d,_.state=et,_.context=z,d=it):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&J===s.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&J===s.memoizedState||(u.flags|=1024),d=!1)}return _=d,Hd(s,u),d=(u.flags&128)!==0,_||d?(_=u.stateNode,f=d&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,s!==null&&d?(u.child=bo(u,s.child,null,y),u.child=bo(u,null,f,y)):Ln(s,u,f,y),u.memoizedState=_.state,s=u.child):s=ga(s,u,y),s}function CE(s,u,f,d){return Ao(),u.flags|=256,Ln(s,u,f,d),u.child}var Vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lg(s){return{baseLanes:s,cachePool:mx()}}function kg(s,u,f){return s=s!==null?s.childLanes&~f:0,u&&(s|=Rr),s}function bE(s,u,f){var d=u.pendingProps,y=!1,_=(u.flags&128)!==0,w;if((w=_)||(w=s!==null&&s.memoizedState===null?!1:(Xe.current&2)!==0),w&&(y=!0,u.flags&=-129),w=(u.flags&32)!==0,u.flags&=-33,s===null){if(Qt){if(y?ss(u):os(),(s=be)?(s=LA(s,qr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Ja!==null?{id:zi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},f=ox(s),f.return=u,u.child=f,Mn=u,be=null)):s=null,s===null)throw es(u);return _m(s)?u.lanes=32:u.lanes=536870912,null}var b=d.children;return d=d.fallback,y?(os(),y=u.mode,b=Gd({mode:"hidden",children:b},y),d=Eo(d,y,f,null),b.return=u,d.return=u,b.sibling=d,u.child=b,d=u.child,d.memoizedState=Lg(f),d.childLanes=kg(s,w,f),u.memoizedState=Vg,Zc(null,d)):(ss(u),Bg(u,b))}var z=s.memoizedState;if(z!==null&&(b=z.dehydrated,b!==null)){if(_)u.flags&256?(ss(u),u.flags&=-257,u=Fg(s,u,f)):u.memoizedState!==null?(os(),u.child=s.child,u.flags|=128,u=null):(os(),b=d.fallback,y=u.mode,d=Gd({mode:"visible",children:d.children},y),b=Eo(b,y,f,null),b.flags|=2,d.return=u,b.return=u,d.sibling=b,u.child=d,bo(u,s.child,null,f),d=u.child,d.memoizedState=Lg(f),d.childLanes=kg(s,w,f),u.memoizedState=Vg,u=Zc(null,d));else if(ss(u),_m(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var Z=w.dgst;w=Z,d=Error(r(419)),d.stack="",d.digest=w,Uc({value:d,source:null,stack:null}),u=Fg(s,u,f)}else if(sn||zu(s,u,f,!1),w=(f&s.childLanes)!==0,sn||w){if(w=Se,w!==null&&(d=_c(w,f),d!==0&&d!==z.retryLane))throw z.retryLane=d,xo(s,d),pr(w,s,d),Pg;vm(b)||Jd(),u=Fg(s,u,f)}else vm(b)?(u.flags|=192,u.child=s.child,u=null):(s=z.treeContext,be=Xr(b.nextSibling),Mn=u,Qt=!0,ts=null,qr=!1,s!==null&&cx(u,s),u=Bg(u,d.children),u.flags|=4096);return u}return y?(os(),b=d.fallback,y=u.mode,z=s.child,Z=z.sibling,d=la(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,Z!==null?b=la(Z,b):(b=Eo(b,y,f,null),b.flags|=2),b.return=u,d.return=u,d.sibling=b,u.child=d,Zc(null,d),d=u.child,b=s.child.memoizedState,b===null?b=Lg(f):(y=b.cachePool,y!==null?(z=rn._currentValue,y=y.parent!==z?{parent:z,pool:z}:y):y=mx(),b={baseLanes:b.baseLanes|f,cachePool:y}),d.memoizedState=b,d.childLanes=kg(s,w,f),u.memoizedState=Vg,Zc(s.child,d)):(ss(u),f=s.child,s=f.sibling,f=la(f,{mode:"visible",children:d.children}),f.return=u,f.sibling=null,s!==null&&(w=u.deletions,w===null?(u.deletions=[s],u.flags|=16):w.push(s)),u.child=f,u.memoizedState=null,f)}function Bg(s,u){return u=Gd({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function Gd(s,u){return s=Sr(22,s,null,u),s.lanes=0,s}function Fg(s,u,f){return bo(u,s.child,null,f),s=Bg(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function RE(s,u,f){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u),tg(s.return,u,f)}function Ug(s,u,f,d,y,_){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:d,tail:f,tailMode:y,treeForkCount:_}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=f,w.tailMode=y,w.treeForkCount=_)}function DE(s,u,f){var d=u.pendingProps,y=d.revealOrder,_=d.tail;d=d.children;var w=Xe.current,b=(w&2)!==0;if(b?(w=w&1|2,u.flags|=128):w&=1,mt(Xe,w),Ln(s,u,d,f),d=Qt?Fc:0,!b&&s!==null&&(s.flags&128)!==0)t:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&RE(s,f,u);else if(s.tag===19)RE(s,f,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break t;for(;s.sibling===null;){if(s.return===null||s.return===u)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(f=u.child,y=null;f!==null;)s=f.alternate,s!==null&&Nd(s)===null&&(y=f),f=f.sibling;f=y,f===null?(y=u.child,u.child=null):(y=f.sibling,f.sibling=null),Ug(u,!1,y,f,_,d);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=u.child,u.child=null;y!==null;){if(s=y.alternate,s!==null&&Nd(s)===null){u.child=y;break}s=y.sibling,y.sibling=f,f=y,y=s}Ug(u,!0,f,null,_,d);break;case"together":Ug(u,!1,null,null,void 0,d);break;default:u.memoizedState=null}return u.child}function ga(s,u,f){if(s!==null&&(u.dependencies=s.dependencies),cs|=u.lanes,(f&u.childLanes)===0)if(s!==null){if(zu(s,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(r(153));if(u.child!==null){for(s=u.child,f=la(s,s.pendingProps),u.child=f,f.return=u;s.sibling!==null;)s=s.sibling,f=f.sibling=la(s,s.pendingProps),f.return=u;f.sibling=null}return u.child}function zg(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&Td(s)))}function _6(s,u,f){switch(u.tag){case 3:fn(u,u.stateNode.containerInfo),ns(u,rn,s.memoizedState.cache),Ao();break;case 27:case 5:eo(u);break;case 4:fn(u,u.stateNode.containerInfo);break;case 10:ns(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,hg(u),null;break;case 13:var d=u.memoizedState;if(d!==null)return d.dehydrated!==null?(ss(u),u.flags|=128,null):(f&u.child.childLanes)!==0?bE(s,u,f):(ss(u),s=ga(s,u,f),s!==null?s.sibling:null);ss(u);break;case 19:var y=(s.flags&128)!==0;if(d=(f&u.childLanes)!==0,d||(zu(s,u,f,!1),d=(f&u.childLanes)!==0),y){if(d)return DE(s,u,f);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),mt(Xe,Xe.current),d)break;return null;case 22:return u.lanes=0,AE(s,u,f,u.pendingProps);case 24:ns(u,rn,s.memoizedState.cache)}return ga(s,u,f)}function OE(s,u,f){if(s!==null)if(s.memoizedProps!==u.pendingProps)sn=!0;else{if(!zg(s,f)&&(u.flags&128)===0)return sn=!1,_6(s,u,f);sn=(s.flags&131072)!==0}else sn=!1,Qt&&(u.flags&1048576)!==0&&lx(u,Fc,u.index);switch(u.lanes=0,u.tag){case 16:t:{var d=u.pendingProps;if(s=Io(u.elementType),u.type=s,typeof s=="function")Kp(s)?(d=Do(s,d),u.tag=1,u=IE(null,u,s,d,f)):(u.tag=0,u=Mg(null,u,s,d,f));else{if(s!=null){var y=s.$$typeof;if(y===k){u.tag=11,u=_E(null,u,s,d,f);break t}else if(y===R){u.tag=14,u=xE(null,u,s,d,f);break t}}throw u=Ut(s)||s,Error(r(306,u,""))}}return u;case 0:return Mg(s,u,u.type,u.pendingProps,f);case 1:return d=u.type,y=Do(d,u.pendingProps),IE(s,u,d,y,f);case 3:t:{if(fn(u,u.stateNode.containerInfo),s===null)throw Error(r(387));d=u.pendingProps;var _=u.memoizedState;y=_.element,og(s,u),Xc(u,d,null,f);var w=u.memoizedState;if(d=w.cache,ns(u,rn,d),d!==_.cache&&eg(u,[rn],f,!0),Kc(),d=w.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:w.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=CE(s,u,d,f);break t}else if(d!==y){y=jr(Error(r(424)),u),Uc(y),u=CE(s,u,d,f);break t}else for(s=u.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,be=Xr(s.firstChild),Mn=u,Qt=!0,ts=null,qr=!0,f=Ax(u,null,d,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Ao(),d===y){u=ga(s,u,f);break t}Ln(s,u,d,f)}u=u.child}return u;case 26:return Hd(s,u),s===null?(f=jA(u.type,null,u.pendingProps,null))?u.memoizedState=f:Qt||(f=u.type,s=u.pendingProps,d=s0(Bt.current).createElement(f),d[tn]=u,d[wn]=s,kn(d,f,s),en(d),u.stateNode=d):u.memoizedState=jA(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return eo(u),s===null&&Qt&&(d=u.stateNode=FA(u.type,u.pendingProps,Bt.current),Mn=u,qr=!0,y=be,gs(u.type)?(xm=y,be=Xr(d.firstChild)):be=y),Ln(s,u,u.pendingProps.children,f),Hd(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&Qt&&((y=d=be)&&(d=Y6(d,u.type,u.pendingProps,qr),d!==null?(u.stateNode=d,Mn=u,be=Xr(d.firstChild),qr=!1,y=!0):y=!1),y||es(u)),eo(u),y=u.type,_=u.pendingProps,w=s!==null?s.memoizedProps:null,d=_.children,gm(y,_)?d=null:w!==null&&gm(y,w)&&(u.flags|=32),u.memoizedState!==null&&(y=pg(s,u,c6,null,null,f),pf._currentValue=y),Hd(s,u),Ln(s,u,d,f),u.child;case 6:return s===null&&Qt&&((s=f=be)&&(f=$6(f,u.pendingProps,qr),f!==null?(u.stateNode=f,Mn=u,be=null,s=!0):s=!1),s||es(u)),null;case 13:return bE(s,u,f);case 4:return fn(u,u.stateNode.containerInfo),d=u.pendingProps,s===null?u.child=bo(u,null,d,f):Ln(s,u,d,f),u.child;case 11:return _E(s,u,u.type,u.pendingProps,f);case 7:return Ln(s,u,u.pendingProps,f),u.child;case 8:return Ln(s,u,u.pendingProps.children,f),u.child;case 12:return Ln(s,u,u.pendingProps.children,f),u.child;case 10:return d=u.pendingProps,ns(u,u.type,d.value),Ln(s,u,d.children,f),u.child;case 9:return y=u.type._context,d=u.pendingProps.children,To(u),y=Vn(y),d=d(y),u.flags|=1,Ln(s,u,d,f),u.child;case 14:return xE(s,u,u.type,u.pendingProps,f);case 15:return EE(s,u,u.type,u.pendingProps,f);case 19:return DE(s,u,f);case 31:return v6(s,u,f);case 22:return AE(s,u,f,u.pendingProps);case 24:return To(u),d=Vn(rn),s===null?(y=ig(),y===null&&(y=Se,_=ng(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=f),y=_),u.memoizedState={parent:d,cache:y},sg(u),ns(u,rn,y)):((s.lanes&f)!==0&&(og(s,u),Xc(u,null,null,f),Kc()),y=s.memoizedState,_=u.memoizedState,y.parent!==d?(y={parent:d,cache:d},u.memoizedState=y,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=y),ns(u,rn,d)):(d=_.cache,ns(u,rn,d),d!==y.cache&&eg(u,[rn],f,!0))),Ln(s,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function ma(s){s.flags|=4}function jg(s,u,f,d,y){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(iA())s.flags|=8192;else throw Co=bd,ag}else s.flags&=-16777217}function NE(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!XA(u))if(iA())s.flags|=8192;else throw Co=bd,ag}function qd(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?Qh():536870912,s.lanes|=u,Ju|=u)}function Jc(s,u){if(!Qt)switch(s.tailMode){case"hidden":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var d=null;f!==null;)f.alternate!==null&&(d=f),f=f.sibling;d===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Re(s){var u=s.alternate!==null&&s.alternate.child===s.child,f=0,d=0;if(u)for(var y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)f|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=d,s.childLanes=f,u}function x6(s,u,f){var d=u.pendingProps;switch($p(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(u),null;case 1:return Re(u),null;case 3:return f=u.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),ha(rn),Me(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Uu(u)?ma(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Zp())),Re(u),null;case 26:var y=u.type,_=u.memoizedState;return s===null?(ma(u),_!==null?(Re(u),NE(u,_)):(Re(u),jg(u,y,null,d,f))):_?_!==s.memoizedState?(ma(u),Re(u),NE(u,_)):(Re(u),u.flags&=-16777217):(s=s.memoizedProps,s!==d&&ma(u),Re(u),jg(u,y,s,d,f)),null;case 27:if(vu(u),f=Bt.current,y=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==d&&ma(u);else{if(!d){if(u.stateNode===null)throw Error(r(166));return Re(u),null}s=vt.current,Uu(u)?fx(u):(s=FA(y,d,f),u.stateNode=s,ma(u))}return Re(u),null;case 5:if(vu(u),y=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==d&&ma(u);else{if(!d){if(u.stateNode===null)throw Error(r(166));return Re(u),null}if(_=vt.current,Uu(u))fx(u);else{var w=s0(Bt.current);switch(_){case 1:_=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=w.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?_.multiple=!0:d.size&&(_.size=d.size);break;default:_=typeof d.is=="string"?w.createElement(y,{is:d.is}):w.createElement(y)}}_[tn]=u,_[wn]=d;t:for(w=u.child;w!==null;){if(w.tag===5||w.tag===6)_.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===u)break t;for(;w.sibling===null;){if(w.return===null||w.return===u)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}u.stateNode=_;t:switch(kn(_,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&ma(u)}}return Re(u),jg(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,f),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==d&&ma(u);else{if(typeof d!="string"&&u.stateNode===null)throw Error(r(166));if(s=Bt.current,Uu(u)){if(s=u.stateNode,f=u.memoizedProps,d=null,y=Mn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}s[tn]=u,s=!!(s.nodeValue===f||d!==null&&d.suppressHydrationWarning===!0||bA(s.nodeValue,f)),s||es(u,!0)}else s=s0(s).createTextNode(d),s[tn]=u,u.stateNode=s}return Re(u),null;case 31:if(f=u.memoizedState,s===null||s.memoizedState!==null){if(d=Uu(u),f!==null){if(s===null){if(!d)throw Error(r(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[tn]=u}else Ao(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Re(u),s=!1}else f=Zp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return u.flags&256?(Cr(u),u):(Cr(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Re(u),null;case 13:if(d=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Uu(u),d!==null&&d.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=u.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[tn]=u}else Ao(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Re(u),y=!1}else y=Zp(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return u.flags&256?(Cr(u),u):(Cr(u),null)}return Cr(u),(u.flags&128)!==0?(u.lanes=f,u):(f=d!==null,s=s!==null&&s.memoizedState!==null,f&&(d=u.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==y&&(d.flags|=2048)),f!==s&&f&&(u.child.flags|=8192),qd(u,u.updateQueue),Re(u),null);case 4:return Me(),s===null&&cm(u.stateNode.containerInfo),Re(u),null;case 10:return ha(u.type),Re(u),null;case 19:if(lt(Xe),d=u.memoizedState,d===null)return Re(u),null;if(y=(u.flags&128)!==0,_=d.rendering,_===null)if(y)Jc(d,!1);else{if(je!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(_=Nd(s),_!==null){for(u.flags|=128,Jc(d,!1),s=_.updateQueue,u.updateQueue=s,qd(u,s),u.subtreeFlags=0,s=f,f=u.child;f!==null;)sx(f,s),f=f.sibling;return mt(Xe,Xe.current&1|2),Qt&&ca(u,d.treeForkCount),u.child}s=s.sibling}d.tail!==null&&tr()>$d&&(u.flags|=128,y=!0,Jc(d,!1),u.lanes=4194304)}else{if(!y)if(s=Nd(_),s!==null){if(u.flags|=128,y=!0,s=s.updateQueue,u.updateQueue=s,qd(u,s),Jc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!Qt)return Re(u),null}else 2*tr()-d.renderingStartTime>$d&&f!==536870912&&(u.flags|=128,y=!0,Jc(d,!1),u.lanes=4194304);d.isBackwards?(_.sibling=u.child,u.child=_):(s=d.last,s!==null?s.sibling=_:u.child=_,d.last=_)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=tr(),s.sibling=null,f=Xe.current,mt(Xe,y?f&1|2:f&1),Qt&&ca(u,d.treeForkCount),s):(Re(u),null);case 22:case 23:return Cr(u),fg(),d=u.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(u.flags|=8192):d&&(u.flags|=8192),d?(f&536870912)!==0&&(u.flags&128)===0&&(Re(u),u.subtreeFlags&6&&(u.flags|=8192)):Re(u),f=u.updateQueue,f!==null&&qd(u,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==f&&(u.flags|=2048),s!==null&&lt(So),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ha(rn),Re(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function E6(s,u){switch($p(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return ha(rn),Me(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return vu(u),null;case 31:if(u.memoizedState!==null){if(Cr(u),u.alternate===null)throw Error(r(340));Ao()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if(Cr(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ao()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return lt(Xe),null;case 4:return Me(),null;case 10:return ha(u.type),null;case 22:case 23:return Cr(u),fg(),s!==null&&lt(So),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return ha(rn),null;case 25:return null;default:return null}}function PE(s,u){switch($p(u),u.tag){case 3:ha(rn),Me();break;case 26:case 27:case 5:vu(u);break;case 4:Me();break;case 31:u.memoizedState!==null&&Cr(u);break;case 13:Cr(u);break;case 19:lt(Xe);break;case 10:ha(u.type);break;case 22:case 23:Cr(u),fg(),s!==null&&lt(So);break;case 24:ha(rn)}}function tf(s,u){try{var f=u.updateQueue,d=f!==null?f.lastEffect:null;if(d!==null){var y=d.next;f=y;do{if((f.tag&s)===s){d=void 0;var _=f.create,w=f.inst;d=_(),w.destroy=d}f=f.next}while(f!==y)}}catch(b){pe(u,u.return,b)}}function us(s,u,f){try{var d=u.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var _=y.next;d=_;do{if((d.tag&s)===s){var w=d.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,y=u;var z=f,Z=b;try{Z()}catch(it){pe(y,z,it)}}}d=d.next}while(d!==_)}}catch(it){pe(u,u.return,it)}}function ME(s){var u=s.updateQueue;if(u!==null){var f=s.stateNode;try{Tx(u,f)}catch(d){pe(s,s.return,d)}}}function VE(s,u,f){f.props=Do(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(d){pe(s,u,d)}}function ef(s,u){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof f=="function"?s.refCleanup=f(d):f.current=d}}catch(y){pe(s,u,y)}}function Hi(s,u){var f=s.ref,d=s.refCleanup;if(f!==null)if(typeof d=="function")try{d()}catch(y){pe(s,u,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){pe(s,u,y)}else f.current=null}function LE(s){var u=s.type,f=s.memoizedProps,d=s.stateNode;try{t:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&d.focus();break t;case"img":f.src?d.src=f.src:f.srcSet&&(d.srcset=f.srcSet)}}catch(y){pe(s,s.return,y)}}function Hg(s,u,f){try{var d=s.stateNode;H6(d,s.type,f,u),d[wn]=u}catch(y){pe(s,s.return,y)}}function kE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&gs(s.type)||s.tag===4}function Gg(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||kE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&gs(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function qg(s,u,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(s),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=si));else if(d!==4&&(d===27&&gs(s.type)&&(f=s.stateNode,u=null),s=s.child,s!==null))for(qg(s,u,f),s=s.sibling;s!==null;)qg(s,u,f),s=s.sibling}function Kd(s,u,f){var d=s.tag;if(d===5||d===6)s=s.stateNode,u?f.insertBefore(s,u):f.appendChild(s);else if(d!==4&&(d===27&&gs(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Kd(s,u,f),s=s.sibling;s!==null;)Kd(s,u,f),s=s.sibling}function BE(s){var u=s.stateNode,f=s.memoizedProps;try{for(var d=s.type,y=u.attributes;y.length;)u.removeAttributeNode(y[0]);kn(u,d,f),u[tn]=s,u[wn]=f}catch(_){pe(s,s.return,_)}}var ya=!1,on=!1,Kg=!1,FE=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function A6(s,u){if(s=s.containerInfo,dm=d0,s=Q2(s),Fp(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else t:{f=(f=s.ownerDocument)&&f.defaultView||window;var d=f.getSelection&&f.getSelection();if(d&&d.rangeCount!==0){f=d.anchorNode;var y=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break t}var w=0,b=-1,z=-1,Z=0,it=0,ut=s,J=null;e:for(;;){for(var et;ut!==f||y!==0&&ut.nodeType!==3||(b=w+y),ut!==_||d!==0&&ut.nodeType!==3||(z=w+d),ut.nodeType===3&&(w+=ut.nodeValue.length),(et=ut.firstChild)!==null;)J=ut,ut=et;for(;;){if(ut===s)break e;if(J===f&&++Z===y&&(b=w),J===_&&++it===d&&(z=w),(et=ut.nextSibling)!==null)break;ut=J,J=ut.parentNode}ut=et}f=b===-1||z===-1?null:{start:b,end:z}}else f=null}f=f||{start:0,end:0}}else f=null;for(pm={focusedElem:s,selectionRange:f},d0=!1,Sn=u;Sn!==null;)if(u=Sn,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,Sn=s;else for(;Sn!==null;){switch(u=Sn,_=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)y=s[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,f=u,y=_.memoizedProps,_=_.memoizedState,d=f.stateNode;try{var xt=Do(f.type,y);s=d.getSnapshotBeforeUpdate(xt,_),d.__reactInternalSnapshotBeforeUpdate=s}catch(Rt){pe(f,f.return,Rt)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,f=s.nodeType,f===9)ym(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ym(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=u.sibling,s!==null){s.return=u.return,Sn=s;break}Sn=u.return}}function UE(s,u,f){var d=f.flags;switch(f.tag){case 0:case 11:case 15:_a(s,f),d&4&&tf(5,f);break;case 1:if(_a(s,f),d&4)if(s=f.stateNode,u===null)try{s.componentDidMount()}catch(w){pe(f,f.return,w)}else{var y=Do(f.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(y,u,s.__reactInternalSnapshotBeforeUpdate)}catch(w){pe(f,f.return,w)}}d&64&&ME(f),d&512&&ef(f,f.return);break;case 3:if(_a(s,f),d&64&&(s=f.updateQueue,s!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{Tx(s,u)}catch(w){pe(f,f.return,w)}}break;case 27:u===null&&d&4&&BE(f);case 26:case 5:_a(s,f),u===null&&d&4&&LE(f),d&512&&ef(f,f.return);break;case 12:_a(s,f);break;case 31:_a(s,f),d&4&&HE(s,f);break;case 13:_a(s,f),d&4&&GE(s,f),d&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=O6.bind(null,f),Q6(s,f))));break;case 22:if(d=f.memoizedState!==null||ya,!d){u=u!==null&&u.memoizedState!==null||on,y=ya;var _=on;ya=d,(on=u)&&!_?xa(s,f,(f.subtreeFlags&8772)!==0):_a(s,f),ya=y,on=_}break;case 30:break;default:_a(s,f)}}function zE(s){var u=s.alternate;u!==null&&(s.alternate=null,zE(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&wu(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Le=null,cr=!1;function va(s,u,f){for(f=f.child;f!==null;)jE(s,u,f),f=f.sibling}function jE(s,u,f){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(ni,f)}catch{}switch(f.tag){case 26:on||Hi(f,u),va(s,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:on||Hi(f,u);var d=Le,y=cr;gs(f.type)&&(Le=f.stateNode,cr=!1),va(s,u,f),ff(f.stateNode),Le=d,cr=y;break;case 5:on||Hi(f,u);case 6:if(d=Le,y=cr,Le=null,va(s,u,f),Le=d,cr=y,Le!==null)if(cr)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(f.stateNode)}catch(_){pe(f,u,_)}else try{Le.removeChild(f.stateNode)}catch(_){pe(f,u,_)}break;case 18:Le!==null&&(cr?(s=Le,MA(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),ol(s)):MA(Le,f.stateNode));break;case 4:d=Le,y=cr,Le=f.stateNode.containerInfo,cr=!0,va(s,u,f),Le=d,cr=y;break;case 0:case 11:case 14:case 15:us(2,f,u),on||us(4,f,u),va(s,u,f);break;case 1:on||(Hi(f,u),d=f.stateNode,typeof d.componentWillUnmount=="function"&&VE(f,u,d)),va(s,u,f);break;case 21:va(s,u,f);break;case 22:on=(d=on)||f.memoizedState!==null,va(s,u,f),on=d;break;default:va(s,u,f)}}function HE(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ol(s)}catch(f){pe(u,u.return,f)}}}function GE(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ol(s)}catch(f){pe(u,u.return,f)}}function w6(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new FE),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new FE),u;default:throw Error(r(435,s.tag))}}function Xd(s,u){var f=w6(s);u.forEach(function(d){if(!f.has(d)){f.add(d);var y=N6.bind(null,s,d);d.then(y,y)}})}function fr(s,u){var f=u.deletions;if(f!==null)for(var d=0;d<f.length;d++){var y=f[d],_=s,w=u,b=w;t:for(;b!==null;){switch(b.tag){case 27:if(gs(b.type)){Le=b.stateNode,cr=!1;break t}break;case 5:Le=b.stateNode,cr=!1;break t;case 3:case 4:Le=b.stateNode.containerInfo,cr=!0;break t}b=b.return}if(Le===null)throw Error(r(160));jE(_,w,y),Le=null,cr=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)qE(u,s),u=u.sibling}var hi=null;function qE(s,u){var f=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:fr(u,s),hr(s),d&4&&(us(3,s,s.return),tf(3,s),us(5,s,s.return));break;case 1:fr(u,s),hr(s),d&512&&(on||f===null||Hi(f,f.return)),d&64&&ya&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?d:f.concat(d))));break;case 26:var y=hi;if(fr(u,s),hr(s),d&512&&(on||f===null||Hi(f,f.return)),d&4){var _=f!==null?f.memoizedState:null;if(d=s.memoizedState,f===null)if(d===null)if(s.stateNode===null){t:{d=s.type,f=s.memoizedProps,y=y.ownerDocument||y;e:switch(d){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Ri]||_[tn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(d),y.head.insertBefore(_,y.querySelector("head > title"))),kn(_,d,f),_[tn]=s,en(_),d=_;break t;case"link":var w=qA("link","href",y).get(d+(f.href||""));if(w){for(var b=0;b<w.length;b++)if(_=w[b],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){w.splice(b,1);break e}}_=y.createElement(d),kn(_,d,f),y.head.appendChild(_);break;case"meta":if(w=qA("meta","content",y).get(d+(f.content||""))){for(b=0;b<w.length;b++)if(_=w[b],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){w.splice(b,1);break e}}_=y.createElement(d),kn(_,d,f),y.head.appendChild(_);break;default:throw Error(r(468,d))}_[tn]=s,en(_),d=_}s.stateNode=d}else KA(y,s.type,s.stateNode);else s.stateNode=GA(y,d,s.memoizedProps);else _!==d?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,d===null?KA(y,s.type,s.stateNode):GA(y,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Hg(s,s.memoizedProps,f.memoizedProps)}break;case 27:fr(u,s),hr(s),d&512&&(on||f===null||Hi(f,f.return)),f!==null&&d&4&&Hg(s,s.memoizedProps,f.memoizedProps);break;case 5:if(fr(u,s),hr(s),d&512&&(on||f===null||Hi(f,f.return)),s.flags&32){y=s.stateNode;try{lr(y,"")}catch(xt){pe(s,s.return,xt)}}d&4&&s.stateNode!=null&&(y=s.memoizedProps,Hg(s,y,f!==null?f.memoizedProps:y)),d&1024&&(Kg=!0);break;case 6:if(fr(u,s),hr(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,f=s.stateNode;try{f.nodeValue=d}catch(xt){pe(s,s.return,xt)}}break;case 3:if(l0=null,y=hi,hi=o0(u.containerInfo),fr(u,s),hi=y,hr(s),d&4&&f!==null&&f.memoizedState.isDehydrated)try{ol(u.containerInfo)}catch(xt){pe(s,s.return,xt)}Kg&&(Kg=!1,KE(s));break;case 4:d=hi,hi=o0(s.stateNode.containerInfo),fr(u,s),hr(s),hi=d;break;case 12:fr(u,s),hr(s);break;case 31:fr(u,s),hr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xd(s,d)));break;case 13:fr(u,s),hr(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Yd=tr()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xd(s,d)));break;case 22:y=s.memoizedState!==null;var z=f!==null&&f.memoizedState!==null,Z=ya,it=on;if(ya=Z||y,on=it||z,fr(u,s),on=it,ya=Z,hr(s),d&8192)t:for(u=s.stateNode,u._visibility=y?u._visibility&-2:u._visibility|1,y&&(f===null||z||ya||on||Oo(s)),f=null,u=s;;){if(u.tag===5||u.tag===26){if(f===null){z=f=u;try{if(_=z.stateNode,y)w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=z.stateNode;var ut=z.memoizedProps.style,J=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;b.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(xt){pe(z,z.return,xt)}}}else if(u.tag===6){if(f===null){z=u;try{z.stateNode.nodeValue=y?"":z.memoizedProps}catch(xt){pe(z,z.return,xt)}}}else if(u.tag===18){if(f===null){z=u;try{var et=z.stateNode;y?VA(et,!0):VA(z.stateNode,!1)}catch(xt){pe(z,z.return,xt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break t;for(;u.sibling===null;){if(u.return===null||u.return===s)break t;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}d&4&&(d=s.updateQueue,d!==null&&(f=d.retryQueue,f!==null&&(d.retryQueue=null,Xd(s,f))));break;case 19:fr(u,s),hr(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Xd(s,d)));break;case 30:break;case 21:break;default:fr(u,s),hr(s)}}function hr(s){var u=s.flags;if(u&2){try{for(var f,d=s.return;d!==null;){if(kE(d)){f=d;break}d=d.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,_=Gg(s);Kd(s,_,y);break;case 5:var w=f.stateNode;f.flags&32&&(lr(w,""),f.flags&=-33);var b=Gg(s);Kd(s,b,w);break;case 3:case 4:var z=f.stateNode.containerInfo,Z=Gg(s);qg(s,Z,z);break;default:throw Error(r(161))}}catch(it){pe(s,s.return,it)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function KE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;KE(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function _a(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)UE(s,u.alternate,u),u=u.sibling}function Oo(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:us(4,u,u.return),Oo(u);break;case 1:Hi(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&VE(u,u.return,f),Oo(u);break;case 27:ff(u.stateNode);case 26:case 5:Hi(u,u.return),Oo(u);break;case 22:u.memoizedState===null&&Oo(u);break;case 30:Oo(u);break;default:Oo(u)}s=s.sibling}}function xa(s,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var d=u.alternate,y=s,_=u,w=_.flags;switch(_.tag){case 0:case 11:case 15:xa(y,_,f),tf(4,_);break;case 1:if(xa(y,_,f),d=_,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){pe(d,d.return,Z)}if(d=_,y=d.updateQueue,y!==null){var b=d.stateNode;try{var z=y.shared.hiddenCallbacks;if(z!==null)for(y.shared.hiddenCallbacks=null,y=0;y<z.length;y++)wx(z[y],b)}catch(Z){pe(d,d.return,Z)}}f&&w&64&&ME(_),ef(_,_.return);break;case 27:BE(_);case 26:case 5:xa(y,_,f),f&&d===null&&w&4&&LE(_),ef(_,_.return);break;case 12:xa(y,_,f);break;case 31:xa(y,_,f),f&&w&4&&HE(y,_);break;case 13:xa(y,_,f),f&&w&4&&GE(y,_);break;case 22:_.memoizedState===null&&xa(y,_,f),ef(_,_.return);break;case 30:break;default:xa(y,_,f)}u=u.sibling}}function Xg(s,u){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&zc(f))}function Wg(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&zc(s))}function di(s,u,f,d){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)XE(s,u,f,d),u=u.sibling}function XE(s,u,f,d){var y=u.flags;switch(u.tag){case 0:case 11:case 15:di(s,u,f,d),y&2048&&tf(9,u);break;case 1:di(s,u,f,d);break;case 3:di(s,u,f,d),y&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&zc(s)));break;case 12:if(y&2048){di(s,u,f,d),s=u.stateNode;try{var _=u.memoizedProps,w=_.id,b=_.onPostCommit;typeof b=="function"&&b(w,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(z){pe(u,u.return,z)}}else di(s,u,f,d);break;case 31:di(s,u,f,d);break;case 13:di(s,u,f,d);break;case 23:break;case 22:_=u.stateNode,w=u.alternate,u.memoizedState!==null?_._visibility&2?di(s,u,f,d):nf(s,u):_._visibility&2?di(s,u,f,d):(_._visibility|=2,$u(s,u,f,d,(u.subtreeFlags&10256)!==0||!1)),y&2048&&Xg(w,u);break;case 24:di(s,u,f,d),y&2048&&Wg(u.alternate,u);break;default:di(s,u,f,d)}}function $u(s,u,f,d,y){for(y=y&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=s,w=u,b=f,z=d,Z=w.flags;switch(w.tag){case 0:case 11:case 15:$u(_,w,b,z,y),tf(8,w);break;case 23:break;case 22:var it=w.stateNode;w.memoizedState!==null?it._visibility&2?$u(_,w,b,z,y):nf(_,w):(it._visibility|=2,$u(_,w,b,z,y)),y&&Z&2048&&Xg(w.alternate,w);break;case 24:$u(_,w,b,z,y),y&&Z&2048&&Wg(w.alternate,w);break;default:$u(_,w,b,z,y)}u=u.sibling}}function nf(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=s,d=u,y=d.flags;switch(d.tag){case 22:nf(f,d),y&2048&&Xg(d.alternate,d);break;case 24:nf(f,d),y&2048&&Wg(d.alternate,d);break;default:nf(f,d)}u=u.sibling}}var rf=8192;function Qu(s,u,f){if(s.subtreeFlags&rf)for(s=s.child;s!==null;)WE(s,u,f),s=s.sibling}function WE(s,u,f){switch(s.tag){case 26:Qu(s,u,f),s.flags&rf&&s.memoizedState!==null&&lD(f,hi,s.memoizedState,s.memoizedProps);break;case 5:Qu(s,u,f);break;case 3:case 4:var d=hi;hi=o0(s.stateNode.containerInfo),Qu(s,u,f),hi=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=rf,rf=16777216,Qu(s,u,f),rf=d):Qu(s,u,f));break;default:Qu(s,u,f)}}function YE(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function af(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var d=u[f];Sn=d,QE(d,s)}YE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$E(s),s=s.sibling}function $E(s){switch(s.tag){case 0:case 11:case 15:af(s),s.flags&2048&&us(9,s,s.return);break;case 3:af(s);break;case 12:af(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,Wd(s)):af(s);break;default:af(s)}}function Wd(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var d=u[f];Sn=d,QE(d,s)}YE(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:us(8,u,u.return),Wd(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,Wd(u));break;default:Wd(u)}s=s.sibling}}function QE(s,u){for(;Sn!==null;){var f=Sn;switch(f.tag){case 0:case 11:case 15:us(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var d=f.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:zc(f.memoizedState.cache)}if(d=f.child,d!==null)d.return=f,Sn=d;else t:for(f=s;Sn!==null;){d=Sn;var y=d.sibling,_=d.return;if(zE(d),d===f){Sn=null;break t}if(y!==null){y.return=_,Sn=y;break t}Sn=_}}}var T6={getCacheForType:function(s){var u=Vn(rn),f=u.data.get(s);return f===void 0&&(f=s(),u.data.set(s,f)),f},cacheSignal:function(){return Vn(rn).controller.signal}},S6=typeof WeakMap=="function"?WeakMap:Map,oe=0,Se=null,Gt=null,Xt=0,de=0,br=null,ls=!1,Zu=!1,Yg=!1,Ea=0,je=0,cs=0,No=0,$g=0,Rr=0,Ju=0,sf=null,dr=null,Qg=!1,Yd=0,ZE=0,$d=1/0,Qd=null,fs=null,dn=0,hs=null,tl=null,Aa=0,Zg=0,Jg=null,JE=null,of=0,tm=null;function Dr(){return(oe&2)!==0&&Xt!==0?Xt&-Xt:nt.T!==null?sm():Zh()}function tA(){if(Rr===0)if((Xt&536870912)===0||Qt){var s=io;io<<=1,(io&3932160)===0&&(io=262144),Rr=s}else Rr=536870912;return s=Ir.current,s!==null&&(s.flags|=32),Rr}function pr(s,u,f){(s===Se&&(de===2||de===9)||s.cancelPendingCommit!==null)&&(el(s,0),ds(s,Xt,Rr,!1)),ao(s,f),((oe&2)===0||s!==Se)&&(s===Se&&((oe&2)===0&&(No|=f),je===4&&ds(s,Xt,Rr,!1)),Gi(s))}function eA(s,u,f){if((oe&6)!==0)throw Error(r(327));var d=!f&&(u&127)===0&&(u&s.expiredLanes)===0||ri(s,u),y=d?b6(s,u):nm(s,u,!0),_=d;do{if(y===0){Zu&&!d&&ds(s,u,0,!1);break}else{if(f=s.current.alternate,_&&!I6(f)){y=nm(s,u,!1),_=!1;continue}if(y===2){if(_=u,s.errorRecoveryDisabledLanes&_)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){u=w;t:{var b=s;y=sf;var z=b.current.memoizedState.isDehydrated;if(z&&(el(b,w).flags|=256),w=nm(b,w,!1),w!==2){if(Yg&&!z){b.errorRecoveryDisabledLanes|=_,No|=_,y=4;break t}_=dr,dr=y,_!==null&&(dr===null?dr=_:dr.push.apply(dr,_))}y=w}if(_=!1,y!==2)continue}}if(y===1){el(s,0),ds(s,u,0,!0);break}t:{switch(d=s,_=y,_){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ds(d,u,Rr,!ls);break t;case 2:dr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(y=Yd+300-tr(),10<y)){if(ds(d,u,Rr,!ls),Ii(d,0,!0)!==0)break t;Aa=u,d.timeoutHandle=NA(nA.bind(null,d,f,dr,Qd,Qg,u,Rr,No,Ju,ls,_,"Throttled",-0,0),y);break t}nA(d,f,dr,Qd,Qg,u,Rr,No,Ju,ls,_,null,-0,0)}}break}while(!0);Gi(s)}function nA(s,u,f,d,y,_,w,b,z,Z,it,ut,J,et){if(s.timeoutHandle=-1,ut=u.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:si},WE(u,_,ut);var xt=(_&62914560)===_?Yd-tr():(_&4194048)===_?ZE-tr():0;if(xt=cD(ut,xt),xt!==null){Aa=_,s.cancelPendingCommit=xt(cA.bind(null,s,u,_,f,d,y,w,b,z,it,ut,null,J,et)),ds(s,_,w,!Z);return}}cA(s,u,_,f,d,y,w,b,z)}function I6(s){for(var u=s;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var d=0;d<f.length;d++){var y=f[d],_=y.getSnapshot;y=y.value;try{if(!Tr(_(),y))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ds(s,u,f,d){u&=~$g,u&=~No,s.suspendedLanes|=u,s.pingedLanes&=~u,d&&(s.warmLanes|=u),d=s.expirationTimes;for(var y=u;0<y;){var _=31-qe(y),w=1<<_;d[_]=-1,y&=~w}f!==0&&so(s,f,u)}function Zd(){return(oe&6)===0?(uf(0),!1):!0}function em(){if(Gt!==null){if(de===0)var s=Gt.return;else s=Gt,fa=wo=null,yg(s),qu=null,Hc=0,s=Gt;for(;s!==null;)PE(s.alternate,s),s=s.return;Gt=null}}function el(s,u){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,K6(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),Aa=0,em(),Se=s,Gt=f=la(s.current,null),Xt=u,de=0,br=null,ls=!1,Zu=ri(s,u),Yg=!1,Ju=Rr=$g=No=cs=je=0,dr=sf=null,Qg=!1,(u&8)!==0&&(u|=u&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=u;0<d;){var y=31-qe(d),_=1<<y;u|=s[y],d&=~_}return Ea=u,_d(),f}function rA(s,u){Lt=null,nt.H=Qc,u===Gu||u===Cd?(u=_x(),de=3):u===ag?(u=_x(),de=4):de=u===Pg?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,br=u,Gt===null&&(je=1,zd(s,jr(u,s.current)))}function iA(){var s=Ir.current;return s===null?!0:(Xt&4194048)===Xt?Kr===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?s===Kr:!1}function aA(){var s=nt.H;return nt.H=Qc,s===null?Qc:s}function sA(){var s=nt.A;return nt.A=T6,s}function Jd(){je=4,ls||(Xt&4194048)!==Xt&&Ir.current!==null||(Zu=!0),(cs&134217727)===0&&(No&134217727)===0||Se===null||ds(Se,Xt,Rr,!1)}function nm(s,u,f){var d=oe;oe|=2;var y=aA(),_=sA();(Se!==s||Xt!==u)&&(Qd=null,el(s,u)),u=!1;var w=je;t:do try{if(de!==0&&Gt!==null){var b=Gt,z=br;switch(de){case 8:em(),w=6;break t;case 3:case 2:case 9:case 6:Ir.current===null&&(u=!0);var Z=de;if(de=0,br=null,nl(s,b,z,Z),f&&Zu){w=0;break t}break;default:Z=de,de=0,br=null,nl(s,b,z,Z)}}C6(),w=je;break}catch(it){rA(s,it)}while(!0);return u&&s.shellSuspendCounter++,fa=wo=null,oe=d,nt.H=y,nt.A=_,Gt===null&&(Se=null,Xt=0,_d()),w}function C6(){for(;Gt!==null;)oA(Gt)}function b6(s,u){var f=oe;oe|=2;var d=aA(),y=sA();Se!==s||Xt!==u?(Qd=null,$d=tr()+500,el(s,u)):Zu=ri(s,u);t:do try{if(de!==0&&Gt!==null){u=Gt;var _=br;e:switch(de){case 1:de=0,br=null,nl(s,u,_,1);break;case 2:case 9:if(yx(_)){de=0,br=null,uA(u);break}u=function(){de!==2&&de!==9||Se!==s||(de=7),Gi(s)},_.then(u,u);break t;case 3:de=7;break t;case 4:de=5;break t;case 7:yx(_)?(de=0,br=null,uA(u)):(de=0,br=null,nl(s,u,_,7));break;case 5:var w=null;switch(Gt.tag){case 26:w=Gt.memoizedState;case 5:case 27:var b=Gt;if(w?XA(w):b.stateNode.complete){de=0,br=null;var z=b.sibling;if(z!==null)Gt=z;else{var Z=b.return;Z!==null?(Gt=Z,t0(Z)):Gt=null}break e}}de=0,br=null,nl(s,u,_,5);break;case 6:de=0,br=null,nl(s,u,_,6);break;case 8:em(),je=6;break t;default:throw Error(r(462))}}R6();break}catch(it){rA(s,it)}while(!0);return fa=wo=null,nt.H=d,nt.A=y,oe=f,Gt!==null?0:(Se=null,Xt=0,_d(),je)}function R6(){for(;Gt!==null&&!Np();)oA(Gt)}function oA(s){var u=OE(s.alternate,s,Ea);s.memoizedProps=s.pendingProps,u===null?t0(s):Gt=u}function uA(s){var u=s,f=u.alternate;switch(u.tag){case 15:case 0:u=SE(f,u,u.pendingProps,u.type,void 0,Xt);break;case 11:u=SE(f,u,u.pendingProps,u.type.render,u.ref,Xt);break;case 5:yg(u);default:PE(f,u),u=Gt=sx(u,Ea),u=OE(f,u,Ea)}s.memoizedProps=s.pendingProps,u===null?t0(s):Gt=u}function nl(s,u,f,d){fa=wo=null,yg(u),qu=null,Hc=0;var y=u.return;try{if(y6(s,y,u,f,Xt)){je=1,zd(s,jr(f,s.current)),Gt=null;return}}catch(_){if(y!==null)throw Gt=y,_;je=1,zd(s,jr(f,s.current)),Gt=null;return}u.flags&32768?(Qt||d===1?s=!0:Zu||(Xt&536870912)!==0?s=!1:(ls=s=!0,(d===2||d===9||d===3||d===6)&&(d=Ir.current,d!==null&&d.tag===13&&(d.flags|=16384))),lA(u,s)):t0(u)}function t0(s){var u=s;do{if((u.flags&32768)!==0){lA(u,ls);return}s=u.return;var f=x6(u.alternate,u,Ea);if(f!==null){Gt=f;return}if(u=u.sibling,u!==null){Gt=u;return}Gt=u=s}while(u!==null);je===0&&(je=5)}function lA(s,u){do{var f=E6(s.alternate,s);if(f!==null){f.flags&=32767,Gt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(s=s.sibling,s!==null)){Gt=s;return}Gt=s=f}while(s!==null);je=6,Gt=null}function cA(s,u,f,d,y,_,w,b,z){s.cancelPendingCommit=null;do e0();while(dn!==0);if((oe&6)!==0)throw Error(r(327));if(u!==null){if(u===s.current)throw Error(r(177));if(_=u.lanes|u.childLanes,_|=Gp,Vp(s,f,_,w,b,z),s===Se&&(Gt=Se=null,Xt=0),tl=u,hs=s,Aa=f,Zg=_,Jg=y,JE=d,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,P6(Ha,function(){return gA(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||d){d=nt.T,nt.T=null,y=ft.p,ft.p=2,w=oe,oe|=4;try{A6(s,u,f)}finally{oe=w,ft.p=y,nt.T=d}}dn=1,fA(),hA(),dA()}}function fA(){if(dn===1){dn=0;var s=hs,u=tl,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=nt.T,nt.T=null;var d=ft.p;ft.p=2;var y=oe;oe|=4;try{qE(u,s);var _=pm,w=Q2(s.containerInfo),b=_.focusedElem,z=_.selectionRange;if(w!==b&&b&&b.ownerDocument&&$2(b.ownerDocument.documentElement,b)){if(z!==null&&Fp(b)){var Z=z.start,it=z.end;if(it===void 0&&(it=Z),"selectionStart"in b)b.selectionStart=Z,b.selectionEnd=Math.min(it,b.value.length);else{var ut=b.ownerDocument||document,J=ut&&ut.defaultView||window;if(J.getSelection){var et=J.getSelection(),xt=b.textContent.length,Rt=Math.min(z.start,xt),we=z.end===void 0?Rt:Math.min(z.end,xt);!et.extend&&Rt>we&&(w=we,we=Rt,Rt=w);var X=Y2(b,Rt),G=Y2(b,we);if(X&&G&&(et.rangeCount!==1||et.anchorNode!==X.node||et.anchorOffset!==X.offset||et.focusNode!==G.node||et.focusOffset!==G.offset)){var Q=ut.createRange();Q.setStart(X.node,X.offset),et.removeAllRanges(),Rt>we?(et.addRange(Q),et.extend(G.node,G.offset)):(Q.setEnd(G.node,G.offset),et.addRange(Q))}}}}for(ut=[],et=b;et=et.parentNode;)et.nodeType===1&&ut.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ut.length;b++){var ot=ut[b];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}d0=!!dm,pm=dm=null}finally{oe=y,ft.p=d,nt.T=f}}s.current=u,dn=2}}function hA(){if(dn===2){dn=0;var s=hs,u=tl,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=nt.T,nt.T=null;var d=ft.p;ft.p=2;var y=oe;oe|=4;try{UE(s,u.alternate,u)}finally{oe=y,ft.p=d,nt.T=f}}dn=3}}function dA(){if(dn===4||dn===3){dn=0,qh();var s=hs,u=tl,f=Aa,d=JE;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?dn=5:(dn=0,tl=hs=null,pA(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(fs=null),aa(f),u=u.stateNode,Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(ni,u,void 0,(u.current.flags&128)===128)}catch{}if(d!==null){u=nt.T,y=ft.p,ft.p=2,nt.T=null;try{for(var _=s.onRecoverableError,w=0;w<d.length;w++){var b=d[w];_(b.value,{componentStack:b.stack})}}finally{nt.T=u,ft.p=y}}(Aa&3)!==0&&e0(),Gi(s),y=s.pendingLanes,(f&261930)!==0&&(y&42)!==0?s===tm?of++:(of=0,tm=s):of=0,uf(0)}}function pA(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,zc(u)))}function e0(){return fA(),hA(),dA(),gA()}function gA(){if(dn!==5)return!1;var s=hs,u=Zg;Zg=0;var f=aa(Aa),d=nt.T,y=ft.p;try{ft.p=32>f?32:f,nt.T=null,f=Jg,Jg=null;var _=hs,w=Aa;if(dn=0,tl=hs=null,Aa=0,(oe&6)!==0)throw Error(r(331));var b=oe;if(oe|=4,$E(_.current),XE(_,_.current,w,f),oe=b,uf(0,!1),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(ni,_)}catch{}return!0}finally{ft.p=y,nt.T=d,pA(s,u)}}function mA(s,u,f){u=jr(f,u),u=Ng(s.stateNode,u,2),s=as(s,u,2),s!==null&&(ao(s,2),Gi(s))}function pe(s,u,f){if(s.tag===3)mA(s,s,f);else for(;u!==null;){if(u.tag===3){mA(u,s,f);break}else if(u.tag===1){var d=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(fs===null||!fs.has(d))){s=jr(f,s),f=yE(2),d=as(u,f,2),d!==null&&(vE(f,d,u,s),ao(d,2),Gi(d));break}}u=u.return}}function rm(s,u,f){var d=s.pingCache;if(d===null){d=s.pingCache=new S6;var y=new Set;d.set(u,y)}else y=d.get(u),y===void 0&&(y=new Set,d.set(u,y));y.has(f)||(Yg=!0,y.add(f),s=D6.bind(null,s,u,f),u.then(s,s))}function D6(s,u,f){var d=s.pingCache;d!==null&&d.delete(u),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Se===s&&(Xt&f)===f&&(je===4||je===3&&(Xt&62914560)===Xt&&300>tr()-Yd?(oe&2)===0&&el(s,0):$g|=f,Ju===Xt&&(Ju=0)),Gi(s)}function yA(s,u){u===0&&(u=Qh()),s=xo(s,u),s!==null&&(ao(s,u),Gi(s))}function O6(s){var u=s.memoizedState,f=0;u!==null&&(f=u.retryLane),yA(s,f)}function N6(s,u){var f=0;switch(s.tag){case 31:case 13:var d=s.stateNode,y=s.memoizedState;y!==null&&(f=y.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(u),yA(s,f)}function P6(s,u){return hn(s,u)}var n0=null,rl=null,im=!1,r0=!1,am=!1,ps=0;function Gi(s){s!==rl&&s.next===null&&(rl===null?n0=rl=s:rl=rl.next=s),r0=!0,im||(im=!0,V6())}function uf(s,u){if(!am&&r0){am=!0;do for(var f=!1,d=n0;d!==null;){if(s!==0){var y=d.pendingLanes;if(y===0)var _=0;else{var w=d.suspendedLanes,b=d.pingedLanes;_=(1<<31-qe(42|s)+1)-1,_&=y&~(w&~b),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,EA(d,_))}else _=Xt,_=Ii(d,d===Se?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||ri(d,_)||(f=!0,EA(d,_));d=d.next}while(f);am=!1}}function M6(){vA()}function vA(){r0=im=!1;var s=0;ps!==0&&q6()&&(s=ps);for(var u=tr(),f=null,d=n0;d!==null;){var y=d.next,_=_A(d,u);_===0?(d.next=null,f===null?n0=y:f.next=y,y===null&&(rl=f)):(f=d,(s!==0||(_&3)!==0)&&(r0=!0)),d=y}dn!==0&&dn!==5||uf(s),ps!==0&&(ps=0)}function _A(s,u){for(var f=s.suspendedLanes,d=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var w=31-qe(_),b=1<<w,z=y[w];z===-1?((b&f)===0||(b&d)!==0)&&(y[w]=Mp(b,u)):z<=u&&(s.expiredLanes|=b),_&=~b}if(u=Se,f=Xt,f=Ii(s,s===u?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,f===0||s===u&&(de===2||de===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&ja(d),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||ri(s,f)){if(u=f&-f,u===s.callbackPriority)return u;switch(d!==null&&ja(d),aa(f)){case 2:case 8:f=yc;break;case 32:f=Ha;break;case 268435456:f=Kh;break;default:f=Ha}return d=xA.bind(null,s),f=hn(f,d),s.callbackPriority=u,s.callbackNode=f,u}return d!==null&&d!==null&&ja(d),s.callbackPriority=2,s.callbackNode=null,2}function xA(s,u){if(dn!==0&&dn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(e0()&&s.callbackNode!==f)return null;var d=Xt;return d=Ii(s,s===Se?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(eA(s,d,u),_A(s,tr()),s.callbackNode!=null&&s.callbackNode===f?xA.bind(null,s):null)}function EA(s,u){if(e0())return null;eA(s,u,!0)}function V6(){X6(function(){(oe&6)!==0?hn(mc,M6):vA()})}function sm(){if(ps===0){var s=ju;s===0&&(s=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),ps=s}return ps}function AA(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Cu(""+s)}function wA(s,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,s.id&&f.setAttribute("form",s.id),u.parentNode.insertBefore(f,u),s=new FormData(s),f.parentNode.removeChild(f),s}function L6(s,u,f,d,y){if(u==="submit"&&f&&f.stateNode===y){var _=AA((y[wn]||null).action),w=d.submitter;w&&(u=(u=w[wn]||null)?AA(u.formAction):w.getAttribute("formAction"),u!==null&&(_=u,w=null));var b=new ki("action","action",null,d,y);s.push({event:b,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ps!==0){var z=w?wA(y,w):new FormData(y);Ig(f,{pending:!0,data:z,method:y.method,action:_},null,z)}}else typeof _=="function"&&(b.preventDefault(),z=w?wA(y,w):new FormData(y),Ig(f,{pending:!0,data:z,method:y.method,action:_},_,z))},currentTarget:y}]})}}for(var om=0;om<Hp.length;om++){var um=Hp[om],k6=um.toLowerCase(),B6=um[0].toUpperCase()+um.slice(1);fi(k6,"on"+B6)}fi(tx,"onAnimationEnd"),fi(ex,"onAnimationIteration"),fi(nx,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(t6,"onTransitionRun"),fi(e6,"onTransitionStart"),fi(n6,"onTransitionCancel"),fi(rx,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lf));function TA(s,u){u=(u&4)!==0;for(var f=0;f<s.length;f++){var d=s[f],y=d.event;d=d.listeners;t:{var _=void 0;if(u)for(var w=d.length-1;0<=w;w--){var b=d[w],z=b.instance,Z=b.currentTarget;if(b=b.listener,z!==_&&y.isPropagationStopped())break t;_=b,y.currentTarget=Z;try{_(y)}catch(it){vd(it)}y.currentTarget=null,_=z}else for(w=0;w<d.length;w++){if(b=d[w],z=b.instance,Z=b.currentTarget,b=b.listener,z!==_&&y.isPropagationStopped())break t;_=b,y.currentTarget=Z;try{_(y)}catch(it){vd(it)}y.currentTarget=null,_=z}}}}function qt(s,u){var f=u[Au];f===void 0&&(f=u[Au]=new Set);var d=s+"__bubble";f.has(d)||(SA(u,s,2,!1),f.add(d))}function lm(s,u,f){var d=0;u&&(d|=4),SA(f,s,d,u)}var i0="_reactListening"+Math.random().toString(36).slice(2);function cm(s){if(!s[i0]){s[i0]=!0,xc.forEach(function(f){f!=="selectionchange"&&(F6.has(f)||lm(f,!1,s),lm(f,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[i0]||(u[i0]=!0,lm("selectionchange",!1,u))}}function SA(s,u,f,d){switch(tw(u)){case 2:var y=dD;break;case 8:y=pD;break;default:y=Sm}f=y.bind(null,u,f,s),y=void 0,!fo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),d?y!==void 0?s.addEventListener(u,f,{capture:!0,passive:y}):s.addEventListener(u,f,!0):y!==void 0?s.addEventListener(u,f,{passive:y}):s.addEventListener(u,f,!1)}function fm(s,u,f,d,y){var _=d;if((u&1)===0&&(u&2)===0&&d!==null)t:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var b=d.stateNode.containerInfo;if(b===y)break;if(w===4)for(w=d.return;w!==null;){var z=w.tag;if((z===3||z===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;b!==null;){if(w=Di(b),w===null)return;if(z=w.tag,z===5||z===6||z===26||z===27){d=_=w;continue t}b=b.parentNode}}d=d.return}Ya(function(){var Z=_,it=Br(f),ut=[];t:{var J=ix.get(s);if(J!==void 0){var et=ki,xt=s;switch(s){case"keypress":if(po(f)===0)break t;case"keydown":case"keyup":et=gd;break;case"focusin":xt="focus",et=mo;break;case"focusout":xt="blur",et=mo;break;case"beforeblur":case"afterblur":et=mo;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=E;break;case tx:case ex:case nx:et=ud;break;case rx:et=N;break;case"scroll":case"scrollend":et=Nc;break;case"wheel":et=tt;break;case"copy":case"cut":case"paste":et=ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=ua;break;case"toggle":case"beforetoggle":et=Vt}var Rt=(u&4)!==0,we=!Rt&&(s==="scroll"||s==="scrollend"),X=Rt?J!==null?J+"Capture":null:J;Rt=[];for(var G=Z,Q;G!==null;){var ot=G;if(Q=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||Q===null||X===null||(ot=oi(G,X),ot!=null&&Rt.push(cf(G,ot,Q))),we)break;G=G.return}0<Rt.length&&(J=new et(J,xt,null,f,it),ut.push({event:J,listeners:Rt}))}}if((u&7)===0){t:{if(J=s==="mouseover"||s==="pointerover",et=s==="mouseout"||s==="pointerout",J&&f!==Rc&&(xt=f.relatedTarget||f.fromElement)&&(Di(xt)||xt[bi]))break t;if((et||J)&&(J=it.window===it?it:(J=it.ownerDocument)?J.defaultView||J.parentWindow:window,et?(xt=f.relatedTarget||f.toElement,et=Z,xt=xt?Di(xt):null,xt!==null&&(we=a(xt),Rt=xt.tag,xt!==we||Rt!==5&&Rt!==27&&Rt!==6)&&(xt=null)):(et=null,xt=Z),et!==xt)){if(Rt=Pc,ot="onMouseLeave",X="onMouseEnter",G="mouse",(s==="pointerout"||s==="pointerover")&&(Rt=ua,ot="onPointerLeave",X="onPointerEnter",G="pointer"),we=et==null?J:Ar(et),Q=xt==null?J:Ar(xt),J=new Rt(ot,G+"leave",et,f,it),J.target=we,J.relatedTarget=Q,ot=null,Di(it)===Z&&(Rt=new Rt(X,G+"enter",xt,f,it),Rt.target=Q,Rt.relatedTarget=we,ot=Rt),we=ot,et&&xt)e:{for(Rt=U6,X=et,G=xt,Q=0,ot=X;ot;ot=Rt(ot))Q++;ot=0;for(var St=G;St;St=Rt(St))ot++;for(;0<Q-ot;)X=Rt(X),Q--;for(;0<ot-Q;)G=Rt(G),ot--;for(;Q--;){if(X===G||G!==null&&X===G.alternate){Rt=X;break e}X=Rt(X),G=Rt(G)}Rt=null}else Rt=null;et!==null&&IA(ut,J,et,Rt,!1),xt!==null&&we!==null&&IA(ut,we,xt,Rt,!0)}}t:{if(J=Z?Ar(Z):window,et=J.nodeName&&J.nodeName.toLowerCase(),et==="select"||et==="input"&&J.type==="file")var ne=H2;else if(z2(J))if(G2)ne=Q8;else{ne=Y8;var wt=W8}else et=J.nodeName,!et||et.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&Iu(Z.elementType)&&(ne=H2):ne=$8;if(ne&&(ne=ne(s,Z))){j2(ut,ne,f,it);break t}wt&&wt(s,J,Z),s==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&Ic(J,"number",J.value)}switch(wt=Z?Ar(Z):window,s){case"focusin":(z2(wt)||wt.contentEditable==="true")&&(Mu=wt,Up=Z,Bc=null);break;case"focusout":Bc=Up=Mu=null;break;case"mousedown":zp=!0;break;case"contextmenu":case"mouseup":case"dragend":zp=!1,Z2(ut,f,it);break;case"selectionchange":if(J8)break;case"keydown":case"keyup":Z2(ut,f,it)}var Ft;if(se)t:{switch(s){case"compositionstart":var Wt="onCompositionStart";break t;case"compositionend":Wt="onCompositionEnd";break t;case"compositionupdate":Wt="onCompositionUpdate";break t}Wt=void 0}else Pu?yo(s,f)&&(Wt="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Wt="onCompositionStart");Wt&&(Ui&&f.locale!=="ko"&&(Pu||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Pu&&(Ft=Oc()):(Li=it,Dc="value"in Li?Li.value:Li.textContent,Pu=!0)),wt=a0(Z,Wt),0<wt.length&&(Wt=new Fi(Wt,s,null,f,it),ut.push({event:Wt,listeners:wt}),Ft?Wt.data=Ft:(Ft=Nu(f),Ft!==null&&(Wt.data=Ft)))),(Ft=Ur?G8(s,f):q8(s,f))&&(Wt=a0(Z,"onBeforeInput"),0<Wt.length&&(wt=new Fi("onBeforeInput","beforeinput",null,f,it),ut.push({event:wt,listeners:Wt}),wt.data=Ft)),L6(ut,s,Z,f,it)}TA(ut,u)})}function cf(s,u,f){return{instance:s,listener:u,currentTarget:f}}function a0(s,u){for(var f=u+"Capture",d=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=oi(s,f),y!=null&&d.unshift(cf(s,y,_)),y=oi(s,u),y!=null&&d.push(cf(s,y,_))),s.tag===3)return d;s=s.return}return[]}function U6(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function IA(s,u,f,d,y){for(var _=u._reactName,w=[];f!==null&&f!==d;){var b=f,z=b.alternate,Z=b.stateNode;if(b=b.tag,z!==null&&z===d)break;b!==5&&b!==26&&b!==27||Z===null||(z=Z,y?(Z=oi(f,_),Z!=null&&w.unshift(cf(f,Z,z))):y||(Z=oi(f,_),Z!=null&&w.push(cf(f,Z,z)))),f=f.return}w.length!==0&&s.push({event:u,listeners:w})}var z6=/\r\n?/g,j6=/\u0000|\uFFFD/g;function CA(s){return(typeof s=="string"?s:""+s).replace(z6,`
`).replace(j6,"")}function bA(s,u){return u=CA(u),CA(s)===u}function Ae(s,u,f,d,y,_){switch(f){case"children":typeof d=="string"?u==="body"||u==="textarea"&&d===""||lr(s,d):(typeof d=="number"||typeof d=="bigint")&&u!=="body"&&lr(s,""+d);break;case"className":wr(s,"class",d);break;case"tabIndex":wr(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(s,f,d);break;case"style":bc(s,d,_);break;case"data":if(u!=="object"){wr(s,"data",d);break}case"src":case"href":if(d===""&&(u!=="a"||f!=="href")){s.removeAttribute(f);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=Cu(""+d),s.setAttribute(f,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&Ae(s,u,"name",y.name,y,null),Ae(s,u,"formEncType",y.formEncType,y,null),Ae(s,u,"formMethod",y.formMethod,y,null),Ae(s,u,"formTarget",y.formTarget,y,null)):(Ae(s,u,"encType",y.encType,y,null),Ae(s,u,"method",y.method,y,null),Ae(s,u,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(f);break}d=Cu(""+d),s.setAttribute(f,d);break;case"onClick":d!=null&&(s.onclick=si);break;case"onScroll":d!=null&&qt("scroll",s);break;case"onScrollEnd":d!=null&&qt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}f=Cu(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""+d):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":d===!0?s.setAttribute(f,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(f,d):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(f,d):s.removeAttribute(f);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(f):s.setAttribute(f,d);break;case"popover":qt("beforetoggle",s),qt("toggle",s),Tu(s,"popover",d);break;case"xlinkActuate":nn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":nn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":nn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":nn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":nn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":nn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":nn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":nn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":nn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Tu(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ad.get(f)||f,Tu(s,f,d))}}function hm(s,u,f,d,y,_){switch(f){case"style":bc(s,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(f=d.__html,f!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof d=="string"?lr(s,d):(typeof d=="number"||typeof d=="bigint")&&lr(s,""+d);break;case"onScroll":d!=null&&qt("scroll",s);break;case"onScrollEnd":d!=null&&qt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=si);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ec.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),u=f.slice(2,y?f.length-7:void 0),_=s[wn]||null,_=_!=null?_[f]:null,typeof _=="function"&&s.removeEventListener(u,_,y),typeof d=="function")){typeof _!="function"&&_!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(u,d,y);break t}f in s?s[f]=d:d===!0?s.setAttribute(f,""):Tu(s,f,d)}}}function kn(s,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",s),qt("load",s);var d=!1,y=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var w=f[_];if(w!=null)switch(_){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Ae(s,u,_,w,f,null)}}y&&Ae(s,u,"srcSet",f.srcSet,f,null),d&&Ae(s,u,"src",f.src,f,null);return;case"input":qt("invalid",s);var b=_=w=y=null,z=null,Z=null;for(d in f)if(f.hasOwnProperty(d)){var it=f[d];if(it!=null)switch(d){case"name":y=it;break;case"type":w=it;break;case"checked":z=it;break;case"defaultChecked":Z=it;break;case"value":_=it;break;case"defaultValue":b=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,u));break;default:Ae(s,u,d,it,f,null)}}nd(s,_,b,z,Z,w,y,!1);return;case"select":qt("invalid",s),d=w=_=null;for(y in f)if(f.hasOwnProperty(y)&&(b=f[y],b!=null))switch(y){case"value":_=b;break;case"defaultValue":w=b;break;case"multiple":d=b;default:Ae(s,u,y,b,f,null)}u=_,f=w,s.multiple=!!d,u!=null?qa(s,!!d,u,!1):f!=null&&qa(s,!!d,f,!0);return;case"textarea":qt("invalid",s),_=y=d=null;for(w in f)if(f.hasOwnProperty(w)&&(b=f[w],b!=null))switch(w){case"value":d=b;break;case"defaultValue":y=b;break;case"children":_=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:Ae(s,u,w,b,f,null)}Ka(s,d,y,_);return;case"option":for(z in f)f.hasOwnProperty(z)&&(d=f[z],d!=null)&&(z==="selected"?s.selected=d&&typeof d!="function"&&typeof d!="symbol":Ae(s,u,z,d,f,null));return;case"dialog":qt("beforetoggle",s),qt("toggle",s),qt("cancel",s),qt("close",s);break;case"iframe":case"object":qt("load",s);break;case"video":case"audio":for(d=0;d<lf.length;d++)qt(lf[d],s);break;case"image":qt("error",s),qt("load",s);break;case"details":qt("toggle",s);break;case"embed":case"source":case"link":qt("error",s),qt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in f)if(f.hasOwnProperty(Z)&&(d=f[Z],d!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Ae(s,u,Z,d,f,null)}return;default:if(Iu(u)){for(it in f)f.hasOwnProperty(it)&&(d=f[it],d!==void 0&&hm(s,u,it,d,f,void 0));return}}for(b in f)f.hasOwnProperty(b)&&(d=f[b],d!=null&&Ae(s,u,b,d,f,null))}function H6(s,u,f,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,w=null,b=null,z=null,Z=null,it=null;for(et in f){var ut=f[et];if(f.hasOwnProperty(et)&&ut!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":z=ut;default:d.hasOwnProperty(et)||Ae(s,u,et,null,d,ut)}}for(var J in d){var et=d[J];if(ut=f[J],d.hasOwnProperty(J)&&(et!=null||ut!=null))switch(J){case"type":_=et;break;case"name":y=et;break;case"checked":Z=et;break;case"defaultChecked":it=et;break;case"value":w=et;break;case"defaultValue":b=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,u));break;default:et!==ut&&Ae(s,u,J,et,d,ut)}}Su(s,w,b,z,Z,it,_,y);return;case"select":et=w=b=J=null;for(_ in f)if(z=f[_],f.hasOwnProperty(_)&&z!=null)switch(_){case"value":break;case"multiple":et=z;default:d.hasOwnProperty(_)||Ae(s,u,_,null,d,z)}for(y in d)if(_=d[y],z=f[y],d.hasOwnProperty(y)&&(_!=null||z!=null))switch(y){case"value":J=_;break;case"defaultValue":b=_;break;case"multiple":w=_;default:_!==z&&Ae(s,u,y,_,d,z)}u=b,f=w,d=et,J!=null?qa(s,!!f,J,!1):!!d!=!!f&&(u!=null?qa(s,!!f,u,!0):qa(s,!!f,f?[]:"",!1));return;case"textarea":et=J=null;for(b in f)if(y=f[b],f.hasOwnProperty(b)&&y!=null&&!d.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ae(s,u,b,null,d,y)}for(w in d)if(y=d[w],_=f[w],d.hasOwnProperty(w)&&(y!=null||_!=null))switch(w){case"value":J=y;break;case"defaultValue":et=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==_&&Ae(s,u,w,y,d,_)}rd(s,J,et);return;case"option":for(var xt in f)J=f[xt],f.hasOwnProperty(xt)&&J!=null&&!d.hasOwnProperty(xt)&&(xt==="selected"?s.selected=!1:Ae(s,u,xt,null,d,J));for(z in d)J=d[z],et=f[z],d.hasOwnProperty(z)&&J!==et&&(J!=null||et!=null)&&(z==="selected"?s.selected=J&&typeof J!="function"&&typeof J!="symbol":Ae(s,u,z,J,d,et));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in f)J=f[Rt],f.hasOwnProperty(Rt)&&J!=null&&!d.hasOwnProperty(Rt)&&Ae(s,u,Rt,null,d,J);for(Z in d)if(J=d[Z],et=f[Z],d.hasOwnProperty(Z)&&J!==et&&(J!=null||et!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,u));break;default:Ae(s,u,Z,J,d,et)}return;default:if(Iu(u)){for(var we in f)J=f[we],f.hasOwnProperty(we)&&J!==void 0&&!d.hasOwnProperty(we)&&hm(s,u,we,void 0,d,J);for(it in d)J=d[it],et=f[it],!d.hasOwnProperty(it)||J===et||J===void 0&&et===void 0||hm(s,u,it,J,d,et);return}}for(var X in f)J=f[X],f.hasOwnProperty(X)&&J!=null&&!d.hasOwnProperty(X)&&Ae(s,u,X,null,d,J);for(ut in d)J=d[ut],et=f[ut],!d.hasOwnProperty(ut)||J===et||J==null&&et==null||Ae(s,u,ut,J,d,et)}function RA(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function G6(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,f=performance.getEntriesByType("resource"),d=0;d<f.length;d++){var y=f[d],_=y.transferSize,w=y.initiatorType,b=y.duration;if(_&&b&&RA(w)){for(w=0,b=y.responseEnd,d+=1;d<f.length;d++){var z=f[d],Z=z.startTime;if(Z>b)break;var it=z.transferSize,ut=z.initiatorType;it&&RA(ut)&&(z=z.responseEnd,w+=it*(z<b?1:(b-Z)/(z-Z)))}if(--d,u+=8*(_+w)/(y.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var dm=null,pm=null;function s0(s){return s.nodeType===9?s:s.ownerDocument}function DA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OA(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function gm(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var mm=null;function q6(){var s=window.event;return s&&s.type==="popstate"?s===mm?!1:(mm=s,!0):(mm=null,!1)}var NA=typeof setTimeout=="function"?setTimeout:void 0,K6=typeof clearTimeout=="function"?clearTimeout:void 0,PA=typeof Promise=="function"?Promise:void 0,X6=typeof queueMicrotask=="function"?queueMicrotask:typeof PA<"u"?function(s){return PA.resolve(null).then(s).catch(W6)}:NA;function W6(s){setTimeout(function(){throw s})}function gs(s){return s==="head"}function MA(s,u){var f=u,d=0;do{var y=f.nextSibling;if(s.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(d===0){s.removeChild(y),ol(u);return}d--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")d++;else if(f==="html")ff(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,ff(f);for(var _=f.firstChild;_;){var w=_.nextSibling,b=_.nodeName;_[Ri]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=w}}else f==="body"&&ff(s.ownerDocument.body);f=y}while(f);ol(u)}function VA(s,u){var f=s;s=0;do{var d=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),d&&d.nodeType===8)if(f=d.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=d}while(f)}function ym(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":ym(f),wu(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function Y6(s,u,f,d){for(;s.nodeType===1;){var y=f;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Ri])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Xr(s.nextSibling),s===null)break}return null}function $6(s,u,f){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Xr(s.nextSibling),s===null))return null;return s}function LA(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Xr(s.nextSibling),s===null))return null;return s}function vm(s){return s.data==="$?"||s.data==="$~"}function _m(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Q6(s,u){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||f.readyState!=="loading")u();else{var d=function(){u(),f.removeEventListener("DOMContentLoaded",d)};f.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Xr(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var xm=null;function kA(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(u===0)return Xr(s.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}s=s.nextSibling}return null}function BA(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return s;u--}else f!=="/$"&&f!=="/&"||u++}s=s.previousSibling}return null}function FA(s,u,f){switch(u=s0(f),s){case"html":if(s=u.documentElement,!s)throw Error(r(452));return s;case"head":if(s=u.head,!s)throw Error(r(453));return s;case"body":if(s=u.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ff(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);wu(s)}var Wr=new Map,UA=new Set;function o0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var wa=ft.d;ft.d={f:Z6,r:J6,D:tD,C:eD,L:nD,m:rD,X:aD,S:iD,M:sD};function Z6(){var s=wa.f(),u=Zd();return s||u}function J6(s){var u=kr(s);u!==null&&u.tag===5&&u.type==="form"?rE(u):wa.r(s)}var il=typeof document>"u"?null:document;function zA(s,u,f){var d=il;if(d&&typeof u=="string"&&u){var y=ur(u);y='link[rel="'+s+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),UA.has(y)||(UA.add(y),s={rel:s,crossOrigin:f,href:u},d.querySelector(y)===null&&(u=d.createElement("link"),kn(u,"link",s),en(u),d.head.appendChild(u)))}}function tD(s){wa.D(s),zA("dns-prefetch",s,null)}function eD(s,u){wa.C(s,u),zA("preconnect",s,u)}function nD(s,u,f){wa.L(s,u,f);var d=il;if(d&&s&&u){var y='link[rel="preload"][as="'+ur(u)+'"]';u==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+ur(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+ur(f.imageSizes)+'"]')):y+='[href="'+ur(s)+'"]';var _=y;switch(u){case"style":_=al(s);break;case"script":_=sl(s)}Wr.has(_)||(s=g({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:s,as:u},f),Wr.set(_,s),d.querySelector(y)!==null||u==="style"&&d.querySelector(hf(_))||u==="script"&&d.querySelector(df(_))||(u=d.createElement("link"),kn(u,"link",s),en(u),d.head.appendChild(u)))}}function rD(s,u){wa.m(s,u);var f=il;if(f&&s){var d=u&&typeof u.as=="string"?u.as:"script",y='link[rel="modulepreload"][as="'+ur(d)+'"][href="'+ur(s)+'"]',_=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=sl(s)}if(!Wr.has(_)&&(s=g({rel:"modulepreload",href:s},u),Wr.set(_,s),f.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(df(_)))return}d=f.createElement("link"),kn(d,"link",s),en(d),f.head.appendChild(d)}}}function iD(s,u,f){wa.S(s,u,f);var d=il;if(d&&s){var y=Oi(d).hoistableStyles,_=al(s);u=u||"default";var w=y.get(_);if(!w){var b={loading:0,preload:null};if(w=d.querySelector(hf(_)))b.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":u},f),(f=Wr.get(_))&&Em(s,f);var z=w=d.createElement("link");en(z),kn(z,"link",s),z._p=new Promise(function(Z,it){z.onload=Z,z.onerror=it}),z.addEventListener("load",function(){b.loading|=1}),z.addEventListener("error",function(){b.loading|=2}),b.loading|=4,u0(w,u,d)}w={type:"stylesheet",instance:w,count:1,state:b},y.set(_,w)}}}function aD(s,u){wa.X(s,u);var f=il;if(f&&s){var d=Oi(f).hoistableScripts,y=sl(s),_=d.get(y);_||(_=f.querySelector(df(y)),_||(s=g({src:s,async:!0},u),(u=Wr.get(y))&&Am(s,u),_=f.createElement("script"),en(_),kn(_,"link",s),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function sD(s,u){wa.M(s,u);var f=il;if(f&&s){var d=Oi(f).hoistableScripts,y=sl(s),_=d.get(y);_||(_=f.querySelector(df(y)),_||(s=g({src:s,async:!0,type:"module"},u),(u=Wr.get(y))&&Am(s,u),_=f.createElement("script"),en(_),kn(_,"link",s),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(y,_))}}function jA(s,u,f,d){var y=(y=Bt.current)?o0(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=al(f.href),f=Oi(y).hoistableStyles,d=f.get(u),d||(d={type:"style",instance:null,count:0,state:null},f.set(u,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=al(f.href);var _=Oi(y).hoistableStyles,w=_.get(s);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,w),(_=y.querySelector(hf(s)))&&!_._p&&(w.instance=_,w.state.loading=5),Wr.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Wr.set(s,f),_||oD(y,s,f,w.state))),u&&d===null)throw Error(r(528,""));return w}if(u&&d!==null)throw Error(r(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=sl(f),f=Oi(y).hoistableScripts,d=f.get(u),d||(d={type:"script",instance:null,count:0,state:null},f.set(u,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function al(s){return'href="'+ur(s)+'"'}function hf(s){return'link[rel="stylesheet"]['+s+"]"}function HA(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function oD(s,u,f,d){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?d.loading=1:(u=s.createElement("link"),d.preload=u,u.addEventListener("load",function(){return d.loading|=1}),u.addEventListener("error",function(){return d.loading|=2}),kn(u,"link",f),en(u),s.head.appendChild(u))}function sl(s){return'[src="'+ur(s)+'"]'}function df(s){return"script[async]"+s}function GA(s,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var d=s.querySelector('style[data-href~="'+ur(f.href)+'"]');if(d)return u.instance=d,en(d),d;var y=g({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),en(d),kn(d,"style",y),u0(d,f.precedence,s),u.instance=d;case"stylesheet":y=al(f.href);var _=s.querySelector(hf(y));if(_)return u.state.loading|=4,u.instance=_,en(_),_;d=HA(f),(y=Wr.get(y))&&Em(d,y),_=(s.ownerDocument||s).createElement("link"),en(_);var w=_;return w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),kn(_,"link",d),u.state.loading|=4,u0(_,f.precedence,s),u.instance=_;case"script":return _=sl(f.src),(y=s.querySelector(df(_)))?(u.instance=y,en(y),y):(d=f,(y=Wr.get(_))&&(d=g({},f),Am(d,y)),s=s.ownerDocument||s,y=s.createElement("script"),en(y),kn(y,"link",d),s.head.appendChild(y),u.instance=y);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(d=u.instance,u.state.loading|=4,u0(d,f.precedence,s));return u.instance}function u0(s,u,f){for(var d=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,_=y,w=0;w<d.length;w++){var b=d[w];if(b.dataset.precedence===u)_=b;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(s,u.firstChild))}function Em(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function Am(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var l0=null;function qA(s,u,f){if(l0===null){var d=new Map,y=l0=new Map;y.set(f,d)}else y=l0,d=y.get(f),d||(d=new Map,y.set(f,d));if(d.has(s))return d;for(d.set(s,null),f=f.getElementsByTagName(s),y=0;y<f.length;y++){var _=f[y];if(!(_[Ri]||_[tn]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(u)||"";w=s+w;var b=d.get(w);b?b.push(_):d.set(w,[_])}}return d}function KA(s,u,f){s=s.ownerDocument||s,s.head.insertBefore(f,u==="title"?s.querySelector("head > title"):null)}function uD(s,u,f){if(f===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(s=u.disabled,typeof u.precedence=="string"&&s==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function XA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function lD(s,u,f,d){if(f.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=al(d.href),_=u.querySelector(hf(y));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=c0.bind(s),u.then(s,s)),f.state.loading|=4,f.instance=_,en(_);return}_=u.ownerDocument||u,d=HA(d),(y=Wr.get(y))&&Em(d,y),_=_.createElement("link"),en(_);var w=_;w._p=new Promise(function(b,z){w.onload=b,w.onerror=z}),kn(_,"link",d),f.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=c0.bind(s),u.addEventListener("load",f),u.addEventListener("error",f))}}var wm=0;function cD(s,u){return s.stylesheets&&s.count===0&&h0(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var d=setTimeout(function(){if(s.stylesheets&&h0(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+u);0<s.imgBytes&&wm===0&&(wm=62500*G6());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&h0(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>wm?50:800)+u);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function c0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)h0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var f0=null;function h0(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,f0=new Map,u.forEach(fD,s),f0=null,c0.call(s))}function fD(s,u){if(!(u.state.loading&4)){var f=f0.get(s);if(f)var d=f.get(null);else{f=new Map,f0.set(s,f);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var w=y[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(f.set(w.dataset.precedence,w),d=w)}d&&f.set(null,d)}y=u.instance,w=y.getAttribute("data-precedence"),_=f.get(w)||d,_===d&&f.set(null,y),f.set(w,y),this.count++,d=c0.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),u.state.loading|=4}}var pf={$$typeof:P,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function hD(s,u,f,d,y,_,w,b,z){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function WA(s,u,f,d,y,_,w,b,z,Z,it,ut){return s=new hD(s,u,f,w,z,Z,it,ut,b),u=1,_===!0&&(u|=24),_=Sr(3,null,null,u),s.current=_,_.stateNode=s,u=ng(),u.refCount++,s.pooledCache=u,u.refCount++,_.memoizedState={element:d,isDehydrated:f,cache:u},sg(_),s}function YA(s){return s?(s=ku,s):ku}function $A(s,u,f,d,y,_){y=YA(y),d.context===null?d.context=y:d.pendingContext=y,d=is(u),d.payload={element:f},_=_===void 0?null:_,_!==null&&(d.callback=_),f=as(s,d,u),f!==null&&(pr(f,s,u),qc(f,s,u))}function QA(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<u?f:u}}function Tm(s,u){QA(s,u),(s=s.alternate)&&QA(s,u)}function ZA(s){if(s.tag===13||s.tag===31){var u=xo(s,67108864);u!==null&&pr(u,s,67108864),Tm(s,67108864)}}function JA(s){if(s.tag===13||s.tag===31){var u=Dr();u=oo(u);var f=xo(s,u);f!==null&&pr(f,s,u),Tm(s,u)}}var d0=!0;function dD(s,u,f,d){var y=nt.T;nt.T=null;var _=ft.p;try{ft.p=2,Sm(s,u,f,d)}finally{ft.p=_,nt.T=y}}function pD(s,u,f,d){var y=nt.T;nt.T=null;var _=ft.p;try{ft.p=8,Sm(s,u,f,d)}finally{ft.p=_,nt.T=y}}function Sm(s,u,f,d){if(d0){var y=Im(d);if(y===null)fm(s,u,d,p0,f),ew(s,d);else if(mD(y,s,u,f,d))d.stopPropagation();else if(ew(s,d),u&4&&-1<gD.indexOf(s)){for(;y!==null;){var _=kr(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=Si(_.pendingLanes);if(w!==0){var b=_;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var z=1<<31-qe(w);b.entanglements[1]|=z,w&=~z}Gi(_),(oe&6)===0&&($d=tr()+500,uf(0))}}break;case 31:case 13:b=xo(_,2),b!==null&&pr(b,_,2),Zd(),Tm(_,2)}if(_=Im(d),_===null&&fm(s,u,d,p0,f),_===y)break;y=_}y!==null&&d.stopPropagation()}else fm(s,u,d,null,f)}}function Im(s){return s=Br(s),Cm(s)}var p0=null;function Cm(s){if(p0=null,s=Di(s),s!==null){var u=a(s);if(u===null)s=null;else{var f=u.tag;if(f===13){if(s=o(u),s!==null)return s;s=null}else if(f===31){if(s=l(u),s!==null)return s;s=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return p0=s,null}function tw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ro()){case mc:return 2;case yc:return 8;case Ha:case Pp:return 32;case Kh:return 268435456;default:return 32}default:return 32}}var bm=!1,ms=null,ys=null,vs=null,gf=new Map,mf=new Map,_s=[],gD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ew(s,u){switch(s){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":gf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(u.pointerId)}}function yf(s,u,f,d,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:u,domEventName:f,eventSystemFlags:d,nativeEvent:_,targetContainers:[y]},u!==null&&(u=kr(u),u!==null&&ZA(u)),s):(s.eventSystemFlags|=d,u=s.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),s)}function mD(s,u,f,d,y){switch(u){case"focusin":return ms=yf(ms,s,u,f,d,y),!0;case"dragenter":return ys=yf(ys,s,u,f,d,y),!0;case"mouseover":return vs=yf(vs,s,u,f,d,y),!0;case"pointerover":var _=y.pointerId;return gf.set(_,yf(gf.get(_)||null,s,u,f,d,y)),!0;case"gotpointercapture":return _=y.pointerId,mf.set(_,yf(mf.get(_)||null,s,u,f,d,y)),!0}return!1}function nw(s){var u=Di(s.target);if(u!==null){var f=a(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){s.blockedOn=u,ii(s.priority,function(){JA(f)});return}}else if(u===31){if(u=l(f),u!==null){s.blockedOn=u,ii(s.priority,function(){JA(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function g0(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var f=Im(s.nativeEvent);if(f===null){f=s.nativeEvent;var d=new f.constructor(f.type,f);Rc=d,f.target.dispatchEvent(d),Rc=null}else return u=kr(f),u!==null&&ZA(u),s.blockedOn=f,!1;u.shift()}return!0}function rw(s,u,f){g0(s)&&f.delete(u)}function yD(){bm=!1,ms!==null&&g0(ms)&&(ms=null),ys!==null&&g0(ys)&&(ys=null),vs!==null&&g0(vs)&&(vs=null),gf.forEach(rw),mf.forEach(rw)}function m0(s,u){s.blockedOn===u&&(s.blockedOn=null,bm||(bm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yD)))}var y0=null;function iw(s){y0!==s&&(y0=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){y0===s&&(y0=null);for(var u=0;u<s.length;u+=3){var f=s[u],d=s[u+1],y=s[u+2];if(typeof d!="function"){if(Cm(d||f)===null)continue;break}var _=kr(f);_!==null&&(s.splice(u,3),u-=3,Ig(_,{pending:!0,data:y,method:f.method,action:d},d,y))}}))}function ol(s){function u(z){return m0(z,s)}ms!==null&&m0(ms,s),ys!==null&&m0(ys,s),vs!==null&&m0(vs,s),gf.forEach(u),mf.forEach(u);for(var f=0;f<_s.length;f++){var d=_s[f];d.blockedOn===s&&(d.blockedOn=null)}for(;0<_s.length&&(f=_s[0],f.blockedOn===null);)nw(f),f.blockedOn===null&&_s.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(d=0;d<f.length;d+=3){var y=f[d],_=f[d+1],w=y[wn]||null;if(typeof _=="function")w||iw(f);else if(w){var b=null;if(_&&_.hasAttribute("formAction")){if(y=_,w=_[wn]||null)b=w.formAction;else if(Cm(y)!==null)continue}else b=w.action;typeof b=="function"?f[d+1]=b:(f.splice(d,3),d-=3),iw(f)}}}function aw(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function u(){y!==null&&(y(),y=null),d||setTimeout(f,20)}function f(){if(!d&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),y!==null&&(y(),y=null)}}}function Rm(s){this._internalRoot=s}v0.prototype.render=Rm.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(r(409));var f=u.current,d=Dr();$A(f,d,s,u,null,null)},v0.prototype.unmount=Rm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;$A(s.current,2,null,s,null,null),Zd(),u[bi]=null}};function v0(s){this._internalRoot=s}v0.prototype.unstable_scheduleHydration=function(s){if(s){var u=Zh();s={blockedOn:null,target:s,priority:u};for(var f=0;f<_s.length&&u!==0&&u<_s[f].priority;f++);_s.splice(f,0,s),f===0&&nw(s)}};var sw=t.version;if(sw!=="19.2.3")throw Error(r(527,sw,"19.2.3"));ft.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=h(u),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var vD={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:nt,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_0.isDisabled&&_0.supportsFiber)try{ni=_0.inject(vD),Nn=_0}catch{}}return _f.createRoot=function(s,u){if(!i(s))throw Error(r(299));var f=!1,d="",y=dE,_=pE,w=gE;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(d=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),u=WA(s,1,!1,null,null,f,d,null,y,_,w,aw),s[bi]=u.current,cm(s),new Rm(u)},_f.hydrateRoot=function(s,u,f){if(!i(s))throw Error(r(299));var d=!1,y="",_=dE,w=pE,b=gE,z=null;return f!=null&&(f.unstable_strictMode===!0&&(d=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(w=f.onCaughtError),f.onRecoverableError!==void 0&&(b=f.onRecoverableError),f.formState!==void 0&&(z=f.formState)),u=WA(s,1,!0,u,f??null,d,y,z,_,w,b,aw),u.context=YA(null),f=u.current,d=Dr(),d=oo(d),y=is(d),y.callback=null,as(f,y,d),f=d,u.current.lanes=f,ao(u,f),Gi(u),s[bi]=u.current,cm(s),new v0(u)},_f.version="19.2.3",_f}var mw;function DD(){if(mw)return Nm.exports;mw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Nm.exports=RD(),Nm.exports}var OD=DD();const ND=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),yw=n=>{const t=PD(n);return t.charAt(0).toUpperCase()+t.slice(1)},xC=(...n)=>n.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),MD=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var VD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const LD=st.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>st.createElement("svg",{ref:c,...VD,width:t,height:t,stroke:n,strokeWidth:r?Number(e)*24/Number(t):e,className:xC("lucide",i),...!a&&!MD(l)&&{"aria-hidden":"true"},...l},[...o.map(([h,p])=>st.createElement(h,p)),...Array.isArray(a)?a:[a]]));const Pe=(n,t)=>{const e=st.forwardRef(({className:r,...i},a)=>st.createElement(LD,{ref:a,iconNode:t,className:xC(`lucide-${ND(yw(n))}`,`lucide-${n}`,r),...i}));return e.displayName=yw(n),e};const kD=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],BD=Pe("archive",kD);const FD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],UD=Pe("box",FD);const zD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jD=Pe("chevron-down",zD);const HD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],GD=Pe("chevron-up",HD);const qD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],EC=Pe("circle-alert",qD);const KD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hv=Pe("circle-check-big",KD);const XD=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],WD=Pe("download",XD);const YD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$D=Pe("eye-off",YD);const QD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ZD=Pe("eye",QD);const JD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tO=Pe("info",JD);const eO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gv=Pe("loader-circle",eO);const nO=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],rO=Pe("log-in",nO);const iO=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],AC=Pe("log-out",iO);const aO=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],sO=Pe("mail",aO);const oO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],uO=Pe("moon",oO);const lO=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],vw=Pe("package",lO);const cO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],l1=Pe("plus",cO);const fO=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hO=Pe("refresh-cw",fO);const dO=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],_w=Pe("scan-barcode",dO);const pO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xw=Pe("settings",pO);const gO=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Ew=Pe("shopping-cart",gO);const mO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],yO=Pe("sun",mO);const vO=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wC=Pe("trash-2",vO);const _O=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xO=Pe("user-plus",_O);const EO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],TC=Pe("x",EO),AO=()=>{};var Aw={};const SC=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},wO=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[e++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[e++],o=n[e++],l=n[e++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const a=n[e++],o=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join("")},IC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],o=i+1<n.length,l=o?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,p=a>>2,g=(a&3)<<4|l>>4;let v=(l&15)<<2|h>>6,x=h&63;c||(x=64,o||(v=64)),r.push(e[p],e[g],e[v],e[x])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(SC(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):wO(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const h=i<n.length?e[n.charAt(i)]:64;++i;const g=i<n.length?e[n.charAt(i)]:64;if(++i,a==null||l==null||h==null||g==null)throw new TO;const v=a<<2|l>>4;if(r.push(v),h!==64){const x=l<<4&240|h>>2;if(r.push(x),g!==64){const A=h<<6&192|g;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SO=function(n){const t=SC(n);return IC.encodeByteArray(t,!0)},CC=function(n){return SO(n).replace(/\./g,"")},bC=function(n){try{return IC.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function RC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const IO=()=>RC().__FIREBASE_DEFAULTS__,CO=()=>{if(typeof process>"u"||typeof Aw>"u")return;const n=Aw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&bC(n[1]);return t&&JSON.parse(t)},K1=()=>{try{return AO()||IO()||CO()||bO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RO=n=>K1()?.emulatorHosts?.[n],DC=()=>K1()?.config,OC=n=>K1()?.[`_${n}`];class DO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}function tc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NC(n){return(await fetch(n,{credentials:"include"})).ok}const zf={};function OO(){const n={prod:[],emulator:[]};for(const t of Object.keys(zf))zf[t]?n.emulator.push(t):n.prod.push(t);return n}function NO(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let ww=!1;function PO(n,t){if(typeof window>"u"||typeof document>"u"||!tc(window.location.host)||zf[n]===t||zf[n]||ww)return;zf[n]=t;function e(v){return`__firebase__banner__${v}`}const r="__firebase__banner",a=OO().prod.length>0;function o(){const v=document.getElementById(r);v&&v.remove()}function l(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function c(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{ww=!0,o()},v}function p(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=NO(r),x=e("text"),A=document.getElementById(x)||document.createElement("span"),S=e("learnmore"),C=document.getElementById(S)||document.createElement("a"),O=e("preprendIcon"),D=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const P=v.element;l(P),p(C,S);const k=h();c(D,O),P.append(D,A,C,k),document.body.appendChild(P)}a?(A.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function PC(){const n=K1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BO(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MC(){return!PC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VC(){return!PC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function LC(){try{return typeof indexedDB=="object"}catch{return!1}}function FO(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}})}const UO="FirebaseError";class La extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=UO,Object.setPrototypeOf(this,La.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sh.prototype.create)}}class Sh{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,a=this.errors[t],o=a?zO(a,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new La(i,l,r)}}function zO(n,t){return n.replace(jO,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const jO=/\{\$([^}]+)}/g;function HO(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function au(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const a=n[i],o=t[i];if(Tw(a)&&Tw(o)){if(!au(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function Tw(n){return n!==null&&typeof n=="object"}function Ih(n){const t=[];for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Rf(n){const t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(a)}}),t}function Df(n){const t=n.indexOf("?");if(!t)return"";const e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}function GO(n,t){const e=new qO(n,t);return e.subscribe.bind(e)}class qO{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");KO(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=Lm),i.error===void 0&&(i.error=Lm),i.complete===void 0&&(i.complete=Lm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KO(n,t){if(typeof n!="object"||n===null)return!1;for(const e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Lm(){}function On(n){return n&&n._delegate?n._delegate:n}class su{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ko="[DEFAULT]";class XO{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new DO;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YO(t))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(t=ko){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ko){return this.instances.has(t)}getOptions(t=ko){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(i)}return i}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),i=this.onInitCallbacks.get(r)??new Set;i.add(t),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&t(a,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WO(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=ko){return this.component?this.component.multipleInstances?t:ko:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WO(n){return n===ko?void 0:n}function YO(n){return n.instantiationMode==="EAGER"}class $O{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new XO(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Yt||(Yt={}));const QO={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},ZO=Yt.INFO,JO={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},t5=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=JO[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class qv{constructor(t){this.name=t,this._logLevel=ZO,this._logHandler=t5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?QO[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...t),this._logHandler(this,Yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...t),this._logHandler(this,Yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...t),this._logHandler(this,Yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...t),this._logHandler(this,Yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...t),this._logHandler(this,Yt.ERROR,...t)}}const e5=(n,t)=>t.some(e=>n instanceof e);let Sw,Iw;function n5(){return Sw||(Sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r5(){return Iw||(Iw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kC=new WeakMap,wy=new WeakMap,BC=new WeakMap,km=new WeakMap,Kv=new WeakMap;function i5(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",o)},a=()=>{e(Vs(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&kC.set(e,n)}).catch(()=>{}),Kv.set(t,n),t}function a5(n){if(wy.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",o),n.removeEventListener("abort",o)},a=()=>{e(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",o),n.addEventListener("abort",o)});wy.set(n,t)}let Ty={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return wy.get(n);if(t==="objectStoreNames")return n.objectStoreNames||BC.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Vs(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function s5(n){Ty=n(Ty)}function o5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(Bm(this),t,...e);return BC.set(r,t.sort?t.sort():[t]),Vs(r)}:r5().includes(n)?function(...t){return n.apply(Bm(this),t),Vs(kC.get(this))}:function(...t){return Vs(n.apply(Bm(this),t))}}function u5(n){return typeof n=="function"?o5(n):(n instanceof IDBTransaction&&a5(n),e5(n,n5())?new Proxy(n,Ty):n)}function Vs(n){if(n instanceof IDBRequest)return i5(n);if(km.has(n))return km.get(n);const t=u5(n);return t!==n&&(km.set(n,t),Kv.set(t,n)),t}const Bm=n=>Kv.get(n);function l5(n,t,{blocked:e,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(n,t),l=Vs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Vs(o.result),c.oldVersion,c.newVersion,Vs(o.transaction),c)}),e&&o.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const c5=["get","getKey","getAll","getAllKeys","count"],f5=["put","add","delete","clear"],Fm=new Map;function Cw(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(Fm.get(t))return Fm.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=f5.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||c5.includes(e)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[e](...l),i&&c.done]))[0]};return Fm.set(t,a),a}s5(n=>({...n,get:(t,e,r)=>Cw(t,e)||n.get(t,e,r),has:(t,e)=>!!Cw(t,e)||n.has(t,e)}));class h5{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(d5(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function d5(n){return n.getComponent()?.type==="VERSION"}const Sy="@firebase/app",bw="0.14.6";const ba=new qv("@firebase/app"),p5="@firebase/app-compat",g5="@firebase/analytics-compat",m5="@firebase/analytics",y5="@firebase/app-check-compat",v5="@firebase/app-check",_5="@firebase/auth",x5="@firebase/auth-compat",E5="@firebase/database",A5="@firebase/data-connect",w5="@firebase/database-compat",T5="@firebase/functions",S5="@firebase/functions-compat",I5="@firebase/installations",C5="@firebase/installations-compat",b5="@firebase/messaging",R5="@firebase/messaging-compat",D5="@firebase/performance",O5="@firebase/performance-compat",N5="@firebase/remote-config",P5="@firebase/remote-config-compat",M5="@firebase/storage",V5="@firebase/storage-compat",L5="@firebase/firestore",k5="@firebase/ai",B5="@firebase/firestore-compat",F5="firebase",U5="12.6.0";const Iy="[DEFAULT]",z5={[Sy]:"fire-core",[p5]:"fire-core-compat",[m5]:"fire-analytics",[g5]:"fire-analytics-compat",[v5]:"fire-app-check",[y5]:"fire-app-check-compat",[_5]:"fire-auth",[x5]:"fire-auth-compat",[E5]:"fire-rtdb",[A5]:"fire-data-connect",[w5]:"fire-rtdb-compat",[T5]:"fire-fn",[S5]:"fire-fn-compat",[I5]:"fire-iid",[C5]:"fire-iid-compat",[b5]:"fire-fcm",[R5]:"fire-fcm-compat",[D5]:"fire-perf",[O5]:"fire-perf-compat",[N5]:"fire-rc",[P5]:"fire-rc-compat",[M5]:"fire-gcs",[V5]:"fire-gcs-compat",[L5]:"fire-fst",[B5]:"fire-fst-compat",[k5]:"fire-vertex","fire-js":"fire-js",[F5]:"fire-js-all"};const c1=new Map,j5=new Map,Cy=new Map;function Rw(n,t){try{n.container.addComponent(t)}catch(e){ba.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ml(n){const t=n.name;if(Cy.has(t))return ba.debug(`There were multiple attempts to register component ${t}.`),!1;Cy.set(t,n);for(const e of c1.values())Rw(e,n);for(const e of j5.values())Rw(e,n);return!0}function Xv(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Nr(n){return n==null?!1:n.settings!==void 0}const H5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ls=new Sh("app","Firebase",H5);class G5{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new su("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}const ec=U5;function FC(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r={name:Iy,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!="string"||!i)throw Ls.create("bad-app-name",{appName:String(i)});if(e||(e=DC()),!e)throw Ls.create("no-options");const a=c1.get(i);if(a){if(au(e,a.options)&&au(r,a.config))return a;throw Ls.create("duplicate-app",{appName:i})}const o=new $O(i);for(const c of Cy.values())o.addComponent(c);const l=new G5(e,r,o);return c1.set(i,l),l}function q5(n=Iy){const t=c1.get(n);if(!t&&n===Iy&&DC())return FC();if(!t)throw Ls.create("no-app",{appName:n});return t}function ks(n,t,e){let r=z5[n]??n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${t}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ba.warn(o.join(" "));return}Ml(new su(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const K5="firebase-heartbeat-database",X5=1,rh="firebase-heartbeat-store";let Um=null;function UC(){return Um||(Um=l5(K5,X5,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(rh)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ls.create("idb-open",{originalErrorMessage:n.message})})),Um}async function W5(n){try{const e=(await UC()).transaction(rh),r=await e.objectStore(rh).get(zC(n));return await e.done,r}catch(t){if(t instanceof La)ba.warn(t.message);else{const e=Ls.create("idb-get",{originalErrorMessage:t?.message});ba.warn(e.message)}}}async function Dw(n,t){try{const r=(await UC()).transaction(rh,"readwrite");await r.objectStore(rh).put(t,zC(n)),await r.done}catch(e){if(e instanceof La)ba.warn(e.message);else{const r=Ls.create("idb-set",{originalErrorMessage:e?.message});ba.warn(r.message)}}}function zC(n){return`${n.name}!${n.options.appId}`}const Y5=1024,$5=30;class Q5{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new J5(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ow();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>$5){const i=tN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ba.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ow(),{heartbeatsToSend:e,unsentEntries:r}=Z5(this._heartbeatsCache.heartbeats),i=CC(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ba.warn(t),""}}}function Ow(){return new Date().toISOString().substring(0,10)}function Z5(n,t=Y5){const e=[];let r=n.slice();for(const i of n){const a=e.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Nw(e)>t){a.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),Nw(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class J5{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LC()?FO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await W5(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dw(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Nw(n){return CC(JSON.stringify({version:2,heartbeats:n})).length}function tN(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}function eN(n){Ml(new su("platform-logger",t=>new h5(t),"PRIVATE")),Ml(new su("heartbeat",t=>new Q5(t),"PRIVATE")),ks(Sy,bw,n),ks(Sy,bw,"esm2020"),ks("fire-js","")}eN("");var nN="firebase",rN="12.7.0";ks(nN,rN,"app");var Pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Bs,jC;(function(){var n;function t(R,I){function M(){}M.prototype=I.prototype,R.F=I.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(B,U,H){for(var F=Array(arguments.length-2),Ut=2;Ut<arguments.length;Ut++)F[Ut-2]=arguments[Ut];return I.prototype[U].apply(B,F)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,M){M||(M=0);const B=Array(16);if(typeof I=="string")for(var U=0;U<16;++U)B[U]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(U=0;U<16;++U)B[U]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=R.g[0],M=R.g[1],U=R.g[2];let H=R.g[3],F;F=I+(H^M&(U^H))+B[0]+3614090360&4294967295,I=M+(F<<7&4294967295|F>>>25),F=H+(U^I&(M^U))+B[1]+3905402710&4294967295,H=I+(F<<12&4294967295|F>>>20),F=U+(M^H&(I^M))+B[2]+606105819&4294967295,U=H+(F<<17&4294967295|F>>>15),F=M+(I^U&(H^I))+B[3]+3250441966&4294967295,M=U+(F<<22&4294967295|F>>>10),F=I+(H^M&(U^H))+B[4]+4118548399&4294967295,I=M+(F<<7&4294967295|F>>>25),F=H+(U^I&(M^U))+B[5]+1200080426&4294967295,H=I+(F<<12&4294967295|F>>>20),F=U+(M^H&(I^M))+B[6]+2821735955&4294967295,U=H+(F<<17&4294967295|F>>>15),F=M+(I^U&(H^I))+B[7]+4249261313&4294967295,M=U+(F<<22&4294967295|F>>>10),F=I+(H^M&(U^H))+B[8]+1770035416&4294967295,I=M+(F<<7&4294967295|F>>>25),F=H+(U^I&(M^U))+B[9]+2336552879&4294967295,H=I+(F<<12&4294967295|F>>>20),F=U+(M^H&(I^M))+B[10]+4294925233&4294967295,U=H+(F<<17&4294967295|F>>>15),F=M+(I^U&(H^I))+B[11]+2304563134&4294967295,M=U+(F<<22&4294967295|F>>>10),F=I+(H^M&(U^H))+B[12]+1804603682&4294967295,I=M+(F<<7&4294967295|F>>>25),F=H+(U^I&(M^U))+B[13]+4254626195&4294967295,H=I+(F<<12&4294967295|F>>>20),F=U+(M^H&(I^M))+B[14]+2792965006&4294967295,U=H+(F<<17&4294967295|F>>>15),F=M+(I^U&(H^I))+B[15]+1236535329&4294967295,M=U+(F<<22&4294967295|F>>>10),F=I+(U^H&(M^U))+B[1]+4129170786&4294967295,I=M+(F<<5&4294967295|F>>>27),F=H+(M^U&(I^M))+B[6]+3225465664&4294967295,H=I+(F<<9&4294967295|F>>>23),F=U+(I^M&(H^I))+B[11]+643717713&4294967295,U=H+(F<<14&4294967295|F>>>18),F=M+(H^I&(U^H))+B[0]+3921069994&4294967295,M=U+(F<<20&4294967295|F>>>12),F=I+(U^H&(M^U))+B[5]+3593408605&4294967295,I=M+(F<<5&4294967295|F>>>27),F=H+(M^U&(I^M))+B[10]+38016083&4294967295,H=I+(F<<9&4294967295|F>>>23),F=U+(I^M&(H^I))+B[15]+3634488961&4294967295,U=H+(F<<14&4294967295|F>>>18),F=M+(H^I&(U^H))+B[4]+3889429448&4294967295,M=U+(F<<20&4294967295|F>>>12),F=I+(U^H&(M^U))+B[9]+568446438&4294967295,I=M+(F<<5&4294967295|F>>>27),F=H+(M^U&(I^M))+B[14]+3275163606&4294967295,H=I+(F<<9&4294967295|F>>>23),F=U+(I^M&(H^I))+B[3]+4107603335&4294967295,U=H+(F<<14&4294967295|F>>>18),F=M+(H^I&(U^H))+B[8]+1163531501&4294967295,M=U+(F<<20&4294967295|F>>>12),F=I+(U^H&(M^U))+B[13]+2850285829&4294967295,I=M+(F<<5&4294967295|F>>>27),F=H+(M^U&(I^M))+B[2]+4243563512&4294967295,H=I+(F<<9&4294967295|F>>>23),F=U+(I^M&(H^I))+B[7]+1735328473&4294967295,U=H+(F<<14&4294967295|F>>>18),F=M+(H^I&(U^H))+B[12]+2368359562&4294967295,M=U+(F<<20&4294967295|F>>>12),F=I+(M^U^H)+B[5]+4294588738&4294967295,I=M+(F<<4&4294967295|F>>>28),F=H+(I^M^U)+B[8]+2272392833&4294967295,H=I+(F<<11&4294967295|F>>>21),F=U+(H^I^M)+B[11]+1839030562&4294967295,U=H+(F<<16&4294967295|F>>>16),F=M+(U^H^I)+B[14]+4259657740&4294967295,M=U+(F<<23&4294967295|F>>>9),F=I+(M^U^H)+B[1]+2763975236&4294967295,I=M+(F<<4&4294967295|F>>>28),F=H+(I^M^U)+B[4]+1272893353&4294967295,H=I+(F<<11&4294967295|F>>>21),F=U+(H^I^M)+B[7]+4139469664&4294967295,U=H+(F<<16&4294967295|F>>>16),F=M+(U^H^I)+B[10]+3200236656&4294967295,M=U+(F<<23&4294967295|F>>>9),F=I+(M^U^H)+B[13]+681279174&4294967295,I=M+(F<<4&4294967295|F>>>28),F=H+(I^M^U)+B[0]+3936430074&4294967295,H=I+(F<<11&4294967295|F>>>21),F=U+(H^I^M)+B[3]+3572445317&4294967295,U=H+(F<<16&4294967295|F>>>16),F=M+(U^H^I)+B[6]+76029189&4294967295,M=U+(F<<23&4294967295|F>>>9),F=I+(M^U^H)+B[9]+3654602809&4294967295,I=M+(F<<4&4294967295|F>>>28),F=H+(I^M^U)+B[12]+3873151461&4294967295,H=I+(F<<11&4294967295|F>>>21),F=U+(H^I^M)+B[15]+530742520&4294967295,U=H+(F<<16&4294967295|F>>>16),F=M+(U^H^I)+B[2]+3299628645&4294967295,M=U+(F<<23&4294967295|F>>>9),F=I+(U^(M|~H))+B[0]+4096336452&4294967295,I=M+(F<<6&4294967295|F>>>26),F=H+(M^(I|~U))+B[7]+1126891415&4294967295,H=I+(F<<10&4294967295|F>>>22),F=U+(I^(H|~M))+B[14]+2878612391&4294967295,U=H+(F<<15&4294967295|F>>>17),F=M+(H^(U|~I))+B[5]+4237533241&4294967295,M=U+(F<<21&4294967295|F>>>11),F=I+(U^(M|~H))+B[12]+1700485571&4294967295,I=M+(F<<6&4294967295|F>>>26),F=H+(M^(I|~U))+B[3]+2399980690&4294967295,H=I+(F<<10&4294967295|F>>>22),F=U+(I^(H|~M))+B[10]+4293915773&4294967295,U=H+(F<<15&4294967295|F>>>17),F=M+(H^(U|~I))+B[1]+2240044497&4294967295,M=U+(F<<21&4294967295|F>>>11),F=I+(U^(M|~H))+B[8]+1873313359&4294967295,I=M+(F<<6&4294967295|F>>>26),F=H+(M^(I|~U))+B[15]+4264355552&4294967295,H=I+(F<<10&4294967295|F>>>22),F=U+(I^(H|~M))+B[6]+2734768916&4294967295,U=H+(F<<15&4294967295|F>>>17),F=M+(H^(U|~I))+B[13]+1309151649&4294967295,M=U+(F<<21&4294967295|F>>>11),F=I+(U^(M|~H))+B[4]+4149444226&4294967295,I=M+(F<<6&4294967295|F>>>26),F=H+(M^(I|~U))+B[11]+3174756917&4294967295,H=I+(F<<10&4294967295|F>>>22),F=U+(I^(H|~M))+B[2]+718787259&4294967295,U=H+(F<<15&4294967295|F>>>17),F=M+(H^(U|~I))+B[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(U+(F<<21&4294967295|F>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+H&4294967295}r.prototype.v=function(R,I){I===void 0&&(I=R.length);const M=I-this.blockSize,B=this.C;let U=this.h,H=0;for(;H<I;){if(U==0)for(;H<=M;)i(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<I;)if(B[U++]=R.charCodeAt(H++),U==this.blockSize){i(this,B),U=0;break}}else for(;H<I;)if(B[U++]=R[H++],U==this.blockSize){i(this,B),U=0;break}}this.h=U,this.o+=I},r.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;I=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=I&255,I/=256;for(this.v(R),R=Array(16),I=0,M=0;M<4;++M)for(let B=0;B<32;B+=8)R[I++]=this.g[M]>>>B&255;return R};function a(R,I){var M=l;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=I(R)}function o(R,I){this.h=I;const M=[];let B=!0;for(let U=R.length-1;U>=0;U--){const H=R[U]|0;B&&H==I||(M[U]=H,B=!1)}this.g=M}var l={};function c(R){return-128<=R&&R<128?a(R,function(I){return new o([I|0],I<0?-1:0)}):new o([R|0],R<0?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return g;if(R<0)return C(h(-R));const I=[];let M=1;for(let B=0;R>=M;B++)I[B]=R/M|0,M*=4294967296;return new o(I,0)}function p(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return C(p(R.substring(1),I));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=h(Math.pow(I,8));let B=g;for(let H=0;H<R.length;H+=8){var U=Math.min(8,R.length-H);const F=parseInt(R.substring(H,H+U),I);U<8?(U=h(Math.pow(I,U)),B=B.j(U).add(h(F))):(B=B.j(M),B=B.add(h(F)))}return B}var g=c(0),v=c(1),x=c(16777216);n=o.prototype,n.m=function(){if(S(this))return-C(this).m();let R=0,I=1;for(let M=0;M<this.g.length;M++){const B=this.i(M);R+=(B>=0?B:4294967296+B)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(A(this))return"0";if(S(this))return"-"+C(this).toString(R);const I=h(Math.pow(R,6));var M=this;let B="";for(;;){const U=k(M,I).g;M=O(M,U.j(I));let H=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=U,A(M))return H+B;for(;H.length<6;)H="0"+H;B=H+B}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function A(R){if(R.h!=0)return!1;for(let I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function S(R){return R.h==-1}n.l=function(R){return R=O(this,R),S(R)?-1:A(R)?0:1};function C(R){const I=R.g.length,M=[];for(let B=0;B<I;B++)M[B]=~R.g[B];return new o(M,~R.h).add(v)}n.abs=function(){return S(this)?C(this):this},n.add=function(R){const I=Math.max(this.g.length,R.g.length),M=[];let B=0;for(let U=0;U<=I;U++){let H=B+(this.i(U)&65535)+(R.i(U)&65535),F=(H>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);B=F>>>16,H&=65535,F&=65535,M[U]=F<<16|H}return new o(M,M[M.length-1]&-2147483648?-1:0)};function O(R,I){return R.add(C(I))}n.j=function(R){if(A(this)||A(R))return g;if(S(this))return S(R)?C(this).j(C(R)):C(C(this).j(R));if(S(R))return C(this.j(C(R)));if(this.l(x)<0&&R.l(x)<0)return h(this.m()*R.m());const I=this.g.length+R.g.length,M=[];for(var B=0;B<2*I;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(let U=0;U<R.g.length;U++){const H=this.i(B)>>>16,F=this.i(B)&65535,Ut=R.i(U)>>>16,ae=R.i(U)&65535;M[2*B+2*U]+=F*ae,D(M,2*B+2*U),M[2*B+2*U+1]+=H*ae,D(M,2*B+2*U+1),M[2*B+2*U+1]+=F*Ut,D(M,2*B+2*U+1),M[2*B+2*U+2]+=H*Ut,D(M,2*B+2*U+2)}for(R=0;R<I;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=I;R<2*I;R++)M[R]=0;return new o(M,0)};function D(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function P(R,I){this.g=R,this.h=I}function k(R,I){if(A(I))throw Error("division by zero");if(A(R))return new P(g,g);if(S(R))return I=k(C(R),I),new P(C(I.g),C(I.h));if(S(I))return I=k(R,C(I)),new P(C(I.g),I.h);if(R.g.length>30){if(S(R)||S(I))throw Error("slowDivide_ only works with positive integers.");for(var M=v,B=I;B.l(R)<=0;)M=j(M),B=j(B);var U=K(M,1),H=K(B,1);for(B=K(B,2),M=K(M,2);!A(B);){var F=H.add(B);F.l(R)<=0&&(U=U.add(M),H=F),B=K(B,1),M=K(M,1)}return I=O(R,U.j(I)),new P(U,I)}for(U=g;R.l(I)>=0;){for(M=Math.max(1,Math.floor(R.m()/I.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),H=h(M),F=H.j(I);S(F)||F.l(R)>0;)M-=B,H=h(M),F=H.j(I);A(H)&&(H=v),U=U.add(H),R=O(R,F)}return new P(U,R)}n.B=function(R){return k(this,R).h},n.and=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let B=0;B<I;B++)M[B]=this.i(B)&R.i(B);return new o(M,this.h&R.h)},n.or=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let B=0;B<I;B++)M[B]=this.i(B)|R.i(B);return new o(M,this.h|R.h)},n.xor=function(R){const I=Math.max(this.g.length,R.g.length),M=[];for(let B=0;B<I;B++)M[B]=this.i(B)^R.i(B);return new o(M,this.h^R.h)};function j(R){const I=R.g.length+1,M=[];for(let B=0;B<I;B++)M[B]=R.i(B)<<1|R.i(B-1)>>>31;return new o(M,R.h)}function K(R,I){const M=I>>5;I%=32;const B=R.g.length-M,U=[];for(let H=0;H<B;H++)U[H]=I>0?R.i(H+M)>>>I|R.i(H+M+1)<<32-I:R.i(H+M);return new o(U,R.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,jC=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Bs=o}).apply(typeof Pw<"u"?Pw:typeof self<"u"?self:typeof window<"u"?window:{});var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var HC,Of,GC,B0,by,qC,KC,XC;(function(){var n,t=Object.defineProperty;function e(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof x0=="object"&&x0];for(var E=0;E<m.length;++E){var T=m[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=e(this);function i(m,E){if(E)t:{var T=r;m=m.split(".");for(var N=0;N<m.length-1;N++){var Y=m[N];if(!(Y in T))break t;T=T[Y]}m=m[m.length-1],N=T[m],E=E(N),E!=N&&E!=null&&t(T,m,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(E){var T=[],N;for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&T.push([N,E[N]]);return T}});var a=a||{},o=this||self;function l(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function c(m,E,T){return m.call.apply(m.bind,arguments)}function h(m,E,T){return h=c,h.apply(null,arguments)}function p(m,E){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),m.apply(this,N)}}function g(m,E){function T(){}T.prototype=E.prototype,m.Z=E.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(N,Y,tt){for(var ht=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)ht[Vt-2]=arguments[Vt];return E.prototype[Y].apply(N,ht)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function x(m){const E=m.length;if(E>0){const T=Array(E);for(let N=0;N<E;N++)T[N]=m[N];return T}return[]}function A(m,E){for(let N=1;N<arguments.length;N++){const Y=arguments[N];var T=typeof Y;if(T=T!="object"?T:Y?Array.isArray(Y)?"array":T:"null",T=="array"||T=="object"&&typeof Y.length=="number"){T=m.length||0;const tt=Y.length||0;m.length=T+tt;for(let ht=0;ht<tt;ht++)m[T+ht]=Y[ht]}else m.push(Y)}}class S{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function C(m){o.setTimeout(()=>{throw m},0)}function O(){var m=R;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class D{constructor(){this.h=this.g=null}add(E,T){const N=P.get();N.set(E,T),this.h?this.h.next=N:this.g=N,this.h=N}}var P=new S(()=>new k,m=>m.reset());class k{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let j,K=!1,R=new D,I=()=>{const m=Promise.resolve(void 0);j=()=>{m.then(M)}};function M(){for(var m;m=O();){try{m.h.call(m.g)}catch(T){C(T)}var E=P;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}K=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};o.addEventListener("test",T,E),o.removeEventListener("test",T,E)}catch{}return m})();function F(m){return/^[\s\xa0]*$/.test(m)}function Ut(m,E){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}g(Ut,U),Ut.prototype.init=function(m,E){const T=this.type=m.type,N=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(T=="mouseover"?E=m.fromElement:T=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Ut.Z.h.call(this)},Ut.prototype.h=function(){Ut.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),nt=0;function ft(m,E,T,N,Y){this.listener=m,this.proxy=null,this.src=E,this.type=T,this.capture=!!N,this.ha=Y,this.key=++nt,this.da=this.fa=!1}function yt(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function kt(m,E,T){for(const N in m)E.call(T,m[N],N,m)}function Kt(m,E){for(const T in m)E.call(void 0,m[T],T,m)}function q(m){const E={};for(const T in m)E[T]=m[T];return E}const lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(m,E){let T,N;for(let Y=1;Y<arguments.length;Y++){N=arguments[Y];for(T in N)m[T]=N[T];for(let tt=0;tt<lt.length;tt++)T=lt[tt],Object.prototype.hasOwnProperty.call(N,T)&&(m[T]=N[T])}}function vt(m){this.src=m,this.g={},this.h=0}vt.prototype.add=function(m,E,T,N,Y){const tt=m.toString();m=this.g[tt],m||(m=this.g[tt]=[],this.h++);const ht=Bt(m,E,N,Y);return ht>-1?(E=m[ht],T||(E.fa=!1)):(E=new ft(E,this.src,tt,!!N,Y),E.fa=T,m.push(E)),E};function Nt(m,E){const T=E.type;if(T in m.g){var N=m.g[T],Y=Array.prototype.indexOf.call(N,E,void 0),tt;(tt=Y>=0)&&Array.prototype.splice.call(N,Y,1),tt&&(yt(E),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Bt(m,E,T,N){for(let Y=0;Y<m.length;++Y){const tt=m[Y];if(!tt.da&&tt.listener==E&&tt.capture==!!T&&tt.ha==N)return Y}return-1}var Zt="closure_lm_"+(Math.random()*1e6|0),fn={};function Me(m,E,T,N,Y){if(Array.isArray(E)){for(let tt=0;tt<E.length;tt++)Me(m,E[tt],T,N,Y);return null}return T=gc(T),m&&m[ae]?m.J(E,T,l(N)?!!N.capture:!1,Y):eo(m,E,T,!1,N,Y)}function eo(m,E,T,N,Y,tt){if(!E)throw Error("Invalid event type");const ht=l(Y)?!!Y.capture:!!Y;let Vt=no(m);if(Vt||(m[Zt]=Vt=new vt(m)),T=Vt.add(E,T,N,ht,tt),T.proxy)return T;if(N=vu(),T.proxy=N,N.src=m,N.listener=T,m.addEventListener)H||(Y=ht),Y===void 0&&(Y=!1),m.addEventListener(E.toString(),N,Y);else if(m.attachEvent)m.attachEvent(wi(E.toString()),N);else if(m.addListener&&m.removeListener)m.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function vu(){function m(T){return E.call(m.src,m.listener,T)}const E=dc;return m}function _u(m,E,T,N,Y){if(Array.isArray(E))for(var tt=0;tt<E.length;tt++)_u(m,E[tt],T,N,Y);else N=l(N)?!!N.capture:!!N,T=gc(T),m&&m[ae]?(m=m.i,tt=String(E).toString(),tt in m.g&&(E=m.g[tt],T=Bt(E,T,N,Y),T>-1&&(yt(E[T]),Array.prototype.splice.call(E,T,1),E.length==0&&(delete m.g[tt],m.h--)))):m&&(m=no(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Bt(E,T,N,Y)),(T=m>-1?E[m]:null)&&xu(T))}function xu(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ae])Nt(E.i,m);else{var T=m.type,N=m.proxy;E.removeEventListener?E.removeEventListener(T,N,m.capture):E.detachEvent?E.detachEvent(wi(T),N):E.addListener&&E.removeListener&&E.removeListener(N),(T=no(E))?(Nt(T,m),T.h==0&&(T.src=null,E[Zt]=null)):yt(m)}}}function wi(m){return m in fn?fn[m]:fn[m]="on"+m}function dc(m,E){if(m.da)m=!0;else{E=new Ut(E,this);const T=m.listener,N=m.ha||m.src;m.fa&&xu(m),m=T.call(N,E)}return m}function no(m){return m=m[Zt],m instanceof vt?m:null}var pc="__closure_events_fn_"+(Math.random()*1e9>>>0);function gc(m){return typeof m=="function"?m:(m[pc]||(m[pc]=function(E){return m.handleEvent(E)}),m[pc])}function Ze(){B.call(this),this.i=new vt(this),this.M=this,this.G=null}g(Ze,B),Ze.prototype[ae]=!0,Ze.prototype.removeEventListener=function(m,E,T,N){_u(this,m,E,T,N)};function hn(m,E){var T,N=m.G;if(N)for(T=[];N;N=N.G)T.push(N);if(m=m.M,N=E.type||E,typeof E=="string")E=new U(E,m);else if(E instanceof U)E.target=E.target||m;else{var Y=E;E=new U(N,m),mt(E,Y)}Y=!0;let tt,ht;if(T)for(ht=T.length-1;ht>=0;ht--)tt=E.g=T[ht],Y=ja(tt,N,!0,E)&&Y;if(tt=E.g=m,Y=ja(tt,N,!0,E)&&Y,Y=ja(tt,N,!1,E)&&Y,T)for(ht=0;ht<T.length;ht++)tt=E.g=T[ht],Y=ja(tt,N,!1,E)&&Y}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const T=m.g[E];for(let N=0;N<T.length;N++)yt(T[N]);delete m.g[E],m.h--}}this.G=null},Ze.prototype.J=function(m,E,T,N){return this.i.add(String(m),E,!1,T,N)},Ze.prototype.K=function(m,E,T,N){return this.i.add(String(m),E,!0,T,N)};function ja(m,E,T,N){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let tt=0;tt<E.length;++tt){const ht=E[tt];if(ht&&!ht.da&&ht.capture==T){const Vt=ht.listener,Ke=ht.ha||ht.src;ht.fa&&Nt(m.i,ht),Y=Vt.call(Ke,N)!==!1&&Y}}return Y&&!N.defaultPrevented}function Np(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:o.setTimeout(m,E||0)}function qh(m){m.g=Np(()=>{m.g=null,m.i&&(m.i=!1,qh(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class tr extends B{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:qh(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(m){B.call(this),this.h=m,this.g={}}g(ro,B);var mc=[];function yc(m){kt(m.g,function(E,T){this.g.hasOwnProperty(T)&&xu(E)},m),m.g={}}ro.prototype.N=function(){ro.Z.N.call(this),yc(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ha=o.JSON.stringify,Pp=o.JSON.parse,Kh=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Xh(){}function Wh(){}var ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nn(){U.call(this,"d")}g(Nn,U);function Lr(){U.call(this,"c")}g(Lr,U);var qe={},Yh=null;function Eu(){return Yh=Yh||new Ze}qe.Ia="serverreachability";function $h(m){U.call(this,qe.Ia,m)}g($h,U);function Ti(m){const E=Eu();hn(E,new $h(E))}qe.STAT_EVENT="statevent";function io(m,E){U.call(this,qe.STAT_EVENT,m),this.stat=E}g(io,U);function Je(m){const E=Eu();hn(E,new io(E,m))}qe.Ja="timingevent";function Si(m,E){U.call(this,qe.Ja,m),this.size=E}g(Si,U);function Ii(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},E)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Mp(m,E,T,N,Y,tt){m.info(function(){if(m.g)if(tt){var ht="",Vt=tt.split("&");for(let se=0;se<Vt.length;se++){var Ke=Vt[se].split("=");if(Ke.length>1){const Ve=Ke[0];Ke=Ke[1];const Ur=Ve.split("_");ht=Ur.length>=2&&Ur[1]=="type"?ht+(Ve+"="+Ke+"&"):ht+(Ve+"=redacted&")}}}else ht=null;else ht=tt;return"XMLHTTP REQ ("+N+") [attempt "+Y+"]: "+E+`
`+T+`
`+ht})}function Qh(m,E,T,N,Y,tt,ht){m.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Y+"]: "+E+`
`+T+`
`+tt+" "+ht})}function Ci(m,E,T,N){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Vp(m,T)+(N?" "+N:"")})}function ao(m,E){m.info(function(){return"TIMEOUT: "+E})}ri.prototype.info=function(){};function Vp(m,E){if(!m.g)return E;if(!E)return null;try{const tt=JSON.parse(E);if(tt){for(m=0;m<tt.length;m++)if(Array.isArray(tt[m])){var T=tt[m];if(!(T.length<2)){var N=T[1];if(Array.isArray(N)&&!(N.length<1)){var Y=N[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ht=1;ht<N.length;ht++)N[ht]=""}}}}return Ha(tt)}catch{return E}}var so={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_c;function oo(){}g(oo,Xh),oo.prototype.g=function(){return new XMLHttpRequest},_c=new oo;function aa(m){return encodeURIComponent(String(m))}function Zh(m){var E=1;m=m.split(":");const T=[];for(;E>0&&m.length;)T.push(m.shift()),E--;return m.length&&T.push(m.join(":")),T}function ii(m,E,T,N){this.j=m,this.i=E,this.l=T,this.S=N||1,this.V=new ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var tn={},wn={};function bi(m,E,T){m.M=1,m.A=uo(nn(E)),m.u=T,m.R=!0,Au(m,null)}function Au(m,E){m.F=Date.now(),Ri(m),m.B=nn(m.A);var T=m.B,N=m.S;Array.isArray(N)||(N=[String(N)]),Iu(T.i,"t",N),m.C=0,T=m.j.L,m.h=new ai,m.g=dd(m.j,T?E:null,!m.u),m.P>0&&(m.O=new tr(h(m.Y,m,m.g),m.P)),E=m.V,T=m.g,N=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(mc[0]=Y.toString()),Y=mc);for(let tt=0;tt<Y.length;tt++){const ht=Me(T,Y[tt],N||E.handleEvent,!1,E.h||E);if(!ht)break;E.g[ht.key]=ht}E=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Ti(),Mp(m.i,m.v,m.B,m.l,m.S,m.u)}ii.prototype.ba=function(m){m=m.target;const E=this.O;E&&ui(m)==3?E.j():this.Y(m)},ii.prototype.Y=function(m){try{if(m==this.g)t:{const Vt=ui(this.g),Ke=this.g.ya(),se=this.g.ca();if(!(Vt<3)&&(Vt!=3||this.g&&(this.h.h||this.g.la()||Pn(this.g)))){this.K||Vt!=4||Ke==7||(Ke==8||se<=0?Ti(3):Ti(2)),Di(this);var E=this.g.ca();this.X=E;var T=Lp(this);if(this.o=E==200,Qh(this.i,this.v,this.B,this.l,this.S,Vt,E),this.o){if(this.U&&!this.L){e:{if(this.g){var N,Y=this.g;if((N=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(N)){var tt=N;break e}}tt=null}if(m=tt)Ci(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oi(this,m);else{this.o=!1,this.m=3,Je(12),Ar(this),kr(this);break t}}if(this.R){m=!0;let Ve;for(;!this.K&&this.C<T.length;)if(Ve=td(this,T),Ve==wn){Vt==4&&(this.m=4,Je(14),m=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Ve==tn){this.m=4,Je(15),Ci(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Ci(this.i,this.l,Ve,null),Oi(this,Ve);if(Jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||T.length!=0||this.h.h||(this.m=1,Je(16),m=!1),this.o=this.o&&m,!m)Ci(this.i,this.l,T,"[Invalid Chunked Response]"),Ar(this),kr(this);else if(T.length>0&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.aa&&!ht.P&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Mc(ht),ht.P=!0,Je(11))}}else Ci(this.i,this.l,T,null),Oi(this,T);Vt==4&&Ar(this),this.o&&!this.K&&(Vt==4?ld(this.j,this):(this.o=!1,Ri(this)))}else oa(this.g),E==400&&T.indexOf("Unknown SID")>0?(this.m=3,Je(12)):(this.m=0,Je(13)),Ar(this),kr(this)}}}catch{}};function Lp(m){if(!Jh(m))return m.g.la();const E=Pn(m.g);if(E==="")return"";let T="";const N=E.length,Y=ui(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Ar(m),kr(m),"";m.h.i=new o.TextDecoder}for(let tt=0;tt<N;tt++)m.h.h=!0,T+=m.h.i.decode(E[tt],{stream:!(Y&&tt==N-1)});return E.length=0,m.h.g+=T,m.C=0,m.h.g}function Jh(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function td(m,E){var T=m.C,N=E.indexOf(`
`,T);return N==-1?wn:(T=Number(E.substring(T,N)),isNaN(T)?tn:(N+=1,N+T>E.length?wn:(E=E.slice(N,N+T),m.C=N+T,E)))}ii.prototype.cancel=function(){this.K=!0,Ar(this)};function Ri(m){m.T=Date.now()+m.H,wu(m,m.H)}function wu(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ii(h(m.aa,m),E)}function Di(m){m.D&&(o.clearTimeout(m.D),m.D=null)}ii.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(ao(this.i,this.B),this.M!=2&&(Ti(),Je(17)),Ar(this),this.m=2,kr(this)):wu(this,this.T-m)};function kr(m){m.j.I==0||m.K||ld(m.j,m)}function Ar(m){Di(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,yc(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Oi(m,E){try{var T=m.j;if(T.I!=0&&(T.g==m||Pi(T.h,m))){if(!m.L&&Pi(T.h,m)&&T.I==3){try{var N=T.Ba.g.parse(E)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Y=N;if(Y[0]==0){t:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)Ou(T),Qa(T);else break t;mo(T),Je(18)}}else T.xa=Y[1],0<T.xa-T.K&&Y[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ii(h(T.Va,T),6e3));Ni(T.h)<=1&&T.ta&&(T.ta=void 0)}else Fi(T,11)}else if((m.L||T.g==m)&&Ou(T),!F(E))for(Y=T.Ba.g.parse(E),E=0;E<Y.length;E++){let se=Y[E];const Ve=se[0];if(!(Ve<=T.K))if(T.K=Ve,se=se[1],T.I==2)if(se[0]=="c"){T.M=se[1],T.ba=se[2];const Ur=se[3];Ur!=null&&(T.ka=Ur,T.j.info("VER="+T.ka));const Ui=se[4];Ui!=null&&(T.za=Ui,T.j.info("SVER="+T.za));const li=se[5];li!=null&&typeof li=="number"&&li>0&&(N=1.5*li,T.O=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const ci=m.g;if(ci){const yo=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var tt=N.h;tt.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(Ac(tt,tt.h),tt.h=null))}if(N.G){const Nu=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(N.wa=Nu,he(N.J,N.G,Nu))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),N=T;var ht=m;if(N.na=hd(N,N.L?N.ba:null,N.W),ht.L){wc(N.h,ht);var Vt=ht,Ke=N.O;Ke&&(Vt.H=Ke),Vt.D&&(Di(Vt),Ri(Vt)),N.g=ht}else od(N);T.i.length>0&&Bi(T)}else se[0]!="stop"&&se[0]!="close"||Fi(T,7);else T.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Fi(T,7):Nc(T):se[0]!="noop"&&T.l&&T.l.qa(se),T.A=0)}}Ti(4)}catch{}}var en=class{constructor(m,E){this.g=m,this.map=E}};function xc(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ec(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Ni(m){return m.h?1:m.g?m.g.size:0}function Pi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Ac(m,E){m.g?m.g.add(E):m.h=E}function wc(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}xc.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Tc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const T of m.g.values())E=E.concat(T.G);return E}return x(m.i)}var ed=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tu(m,E){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const N=m[T].indexOf("=");let Y,tt=null;N>=0?(Y=m[T].substring(0,N),tt=m[T].substring(N+1)):Y=m[T],E(Y,tt?decodeURIComponent(tt.replace(/\+/g," ")):"")}}}function wr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof wr?(this.l=m.l,Tn(this,m.j),this.o=m.o,this.g=m.g,Ga(this,m.u),this.h=m.h,Sc(this,ad(m.i)),this.m=m.m):m&&(E=String(m).match(ed))?(this.l=!1,Tn(this,E[1]||"",!0),this.o=Mi(E[2]||""),this.g=Mi(E[3]||"",!0),Ga(this,E[4]),this.h=Mi(E[5]||"",!0),Sc(this,E[6]||"",!0),this.m=Mi(E[7]||"")):(this.l=!1,this.i=new Ka(null,this.l))}wr.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(lo(E,Su,!0),":");var T=this.g;return(T||E=="file")&&(m.push("//"),(E=this.o)&&m.push(lo(E,Su,!0),"@"),m.push(aa(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(lo(T,T.charAt(0)=="/"?Ic:nd,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",lo(T,rd)),m.join("")},wr.prototype.resolve=function(m){const E=nn(this);let T=!!m.j;T?Tn(E,m.j):T=!!m.o,T?E.o=m.o:T=!!m.g,T?E.g=m.g:T=m.u!=null;var N=m.h;if(T)Ga(E,m.u);else if(T=!!m.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(N=E.h.slice(0,Y+1)+N)}if(Y=N,Y==".."||Y==".")N="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){N=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const tt=[];for(let ht=0;ht<Y.length;){const Vt=Y[ht++];Vt=="."?N&&ht==Y.length&&tt.push(""):Vt==".."?((tt.length>1||tt.length==1&&tt[0]!="")&&tt.pop(),N&&ht==Y.length&&tt.push("")):(tt.push(Vt),N=!0)}N=tt.join("/")}else N=Y}return T?E.h=N:T=m.i.toString()!=="",T?Sc(E,ad(m.i)):T=!!m.m,T&&(E.m=m.m),E};function nn(m){return new wr(m)}function Tn(m,E,T){m.j=T?Mi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Ga(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Sc(m,E,T){E instanceof Ka?(m.i=E,Cu(m.i,m.l)):(T||(E=lo(E,qa)),m.i=new Ka(E,m.l))}function he(m,E,T){m.i.set(E,T)}function uo(m){return he(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Mi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function lo(m,E,T){return typeof m=="string"?(m=encodeURI(m).replace(E,ur),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ur(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Su=/[#\/\?@]/g,nd=/[#\?:]/g,Ic=/[#\?]/g,qa=/[#\?@]/g,rd=/#/g;function Ka(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function lr(m){m.g||(m.g=new Map,m.h=0,m.i&&Tu(m.i,function(E,T){m.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=Ka.prototype,n.add=function(m,E){lr(this),this.i=null,m=Xa(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(E),this.h+=1,this};function id(m,E){lr(m),E=Xa(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Cc(m,E){return lr(m),E=Xa(m,E),m.g.has(E)}n.forEach=function(m,E){lr(this),this.g.forEach(function(T,N){T.forEach(function(Y){m.call(E,Y,N,this)},this)},this)};function bc(m,E){lr(m);let T=[];if(typeof E=="string")Cc(m,E)&&(T=T.concat(m.g.get(Xa(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)T=T.concat(m[E]);return T}n.set=function(m,E){return lr(this),this.i=null,m=Xa(this,m),Cc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=bc(this,m),m.length>0?String(m[0]):E):E};function Iu(m,E,T){id(m,E),T.length>0&&(m.i=null,m.g.set(Xa(m,E),x(T)),m.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let N=0;N<E.length;N++){var T=E[N];const Y=aa(T);T=bc(this,T);for(let tt=0;tt<T.length;tt++){let ht=Y;T[tt]!==""&&(ht+="="+aa(T[tt])),m.push(ht)}}return this.i=m.join("&")};function ad(m){const E=new Ka;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Xa(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Cu(m,E){E&&!m.j&&(lr(m),m.i=null,m.g.forEach(function(T,N){const Y=N.toLowerCase();N!=Y&&(id(this,N),Iu(this,Y,T))},m)),m.j=E}function si(m,E){const T=new ri;if(o.Image){const N=new Image;N.onload=p(Br,T,"TestLoadImage: loaded",!0,E,N),N.onerror=p(Br,T,"TestLoadImage: error",!1,E,N),N.onabort=p(Br,T,"TestLoadImage: abort",!1,E,N),N.ontimeout=p(Br,T,"TestLoadImage: timeout",!1,E,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=m}else E(!1)}function Rc(m,E){const T=new ri,N=new AbortController,Y=setTimeout(()=>{N.abort(),Br(T,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:N.signal}).then(tt=>{clearTimeout(Y),tt.ok?Br(T,"TestPingServer: ok",!0,E):Br(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Br(T,"TestPingServer: error",!1,E)})}function Br(m,E,T,N,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),N(T)}catch{}}function Wa(){this.g=new Kh}function Vi(m){this.i=m.Sb||null,this.h=m.ab||!1}g(Vi,Xh),Vi.prototype.g=function(){return new co(this.i,this.h)};function co(m,E){Ze.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(co,Ze),n=co.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,oi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||o).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bu(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function bu(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Ya(this):oi(this),this.readyState==3&&bu(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Ya(this))},n.Na=function(m){this.g&&(this.response=m,Ya(this))},n.ga=function(){this.g&&Ya(this)};function Ya(m){m.readyState=4,m.l=null,m.j=null,m.B=null,oi(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=E.next();return m.join(`\r
`)};function oi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Fr(m){let E="";return kt(m,function(T,N){E+=N,E+=":",E+=T,E+=`\r
`}),E}function fo(m,E,T){t:{for(N in T){var N=!1;break t}N=!0}N||(T=Fr(T),typeof m=="string"?T!=null&&aa(T):he(m,E,T))}function xe(m){Ze.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(xe,Ze);var Li=/^https?$/i,Dc=["POST","PUT"];n=xe.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_c.g(),this.g.onreadystatechange=v(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(tt){ho(this,tt);return}if(m=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Y in N)T.set(Y,N[Y]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const tt of N.keys())T.set(tt,N.get(tt));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(tt=>tt.toLowerCase()=="content-type"),Y=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(Dc,E,void 0)>=0)||N||Y||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,ht]of T)this.g.setRequestHeader(tt,ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(tt){ho(this,tt)}};function ho(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Oc(m),sa(m)}function Oc(m){m.A||(m.A=!0,hn(m,"complete"),hn(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,hn(this,"complete"),hn(this,"abort"),sa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sa(this,!0)),xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?po(this):this.Xa())},n.Xa=function(){po(this)};function po(m){if(m.h&&typeof a<"u"){if(m.v&&ui(m)==4)setTimeout(m.Ca.bind(m),0);else if(hn(m,"readystatechange"),ui(m)==4){m.h=!1;try{const tt=m.ca();t:switch(tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break t;default:E=!1}var T;if(!(T=E)){var N;if(N=tt===0){let ht=String(m.D).match(ed)[1]||null;!ht&&o.self&&o.self.location&&(ht=o.self.location.protocol.slice(0,-1)),N=!Li.test(ht?ht.toLowerCase():"")}T=N}if(T)hn(m,"complete"),hn(m,"success");else{m.o=6;try{var Y=ui(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",Oc(m)}}finally{sa(m)}}}}function sa(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,E||hn(m,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Pp(E)}};function Pn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(m){const E={};m=(m.g&&ui(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<m.length;N++){if(F(m[N]))continue;var T=Zh(m[N]);const Y=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const tt=E[Y]||[];E[Y]=tt,tt.push(T)}Kt(E,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(m,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||E}function $a(m){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,m),this.Za=ki("retryDelaySeedMs",1e4,m),this.Ta=ki("forwardChannelMaxRetries",2,m),this.va=ki("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new xc(m&&m.concurrentRequestLimit),this.Ba=new Wa,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$a.prototype,n.ka=8,n.I=1,n.connect=function(m,E,T,N){Je(0),this.W=m,this.H=E||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.J=hd(this,null,this.W),Bi(this)};function Nc(m){if(Ru(m),m.I==3){var E=m.V++,T=nn(m.J);if(he(T,"SID",m.M),he(T,"RID",E),he(T,"TYPE","terminate"),go(m,T),E=new ii(m,m.j,E),E.M=2,E.A=uo(nn(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(E.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=E.A,T=!0),T||(E.g=dd(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ri(E)}fd(m)}function Qa(m){m.g&&(Mc(m),m.g.cancel(),m.g=null)}function Ru(m){Qa(m),m.v&&(o.clearTimeout(m.v),m.v=null),Ou(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function Bi(m){if(!Ec(m.h)&&!m.m){m.m=!0;var E=m.Ea;j||I(),K||(j(),K=!0),R.add(E,m),m.D=0}}function Du(m,E){return Ni(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ii(h(m.Ea,m,E),cd(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new ii(this,this.j,m);let tt=this.o;if(this.U&&(tt?(tt=q(tt),mt(tt,this.U)):tt=this.U),this.u!==null||this.R||(Y.J=tt,tt=null),this.S)t:{for(var E=0,T=0;T<this.i.length;T++){e:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break e}N=void 0}if(N===void 0)break;if(E+=N,E>4096){E=T;break t}if(E===4096||T===this.i.length-1){E=T+1;break t}}E=1e3}else E=1e3;E=sd(this,Y,E),T=nn(this.J),he(T,"RID",m),he(T,"CVER",22),this.G&&he(T,"X-HTTP-Session-Id",this.G),go(this,T),tt&&(this.R?E="headers="+aa(Fr(tt))+"&"+E:this.u&&fo(T,this.u,tt)),Ac(this.h,Y),this.Ra&&he(T,"TYPE","init"),this.S?(he(T,"$req",E),he(T,"SID","null"),Y.U=!0,bi(Y,T,null)):bi(Y,T,E),this.I=2}}else this.I==3&&(m?Pc(this,m):this.i.length==0||Ec(this.h)||Pc(this))};function Pc(m,E){var T;E?T=E.l:T=m.V++;const N=nn(m.J);he(N,"SID",m.M),he(N,"RID",T),he(N,"AID",m.K),go(m,N),m.u&&m.o&&fo(N,m.u,m.o),T=new ii(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),E&&(m.i=E.G.concat(m.i)),E=sd(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ac(m.h,T),bi(T,N,E)}function go(m,E){m.H&&kt(m.H,function(T,N){he(E,N,T)}),m.l&&kt({},function(T,N){he(E,N,T)})}function sd(m,E,T){T=Math.min(m.i.length,T);const N=m.l?h(m.l.Ka,m.l,m):null;t:{var Y=m.i;let Vt=-1;for(;;){const Ke=["count="+T];Vt==-1?T>0?(Vt=Y[0].g,Ke.push("ofs="+Vt)):Vt=0:Ke.push("ofs="+Vt);let se=!0;for(let Ve=0;Ve<T;Ve++){var tt=Y[Ve].g;const Ur=Y[Ve].map;if(tt-=Vt,tt<0)Vt=Math.max(0,Y[Ve].g-100),se=!1;else try{tt="req"+tt+"_"||"";try{var ht=Ur instanceof Map?Ur:Object.entries(Ur);for(const[Ui,li]of ht){let ci=li;l(li)&&(ci=Ha(li)),Ke.push(tt+Ui+"="+encodeURIComponent(ci))}}catch(Ui){throw Ke.push(tt+"type="+encodeURIComponent("_badmap")),Ui}}catch{N&&N(Ur)}}if(se){ht=Ke.join("&");break t}}ht=void 0}return m=m.i.splice(0,T),E.G=m,ht}function od(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;j||I(),K||(j(),K=!0),R.add(E,m),m.A=0}}function mo(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ii(h(m.Da,m),cd(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,ud(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ii(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Je(10),Qa(this),ud(this))};function Mc(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function ud(m){m.g=new ii(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=nn(m.na);he(E,"RID","rpc"),he(E,"SID",m.M),he(E,"AID",m.K),he(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&he(E,"TO",m.ia),he(E,"TYPE","xmlhttp"),go(m,E),m.u&&m.o&&fo(E,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=uo(nn(E)),T.u=null,T.R=!0,Au(T,m)}n.Va=function(){this.C!=null&&(this.C=null,Qa(this),mo(this),Je(19))};function Ou(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function ld(m,E){var T=null;if(m.g==E){Ou(m),Mc(m),m.g=null;var N=2}else if(Pi(m.h,E))T=E.G,wc(m.h,E),N=1;else return;if(m.I!=0){if(E.o)if(N==1){T=E.u?E.u.length:0,E=Date.now()-E.F;var Y=m.D;N=Eu(),hn(N,new Si(N,T)),Bi(m)}else od(m);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(N==1&&Du(m,E)||N==2&&mo(m)))switch(T&&T.length>0&&(E=m.h,E.i=E.i.concat(T)),Y){case 1:Fi(m,5);break;case 4:Fi(m,10);break;case 3:Fi(m,6);break;default:Fi(m,2)}}}function cd(m,E){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*E}function Fi(m,E){if(m.j.info("Error code "+E),E==2){var T=h(m.bb,m),N=m.Ua;const Y=!N;N=new wr(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Tn(N,"https"),uo(N),Y?si(N.toString(),T):Rc(N.toString(),T)}else Je(2);m.I=0,m.l&&m.l.pa(E),fd(m),Ru(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function fd(m){if(m.I=0,m.ja=[],m.l){const E=Tc(m.h);(E.length!=0||m.i.length!=0)&&(A(m.ja,E),A(m.ja,m.i),m.h.i.length=0,x(m.i),m.i.length=0),m.l.oa()}}function hd(m,E,T){var N=T instanceof wr?nn(T):new wr(T);if(N.g!="")E&&(N.g=E+"."+N.g),Ga(N,N.u);else{var Y=o.location;N=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const tt=new wr(null);N&&Tn(tt,N),E&&(tt.g=E),Y&&Ga(tt,Y),T&&(tt.h=T),N=tt}return T=m.G,E=m.wa,T&&E&&he(N,T,E),he(N,"VER",m.ka),go(m,N),N}function dd(m,E,T){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new xe(new Vi({ab:T})):new xe(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pd(){}n=pd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Za(){}Za.prototype.g=function(m,E){return new er(m,E)};function er(m,E){Ze.call(this),this.g=new $a(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!F(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!F(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new ua(this)}g(er,Ze),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Nc(this.g)},er.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=Ha(m),m=T);E.i.push(new en(E.Ya++,m)),E.I==3&&Bi(E)},er.prototype.N=function(){this.g.l=null,delete this.j,Nc(this.g),delete this.g,er.Z.N.call(this)};function gd(m){Nn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){t:{for(const T in E){m=T;break t}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}g(gd,Nn);function md(){Lr.call(this),this.status=1}g(md,Lr);function ua(m){this.g=m}g(ua,pd),ua.prototype.ra=function(){hn(this.g,"a")},ua.prototype.qa=function(m){hn(this.g,new gd(m))},ua.prototype.pa=function(m){hn(this.g,new md)},ua.prototype.oa=function(){hn(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,XC=function(){return new Za},KC=function(){return Eu()},qC=qe,by={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},so.NO_ERROR=0,so.TIMEOUT=8,so.HTTP_ERROR=6,B0=so,vc.COMPLETE="complete",GC=vc,Wh.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Of=Wh,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,HC=xe}).apply(typeof x0<"u"?x0:typeof self<"u"?self:typeof window<"u"?window:{});const Mw="@firebase/firestore",Vw="4.9.3";class Kn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");let nc="12.7.0";const ou=new qv("@firebase/firestore");function gl(){return ou.logLevel}function ct(n,...t){if(ou.logLevel<=Yt.DEBUG){const e=t.map(Wv);ou.debug(`Firestore (${nc}): ${n}`,...e)}}function Ye(n,...t){if(ou.logLevel<=Yt.ERROR){const e=t.map(Wv);ou.error(`Firestore (${nc}): ${n}`,...e)}}function ih(n,...t){if(ou.logLevel<=Yt.WARN){const e=t.map(Wv);ou.warn(`Firestore (${nc}): ${n}`,...e)}}function Wv(n){if(typeof n=="string")return n;try{return(function(e){return JSON.stringify(e)})(n)}catch{return n}}function _t(n,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,WC(n,r,e)}function WC(n,t,e){let r=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Ye(r),new Error(r)}function Tt(n,t,e,r){let i="Unexpected state";typeof e=="string"?i=e:r=e,n||WC(t,i,r)}function At(n,t){return n}const at={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends La{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class iN{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class aN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Kn.UNAUTHENTICATED)))}shutdown(){}}class sN{constructor(t){this.t=t,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Tt(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,e(c)):Promise.resolve();let a=new Fs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Fs,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const c=a;t.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fs)}}),0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt(typeof r.accessToken=="string",31837,{l:r}),new iN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Tt(t===null||typeof t=="string",2055,{h:t}),new Kn(t)}}class oN{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uN{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new oN(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(Kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Lw{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lN{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nr(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){Tt(this.o===void 0,3512);const r=a=>{a.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,ct("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable((()=>r(a)))};const i=a=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Lw(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Tt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new Lw(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cN(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}class Yv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=cN(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<e&&(r+=t.charAt(i[a]%62))}return r}}function Pt(n,t){return n<t?-1:n>t?1:0}function Ry(n,t){const e=Math.min(n.length,t.length);for(let r=0;r<e;r++){const i=n.charAt(r),a=t.charAt(r);if(i!==a)return zm(i)===zm(a)?Pt(i,a):zm(i)?1:-1}return Pt(n.length,t.length)}const fN=55296,hN=57343;function zm(n){const t=n.charCodeAt(0);return t>=fN&&t<=hN}function Vl(n,t,e){return n.length===t.length&&n.every(((r,i)=>e(r,t[i])))}function YC(n){return n+"\0"}const kw="__name__";class qi{constructor(t,e,r){e===void 0?e=0:e>t.length&&_t(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&_t(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return qi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qi?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const a=qi.compareSegments(t.get(i),e.get(i));if(a!==0)return a}return Pt(t.length,e.length)}static compareSegments(t,e){const r=qi.isNumericId(t),i=qi.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?qi.extractNumericId(t).compare(qi.extractNumericId(e)):Ry(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Bs.fromString(t.substring(4,t.length-2))}}class ce extends qi{construct(t,e,r){return new ce(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new pt(at.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((i=>i.length>0)))}return new ce(e)}static emptyPath(){return new ce([])}}const dN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends qi{construct(t,e,r){return new Be(t,e,r)}static isValidIdentifier(t){return dN.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kw}static keyField(){return new Be([kw])}static fromServerFormat(t){const e=[];let r="",i=0;const a=()=>{if(r.length===0)throw new pt(at.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let o=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new pt(at.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pt(at.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(a(),i++)}if(a(),o)throw new pt(at.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Be(e)}static emptyPath(){return new Be([])}}class gt{constructor(t){this.path=t}static fromPath(t){return new gt(ce.fromString(t))}static fromName(t){return new gt(ce.fromString(t).popFirst(5))}static empty(){return new gt(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ce.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new ce(t.slice()))}}function $C(n,t,e){if(!e)throw new pt(at.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function pN(n,t,e,r){if(t===!0&&r===!0)throw new pt(at.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Bw(n){if(!gt.isDocumentKey(n))throw new pt(at.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fw(n){if(gt.isDocumentKey(n))throw new pt(at.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function QC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function X1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":_t(12329,{type:typeof n})}function Ca(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new pt(at.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=X1(n);throw new pt(at.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function cn(n,t){const e={typeString:n};return t&&(e.value=t),e}function Ch(n,t){if(!QC(n))throw new pt(at.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const i=t[r].typeString,a="value"in t[r]?{value:t[r].value}:void 0;if(!(r in n)){e=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){e=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){e=`Expected '${r}' field to equal '${a.value}'`;break}}if(e)throw new pt(at.INVALID_ARGUMENT,e);return!0}const Uw=-62135596800,zw=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(t){return ye.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*zw);return new ye(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new pt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new pt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<Uw)throw new pt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zw}_compareTo(t){return this.seconds===t.seconds?Pt(this.nanoseconds,t.nanoseconds):Pt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Ch(t,ye._jsonSchema))return new ye(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Uw;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:cn("string",ye._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};class It{static fromTimestamp(t){return new It(t)}static min(){return new It(new ye(0,0))}static max(){return new It(new ye(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ll=-1;class f1{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function Dy(n){return n.fields.find((t=>t.kind===2))}function Bo(n){return n.fields.filter((t=>t.kind!==2))}f1.UNKNOWN_ID=-1;class F0{constructor(t,e){this.fieldPath=t,this.kind=e}}class ah{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ah(0,Vr.min())}}function ZC(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(r===1e9?new ye(e+1,0):new ye(e,r));return new Vr(i,gt.empty(),t)}function JC(n){return new Vr(n.readTime,n.key,Ll)}class Vr{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Vr(It.min(),gt.empty(),Ll)}static max(){return new Vr(It.max(),gt.empty(),Ll)}}function $v(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=gt.comparator(n.documentKey,t.documentKey),e!==0?e:Pt(n.largestBatchId,t.largestBatchId))}const t3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function $s(n){if(n.code!==at.FAILED_PRECONDITION||n.message!==t3)throw n;ct("LocalStore","Unexpectedly lost primary lease")}class W{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new W(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(e,a).next(r,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof W?e:W.resolve(e)}catch(e){return W.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):W.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):W.reject(e)}static resolve(t){return new W(((e,r)=>{e(t)}))}static reject(t){return new W(((e,r)=>{r(t)}))}static waitFor(t){return new W(((e,r)=>{let i=0,a=0,o=!1;t.forEach((l=>{++i,l.next((()=>{++a,o&&a===i&&e()}),(c=>r(c)))})),o=!0,a===i&&e()}))}static or(t){let e=W.resolve(!1);for(const r of t)e=e.next((i=>i?W.resolve(i):r()));return e}static forEach(t,e){const r=[];return t.forEach(((i,a)=>{r.push(e.call(this,i,a))})),this.waitFor(r)}static mapArray(t,e){return new W(((r,i)=>{const a=t.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const h=c;e(t[h]).next((p=>{o[h]=p,++l,l===a&&r(o)}),(p=>i(p)))}}))}static doWhile(t,e){return new W(((r,i)=>{const a=()=>{t()===!0?e().next((()=>{a()}),i):r()};a()}))}}const Or="SimpleDb";class W1{static open(t,e,r,i){try{return new W1(e,t.transaction(i,r))}catch(a){throw new jf(e,a)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new Fs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new jf(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Qv(r.target.error);this.S.reject(new jf(t,i))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(ct(Or,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new mN(e)}}class Us{static delete(t){return ct(Or,"Removing database:",t),jo(RC().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!LC())return!1;if(Us.F())return!0;const t=En(),e=Us.M(t),r=0<e&&e<10,i=n3(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,Us.M(En())===12.2&&Ye("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(ct(Or,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const o=a.target.result;e(o)},i.onblocked=()=>{r(new jf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const o=a.target.error;o.name==="VersionError"?r(new pt(at.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new pt(at.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new jf(t,o))},i.onupgradeneeded=a=>{ct(Or,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const o=a.target.result;this.N.k(o,i.transaction,a.oldVersion,this.version).next((()=>{ct(Or,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,i){const a=e==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(t);const l=W1.open(this.db,t,a?"readonly":"readwrite",r),c=i(l).next((h=>(l.C(),h))).catch((h=>(l.abort(h),W.reject(h)))).toPromise();return c.catch((()=>{})),await l.D,c}catch(l){const c=l,h=c.name!=="FirebaseError"&&o<3;if(ct(Or,"Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function n3(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class gN{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return jo(this.U.delete())}}class jf extends pt{constructor(t,e){super(at.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Qs(n){return n.name==="IndexedDbTransactionError"}class mN{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(ct(Or,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(ct(Or,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),jo(r)}add(t){return ct(Or,"ADD",this.store.name,t,t),jo(this.store.add(t))}get(t){return jo(this.store.get(t)).next((e=>(e===void 0&&(e=null),ct(Or,"GET",this.store.name,t,e),e)))}delete(t){return ct(Or,"DELETE",this.store.name,t),jo(this.store.delete(t))}count(){return ct(Or,"COUNT",this.store.name),jo(this.store.count())}J(t,e){const r=this.options(t,e),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new W(((o,l)=>{a.onerror=c=>{l(c.target.error)},a.onsuccess=c=>{o(c.target.result)}}))}{const a=this.cursor(r),o=[];return this.H(a,((l,c)=>{o.push(c)})).next((()=>o))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new W(((i,a)=>{r.onerror=o=>{a(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(t,e){ct(Or,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const i=this.cursor(r);return this.H(i,((a,o,l)=>l.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.H(i,e)}te(t){const e=this.cursor({});return new W(((r,i)=>{e.onerror=a=>{const o=Qv(a.target.error);i(o)},e.onsuccess=a=>{const o=a.target.result;o?t(o.primaryKey,o.value).next((l=>{l?o.continue():r()})):r()}}))}H(t,e){const r=[];return new W(((i,a)=>{t.onerror=o=>{a(o.target.error)},t.onsuccess=o=>{const l=o.target.result;if(!l)return void i();const c=new gN(l),h=e(l.primaryKey,l.value,c);if(h instanceof W){const p=h.catch((g=>(c.done(),W.reject(g))));r.push(p)}c.isDone?i():c.G===null?l.continue():l.continue(c.G)}})).next((()=>W.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function jo(n){return new W(((t,e)=>{n.onsuccess=r=>{const i=r.target.result;t(i)},n.onerror=r=>{const i=Qv(r.target.error);e(i)}}))}let jw=!1;function Qv(n){const t=Us.M(En());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jw||(jw=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Hf="IndexBackfiller";class yN{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){ct(Hf,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();ct(Hf,`Documents written: ${e}`)}catch(e){Qs(e)?ct(Hf,"Ignoring IndexedDB error during index backfill: ",e):await $s(e)}await this.re(6e4)}))}}class vN{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let i=e,a=!0;return W.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((o=>{if(o!==null&&!r.has(o))return ct(Hf,`Processing collection: ${o}`),this.oe(t,o,i).next((l=>{i-=l,r.add(o)}));a=!1})))).next((()=>e-i))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((i=>this.localStore.localDocuments.getNextDocuments(t,e,i,r).next((a=>{const o=a.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next((()=>this._e(i,a))).next((l=>(ct(Hf,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(t,e,l)))).next((()=>o.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((i,a)=>{const o=JC(a);$v(o,r)>0&&(r=o)})),new Vr(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}class vr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vr.ce=-1;const Qo=-1;function Y1(n){return n==null}function sh(n){return n===0&&1/n==-1/0}function r3(n){return typeof n=="number"&&Number.isInteger(n)&&!sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const h1="";function Zn(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Hw(t)),t=_N(n.get(e),t);return Hw(t)}function _N(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":e+="";break;case h1:e+="";break;default:e+=a}}return e}function Hw(n){return n+h1+""}function Xi(n){const t=n.length;if(Tt(t>=2,64408,{path:n}),t===2)return Tt(n.charAt(0)===h1&&n.charAt(1)==="",56145,{path:n}),ce.emptyPath();const e=t-2,r=[];let i="";for(let a=0;a<t;){const o=n.indexOf(h1,a);switch((o<0||o>e)&&_t(50515,{path:n}),n.charAt(o+1)){case"":const l=n.substring(a,o);let c;i.length===0?c=l:(i+=l,c=i,i=""),r.push(c);break;case"":i+=n.substring(a,o),i+="\0";break;case"":i+=n.substring(a,o+1);break;default:_t(61167,{path:n})}a=o+2}return new ce(r)}const Fo="remoteDocuments",bh="owner",ul="owner",oh="mutationQueues",xN="userId",vi="mutations",Gw="batchId",Ko="userMutationsIndex",qw=["userId","batchId"];function U0(n,t){return[n,Zn(t)]}function i3(n,t,e){return[n,Zn(t),e]}const EN={},kl="documentMutations",d1="remoteDocumentsV14",AN=["prefixPath","collectionGroup","readTime","documentId"],z0="documentKeyIndex",wN=["prefixPath","collectionGroup","documentId"],a3="collectionGroupIndex",TN=["collectionGroup","readTime","prefixPath","documentId"],uh="remoteDocumentGlobal",Oy="remoteDocumentGlobalKey",Bl="targets",s3="queryTargetsIndex",SN=["canonicalId","targetId"],Fl="targetDocuments",IN=["targetId","path"],Zv="documentTargetsIndex",CN=["path","targetId"],p1="targetGlobalKey",Zo="targetGlobal",lh="collectionParents",bN=["collectionId","parent"],Ul="clientMetadata",RN="clientId",$1="bundles",DN="bundleId",Q1="namedQueries",ON="name",Jv="indexConfiguration",NN="indexId",Ny="collectionGroupIndex",PN="collectionGroup",Gf="indexState",MN=["indexId","uid"],o3="sequenceNumberIndex",VN=["uid","sequenceNumber"],qf="indexEntries",LN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],u3="documentKeyIndex",kN=["indexId","uid","orderedDocumentKey"],Z1="documentOverlays",BN=["userId","collectionPath","documentId"],Py="collectionPathOverlayIndex",FN=["userId","collectionPath","largestBatchId"],l3="collectionGroupOverlayIndex",UN=["userId","collectionGroup","largestBatchId"],t_="globals",zN="name",c3=[oh,vi,kl,Fo,Bl,bh,Zo,Fl,Ul,uh,lh,$1,Q1],jN=[...c3,Z1],f3=[oh,vi,kl,d1,Bl,bh,Zo,Fl,Ul,uh,lh,$1,Q1,Z1],h3=f3,e_=[...h3,Jv,Gf,qf],HN=e_,d3=[...e_,t_],GN=d3;class My extends e3{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function An(n,t){const e=At(n);return Us.O(e.le,t)}function Kw(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Zs(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function p3(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Ce{constructor(t,e){this.comparator=t,this.root=e||zn.EMPTY}insert(t,e){return new Ce(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(t){return new Ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,zn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new E0(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new E0(this.root,t,this.comparator,!1)}getReverseIterator(){return new E0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new E0(this.root,t,this.comparator,!0)}}class E0{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?r(t.key,e):1,e&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(a===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class zn{constructor(t,e,r,i,a){this.key=t,this.value=e,this.color=r??zn.RED,this.left=i??zn.EMPTY,this.right=a??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,a){return new zn(t??this.key,e??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,e,r),null):a===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return zn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,e,r,i,a){return this}insert(t,e,r){return new zn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _e{constructor(t){this.comparator=t,this.data=new Ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Xw(this.data.getIterator())}getIteratorFrom(t){return new Xw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof _e)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new _e(this.comparator);return e.data=t,e}}class Xw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ll(n){return n.hasNext()?n.getNext():void 0}class _r{constructor(t){this.fields=t,t.sort(Be.comparator)}static empty(){return new _r([])}unionWith(t){let e=new _e(Be.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new _r(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Vl(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}class g3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new g3("Invalid base64 string: "+a):a}})(t);return new Qe(e)}static fromUint8Array(t){const e=(function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a})(t);return new Qe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qe.EMPTY_BYTE_STRING=new Qe("");const qN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ra(n){if(Tt(!!n,39018),typeof n=="string"){let t=0;const e=qN.exec(n);if(Tt(!!e,46558,{timestamp:n}),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Da(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}const m3="server_timestamp",y3="__type__",v3="__previous_value__",_3="__local_write_time__";function n_(n){return(n?.mapValue?.fields||{})[y3]?.stringValue===m3}function J1(n){const t=n.mapValue.fields[v3];return n_(t)?J1(t):t}function ch(n){const t=Ra(n.mapValue.fields[_3].timestampValue);return new ye(t.seconds,t.nanos)}class KN{constructor(t,e,r,i,a,o,l,c,h,p){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p}}const g1="(default)";class uu{constructor(t,e){this.projectId=t,this.database=e||g1}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===g1}isEqual(t){return t instanceof uu&&t.projectId===this.projectId&&t.database===this.database}}const r_="__type__",x3="__max__",Ms={mapValue:{fields:{__type__:{stringValue:x3}}}},i_="__vector__",zl="value",j0={nullValue:"NULL_VALUE"};function Gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?n_(n)?4:E3(n)?9007199254740991:tp(n)?10:11:_t(28295,{value:n})}function ra(n,t){if(n===t)return!0;const e=Gs(n);if(e!==Gs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ch(n).isEqual(ch(t));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Ra(i.timestampValue),l=Ra(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(i,a){return Da(i.bytesValue).isEqual(Da(a.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(i,a){return ke(i.geoPointValue.latitude)===ke(a.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(a.geoPointValue.longitude)})(n,t);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return ke(i.integerValue)===ke(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=ke(i.doubleValue),l=ke(a.doubleValue);return o===l?sh(o)===sh(l):isNaN(o)&&isNaN(l)}return!1})(n,t);case 9:return Vl(n.arrayValue.values||[],t.arrayValue.values||[],ra);case 10:case 11:return(function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Kw(o)!==Kw(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ra(o[c],l[c])))return!1;return!0})(n,t);default:return _t(52216,{left:n})}}function fh(n,t){return(n.values||[]).find((e=>ra(e,t)))!==void 0}function qs(n,t){if(n===t)return 0;const e=Gs(n),r=Gs(t);if(e!==r)return Pt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,t.booleanValue);case 2:return(function(a,o){const l=ke(a.integerValue||a.doubleValue),c=ke(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(n,t);case 3:return Ww(n.timestampValue,t.timestampValue);case 4:return Ww(ch(n),ch(t));case 5:return Ry(n.stringValue,t.stringValue);case 6:return(function(a,o){const l=Da(a),c=Da(o);return l.compareTo(c)})(n.bytesValue,t.bytesValue);case 7:return(function(a,o){const l=a.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Pt(l[h],c[h]);if(p!==0)return p}return Pt(l.length,c.length)})(n.referenceValue,t.referenceValue);case 8:return(function(a,o){const l=Pt(ke(a.latitude),ke(o.latitude));return l!==0?l:Pt(ke(a.longitude),ke(o.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return Yw(n.arrayValue,t.arrayValue);case 10:return(function(a,o){const l=a.fields||{},c=o.fields||{},h=l[zl]?.arrayValue,p=c[zl]?.arrayValue,g=Pt(h?.values?.length||0,p?.values?.length||0);return g!==0?g:Yw(h,p)})(n.mapValue,t.mapValue);case 11:return(function(a,o){if(a===Ms.mapValue&&o===Ms.mapValue)return 0;if(a===Ms.mapValue)return 1;if(o===Ms.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const v=Ry(c[g],p[g]);if(v!==0)return v;const x=qs(l[c[g]],h[p[g]]);if(x!==0)return x}return Pt(c.length,p.length)})(n.mapValue,t.mapValue);default:throw _t(23264,{he:e})}}function Ww(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Pt(n,t);const e=Ra(n),r=Ra(t),i=Pt(e.seconds,r.seconds);return i!==0?i:Pt(e.nanos,r.nanos)}function Yw(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const a=qs(e[i],r[i]);if(a)return a}return Pt(e.length,r.length)}function jl(n){return Vy(n)}function Vy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const r=Ra(e);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return Da(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return gt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let r="[",i=!0;for(const a of e.values||[])i?i=!1:r+=",",r+=Vy(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(e){const r=Object.keys(e.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Vy(e.fields[o])}`;return i+"}"})(n.mapValue):_t(61005,{value:n})}function H0(n){switch(Gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=J1(n);return t?16+H0(t):16;case 5:return 2*n.stringValue.length;case 6:return Da(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+H0(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Zs(r.fields,((a,o)=>{i+=a.length+H0(o)})),i})(n.mapValue);default:throw _t(13486,{value:n})}}function hh(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Ly(n){return!!n&&"integerValue"in n}function dh(n){return!!n&&"arrayValue"in n}function $w(n){return!!n&&"nullValue"in n}function Qw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function G0(n){return!!n&&"mapValue"in n}function tp(n){return(n?.mapValue?.fields||{})[r_]?.stringValue===i_}function Kf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const t={mapValue:{fields:{}}};return Zs(n.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Kf(r))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Kf(n.arrayValue.values[e]);return t}return{...n}}function E3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===x3}const A3={mapValue:{fields:{[r_]:{stringValue:i_},[zl]:{arrayValue:{}}}}};function XN(n){return"nullValue"in n?j0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hh(uu.empty(),gt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?tp(n)?A3:{mapValue:{}}:_t(35942,{value:n})}function WN(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hh(uu.empty(),gt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?A3:"mapValue"in n?tp(n)?{mapValue:{}}:Ms:_t(61959,{value:n})}function Zw(n,t){const e=qs(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function Jw(n,t){const e=qs(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Yn{constructor(t){this.value=t}static empty(){return new Yn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!G0(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Kf(e)}setAll(t){let e=Be.emptyPath(),r={},i=[];t.forEach(((o,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,r,i),r={},i=[],e=l.popLast()}o?r[l.lastSegment()]=Kf(o):i.push(l.lastSegment())}));const a=this.getFieldsMap(e);this.applyChanges(a,r,i)}delete(t){const e=this.field(t.popLast());G0(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ra(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];G0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Zs(e,((i,a)=>t[i]=a));for(const i of r)delete t[i]}clone(){return new Yn(Kf(this.value))}}function w3(n){const t=[];return Zs(n.fields,((e,r)=>{const i=new Be([e]);if(G0(r)){const a=w3(r.mapValue).fields;if(a.length===0)t.push(i);else for(const o of a)t.push(i.child(o))}else t.push(i)})),new _r(t)}class Ge{constructor(t,e,r,i,a,o,l){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Ge(t,0,It.min(),It.min(),It.min(),Yn.empty(),0)}static newFoundDocument(t,e,r,i){return new Ge(t,1,e,It.min(),r,i,0)}static newNoDocument(t,e){return new Ge(t,2,e,It.min(),It.min(),Yn.empty(),0)}static newUnknownDocument(t,e){return new Ge(t,3,e,It.min(),It.min(),Yn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(It.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ge&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hl{constructor(t,e){this.position=t,this.inclusive=e}}function tT(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const a=t[i],o=n.position[i];if(a.field.isKeyField()?r=gt.comparator(gt.fromName(o.referenceValue),e.key):r=qs(o,e.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function eT(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ra(n.position[e],t.position[e]))return!1;return!0}class m1{constructor(t,e="asc"){this.field=t,this.dir=e}}function YN(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}class T3{}class $t extends T3{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new $N(t,e,r):e==="array-contains"?new JN(t,r):e==="in"?new D3(t,r):e==="not-in"?new tP(t,r):e==="array-contains-any"?new eP(t,r):new $t(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new QN(t,r):new ZN(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(qs(e,this.value)):e!==null&&Gs(this.value)===Gs(e)&&this.matchesComparison(qs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ve extends T3{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new ve(t,e)}matches(t){return Gl(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Gl(n){return n.op==="and"}function ky(n){return n.op==="or"}function a_(n){return S3(n)&&Gl(n)}function S3(n){for(const t of n.filters)if(t instanceof ve)return!1;return!0}function By(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+jl(n.value);if(a_(n))return n.filters.map((t=>By(t))).join(",");{const t=n.filters.map((e=>By(e))).join(",");return`${n.op}(${t})`}}function I3(n,t){return n instanceof $t?(function(r,i){return i instanceof $t&&r.op===i.op&&r.field.isEqual(i.field)&&ra(r.value,i.value)})(n,t):n instanceof ve?(function(r,i){return i instanceof ve&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,o,l)=>a&&I3(o,i.filters[l])),!0):!1})(n,t):void _t(19439)}function C3(n,t){const e=n.filters.concat(t);return ve.create(e,n.op)}function b3(n){return n instanceof $t?(function(e){return`${e.field.canonicalString()} ${e.op} ${jl(e.value)}`})(n):n instanceof ve?(function(e){return e.op.toString()+" {"+e.getFilters().map(b3).join(" ,")+"}"})(n):"Filter"}class $N extends $t{constructor(t,e,r){super(t,e,r),this.key=gt.fromName(r.referenceValue)}matches(t){const e=gt.comparator(t.key,this.key);return this.matchesComparison(e)}}class QN extends $t{constructor(t,e){super(t,"in",e),this.keys=R3("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class ZN extends $t{constructor(t,e){super(t,"not-in",e),this.keys=R3("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function R3(n,t){return(t.arrayValue?.values||[]).map((e=>gt.fromName(e.referenceValue)))}class JN extends $t{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return dh(e)&&fh(e.arrayValue,this.value)}}class D3 extends $t{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&fh(this.value.arrayValue,e)}}class tP extends $t{constructor(t,e){super(t,"not-in",e)}matches(t){if(fh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!fh(this.value.arrayValue,e)}}class eP extends $t{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!dh(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>fh(this.value.arrayValue,r)))}}class nP{constructor(t,e=null,r=[],i=[],a=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function Fy(n,t=null,e=[],r=[],i=null,a=null,o=null){return new nP(n,t,e,r,i,a,o)}function lu(n){const t=At(n);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>By(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Y1(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>jl(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>jl(r))).join(",")),t.Te=e}return t.Te}function Rh(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!YN(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!I3(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!eT(n.startAt,t.startAt)&&eT(n.endAt,t.endAt)}function y1(n){return gt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function v1(n,t){return n.filters.filter((e=>e instanceof $t&&e.field.isEqual(t)))}function nT(n,t,e){let r=j0,i=!0;for(const a of v1(n,t)){let o=j0,l=!0;switch(a.op){case"<":case"<=":o=XN(a.value);break;case"==":case"in":case">=":o=a.value;break;case">":o=a.value,l=!1;break;case"!=":case"not-in":o=j0}Zw({value:r,inclusive:i},{value:o,inclusive:l})<0&&(r=o,i=l)}if(e!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const o=e.position[a];Zw({value:r,inclusive:i},{value:o,inclusive:e.inclusive})<0&&(r=o,i=e.inclusive);break}}return{value:r,inclusive:i}}function rT(n,t,e){let r=Ms,i=!0;for(const a of v1(n,t)){let o=Ms,l=!0;switch(a.op){case">=":case">":o=WN(a.value),l=!1;break;case"==":case"in":case"<=":o=a.value;break;case"<":o=a.value,l=!1;break;case"!=":case"not-in":o=Ms}Jw({value:r,inclusive:i},{value:o,inclusive:l})>0&&(r=o,i=l)}if(e!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const o=e.position[a];Jw({value:r,inclusive:i},{value:o,inclusive:e.inclusive})>0&&(r=o,i=e.inclusive);break}}return{value:r,inclusive:i}}class Dh{constructor(t,e=null,r=[],i=[],a=null,o="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O3(n,t,e,r,i,a,o,l){return new Dh(n,t,e,r,i,a,o,l)}function ep(n){return new Dh(n)}function iT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function N3(n){return n.collectionGroup!==null}function Xf(n){const t=At(n);if(t.Ie===null){t.Ie=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),e.add(a.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new _e(Be.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(t).forEach((a=>{e.has(a.canonicalString())||a.isKeyField()||t.Ie.push(new m1(a,r))})),e.has(Be.keyField().canonicalString())||t.Ie.push(new m1(Be.keyField(),r))}return t.Ie}function Mr(n){const t=At(n);return t.Ee||(t.Ee=rP(t,Xf(n))),t.Ee}function rP(n,t){if(n.limitType==="F")return Fy(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new m1(i.field,a)}));const e=n.endAt?new Hl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Hl(n.startAt.position,n.startAt.inclusive):null;return Fy(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Uy(n,t){const e=n.filters.concat([t]);return new Dh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function zy(n,t,e){return new Dh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function np(n,t){return Rh(Mr(n),Mr(t))&&n.limitType===t.limitType}function P3(n){return`${lu(Mr(n))}|lt:${n.limitType}`}function ml(n){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((i=>b3(i))).join(", ")}]`),Y1(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((i=>jl(i))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((i=>jl(i))).join(",")),`Target(${r})`})(Mr(n))}; limitType=${n.limitType})`}function Oh(n,t){return t.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):gt.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,t)&&(function(r,i){for(const a of Xf(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,t)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,t)&&(function(r,i){return!(r.startAt&&!(function(o,l,c){const h=tT(o,l,c);return o.inclusive?h<=0:h<0})(r.startAt,Xf(r),i)||r.endAt&&!(function(o,l,c){const h=tT(o,l,c);return o.inclusive?h>=0:h>0})(r.endAt,Xf(r),i))})(n,t)}function M3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V3(n){return(t,e)=>{let r=!1;for(const i of Xf(n)){const a=iP(i,t,e);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function iP(n,t,e){const r=n.field.isKeyField()?gt.comparator(t.key,e.key):(function(a,o,l){const c=o.data.field(a),h=l.data.field(a);return c!==null&&h!==null?qs(c,h):_t(42886)})(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t(19790,{direction:n.dir})}}class ka{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,t))return a}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zs(this.inner,((e,r)=>{for(const[i,a]of r)t(i,a)}))}isEmpty(){return p3(this.inner)}size(){return this.innerSize}}const aP=new Ce(gt.comparator);function Pr(){return aP}const L3=new Ce(gt.comparator);function Nf(...n){let t=L3;for(const e of n)t=t.insert(e.key,e);return t}function k3(n){let t=L3;return n.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Wi(){return Wf()}function B3(){return Wf()}function Wf(){return new ka((n=>n.toString()),((n,t)=>n.isEqual(t)))}const sP=new Ce(gt.comparator),oP=new _e(gt.comparator);function jt(...n){let t=oP;for(const e of n)t=t.add(e);return t}const uP=new _e(Pt);function s_(){return uP}function o_(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sh(t)?"-0":t}}function F3(n){return{integerValue:""+n}}function lP(n,t){return r3(t)?F3(t):o_(n,t)}class rp{constructor(){this._=void 0}}function cP(n,t,e){return n instanceof ph?(function(i,a){const o={fields:{[y3]:{stringValue:m3},[_3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&n_(a)&&(a=J1(a)),a&&(o.fields[v3]=a),{mapValue:o}})(e,t):n instanceof ql?z3(n,t):n instanceof Kl?j3(n,t):(function(i,a){const o=U3(i,a),l=aT(o)+aT(i.Ae);return Ly(o)&&Ly(i.Ae)?F3(l):o_(i.serializer,l)})(n,t)}function fP(n,t,e){return n instanceof ql?z3(n,t):n instanceof Kl?j3(n,t):e}function U3(n,t){return n instanceof gh?(function(r){return Ly(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(t)?t:{integerValue:0}:null}class ph extends rp{}class ql extends rp{constructor(t){super(),this.elements=t}}function z3(n,t){const e=H3(t);for(const r of n.elements)e.some((i=>ra(i,r)))||e.push(r);return{arrayValue:{values:e}}}class Kl extends rp{constructor(t){super(),this.elements=t}}function j3(n,t){let e=H3(t);for(const r of n.elements)e=e.filter((i=>!ra(i,r)));return{arrayValue:{values:e}}}class gh extends rp{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function aT(n){return ke(n.integerValue||n.doubleValue)}function H3(n){return dh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hP{constructor(t,e){this.field=t,this.transform=e}}function dP(n,t){return n.field.isEqual(t.field)&&(function(r,i){return r instanceof ql&&i instanceof ql||r instanceof Kl&&i instanceof Kl?Vl(r.elements,i.elements,ra):r instanceof gh&&i instanceof gh?ra(r.Ae,i.Ae):r instanceof ph&&i instanceof ph})(n.transform,t.transform)}class pP{constructor(t,e){this.version=t,this.transformResults=e}}class $n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new $n}static exists(t){return new $n(void 0,t)}static updateTime(t){return new $n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function q0(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ip{}function G3(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new ap(n.key,$n.none()):new rc(n.key,n.data,$n.none());{const e=n.data,r=Yn.empty();let i=new _e(Be.comparator);for(let a of t.fields)if(!i.has(a)){let o=e.field(a);o===null&&a.length>1&&(a=a.popLast(),o=e.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Ba(n.key,r,new _r(i.toArray()),$n.none())}}function gP(n,t,e){n instanceof rc?(function(i,a,o){const l=i.value.clone(),c=oT(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,t,e):n instanceof Ba?(function(i,a,o){if(!q0(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=oT(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(q3(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,t,e):(function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,e)}function Yf(n,t,e,r){return n instanceof rc?(function(a,o,l,c){if(!q0(a.precondition,o))return l;const h=a.value.clone(),p=uT(a.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(n,t,e,r):n instanceof Ba?(function(a,o,l,c){if(!q0(a.precondition,o))return l;const h=uT(a.fieldTransforms,c,o),p=o.data;return p.setAll(q3(a)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,t,e,r):(function(a,o,l){return q0(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(n,t,e)}function mP(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),a=U3(r.transform,i||null);a!=null&&(e===null&&(e=Yn.empty()),e.set(r.field,a))}return e||null}function sT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vl(r,i,((a,o)=>dP(a,o)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class rc extends ip{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ba extends ip{constructor(t,e,r,i,a=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function q3(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}})),t}function oT(n,t,e){const r=new Map;Tt(n.length===e.length,32656,{Re:e.length,Ve:n.length});for(let i=0;i<e.length;i++){const a=n[i],o=a.transform,l=t.data.field(a.field);r.set(a.field,fP(o,l,e[i]))}return r}function uT(n,t,e){const r=new Map;for(const i of n){const a=i.transform,o=e.data.field(i.field);r.set(i.field,cP(a,o,t))}return r}class ap extends ip{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K3 extends ip{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class u_{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&gP(a,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=Yf(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=Yf(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=B3();return this.mutations.forEach((i=>{const a=t.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=e.has(i.key)?null:l;const c=G3(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(It.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),jt())}isEqual(t){return this.batchId===t.batchId&&Vl(this.mutations,t.mutations,((e,r)=>sT(e,r)))&&Vl(this.baseMutations,t.baseMutations,((e,r)=>sT(e,r)))}}class l_{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Tt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=(function(){return sP})();const a=t.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new l_(t,e,r,i)}}class c_{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yP{constructor(t,e){this.count=t,this.unchangedNames=e}}var un,Jt;function vP(n){switch(n){case at.OK:return _t(64938);case at.CANCELLED:case at.UNKNOWN:case at.DEADLINE_EXCEEDED:case at.RESOURCE_EXHAUSTED:case at.INTERNAL:case at.UNAVAILABLE:case at.UNAUTHENTICATED:return!1;case at.INVALID_ARGUMENT:case at.NOT_FOUND:case at.ALREADY_EXISTS:case at.PERMISSION_DENIED:case at.FAILED_PRECONDITION:case at.ABORTED:case at.OUT_OF_RANGE:case at.UNIMPLEMENTED:case at.DATA_LOSS:return!0;default:return _t(15467,{code:n})}}function X3(n){if(n===void 0)return Ye("GRPC error has no .code"),at.UNKNOWN;switch(n){case un.OK:return at.OK;case un.CANCELLED:return at.CANCELLED;case un.UNKNOWN:return at.UNKNOWN;case un.DEADLINE_EXCEEDED:return at.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return at.RESOURCE_EXHAUSTED;case un.INTERNAL:return at.INTERNAL;case un.UNAVAILABLE:return at.UNAVAILABLE;case un.UNAUTHENTICATED:return at.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return at.INVALID_ARGUMENT;case un.NOT_FOUND:return at.NOT_FOUND;case un.ALREADY_EXISTS:return at.ALREADY_EXISTS;case un.PERMISSION_DENIED:return at.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return at.FAILED_PRECONDITION;case un.ABORTED:return at.ABORTED;case un.OUT_OF_RANGE:return at.OUT_OF_RANGE;case un.UNIMPLEMENTED:return at.UNIMPLEMENTED;case un.DATA_LOSS:return at.DATA_LOSS;default:return _t(39323,{code:n})}}(Jt=un||(un={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function _P(){return new TextEncoder}const xP=new Bs([4294967295,4294967295],0);function lT(n){const t=_P().encode(n),e=new jC;return e.update(t),new Uint8Array(e.digest())}function cT(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Bs([e,r],0),new Bs([i,a],0)]}class f_{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new Pf(`Invalid padding: ${e}`);if(r<0)throw new Pf(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Pf(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new Pf(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=Bs.fromNumber(this.ge)}ye(t,e,r){let i=t.add(e.multiply(Bs.fromNumber(r)));return i.compare(xP)===1&&(i=new Bs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=lT(t),[r,i]=cT(e);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new f_(a,i,e);return r.forEach((l=>o.insert(l))),o}insert(t){if(this.ge===0)return;const e=lT(t),[r,i]=cT(e);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class Pf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Nh{constructor(t,e,r,i,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,Ph.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Nh(It.min(),i,new Ce(Pt),Pr(),jt())}}class Ph{constructor(t,e,r,i,a){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Ph(r,e,jt(),jt(),jt())}}class K0{constructor(t,e,r,i){this.be=t,this.removedTargetIds=e,this.key=r,this.De=i}}class W3{constructor(t,e){this.targetId=t,this.Ce=e}}class Y3{constructor(t,e,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class fT{constructor(){this.ve=0,this.Fe=hT(),this.Me=Qe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=jt(),e=jt(),r=jt();return this.Fe.forEach(((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:_t(38017,{changeType:a})}})),new Ph(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=hT()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EP{constructor(t){this.Ge=t,this.ze=new Map,this.je=Pr(),this.Je=A0(),this.He=A0(),this.Ye=new Ce(Pt)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,i)=>{this.rt(i)&&e(i)}))}st(t){const e=t.targetId,r=t.Ce.count,i=this.ot(e);if(i){const a=i.target;if(y1(a))if(r===0){const o=new gt(a.path);this.et(e,o,Ge.newNoDocument(o,It.min()))}else Tt(r===1,20013,{expectedCount:r});else{const o=this._t(e);if(o!==r){const l=this.ut(t),c=l?this.ct(l,t,o):1;if(c!==0){this.it(e);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,h)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=e;let o,l;try{o=Da(r).toUint8Array()}catch(c){if(c instanceof g3)return ih("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new f_(o,i,a)}catch(c){return ih(c instanceof Pf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let i=0;return r.forEach((a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;t.mightContain(l)||(this.et(e,a,null),i++)})),i}Tt(t){const e=new Map;this.ze.forEach(((a,o)=>{const l=this.ot(o);if(l){if(a.current&&y1(l.target)){const c=new gt(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ge.newNoDocument(c,t))}a.Be&&(e.set(o,a.ke()),a.qe())}}));let r=jt();this.He.forEach(((a,o)=>{let l=!0;o.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(a))})),this.je.forEach(((a,o)=>o.setReadTime(t)));const i=new Nh(t,e,this.Ye,this.je,r);return this.je=Pr(),this.Je=A0(),this.He=A0(),this.Ye=new Ce(Pt),i}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const i=this.nt(t);this.Et(t,e)?i.Qe(e,1):i.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new fT,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new _e(Pt),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new _e(Pt),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||ct("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new fT),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function A0(){return new Ce(gt.comparator)}function hT(){return new Ce(gt.comparator)}const AP={asc:"ASCENDING",desc:"DESCENDING"},wP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TP={and:"AND",or:"OR"};class SP{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function jy(n,t){return n.useProto3Json||Y1(t)?t:{value:t}}function Xl(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $3(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function IP(n,t){return Xl(n,t.toTimestamp())}function or(n){return Tt(!!n,49232),It.fromTimestamp((function(e){const r=Ra(e);return new ye(r.seconds,r.nanos)})(n))}function h_(n,t){return Hy(n,t).canonicalString()}function Hy(n,t){const e=(function(i){return new ce(["projects",i.projectId,"databases",i.database])})(n).child("documents");return t===void 0?e:e.child(t)}function Q3(n){const t=ce.fromString(n);return Tt(sb(t),10190,{key:t.toString()}),t}function _1(n,t){return h_(n.databaseId,t.path)}function Jo(n,t){const e=Q3(t);if(e.get(1)!==n.databaseId.projectId)throw new pt(at.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new pt(at.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new gt(tb(e))}function Z3(n,t){return h_(n.databaseId,t)}function J3(n){const t=Q3(n);return t.length===4?ce.emptyPath():tb(t)}function Gy(n){return new ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tb(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dT(n,t,e){return{name:_1(n,t),fields:e.value.mapValue.fields}}function CP(n,t,e){const r=Jo(n,t.name),i=or(t.updateTime),a=t.createTime?or(t.createTime):It.min(),o=new Yn({mapValue:{fields:t.fields}}),l=Ge.newFoundDocument(r,i,a,o);return e&&l.setHasCommittedMutations(),e?l.setHasCommittedMutations():l}function bP(n,t){let e;if("targetChange"in t){t.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_t(39313,{state:h})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Tt(p===void 0||typeof p=="string",58123),Qe.fromBase64String(p||"")):(Tt(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Qe.fromUint8Array(p||new Uint8Array))})(n,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&(function(h){const p=h.code===void 0?at.UNKNOWN:X3(h.code);return new pt(p,h.message||"")})(o);e=new Y3(r,i,a,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Jo(n,r.document.name),a=or(r.document.updateTime),o=r.document.createTime?or(r.document.createTime):It.min(),l=new Yn({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(i,a,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];e=new K0(h,p,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Jo(n,r.document),a=r.readTime?or(r.readTime):It.min(),o=Ge.newNoDocument(i,a),l=r.removedTargetIds||[];e=new K0([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Jo(n,r.document),a=r.removedTargetIds||[];e=new K0([],a,i,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new yP(i,a),l=r.targetId;e=new W3(l,o)}}return e}function x1(n,t){let e;if(t instanceof rc)e={update:dT(n,t.key,t.value)};else if(t instanceof ap)e={delete:_1(n,t.key)};else if(t instanceof Ba)e={update:dT(n,t.key,t.data),updateMask:MP(t.fieldMask)};else{if(!(t instanceof K3))return _t(16599,{Vt:t.type});e={verify:_1(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(a,o){const l=o.transform;if(l instanceof ph)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ql)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Kl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw _t(20930,{transform:o.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:IP(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_t(27497)})(n,t.precondition)),e}function qy(n,t){const e=t.currentDocument?(function(a){return a.updateTime!==void 0?$n.updateTime(or(a.updateTime)):a.exists!==void 0?$n.exists(a.exists):$n.none()})(t.currentDocument):$n.none(),r=t.updateTransforms?t.updateTransforms.map((i=>(function(o,l){let c=null;if("setToServerValue"in l)Tt(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new ph;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];c=new ql(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];c=new Kl(p)}else"increment"in l?c=new gh(o,l.increment):_t(16584,{proto:l});const h=Be.fromServerFormat(l.fieldPath);return new hP(h,c)})(n,i))):[];if(t.update){t.update.name;const i=Jo(n,t.update.name),a=new Yn({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=(function(c){const h=c.fieldPaths||[];return new _r(h.map((p=>Be.fromServerFormat(p))))})(t.updateMask);return new Ba(i,a,o,e,r)}return new rc(i,a,e,r)}if(t.delete){const i=Jo(n,t.delete);return new ap(i,e)}if(t.verify){const i=Jo(n,t.verify);return new K3(i,e)}return _t(1463,{proto:t})}function RP(n,t){return n&&n.length>0?(Tt(t!==void 0,14353),n.map((e=>(function(i,a){let o=i.updateTime?or(i.updateTime):or(a);return o.isEqual(It.min())&&(o=or(a)),new pP(o,i.transformResults||[])})(e,t)))):[]}function eb(n,t){return{documents:[Z3(n,t.path)]}}function nb(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=Z3(n,i);const a=(function(h){if(h.length!==0)return ab(ve.create(h,"and"))})(t.filters);a&&(e.structuredQuery.where=a);const o=(function(h){if(h.length!==0)return h.map((p=>(function(v){return{field:yl(v.field),direction:OP(v.dir)}})(p)))})(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=jy(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(t.endAt)),{ft:e,parent:i}}function rb(n){let t=J3(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Tt(r===1,65062);const p=e.from[0];p.allDescendants?i=p.collectionId:t=t.child(p.collectionId)}let a=[];e.where&&(a=(function(g){const v=ib(g);return v instanceof ve&&a_(v)?v.getFilters():[v]})(e.where));let o=[];e.orderBy&&(o=(function(g){return g.map((v=>(function(A){return new m1(vl(A.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(v)))})(e.orderBy));let l=null;e.limit&&(l=(function(g){let v;return v=typeof g=="object"?g.value:g,Y1(v)?null:v})(e.limit));let c=null;e.startAt&&(c=(function(g){const v=!!g.before,x=g.values||[];return new Hl(x,v)})(e.startAt));let h=null;return e.endAt&&(h=(function(g){const v=!g.before,x=g.values||[];return new Hl(x,v)})(e.endAt)),O3(t,i,o,a,l,"F",c,h)}function DP(n,t){const e=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:i})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function ib(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=vl(e.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vl(e.unaryFilter.field);return $t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=vl(e.unaryFilter.field);return $t.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vl(e.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}})(n):n.fieldFilter!==void 0?(function(e){return $t.create(vl(e.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return ve.create(e.compositeFilter.filters.map((r=>ib(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _t(1026)}})(e.compositeFilter.op))})(n):_t(30097,{filter:n})}function OP(n){return AP[n]}function NP(n){return wP[n]}function PP(n){return TP[n]}function yl(n){return{fieldPath:n.canonicalString()}}function vl(n){return Be.fromServerFormat(n.fieldPath)}function ab(n){return n instanceof $t?(function(e){if(e.op==="=="){if(Qw(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NAN"}};if($w(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Qw(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NOT_NAN"}};if($w(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(e.field),op:NP(e.op),value:e.value}}})(n):n instanceof ve?(function(e){const r=e.getFilters().map((i=>ab(i)));return r.length===1?r[0]:{compositeFilter:{op:PP(e.op),filters:r}}})(n):_t(54877,{filter:n})}function MP(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function sb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Ta{constructor(t,e,r,i,a=It.min(),o=It.min(),l=Qe.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Ta(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class ob{constructor(t){this.yt=t}}function VP(n,t){let e;if(t.document)e=CP(n.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=gt.fromSegments(t.noDocument.path),i=fu(t.noDocument.readTime);e=Ge.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return _t(56709);{const r=gt.fromSegments(t.unknownDocument.path),i=fu(t.unknownDocument.version);e=Ge.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime((function(i){const a=new ye(i[0],i[1]);return It.fromTimestamp(a)})(t.readTime)),e}function pT(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:E1(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(a,o){return{name:_1(a,o.key),fields:o.data.value.mapValue.fields,updateTime:Xl(a,o.version.toTimestamp()),createTime:Xl(a,o.createTime.toTimestamp())}})(n.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:cu(t.version)};else{if(!t.isUnknownDocument())return _t(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:cu(t.version)}}return r}function E1(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function cu(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function fu(n){const t=new ye(n.seconds,n.nanoseconds);return It.fromTimestamp(t)}function Ho(n,t){const e=(t.baseMutations||[]).map((a=>qy(n.yt,a)));for(let a=0;a<t.mutations.length-1;++a){const o=t.mutations[a];if(a+1<t.mutations.length&&t.mutations[a+1].transform!==void 0){const l=t.mutations[a+1];o.updateTransforms=l.transform.fieldTransforms,t.mutations.splice(a+1,1),++a}}const r=t.mutations.map((a=>qy(n.yt,a))),i=ye.fromMillis(t.localWriteTimeMs);return new u_(t.batchId,i,e,r)}function Mf(n){const t=fu(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?fu(n.lastLimboFreeSnapshotVersion):It.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const o=a.documents.length;return Tt(o===1,1966,{count:o}),Mr(ep(J3(a.documents[0])))})(n.query):(function(a){return Mr(rb(a))})(n.query),new Ta(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Qe.fromBase64String(n.resumeToken))}function ub(n,t){const e=cu(t.snapshotVersion),r=cu(t.lastLimboFreeSnapshotVersion);let i;i=y1(t.target)?eb(n.yt,t.target):nb(n.yt,t.target).ft;const a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:lu(t.target),readTime:e,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lb(n){const t=rb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zy(t,t.limit,"L"):t}function jm(n,t){return new c_(t.largestBatchId,qy(n.yt,t.overlayMutation))}function gT(n,t){const e=t.path.lastSegment();return[n,Zn(t.path.popLast()),e]}function mT(n,t,e,r){return{indexId:n,uid:t,sequenceNumber:e,readTime:cu(r.readTime),documentKey:Zn(r.documentKey.path),largestBatchId:r.largestBatchId}}class LP{getBundleMetadata(t,e){return yT(t).get(e).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:fu(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(t,e){return yT(t).put((function(i){return{bundleId:i.id,createTime:cu(or(i.createTime)),version:i.version}})(e))}getNamedQuery(t,e){return vT(t).get(e).next((r=>{if(r)return(function(a){return{name:a.name,query:lb(a.bundledQuery),readTime:fu(a.readTime)}})(r)}))}saveNamedQuery(t,e){return vT(t).put((function(i){return{name:i.name,readTime:cu(or(i.readTime)),bundledQuery:i.bundledQuery}})(e))}}function yT(n){return An(n,$1)}function vT(n){return An(n,Q1)}class sp{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new sp(t,r)}getOverlay(t,e){return xf(t).get(gT(this.userId,e)).next((r=>r?jm(this.serializer,r):null))}getOverlays(t,e){const r=Wi();return W.forEach(e,(i=>this.getOverlay(t,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(t,e,r){const i=[];return r.forEach(((a,o)=>{const l=new c_(e,o);i.push(this.St(t,l))})),W.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach((o=>i.add(Zn(o.getCollectionPath()))));const a=[];return i.forEach((o=>{const l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);a.push(xf(t).Z(Py,l))})),W.waitFor(a)}getOverlaysForCollection(t,e,r){const i=Wi(),a=Zn(e),o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xf(t).J(Py,o).next((l=>{for(const c of l){const h=jm(this.serializer,c);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(t,e,r,i){const a=Wi();let o;const l=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return xf(t).ee({index:l3,range:l},((c,h,p)=>{const g=jm(this.serializer,h);a.size()<i||g.largestBatchId===o?(a.set(g.getKey(),g),o=g.largestBatchId):p.done()})).next((()=>a))}St(t,e){return xf(t).put((function(i,a,o){const[l,c,h]=gT(a,o.mutation.key);return{userId:a,collectionPath:c,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:x1(i.yt,o.mutation)}})(this.serializer,this.userId,e))}}function xf(n){return An(n,Z1)}class kP{bt(t){return An(t,t_)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}class Go{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(ke(t.integerValue));else if("doubleValue"in t){const r=ke(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),sh(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=Ra(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(Da(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?E3(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):tp(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):_t(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const i of Object.keys(r))this.Ot(i,e),this.Ct(r[i],e)}kt(t,e){const r=t.fields||{};this.Ft(e,53);const i=zl,a=r[i].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(ke(a)),this.Ot(i,e),this.Ct(r[i],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const i of r)this.Ct(i,e)}Lt(t,e){this.Ft(e,37),gt.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}Go.Kt=new Go;const cl=255;function BP(n){if(n===0)return 8;let t=0;return n>>4||(t+=4,n<<=4),n>>6||(t+=2,n<<=2),n>>7||(t+=1),t}function _T(n){const t=64-(function(r){let i=0;for(let a=0;a<8;++a){const o=BP(255&r[a]);if(i+=o,o!==8)break}return i})(n);return Math.ceil(t/8)}class FP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=e.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=e.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(t){const e=this.en(t),r=_T(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}nn(t){const e=this.en(t),r=_T(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}rn(){this.sn(cl),this.sn(255)}_n(){this.an(cl),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(a){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,a,!1),new Uint8Array(o.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===cl?(this.sn(cl),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===cl?(this.an(cl),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class UP{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class zP{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Ef{constructor(){this.cn=new FP,this.ln=new UP(this.cn),this.hn=new zP(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class qo{constructor(t,e,r,i){this.Tn=t,this.In=e,this.En=r,this.dn=i}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new qo(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:X0(this.En),directionalValue:X0(this.dn),orderedDocumentKey:X0(e),documentKey:r.path.toArray()}}Vn(t,e,r){const i=this.Rn(t,e,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Es(n,t){let e=n.Tn-t.Tn;return e!==0?e:(e=xT(n.En,t.En),e!==0?e:(e=xT(n.dn,t.dn),e!==0?e:gt.comparator(n.In,t.In)))}function xT(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(r!==0)return r}return n.length-t.length}function X0(n){return VC()?(function(e){let r="";for(let i=0;i<e.length;i++)r+=String.fromCharCode(e[i]);return r})(n):n}function ET(n){return typeof n!="string"?n:(function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r})(n)}class AT{constructor(t){this.mn=new _e(((e,r)=>Be.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(Tt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Dy(t);if(e!==void 0&&!this.wn(e))return!1;const r=Bo(t);let i=new Set,a=0,o=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const c=r[a];if(!this.Sn(l,c)||!this.bn(this.fn[o++],c))return!1}++a}for(;a<r.length;++a){const l=r[a];if(o>=this.fn.length||!this.bn(this.fn[o++],l))return!1}return!0}Dn(){if(this.pn)return null;let t=new _e(Be.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new F0(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new F0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new F0(r.field,r.dir==="asc"?0:1)));return new f1(f1.UNKNOWN_ID,this.collectionId,e,ah.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function cb(n){if(Tt(n instanceof $t||n instanceof ve,20012),n instanceof $t){if(n instanceof D3){const e=n.value.arrayValue?.values?.map((r=>$t.create(n.field,"==",r)))||[];return ve.create(e,"or")}return n}const t=n.filters.map((e=>cb(e)));return ve.create(t,n.op)}function jP(n){if(n.getFilters().length===0)return[];const t=Wy(cb(n));return Tt(fb(t),7391),Ky(t)||Xy(t)?[t]:t.getFilters()}function Ky(n){return n instanceof $t}function Xy(n){return n instanceof ve&&a_(n)}function fb(n){return Ky(n)||Xy(n)||(function(e){if(e instanceof ve&&ky(e)){for(const r of e.getFilters())if(!Ky(r)&&!Xy(r))return!1;return!0}return!1})(n)}function Wy(n){if(Tt(n instanceof $t||n instanceof ve,34018),n instanceof $t)return n;if(n.filters.length===1)return Wy(n.filters[0]);const t=n.filters.map((r=>Wy(r)));let e=ve.create(t,n.op);return e=A1(e),fb(e)?e:(Tt(e instanceof ve,64498),Tt(Gl(e),40251),Tt(e.filters.length>1,57927),e.filters.reduce(((r,i)=>d_(r,i))))}function d_(n,t){let e;return Tt(n instanceof $t||n instanceof ve,38388),Tt(t instanceof $t||t instanceof ve,25473),e=n instanceof $t?t instanceof $t?(function(i,a){return ve.create([i,a],"and")})(n,t):wT(n,t):t instanceof $t?wT(t,n):(function(i,a){if(Tt(i.filters.length>0&&a.filters.length>0,48005),Gl(i)&&Gl(a))return C3(i,a.getFilters());const o=ky(i)?i:a,l=ky(i)?a:i,c=o.filters.map((h=>d_(h,l)));return ve.create(c,"or")})(n,t),A1(e)}function wT(n,t){if(Gl(t))return C3(t,n.getFilters());{const e=t.filters.map((r=>d_(n,r)));return ve.create(e,"or")}}function A1(n){if(Tt(n instanceof $t||n instanceof ve,11850),n instanceof $t)return n;const t=n.getFilters();if(t.length===1)return A1(t[0]);if(S3(n))return n;const e=t.map((i=>A1(i))),r=[];return e.forEach((i=>{i instanceof $t?r.push(i):i instanceof ve&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:ve.create(r,n.op)}class HP{constructor(){this.Cn=new p_}addToCollectionParentIndex(t,e){return this.Cn.add(e),W.resolve()}getCollectionParents(t,e){return W.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return W.resolve()}deleteFieldIndex(t,e){return W.resolve()}deleteAllFieldIndexes(t){return W.resolve()}createTargetIndexes(t,e){return W.resolve()}getDocumentsMatchingTarget(t,e){return W.resolve(null)}getIndexType(t,e){return W.resolve(0)}getFieldIndexes(t,e){return W.resolve([])}getNextCollectionGroupToUpdate(t){return W.resolve(null)}getMinOffset(t,e){return W.resolve(Vr.min())}getMinOffsetFromCollectionGroup(t,e){return W.resolve(Vr.min())}updateCollectionGroup(t,e,r){return W.resolve()}updateIndexEntries(t,e){return W.resolve()}}class p_{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new _e(ce.comparator),a=!i.has(r);return this.index[e]=i.add(r),a}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new _e(ce.comparator)).toArray()}}const TT="IndexedDbIndexManager",w0=new Uint8Array(0);class GP{constructor(t,e){this.databaseId=e,this.vn=new p_,this.Fn=new ka((r=>lu(r)),((r,i)=>Rh(r,i))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const a={collectionId:r,parent:Zn(i)};return ST(t).put(a)}return W.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[YC(e),""],!1,!0);return ST(t).J(i).next((a=>{for(const o of a){if(o.collectionId!==e)break;r.push(Xi(o.parent))}return r}))}addFieldIndex(t,e){const r=Af(t),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(e);delete i.indexId;const a=r.add(i);if(e.indexState){const o=hl(t);return a.next((l=>{o.put(mT(l,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return a.next()}deleteFieldIndex(t,e){const r=Af(t),i=hl(t),a=fl(t);return r.delete(e.indexId).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Af(t),r=fl(t),i=hl(t);return e.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(t,e){return W.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((i=>{if(i===0||i===1){const a=new AT(r).Dn();if(a!=null)return this.addFieldIndex(t,a)}}))))}getDocumentsMatchingTarget(t,e){const r=fl(t);let i=!0;const a=new Map;return W.forEach(this.Mn(e),(o=>this.xn(t,o).next((l=>{i&&(i=!!l),a.set(o,l)})))).next((()=>{if(i){let o=jt();const l=[];return W.forEach(a,((c,h)=>{ct(TT,`Using index ${(function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map((k=>`${k.fieldPath}:${k.kind}`)).join(",")}`})(c)} to execute ${lu(e)}`);const p=(function(P,k){const j=Dy(k);if(j===void 0)return null;for(const K of v1(P,j.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null})(h,c),g=(function(P,k){const j=new Map;for(const K of Bo(k))for(const R of v1(P,K.fieldPath))switch(R.op){case"==":case"in":j.set(K.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return j.set(K.fieldPath.canonicalString(),R.value),Array.from(j.values())}return null})(h,c),v=(function(P,k){const j=[];let K=!0;for(const R of Bo(k)){const I=R.kind===0?nT(P,R.fieldPath,P.startAt):rT(P,R.fieldPath,P.startAt);j.push(I.value),K&&(K=I.inclusive)}return new Hl(j,K)})(h,c),x=(function(P,k){const j=[];let K=!0;for(const R of Bo(k)){const I=R.kind===0?rT(P,R.fieldPath,P.endAt):nT(P,R.fieldPath,P.endAt);j.push(I.value),K&&(K=I.inclusive)}return new Hl(j,K)})(h,c),A=this.On(c,h,v),S=this.On(c,h,x),C=this.Nn(c,h,g),O=this.Bn(c.indexId,p,A,v.inclusive,S,x.inclusive,C);return W.forEach(O,(D=>r.Y(D,e.limit).next((P=>{P.forEach((k=>{const j=gt.fromSegments(k.documentKey);o.has(j)||(o=o.add(j),l.push(j))}))}))))})).next((()=>l))}return W.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=jP(ve.create(t.filters,"and")).map((r=>Fy(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,i,a,o,l){const c=(e!=null?e.length:1)*Math.max(r.length,a.length),h=c/(e!=null?e.length:1),p=[];for(let g=0;g<c;++g){const v=e?this.Ln(e[g/h]):w0,x=this.kn(t,v,r[g%h],i),A=this.qn(t,v,a[g%h],o),S=l.map((C=>this.kn(t,v,C,!0)));p.push(...this.createRange(x,A,S))}return p}kn(t,e,r,i){const a=new qo(t,gt.empty(),e,r);return i?a:a.An()}qn(t,e,r,i){const a=new qo(t,gt.empty(),e,r);return i?a.An():a}xn(t,e){const r=new AT(e),i=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next((a=>{let o=null;for(const l of a)r.yn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o}))}getIndexType(t,e){let r=2;const i=this.Mn(e);return W.forEach(i,(a=>this.xn(t,a).next((o=>{o?r!==0&&o.fields.length<(function(c){let h=new _e(Be.comparator),p=!1;for(const g of c.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:h=h.add(v.field));for(const g of c.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(p?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(e)&&i.length>1&&r===2?1:r))}Qn(t,e){const r=new Ef;for(const i of Bo(t)){const a=e.data.field(i.fieldPath);if(a==null)return null;const o=r.Pn(i.kind);Go.Kt.Dt(a,o)}return r.un()}Ln(t){const e=new Ef;return Go.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new Ef;return Go.Kt.Dt(hh(this.databaseId,e),r.Pn((function(a){const o=Bo(a);return o.length===0?0:o[o.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let i=[];i.push(new Ef);let a=0;for(const o of Bo(t)){const l=r[a++];for(const c of i)if(this.Un(e,o.fieldPath)&&dh(l))i=this.Kn(i,o,l);else{const h=c.Pn(o.kind);Go.Kt.Dt(l,h)}}return this.Wn(i)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const i=[...t],a=[];for(const o of r.arrayValue.values||[])for(const l of i){const c=new Ef;c.seed(l.un()),Go.Kt.Dt(o,c.Pn(e.kind)),a.push(c)}return a}Un(t,e){return!!t.filters.find((r=>r instanceof $t&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=Af(t),i=hl(t);return(e?r.J(Ny,IDBKeyRange.bound(e,e)):r.J()).next((a=>{const o=[];return W.forEach(a,(l=>i.get([l.indexId,this.uid]).next((c=>{o.push((function(p,g){const v=g?new ah(g.sequenceNumber,new Vr(fu(g.readTime),new gt(Xi(g.documentKey)),g.largestBatchId)):ah.empty(),x=p.fields.map((([A,S])=>new F0(Be.fromServerFormat(A),S)));return new f1(p.indexId,p.collectionGroup,x,v)})(l,c))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Pt(r.collectionGroup,i.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const i=Af(t),a=hl(t);return this.Gn(t).next((o=>i.J(Ny,IDBKeyRange.bound(e,e)).next((l=>W.forEach(l,(c=>a.put(mT(c.indexId,this.uid,o,r))))))))}updateIndexEntries(t,e){const r=new Map;return W.forEach(e,((i,a)=>{const o=r.get(i.collectionGroup);return(o?W.resolve(o):this.getFieldIndexes(t,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),W.forEach(l,(c=>this.zn(t,i,c).next((h=>{const p=this.jn(a,c);return h.isEqual(p)?W.resolve():this.Jn(t,a,c,h,p)})))))))}))}Hn(t,e,r,i){return fl(t).put(i.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,i){return fl(t).delete(i.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const i=fl(t);let a=new _e(Es);return i.ee({index:u3,range:IDBKeyRange.only([r.indexId,this.uid,X0(this.$n(r,e))])},((o,l)=>{a=a.add(new qo(r.indexId,e,ET(l.arrayValue),ET(l.directionalValue)))})).next((()=>a))}jn(t,e){let r=new _e(Es);const i=this.Qn(e,t);if(i==null)return r;const a=Dy(e);if(a!=null){const o=t.data.field(a.fieldPath);if(dh(o))for(const l of o.arrayValue.values||[])r=r.add(new qo(e.indexId,t.key,this.Ln(l),i))}else r=r.add(new qo(e.indexId,t.key,w0,i));return r}Jn(t,e,r,i,a){ct(TT,"Updating index entries for document '%s'",e.key);const o=[];return(function(c,h,p,g,v){const x=c.getIterator(),A=h.getIterator();let S=ll(x),C=ll(A);for(;S||C;){let O=!1,D=!1;if(S&&C){const P=p(S,C);P<0?D=!0:P>0&&(O=!0)}else S!=null?D=!0:O=!0;O?(g(C),C=ll(A)):D?(v(S),S=ll(x)):(S=ll(x),C=ll(A))}})(i,a,Es,(l=>{o.push(this.Hn(t,e,r,l))}),(l=>{o.push(this.Yn(t,e,r,l))})),W.waitFor(o)}Gn(t){let e=1;return hl(t).ee({index:o3,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),e=i.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((o,l)=>Es(o,l))).filter(((o,l,c)=>!l||Es(o,c[l-1])!==0));const i=[];i.push(t);for(const o of r){const l=Es(o,t),c=Es(o,e);if(l===0)i[0]=t.An();else if(l>0&&c<0)i.push(o),i.push(o.An());else if(c>0)break}i.push(e);const a=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const l=i[o].Vn(this.uid,w0,gt.empty()),c=i[o+1].Vn(this.uid,w0,gt.empty());a.push(IDBKeyRange.bound(l,c))}return a}Zn(t,e){return Es(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(IT)}getMinOffset(t,e){return W.mapArray(this.Mn(e),(r=>this.xn(t,r).next((i=>i||_t(44426))))).next(IT)}}function ST(n){return An(n,lh)}function fl(n){return An(n,qf)}function Af(n){return An(n,Jv)}function hl(n){return An(n,Gf)}function IT(n){Tt(n.length!==0,28825);let t=n[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;$v(i,t)<0&&(t=i),e<i.largestBatchId&&(e=i.largestBatchId)}return new Vr(t.readTime,t.documentKey,e)}const CT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hb=41943040;class Xn{static withCacheSize(t){return new Xn(t,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}function db(n,t,e){const r=n.store(vi),i=n.store(kl),a=[],o=IDBKeyRange.only(e.batchId);let l=0;const c=r.ee({range:o},((p,g,v)=>(l++,v.delete())));a.push(c.next((()=>{Tt(l===1,47070,{batchId:e.batchId})})));const h=[];for(const p of e.mutations){const g=i3(t,p.key.path,e.batchId);a.push(i.delete(g)),h.push(p.key)}return W.waitFor(a).next((()=>h))}function w1(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw _t(14731);t=n.noDocument}return JSON.stringify(t).length}Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(hb,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);class op{constructor(t,e,r,i){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(t,e,r,i){Tt(t.uid!=="",64387);const a=t.isAuthenticated()?t.uid:"";return new op(a,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return As(t).ee({index:Ko,range:r},((i,a,o)=>{e=!1,o.done()})).next((()=>e))}addMutationBatch(t,e,r,i){const a=_l(t),o=As(t);return o.add({}).next((l=>{Tt(typeof l=="number",49019);const c=new u_(l,e,r,i),h=(function(x,A,S){const C=S.baseMutations.map((D=>x1(x.yt,D))),O=S.mutations.map((D=>x1(x.yt,D)));return{userId:A,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:C,mutations:O}})(this.serializer,this.userId,c),p=[];let g=new _e(((v,x)=>Pt(v.canonicalString(),x.canonicalString())));for(const v of i){const x=i3(this.userId,v.key.path,l);g=g.add(v.key.path.popLast()),p.push(o.put(h)),p.push(a.put(x,EN))}return g.forEach((v=>{p.push(this.indexManager.addToCollectionParentIndex(t,v))})),t.addOnCommittedListener((()=>{this.Xn[l]=c.keys()})),W.waitFor(p).next((()=>c))}))}lookupMutationBatch(t,e){return As(t).get(e).next((r=>r?(Tt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),Ho(this.serializer,r)):null))}er(t,e){return this.Xn[e]?W.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const i=r.keys();return this.Xn[e]=i,i}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return As(t).ee({index:Ko,range:i},((o,l,c)=>{l.userId===this.userId&&(Tt(l.batchId>=r,47524,{tr:r}),a=Ho(this.serializer,l)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Qo;return As(t).ee({index:Ko,range:e,reverse:!0},((i,a,o)=>{r=a.batchId,o.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,Qo],[this.userId,Number.POSITIVE_INFINITY]);return As(t).J(Ko,e).next((r=>r.map((i=>Ho(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=U0(this.userId,e.path),i=IDBKeyRange.lowerBound(r),a=[];return _l(t).ee({range:i},((o,l,c)=>{const[h,p,g]=o,v=Xi(p);if(h===this.userId&&e.path.isEqual(v))return As(t).get(g).next((x=>{if(!x)throw _t(61480,{nr:o,batchId:g});Tt(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:g}),a.push(Ho(this.serializer,x))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new _e(Pt);const i=[];return e.forEach((a=>{const o=U0(this.userId,a.path),l=IDBKeyRange.lowerBound(o),c=_l(t).ee({range:l},((h,p,g)=>{const[v,x,A]=h,S=Xi(x);v===this.userId&&a.path.isEqual(S)?r=r.add(A):g.done()}));i.push(c)})),W.waitFor(i).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,a=U0(this.userId,r),o=IDBKeyRange.lowerBound(a);let l=new _e(Pt);return _l(t).ee({range:o},((c,h,p)=>{const[g,v,x]=c,A=Xi(v);g===this.userId&&r.isPrefixOf(A)?A.length===i&&(l=l.add(x)):p.done()})).next((()=>this.rr(t,l)))}rr(t,e){const r=[],i=[];return e.forEach((a=>{i.push(As(t).get(a).next((o=>{if(o===null)throw _t(35274,{batchId:a});Tt(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:a}),r.push(Ho(this.serializer,o))})))})),W.waitFor(i).next((()=>r))}removeMutationBatch(t,e){return db(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),W.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return W.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return _l(t).ee({range:r},((a,o,l)=>{if(a[0]===this.userId){const c=Xi(a[1]);i.push(c)}else l.done()})).next((()=>{Tt(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(t,e){return pb(t,this.userId,e)}_r(t){return gb(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:Qo,lastStreamToken:""}))}}function pb(n,t,e){const r=U0(t,e.path),i=r[1],a=IDBKeyRange.lowerBound(r);let o=!1;return _l(n).ee({range:a,X:!0},((l,c,h)=>{const[p,g,v]=l;p===t&&g===i&&(o=!0),h.done()})).next((()=>o))}function As(n){return An(n,vi)}function _l(n){return An(n,kl)}function gb(n){return An(n,oh)}class hu{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new hu(0)}static cr(){return new hu(-1)}}class qP{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new hu(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>It.fromTimestamp(new ye(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.hr(t,i))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>dl(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(Tt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let i=0;const a=[];return dl(t).ee(((o,l)=>{const c=Mf(l);c.sequenceNumber<=e&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(t,c)))})).next((()=>W.waitFor(a))).next((()=>i))}forEachTarget(t,e){return dl(t).ee(((r,i)=>{const a=Mf(i);e(a)}))}lr(t){return bT(t).get(p1).next((e=>(Tt(e!==null,2888),e)))}hr(t,e){return bT(t).put(p1,e)}Pr(t,e){return dl(t).put(ub(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=lu(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return dl(t).ee({range:i,index:s3},((o,l,c)=>{const h=Mf(l);Rh(e,h.target)&&(a=h,c.done())})).next((()=>a))}addMatchingKeys(t,e,r){const i=[],a=Rs(t);return e.forEach((o=>{const l=Zn(o.path);i.push(a.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(t,r,o))})),W.waitFor(i)}removeMatchingKeys(t,e,r){const i=Rs(t);return W.forEach(e,(a=>{const o=Zn(a.path);return W.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(t,r,a)])}))}removeMatchingKeysForTargetId(t,e){const r=Rs(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=Rs(t);let a=jt();return i.ee({range:r,X:!0},((o,l,c)=>{const h=Xi(o[1]),p=new gt(h);a=a.add(p)})).next((()=>a))}containsKey(t,e){const r=Zn(e.path),i=IDBKeyRange.bound([r],[YC(r)],!1,!0);let a=0;return Rs(t).ee({index:Zv,X:!0,range:i},(([o,l],c,h)=>{o!==0&&(a++,h.done())})).next((()=>a>0))}At(t,e){return dl(t).get(e).next((r=>r?Mf(r):null))}}function dl(n){return An(n,Bl)}function bT(n){return An(n,Zo)}function Rs(n){return An(n,Fl)}const RT="LruGarbageCollector",mb=1048576;function DT([n,t],[e,r]){const i=Pt(n,e);return i===0?Pt(t,r):i}class KP{constructor(t){this.Ir=t,this.buffer=new _e(DT),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();DT(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class yb{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){ct(RT,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Qs(e)?ct(RT,"Ignoring IndexedDB error during garbage collection: ",e):await $s(e)}await this.Vr(3e5)}))}}class XP{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return W.resolve(vr.ce);const r=new KP(e);return this.mr.forEachTarget(t,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(t,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(CT)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CT):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,i,a,o,l,c,h;const p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(t,i)))).next((g=>(r=g,l=Date.now(),this.removeTargets(t,r,e)))).next((g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((g=>(h=Date.now(),gl()<=Yt.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function vb(n,t){return new XP(n,t)}class WP{constructor(t,e){this.db=t,this.garbageCollector=vb(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((i=>r+i))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,i)=>e(i)))}addReference(t,e,r){return T0(t,r)}removeReference(t,e,r){return T0(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return T0(t,e)}br(t,e){return(function(i,a){let o=!1;return gb(i).te((l=>pb(i,l,a).next((c=>(c&&(o=!0),W.resolve(!c)))))).next((()=>o))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(t,((o,l)=>{if(l<=e){const c=this.br(t,o).next((h=>{if(!h)return a++,r.getEntry(t,o).next((()=>(r.removeEntry(o,It.min()),Rs(t).delete((function(g){return[0,Zn(g.path)]})(o)))))}));i.push(c)}})).next((()=>W.waitFor(i))).next((()=>r.apply(t))).next((()=>a))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return T0(t,e)}Sr(t,e){const r=Rs(t);let i,a=vr.ce;return r.ee({index:Zv},(([o,l],{path:c,sequenceNumber:h})=>{o===0?(a!==vr.ce&&e(new gt(Xi(i)),a),a=h,i=c):a=vr.ce})).next((()=>{a!==vr.ce&&e(new gt(Xi(i)),a)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function T0(n,t){return Rs(n).put((function(r,i){return{targetId:0,path:Zn(r.path),sequenceNumber:i}})(t,n.currentSequenceNumber))}class _b{constructor(){this.changes=new ka((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ge.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?W.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class YP{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Po(t).put(r)}removeEntry(t,e,r){return Po(t).delete((function(a,o){const l=a.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],E1(o),l[l.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=Ge.newInvalidDocument(e);return Po(t).ee({index:z0,range:IDBKeyRange.only(wf(e))},((i,a)=>{r=this.Cr(e,a)})).next((()=>r))}vr(t,e){let r={size:0,document:Ge.newInvalidDocument(e)};return Po(t).ee({index:z0,range:IDBKeyRange.only(wf(e))},((i,a)=>{r={document:this.Cr(e,a),size:w1(a)}})).next((()=>r))}getEntries(t,e){let r=Pr();return this.Fr(t,e,((i,a)=>{const o=this.Cr(i,a);r=r.insert(i,o)})).next((()=>r))}Mr(t,e){let r=Pr(),i=new Ce(gt.comparator);return this.Fr(t,e,((a,o)=>{const l=this.Cr(a,o);r=r.insert(a,l),i=i.insert(a,w1(o))})).next((()=>({documents:r,Or:i})))}Fr(t,e,r){if(e.isEmpty())return W.resolve();let i=new _e(PT);e.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(wf(i.first()),wf(i.last())),o=i.getIterator();let l=o.getNext();return Po(t).ee({index:z0,range:a},((c,h,p)=>{const g=gt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&PT(l,g)<0;)r(l,null),l=o.getNext();l&&l.isEqual(g)&&(r(l,h),l=o.hasNext()?o.getNext():null),l?p.j(wf(l)):p.done()})).next((()=>{for(;l;)r(l,null),l=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(t,e,r,i,a){const o=e.path,l=[o.popLast().toArray(),o.lastSegment(),E1(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Po(t).J(IDBKeyRange.bound(l,c,!0)).next((h=>{a?.incrementDocumentReadCount(h.length);let p=Pr();for(const g of h){const v=this.Cr(gt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Oh(e,v)||i.has(v.key))&&(p=p.insert(v.key,v))}return p}))}getAllFromCollectionGroup(t,e,r,i){let a=Pr();const o=NT(e,r),l=NT(e,Vr.max());return Po(t).ee({index:a3,range:IDBKeyRange.bound(o,l,!0)},((c,h,p)=>{const g=this.Cr(gt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(g.key,g),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(t){return new $P(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return OT(t).get(Oy).next((e=>(Tt(!!e,20021),e)))}Dr(t,e){return OT(t).put(Oy,e)}Cr(t,e){if(e){const r=VP(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(It.min())))return r}return Ge.newInvalidDocument(t)}}function xb(n){return new YP(n)}class $P extends _b{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new ka((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(t){const e=[];let r=0,i=new _e(((a,o)=>Pt(a.canonicalString(),o.canonicalString())));return this.changes.forEach(((a,o)=>{const l=this.Br.get(a);if(e.push(this.Nr.removeEntry(t,a,l.readTime)),o.isValidDocument()){const c=pT(this.Nr.serializer,o);i=i.add(a.path.popLast());const h=w1(c);r+=h-l.size,e.push(this.Nr.addEntry(t,a,c))}else if(r-=l.size,this.trackRemovals){const c=pT(this.Nr.serializer,o.convertToNoDocument(It.min()));e.push(this.Nr.addEntry(t,a,c))}})),i.forEach((a=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,a))})),e.push(this.Nr.updateMetadata(t,r)),W.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:i})=>(i.forEach(((a,o)=>{this.Br.set(a,{size:o,readTime:r.get(a).readTime})})),r)))}}function OT(n){return An(n,uh)}function Po(n){return An(n,d1)}function wf(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function NT(n,t){const e=t.documentKey.path.toArray();return[n,E1(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function PT(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let a=0;a<e.length-2&&a<r.length-2;++a)if(i=Pt(e[a],r[a]),i)return i;return i=Pt(e.length,r.length),i||(i=Pt(e[e.length-2],r[r.length-2]),i||Pt(e[e.length-1],r[r.length-1]))}class QP{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Eb{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(r=i,this.remoteDocumentCache.getEntry(t,e)))).next((i=>(r!==null&&Yf(r.mutation,i,_r.empty(),ye.now()),i)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,jt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=jt()){const i=Wi();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,r).next((a=>{let o=Nf();return a.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(t,e){const r=Wi();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,jt())))}populateOverlays(t,e,r){const i=[];return r.forEach((a=>{e.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(t,i).next((a=>{a.forEach(((o,l)=>{e.set(o,l)}))}))}computeViews(t,e,r,i){let a=Pr();const o=Wf(),l=(function(){return Wf()})();return e.forEach(((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Ba)?a=a.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Yf(p.mutation,h,p.mutation.getFieldMask(),ye.now())):o.set(h.key,_r.empty())})),this.recalculateAndSaveOverlays(t,a).next((c=>(c.forEach(((h,p)=>o.set(h,p))),e.forEach(((h,p)=>l.set(h,new QP(p,o.get(h)??null)))),l)))}recalculateAndSaveOverlays(t,e){const r=Wf();let i=new Ce(((o,l)=>o-l)),a=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((o=>{for(const l of o)l.keys().forEach((c=>{const h=e.get(c);if(h===null)return;let p=r.get(c)||_r.empty();p=l.applyToLocalView(h,p),r.set(c,p);const g=(i.get(l.batchId)||jt()).add(c);i=i.insert(l.batchId,g)}))})).next((()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,g=B3();p.forEach((v=>{if(!a.has(v)){const x=G3(e.get(v),r.get(v));x!==null&&g.set(v,x),a=a.add(v)}})),o.push(this.documentOverlayCache.saveOverlays(t,h,g))}return W.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,i){return(function(o){return gt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):N3(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next((a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-a.size):W.resolve(Wi());let l=Ll,c=a;return o.next((h=>W.forEach(h,((p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(p)?W.resolve():this.remoteDocumentCache.getEntry(t,p).next((v=>{c=c.insert(p,v)}))))).next((()=>this.populateOverlays(t,h,a))).next((()=>this.computeViews(t,c,h,jt()))).next((p=>({batchId:l,changes:k3(p)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gt(e)).next((r=>{let i=Nf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const a=e.collectionGroup;let o=Nf();return this.indexManager.getCollectionParents(t,a).next((l=>W.forEach(l,(c=>{const h=(function(g,v){return new Dh(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(e,c.child(a));return this.getDocumentsMatchingCollectionQuery(t,h,r,i).next((p=>{p.forEach(((g,v)=>{o=o.insert(g,v)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,e,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,a,i)))).next((o=>{a.forEach(((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Ge.newInvalidDocument(p)))}));let l=Nf();return o.forEach(((c,h)=>{const p=a.get(c);p!==void 0&&Yf(p.mutation,h,_r.empty(),ye.now()),Oh(e,h)&&(l=l.insert(c,h))})),l}))}}class ZP{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return W.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(i){return{id:i.id,version:i.version,createTime:or(i.createTime)}})(e)),W.resolve()}getNamedQuery(t,e){return W.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(i){return{name:i.name,query:lb(i.bundledQuery),readTime:or(i.readTime)}})(e)),W.resolve()}}class JP{constructor(){this.overlays=new Ce(gt.comparator),this.qr=new Map}getOverlay(t,e){return W.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Wi();return W.forEach(e,(i=>this.getOverlay(t,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((i,a)=>{this.St(t,e,a)})),W.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(t,e,r){const i=Wi(),a=e.length+1,o=new gt(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return W.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let a=new Ce(((h,p)=>h-p));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=Wi(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Wi(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return W.resolve(l)}St(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c_(e,r));let a=this.qr.get(e);a===void 0&&(a=jt(),this.qr.set(e,a)),this.qr.set(e,a.add(r.key))}}class tM{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(t){return W.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,W.resolve()}}class g_{constructor(){this.Qr=new _e(bn.$r),this.Ur=new _e(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new bn(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new bn(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new gt(new ce([])),r=new bn(e,t),i=new bn(e,t+1),a=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),a.push(o.key)})),a}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new gt(new ce([])),r=new bn(e,t),i=new bn(e,t+1);let a=jt();return this.Ur.forEachInRange([r,i],(o=>{a=a.add(o.key)})),a}containsKey(t){const e=new bn(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class bn{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return gt.comparator(t.key,e.key)||Pt(t.Yr,e.Yr)}static Kr(t,e){return Pt(t.Yr,e.Yr)||gt.comparator(t.key,e.key)}}class eM{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new _e(bn.$r)}checkEmpty(t){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u_(a,e,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new bn(l.key,a)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(t,e){return W.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.ei(r),a=i<0?0:i;return W.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Qo:this.tr-1)}getAllMutationBatches(t){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new bn(e,0),i=new bn(e,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(o=>{const l=this.Xr(o.Yr);a.push(l)})),W.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new _e(Pt);return e.forEach((i=>{const a=new bn(i,0),o=new bn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],(l=>{r=r.add(l.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let a=r;gt.isDocumentKey(a)||(a=a.child(""));const o=new bn(new gt(a),0);let l=new _e(Pt);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Yr)),!0)}),o),W.resolve(this.ti(l))}ti(t){const e=[];return t.forEach((r=>{const i=this.Xr(r);i!==null&&e.push(i)})),e}removeMutationBatch(t,e){Tt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(e.mutations,(i=>{const a=new bn(i.key,e.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new bn(e,0),i=this.Zr.firstAfterOrEqual(r);return W.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,W.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class nM{constructor(t){this.ri=t,this.docs=(function(){return new Ce(gt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return W.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(e))}getEntries(t,e){let r=Pr();return e.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ge.newInvalidDocument(i))})),W.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let a=Pr();const o=e.path,l=new gt(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||$v(JC(p),r)<=0||(i.has(p.key)||Oh(e,p))&&(a=a.insert(p.key,p.mutableCopy()))}return W.resolve(a)}getAllFromCollectionGroup(t,e,r,i){_t(9500)}ii(t,e){return W.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new rM(this)}getSize(t){return W.resolve(this.size)}}class rM extends _b{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?e.push(this.Nr.addEntry(t,i)):this.Nr.removeEntry(r)})),W.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class iM{constructor(t){this.persistence=t,this.si=new ka((e=>lu(e)),Rh),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.oi=0,this._i=new g_,this.targetCount=0,this.ai=hu.ur()}forEachTarget(t,e){return this.si.forEach(((r,i)=>e(i))),W.resolve()}getLastRemoteSnapshotVersion(t){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return W.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),W.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new hu(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,W.resolve()}updateTargetData(t,e){return this.Pr(e),W.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,W.resolve()}removeTargets(t,e,r){let i=0;const a=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)})),W.waitFor(a).next((()=>i))}getTargetCount(t){return W.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return W.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),W.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const i=this.persistence.referenceDelegate,a=[];return i&&e.forEach((o=>{a.push(i.markPotentiallyOrphaned(t,o))})),W.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),W.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return W.resolve(r)}containsKey(t,e){return W.resolve(this._i.containsKey(e))}}class m_{constructor(t,e){this.ui={},this.overlays={},this.ci=new vr(0),this.li=!1,this.li=!0,this.hi=new tM,this.referenceDelegate=t(this),this.Pi=new iM(this),this.indexManager=new HP,this.remoteDocumentCache=(function(i){return new nM(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ob(e),this.Ii=new ZP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new JP,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new eM(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){ct("MemoryPersistence","Starting transaction:",t);const i=new aM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(t,e){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class aM extends e3{constructor(t){super(),this.currentSequenceNumber=t}}class up{constructor(t){this.persistence=t,this.Ri=new g_,this.Vi=null}static mi(t){return new up(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),W.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),W.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const i=gt.fromPath(r);return this.gi(t,i).next((a=>{a||e.removeEntry(i,It.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return W.or([()=>W.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class T1{constructor(t,e){this.persistence=t,this.pi=new ka((r=>Zn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=vb(this,e)}static mi(t,e){return new T1(t,e)}Ei(){}di(t){return W.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((i=>r+i))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return W.forEach(this.pi,((r,i)=>this.br(t,r,i).next((a=>a?W.resolve():e(i)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(t,(o=>this.br(t,o,e).next((l=>{l||(r++,a.removeEntry(o,It.min()))})))).next((()=>a.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),W.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),W.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),W.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),W.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=H0(t.data.value)),e}br(t,e,r){return W.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const i=this.pi.get(e);return W.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class sM{constructor(t){this.serializer=t}k(t,e,r,i){const a=new W1("createOrUpgrade",e);r<1&&i>=1&&((function(c){c.createObjectStore(bh)})(t),(function(c){c.createObjectStore(oh,{keyPath:xN}),c.createObjectStore(vi,{keyPath:Gw,autoIncrement:!0}).createIndex(Ko,qw,{unique:!0}),c.createObjectStore(kl)})(t),MT(t),(function(c){c.createObjectStore(Fo)})(t));let o=W.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Fl),c.deleteObjectStore(Bl),c.deleteObjectStore(Zo)})(t),MT(t)),o=o.next((()=>(function(c){const h=c.store(Zo),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return h.put(p1,p)})(a)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(c,h){return h.store(vi).J().next((g=>{c.deleteObjectStore(vi),c.createObjectStore(vi,{keyPath:Gw,autoIncrement:!0}).createIndex(Ko,qw,{unique:!0});const v=h.store(vi),x=g.map((A=>v.put(A)));return W.waitFor(x)}))})(t,a)))),o=o.next((()=>{(function(c){c.createObjectStore(Ul,{keyPath:RN})})(t)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(a)))),r<6&&i>=6&&(o=o.next((()=>((function(c){c.createObjectStore(uh)})(t),this.wi(a))))),r<7&&i>=7&&(o=o.next((()=>this.Si(a)))),r<8&&i>=8&&(o=o.next((()=>this.bi(t,a)))),r<9&&i>=9&&(o=o.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(a)))),r<11&&i>=11&&(o=o.next((()=>{(function(c){c.createObjectStore($1,{keyPath:DN})})(t),(function(c){c.createObjectStore(Q1,{keyPath:ON})})(t)}))),r<12&&i>=12&&(o=o.next((()=>{(function(c){const h=c.createObjectStore(Z1,{keyPath:BN});h.createIndex(Py,FN,{unique:!1}),h.createIndex(l3,UN,{unique:!1})})(t)}))),r<13&&i>=13&&(o=o.next((()=>(function(c){const h=c.createObjectStore(d1,{keyPath:AN});h.createIndex(z0,wN),h.createIndex(a3,TN)})(t))).next((()=>this.Ci(t,a))).next((()=>t.deleteObjectStore(Fo)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(t,a)))),r<15&&i>=15&&(o=o.next((()=>(function(c){c.createObjectStore(Jv,{keyPath:NN,autoIncrement:!0}).createIndex(Ny,PN,{unique:!1}),c.createObjectStore(Gf,{keyPath:MN}).createIndex(o3,VN,{unique:!1}),c.createObjectStore(qf,{keyPath:LN}).createIndex(u3,kN,{unique:!1})})(t)))),r<16&&i>=16&&(o=o.next((()=>{e.objectStore(Gf).clear()})).next((()=>{e.objectStore(qf).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(c){c.createObjectStore(t_,{keyPath:zN})})(t)}))),r<18&&i>=18&&VC()&&(o=o.next((()=>{e.objectStore(Gf).clear()})).next((()=>{e.objectStore(qf).clear()}))),o}wi(t){let e=0;return t.store(Fo).ee(((r,i)=>{e+=w1(i)})).next((()=>{const r={byteSize:e};return t.store(uh).put(Oy,r)}))}yi(t){const e=t.store(oh),r=t.store(vi);return e.J().next((i=>W.forEach(i,(a=>{const o=IDBKeyRange.bound([a.userId,Qo],[a.userId,a.lastAcknowledgedBatchId]);return r.J(Ko,o).next((l=>W.forEach(l,(c=>{Tt(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const h=Ho(this.serializer,c);return db(t,a.userId,h).next((()=>{}))}))))}))))}Si(t){const e=t.store(Fl),r=t.store(Fo);return t.store(Zo).get(p1).next((i=>{const a=[];return r.ee(((o,l)=>{const c=new ce(o),h=(function(g){return[0,Zn(g)]})(c);a.push(e.get(h).next((p=>p?W.resolve():(g=>e.put({targetId:0,path:Zn(g),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>W.waitFor(a)))}))}bi(t,e){t.createObjectStore(lh,{keyPath:bN});const r=e.store(lh),i=new p_,a=o=>{if(i.add(o)){const l=o.lastSegment(),c=o.popLast();return r.put({collectionId:l,parent:Zn(c)})}};return e.store(Fo).ee({X:!0},((o,l)=>{const c=new ce(o);return a(c.popLast())})).next((()=>e.store(kl).ee({X:!0},(([o,l,c],h)=>{const p=Xi(l);return a(p.popLast())}))))}Di(t){const e=t.store(Bl);return e.ee(((r,i)=>{const a=Mf(i),o=ub(this.serializer,a);return e.put(o)}))}Ci(t,e){const r=e.store(Fo),i=[];return r.ee(((a,o)=>{const l=e.store(d1),c=(function(g){return g.document?new gt(ce.fromString(g.document.name).popFirst(5)):g.noDocument?gt.fromSegments(g.noDocument.path):g.unknownDocument?gt.fromSegments(g.unknownDocument.path):_t(36783)})(o).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(l.put(h))})).next((()=>W.waitFor(i)))}Fi(t,e){const r=e.store(vi),i=xb(this.serializer),a=new m_(up.mi,this.serializer.yt);return r.J().next((o=>{const l=new Map;return o.forEach((c=>{let h=l.get(c.userId)??jt();Ho(this.serializer,c).keys().forEach((p=>h=h.add(p))),l.set(c.userId,h)})),W.forEach(l,((c,h)=>{const p=new Kn(h),g=sp.wt(this.serializer,p),v=a.getIndexManager(p),x=op.wt(p,this.serializer,v,a.referenceDelegate);return new Eb(i,x,g,v).recalculateAndSaveOverlaysForDocumentKeys(new My(e,vr.ce),c).next()}))}))}}function MT(n){n.createObjectStore(Fl,{keyPath:IN}).createIndex(Zv,CN,{unique:!0}),n.createObjectStore(Bl,{keyPath:"targetId"}).createIndex(s3,SN,{unique:!0}),n.createObjectStore(Zo)}const ws="IndexedDbPersistence",Hm=18e5,Gm=5e3,qm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oM="main";class y_{constructor(t,e,r,i,a,o,l,c,h,p,g=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=a,this.window=o,this.document=l,this.xi=h,this.Oi=p,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!y_.v())throw new pt(at.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WP(this,i),this.$i=e+oM,this.serializer=new ob(c),this.Ui=new Us(this.$i,this.Ni,new sM(this.serializer)),this.hi=new kP,this.Pi=new qP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xb(this.serializer),this.Ii=new LP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Ye(ws,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pt(at.FAILED_PRECONDITION,qm);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new vr(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>S0(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Qs(t))return ct(ws,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ct(ws,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Tf(t).get(ul).next((e=>W.resolve(this.es(e))))}ts(t){return S0(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Hm)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=An(e,Ul);return r.J().next((i=>{const a=this.ss(i,Hm),o=i.filter((l=>a.indexOf(l)===-1));return W.forEach(o,(l=>r.delete(l.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?W.resolve(!0):Tf(t).get(ul).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Gm)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new pt(at.FAILED_PRECONDITION,qm);return!1}}return!(!this.networkEnabled||!this.inForeground)||S0(t).J().next((r=>this.ss(r,Gm).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(a||o&&l)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&ct(ws,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[bh,Ul],(t=>{const e=new My(t,vr.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>S0(t).J().next((e=>this.ss(e,Hm).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return op.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new GP(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return sp.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){ct(ws,"Starting transaction:",t);const i=e==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?GN:c===17?d3:c===16?HN:c===15?e_:c===14?h3:c===13?f3:c===12?jN:c===11?c3:void _t(60245)})(this.Ni);let o;return this.Ui.runTransaction(t,i,a,(l=>(o=new My(l,this.ci?this.ci.next():vr.ce),e==="readwrite-primary"?this.Hi(o).next((c=>!!c||this.Yi(o))).next((c=>{if(!c)throw Ye(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new pt(at.FAILED_PRECONDITION,t3);return r(o)})).next((c=>this.Xi(o).next((()=>c)))):this.Is(o).next((()=>r(o)))))).then((l=>(o.raiseOnCommittedEvent(),l)))}Is(t){return Tf(t).get(ul).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Gm)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new pt(at.FAILED_PRECONDITION,qm)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tf(t).put(ul,e)}static v(){return Us.v()}Zi(t){const e=Tf(t);return e.get(ul).next((r=>this.es(r)?(ct(ws,"Releasing primary lease."),e.delete(ul)):W.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Ye(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;MC()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){try{const e=this.Ki?.getItem(this._s(t))!==null;return ct(ws,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Ye(ws,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Ye("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Tf(n){return An(n,bh)}function S0(n){return An(n,Ul)}function Ab(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class v_{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=i}static As(t,e){let r=jt(),i=jt();for(const a of e.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new v_(t,e.fromCache,r,i)}}class uM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class wb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return MC()?8:n3(En())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,i){const a={result:null};return this.ys(t,e).next((o=>{a.result=o})).next((()=>{if(!a.result)return this.ws(t,e,i,r).next((o=>{a.result=o}))})).next((()=>{if(a.result)return;const o=new uM;return this.Ss(t,e,o).next((l=>{if(a.result=l,this.Vs)return this.bs(t,e,o,l.size)}))})).next((()=>a.result))}bs(t,e,r,i){return r.documentReadCount<this.fs?(gl()<=Yt.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",ml(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(gl()<=Yt.DEBUG&&ct("QueryEngine","Query:",ml(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(gl()<=Yt.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",ml(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mr(e))):W.resolve())}ys(t,e){if(iT(e))return W.resolve(null);let r=Mr(e);return this.indexManager.getIndexType(t,r).next((i=>i===0?null:(e.limit!==null&&i===1&&(e=zy(e,null,"F"),r=Mr(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((a=>{const o=jt(...a);return this.ps.getDocuments(t,o).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const h=this.Ds(e,l);return this.Cs(e,h,o,c.readTime)?this.ys(t,zy(e,null,"F")):this.vs(t,h,e,c)}))))})))))}ws(t,e,r,i){return iT(e)||i.isEqual(It.min())?W.resolve(null):this.ps.getDocuments(t,r).next((a=>{const o=this.Ds(e,a);return this.Cs(e,o,r,i)?W.resolve(null):(gl()<=Yt.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ml(e)),this.vs(t,o,e,ZC(i,Ll)).next((l=>l)))}))}Ds(t,e){let r=new _e(V3(t));return e.forEach(((i,a)=>{Oh(t,a)&&(r=r.add(a))})),r}Cs(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const a=t.limitType==="F"?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(t,e,r){return gl()<=Yt.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",ml(e)),this.ps.getDocumentsMatchingQuery(t,e,Vr.min(),r)}vs(t,e,r,i){return this.ps.getDocumentsMatchingQuery(t,r,i).next((a=>(e.forEach((o=>{a=a.insert(o.key,o)})),a)))}}const __="LocalStore",lM=3e8;class cM{constructor(t,e,r,i){this.persistence=t,this.Fs=e,this.serializer=i,this.Ms=new Ce(Pt),this.xs=new ka((a=>lu(a)),Rh),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Eb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function Tb(n,t,e,r){return new cM(n,t,e,r)}async function Sb(n,t){const e=At(n);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((a=>{const o=[],l=[];let c=jt();for(const h of i){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return e.localDocuments.getDocuments(r,c).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:l})))}))}))}function fM(n,t){const e=At(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=t.batch.keys(),a=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,p){const g=h.batch,v=g.keys();let x=W.resolve();return v.forEach((A=>{x=x.next((()=>p.getEntry(c,A))).next((S=>{const C=h.docVersions.get(A);Tt(C!==null,48541),S.version.compareTo(C)<0&&(g.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),x.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(e,r,t,a).next((()=>a.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=jt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(t)))).next((()=>e.localDocuments.getDocuments(r,i)))}))}function Ib(n){const t=At(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function hM(n,t){const e=At(n),r=t.snapshotVersion;let i=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const o=e.Ns.newChangeBuffer({trackRemovals:!0});i=e.Ms;const l=[];t.targetChanges.forEach(((p,g)=>{const v=i.get(g);if(!v)return;l.push(e.Pi.removeMatchingKeys(a,p.removedDocuments,g).next((()=>e.Pi.addMatchingKeys(a,p.addedDocuments,g))));let x=v.withSequenceNumber(a.currentSequenceNumber);t.targetMismatches.get(g)!==null?x=x.withResumeToken(Qe.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(g,x),(function(S,C,O){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=lM?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(v,x,p)&&l.push(e.Pi.updateTargetData(a,x))}));let c=Pr(),h=jt();if(t.documentUpdates.forEach((p=>{t.resolvedLimboDocuments.has(p)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(dM(a,o,t.documentUpdates).next((p=>{c=p.ks,h=p.qs}))),!r.isEqual(It.min())){const p=e.Pi.getLastRemoteSnapshotVersion(a).next((g=>e.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));l.push(p)}return W.waitFor(l).next((()=>o.apply(a))).next((()=>e.localDocuments.getLocalViewOfDocuments(a,c,h))).next((()=>c))})).then((a=>(e.Ms=i,a)))}function dM(n,t,e){let r=jt(),i=jt();return e.forEach((a=>r=r.add(a))),t.getEntries(n,r).next((a=>{let o=Pr();return e.forEach(((l,c)=>{const h=a.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(It.min())?(t.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),o=o.insert(l,c)):ct(__,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:o,qs:i}}))}function pM(n,t){const e=At(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Qo),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function S1(n,t){const e=At(n);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return e.Pi.getTargetData(r,t).next((a=>a?(i=a,W.resolve(i)):e.Pi.allocateTargetId(r).next((o=>(i=new Ta(t,o,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=e.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Wl(n,t,e){const r=At(n),i=r.Ms.get(t),a=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",a,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qs(o))throw o;ct(__,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Yy(n,t,e){const r=At(n);let i=It.min(),a=jt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,h,p){const g=At(c),v=g.xs.get(p);return v!==void 0?W.resolve(g.Ms.get(v)):g.Pi.getTargetData(h,p)})(r,o,Mr(t)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,t,e?i:It.min(),e?a:jt()))).next((l=>(Rb(r,M3(t),l),{documents:l,Qs:a})))))}function Cb(n,t){const e=At(n),r=At(e.Pi),i=e.Ms.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,t).next((o=>o?o.target:null))))}function bb(n,t){const e=At(n),r=e.Os.get(t)||It.min();return e.persistence.runTransaction("Get new document changes","readonly",(i=>e.Ns.getAllFromCollectionGroup(i,t,ZC(r,Ll),Number.MAX_SAFE_INTEGER))).then((i=>(Rb(e,t,i),i)))}function Rb(n,t,e){let r=n.Os.get(t)||It.min();e.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(t,r)}const Db="firestore_clients";function VT(n,t){return`${Db}_${n}_${t}`}const Ob="firestore_mutations";function LT(n,t,e){let r=`${Ob}_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const Nb="firestore_targets";function Km(n,t){return`${Nb}_${n}_${t}`}const Ki="SharedClientState";class I1{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Ws(t,e,r){const i=JSON.parse(r);let a,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(a=new pt(i.error.code,i.error.message))),o?new I1(t,e,i.state,a):(Ye(Ki,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class $f{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new pt(r.error.code,r.error.message))),a?new $f(t,r.state,i):(Ye(Ki,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class C1{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=s_();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=r3(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new C1(t,a):(Ye(Ki,`Failed to parse client data for instance '${t}': ${e}`),null)}}class x_{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new x_(e.clientId,e.onlineState):(Ye(Ki,`Failed to parse online state: ${t}`),null)}}class $y{constructor(){this.activeTargetIds=s_()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Xm{constructor(t,e,r,i,a){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Ce(Pt),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=VT(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new $y),this.ro=new RegExp(`^${Db}_${o}_([^_]*)$`),this.io=new RegExp(`^${Ob}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Nb}_${o}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const i=this.getItem(VT(this.persistenceKey,r));if(i){const a=C1.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(Km(this.persistenceKey,t));if(i){const a=$f.Ws(t,i);a&&(r=a.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Km(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((i=>{this.Po(i)})),this.currentUser=t,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return ct(Ki,"READ",t,e),e}setItem(t,e){ct(Ki,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){ct(Ki,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(ct(Ki,"EVENT",e.key,e.newValue),e.key===this.eo)return void Ye("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(a){let o=vr.ce;if(a!=null)try{const l=JSON.parse(a);Tt(typeof l=="number",30636,{So:a}),o=l}catch(l){Ye(Ki,"Failed to read sequence number from WebStorage",l)}return o})(e.newValue);r!==vr.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const i=new I1(this.currentUser,t,e,r),a=LT(this.persistenceKey,this.currentUser,t);this.setItem(a,i.Gs())}Po(t){const e=LT(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const i=Km(this.persistenceKey,t),a=new $f(t,e,r);this.setItem(i,a.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return C1.Ws(r,e)}fo(t,e){const r=this.io.exec(t),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return I1.Ws(new Kn(a),i,e)}yo(t,e){const r=this.so.exec(t),i=Number(r[1]);return $f.Ws(i,e)}uo(t){return x_.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);ct(Ki,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),i=this.lo(this.Zs),a=this.lo(r),o=[],l=[];return a.forEach((c=>{i.has(c)||o.push(c)})),i.forEach((c=>{a.has(c)||l.push(c)})),this.syncEngine.Fo(o,l).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=s_();return t.forEach(((r,i)=>{e=e.unionWith(i.activeTargetIds)})),e}}class Pb{constructor(){this.Mo=new $y,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new $y,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class gM{Oo(t){}shutdown(){}}const kT="ConnectivityMonitor";class BT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ct(kT,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){ct(kT,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let I0=null;function Qy(){return I0===null?I0=(function(){return 268435456+Math.round(2147483648*Math.random())})():I0++,"0x"+I0.toString(16)}const Wm="RestConnection",mM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yM{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===g1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(t,e,r,i,a){const o=Qy(),l=this.zo(t,e.toUriEncodedString());ct(Wm,`Sending RPC '${t}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:h}=new URL(l),p=tc(h);return this.Jo(t,l,c,r,p).then((g=>(ct(Wm,`Received RPC '${t}' ${o}: `,g),g)),(g=>{throw ih(Wm,`RPC '${t}' ${o} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(t,e,r,i,a,o){return this.Go(t,e,r,i,a)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((i,a)=>t[a]=i)),r&&r.headers.forEach(((i,a)=>t[a]=i))}zo(t,e){const r=mM[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}class vM{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const Gn="WebChannelConnection";class _M extends yM{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,i,a){const o=Qy();return new Promise(((l,c)=>{const h=new HC;h.setWithCredentials(!0),h.listenOnce(GC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case B0.NO_ERROR:const g=h.getResponseJson();ct(Gn,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(g)),l(g);break;case B0.TIMEOUT:ct(Gn,`RPC '${t}' ${o} timed out`),c(new pt(at.DEADLINE_EXCEEDED,"Request time out"));break;case B0.HTTP_ERROR:const v=h.getStatus();if(ct(Gn,`RPC '${t}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const A=x?.error;if(A&&A.status&&A.message){const S=(function(O){const D=O.toLowerCase().replace(/_/g,"-");return Object.values(at).indexOf(D)>=0?D:at.UNKNOWN})(A.status);c(new pt(S,A.message))}else c(new pt(at.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new pt(at.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ct(Gn,`RPC '${t}' ${o} completed.`)}}));const p=JSON.stringify(i);ct(Gn,`RPC '${t}' ${o} sending request:`,i),h.send(e,"POST",p,r,15)}))}T_(t,e,r){const i=Qy(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=XC(),l=KC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,e,r),c.encodeInitMessageHeaders=!0;const p=a.join("");ct(Gn,`Creating RPC '${t}' stream ${i}: ${p}`,c);const g=o.createWebChannel(p,c);this.I_(g);let v=!1,x=!1;const A=new vM({Yo:C=>{x?ct(Gn,`Not sending because RPC '${t}' stream ${i} is closed:`,C):(v||(ct(Gn,`Opening RPC '${t}' stream ${i} transport.`),g.open(),v=!0),ct(Gn,`RPC '${t}' stream ${i} sending:`,C),g.send(C))},Zo:()=>g.close()}),S=(C,O,D)=>{C.listen(O,(P=>{try{D(P)}catch(k){setTimeout((()=>{throw k}),0)}}))};return S(g,Of.EventType.OPEN,(()=>{x||(ct(Gn,`RPC '${t}' stream ${i} transport opened.`),A.o_())})),S(g,Of.EventType.CLOSE,(()=>{x||(x=!0,ct(Gn,`RPC '${t}' stream ${i} transport closed`),A.a_(),this.E_(g))})),S(g,Of.EventType.ERROR,(C=>{x||(x=!0,ih(Gn,`RPC '${t}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),A.a_(new pt(at.UNAVAILABLE,"The operation could not be completed")))})),S(g,Of.EventType.MESSAGE,(C=>{if(!x){const O=C.data[0];Tt(!!O,16349);const D=O,P=D?.error||D[0]?.error;if(P){ct(Gn,`RPC '${t}' stream ${i} received error:`,P);const k=P.status;let j=(function(I){const M=un[I];if(M!==void 0)return X3(M)})(k),K=P.message;j===void 0&&(j=at.INTERNAL,K="Unknown error status: "+k+" with message "+P.message),x=!0,A.a_(new pt(j,K)),g.close()}else ct(Gn,`RPC '${t}' stream ${i} received:`,O),A.u_(O)}})),S(l,qC.STAT_EVENT,(C=>{C.stat===by.PROXY?ct(Gn,`RPC '${t}' stream ${i} detected buffering proxy`):C.stat===by.NOPROXY&&ct(Gn,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function Mb(){return typeof window<"u"?window:null}function W0(){return typeof document<"u"?document:null}function lp(n){return new SP(n,!0)}class Vb{constructor(t,e,r=1e3,i=1.5,a=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,e-r);i>0&&ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const FT="PersistentStream";class Lb{constructor(t,e,r,i,a,o,l,c){this.Mi=t,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vb(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===at.RESOURCE_EXHAUSTED?(Ye(e.toString()),Ye("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===at.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===e&&this.G_(r,i)}),(r=>{t((()=>{const i=new pt(at.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return ct(FT,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(ct(FT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xM extends Lb{constructor(t,e,r,i,a,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,o),this.serializer=a}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=bP(this.serializer,t),r=(function(a){if(!("targetChange"in a))return It.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?It.min():o.readTime?or(o.readTime):It.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=Gy(this.serializer),e.addTarget=(function(a,o){let l;const c=o.target;if(l=y1(c)?{documents:eb(a,c)}:{query:nb(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=$3(a,o.resumeToken);const h=jy(a,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(It.min())>0){l.readTime=Xl(a,o.snapshotVersion.toTimestamp());const h=jy(a,o.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,t);const r=DP(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=Gy(this.serializer),e.removeTarget=t,this.q_(e)}}class EM extends Lb{constructor(t,e,r,i,a,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return Tt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Tt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Tt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=RP(t.writeResults,t.commitTime),r=or(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=Gy(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>x1(this.serializer,r)))};this.q_(e)}}class AM{}class wM extends AM{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new pt(at.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Go(t,Hy(e,r),i,a,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pt(at.UNKNOWN,a.toString())}))}Ho(t,e,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(t,Hy(e,r),i,o,l,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pt(at.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class TM{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ye(e),this.aa=!1):ct("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const du="RemoteStore";class SM{constructor(t,e,r,i,a){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{yu(this)&&(ct(du,"Restarting streams for network reachability change."),await(async function(c){const h=At(c);h.Ea.add(4),await Mh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await cp(h)})(this))}))})),this.Ra=new TM(r,i)}}async function cp(n){if(yu(n))for(const t of n.da)await t(!0)}async function Mh(n){for(const t of n.da)await t(!1)}function fp(n,t){const e=At(n);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),w_(e)?A_(e):ac(e).O_()&&E_(e,t))}function Yl(n,t){const e=At(n),r=ac(e);e.Ia.delete(t),r.O_()&&kb(e,t),e.Ia.size===0&&(r.O_()?r.L_():yu(e)&&e.Ra.set("Unknown"))}function E_(n,t){if(n.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(It.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ac(n).Y_(t)}function kb(n,t){n.Va.Ue(t),ac(n).Z_(t)}function A_(n){n.Va=new EP({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),At:t=>n.Ia.get(t)||null,ht:()=>n.datastore.serializer.databaseId}),ac(n).start(),n.Ra.ua()}function w_(n){return yu(n)&&!ac(n).x_()&&n.Ia.size>0}function yu(n){return At(n).Ea.size===0}function Bb(n){n.Va=void 0}async function IM(n){n.Ra.set("Online")}async function CM(n){n.Ia.forEach(((t,e)=>{E_(n,t)}))}async function bM(n,t){Bb(n),w_(n)?(n.Ra.ha(t),A_(n)):n.Ra.set("Unknown")}async function RM(n,t,e){if(n.Ra.set("Online"),t instanceof Y3&&t.state===2&&t.cause)try{await(async function(i,a){const o=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))})(n,t)}catch(r){ct(du,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await b1(n,r)}else if(t instanceof K0?n.Va.Ze(t):t instanceof W3?n.Va.st(t):n.Va.tt(t),!e.isEqual(It.min()))try{const r=await Ib(n.localStore);e.compareTo(r)>=0&&await(function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,h)=>{const p=a.Ia.get(c);if(!p)return;a.Ia.set(c,p.withResumeToken(Qe.EMPTY_BYTE_STRING,p.snapshotVersion)),kb(a,c);const g=new Ta(p.target,c,h,p.sequenceNumber);E_(a,g)})),a.remoteSyncer.applyRemoteEvent(l)})(n,e)}catch(r){ct(du,"Failed to raise snapshot:",r),await b1(n,r)}}async function b1(n,t,e){if(!Qs(t))throw t;n.Ea.add(1),await Mh(n),n.Ra.set("Offline"),e||(e=()=>Ib(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ct(du,"Retrying IndexedDB access"),await e(),n.Ea.delete(1),await cp(n)}))}function Fb(n,t){return t().catch((e=>b1(n,e,t)))}async function ic(n){const t=At(n),e=Ks(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Qo;for(;DM(t);)try{const i=await pM(t.localStore,r);if(i===null){t.Ta.length===0&&e.L_();break}r=i.batchId,OM(t,i)}catch(i){await b1(t,i)}Ub(t)&&zb(t)}function DM(n){return yu(n)&&n.Ta.length<10}function OM(n,t){n.Ta.push(t);const e=Ks(n);e.O_()&&e.X_&&e.ea(t.mutations)}function Ub(n){return yu(n)&&!Ks(n).x_()&&n.Ta.length>0}function zb(n){Ks(n).start()}async function NM(n){Ks(n).ra()}async function PM(n){const t=Ks(n);for(const e of n.Ta)t.ea(e.mutations)}async function MM(n,t,e){const r=n.Ta.shift(),i=l_.from(r,t,e);await Fb(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await ic(n)}async function VM(n,t){t&&Ks(n).X_&&await(async function(r,i){if((function(o){return vP(o)&&o!==at.ABORTED})(i.code)){const a=r.Ta.shift();Ks(r).B_(),await Fb(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await ic(r)}})(n,t),Ub(n)&&zb(n)}async function UT(n,t){const e=At(n);e.asyncQueue.verifyOperationInProgress(),ct(du,"RemoteStore received new credentials");const r=yu(e);e.Ea.add(3),await Mh(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await cp(e)}async function Zy(n,t){const e=At(n);t?(e.Ea.delete(2),await cp(e)):t||(e.Ea.add(2),await Mh(e),e.Ra.set("Unknown"))}function ac(n){return n.ma||(n.ma=(function(e,r,i){const a=At(e);return a.sa(),new xM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:IM.bind(null,n),t_:CM.bind(null,n),r_:bM.bind(null,n),H_:RM.bind(null,n)}),n.da.push((async t=>{t?(n.ma.B_(),w_(n)?A_(n):n.Ra.set("Unknown")):(await n.ma.stop(),Bb(n))}))),n.ma}function Ks(n){return n.fa||(n.fa=(function(e,r,i){const a=At(e);return a.sa(),new EM(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:NM.bind(null,n),r_:VM.bind(null,n),ta:PM.bind(null,n),na:MM.bind(null,n)}),n.da.push((async t=>{t?(n.fa.B_(),await ic(n)):(await n.fa.stop(),n.Ta.length>0&&(ct(du,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class T_{constructor(t,e,r,i,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,a){const o=Date.now()+r,l=new T_(t,e,o,i,a);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(at.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S_(n,t){if(Ye("AsyncQueue",`${t}: ${n}`),Qs(n))return new pt(at.UNAVAILABLE,`${t}: ${n}`);throw n}class bl{static emptySet(t){return new bl(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||gt.comparator(e.key,r.key):(e,r)=>gt.comparator(e.key,r.key),this.keyedMap=Nf(),this.sortedSet=new Ce(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof bl)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new bl;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class zT{constructor(){this.ga=new Ce(gt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class $l{constructor(t,e,r,i,a,o,l,c,h){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,e,r,i,a){const o=[];return e.forEach((l=>{o.push({type:0,doc:l})})),new $l(t,e,bl.emptySet(e),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&np(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class LM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class kM{constructor(){this.queries=jT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const i=At(e),a=i.queries;i.queries=jT(),a.forEach(((o,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new pt(at.ABORTED,"Firestore shutting down"))}}function jT(){return new ka((n=>P3(n)),np)}async function BM(n,t){const e=At(n);let r=3;const i=t.query;let a=e.queries.get(i);a?!a.ba()&&t.Da()&&(r=2):(a=new LM,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await e.onListen(i,!0);break;case 1:a.wa=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(o){const l=S_(o,`Initialization of query '${ml(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,a),a.Sa.push(t),t.va(e.onlineState),a.wa&&t.Fa(a.wa)&&I_(e)}async function FM(n,t){const e=At(n),r=t.query;let i=3;const a=e.queries.get(r);if(a){const o=a.Sa.indexOf(t);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=t.Da()?0:1:!a.ba()&&t.Da()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function UM(n,t){const e=At(n);let r=!1;for(const i of t){const a=i.query,o=e.queries.get(a);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&I_(e)}function zM(n,t,e){const r=At(n),i=r.queries.get(t);if(i)for(const a of i.Sa)a.onError(e);r.queries.delete(t)}function I_(n){n.Ca.forEach((t=>{t.next()}))}var Jy,HT;(HT=Jy||(Jy={})).Ma="default",HT.Cache="cache";class jM{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new $l(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=$l.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Jy.Cache}}class jb{constructor(t){this.key=t}}class Hb{constructor(t){this.key=t}}class HM{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jt(),this.mutatedKeys=jt(),this.eu=V3(t),this.tu=new bl(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new zT,i=e?e.tu:this.tu;let a=e?e.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((p,g)=>{const v=i.get(p),x=Oh(this.query,g)?g:null,A=!!v&&this.mutatedKeys.has(v.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;v&&x?v.data.isEqual(x.data)?A!==S&&(r.track({type:3,doc:x}),C=!0):this.su(v,x)||(r.track({type:2,doc:x}),C=!0,(c&&this.eu(x,c)>0||h&&this.eu(x,h)<0)&&(l=!0)):!v&&x?(r.track({type:0,doc:x}),C=!0):v&&!x&&(r.track({type:1,doc:v}),C=!0,(c||h)&&(l=!0)),C&&(x?(o=o.add(x),a=S?a.add(p):a.delete(p)):(o=o.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Cs:l,mutatedKeys:a}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const a=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const o=t.iu.ya();o.sort(((p,g)=>(function(x,A){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:C})}};return S(x)-S(A)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const l=e&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new $l(this.query,t.tu,a,o,t.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=jt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new Hb(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new jb(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=jt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sc="SyncEngine";class GM{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class qM{constructor(t){this.key=t,this.hu=!1}}class KM{constructor(t,e,r,i,a,o){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ka((l=>P3(l)),np),this.Iu=new Map,this.Eu=new Set,this.du=new Ce(gt.comparator),this.Au=new Map,this.Ru=new g_,this.Vu={},this.mu=new Map,this.fu=hu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XM(n,t,e=!0){const r=hp(n);let i;const a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await Gb(r,t,e,!0),i}async function WM(n,t){const e=hp(n);await Gb(e,t,!0,!1)}async function Gb(n,t,e,r){const i=await S1(n.localStore,Mr(t)),a=i.targetId,o=n.sharedClientState.addLocalQueryTarget(a,e);let l;return r&&(l=await C_(n,t,a,o==="current",i.resumeToken)),n.isPrimaryClient&&e&&fp(n.remoteStore,i),l}async function C_(n,t,e,r,i){n.pu=(g,v,x)=>(async function(S,C,O,D){let P=C.view.ru(O);P.Cs&&(P=await Yy(S.localStore,C.query,!1).then((({documents:R})=>C.view.ru(R,P))));const k=D&&D.targetChanges.get(C.targetId),j=D&&D.targetMismatches.get(C.targetId)!=null,K=C.view.applyChanges(P,S.isPrimaryClient,k,j);return tv(S,C.targetId,K.au),K.snapshot})(n,g,v,x);const a=await Yy(n.localStore,t,!0),o=new HM(t,a.Qs),l=o.ru(a.documents),c=Ph.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),h=o.applyChanges(l,n.isPrimaryClient,c);tv(n,e,h.au);const p=new GM(t,e,o);return n.Tu.set(t,p),n.Iu.has(e)?n.Iu.get(e).push(t):n.Iu.set(e,[t]),h.snapshot}async function YM(n,t,e){const r=At(n),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((o=>!np(o,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wl(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Yl(r.remoteStore,i.targetId),Ql(r,i.targetId)})).catch($s)):(Ql(r,i.targetId),await Wl(r.localStore,i.targetId,!0))}async function $M(n,t){const e=At(n),r=e.Tu.get(t),i=e.Iu.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Yl(e.remoteStore,r.targetId))}async function QM(n,t,e){const r=O_(n);try{const i=await(function(o,l){const c=At(o),h=ye.now(),p=l.reduce(((x,A)=>x.add(A.key)),jt());let g,v;return c.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let A=Pr(),S=jt();return c.Ns.getEntries(x,p).next((C=>{A=C,A.forEach(((O,D)=>{D.isValidDocument()||(S=S.add(O))}))})).next((()=>c.localDocuments.getOverlayedDocuments(x,A))).next((C=>{g=C;const O=[];for(const D of l){const P=mP(D,g.get(D.key).overlayedDocument);P!=null&&O.push(new Ba(D.key,P,w3(P.value.mapValue),$n.exists(!0)))}return c.mutationQueue.addMutationBatch(x,h,O,l)})).next((C=>{v=C;const O=C.applyToLocalDocumentSet(g,S);return c.documentOverlayCache.saveOverlays(x,C.batchId,O)}))})).then((()=>({batchId:v.batchId,changes:k3(g)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),(function(o,l,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ce(Pt)),h=h.insert(l,c),o.Vu[o.currentUser.toKey()]=h})(r,i.batchId,e),await Js(r,i.changes),await ic(r.remoteStore)}catch(i){const a=S_(i,"Failed to persist write");e.reject(a)}}async function qb(n,t){const e=At(n);try{const r=await hM(e.localStore,t);t.targetChanges.forEach(((i,a)=>{const o=e.Au.get(a);o&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Tt(o.hu,14607):i.removedDocuments.size>0&&(Tt(o.hu,42227),o.hu=!1))})),await Js(e,r,t)}catch(r){await $s(r)}}function GT(n,t,e){const r=At(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Tu.forEach(((a,o)=>{const l=o.view.va(t);l.snapshot&&i.push(l.snapshot)})),(function(o,l){const c=At(o);c.onlineState=l;let h=!1;c.queries.forEach(((p,g)=>{for(const v of g.Sa)v.va(l)&&(h=!0)})),h&&I_(c)})(r.eventManager,t),i.length&&r.Pu.H_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ZM(n,t,e){const r=At(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Au.get(t),a=i&&i.key;if(a){let o=new Ce(gt.comparator);o=o.insert(a,Ge.newNoDocument(a,It.min()));const l=jt().add(a),c=new Nh(It.min(),new Map,new Ce(Pt),o,l);await qb(r,c),r.du=r.du.remove(a),r.Au.delete(t),D_(r)}else await Wl(r.localStore,t,!1).then((()=>Ql(r,t,e))).catch($s)}async function JM(n,t){const e=At(n),r=t.batch.batchId;try{const i=await fM(e.localStore,t);R_(e,r,null),b_(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Js(e,i)}catch(i){await $s(i)}}async function t9(n,t,e){const r=At(n);try{const i=await(function(o,l){const c=At(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next((g=>(Tt(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>c.localDocuments.getDocuments(h,p)))}))})(r.localStore,t);R_(r,t,e),b_(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Js(r,i)}catch(i){await $s(i)}}function b_(n,t){(n.mu.get(t)||[]).forEach((e=>{e.resolve()})),n.mu.delete(t)}function R_(n,t,e){const r=At(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(e?a.reject(e):a.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Ql(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Iu.get(t))n.Tu.delete(r),e&&n.Pu.yu(r,e);n.Iu.delete(t),n.isPrimaryClient&&n.Ru.jr(t).forEach((r=>{n.Ru.containsKey(r)||Kb(n,r)}))}function Kb(n,t){n.Eu.delete(t.path.canonicalString());const e=n.du.get(t);e!==null&&(Yl(n.remoteStore,e),n.du=n.du.remove(t),n.Au.delete(e),D_(n))}function tv(n,t,e){for(const r of e)r instanceof jb?(n.Ru.addReference(r.key,t),e9(n,r)):r instanceof Hb?(ct(sc,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,t),n.Ru.containsKey(r.key)||Kb(n,r.key)):_t(19791,{wu:r})}function e9(n,t){const e=t.key,r=e.path.canonicalString();n.du.get(e)||n.Eu.has(r)||(ct(sc,"New document in limbo: "+e),n.Eu.add(r),D_(n))}function D_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const t=n.Eu.values().next().value;n.Eu.delete(t);const e=new gt(ce.fromString(t)),r=n.fu.next();n.Au.set(r,new qM(e)),n.du=n.du.insert(e,r),fp(n.remoteStore,new Ta(Mr(ep(e.path)),r,"TargetPurposeLimboResolution",vr.ce))}}async function Js(n,t,e){const r=At(n),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{o.push(r.pu(c,t,e).then((h=>{if((h||e)&&r.isPrimaryClient){const p=h?!h.fromCache:e?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){i.push(h);const p=v_.As(c.targetId,h);a.push(p)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(c,h){const p=At(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>W.forEach(h,(v=>W.forEach(v.Es,(x=>p.persistence.referenceDelegate.addReference(g,v.targetId,x))).next((()=>W.forEach(v.ds,(x=>p.persistence.referenceDelegate.removeReference(g,v.targetId,x)))))))))}catch(g){if(!Qs(g))throw g;ct(__,"Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const x=p.Ms.get(v),A=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(v,S)}}})(r.localStore,a))}async function n9(n,t){const e=At(n);if(!e.currentUser.isEqual(t)){ct(sc,"User change. New user:",t.toKey());const r=await Sb(e.localStore,t);e.currentUser=t,(function(a,o){a.mu.forEach((l=>{l.forEach((c=>{c.reject(new pt(at.CANCELLED,o))}))})),a.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Js(e,r.Ls)}}function r9(n,t){const e=At(n),r=e.Au.get(t);if(r&&r.hu)return jt().add(r.key);{let i=jt();const a=e.Iu.get(t);if(!a)return i;for(const o of a){const l=e.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}async function i9(n,t){const e=At(n),r=await Yy(e.localStore,t.query,!0),i=t.view.cu(r);return e.isPrimaryClient&&tv(e,t.targetId,i.au),i}async function a9(n,t){const e=At(n);return bb(e.localStore,t).then((r=>Js(e,r)))}async function s9(n,t,e,r){const i=At(n),a=await(function(l,c){const h=At(l),p=At(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>p.er(g,c).next((v=>v?h.localDocuments.getDocuments(g,v):W.resolve(null)))))})(i.localStore,t);a!==null?(e==="pending"?await ic(i.remoteStore):e==="acknowledged"||e==="rejected"?(R_(i,t,r||null),b_(i,t),(function(l,c){At(At(l).mutationQueue).ir(c)})(i.localStore,t)):_t(6720,"Unknown batchState",{Su:e}),await Js(i,a)):ct(sc,"Cannot apply mutation batch with id: "+t)}async function o9(n,t){const e=At(n);if(hp(e),O_(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),i=await qT(e,r.toArray());e.gu=!0,await Zy(e.remoteStore,!0);for(const a of i)fp(e.remoteStore,a)}else if(t===!1&&e.gu!==!1){const r=[];let i=Promise.resolve();e.Iu.forEach(((a,o)=>{e.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then((()=>(Ql(e,o),Wl(e.localStore,o,!0)))),Yl(e.remoteStore,o)})),await i,await qT(e,r),(function(o){const l=At(o);l.Au.forEach(((c,h)=>{Yl(l.remoteStore,h)})),l.Ru.Jr(),l.Au=new Map,l.du=new Ce(gt.comparator)})(e),e.gu=!1,await Zy(e.remoteStore,!1)}}async function qT(n,t,e){const r=At(n),i=[],a=[];for(const o of t){let l;const c=r.Iu.get(o);if(c&&c.length!==0){l=await S1(r.localStore,Mr(c[0]));for(const h of c){const p=r.Tu.get(h),g=await i9(r,p);g.snapshot&&a.push(g.snapshot)}}else{const h=await Cb(r.localStore,o);l=await S1(r.localStore,h),await C_(r,Xb(h),o,!1,l.resumeToken)}i.push(l)}return r.Pu.H_(a),i}function Xb(n){return O3(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function u9(n){return(function(e){return At(At(e).persistence).Ts()})(At(n).localStore)}async function l9(n,t,e,r){const i=At(n);if(i.gu)return void ct(sc,"Ignoring unexpected query state notification.");const a=i.Iu.get(t);if(a&&a.length>0)switch(e){case"current":case"not-current":{const o=await bb(i.localStore,M3(a[0])),l=Nh.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Qe.EMPTY_BYTE_STRING);await Js(i,o,l);break}case"rejected":await Wl(i.localStore,t,!0),Ql(i,t,r);break;default:_t(64155,e)}}async function c9(n,t,e){const r=hp(n);if(r.gu){for(const i of t){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ct(sc,"Adding an already active target "+i);continue}const a=await Cb(r.localStore,i),o=await S1(r.localStore,a);await C_(r,Xb(a),o.targetId,!1,o.resumeToken),fp(r.remoteStore,o)}for(const i of e)r.Iu.has(i)&&await Wl(r.localStore,i,!1).then((()=>{Yl(r.remoteStore,i),Ql(r,i)})).catch($s)}}function hp(n){const t=At(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=qb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=r9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZM.bind(null,t),t.Pu.H_=UM.bind(null,t.eventManager),t.Pu.yu=zM.bind(null,t.eventManager),t}function O_(n){const t=At(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=t9.bind(null,t),t}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=lp(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return Tb(this.persistence,new wb,t.initialUser,this.serializer)}Cu(t){return new m_(up.mi,this.serializer)}Du(t){return new Pb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class f9 extends mh{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){Tt(this.persistence.referenceDelegate instanceof T1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yb(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new m_((r=>T1.mi(r,e)),this.serializer)}}class Wb extends mh{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await O_(this.xu.syncEngine),await ic(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return Tb(this.persistence,new wb,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new yb(r,t.asyncQueue,e)}Mu(t,e){const r=new vN(e,this.persistence);return new yN(t.asyncQueue,r)}Cu(t){const e=Ab(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new y_(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,Mb(),W0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new Pb}}class h9 extends Wb{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Xm&&(this.sharedClientState.syncEngine={Co:s9.bind(null,e),vo:l9.bind(null,e),Fo:c9.bind(null,e),Ts:u9.bind(null,e),Do:a9.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await o9(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=Mb();if(!Xm.v(e))throw new pt(at.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ab(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Xm(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class yh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>GT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n9.bind(null,this.syncEngine),await Zy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new kM})()}createDatastore(t){const e=lp(t.databaseInfo.databaseId),r=(function(a){return new _M(a)})(t.databaseInfo);return(function(a,o,l,c){return new wM(a,o,l,c)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,i,a,o,l){return new SM(r,i,a,o,l)})(this.localStore,this.datastore,t.asyncQueue,(e=>GT(this.syncEngine,e,0)),(function(){return BT.v()?new BT:new gM})())}createSyncEngine(t,e){return(function(i,a,o,l,c,h,p){const g=new KM(i,a,o,l,c,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=At(e);ct(du,"RemoteStore shutting down."),r.Ea.add(5),await Mh(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}yh.provider={build:()=>new yh};class d9{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ye("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const Xs="FirestoreClient";class p9{constructor(t,e,r,i,a){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Kn.UNAUTHENTICATED,this.clientId=Yv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async o=>{ct(Xs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ct(Xs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=S_(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Ym(n,t){n.asyncQueue.verifyOperationInProgress(),ct(Xs,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Sb(t.localStore,i),r=i)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function KT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await g9(n);ct(Xs,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((r=>UT(t.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>UT(t.remoteStore,i))),n._onlineComponents=t}async function g9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ct(Xs,"Using user provided OfflineComponentProvider");try{await Ym(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(i){return i.name==="FirebaseError"?i.code===at.FAILED_PRECONDITION||i.code===at.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(e))throw e;ih("Error using user provided cache. Falling back to memory cache: "+e),await Ym(n,new mh)}}else ct(Xs,"Using default OfflineComponentProvider"),await Ym(n,new f9(void 0));return n._offlineComponents}async function Yb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ct(Xs,"Using user provided OnlineComponentProvider"),await KT(n,n._uninitializedComponentsProvider._online)):(ct(Xs,"Using default OnlineComponentProvider"),await KT(n,new yh))),n._onlineComponents}function m9(n){return Yb(n).then((t=>t.syncEngine))}async function XT(n){const t=await Yb(n),e=t.eventManager;return e.onListen=XM.bind(null,t.syncEngine),e.onUnlisten=YM.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=WM.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=$M.bind(null,t.syncEngine),e}function $b(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}const WT=new Map;const y9="firestore.googleapis.com",YT=!0;class $T{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new pt(at.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y9,this.ssl=YT}else this.host=t.host,this.ssl=t.ssl??YT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=hb;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mb)throw new pt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pN("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$b(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class N_{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(at.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(at.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $T(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new aN;switch(r.type){case"firstParty":return new uN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pt(at.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=WT.get(e);r&&(ct("ComponentProvider","Removing Datastore"),WT.delete(e),r.terminate())})(this),Promise.resolve()}}class oc{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new oc(this.firestore,t,this._query)}}class $e{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new $e(this.firestore,t,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Ch(e,$e._jsonSchema))return new $e(t,r||null,new gt(ce.fromString(e.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:cn("string",$e._jsonSchemaVersion),referencePath:cn("string")};class zs extends oc{constructor(t,e,r){super(t,e,ep(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new $e(this.firestore,null,new gt(t))}withConverter(t){return new zs(this.firestore,t,this._path)}}function tu(n,t,...e){if(n=On(n),$C("collection","path",t),n instanceof N_){const r=ce.fromString(t,...e);return Fw(r),new zs(n,null,r)}{if(!(n instanceof $e||n instanceof zs))throw new pt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ce.fromString(t,...e));return Fw(r),new zs(n.firestore,null,r)}}function Ws(n,t,...e){if(n=On(n),arguments.length===1&&(t=Yv.newId()),$C("doc","path",t),n instanceof N_){const r=ce.fromString(t,...e);return Bw(r),new $e(n,null,new gt(r))}{if(!(n instanceof $e||n instanceof zs))throw new pt(at.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ce.fromString(t,...e));return Bw(r),new $e(n.firestore,n instanceof zs?n.converter:null,new gt(r))}}const QT="AsyncQueue";class ZT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vb(this,"async_queue_retry"),this._c=()=>{const r=W0();r&&ct(QT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=W0();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=W0();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new Fs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Qs(t))throw t;ct(QT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Ye("INTERNAL UNHANDLED ERROR: ",JT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const i=T_.createAndSchedule(this,t,e,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&_t(47125,{Pc:JT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function JT(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}function tS(n){return(function(e,r){if(typeof e!="object"||e===null)return!1;const i=e;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class pu extends N_{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new ZT,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ZT(t),this._firestoreClient=void 0,await t}}}function v9(n,t,e){e||(e=g1);const r=Xv(n,"firestore");if(r.isInitialized(e)){const i=r.getImmediate({identifier:e}),a=r.getOptions(e);if(au(a,t))return i;throw new pt(at.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new pt(at.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mb)throw new pt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&tc(t.host)&&NC(t.host),r.initialize({options:t,instanceIdentifier:e})}function Qb(n){if(n._terminated)throw new pt(at.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_9(n),n._firestoreClient}function _9(n){const t=n._freezeSettings(),e=(function(i,a,o,l){return new KN(i,a,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,$b(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,t);n._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),n._firestoreClient=new p9(n._authCredentials,n._appCheckCredentials,n._queue,e,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}class Qr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Qr(Qe.fromBase64String(t))}catch(e){throw new pt(at.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Qr(Qe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Qr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Ch(t,Qr._jsonSchema))return Qr.fromBase64String(t.bytes)}}Qr._jsonSchemaVersion="firestore/bytes/1.0",Qr._jsonSchema={type:cn("string",Qr._jsonSchemaVersion),bytes:cn("string")};class dp{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new pt(at.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class P_{constructor(t){this._methodName=t}}class $i{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new pt(at.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new pt(at.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Pt(this._lat,t._lat)||Pt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(t){if(Ch(t,$i._jsonSchema))return new $i(t.latitude,t.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:cn("string",$i._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};class Qi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Ch(t,Qi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Qi(t.vectorValues);throw new pt(at.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:cn("string",Qi._jsonSchemaVersion),vectorValues:cn("object")};const x9=/^__.*__$/;class E9{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Ba(t,this.data,this.fieldMask,e,this.fieldTransforms):new rc(t,this.data,e,this.fieldTransforms)}}class Zb{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Ba(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Jb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:n})}}class M_{constructor(t,e,r,i,a,o){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new M_({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return R1(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Jb(this.Ac)&&x9.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class A9{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||lp(t)}Cc(t,e,r,i=!1){return new M_({Ac:t,methodName:e,Dc:r,path:Be.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pp(n){const t=n._freezeSettings(),e=lp(n._databaseId);return new A9(n._databaseId,!!t.ignoreUndefinedProperties,e)}function t4(n,t,e,r,i,a={}){const o=n.Cc(a.merge||a.mergeFields?2:0,t,e,i);V_("Data must be an object, but it was:",o,r);const l=e4(r,o);let c,h;if(a.merge)c=new _r(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const v=ev(t,g,e);if(!o.contains(v))throw new pt(at.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);r4(p,v)||p.push(v)}c=new _r(p),h=o.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,h=o.fieldTransforms;return new E9(new Yn(l),c,h)}class gp extends P_{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof gp}}function w9(n,t,e,r){const i=n.Cc(1,t,e);V_("Data must be an object, but it was:",i,r);const a=[],o=Yn.empty();Zs(r,((c,h)=>{const p=L_(t,c,e);h=On(h);const g=i.yc(p);if(h instanceof gp)a.push(p);else{const v=Vh(h,g);v!=null&&(a.push(p),o.set(p,v))}}));const l=new _r(a);return new Zb(o,l,i.fieldTransforms)}function T9(n,t,e,r,i,a){const o=n.Cc(1,t,e),l=[ev(t,r,e)],c=[i];if(a.length%2!=0)throw new pt(at.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<a.length;v+=2)l.push(ev(t,a[v])),c.push(a[v+1]);const h=[],p=Yn.empty();for(let v=l.length-1;v>=0;--v)if(!r4(h,l[v])){const x=l[v];let A=c[v];A=On(A);const S=o.yc(x);if(A instanceof gp)h.push(x);else{const C=Vh(A,S);C!=null&&(h.push(x),p.set(x,C))}}const g=new _r(h);return new Zb(p,g,o.fieldTransforms)}function S9(n,t,e,r=!1){return Vh(e,n.Cc(r?4:3,t))}function Vh(n,t){if(n4(n=On(n)))return V_("Unsupported field value:",t,n),e4(n,t);if(n instanceof P_)return(function(r,i){if(!Jb(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let o=0;for(const l of r){let c=Vh(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}})(n,t)}return(function(r,i){if((r=On(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ye.fromDate(r);return{timestampValue:Xl(i.serializer,a)}}if(r instanceof ye){const a=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,a)}}if(r instanceof $i)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:$3(i.serializer,r._byteString)};if(r instanceof $e){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:h_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qi)return(function(o,l){return{mapValue:{fields:{[r_]:{stringValue:i_},[zl]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return o_(l.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${X1(r)}`)})(n,t)}function e4(n,t){const e={};return p3(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zs(n,((r,i)=>{const a=Vh(i,t.mc(r));a!=null&&(e[r]=a)})),{mapValue:{fields:e}}}function n4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ye||n instanceof $i||n instanceof Qr||n instanceof $e||n instanceof P_||n instanceof Qi)}function V_(n,t,e){if(!n4(e)||!QC(e)){const r=X1(e);throw r==="an object"?t.Sc(n+" a custom object"):t.Sc(n+" "+r)}}function ev(n,t,e){if((t=On(t))instanceof dp)return t._internalPath;if(typeof t=="string")return L_(n,t);throw R1("Field path arguments must be of type string or ",n,!1,void 0,e)}const I9=new RegExp("[~\\*/\\[\\]]");function L_(n,t,e){if(t.search(I9)>=0)throw R1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new dp(...t.split("."))._internalPath}catch{throw R1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function R1(n,t,e,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new pt(at.INVALID_ARGUMENT,l+n+c)}function r4(n,t){return n.some((e=>e.isEqual(t)))}class i4{constructor(t,e,r,i,a){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new C9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(k_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class C9 extends i4{data(){return super.data()}}function k_(n,t){return typeof t=="string"?L_(n,t):t instanceof dp?t._internalPath:t._delegate._internalPath}function b9(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pt(at.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B_{}class R9 extends B_{}function F_(n,t,...e){let r=[];t instanceof B_&&r.push(t),r=r.concat(e),(function(a){const o=a.filter((c=>c instanceof z_)).length,l=a.filter((c=>c instanceof mp)).length;if(o>1||o>0&&l>0)throw new pt(at.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class mp extends R9{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new mp(t,e,r)}_apply(t){const e=this._parse(t);return a4(t._query,e),new oc(t.firestore,t.converter,Uy(t._query,e))}_parse(t){const e=pp(t.firestore);return(function(a,o,l,c,h,p,g){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new pt(at.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){nS(g,p);const A=[];for(const S of g)A.push(eS(c,a,S));v={arrayValue:{values:A}}}else v=eS(c,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||nS(g,p),v=S9(l,o,g,p==="in"||p==="not-in");return $t.create(h,p,v)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function U_(n,t,e){const r=t,i=k_("where",n);return mp._create(i,r,e)}class z_ extends B_{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new z_(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:ve.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)a4(o,c),o=Uy(o,c)})(t._query,e),new oc(t.firestore,t.converter,Uy(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function eS(n,t,e){if(typeof(e=On(e))=="string"){if(e==="")throw new pt(at.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N3(t)&&e.indexOf("/")!==-1)throw new pt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(ce.fromString(e));if(!gt.isDocumentKey(r))throw new pt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hh(n,new gt(r))}if(e instanceof $e)return hh(n,e._key);throw new pt(at.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${X1(e)}.`)}function nS(n,t){if(!Array.isArray(n)||n.length===0)throw new pt(at.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function a4(n,t){const e=(function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new pt(at.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pt(at.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class D9{convertValue(t,e="none"){switch(Gs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ke(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Da(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Zs(t,((i,a)=>{r[i]=this.convertValue(a,e)})),r}convertVectorValue(t){const e=t.fields?.[zl].arrayValue?.values?.map((r=>ke(r.doubleValue)));return new Qi(e)}convertGeoPoint(t){return new $i(ke(t.latitude),ke(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=J1(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ch(t));default:return null}}convertTimestamp(t){const e=Ra(t);return new ye(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=ce.fromString(t);Tt(sb(r),9688,{name:t});const i=new uu(r.get(1),r.get(3)),a=new gt(r.popFirst(5));return i.isEqual(e)||Ye(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}function s4(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class Vf{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class eu extends i4{constructor(t,e,r,i,a,o){super(t,e,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(k_("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pt(at.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=eu._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}eu._jsonSchemaVersion="firestore/documentSnapshot/1.0",eu._jsonSchema={type:cn("string",eu._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};class Y0 extends eu{data(t={}){return super.data(t)}}class Rl{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Vf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new Y0(this._firestore,this._userDataWriter,r.key,r,new Vf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new pt(at.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((l=>{const c=new Y0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Vf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const c=new Y0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Vf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:O9(l.type),doc:c,oldIndex:h,newIndex:p}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pt(at.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Rl._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Yv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(e.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function O9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:n})}}Rl._jsonSchemaVersion="firestore/querySnapshot/1.0",Rl._jsonSchema={type:cn("string",Rl._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class o4 extends D9{constructor(t){super(),this.firestore=t}convertBytes(t){return new Qr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new $e(this.firestore,null,e)}}function rS(n,t,e){n=Ca(n,$e);const r=Ca(n.firestore,pu),i=s4(n.converter,t,e);return vp(r,[t4(pp(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,$n.none())])}function u4(n,t,e,...r){n=Ca(n,$e);const i=Ca(n.firestore,pu),a=pp(i);let o;return o=typeof(t=On(t))=="string"||t instanceof dp?T9(a,"updateDoc",n._key,t,e,r):w9(a,"updateDoc",n._key,t),vp(i,[o.toMutation(n._key,$n.exists(!0))])}function j_(n){return vp(Ca(n.firestore,pu),[new ap(n._key,$n.none())])}function D1(n,t){const e=Ca(n.firestore,pu),r=Ws(n),i=s4(n.converter,t);return vp(e,[t4(pp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then((()=>r))}function yp(n,...t){n=On(n);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||tS(t[r])||(e=t[r++]);const i={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(tS(t[r])){const c=t[r];t[r]=c.next?.bind(c),t[r+1]=c.error?.bind(c),t[r+2]=c.complete?.bind(c)}let a,o,l;if(n instanceof $e)o=Ca(n.firestore,pu),l=ep(n._key.path),a={next:c=>{t[r]&&t[r](N9(o,n,c))},error:t[r+1],complete:t[r+2]};else{const c=Ca(n,oc);o=Ca(c.firestore,pu),l=c._query;const h=new o4(o);a={next:p=>{t[r]&&t[r](new Rl(o,h,c,p))},error:t[r+1],complete:t[r+2]},b9(n._query)}return(function(h,p,g,v){const x=new d9(v),A=new jM(p,x,g);return h.asyncQueue.enqueueAndForget((async()=>BM(await XT(h),A))),()=>{x.Nu(),h.asyncQueue.enqueueAndForget((async()=>FM(await XT(h),A)))}})(Qb(o),l,i,a)}function vp(n,t){return(function(r,i){const a=new Fs;return r.asyncQueue.enqueueAndForget((async()=>QM(await m9(r),i,a))),a.promise})(Qb(n),t)}function N9(n,t,e){const r=e.docs.get(t._key),i=new o4(n);return new eu(n,i,t._key,r,new Vf(e.hasPendingWrites,e.fromCache),t.converter)}class P9{constructor(t){let e;this.kind="persistent",t?.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=k9(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function M9(n){return new P9(n)}class V9{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=yh.provider,this._offlineComponentProvider={build:e=>new Wb(e,t?.cacheSizeBytes,this.forceOwnership)}}}class L9{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=yh.provider,this._offlineComponentProvider={build:e=>new h9(e,t?.cacheSizeBytes)}}}function k9(n){return new V9(n?.forceOwnership)}function B9(){return new L9}(function(t,e=!0){(function(i){nc=i})(ec),Ml(new su("firestore",((r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new pu(new sN(r.getProvider("auth-internal")),new lN(o,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pt(at.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(h.options.projectId,p)})(o,i),o);return a={useFetchStreams:e,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),ks(Mw,Vw,t),ks(Mw,Vw,"esm2020")})();function l4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const F9=l4,c4=new Sh("auth","Firebase",l4());const O1=new qv("@firebase/auth");function U9(n,...t){O1.logLevel<=Yt.WARN&&O1.warn(`Auth (${ec}): ${n}`,...t)}function $0(n,...t){O1.logLevel<=Yt.ERROR&&O1.error(`Auth (${ec}): ${n}`,...t)}function Ai(n,...t){throw H_(n,...t)}function Zi(n,...t){return H_(n,...t)}function f4(n,t,e){const r={...F9(),[t]:e};return new Sh("auth","Firebase",r).create(t,{appName:n.name})}function Ji(n){return f4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H_(n,...t){if(typeof n!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return c4.create(n,...t)}function Dt(n,t,...e){if(!n)throw H_(t,...e)}function Sa(n){const t="INTERNAL ASSERTION FAILED: "+n;throw $0(t),new Error(t)}function Oa(n,t){n||Sa(t)}function nv(){return typeof self<"u"&&self.location?.href||""}function z9(){return iS()==="http:"||iS()==="https:"}function iS(){return typeof self<"u"&&self.location?.protocol||null}function j9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z9()||LO()||"connection"in navigator)?navigator.onLine:!0}function H9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Lh{constructor(t,e){this.shortDelay=t,this.longDelay=e,Oa(e>t,"Short delay should be less than long delay!"),this.isMobile=MO()||kO()}get(){return j9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function G_(n,t){Oa(n.emulator,"Emulator should always be set here");const{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class h4{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const G9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const q9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K9=new Lh(3e4,6e4);function Fa(n,t){return n.tenantId&&!t.tenantId?{...t,tenantId:n.tenantId}:t}async function Ua(n,t,e,r,i={}){return d4(n,i,async()=>{let a={},o={};r&&(t==="GET"?o=r:a={body:JSON.stringify(r)});const l=Ih({key:n.config.apiKey,...o}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h={method:t,headers:c,...a};return VO()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&tc(n.emulatorConfig.host)&&(h.credentials="include"),h4.fetch()(await p4(n,n.config.apiHost,e,l),h)})}async function d4(n,t,e){n._canInitEmulator=!1;const r={...G9,...t};try{const i=new W9(n),a=await Promise.race([e(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw C0(n,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw C0(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw C0(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw C0(n,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw f4(n,p,h);Ai(n,p)}}catch(i){if(i instanceof La)throw i;Ai(n,"network-request-failed",{message:String(i)})}}async function kh(n,t,e,r,i={}){const a=await Ua(n,t,e,r,i);return"mfaPendingCredential"in a&&Ai(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function p4(n,t,e,r){const i=`${t}${e}?${r}`,a=n,o=a.config.emulator?G_(n.config,i):`${n.config.apiScheme}://${i}`;return q9.includes(e)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function X9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class W9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Zi(this.auth,"network-request-failed")),K9.get())})}}function C0(n,t,e){const r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const i=Zi(n,t,r);return i.customData._tokenResponse=e,i}function aS(n){return n!==void 0&&n.enterprise!==void 0}class Y9{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return X9(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $9(n,t){return Ua(n,"GET","/v2/recaptchaConfig",Fa(n,t))}async function Q9(n,t){return Ua(n,"POST","/v1/accounts:delete",t)}async function N1(n,t){return Ua(n,"POST","/v1/accounts:lookup",t)}function Qf(n){if(n)try{const t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Z9(n,t=!1){const e=On(n),r=await e.getIdToken(t),i=q_(r);Dt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Qf($m(i.auth_time)),issuedAtTime:Qf($m(i.iat)),expirationTime:Qf($m(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function $m(n){return Number(n)*1e3}function q_(n){const[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return $0("JWT malformed, contained fewer than 3 sections"),null;try{const i=bC(e);return i?JSON.parse(i):($0("Failed to decode base64 JWT payload"),null)}catch(i){return $0("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sS(n){const t=q_(n);return Dt(t,"internal-error"),Dt(typeof t.exp<"u","internal-error"),Dt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function vh(n,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof La&&J9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function J9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class t7{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rv{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qf(this.lastLoginAt),this.creationTime=Qf(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function P1(n){const t=n.auth,e=await n.getIdToken(),r=await vh(n,N1(t,{idToken:e}));Dt(r?.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?g4(i.providerUserInfo):[],o=n7(n.providerData,a),l=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!o?.length,h=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new rv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function e7(n){const t=On(n);await P1(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function n7(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function g4(n){return n.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function r7(n,t){const e=await d4(n,{},async()=>{const r=Ih({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,o=await p4(n,i,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return n.emulatorConfig&&tc(n.emulatorConfig.host)&&(c.credentials="include"),h4.fetch()(o,c)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function i7(n,t){return Ua(n,"POST","/v2/accounts:revokeToken",Fa(n,t))}class Dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Dt(t.idToken,"internal-error"),Dt(typeof t.idToken<"u","internal-error"),Dt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):sS(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Dt(t.length!==0,"internal-error");const e=sS(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:i,expiresIn:a}=await r7(t,e);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:i,expirationTime:a}=e,o=new Dl;return r&&(Dt(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Dt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),a&&(Dt(typeof a=="number","internal-error",{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Dl,this.toJSON())}_performRefresh(){return Sa("not implemented")}}function Ts(n,t){Dt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}class Ei{constructor({uid:t,auth:e,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new t7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(t){const e=await vh(this,this.stsTokenManager.getToken(this.auth,t));return Dt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return Z9(this,t)}reload(){return e7(this)}_assign(t){this!==t&&(Dt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Ei({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await P1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nr(this.auth.app))return Promise.reject(Ji(this.auth));const t=await this.getIdToken();return await vh(this,Q9(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,i=e.email??void 0,a=e.phoneNumber??void 0,o=e.photoURL??void 0,l=e.tenantId??void 0,c=e._redirectEventId??void 0,h=e.createdAt??void 0,p=e.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:x,providerData:A,stsTokenManager:S}=e;Dt(g&&S,t,"internal-error");const C=Dl.fromJSON(this.name,S);Dt(typeof g=="string",t,"internal-error"),Ts(r,t.name),Ts(i,t.name),Dt(typeof v=="boolean",t,"internal-error"),Dt(typeof x=="boolean",t,"internal-error"),Ts(a,t.name),Ts(o,t.name),Ts(l,t.name),Ts(c,t.name),Ts(h,t.name),Ts(p,t.name);const O=new Ei({uid:g,auth:t,email:i,emailVerified:v,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:C,createdAt:h,lastLoginAt:p});return A&&Array.isArray(A)&&(O.providerData=A.map(D=>({...D}))),c&&(O._redirectEventId=c),O}static async _fromIdTokenResponse(t,e,r=!1){const i=new Dl;i.updateFromServerResponse(e);const a=new Ei({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await P1(a),a}static async _fromGetAccountInfoResponse(t,e,r){const i=e.users[0];Dt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?g4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,l=new Dl;l.updateFromIdToken(r);const c=new Ei({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,h),c}}const oS=new Map;function Ia(n){Oa(n instanceof Function,"Expected a class definition");let t=oS.get(n);return t?(Oa(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,oS.set(n,t),t)}class m4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}m4.type="NONE";const uS=m4;function Q0(n,t,e){return`firebase:${n}:${t}:${e}`}class Ol{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Q0(this.userKey,i.apiKey,a),this.fullPersistenceKey=Q0("persistence",i.apiKey,a),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await N1(this.auth,{idToken:t}).catch(()=>{});return e?Ei._fromGetAccountInfoResponse(this.auth,e,t):null}return Ei._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Ol(Ia(uS),t,r);const i=(await Promise.all(e.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Ia(uS);const o=Q0(r,t.config.apiKey,t.name);let l=null;for(const h of e)try{const p=await h._get(o);if(p){let g;if(typeof p=="string"){const v=await N1(t,{idToken:p}).catch(()=>{});if(!v)break;g=await Ei._fromGetAccountInfoResponse(t,v,p)}else g=Ei._fromJSON(t,p);h!==a&&(l=g),a=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new Ol(a,t,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(e.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new Ol(a,t,r))}}function lS(n){const t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(x4(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(y4(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(A4(t))return"Blackberry";if(w4(t))return"Webos";if(v4(t))return"Safari";if((t.includes("chrome/")||_4(t))&&!t.includes("edge/"))return"Chrome";if(E4(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if(r?.length===2)return r[1]}return"Other"}function y4(n=En()){return/firefox\//i.test(n)}function v4(n=En()){const t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _4(n=En()){return/crios\//i.test(n)}function x4(n=En()){return/iemobile/i.test(n)}function E4(n=En()){return/android/i.test(n)}function A4(n=En()){return/blackberry/i.test(n)}function w4(n=En()){return/webos/i.test(n)}function K_(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function a7(n=En()){return K_(n)&&!!window.navigator?.standalone}function s7(){return BO()&&document.documentMode===10}function T4(n=En()){return K_(n)||E4(n)||w4(n)||A4(n)||/windows phone/i.test(n)||x4(n)}function S4(n,t=[]){let e;switch(n){case"Browser":e=lS(En());break;case"Worker":e=`${lS(En())}-${n}`;break;default:e=n}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ec}/${r}`}class o7{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=a=>new Promise((o,l)=>{try{const c=t(a);o(c)}catch(c){l(c)}});r.onAbort=e,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function u7(n,t={}){return Ua(n,"GET","/v2/passwordPolicy",Fa(n,t))}const l7=6;class c7{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??l7,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=a))}}class f7{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cS(this),this.idTokenSubscription=new cS(this),this.beforeStateQueue=new o7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Ia(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ol.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await N1(this,{idToken:t}),r=await Ei._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Nr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,i=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,l=await this.tryRedirectSignIn(t);(!a||a===o)&&l?.user&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await P1(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=H9()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Nr(this.app))return Promise.reject(Ji(this));const e=t?On(t):null;return e&&Dt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Dt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Nr(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Nr(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ia(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await u7(this),e=new c7(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Sh("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await i7(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Ia(t)||this._popupRedirectResolver;Dt(e,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Ia(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};const a=typeof e=="function"?e:e.next.bind(e);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof e=="function"){const c=t.addObserver(e,r,i);return()=>{o=!0,c()}}else{const c=t.addObserver(e);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=S4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&U9(`Error while retrieving App Check token: ${t.error}`),t?.token}}function za(n){return On(n)}class cS{constructor(t){this.auth=t,this.observer=null,this.addObserver=GO(e=>this.observer=e)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _p={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function h7(n){_p=n}function I4(n){return _p.loadJS(n)}function d7(){return _p.recaptchaEnterpriseScript}function p7(){return _p.gapiScript}function g7(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class m7{constructor(){this.enterprise=new y7}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class y7{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const v7="recaptcha-enterprise",C4="NO_RECAPTCHA";class _7{constructor(t){this.type=v7,this.auth=za(t)}async verify(t="verify",e=!1){async function r(a){if(!e){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{$9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new Y9(c);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;aS(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:t}).then(h=>{o(h)}).catch(()=>{o(C4)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m7().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!e&&aS(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=d7();c.length!==0&&(c+=l),I4(c).then(()=>{i(l,a,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function fS(n,t,e,r=!1,i=!1){const a=new _7(n);let o;if(i)o=C4;else try{o=await a.verify(e)}catch{o=await a.verify(e,!0)}const l={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function M1(n,t,e,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await fS(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await fS(n,t,e,e==="getOobCode");return r(n,o)}else return Promise.reject(a)})}function x7(n,t){const e=Xv(n,"auth");if(e.isInitialized()){const i=e.getImmediate(),a=e.getOptions();if(au(a,t??{}))return i;Ai(i,"already-initialized")}return e.initialize({options:t})}function E7(n,t){const e=t?.persistence||[],r=(Array.isArray(e)?e:[e]).map(Ia);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t?.popupRedirectResolver)}function A7(n,t,e){const r=za(n);Dt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,a=b4(t),{host:o,port:l}=w7(t),c=l===null?"":`:${l}`,h={url:`${a}//${o}${c}/`},p=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Dt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Dt(au(h,r.config.emulator)&&au(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,tc(o)?(NC(`${a}//${o}${c}`),PO("Auth",!0)):T7()}function b4(n){const t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function w7(n){const t=b4(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:hS(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:hS(o)}}}function hS(n){if(!n)return null;const t=Number(n);return isNaN(t)?null:t}function T7(){function n(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class X_{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Sa("not implemented")}_getIdTokenResponse(t){return Sa("not implemented")}_linkToIdToken(t,e){return Sa("not implemented")}_getReauthenticationResolver(t){return Sa("not implemented")}}async function S7(n,t){return Ua(n,"POST","/v1/accounts:signUp",t)}async function I7(n,t){return kh(n,"POST","/v1/accounts:signInWithPassword",Fa(n,t))}async function C7(n,t){return Ua(n,"POST","/v1/accounts:sendOobCode",Fa(n,t))}async function b7(n,t){return C7(n,t)}async function R7(n,t){return kh(n,"POST","/v1/accounts:signInWithEmailLink",Fa(n,t))}async function D7(n,t){return kh(n,"POST","/v1/accounts:signInWithEmailLink",Fa(n,t))}class _h extends X_{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new _h(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new _h(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M1(t,e,"signInWithPassword",I7);case"emailLink":return R7(t,{email:this._email,oobCode:this._password});default:Ai(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return M1(t,r,"signUpPassword",S7);case"emailLink":return D7(t,{idToken:e,email:this._email,oobCode:this._password});default:Ai(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Nl(n,t){return kh(n,"POST","/v1/accounts:signInWithIdp",Fa(n,t))}const O7="http://localhost";class gu extends X_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new gu(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ai("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i,...a}=e;if(!r||!i)return null;const o=new gu(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(t){const e=this.buildRequest();return Nl(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Nl(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Nl(t,e)}buildRequest(){const t={requestUri:O7,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ih(e)}return t}}function N7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function P7(n){const t=Rf(Df(n)).link,e=t?Rf(Df(t)).deep_link_id:null,r=Rf(Df(n)).deep_link_id;return(r?Rf(Df(r)).link:null)||r||e||t||n}class W_{constructor(t){const e=Rf(Df(t)),r=e.apiKey??null,i=e.oobCode??null,a=N7(e.mode??null);Dt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=P7(t);try{return new W_(e)}catch{return null}}}class uc{constructor(){this.providerId=uc.PROVIDER_ID}static credential(t,e){return _h._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=W_.parseLink(e);return Dt(r,"argument-error"),_h._fromEmailAndCode(t,r.code,r.tenantId)}}uc.PROVIDER_ID="password";uc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class R4{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Bh extends R4{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Ds extends Bh{constructor(){super("facebook.com")}static credential(t){return gu._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ds.credentialFromTaggedObject(t)}static credentialFromError(t){return Ds.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ds.credential(t.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";class Os extends Bh{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return gu._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Os.credentialFromTaggedObject(t)}static credentialFromError(t){return Os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return Os.credential(e,r)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";class Ns extends Bh{constructor(){super("github.com")}static credential(t){return gu._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ns.credentialFromTaggedObject(t)}static credentialFromError(t){return Ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ns.credential(t.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";class Ps extends Bh{constructor(){super("twitter.com")}static credential(t,e){return gu._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ps.credentialFromTaggedObject(t)}static credentialFromError(t){return Ps.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return Ps.credential(e,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";async function D4(n,t){return kh(n,"POST","/v1/accounts:signUp",Fa(n,t))}class Na{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,i=!1){const a=await Ei._fromIdTokenResponse(t,r,i),o=dS(r);return new Na({user:a,providerId:o,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const i=dS(r);return new Na({user:t,providerId:i,_tokenResponse:r,operationType:e})}}function dS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function M7(n){if(Nr(n.app))return Promise.reject(Ji(n));const t=za(n);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Na({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await D4(t,{returnSecureToken:!0}),r=await Na._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(r.user),r}class V1 extends La{constructor(t,e,r,i){super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,V1.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new V1(t,e,r,i)}}function O4(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?V1._fromErrorAndOperation(n,a,t,r):a})}async function V7(n,t,e=!1){const r=await vh(n,t._linkToIdToken(n.auth,await n.getIdToken()),e);return Na._forOperation(n,"link",r)}async function L7(n,t,e=!1){const{auth:r}=n;if(Nr(r.app))return Promise.reject(Ji(r));const i="reauthenticate";try{const a=await vh(n,O4(r,i,t,n),e);Dt(a.idToken,r,"internal-error");const o=q_(a.idToken);Dt(o,r,"internal-error");const{sub:l}=o;return Dt(n.uid===l,r,"user-mismatch"),Na._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ai(r,"user-mismatch"),a}}async function N4(n,t,e=!1){if(Nr(n.app))return Promise.reject(Ji(n));const r="signIn",i=await O4(n,r,t),a=await Na._fromIdTokenResponse(n,r,i);return e||await n._updateCurrentUser(a.user),a}async function k7(n,t){return N4(za(n),t)}async function P4(n){const t=za(n);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function B7(n,t,e){const r=za(n);await M1(r,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",b7)}async function F7(n,t,e){if(Nr(n.app))return Promise.reject(Ji(n));const r=za(n),o=await M1(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",D4).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&P4(n),c}),l=await Na._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function U7(n,t,e){return Nr(n.app)?Promise.reject(Ji(n)):k7(On(n),uc.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P4(n),r})}function z7(n,t,e,r){return On(n).onIdTokenChanged(t,e,r)}function j7(n,t,e){return On(n).beforeAuthStateChanged(t,e)}function H7(n,t,e,r){return On(n).onAuthStateChanged(t,e,r)}const L1="__sak";class M4{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(L1,"1"),this.storage.removeItem(L1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const G7=1e3,q7=10;class V4 extends M4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T4(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),i=this.localCache[e];r!==i&&t(e,i,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=t.key;e?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!e&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);s7()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,q7):i()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},G7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}V4.type="LOCAL";const K7=V4;class L4 extends M4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}L4.type="SESSION";const k4=L4;function X7(n){return Promise.all(n.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class xp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(i=>i.isListeningto(t));if(e)return e;const r=new xp(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:i,data:a}=e.data,o=this.handlersMap[i];if(!o?.size)return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(e.origin,a)),c=await X7(l);e.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xp.receivers=[];function Y_(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}class W7{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const h=Y_("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(v.data.response);break;default:clearTimeout(p),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:h,data:e},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function ta(){return window}function Y7(n){ta().location.href=n}function B4(){return typeof ta().WorkerGlobalScope<"u"&&typeof ta().importScripts=="function"}async function $7(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q7(){return navigator?.serviceWorker?.controller||null}function Z7(){return B4()?self:null}const F4="firebaseLocalStorageDb",J7=1,k1="firebaseLocalStorage",U4="fbase_key";class Fh{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Ep(n,t){return n.transaction([k1],t?"readwrite":"readonly").objectStore(k1)}function tV(){const n=indexedDB.deleteDatabase(F4);return new Fh(n).toPromise()}function iv(){const n=indexedDB.open(F4,J7);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(k1,{keyPath:U4})}catch(i){e(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(k1)?t(r):(r.close(),await tV(),t(await iv()))})})}async function pS(n,t,e){const r=Ep(n,!0).put({[U4]:t,value:e});return new Fh(r).toPromise()}async function eV(n,t){const e=Ep(n,!1).get(t),r=await new Fh(e).toPromise();return r===void 0?null:r.value}function gS(n,t){const e=Ep(n,!0).delete(t);return new Fh(e).toPromise()}const nV=800,rV=3;class z4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iv(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>rV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xp._getInstance(Z7()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $7(),!this.activeServiceWorker)return;this.sender=new W7(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Q7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await iv();return await pS(t,L1,"1"),await gS(t,L1),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>pS(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>eV(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>gS(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const a=Ep(i,!1).getAll();return new Fh(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:a}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z4.type="LOCAL";const iV=z4;new Lh(3e4,6e4);function aV(n,t){return t?Ia(t):(Dt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class $_ extends X_{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Nl(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Nl(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Nl(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function sV(n){return N4(n.auth,new $_(n),n.bypassAuthState)}function oV(n){const{auth:t,user:e}=n;return Dt(e,t,"internal-error"),L7(e,new $_(n),n.bypassAuthState)}async function uV(n){const{auth:t,user:e}=n;return Dt(e,t,"internal-error"),V7(e,new $_(n),n.bypassAuthState)}class j4{constructor(t,e,r,i,a=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:i,tenantId:a,error:o,type:l}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:e,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return sV;case"linkViaPopup":case"linkViaRedirect":return uV;case"reauthViaPopup":case"reauthViaRedirect":return oV;default:Ai(this.auth,"internal-error")}}resolve(t){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lV=new Lh(2e3,1e4);class xl extends j4{constructor(t,e,r,i,a){super(t,e,i,a),this.provider=r,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Dt(t,this.auth,"internal-error"),t}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const t=Y_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,lV.get())};t()}}xl.currentPopupAction=null;const cV="pendingRedirect",Z0=new Map;class fV extends j4{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=Z0.get(this.auth._key());if(!t){try{const r=await hV(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}Z0.set(this.auth._key(),t)}return this.bypassAuthState||Z0.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hV(n,t){const e=gV(t),r=pV(n);if(!await r._isAvailable())return!1;const i=await r._get(e)==="true";return await r._remove(e),i}function dV(n,t){Z0.set(n._key(),t)}function pV(n){return Ia(n._redirectPersistence)}function gV(n){return Q0(cV,n.config.apiKey,n.name)}async function mV(n,t,e=!1){if(Nr(n.app))return Promise.reject(Ji(n));const r=za(n),i=aV(r,t),o=await new fV(r,i,e).execute();return o&&!e&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}const yV=600*1e3;class vV{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!_V(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!H4(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Zi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=yV&&this.cachedEventUids.clear(),this.cachedEventUids.has(mS(t))}saveEventToCache(t){this.cachedEventUids.add(mS(t)),this.lastProcessedEventTime=Date.now()}}function mS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function H4({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function _V(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H4(n);default:return!1}}async function xV(n,t={}){return Ua(n,"GET","/v1/projects",t)}const EV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AV=/^https?/;async function wV(n){if(n.config.emulator)return;const{authorizedDomains:t}=await xV(n);for(const e of t)try{if(TV(e))return}catch{}Ai(n,"unauthorized-domain")}function TV(n){const t=nv(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===r}if(!AV.test(e))return!1;if(EV.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const SV=new Lh(3e4,6e4);function yS(){const n=ta().___jsl;if(n?.H){for(const t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function IV(n){return new Promise((t,e)=>{function r(){yS(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yS(),e(Zi(n,"network-request-failed"))},timeout:SV.get()})}if(ta().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ta().gapi?.load)r();else{const i=g7("iframefcb");return ta()[i]=()=>{gapi.load?r():e(Zi(n,"network-request-failed"))},I4(`${p7()}?onload=${i}`).catch(a=>e(a))}}).catch(t=>{throw J0=null,t})}let J0=null;function CV(n){return J0=J0||IV(n),J0}const bV=new Lh(5e3,15e3),RV="__/auth/iframe",DV="emulator/auth/iframe",OV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PV(n){const t=n.config;Dt(t.authDomain,n,"auth-domain-config-required");const e=t.emulator?G_(t,DV):`https://${n.config.authDomain}/${RV}`,r={apiKey:t.apiKey,appName:n.name,v:ec},i=NV.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${e}?${Ih(r).slice(1)}`}async function MV(n){const t=await CV(n),e=ta().gapi;return Dt(e,n,"internal-error"),t.open({where:document.body,url:PV(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OV,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=Zi(n,"network-request-failed"),l=ta().setTimeout(()=>{a(o)},bV.get());function c(){ta().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(o)})}))}const VV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LV=500,kV=600,BV="_blank",FV="http://localhost";class vS{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UV(n,t,e,r=LV,i=kV){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...VV,width:r.toString(),height:i.toString(),top:a,left:o},h=En().toLowerCase();e&&(l=_4(h)?BV:e),y4(h)&&(t=t||FV,c.scrollbars="yes");const p=Object.entries(c).reduce((v,[x,A])=>`${v}${x}=${A},`,"");if(a7(h)&&l!=="_self")return zV(t||"",l),new vS(null);const g=window.open(t||"",l,p);Dt(g,n,"popup-blocked");try{g.focus()}catch{}return new vS(g)}function zV(n,t){const e=document.createElement("a");e.href=n,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}const jV="__/auth/handler",HV="emulator/auth/handler",GV=encodeURIComponent("fac");async function _S(n,t,e,r,i,a){Dt(n.config.authDomain,n,"auth-domain-config-required"),Dt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:ec,eventId:i};if(t instanceof R4){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",HO(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[p,g]of Object.entries({}))o[p]=g}if(t instanceof Bh){const p=t.getScopes().filter(g=>g!=="");p.length>0&&(o.scopes=p.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await n._getAppCheckToken(),h=c?`#${GV}=${encodeURIComponent(c)}`:"";return`${qV(n)}?${Ih(l).slice(1)}${h}`}function qV({config:n}){return n.emulator?G_(n,HV):`https://${n.authDomain}/${jV}`}const Qm="webStorageSupport";class KV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k4,this._completeRedirectFn=mV,this._overrideRedirectResult=dV}async _openPopup(t,e,r,i){Oa(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const a=await _S(t,e,r,nv(),i);return UV(t,a,Y_())}async _openRedirect(t,e,r,i){await this._originValidation(t);const a=await _S(t,e,r,nv(),i);return Y7(a),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:i,promise:a}=this.eventManagers[e];return i?Promise.resolve(i):(Oa(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await MV(t),r=new vV(t);return e.register("authEvent",i=>(Dt(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Qm,{type:Qm},i=>{const a=i?.[0]?.[Qm];a!==void 0&&e(!!a),Ai(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=wV(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return T4()||v4()||K_()}}const XV=KV;var xS="@firebase/auth",ES="1.12.0";class WV{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function YV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $V(n){Ml(new su("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Dt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S4(n)},h=new f7(r,i,a,c);return E7(h,e),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Ml(new su("auth-internal",t=>{const e=za(t.getProvider("auth").getImmediate());return(r=>new WV(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(xS,ES,YV(n)),ks(xS,ES,"esm2020")}const QV=300,ZV=OC("authIdTokenMaxAge")||QV;let AS=null;const JV=n=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>ZV)return;const i=e?.token;AS!==i&&(AS=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tL(n=q5()){const t=Xv(n,"auth");if(t.isInitialized())return t.getImmediate();const e=x7(n,{popupRedirectResolver:XV,persistence:[iV,K7,k4]}),r=OC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=JV(a.toString());j7(e,o,()=>o(e.currentUser)),z7(e,l=>o(l))}}const i=RO("auth");return i&&A7(e,`http://${i}`),e}function eL(){return document.getElementsByTagName("head")?.[0]??document}h7({loadJS(n){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{const a=Zi("internal-error");a.customData=i,e(a)},r.type="text/javascript",r.charset="UTF-8",eL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$V("Browser");const nL={apiKey:"AIzaSyDFJKoHEhMnpjt2bqTPpzru1qdA_rUOEdk",authDomain:"bitlkhzin-8d5c8.firebaseapp.com",projectId:"bitlkhzin-8d5c8",storageBucket:"bitlkhzin-8d5c8.firebasestorage.app",messagingSenderId:"862517672946",appId:"1:862517672946:web:66efa0f33cd67f0751896b"},G4=FC(nL),mr=v9(G4,{localCache:M9({tabManager:B9()})}),Xo=tL(G4),rL=({children:n,currentView:t="inventory",onNavigate:e})=>L.jsxs("div",{className:"layout-container",style:{display:"flex",minHeight:"100vh"},children:[L.jsxs("aside",{className:"glass-panel sidebar desktop-only",style:{width:"260px",margin:"24px 0 24px 24px",height:"calc(100vh - 48px)",position:"sticky",top:"24px",display:"flex",flexDirection:"column",padding:"32px 24px",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.08)",background:"#111827",boxShadow:"var(--shadow-lg)"},children:[L.jsxs("div",{style:{marginBottom:"40px",display:"flex",alignItems:"center",gap:"16px",paddingLeft:"12px"},children:[L.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, hsl(var(--color-primary)), #8b5cf6)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 4px 12px rgba(99, 102, 241, 0.4)"},children:L.jsx(UD,{size:24,strokeWidth:2.5})}),L.jsx("span",{style:{fontSize:"1.25rem",fontWeight:800,color:"white",letterSpacing:"-0.02em"},children:"Bit Khzin"})]}),L.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[L.jsx(b0,{icon:L.jsx(vw,{size:22}),label:"Inventory",active:t==="inventory",onClick:()=>e?.("inventory")}),L.jsx(b0,{icon:L.jsx(Ew,{size:22}),label:"Shopping List",active:t==="todo",onClick:()=>e?.("todo")}),L.jsx(b0,{icon:L.jsx(xw,{size:22}),label:"Settings",active:t==="settings",onClick:()=>e?.("settings")})]}),L.jsx("div",{style:{marginTop:"auto",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.1)",width:"100%"},children:L.jsx(b0,{icon:L.jsx(AC,{size:20}),label:"Sign Out",onClick:()=>Xo.signOut(),active:!1,danger:!0})})]}),L.jsx("main",{className:"animate-fade-in",style:{flex:1,padding:"24px",maxWidth:"100%",paddingBottom:"100px",marginLeft:"0"},children:L.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",width:"100%"},children:n})},t),L.jsx("div",{className:"mobile-nav-container mobile-only",style:{position:"fixed",bottom:0,zIndex:50},children:L.jsxs("ul",{className:"nav-list",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",width:"100%"},children:[L.jsx("li",{className:`nav-item ${t==="inventory"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:L.jsxs("button",{className:`nav-link ${t==="inventory"?"active":""}`,onClick:()=>e?.("inventory"),children:[L.jsx("span",{className:"icon",children:L.jsx(vw,{size:24})}),L.jsx("span",{className:"text",children:"Pantry"})]})}),L.jsx("li",{className:`nav-item ${t==="todo"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:L.jsxs("button",{className:`nav-link ${t==="todo"?"active":""}`,onClick:()=>e?.("todo"),children:[L.jsx("span",{className:"icon",children:L.jsx(Ew,{size:24})}),L.jsx("span",{className:"text",children:"Shop"})]})}),L.jsx("li",{className:`nav-item ${t==="settings"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:L.jsxs("button",{className:`nav-link ${t==="settings"?"active":""}`,onClick:()=>e?.("settings"),children:[L.jsx("span",{className:"icon",children:L.jsx(xw,{size:24})}),L.jsx("span",{className:"text",children:"Settings"})]})}),L.jsx("div",{className:"indicator",style:{left:`calc(100% / 3 * ${t==="inventory"?0:t==="todo"?1:2} + 100% / 6 - 35px)`}})]})}),L.jsx("style",{children:`
        @media (max-width: 1024px) {
          .desktop-only { display: none !important; }
        }
        @media (min-width: 1025px) {
          .mobile-only { display: none !important; }
        }
      `})]}),b0=({icon:n,label:t,active:e=!1,onClick:r,danger:i=!1})=>L.jsxs("button",{onClick:r,className:"tap-scale",style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px 20px",width:"100%",borderRadius:"20px",border:"none",background:e?"white":"transparent",boxShadow:e?"0 8px 20px -4px rgba(59, 130, 246, 0.4), 0 4px 8px -2px rgba(0,0,0,0.05)":"none",color:e?"#1f2937":i?"#ef4444":"#9ca3af",cursor:"pointer",fontWeight:e?700:500,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",textAlign:"left",fontSize:"1rem",position:"relative"},children:[L.jsx("span",{style:{color:e?"hsl(var(--color-primary))":"currentColor",display:"flex",alignItems:"center"},children:n}),L.jsx("span",{style:{opacity:e?1:.9},children:t})]}),Wn=({children:n,variant:t="primary",size:e="md",isLoading:r,className:i="",disabled:a,...o})=>{const l=()=>{switch(t){case"primary":return"btn-primary";case"secondary":return"btn-secondary";case"danger":return"btn-primary";case"ghost":return"btn-ghost";default:return"btn-primary"}},c=()=>{switch(e){case"sm":return{padding:"8px 16px",fontSize:"0.875rem"};case"lg":return{padding:"16px 32px",fontSize:"1.25rem"};default:return{}}},h=l();return L.jsxs("button",{className:`${h} tap-scale ${i}`,disabled:r||a,style:{...c(),opacity:r||a?.7:1,cursor:r||a?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",...o.style},...o,children:[r&&L.jsx("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:L.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"30 60"})}),n]})},q4=st.createContext({user:null,userProfile:null,loading:!0,updateHousehold:async()=>{}}),Ap=()=>st.useContext(q4),iL=({children:n})=>{const[t,e]=st.useState(null),[r,i]=st.useState(null),[a,o]=st.useState(!0);st.useEffect(()=>{const c=H7(Xo,async h=>{if(e(h),h){const p=Ws(mr,"users",h.uid),g=yp(p,async v=>{if(v.exists())i(v.data());else{const x={uid:h.uid,email:h.email||"",householdId:h.uid};try{await rS(p,x),i(x)}catch(A){console.error("Error creating profile:",A)}}o(!1)});return()=>g()}else i(null),o(!1)});return()=>c()},[]);const l=async c=>{if(!t)return;const h=Ws(mr,"users",t.uid);await rS(h,{householdId:c},{merge:!0})};return L.jsx(q4.Provider,{value:{user:t,userProfile:r,loading:a,updateHousehold:l},children:n})},K4=()=>{const[n,t]=st.useState([]),{user:e,userProfile:r}=Ap();return st.useEffect(()=>{if(!e||!r?.householdId){t([]);return}const l=F_(tu(mr,"shopping-list"),U_("householdId","==",r.householdId)),c=yp(l,h=>{const p=h.docs.map(g=>({id:g.id,...g.data()}));p.sort((g,v)=>v.createdAt-g.createdAt),t(p)},h=>{console.error("Error fetching shopping list:",h)});return()=>c()},[e,r?.householdId]),{todos:n,addTodo:async(l,c=1,h="Other")=>{if(!l.trim()||!e||!r?.householdId)return;const p=Date.now().toString(),g={id:p,text:l,completed:!1,quantity:c,category:h,createdAt:Date.now()};t(v=>[g,...v]);try{await D1(tu(mr,"shopping-list"),{text:l,userId:e.uid,householdId:r.householdId,completed:!1,quantity:c,category:h,createdAt:Date.now()})}catch(v){console.error("Error adding item:",v),t(x=>x.filter(A=>A.id!==p)),alert("Failed to add item. Please check your connection.")}},toggleTodo:async l=>{const c=n.find(h=>h.id===l);if(c){t(h=>h.map(p=>p.id===l?{...p,completed:!p.completed}:p));try{await u4(Ws(mr,"shopping-list",l),{completed:!c.completed})}catch(h){console.error("Error toggling item:",h),t(p=>p.map(g=>g.id===l?{...g,completed:c.completed}:g))}}},deleteTodo:async l=>{const c=n.find(h=>h.id===l);if(c){t(h=>h.filter(p=>p.id!==l));try{await j_(Ws(mr,"shopping-list",l))}catch(h){console.error("Error deleting item:",h),t(p=>{const g=[...p,c];return g.sort((v,x)=>x.createdAt-v.createdAt),g}),alert("Failed to delete item. Check console for details.")}}}}},t1=["Produce","Dairy","Bakery","Meat","Frozen","Pantry","Beverages","Snacks","Household","Other"],e1={milk:"Dairy",cheese:"Dairy",yogurt:"Dairy",butter:"Dairy",egg:"Dairy","7lib":"Dairy",lben:"Dairy",bayd:"Dairy",fermaj:"Dairy",danon:"Dairy",bread:"Bakery",bagel:"Bakery",sugar:"Bakery",flour:"Bakery",khobz:"Bakery",apple:"Produce",banana:"Produce",lettuce:"Produce",tomato:"Produce",onion:"Produce",potato:"Produce",maticha:"Produce",batata:"Produce",khei:"Produce",carrot:"Produce",khodra:"Produce",fakiya:"Produce",bsla:"Produce",touma:"Produce",na3na3:"Produce",rbi3:"Produce",chicken:"Meat",beef:"Meat",steak:"Meat",djaj:"Meat",l7em:"Meat",kefta:"Meat",saucisse:"Meat",hout:"Meat",water:"Beverages",juice:"Beverages",soda:"Beverages",coffee:"Beverages",tea:"Beverages",atay:"Beverages","9ahwa":"Beverages",monada:"Beverages",rice:"Pantry",pasta:"Pantry",oil:"Pantry",salt:"Pantry",pepper:"Pantry",zit:"Pantry","olive oil":"Pantry",skar:"Pantry",smida:"Pantry",semolina:"Pantry",laadas:"Pantry",lentils:"Pantry",homs:"Pantry",chickpeas:"Pantry",lubia:"Pantry",couscous:"Pantry"},Q_=()=>{const[n,t]=st.useState([]),[e,r]=st.useState(!0),{user:i,userProfile:a}=Ap();return st.useEffect(()=>{if(!i||!a?.householdId){t([]),r(!1);return}const p=F_(tu(mr,"inventory"),U_("householdId","==",a.householdId)),g=yp(p,v=>{const x=v.docs.map(A=>({id:A.id,...A.data()}));x.sort((A,S)=>S.createdAt-A.createdAt),t(x),r(!1)},v=>{console.error("Error fetching inventory:",v),r(!1)});return()=>g()},[i,a?.householdId]),{items:n,loading:e,addItem:async p=>{if(!i||!a?.householdId)return;let g=p.category;if(!g||g==="Other"){const A=p.name.toLowerCase();for(const[S,C]of Object.entries(e1))if(A.includes(S)){g=C;break}}const v=Date.now().toString(),x={...p,category:g,stockLevel:p.stockLevel||"full",id:v,userId:i.uid,householdId:a.householdId,createdAt:Date.now(),updatedAt:Date.now()};t(A=>[x,...A]);try{await D1(tu(mr,"inventory"),{...p,category:g,stockLevel:p.stockLevel||"full",userId:i.uid,householdId:a.householdId,createdAt:Date.now(),updatedAt:Date.now()})}catch(A){throw console.error("Error adding item:",A),t(S=>S.filter(C=>C.id!==v)),A}},updateItem:async(p,g)=>{t(v=>v.map(x=>x.id===p?{...x,...g,updatedAt:Date.now()}:x));try{await u4(Ws(mr,"inventory",p),{...g,updatedAt:Date.now()})}catch(v){console.error("Error updating item:",v)}},deleteItem:async p=>{const g=n.find(v=>v.id===p);if(g){t(v=>v.filter(x=>x.id!==p));try{await j_(Ws(mr,"inventory",p))}catch(v){console.error("Error deleting item:",v),g&&t(x=>[...x,g].sort((A,S)=>S.createdAt-A.createdAt))}}},seedData:async()=>{if(!i||!a?.householdId)return;const p=[{name:"Khobz (Bread)",category:"Bakery",stockLevel:"full"},{name:"Atay (Tea)",category:"Beverages",stockLevel:"full"},{name:"Skar (Sugar)",category:"Pantry",stockLevel:"full"},{name:"Zit Zitoune",category:"Pantry",stockLevel:"full"},{name:"Farine & Smida",category:"Pantry",stockLevel:"full"},{name:"Laadas/Homs",category:"Pantry",stockLevel:"low"},{name:"Maticha (Tomato)",category:"Produce",stockLevel:"full"},{name:"Batata (Potato)",category:"Produce",stockLevel:"full"},{name:"Milk",category:"Dairy",stockLevel:"full"},{name:"Eggs",category:"Dairy",stockLevel:"low"}];try{const g=p.map(v=>D1(tu(mr,"inventory"),{...v,location:"kitchen",quantity:1,value:0,userId:i.uid,householdId:a.householdId,createdAt:Date.now(),updatedAt:Date.now()}));await Promise.all(g)}catch(g){console.error("Error seeding data:",g)}}}},wp=({message:n,type:t="info",isVisible:e,onClose:r,duration:i=3e3,actionLabel:a,onAction:o})=>{if(st.useEffect(()=>{if(e&&i>0){const h=setTimeout(()=>{r()},i);return()=>clearTimeout(h)}},[e,i,r]),!e)return null;const l=()=>{switch(t){case"success":return L.jsx(Hv,{size:20,color:"#4ade80"});case"error":return L.jsx(EC,{size:20,color:"#f87171"});default:return L.jsx(tO,{size:20,color:"#60a5fa"})}},c=()=>{switch(t){case"success":return"rgba(74, 222, 128, 0.5)";case"error":return"rgba(248, 113, 113, 0.5)";default:return"rgba(96, 165, 250, 0.5)"}};return L.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:2e3,display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",background:"rgba(20, 20, 30, 0.95)",backdropFilter:"blur(12px)",border:`1px solid ${c()}`,borderRadius:"99px",color:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",maxWidth:"90%",width:"max-content",animation:"slideDownFade 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[l(),L.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500,flex:1},children:n}),a&&o&&L.jsx("button",{onClick:o,style:{background:"rgba(255,255,255,0.15)",border:"none",color:"white",padding:"4px 10px",borderRadius:"4px",fontWeight:"bold",cursor:"pointer",fontSize:"0.85rem"},children:a}),L.jsx("button",{onClick:r,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"rgba(255,255,255,0.6)",display:"flex"},children:L.jsx(TC,{size:16})}),L.jsx("style",{children:`
                @keyframes slideDownFade {
                    from { opacity: 0; transform: translate(-50%, -20px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
            `})]})},X4=st.createContext({});function Tp(n){const t=st.useRef(null);return t.current===null&&(t.current=n()),t.current}const Z_=typeof window<"u",J_=Z_?st.useLayoutEffect:st.useEffect,t2=st.createContext(null);function e2(n,t){n.indexOf(t)===-1&&n.push(t)}function n2(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Pa=(n,t,e)=>e>t?t:e<n?n:e;let r2=()=>{};const Ma={},W4=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Y4(n){return typeof n=="object"&&n!==null}const $4=n=>/^0[^.\s]+$/u.test(n);function i2(n){let t;return()=>(t===void 0&&(t=n()),t)}const ti=n=>n,aL=(n,t)=>e=>t(n(e)),Uh=(...n)=>n.reduce(aL),xh=(n,t,e)=>{const r=t-n;return r===0?1:(e-n)/r};class a2{constructor(){this.subscriptions=[]}add(t){return e2(this.subscriptions,t),()=>n2(this.subscriptions,t)}notify(t,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ea=n=>n*1e3,Zr=n=>n/1e3;function Q4(n,t){return t?n*(1e3/t):0}const Z4=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,sL=1e-7,oL=12;function uL(n,t,e,r,i){let a,o,l=0;do o=t+(e-t)/2,a=Z4(o,r,i)-n,a>0?e=o:t=o;while(Math.abs(a)>sL&&++l<oL);return o}function zh(n,t,e,r){if(n===t&&e===r)return ti;const i=a=>uL(a,0,1,n,e);return a=>a===0||a===1?a:Z4(i(a),t,r)}const J4=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,tR=n=>t=>1-n(1-t),eR=zh(.33,1.53,.69,.99),s2=tR(eR),nR=J4(s2),rR=n=>(n*=2)<1?.5*s2(n):.5*(2-Math.pow(2,-10*(n-1))),o2=n=>1-Math.sin(Math.acos(n)),iR=tR(o2),aR=J4(o2),lL=zh(.42,0,1,1),cL=zh(0,0,.58,1),sR=zh(.42,0,.58,1),fL=n=>Array.isArray(n)&&typeof n[0]!="number",oR=n=>Array.isArray(n)&&typeof n[0]=="number",hL={linear:ti,easeIn:lL,easeInOut:sR,easeOut:cL,circIn:o2,circInOut:aR,circOut:iR,backIn:s2,backInOut:nR,backOut:eR,anticipate:rR},dL=n=>typeof n=="string",wS=n=>{if(oR(n)){r2(n.length===4);const[t,e,r,i]=n;return zh(t,e,r,i)}else if(dL(n))return hL[n];return n},R0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function pL(n,t){let e=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(p){o.has(p)&&(h.schedule(p),n()),p(l)}const h={schedule:(p,g=!1,v=!1)=>{const A=v&&i?e:r;return g&&o.add(p),A.has(p)||A.add(p),p},cancel:p=>{r.delete(p),o.delete(p)},process:p=>{if(l=p,i){a=!0;return}i=!0,[e,r]=[r,e],e.forEach(c),e.clear(),i=!1,a&&(a=!1,h.process(p))}};return h}const gL=40;function uR(n,t){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,o=R0.reduce((P,k)=>(P[k]=pL(a),P),{}),{setup:l,read:c,resolveKeyframes:h,preUpdate:p,update:g,preRender:v,render:x,postRender:A}=o,S=()=>{const P=Ma.useManualTiming?i.timestamp:performance.now();e=!1,Ma.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(P-i.timestamp,gL),1)),i.timestamp=P,i.isProcessing=!0,l.process(i),c.process(i),h.process(i),p.process(i),g.process(i),v.process(i),x.process(i),A.process(i),i.isProcessing=!1,e&&t&&(r=!1,n(S))},C=()=>{e=!0,r=!0,i.isProcessing||n(S)};return{schedule:R0.reduce((P,k)=>{const j=o[k];return P[k]=(K,R=!1,I=!1)=>(e||C(),j.schedule(K,R,I)),P},{}),cancel:P=>{for(let k=0;k<R0.length;k++)o[R0[k]].cancel(P)},state:i,steps:o}}const{schedule:Ne,cancel:Va,state:Un,steps:Zm}=uR(typeof requestAnimationFrame<"u"?requestAnimationFrame:ti,!0);let n1;function mL(){n1=void 0}const xr={now:()=>(n1===void 0&&xr.set(Un.isProcessing||Ma.useManualTiming?Un.timestamp:performance.now()),n1),set:n=>{n1=n,queueMicrotask(mL)}},lR=n=>t=>typeof t=="string"&&t.startsWith(n),cR=lR("--"),yL=lR("var(--"),u2=n=>yL(n)?vL.test(n.split("/*")[0].trim()):!1,vL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Eh={...lc,transform:n=>Pa(0,1,n)},D0={...lc,default:1},Zf=n=>Math.round(n*1e5)/1e5,l2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _L(n){return n==null}const xL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,c2=(n,t)=>e=>!!(typeof e=="string"&&xL.test(e)&&e.startsWith(n)||t&&!_L(e)&&Object.prototype.hasOwnProperty.call(e,t)),fR=(n,t,e)=>r=>{if(typeof r!="string")return r;const[i,a,o,l]=r.match(l2);return{[n]:parseFloat(i),[t]:parseFloat(a),[e]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},EL=n=>Pa(0,255,n),Jm={...lc,transform:n=>Math.round(EL(n))},Wo={test:c2("rgb","red"),parse:fR("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:r=1})=>"rgba("+Jm.transform(n)+", "+Jm.transform(t)+", "+Jm.transform(e)+", "+Zf(Eh.transform(r))+")"};function AL(n){let t="",e="",r="",i="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),t+=t,e+=e,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const av={test:c2("#"),parse:AL,transform:Wo.transform},jh=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Cs=jh("deg"),na=jh("%"),Ot=jh("px"),wL=jh("vh"),TL=jh("vw"),TS={...na,parse:n=>na.parse(n)/100,transform:n=>na.transform(n*100)},El={test:c2("hsl","hue"),parse:fR("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:r=1})=>"hsla("+Math.round(n)+", "+na.transform(Zf(t))+", "+na.transform(Zf(e))+", "+Zf(Eh.transform(r))+")"},ln={test:n=>Wo.test(n)||av.test(n)||El.test(n),parse:n=>Wo.test(n)?Wo.parse(n):El.test(n)?El.parse(n):av.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Wo.transform(n):El.transform(n),getAnimatableNone:n=>{const t=ln.parse(n);return t.alpha=0,ln.transform(t)}},SL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function IL(n){return isNaN(n)&&typeof n=="string"&&(n.match(l2)?.length||0)+(n.match(SL)?.length||0)>0}const hR="number",dR="color",CL="var",bL="var(",SS="${}",RL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ah(n){const t=n.toString(),e=[],r={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(RL,c=>(ln.test(c)?(r.color.push(a),i.push(dR),e.push(ln.parse(c))):c.startsWith(bL)?(r.var.push(a),i.push(CL),e.push(c)):(r.number.push(a),i.push(hR),e.push(parseFloat(c))),++a,SS)).split(SS);return{values:e,split:l,indexes:r,types:i}}function pR(n){return Ah(n).values}function gR(n){const{split:t,types:e}=Ah(n),r=t.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],i[o]!==void 0){const l=e[o];l===hR?a+=Zf(i[o]):l===dR?a+=ln.transform(i[o]):a+=i[o]}return a}}const DL=n=>typeof n=="number"?0:ln.test(n)?ln.getAnimatableNone(n):n;function OL(n){const t=pR(n);return gR(n)(t.map(DL))}const Ys={test:IL,parse:pR,createTransformer:gR,getAnimatableNone:OL};function ty(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function NL({hue:n,saturation:t,lightness:e,alpha:r}){n/=360,t/=100,e/=100;let i=0,a=0,o=0;if(!t)i=a=o=e;else{const l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;i=ty(c,l,n+1/3),a=ty(c,l,n),o=ty(c,l,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function B1(n,t){return e=>e>0?t:n}const Fe=(n,t,e)=>n+(t-n)*e,ey=(n,t,e)=>{const r=n*n,i=e*(t*t-r)+r;return i<0?0:Math.sqrt(i)},PL=[av,Wo,El],ML=n=>PL.find(t=>t.test(n));function IS(n){const t=ML(n);if(!t)return!1;let e=t.parse(n);return t===El&&(e=NL(e)),e}const CS=(n,t)=>{const e=IS(n),r=IS(t);if(!e||!r)return B1(n,t);const i={...e};return a=>(i.red=ey(e.red,r.red,a),i.green=ey(e.green,r.green,a),i.blue=ey(e.blue,r.blue,a),i.alpha=Fe(e.alpha,r.alpha,a),Wo.transform(i))},sv=new Set(["none","hidden"]);function VL(n,t){return sv.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function LL(n,t){return e=>Fe(n,t,e)}function f2(n){return typeof n=="number"?LL:typeof n=="string"?u2(n)?B1:ln.test(n)?CS:FL:Array.isArray(n)?mR:typeof n=="object"?ln.test(n)?CS:kL:B1}function mR(n,t){const e=[...n],r=e.length,i=n.map((a,o)=>f2(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)e[o]=i[o](a);return e}}function kL(n,t){const e={...n,...t},r={};for(const i in e)n[i]!==void 0&&t[i]!==void 0&&(r[i]=f2(n[i])(n[i],t[i]));return i=>{for(const a in r)e[a]=r[a](i);return e}}function BL(n,t){const e=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],o=n.indexes[a][r[a]],l=n.values[o]??0;e[i]=l,r[a]++}return e}const FL=(n,t)=>{const e=Ys.createTransformer(t),r=Ah(n),i=Ah(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?sv.has(n)&&!i.values.length||sv.has(t)&&!r.values.length?VL(n,t):Uh(mR(BL(r,i),i.values),e):B1(n,t)};function yR(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Fe(n,t,e):f2(n)(n,t)}const UL=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Ne.update(t,e),stop:()=>Va(t),now:()=>Un.isProcessing?Un.timestamp:xr.now()}},vR=(n,t,e=10)=>{let r="";const i=Math.max(Math.round(t/e),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},F1=2e4;function h2(n){let t=0;const e=50;let r=n.next(t);for(;!r.done&&t<F1;)t+=e,r=n.next(t);return t>=F1?1/0:t}function zL(n,t=100,e){const r=e({...n,keyframes:[0,t]}),i=Math.min(h2(r),F1);return{type:"keyframes",ease:a=>r.next(i*a).value/t,duration:Zr(i)}}const jL=5;function _R(n,t,e){const r=Math.max(t-jL,0);return Q4(e-n(r),t-r)}const He={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ny=.001;function HL({duration:n=He.duration,bounce:t=He.bounce,velocity:e=He.velocity,mass:r=He.mass}){let i,a,o=1-t;o=Pa(He.minDamping,He.maxDamping,o),n=Pa(He.minDuration,He.maxDuration,Zr(n)),o<1?(i=h=>{const p=h*o,g=p*n,v=p-e,x=ov(h,o),A=Math.exp(-g);return ny-v/x*A},a=h=>{const g=h*o*n,v=g*e+e,x=Math.pow(o,2)*Math.pow(h,2)*n,A=Math.exp(-g),S=ov(Math.pow(h,2),o);return(-i(h)+ny>0?-1:1)*((v-x)*A)/S}):(i=h=>{const p=Math.exp(-h*n),g=(h-e)*n+1;return-ny+p*g},a=h=>{const p=Math.exp(-h*n),g=(e-h)*(n*n);return p*g});const l=5/n,c=qL(i,a,l);if(n=ea(n),isNaN(c))return{stiffness:He.stiffness,damping:He.damping,duration:n};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:o*2*Math.sqrt(r*h),duration:n}}}const GL=12;function qL(n,t,e){let r=e;for(let i=1;i<GL;i++)r=r-n(r)/t(r);return r}function ov(n,t){return n*Math.sqrt(1-t*t)}const KL=["duration","bounce"],XL=["stiffness","damping","mass"];function bS(n,t){return t.some(e=>n[e]!==void 0)}function WL(n){let t={velocity:He.velocity,stiffness:He.stiffness,damping:He.damping,mass:He.mass,isResolvedFromDuration:!1,...n};if(!bS(n,XL)&&bS(n,KL))if(n.visualDuration){const e=n.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,a=2*Pa(.05,1,1-(n.bounce||0))*Math.sqrt(i);t={...t,mass:He.mass,stiffness:i,damping:a}}else{const e=HL(n);t={...t,...e,mass:He.mass},t.isResolvedFromDuration=!0}return t}function U1(n=He.visualDuration,t=He.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:r,restDelta:i}=e;const a=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:h,mass:p,duration:g,velocity:v,isResolvedFromDuration:x}=WL({...e,velocity:-Zr(e.velocity||0)}),A=v||0,S=h/(2*Math.sqrt(c*p)),C=o-a,O=Zr(Math.sqrt(c/p)),D=Math.abs(C)<5;r||(r=D?He.restSpeed.granular:He.restSpeed.default),i||(i=D?He.restDelta.granular:He.restDelta.default);let P;if(S<1){const j=ov(O,S);P=K=>{const R=Math.exp(-S*O*K);return o-R*((A+S*O*C)/j*Math.sin(j*K)+C*Math.cos(j*K))}}else if(S===1)P=j=>o-Math.exp(-O*j)*(C+(A+O*C)*j);else{const j=O*Math.sqrt(S*S-1);P=K=>{const R=Math.exp(-S*O*K),I=Math.min(j*K,300);return o-R*((A+S*O*C)*Math.sinh(I)+j*C*Math.cosh(I))/j}}const k={calculatedDuration:x&&g||null,next:j=>{const K=P(j);if(x)l.done=j>=g;else{let R=j===0?A:0;S<1&&(R=j===0?ea(A):_R(P,j,K));const I=Math.abs(R)<=r,M=Math.abs(o-K)<=i;l.done=I&&M}return l.value=l.done?o:K,l},toString:()=>{const j=Math.min(h2(k),F1),K=vR(R=>k.next(j*R).value,j,30);return j+"ms "+K},toTransition:()=>{}};return k}U1.applyToOptions=n=>{const t=zL(n,100,U1);return n.ease=t.ease,n.duration=ea(t.duration),n.type="keyframes",n};function uv({keyframes:n,velocity:t=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:h=.5,restSpeed:p}){const g=n[0],v={done:!1,value:g},x=I=>l!==void 0&&I<l||c!==void 0&&I>c,A=I=>l===void 0?c:c===void 0||Math.abs(l-I)<Math.abs(c-I)?l:c;let S=e*t;const C=g+S,O=o===void 0?C:o(C);O!==C&&(S=O-g);const D=I=>-S*Math.exp(-I/r),P=I=>O+D(I),k=I=>{const M=D(I),B=P(I);v.done=Math.abs(M)<=h,v.value=v.done?O:B};let j,K;const R=I=>{x(v.value)&&(j=I,K=U1({keyframes:[v.value,A(v.value)],velocity:_R(P,I,v.value),damping:i,stiffness:a,restDelta:h,restSpeed:p}))};return R(0),{calculatedDuration:null,next:I=>{let M=!1;return!K&&j===void 0&&(M=!0,k(I),R(I)),j!==void 0&&I>=j?K.next(I-j):(!M&&k(I),v)}}}function YL(n,t,e){const r=[],i=e||Ma.mix||yR,a=n.length-1;for(let o=0;o<a;o++){let l=i(n[o],n[o+1]);if(t){const c=Array.isArray(t)?t[o]||ti:t;l=Uh(c,l)}r.push(l)}return r}function xR(n,t,{clamp:e=!0,ease:r,mixer:i}={}){const a=n.length;if(r2(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),t=[...t].reverse());const l=YL(t,r,i),c=l.length,h=p=>{if(o&&p<n[0])return t[0];let g=0;if(c>1)for(;g<n.length-2&&!(p<n[g+1]);g++);const v=xh(n[g],n[g+1],p);return l[g](v)};return e?p=>h(Pa(n[0],n[a-1],p)):h}function $L(n,t){const e=n[n.length-1];for(let r=1;r<=t;r++){const i=xh(0,t,r);n.push(Fe(e,1,i))}}function QL(n){const t=[0];return $L(t,n.length-1),t}function ZL(n,t){return n.map(e=>e*t)}function JL(n,t){return n.map(()=>t||sR).splice(0,n.length-1)}function Jf({duration:n=300,keyframes:t,times:e,ease:r="easeInOut"}){const i=fL(r)?r.map(wS):wS(r),a={done:!1,value:t[0]},o=ZL(e&&e.length===t.length?e:QL(t),n),l=xR(o,t,{ease:Array.isArray(i)?i:JL(t,i)});return{calculatedDuration:n,next:c=>(a.value=l(c),a.done=c>=n,a)}}const tk=n=>n!==null;function d2(n,{repeat:t,repeatType:e="loop"},r,i=1){const a=n.filter(tk),l=i<0||t&&e!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const ek={decay:uv,inertia:uv,tween:Jf,keyframes:Jf,spring:U1};function ER(n){typeof n.type=="string"&&(n.type=ek[n.type])}class p2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const nk=n=>n/100;class g2 extends p2{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==xr.now()&&this.tick(xr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;ER(t);const{type:e=Jf,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=t;let{keyframes:l}=t;const c=e||Jf;c!==Jf&&typeof l[0]!="number"&&(this.mixKeyframes=Uh(nk,yR(l[0],l[1])),l=[0,100]);const h=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=h2(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:g,repeatType:v,repeatDelay:x,type:A,onUpdate:S,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const O=this.currentTime-h*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?O<0:O>i;this.currentTime=Math.max(O,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let P=this.currentTime,k=r;if(g){const I=Math.min(this.currentTime,i)/l;let M=Math.floor(I),B=I%1;!B&&I>=1&&(B=1),B===1&&M--,M=Math.min(M,g+1),M%2&&(v==="reverse"?(B=1-B,x&&(B-=x/l)):v==="mirror"&&(k=o)),P=Pa(0,1,B)*l}const j=D?{done:!1,value:p[0]}:k.next(P);a&&(j.value=a(j.value));let{done:K}=j;!D&&c!==null&&(K=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return R&&A!==uv&&(j.value=d2(p,this.options,C,this.speed)),S&&S(j.value),R&&this.finish(),j}then(t,e){return this.finished.then(t,e)}get duration(){return Zr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zr(t)}get time(){return Zr(this.currentTime)}set time(t){t=ea(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(xr.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Zr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=UL,startTime:e}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function rk(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const Yo=n=>n*180/Math.PI,lv=n=>{const t=Yo(Math.atan2(n[1],n[0]));return cv(t)},ik={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:lv,rotateZ:lv,skewX:n=>Yo(Math.atan(n[1])),skewY:n=>Yo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},cv=n=>(n=n%360,n<0&&(n+=360),n),RS=lv,DS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),OS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),ak={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:DS,scaleY:OS,scale:n=>(DS(n)+OS(n))/2,rotateX:n=>cv(Yo(Math.atan2(n[6],n[5]))),rotateY:n=>cv(Yo(Math.atan2(-n[2],n[0]))),rotateZ:RS,rotate:RS,skewX:n=>Yo(Math.atan(n[4])),skewY:n=>Yo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function fv(n){return n.includes("scale")?1:0}function hv(n,t){if(!n||n==="none")return fv(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=ak,i=e;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ik,i=l}if(!i)return fv(t);const a=r[t],o=i[1].split(",").map(ok);return typeof a=="function"?a(o):o[a]}const sk=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return hv(e,t)};function ok(n){return parseFloat(n.trim())}const cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fc=new Set(cc),NS=n=>n===lc||n===Ot,uk=new Set(["x","y","z"]),lk=cc.filter(n=>!uk.has(n));function ck(n){const t=[];return lk.forEach(e=>{const r=n.getValue(e);r!==void 0&&(t.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),t}const nu={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>hv(t,"x"),y:(n,{transform:t})=>hv(t,"y")};nu.translateX=nu.x;nu.translateY=nu.y;const ru=new Set;let dv=!1,pv=!1,gv=!1;function AR(){if(pv){const n=Array.from(ru).filter(r=>r.needsMeasurement),t=new Set(n.map(r=>r.element)),e=new Map;t.forEach(r=>{const i=ck(r);i.length&&(e.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([a,o])=>{r.getValue(a)?.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}pv=!1,dv=!1,ru.forEach(n=>n.complete(gv)),ru.clear()}function wR(){ru.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(pv=!0)})}function fk(){gv=!0,wR(),AR(),gv=!1}class m2{constructor(t,e,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ru.add(this),dv||(dv=!0,Ne.read(wR),Ne.resolveKeyframes(AR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:r,motionValue:i}=this;if(t[0]===null){const a=i?.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&e){const l=r.readValue(e,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&a===void 0&&i.set(t[0])}rk(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ru.delete(this)}cancel(){this.state==="scheduled"&&(ru.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hk=n=>n.startsWith("--");function dk(n,t,e){hk(t)?n.style.setProperty(t,e):n.style[t]=e}const pk=i2(()=>window.ScrollTimeline!==void 0),gk={};function mk(n,t){const e=i2(n);return()=>gk[t]??e()}const TR=mk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lf=([n,t,e,r])=>`cubic-bezier(${n}, ${t}, ${e}, ${r})`,PS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lf([0,.65,.55,1]),circOut:Lf([.55,0,1,.45]),backIn:Lf([.31,.01,.66,-.59]),backOut:Lf([.33,1.53,.69,.99])};function SR(n,t){if(n)return typeof n=="function"?TR()?vR(n,t):"ease-out":oR(n)?Lf(n):Array.isArray(n)?n.map(e=>SR(e,t)||PS.easeOut):PS[n]}function yk(n,t,e,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},h=void 0){const p={[t]:e};c&&(p.offset=c);const g=SR(l,i);Array.isArray(g)&&(p.easing=g);const v={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),n.animate(p,v)}function IR(n){return typeof n=="function"&&"applyToOptions"in n}function vk({type:n,...t}){return IR(n)&&TR()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _k extends p2{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=t,r2(typeof t.type!="string");const h=vk(t);this.animation=yk(e,r,i,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=d2(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):dk(e,r,p),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Zr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zr(t)}get time(){return Zr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ea(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&pk()?(this.animation.timeline=t,ti):e(this)}}const CR={anticipate:rR,backInOut:nR,circInOut:aR};function xk(n){return n in CR}function Ek(n){typeof n.ease=="string"&&xk(n.ease)&&(n.ease=CR[n.ease])}const MS=10;class Ak extends _k{constructor(t){Ek(t),ER(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const l=new g2({...o,autoplay:!1}),c=ea(this.finishedTime??this.time);e.setWithVelocity(l.sample(c-MS).value,l.sample(c).value,MS),l.stop()}}const VS=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ys.test(n)||n==="0")&&!n.startsWith("url("));function wk(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function Tk(n,t,e,r){const i=n[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=n[n.length-1],o=VS(i,t),l=VS(a,t);return!o||!l?!1:wk(n)||(e==="spring"||IR(e))&&r}function mv(n){n.duration=0,n.type="keyframes"}const Sk=new Set(["opacity","clipPath","filter","transform"]),Ik=i2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ck(n){const{motionValue:t,name:e,repeatDelay:r,repeatType:i,damping:a,type:o}=n;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=t.owner.getProps();return Ik()&&e&&Sk.has(e)&&(e!=="transform"||!h)&&!c&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const bk=40;class Rk extends p2{constructor({autoplay:t=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:h,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=xr.now();const v={autoplay:t,delay:e,type:r,repeat:i,repeatDelay:a,repeatType:o,name:c,motionValue:h,element:p,...g},x=p?.KeyframeResolver||m2;this.keyframeResolver=new x(l,(A,S,C)=>this.onKeyframesResolved(A,S,v,!C),c,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:h,onUpdate:p}=r;this.resolvedAt=xr.now(),Tk(t,a,o,l)||((Ma.instantAnimations||!c)&&p?.(d2(t,r,e)),t[0]=t[t.length-1],mv(r),r.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>bk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:t},x=!h&&Ck(v)?new Ak({...v,element:v.motionValue.owner.current}):new g2(v);x.finished.then(()=>this.notifyFinished()).catch(ti),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),fk()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Dk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ok(n){const t=Dk.exec(n);if(!t)return[,];const[,e,r,i]=t;return[`--${e??r}`,i]}function bR(n,t,e=1){const[r,i]=Ok(n);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return W4(o)?parseFloat(o):o}return u2(i)?bR(i,t,e+1):i}function y2(n,t){return n?.[t]??n?.default??n}const RR=new Set(["width","height","top","left","right","bottom",...cc]),Nk={test:n=>n==="auto",parse:n=>n},DR=n=>t=>t.test(n),OR=[lc,Ot,na,Cs,TL,wL,Nk],LS=n=>OR.find(DR(n));function Pk(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||$4(n):!0}const Mk=new Set(["brightness","contrast","saturate","opacity"]);function Vk(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[r]=e.match(l2)||[];if(!r)return n;const i=e.replace(r,"");let a=Mk.has(t)?1:0;return r!==e&&(a*=100),t+"("+a+i+")"}const Lk=/\b([a-z-]*)\(.*?\)/gu,yv={...Ys,getAnimatableNone:n=>{const t=n.match(Lk);return t?t.map(Vk).join(" "):n}},kS={...lc,transform:Math.round},kk={rotate:Cs,rotateX:Cs,rotateY:Cs,rotateZ:Cs,scale:D0,scaleX:D0,scaleY:D0,scaleZ:D0,skew:Cs,skewX:Cs,skewY:Cs,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:Eh,originX:TS,originY:TS,originZ:Ot},v2={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot,...kk,zIndex:kS,fillOpacity:Eh,strokeOpacity:Eh,numOctaves:kS},Bk={...v2,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:yv,WebkitFilter:yv},NR=n=>Bk[n];function PR(n,t){let e=NR(n);return e!==yv&&(e=Ys),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Fk=new Set(["auto","none","0"]);function Uk(n,t,e){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!Fk.has(a)&&Ah(a).values.length&&(i=n[r]),r++}if(i&&e)for(const a of t)n[a]=PR(e,i)}class zk extends m2{constructor(t,e,r,i,a){super(t,e,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let h=t[c];if(typeof h=="string"&&(h=h.trim(),u2(h))){const p=bR(h,e.current);p!==void 0&&(t[c]=p),c===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!RR.has(r)||t.length!==2)return;const[i,a]=t,o=LS(i),l=LS(a);if(o!==l)if(NS(o)&&NS(l))for(let c=0;c<t.length;c++){const h=t[c];typeof h=="string"&&(t[c]=parseFloat(h))}else nu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||Pk(t[i]))&&r.push(i);r.length&&Uk(t,r,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nu[r](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(e);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=nu[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function jk(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=e?.[n]??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const MR=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function Hk(n){return Y4(n)&&"offsetHeight"in n}const BS=30,Gk=n=>!isNaN(parseFloat(n)),th={current:void 0};class qk{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=xr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=xr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Gk(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new a2);const r=this.events[t].add(e);return t==="change"?()=>{r(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return th.current&&th.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>BS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,BS);return Q4(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mu(n,t){return new qk(n,t)}const{schedule:_2}=uR(queueMicrotask,!1),yi={x:!1,y:!1};function VR(){return yi.x||yi.y}function Kk(n){return n==="x"||n==="y"?yi[n]?null:(yi[n]=!0,()=>{yi[n]=!1}):yi.x||yi.y?null:(yi.x=yi.y=!0,()=>{yi.x=yi.y=!1})}function LR(n,t){const e=jk(n),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[e,i,()=>r.abort()]}function FS(n){return!(n.pointerType==="touch"||VR())}function Xk(n,t,e={}){const[r,i,a]=LR(n,e),o=l=>{if(!FS(l))return;const{target:c}=l,h=t(c,l);if(typeof h!="function"||!c)return;const p=g=>{FS(g)&&(h(g),c.removeEventListener("pointerleave",p))};c.addEventListener("pointerleave",p,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),a}const kR=(n,t)=>t?n===t?!0:kR(n,t.parentElement):!1,x2=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Wk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Yk(n){return Wk.has(n.tagName)||n.tabIndex!==-1}const r1=new WeakSet;function US(n){return t=>{t.key==="Enter"&&n(t)}}function ry(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const $k=(n,t)=>{const e=n.currentTarget;if(!e)return;const r=US(()=>{if(r1.has(e))return;ry(e,"down");const i=US(()=>{ry(e,"up")}),a=()=>ry(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",a,t)});e.addEventListener("keydown",r,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),t)};function zS(n){return x2(n)&&!VR()}function Qk(n,t,e={}){const[r,i,a]=LR(n,e),o=l=>{const c=l.currentTarget;if(!zS(l))return;r1.add(c);const h=t(c,l),p=(x,A)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),r1.has(c)&&r1.delete(c),zS(x)&&typeof h=="function"&&h(x,{success:A})},g=x=>{p(x,c===window||c===document||e.useGlobalTarget||kR(c,x.target))},v=x=>{p(x,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",v,i)};return r.forEach(l=>{(e.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),Hk(l)&&(l.addEventListener("focus",h=>$k(h,i)),!Yk(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function BR(n){return Y4(n)&&"ownerSVGElement"in n}function Zk(n){return BR(n)&&n.tagName==="svg"}function Jk(...n){const t=!Array.isArray(n[0]),e=t?0:-1,r=n[0+e],i=n[1+e],a=n[2+e],o=n[3+e],l=xR(i,a,o);return t?l(r):l}const Qn=n=>!!(n&&n.getVelocity),tB=[...OR,ln,Ys],eB=n=>tB.find(DR(n)),E2=st.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function nB(n=!0){const t=st.useContext(t2);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=t,a=st.useId();st.useEffect(()=>{if(n)return i(a)},[n]);const o=st.useCallback(()=>n&&r&&r(a),[a,r,n]);return!e&&r?[!1,o]:[!0]}const FR=st.createContext({strict:!1}),jS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zl={};for(const n in jS)Zl[n]={isEnabled:t=>jS[n].some(e=>!!t[e])};function rB(n){for(const t in n)Zl[t]={...Zl[t],...n[t]}}const iB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function z1(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||iB.has(n)}let UR=n=>!z1(n);function aB(n){typeof n=="function"&&(UR=t=>t.startsWith("on")?!z1(t):n(t))}try{aB(require("@emotion/is-prop-valid").default)}catch{}function sB(n,t,e){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(UR(i)||e===!0&&z1(i)||!t&&!z1(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Sp=st.createContext({});function Ip(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function wh(n){return typeof n=="string"||Array.isArray(n)}const A2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],w2=["initial",...A2];function Cp(n){return Ip(n.animate)||w2.some(t=>wh(n[t]))}function zR(n){return!!(Cp(n)||n.variants)}function oB(n,t){if(Cp(n)){const{initial:e,animate:r}=n;return{initial:e===!1||wh(e)?e:void 0,animate:wh(r)?r:void 0}}return n.inherit!==!1?t:{}}function uB(n){const{initial:t,animate:e}=oB(n,st.useContext(Sp));return st.useMemo(()=>({initial:t,animate:e}),[HS(t),HS(e)])}function HS(n){return Array.isArray(n)?n.join(" "):n}function GS(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Sf={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Ot.test(n))n=parseFloat(n);else return n;const e=GS(n,t.target.x),r=GS(n,t.target.y);return`${e}% ${r}%`}},lB={correct:(n,{treeScale:t,projectionDelta:e})=>{const r=n,i=Ys.parse(n);if(i.length>5)return r;const a=Ys.createTransformer(n),o=typeof i[0]!="number"?1:0,l=e.x.scale*t.x,c=e.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const h=Fe(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}},vv={borderRadius:{...Sf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sf,borderTopRightRadius:Sf,borderBottomLeftRadius:Sf,borderBottomRightRadius:Sf,boxShadow:lB};function jR(n,{layout:t,layoutId:e}){return fc.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!vv[n]||n==="opacity")}const cB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fB=cc.length;function hB(n,t,e){let r="",i=!0;for(let a=0;a<fB;a++){const o=cc[a],l=n[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||e){const h=MR(l,v2[o]);if(!c){i=!1;const p=cB[o]||o;r+=`${p}(${h}) `}e&&(t[o]=h)}}return r=r.trim(),e?r=e(t,i?"":r):i&&(r="none"),r}function T2(n,t,e){const{style:r,vars:i,transformOrigin:a}=n;let o=!1,l=!1;for(const c in t){const h=t[c];if(fc.has(c)){o=!0;continue}else if(cR(c)){i[c]=h;continue}else{const p=MR(h,v2[c]);c.startsWith("origin")?(l=!0,a[c]=p):r[c]=p}}if(t.transform||(o||e?r.transform=hB(t,n.transform,e):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:h="50%",originZ:p=0}=a;r.transformOrigin=`${c} ${h} ${p}`}}const S2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function HR(n,t,e){for(const r in t)!Qn(t[r])&&!jR(r,e)&&(n[r]=t[r])}function dB({transformTemplate:n},t){return st.useMemo(()=>{const e=S2();return T2(e,t,n),Object.assign({},e.vars,e.style)},[t])}function pB(n,t){const e=n.style||{},r={};return HR(r,e,n),Object.assign(r,dB(n,t)),r}function gB(n,t){const e={},r=pB(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=r,e}const mB={offset:"stroke-dashoffset",array:"stroke-dasharray"},yB={offset:"strokeDashoffset",array:"strokeDasharray"};function vB(n,t,e=1,r=0,i=!0){n.pathLength=1;const a=i?mB:yB;n[a.offset]=Ot.transform(-r);const o=Ot.transform(t),l=Ot.transform(e);n[a.array]=`${o} ${l}`}function GR(n,{attrX:t,attrY:e,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...l},c,h,p){if(T2(n,l,h),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:v}=n;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete g.transformBox),t!==void 0&&(g.x=t),e!==void 0&&(g.y=e),r!==void 0&&(g.scale=r),i!==void 0&&vB(g,i,a,o,!1)}const qR=()=>({...S2(),attrs:{}}),KR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function _B(n,t,e,r){const i=st.useMemo(()=>{const a=qR();return GR(a,t,KR(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[t]);if(n.style){const a={};HR(a,n.style,n),i.style={...a,...i.style}}return i}const xB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function I2(n){return typeof n!="string"||n.includes("-")?!1:!!(xB.indexOf(n)>-1||/[A-Z]/u.test(n))}function EB(n,t,e,{latestValues:r},i,a=!1){const l=(I2(n)?_B:gB)(t,r,i,n),c=sB(t,typeof n=="string",a),h=n!==st.Fragment?{...c,...l,ref:e}:{},{children:p}=t,g=st.useMemo(()=>Qn(p)?p.get():p,[p]);return st.createElement(n,{...h,children:g})}function qS(n){const t=[{},{}];return n?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function C2(n,t,e,r){if(typeof t=="function"){const[i,a]=qS(r);t=t(e!==void 0?e:n.custom,i,a)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[i,a]=qS(r);t=t(e!==void 0?e:n.custom,i,a)}return t}function i1(n){return Qn(n)?n.get():n}function AB({scrapeMotionValuesFromProps:n,createRenderState:t},e,r,i){return{latestValues:wB(e,r,i,n),renderState:t()}}function wB(n,t,e,r){const i={},a=r(n,{});for(const v in a)i[v]=i1(a[v]);let{initial:o,animate:l}=n;const c=Cp(n),h=zR(n);t&&h&&!c&&n.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let p=e?e.initial===!1:!1;p=p||o===!1;const g=p?l:o;if(g&&typeof g!="boolean"&&!Ip(g)){const v=Array.isArray(g)?g:[g];for(let x=0;x<v.length;x++){const A=C2(n,v[x]);if(A){const{transitionEnd:S,transition:C,...O}=A;for(const D in O){let P=O[D];if(Array.isArray(P)){const k=p?P.length-1:0;P=P[k]}P!==null&&(i[D]=P)}for(const D in S)i[D]=S[D]}}}return i}const XR=n=>(t,e)=>{const r=st.useContext(Sp),i=st.useContext(t2),a=()=>AB(n,t,r,i);return e?a():Tp(a)};function b2(n,t,e){const{style:r}=n,i={};for(const a in r)(Qn(r[a])||t.style&&Qn(t.style[a])||jR(a,n)||e?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const TB=XR({scrapeMotionValuesFromProps:b2,createRenderState:S2});function WR(n,t,e){const r=b2(n,t,e);for(const i in n)if(Qn(n[i])||Qn(t[i])){const a=cc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}const SB=XR({scrapeMotionValuesFromProps:WR,createRenderState:qR}),IB=Symbol.for("motionComponentSymbol");function Al(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function CB(n,t,e){return st.useCallback(r=>{r&&n.onMount&&n.onMount(r),t&&(r?t.mount(r):t.unmount()),e&&(typeof e=="function"?e(r):Al(e)&&(e.current=r))},[t])}const R2=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bB="framerAppearId",YR="data-"+R2(bB),$R=st.createContext({});function RB(n,t,e,r,i){const{visualElement:a}=st.useContext(Sp),o=st.useContext(FR),l=st.useContext(t2),c=st.useContext(E2).reducedMotion,h=st.useRef(null);r=r||o.renderer,!h.current&&r&&(h.current=r(n,{visualState:t,parent:a,props:e,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const p=h.current,g=st.useContext($R);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&DB(h.current,e,i,g);const v=st.useRef(!1);st.useInsertionEffect(()=>{p&&v.current&&p.update(e,l)});const x=e[YR],A=st.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return J_(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),A.current&&p.animationState&&p.animationState.animateChanges())}),st.useEffect(()=>{p&&(!A.current&&p.animationState&&p.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),A.current=!1),p.enteringChildren=void 0)}),p}function DB(n,t,e,r){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:h,layoutCrossfade:p}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:QR(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&Al(l),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:c,layoutRoot:h})}function QR(n){if(n)return n.options.allowProjection!==!1?n.projection:QR(n.parent)}function iy(n,{forwardMotionProps:t=!1}={},e,r){e&&rB(e);const i=I2(n)?SB:TB;function a(l,c){let h;const p={...st.useContext(E2),...l,layoutId:OB(l)},{isStatic:g}=p,v=uB(l),x=i(l,g);if(!g&&Z_){NB();const A=PB(p);h=A.MeasureLayout,v.visualElement=RB(n,x,p,r,A.ProjectionNode)}return L.jsxs(Sp.Provider,{value:v,children:[h&&v.visualElement?L.jsx(h,{visualElement:v.visualElement,...p}):null,EB(n,l,CB(x,v.visualElement,c),x,g,t)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=st.forwardRef(a);return o[IB]=n,o}function OB({layoutId:n}){const t=st.useContext(X4).id;return t&&n!==void 0?t+"-"+n:n}function NB(n,t){st.useContext(FR).strict}function PB(n){const{drag:t,layout:e}=Zl;if(!t&&!e)return{};const r={...t,...e};return{MeasureLayout:t?.isEnabled(n)||e?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function MB(n,t){if(typeof Proxy>"u")return iy;const e=new Map,r=(a,o)=>iy(a,o,n,t),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(e.has(o)||e.set(o,iy(o,void 0,n,t)),e.get(o))})}function ZR({top:n,left:t,right:e,bottom:r}){return{x:{min:t,max:e},y:{min:n,max:r}}}function VB({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function LB(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),r=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function ay(n){return n===void 0||n===1}function _v({scale:n,scaleX:t,scaleY:e}){return!ay(n)||!ay(t)||!ay(e)}function Uo(n){return _v(n)||JR(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function JR(n){return KS(n.x)||KS(n.y)}function KS(n){return n&&n!=="0%"}function j1(n,t,e){const r=n-e,i=t*r;return e+i}function XS(n,t,e,r,i){return i!==void 0&&(n=j1(n,i,r)),j1(n,e,r)+t}function xv(n,t=0,e=1,r,i){n.min=XS(n.min,t,e,r,i),n.max=XS(n.max,t,e,r,i)}function t8(n,{x:t,y:e}){xv(n.x,t.translate,t.scale,t.originPoint),xv(n.y,e.translate,e.scale,e.originPoint)}const WS=.999999999999,YS=1.0000000000001;function kB(n,t,e,r=!1){const i=e.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=e[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Tl(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,t8(n,o)),r&&Uo(a.latestValues)&&Tl(n,a.latestValues))}t.x<YS&&t.x>WS&&(t.x=1),t.y<YS&&t.y>WS&&(t.y=1)}function wl(n,t){n.min=n.min+t,n.max=n.max+t}function $S(n,t,e,r,i=.5){const a=Fe(n.min,n.max,i);xv(n,t,e,a,r)}function Tl(n,t){$S(n.x,t.x,t.scaleX,t.scale,t.originX),$S(n.y,t.y,t.scaleY,t.scale,t.originY)}function e8(n,t){return ZR(LB(n.getBoundingClientRect(),t))}function BB(n,t,e){const r=e8(n,e),{scroll:i}=t;return i&&(wl(r.x,i.offset.x),wl(r.y,i.offset.y)),r}const QS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sl=()=>({x:QS(),y:QS()}),ZS=()=>({min:0,max:0}),mn=()=>({x:ZS(),y:ZS()}),Ev={current:null},n8={current:!1};function FB(){if(n8.current=!0,!!Z_)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ev.current=n.matches;n.addEventListener("change",t),t()}else Ev.current=!1}const UB=new WeakMap;function zB(n,t,e){for(const r in t){const i=t[r],a=e[r];if(Qn(i))n.addValue(r,i);else if(Qn(a))n.addValue(r,mu(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,mu(o!==void 0?o:i,{owner:n}))}}for(const r in e)t[r]===void 0&&n.removeValue(r);return t}const JS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jB{scrapeMotionValuesFromProps(t,e,r){return{}}constructor({parent:t,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=m2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=xr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Ne.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=e.initial?{...c}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Cp(e),this.isVariantNode=zR(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const v in g){const x=g[v];c[v]!==void 0&&Qn(x)&&x.set(c[v])}}mount(t){this.current=t,UB.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),n8.current||FB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ev.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Va(this.notifyUpdate),Va(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=fc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ne.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Zl){const e=Zl[t];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<JS.length;r++){const i=JS[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=zB(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const r=this.values.get(t);e!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&e!==void 0&&(r=mu(e===null?void 0:e,{owner:this}),this.addValue(t,r)),r}readValue(t,e){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(W4(r)||$4(r))?r=parseFloat(r):!eB(r)&&Ys.test(e)&&(r=PR(t,e)),this.setBaseTarget(t,Qn(r)?r.get():r)),Qn(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=C2(this.props,e,this.presenceContext?.custom);a&&(r=a[t])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Qn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new a2),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){_2.render(this.render)}}class r8 extends jB{constructor(){super(...arguments),this.KeyframeResolver=zk}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:r}){delete e[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Qn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function i8(n,{style:t,vars:e},r,i){const a=n.style;let o;for(o in t)a[o]=t[o];i?.applyProjectionStyles(a,r);for(o in e)a.setProperty(o,e[o])}function HB(n){return window.getComputedStyle(n)}class GB extends r8{constructor(){super(...arguments),this.type="html",this.renderInstance=i8}readValueFromInstance(t,e){if(fc.has(e))return this.projection?.isProjecting?fv(e):sk(t,e);{const r=HB(t),i=(cR(e)?r.getPropertyValue(e):r[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return e8(t,e)}build(t,e,r){T2(t,e,r.transformTemplate)}scrapeMotionValuesFromProps(t,e,r){return b2(t,e,r)}}const a8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qB(n,t,e,r){i8(n,t,void 0,r);for(const i in t.attrs)n.setAttribute(a8.has(i)?i:R2(i),t.attrs[i])}class KB extends r8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mn}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(fc.has(e)){const r=NR(e);return r&&r.default||0}return e=a8.has(e)?e:R2(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,r){return WR(t,e,r)}build(t,e,r){GR(t,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,e,r,i){qB(t,e,r,i)}mount(t){this.isSVGTag=KR(t.tagName),super.mount(t)}}const XB=(n,t)=>I2(n)?new KB(t):new GB(t,{allowProjection:n!==st.Fragment});function Pl(n,t,e){const r=n.getProps();return C2(r,t,e!==void 0?e:r.custom,n)}const Av=n=>Array.isArray(n);function WB(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,mu(e))}function YB(n){return Av(n)?n[n.length-1]||0:n}function D2(n,t){const e=Pl(n,t);let{transitionEnd:r={},transition:i={},...a}=e||{};a={...a,...r};for(const o in a){const l=YB(a[o]);WB(n,o,l)}}function $B(n){return!!(Qn(n)&&n.add)}function wv(n,t){const e=n.getValue("willChange");if($B(e))return e.add(t);if(!e&&Ma.WillChange){const r=new Ma.WillChange("auto");n.addValue("willChange",r),r.add(t)}}function s8(n){return n.props[YR]}const QB=n=>n!==null;function ZB(n,{repeat:t,repeatType:e="loop"},r){const i=n.filter(QB),a=t&&e!=="loop"&&t%2===1?0:i.length-1;return i[a]}const JB={type:"spring",stiffness:500,damping:25,restSpeed:10},tF=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),eF={type:"keyframes",duration:.8},nF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rF=(n,{keyframes:t})=>t.length>2?eF:fc.has(n)?n.startsWith("scale")?tF(t[1]):JB:nF;function iF({when:n,delay:t,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:h,...p}){return!!Object.keys(p).length}const O2=(n,t,e,r={},i,a)=>o=>{const l=y2(r,n)||{},c=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ea(c);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-h,onUpdate:v=>{t.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:n,motionValue:t,element:a?void 0:i};iF(l)||Object.assign(p,rF(n,p)),p.duration&&(p.duration=ea(p.duration)),p.repeatDelay&&(p.repeatDelay=ea(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(mv(p),p.delay===0&&(g=!0)),(Ma.instantAnimations||Ma.skipAnimations)&&(g=!0,mv(p),p.delay=0),p.allowFlatten=!l.type&&!l.ease,g&&!a&&t.get()!==void 0){const v=ZB(p.keyframes,l);if(v!==void 0){Ne.update(()=>{p.onUpdate(v),p.onComplete()});return}}return l.isSync?new g2(p):new Rk(p)};function aF({protectedKeys:n,needsAnimating:t},e){const r=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,r}function o8(n,t,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(a=r);const c=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const p in l){const g=n.getValue(p,n.latestValues[p]??null),v=l[p];if(v===void 0||h&&aF(h,p))continue;const x={delay:e,...y2(a||{},p)},A=g.get();if(A!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===A&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const O=s8(n);if(O){const D=window.MotionHandoffAnimation(O,p,Ne);D!==null&&(x.startTime=D,S=!0)}}wv(n,p),g.start(O2(p,g,v,n.shouldReduceMotion&&RR.has(p)?{type:!1}:x,n,S));const C=g.animation;C&&c.push(C)}return o&&Promise.all(c).then(()=>{Ne.update(()=>{o&&D2(n,o)})}),c}function u8(n,t,e,r=0,i=1){const a=Array.from(n).sort((h,p)=>h.sortNodePosition(p)).indexOf(t),o=n.size,l=(o-1)*r;return typeof e=="function"?e(a,o):i===1?a*r:l-a*r}function Tv(n,t,e={}){const r=Pl(n,t,e.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const a=r?()=>Promise.all(o8(n,r,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:g}=i;return sF(n,t,c,h,p,g,e)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,h]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>h())}else return Promise.all([a(),o(e.delay)])}function sF(n,t,e=0,r=0,i=0,a=1,o){const l=[];for(const c of n.variantChildren)c.notify("AnimationStart",t),l.push(Tv(c,t,{...o,delay:e+(typeof r=="function"?0:r)+u8(n.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function l8(n,t,e={}){n.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(a=>Tv(n,a,e));r=Promise.all(i)}else if(typeof t=="string")r=Tv(n,t,e);else{const i=typeof t=="function"?Pl(n,t,e.custom):t;r=Promise.all(o8(n,i,e))}return r.then(()=>{n.notify("AnimationComplete",t)})}function c8(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let r=0;r<e;r++)if(t[r]!==n[r])return!1;return!0}const oF=w2.length;function f8(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?f8(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<oF;e++){const r=w2[e],i=n.props[r];(wh(i)||i===!1)&&(t[r]=i)}return t}const uF=[...A2].reverse(),lF=A2.length;function cF(n){return t=>Promise.all(t.map(({animation:e,options:r})=>l8(n,e,r)))}function fF(n){let t=cF(n),e=tI(),r=!0;const i=c=>(h,p)=>{const g=Pl(n,p,c==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:x,...A}=g;h={...h,...A,...x}}return h};function a(c){t=c(n)}function o(c){const{props:h}=n,p=f8(n.parent)||{},g=[],v=new Set;let x={},A=1/0;for(let C=0;C<lF;C++){const O=uF[C],D=e[O],P=h[O]!==void 0?h[O]:p[O],k=wh(P),j=O===c?D.isActive:null;j===!1&&(A=C);let K=P===p[O]&&P!==h[O]&&k;if(K&&r&&n.manuallyAnimateOnMount&&(K=!1),D.protectedKeys={...x},!D.isActive&&j===null||!P&&!D.prevProp||Ip(P)||typeof P=="boolean")continue;const R=hF(D.prevProp,P);let I=R||O===c&&D.isActive&&!K&&k||C>A&&k,M=!1;const B=Array.isArray(P)?P:[P];let U=B.reduce(i(O),{});j===!1&&(U={});const{prevResolvedValues:H={}}=D,F={...H,...U},Ut=ft=>{I=!0,v.has(ft)&&(M=!0,v.delete(ft)),D.needsAnimating[ft]=!0;const yt=n.getValue(ft);yt&&(yt.liveStyle=!1)};for(const ft in F){const yt=U[ft],kt=H[ft];if(x.hasOwnProperty(ft))continue;let Kt=!1;Av(yt)&&Av(kt)?Kt=!c8(yt,kt):Kt=yt!==kt,Kt?yt!=null?Ut(ft):v.add(ft):yt!==void 0&&v.has(ft)?Ut(ft):D.protectedKeys[ft]=!0}D.prevProp=P,D.prevResolvedValues=U,D.isActive&&(x={...x,...U}),r&&n.blockInitialAnimation&&(I=!1);const ae=K&&R;I&&(!ae||M)&&g.push(...B.map(ft=>{const yt={type:O};if(typeof ft=="string"&&r&&!ae&&n.manuallyAnimateOnMount&&n.parent){const{parent:kt}=n,Kt=Pl(kt,ft);if(kt.enteringChildren&&Kt){const{delayChildren:q}=Kt.transition||{};yt.delay=u8(kt.enteringChildren,n,q)}}return{animation:ft,options:yt}}))}if(v.size){const C={};if(typeof h.initial!="boolean"){const O=Pl(n,Array.isArray(h.initial)?h.initial[0]:h.initial);O&&O.transition&&(C.transition=O.transition)}v.forEach(O=>{const D=n.getBaseTarget(O),P=n.getValue(O);P&&(P.liveStyle=!0),C[O]=D??null}),g.push({animation:C})}let S=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(g):Promise.resolve()}function l(c,h){if(e[c].isActive===h)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(c,h)),e[c].isActive=h;const p=o(c);for(const g in e)e[g].protectedKeys={};return p}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>e,reset:()=>{e=tI()}}}function hF(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!c8(t,n):!1}function Mo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tI(){return{animate:Mo(!0),whileInView:Mo(),whileHover:Mo(),whileTap:Mo(),whileDrag:Mo(),whileFocus:Mo(),exit:Mo()}}class to{constructor(t){this.isMounted=!1,this.node=t}update(){}}class dF extends to{constructor(t){super(t),t.animationState||(t.animationState=fF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ip(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let pF=0;class gF extends to{constructor(){super(...arguments),this.id=pF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const mF={animation:{Feature:dF},exit:{Feature:gF}};function Th(n,t,e,r={passive:!0}){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e)}function Hh(n){return{point:{x:n.pageX,y:n.pageY}}}const yF=n=>t=>x2(t)&&n(t,Hh(t));function eh(n,t,e,r){return Th(n,t,yF(e),r)}const h8=1e-4,vF=1-h8,_F=1+h8,d8=.01,xF=0-d8,EF=0+d8;function sr(n){return n.max-n.min}function AF(n,t,e){return Math.abs(n-t)<=e}function eI(n,t,e,r=.5){n.origin=r,n.originPoint=Fe(t.min,t.max,n.origin),n.scale=sr(e)/sr(t),n.translate=Fe(e.min,e.max,n.origin)-n.originPoint,(n.scale>=vF&&n.scale<=_F||isNaN(n.scale))&&(n.scale=1),(n.translate>=xF&&n.translate<=EF||isNaN(n.translate))&&(n.translate=0)}function nh(n,t,e,r){eI(n.x,t.x,e.x,r?r.originX:void 0),eI(n.y,t.y,e.y,r?r.originY:void 0)}function nI(n,t,e){n.min=e.min+t.min,n.max=n.min+sr(t)}function wF(n,t,e){nI(n.x,t.x,e.x),nI(n.y,t.y,e.y)}function rI(n,t,e){n.min=t.min-e.min,n.max=n.min+sr(t)}function H1(n,t,e){rI(n.x,t.x,e.x),rI(n.y,t.y,e.y)}function Yr(n){return[n("x"),n("y")]}const p8=({current:n})=>n?n.ownerDocument.defaultView:null,iI=(n,t)=>Math.abs(n-t);function TF(n,t){const e=iI(n.x,t.x),r=iI(n.y,t.y);return Math.sqrt(e**2+r**2)}class g8{constructor(t,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=oy(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,A=TF(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!A)return;const{point:S}=v,{timestamp:C}=Un;this.history.push({...S,timestamp:C});const{onStart:O,onMove:D}=this.handlers;x||(O&&O(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=sy(x,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:A,onSessionEnd:S,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=oy(v.type==="pointercancel"?this.lastMoveEventInfo:sy(x,this.transformPagePoint),this.history);this.startEvent&&A&&A(v,O),S&&S(v,O)},!x2(t))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Hh(t),c=sy(l,this.transformPagePoint),{point:h}=c,{timestamp:p}=Un;this.history=[{...h,timestamp:p}];const{onSessionStart:g}=e;g&&g(t,oy(c,this.history)),this.removeListeners=Uh(eh(this.contextWindow,"pointermove",this.handlePointerMove),eh(this.contextWindow,"pointerup",this.handlePointerUp),eh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Va(this.updatePoint)}}function sy(n,t){return t?{point:t(n.point)}:n}function aI(n,t){return{x:n.x-t.x,y:n.y-t.y}}function oy({point:n},t){return{point:n,delta:aI(n,m8(t)),offset:aI(n,SF(t)),velocity:IF(t,.1)}}function SF(n){return n[0]}function m8(n){return n[n.length-1]}function IF(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,r=null;const i=m8(n);for(;e>=0&&(r=n[e],!(i.timestamp-r.timestamp>ea(t)));)e--;if(!r)return{x:0,y:0};const a=Zr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function CF(n,{min:t,max:e},r){return t!==void 0&&n<t?n=r?Fe(t,n,r.min):Math.max(n,t):e!==void 0&&n>e&&(n=r?Fe(e,n,r.max):Math.min(n,e)),n}function sI(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function bF(n,{top:t,left:e,bottom:r,right:i}){return{x:sI(n.x,e,i),y:sI(n.y,t,r)}}function oI(n,t){let e=t.min-n.min,r=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,r]=[r,e]),{min:e,max:r}}function RF(n,t){return{x:oI(n.x,t.x),y:oI(n.y,t.y)}}function DF(n,t){let e=.5;const r=sr(n),i=sr(t);return i>r?e=xh(t.min,t.max-r,n.min):r>i&&(e=xh(n.min,n.max-i,t.min)),Pa(0,1,e)}function OF(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Sv=.35;function NF(n=Sv){return n===!1?n=0:n===!0&&(n=Sv),{x:uI(n,"left","right"),y:uI(n,"top","bottom")}}function uI(n,t,e){return{min:lI(n,t),max:lI(n,e)}}function lI(n,t){return typeof n=="number"?n:n[t]||0}const PF=new WeakMap;class MF{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Hh(g).point)},o=(g,v)=>{const{drag:x,dragPropagation:A,onDragStart:S}=this.getProps();if(x&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Kk(x),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yr(O=>{let D=this.getAxisMotionValue(O).get()||0;if(na.test(D)){const{projection:P}=this.visualElement;if(P&&P.layout){const k=P.layout.layoutBox[O];k&&(D=sr(k)*(parseFloat(D)/100))}}this.originPoint[O]=D}),S&&Ne.postRender(()=>S(g,v)),wv(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},l=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:x,dragDirectionLock:A,onDirectionLock:S,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:O}=v;if(A&&this.currentDirection===null){this.currentDirection=VF(O),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,O),this.updateAxis("y",v.point,O),this.visualElement.render(),C&&C(g,v)},c=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Yr(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new g8(t,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:p8(this.visualElement)})}stop(t,e){const r=t||this.latestPointerEvent,i=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ne.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,r){const{drag:i}=this.getProps();if(!r||!O0(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=CF(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Al(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=bF(r.layoutBox,t):this.constraints=!1,this.elastic=NF(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Yr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=OF(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Al(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=BB(r,i.root,this.visualElement.getTransformPagePoint());let o=RF(i.layout.layoutBox,a);if(e){const l=e(VB(o));this.hasMutatedConstraints=!!l,l&&(o=ZR(l))}return o}startAnimation(t){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},h=Yr(p=>{if(!O0(p,e,this.currentDirection))return;let g=c&&c[p]||{};o&&(g={min:0,max:0});const v=i?200:1e6,x=i?40:1e7,A={type:"inertia",velocity:r?t[p]:0,bounceStiffness:v,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,A)});return Promise.all(h).then(l)}startAxisValueAnimation(t,e){const r=this.getAxisMotionValue(t);return wv(this.visualElement,t),r.start(O2(t,r,0,e,this.visualElement,!1))}stopAnimation(){Yr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Yr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Yr(e=>{const{drag:r}=this.getProps();if(!O0(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(e);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[e];a.set(t[e]-Fe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!Al(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Yr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=DF({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yr(o=>{if(!O0(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:h}=this.constraints[o];l.set(Fe(c,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;PF.set(this.visualElement,this);const t=this.visualElement.current,e=eh(t,"pointerdown",c=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Al(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ne.read(r);const o=Th(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(Yr(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())}));return()=>{o(),e(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=Sv,dragMomentum:l=!0}=t;return{...t,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function O0(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function VF(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class LF extends to{constructor(t){super(t),this.removeGroupControls=ti,this.removeListeners=ti,this.controls=new MF(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ti}unmount(){this.removeGroupControls(),this.removeListeners()}}const cI=n=>(t,e)=>{n&&Ne.postRender(()=>n(t,e))};class kF extends to{constructor(){super(...arguments),this.removePointerDownListener=ti}onPointerDown(t){this.session=new g8(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:p8(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cI(t),onStart:cI(e),onMove:r,onEnd:(a,o)=>{delete this.session,i&&Ne.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=eh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const a1={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let uy=!1;class BF extends st.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=t;a&&(e.group&&e.group.add(a),r&&r.register&&i&&r.register(a),uy&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),a1.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,uy=!0,i||t.layoutDependency!==e||e===void 0||t.isPresent!==a?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Ne.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),_2.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=t;uy=!0,i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function y8(n){const[t,e]=nB(),r=st.useContext(X4);return L.jsx(BF,{...n,layoutGroup:r,switchLayoutGroup:st.useContext($R),isPresent:t,safeToRemove:e})}function FF(n,t,e){const r=Qn(n)?n:mu(n);return r.start(O2("",r,t,e)),r.animation}const UF=(n,t)=>n.depth-t.depth;class zF{constructor(){this.children=[],this.isDirty=!1}add(t){e2(this.children,t),this.isDirty=!0}remove(t){n2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(UF),this.isDirty=!1,this.children.forEach(t)}}function jF(n,t){const e=xr.now(),r=({timestamp:i})=>{const a=i-e;a>=t&&(Va(r),n(a-t))};return Ne.setup(r,!0),()=>Va(r)}const v8=["TopLeft","TopRight","BottomLeft","BottomRight"],HF=v8.length,fI=n=>typeof n=="string"?parseFloat(n):n,hI=n=>typeof n=="number"||Ot.test(n);function GF(n,t,e,r,i,a){i?(n.opacity=Fe(0,e.opacity??1,qF(r)),n.opacityExit=Fe(t.opacity??1,0,KF(r))):a&&(n.opacity=Fe(t.opacity??1,e.opacity??1,r));for(let o=0;o<HF;o++){const l=`border${v8[o]}Radius`;let c=dI(t,l),h=dI(e,l);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||hI(c)===hI(h)?(n[l]=Math.max(Fe(fI(c),fI(h),r),0),(na.test(h)||na.test(c))&&(n[l]+="%")):n[l]=h}(t.rotate||e.rotate)&&(n.rotate=Fe(t.rotate||0,e.rotate||0,r))}function dI(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const qF=_8(0,.5,iR),KF=_8(.5,.95,ti);function _8(n,t,e){return r=>r<n?0:r>t?1:e(xh(n,t,r))}function pI(n,t){n.min=t.min,n.max=t.max}function pi(n,t){pI(n.x,t.x),pI(n.y,t.y)}function gI(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function mI(n,t,e,r,i){return n-=t,n=j1(n,1/e,r),i!==void 0&&(n=j1(n,1/i,r)),n}function XF(n,t=0,e=1,r=.5,i,a=n,o=n){if(na.test(t)&&(t=parseFloat(t),t=Fe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Fe(a.min,a.max,r);n===a&&(l-=t),n.min=mI(n.min,t,e,l,i),n.max=mI(n.max,t,e,l,i)}function yI(n,t,[e,r,i],a,o){XF(n,t[e],t[r],t[i],t.scale,a,o)}const WF=["x","scaleX","originX"],YF=["y","scaleY","originY"];function vI(n,t,e,r){yI(n.x,t,WF,e?e.x:void 0,r?r.x:void 0),yI(n.y,t,YF,e?e.y:void 0,r?r.y:void 0)}function _I(n){return n.translate===0&&n.scale===1}function x8(n){return _I(n.x)&&_I(n.y)}function xI(n,t){return n.min===t.min&&n.max===t.max}function $F(n,t){return xI(n.x,t.x)&&xI(n.y,t.y)}function EI(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function E8(n,t){return EI(n.x,t.x)&&EI(n.y,t.y)}function AI(n){return sr(n.x)/sr(n.y)}function wI(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class QF{constructor(){this.members=[]}add(t){e2(this.members,t),t.scheduleRender()}remove(t){if(n2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,e){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,e&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:r}=t;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ZF(n,t,e){let r="";const i=n.x.translate/t.x,a=n.y.translate/t.y,o=e?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:v,skewX:x,skewY:A}=e;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),v&&(r+=`rotateY(${v}deg) `),x&&(r+=`skewX(${x}deg) `),A&&(r+=`skewY(${A}deg) `)}const l=n.x.scale*t.x,c=n.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const ly=["","X","Y","Z"],JF=1e3;let tU=0;function cy(n,t,e,r){const{latestValues:i}=t;i[n]&&(e[n]=i[n],t.setStaticValue(n,0),r&&(r[n]=0))}function A8(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=s8(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Ne,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&A8(r)}function w8({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=tU++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rU),this.nodes.forEach(oU),this.nodes.forEach(uU),this.nodes.forEach(iU)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new zF)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new a2),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=BR(o)&&!Zk(o),this.instance=o;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),n){let p,g=0;const v=()=>this.root.updateBlockedByResize=!1;Ne.read(()=>{g=window.innerWidth}),n(o,()=>{const x=window.innerWidth;x!==g&&(g=x,this.root.updateBlockedByResize=!0,p&&p(),p=jF(v,250),a1.hasAnimatedSinceResize&&(a1.hasAnimatedSinceResize=!1,this.nodes.forEach(II)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||dU,{onLayoutAnimationStart:S,onLayoutAnimationComplete:C}=h.getProps(),O=!this.targetLayout||!E8(this.targetLayout,x),D=!g&&v;if(this.options.layoutRoot||this.resumeFrom||D||g&&(O||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const P={...y2(A,"layout"),onPlay:S,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P),this.setAnimationOrigin(p,D)}else g||II(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TI);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sU),this.nodes.forEach(eU),this.nodes.forEach(nU)):this.nodes.forEach(SI),this.clearAllSnapshots();const l=xr.now();Un.delta=Pa(0,1e3/60,l-Un.timestamp),Un.timestamp=l,Un.isProcessing=!0,Zm.update.process(Un),Zm.preRender.process(Un),Zm.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,_2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aU),this.sharedNodes.forEach(cU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!sr(this.snapshot.measuredBox.x)&&!sr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!x8(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;o&&this.instance&&(l||Uo(this.latestValues)||p)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),pU(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return mn();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(gU))){const{scroll:h}=this.root;h&&(wl(l.x,h.offset.x),wl(l.y,h.offset.y))}return l}removeElementScroll(o){const l=mn();if(pi(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:p,options:g}=h;h!==this.root&&p&&g.layoutScroll&&(p.wasRoot&&pi(l,o),wl(l.x,p.offset.x),wl(l.y,p.offset.y))}return l}applyTransform(o,l=!1){const c=mn();pi(c,o);for(let h=0;h<this.path.length;h++){const p=this.path[h];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Tl(c,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Uo(p.latestValues)&&Tl(c,p.latestValues)}return Uo(this.latestValues)&&Tl(c,this.latestValues),c}removeTransform(o){const l=mn();pi(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!Uo(h.latestValues))continue;_v(h.latestValues)&&h.updateSnapshot();const p=mn(),g=h.measurePageBox();pi(p,g),vI(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Uo(this.latestValues)&&vI(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!this.layout||!(p||g))return;this.resolvedRelativeTargetAt=Un.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mn(),this.targetWithTransforms=mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pi(this.target,this.layout.layoutBox),t8(this.target,this.targetDelta)):pi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||_v(this.parent.latestValues)||JR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),H1(this.relativeTargetOrigin,l,c),pi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(c=!1),c)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;pi(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;kB(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mn());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gI(this.prevProjectionDelta.x,this.projectionDelta.x),gI(this.prevProjectionDelta.y,this.projectionDelta.y)),nh(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!wI(this.projectionDelta.x,this.prevProjectionDelta.x)||!wI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sl(),this.projectionDelta=Sl(),this.projectionDeltaWithTransform=Sl()}setAnimationOrigin(o,l=!1){const c=this.snapshot,h=c?c.latestValues:{},p={...this.latestValues},g=Sl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=mn(),x=c?c.source:void 0,A=this.layout?this.layout.source:void 0,S=x!==A,C=this.getStack(),O=!C||C.members.length<=1,D=!!(S&&!O&&this.options.crossfade===!0&&!this.path.some(hU));this.animationProgress=0;let P;this.mixTargetDelta=k=>{const j=k/1e3;CI(g.x,o.x,j),CI(g.y,o.y,j),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(H1(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fU(this.relativeTarget,this.relativeTargetOrigin,v,j),P&&$F(this.relativeTarget,P)&&(this.isProjectionDirty=!1),P||(P=mn()),pi(P,this.relativeTarget)),S&&(this.animationValues=p,GF(p,h,this.latestValues,j,D,O)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{a1.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mu(0)),this.currentAnimation=FF(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:h,latestValues:p}=o;if(!(!l||!c||!h)){if(this!==o&&this.layout&&h&&T8(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||mn();const g=sr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+g;const v=sr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+v}pi(l,c),Tl(l,p),nh(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new QF),this.sharedNodes.get(o).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const h={};c.z&&cy("z",o,h,this.animationValues);for(let p=0;p<ly.length;p++)cy(`rotate${ly[p]}`,o,h,this.animationValues),cy(`skew${ly[p]}`,o,h,this.animationValues);o.render();for(const p in h)o.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=i1(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=i1(l?.pointerEvents)||""),this.hasProjected&&!Uo(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=ZF(this.projectionDeltaWithTransform,this.treeScale,p);c&&(g=c(p,g)),o.transform=g;const{x:v,y:x}=this.projectionDelta;o.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,h.animationValues?o.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:o.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in vv){if(p[A]===void 0)continue;const{correct:S,applyTo:C,isCSSVariable:O}=vv[A],D=g==="none"?p[A]:S(p[A],h);if(C){const P=C.length;for(let k=0;k<P;k++)o[C[k]]=D}else O?this.options.visualElement.renderState.vars[A]=D:o[A]=D}this.options.layoutId&&(o.pointerEvents=h===this?i1(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(TI),this.root.sharedNodes.clear()}}}function eU(n){n.updateLayout()}function nU(n){const t=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=n.layout,{animationType:i}=n.options,a=t.source!==n.layout.source;i==="size"?Yr(p=>{const g=a?t.measuredBox[p]:t.layoutBox[p],v=sr(g);g.min=e[p].min,g.max=g.min+v}):T8(i,t.layoutBox,e)&&Yr(p=>{const g=a?t.measuredBox[p]:t.layoutBox[p],v=sr(e[p]);g.max=g.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+v)});const o=Sl();nh(o,e,t.layoutBox);const l=Sl();a?nh(l,n.applyTransform(r,!0),t.measuredBox):nh(l,e,t.layoutBox);const c=!x8(o);let h=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:v}=p;if(g&&v){const x=mn();H1(x,t.layoutBox,g.layoutBox);const A=mn();H1(A,e,v.layoutBox),E8(x,A)||(h=!0),p.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:e}=n.options;e&&e()}n.options.transition=void 0}function rU(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function iU(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function aU(n){n.clearSnapshot()}function TI(n){n.clearMeasurements()}function SI(n){n.isLayoutDirty=!1}function sU(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function II(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function oU(n){n.resolveTargetDelta()}function uU(n){n.calcProjection()}function lU(n){n.resetSkewAndRotation()}function cU(n){n.removeLeadSnapshot()}function CI(n,t,e){n.translate=Fe(t.translate,0,e),n.scale=Fe(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function bI(n,t,e,r){n.min=Fe(t.min,e.min,r),n.max=Fe(t.max,e.max,r)}function fU(n,t,e,r){bI(n.x,t.x,e.x,r),bI(n.y,t.y,e.y,r)}function hU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const dU={duration:.45,ease:[.4,0,.1,1]},RI=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),DI=RI("applewebkit/")&&!RI("chrome/")?Math.round:ti;function OI(n){n.min=DI(n.min),n.max=DI(n.max)}function pU(n){OI(n.x),OI(n.y)}function T8(n,t,e){return n==="position"||n==="preserve-aspect"&&!AF(AI(t),AI(e),.2)}function gU(n){return n!==n.root&&n.scroll?.wasRoot}const mU=w8({attachResizeListener:(n,t)=>Th(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fy={current:void 0},S8=w8({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fy.current){const n=new mU({});n.mount(window),n.setOptions({layoutScroll:!0}),fy.current=n}return fy.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),yU={pan:{Feature:kF},drag:{Feature:LF,ProjectionNode:S8,MeasureLayout:y8}};function NI(n,t,e){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,a=r[i];a&&Ne.postRender(()=>a(t,Hh(t)))}class vU extends to{mount(){const{current:t}=this.node;t&&(this.unmount=Xk(t,(e,r)=>(NI(this.node,r,"Start"),i=>NI(this.node,i,"End"))))}unmount(){}}class _U extends to{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Uh(Th(this.node.current,"focus",()=>this.onFocus()),Th(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PI(n,t,e){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),a=r[i];a&&Ne.postRender(()=>a(t,Hh(t)))}class xU extends to{mount(){const{current:t}=this.node;t&&(this.unmount=Qk(t,(e,r)=>(PI(this.node,r,"Start"),(i,{success:a})=>PI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Iv=new WeakMap,hy=new WeakMap,EU=n=>{const t=Iv.get(n.target);t&&t(n)},AU=n=>{n.forEach(EU)};function wU({root:n,...t}){const e=n||document;hy.has(e)||hy.set(e,{});const r=hy.get(e),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(AU,{root:n,...t})),r[i]}function TU(n,t,e){const r=wU(t);return Iv.set(n,e),r.observe(n),()=>{Iv.delete(n),r.unobserve(n)}}const SU={some:0,all:1};class IU extends to{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:a}=t,o={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:SU[i]},l=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),v=h?p:g;v&&v(c)};return TU(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(CU(t,e))&&this.startObserver()}unmount(){}}function CU({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const bU={inView:{Feature:IU},tap:{Feature:xU},focus:{Feature:_U},hover:{Feature:vU}},RU={layout:{ProjectionNode:S8,MeasureLayout:y8}},DU={...mF,...bU,...yU,...RU},N0=MB(DU,XB);function I8(n){const t=Tp(()=>mu(n)),{isStatic:e}=st.useContext(E2);if(e){const[,r]=st.useState(n);st.useEffect(()=>t.on("change",r),[])}return t}function C8(n,t){const e=I8(t()),r=()=>e.set(t());return r(),J_(()=>{const i=()=>Ne.preRender(r,!1,!0),a=n.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),Va(r)}}),e}function OU(n){th.current=[],n();const t=C8(th.current,n);return th.current=void 0,t}function dy(n,t,e,r){if(typeof n=="function")return OU(n);const i=typeof t=="function"?t:Jk(t,e,r);return Array.isArray(n)?MI(n,i):MI([n],([a])=>i(a))}function MI(n,t){const e=Tp(()=>[]);return C8(n,()=>{e.length=0;const r=n.length;for(let i=0;i<r;i++)e[i]=n[i].get();return t(e)})}function NU(n){n.values.forEach(t=>t.stop())}function Cv(n,t){[...t].reverse().forEach(r=>{const i=n.getVariant(r);i&&D2(n,i),n.variantChildren&&n.variantChildren.forEach(a=>{Cv(a,t)})})}function PU(n,t){if(Array.isArray(t))return Cv(n,t);if(typeof t=="string")return Cv(n,[t]);D2(n,t)}function MU(){const n=new Set,t={subscribe(e){return n.add(e),()=>{n.delete(e)}},start(e,r){const i=[];return n.forEach(a=>{i.push(l8(a,e,{transitionOverride:r}))}),Promise.all(i)},set(e){return n.forEach(r=>{PU(r,e)})},stop(){n.forEach(e=>{NU(e)})},mount(){return()=>{t.stop()}}};return t}function VU(){const n=Tp(MU);return J_(n.mount,[]),n}const LU=VU,b8=({children:n,onSwipeLeft:t,onSwipeRight:e,threshold:r=80})=>{const i=LU(),a=I8(0),o=dy(a,[-50,0,50],[1,0,1]),l=dy(a,[-50,0,50],[0,0,1]),c=dy(a,[-50,0,50],[1,0,0]),h=async(p,g)=>{const v=g.offset.x,x=g.velocity.x;e&&(v>r||x>400)?(e(),await i.start({x:0,opacity:1,transition:{type:"spring",stiffness:300,damping:25}})):t&&(v<-r||x<-400)?(await i.start({x:-500,opacity:0}),t()):i.start({x:0,opacity:1})};return L.jsxs("div",{style:{position:"relative",overflow:"hidden",touchAction:"pan-y"},children:[L.jsxs(N0.div,{style:{position:"absolute",inset:0,display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 20px",borderRadius:"var(--radius-md)",backgroundColor:"var(--color-surface)",opacity:o},children:[L.jsxs(N0.div,{style:{display:"flex",alignItems:"center",gap:"8px",color:"#10b981",fontWeight:"bold",opacity:l},children:[L.jsx(Hv,{size:24}),L.jsx("span",{children:"Complete"})]}),L.jsxs(N0.div,{style:{display:"flex",alignItems:"center",gap:"8px",color:"#ef4444",fontWeight:"bold",opacity:c},children:[L.jsx("span",{children:"Delete"}),L.jsx(wC,{size:24})]})]}),L.jsx(N0.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.7,onDragEnd:h,animate:i,style:{x:a,position:"relative",zIndex:10,background:"var(--color-surface-light)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"var(--radius-md)",userSelect:"none"},children:n})]})},kU=({items:n,onAddItem:t,onDeleteItem:e})=>{const{addTodo:r}=K4(),{updateItem:i,seedData:a}=Q_(),[o,l]=TD.useState({show:!1,msg:""}),c=g=>{r(g.name,1,g.category),l({show:!0,msg:`Added ${g.name} to Shopping List`}),setTimeout(()=>l({show:!1,msg:""}),3e3)},h=(g,v)=>{i(g.id,{stockLevel:v})},p=n.reduce((g,v)=>{const x=v.category||"Other";return g[x]||(g[x]=[]),g[x].push(v),g},{});return L.jsxs("div",{className:"animate-fade-in",style:{paddingBottom:"80px"},children:[L.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"16px"},children:L.jsxs(Wn,{onClick:t,className:"tap-scale",children:[L.jsx(l1,{size:18})," Add Item"]})}),n.length===0?L.jsxs("div",{style:{textAlign:"center",padding:"48px",opacity:.8},children:[L.jsx("p",{style:{marginBottom:"16px"},children:"Your pantry is empty."}),L.jsx(Wn,{onClick:()=>a&&a(),children:"Preload Essentials"})]}):L.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(p).map(([g,v],x)=>L.jsxs("div",{className:"animate-slide-up",style:{animationDelay:`${x*50}ms`},children:[L.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",paddingLeft:"8px",borderLeft:"4px solid hsl(var(--color-primary))"},children:L.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"hsl(var(--color-primary))",textTransform:"uppercase",letterSpacing:"0.05em"},children:g})}),L.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:v.map(A=>L.jsx(b8,{onSwipeLeft:()=>e(A.id),children:L.jsxs("div",{className:"glass-panel",style:{display:"flex",alignItems:"center",padding:"16px",background:A.stockLevel==="low"?"rgba(239, 68, 68, 0.05)":"var(--color-surface)",border:"1px solid var(--glass-border)",borderRadius:"12px",marginBottom:"8px"},children:[L.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid var(--text-muted)",borderRadius:"6px",marginRight:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",opacity:.5},onClick:()=>c(A),title:"Add to Shopping List",children:L.jsx(l1,{size:14})}),L.jsx("div",{style:{flex:1},children:L.jsx("span",{style:{fontWeight:500,fontSize:"1rem"},children:A.name})}),L.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[L.jsx("button",{onClick:()=>h(A,"low"),className:"tap-scale",style:{background:A.stockLevel==="low"?"rgba(239, 68, 68, 0.1)":"transparent",border:"none",fontSize:"0.8rem",fontWeight:"600",color:A.stockLevel==="low"?"#ef4444":"var(--text-muted)",cursor:"pointer",opacity:A.stockLevel==="low"?1:.4,transition:"all 0.2s",padding:"4px 8px",borderRadius:"8px"},children:"Low"}),L.jsx("button",{onClick:()=>h(A,"full"),className:"tap-scale",style:{background:A.stockLevel==="full"?"rgba(16, 185, 129, 0.1)":"transparent",border:"none",fontSize:"0.8rem",fontWeight:"600",color:A.stockLevel==="full"?"#10b981":"var(--text-muted)",cursor:"pointer",opacity:A.stockLevel==="full"?1:.4,transition:"all 0.2s",padding:"4px 8px",borderRadius:"8px"},children:"Full"})]})]})},A.id))})]},g))}),L.jsx(wp,{isVisible:o.show,message:o.msg,type:"success",onClose:()=>l({show:!1,msg:""})})]})},bp=({children:n,className:t="",hoverEffect:e=!1,style:r,...i})=>L.jsx("div",{className:`glass-panel ${e?"hover-lift":""} ${t}`,style:{padding:"24px",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:e?"pointer":"default",...r},...i,children:n});function BU(n,t){var e=Object.setPrototypeOf;e?e(n,t):n.__proto__=t}function FU(n,t){t===void 0&&(t=n.constructor);var e=Error.captureStackTrace;e&&e(n,t)}var UU=(function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},n(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),zU=(function(n){UU(t,n);function t(e,r){var i=this.constructor,a=n.call(this,e,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),BU(a,i.prototype),FU(a),a}return t})(Error),jU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Er=(function(n){jU(t,n);function t(e){e===void 0&&(e=void 0);var r=n.call(this,e)||this;return r.message=e,r}return t.prototype.getKind=function(){var e=this.constructor;return e.kind},t.kind="Exception",t})(zU),HU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),mi=(function(n){HU(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArgumentException",t})(Er),GU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),bt=(function(n){GU(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t})(Er),qU=(function(){function n(t){if(this.binarizer=t,t===null)throw new bt("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(t,e){return this.binarizer.getBlackRow(t,e)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(t,e,r,i){var a=this.binarizer.getLuminanceSource().crop(t,e,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(t))},n.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(t))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),KU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Rn=(function(n){KU(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t})(Er),XU=(function(){function n(t){this.source=t}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),Ie=(function(){function n(){}return n.arraycopy=function(t,e,r,i,a){for(;a--;)r[i++]=t[e++]},n.currentTimeMillis=function(){return Date.now()},n})(),WU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),N2=(function(n){WU(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t})(Er),YU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),VI=(function(n){YU(t,n);function t(e,r){e===void 0&&(e=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=e,i.message=r,i}return t.kind="ArrayIndexOutOfBoundsException",t})(N2),$U=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_n=(function(){function n(){}return n.fill=function(t,e){for(var r=0,i=t.length;r<i;r++)t[r]=e},n.fillWithin=function(t,e,r,i){n.rangeCheck(t.length,e,r);for(var a=e;a<r;a++)t[a]=i},n.rangeCheck=function(t,e,r){if(e>r)throw new bt("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new VI(e);if(r>t)throw new VI(r)},n.asList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},n.create=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Array.from({length:e}).fill(r)})},n.createInt32Array=function(t,e,r){var i=Array.from({length:t});return i.map(function(a){return Int32Array.from({length:e}).fill(r)})},n.equals=function(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]!==e[r])return!1;return!0},n.hashCode=function(t){var e,r;if(t===null)return 0;var i=1;try{for(var a=$U(t),o=a.next();!o.done;o=a.next()){var l=o.value;i=31*i+l}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.fillUint8Array=function(t,e){for(var r=0;r!==t.length;r++)t[r]=e},n.copyOf=function(t,e){return t.slice(0,e)},n.copyOfUint8Array=function(t,e){if(t.length<=e){var r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)},n.copyOfRange=function(t,e,r){var i=r-e,a=new Int32Array(i);return Ie.arraycopy(t,e,a,0,i),a},n.binarySearch=function(t,e,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=t.length-1;i<=a;){var o=a+i>>1,l=r(e,t[o]);if(l>0)i=o+1;else if(l<0)a=o-1;else return o}return-i-1},n.numberComparator=function(t,e){return t-e},n})(),Ht=(function(){function n(){}return n.numberOfTrailingZeros=function(t){var e;if(t===0)return 32;var r=31;return e=t<<16,e!==0&&(r-=16,t=e),e=t<<8,e!==0&&(r-=8,t=e),e=t<<4,e!==0&&(r-=4,t=e),e=t<<2,e!==0&&(r-=2,t=e),r-(t<<1>>>31)},n.numberOfLeadingZeros=function(t){if(t===0)return 32;var e=1;return t>>>16||(e+=16,t<<=16),t>>>24||(e+=8,t<<=8),t>>>28||(e+=4,t<<=4),t>>>30||(e+=2,t<<=2),e-=t>>>31,e},n.toHexString=function(t){return t.toString(16)},n.toBinaryString=function(t){return String(parseInt(String(t),2))},n.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},n.truncDivision=function(t,e){return Math.trunc(t/e)},n.parseInt=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Dn=(function(){function n(t,e){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,e==null?this.bits=n.makeArray(t):this.bits=e)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var e=n.makeArray(t);Ie.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}},n.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},n.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},n.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},n.prototype.getNextSet=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=r[i];a&=~((1<<(t&31))-1);for(var o=r.length;a===0;){if(++i===o)return e;a=r[i]}var l=i*32+Ht.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.getNextUnset=function(t){var e=this.size;if(t>=e)return e;var r=this.bits,i=Math.floor(t/32),a=~r[i];a&=~((1<<(t&31))-1);for(var o=r.length;a===0;){if(++i===o)return e;a=~r[i]}var l=i*32+Ht.numberOfTrailingZeros(a);return l>e?e:l},n.prototype.setBulk=function(t,e){this.bits[Math.floor(t/32)]=e},n.prototype.setRange=function(t,e){if(e<t||t<0||e>this.size)throw new bt;if(e!==t){e--;for(var r=Math.floor(t/32),i=Math.floor(e/32),a=this.bits,o=r;o<=i;o++){var l=o>r?0:t&31,c=o<i?31:e&31,h=(2<<c)-(1<<l);a[o]|=h}}},n.prototype.clear=function(){for(var t=this.bits.length,e=this.bits,r=0;r<t;r++)e[r]=0},n.prototype.isRange=function(t,e,r){if(e<t||t<0||e>this.size)throw new bt;if(e===t)return!0;e--;for(var i=Math.floor(t/32),a=Math.floor(e/32),o=this.bits,l=i;l<=a;l++){var c=l>i?0:t&31,h=l<a?31:e&31,p=(2<<h)-(1<<c)&4294967295;if((o[l]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(t,e){if(e<0||e>32)throw new bt("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(var r=e;r>0;r--)this.appendBit((t>>r-1&1)===1)},n.prototype.appendBitArray=function(t){var e=t.size;this.ensureCapacity(this.size+e);for(var r=0;r<e;r++)this.appendBit(t.get(r))},n.prototype.xor=function(t){if(this.size!==t.size)throw new bt("Sizes don't match");for(var e=this.bits,r=0,i=e.length;r<i;r++)e[r]^=t.bits[r]},n.prototype.toBytes=function(t,e,r,i){for(var a=0;a<i;a++){for(var o=0,l=0;l<8;l++)this.get(t)&&(o|=1<<7-l),t++;e[r+a]=o}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,i=this.bits,a=0;a<r;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,t[e-a]=o}if(this.size!==r*32){for(var l=r*32-this.size,c=t[0]>>>l,a=1;a<r;a++){var h=t[a];c|=h<<32-l,t[a-1]=c,c=h>>>l}t[r-1]=c}this.bits=t},n.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.size===e.size&&_n.equals(this.bits,e.bits)},n.prototype.hashCode=function(){return 31*this.size+_n.hashCode(this.bits)},n.prototype.toString=function(){for(var t="",e=0,r=this.size;e<r;e++)(e&7)===0&&(t+=" "),t+=this.get(e)?"X":".";return t},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var t=[],e=0,r=this.size;e<r;e++)t.push(this.get(e));return t},n})(),bv;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(bv||(bv={}));const Ue=bv;var QU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),dt=(function(n){QU(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t})(Er),ZU=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ge;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(ge||(ge={}));var vn=(function(){function n(t,e,r){for(var i,a,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=t,this.name=r,typeof e=="number"?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=o,n.VALUE_IDENTIFIER_TO_ECI.set(t,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,h=0,p=c.length;h!==p;h++){var g=c[h];n.VALUES_TO_ECI.set(g,this)}try{for(var v=ZU(o),x=v.next();!x.done;x=v.next()){var A=x.value;n.NAME_TO_ECI.set(A,this)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new dt("incorect value");var e=n.VALUES_TO_ECI.get(t);if(e===void 0)throw new dt("incorect value");return e},n.getCharacterSetECIByName=function(t){var e=n.NAME_TO_ECI.get(t);if(e===void 0)throw new dt("incorect value");return e},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.getName()===e.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(ge.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(ge.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(ge.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(ge.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(ge.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(ge.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(ge.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(ge.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(ge.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(ge.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(ge.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(ge.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(ge.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(ge.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(ge.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(ge.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(ge.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(ge.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(ge.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(ge.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(ge.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(ge.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(ge.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(ge.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(ge.Big5,28,"Big5"),n.GB18030=new n(ge.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(ge.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),JU=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),s1=(function(n){JU(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t})(Er),ei=(function(){function n(){}return n.decode=function(t,e){var r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)},n.shouldDecodeOnFallback=function(t){return!n.isBrowser()&&t==="ISO-8859-1"},n.encode=function(t,e){var r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(t){return typeof t=="string"?t:t.getName()},n.encodingCharacterSet=function(t){return t instanceof vn?t:vn.getCharacterSetECIByName(t)},n.decodeFallback=function(t,e){var r=this.encodingCharacterSet(e);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,o=t.length;a<o;a++){var l=t[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(vn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new s1("Encoding "+this.encodingName(e)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(t){return t.equals(vn.UTF8)||t.equals(vn.ISO8859_1)||t.equals(vn.ASCII)},n.encodeFallback=function(t){for(var e=btoa(unescape(encodeURIComponent(t))),r=e.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),te=(function(){function n(){}return n.castAsNonUtf8Char=function(t,e){e===void 0&&(e=null);var r=e?e.getName():this.ISO88591;return ei.decode(new Uint8Array([t]),r)},n.guessEncoding=function(t,e){if(e!=null&&e.get(Ue.CHARACTER_SET)!==void 0)return e.get(Ue.CHARACTER_SET).toString();for(var r=t.length,i=!0,a=!0,o=!0,l=0,c=0,h=0,p=0,g=0,v=0,x=0,A=0,S=0,C=0,O=0,D=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,P=0;P<r&&(i||a||o);P++){var k=t[P]&255;o&&(l>0?(k&128)===0?o=!1:l--:(k&128)!==0&&((k&64)===0?o=!1:(l++,(k&32)===0?c++:(l++,(k&16)===0?h++:(l++,(k&8)===0?p++:o=!1))))),i&&(k>127&&k<160?i=!1:k>159&&(k<192||k===215||k===247)&&O++),a&&(g>0?k<64||k===127||k>252?a=!1:g--:k===128||k===160||k>239?a=!1:k>160&&k<224?(v++,A=0,x++,x>S&&(S=x)):k>127?(g++,x=0,A++,A>C&&(C=A)):(x=0,A=0))}return o&&l>0&&(o=!1),a&&g>0&&(a=!1),o&&(D||c+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||C>=3)?n.SHIFT_JIS:i&&a?S===2&&v===2||O*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:o?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=-1;function a(l,c,h,p,g,v){if(l==="%%")return"%";if(e[++i]!==void 0){l=p?parseInt(p.substr(1)):void 0;var x=g?parseInt(g.substr(1)):void 0,A;switch(v){case"s":A=e[i];break;case"c":A=e[i][0];break;case"f":A=parseFloat(e[i]).toFixed(l);break;case"p":A=parseFloat(e[i]).toPrecision(l);break;case"e":A=parseFloat(e[i]).toExponential(l);break;case"x":A=parseInt(e[i]).toString(x||16);break;case"d":A=parseFloat(parseInt(e[i],x||10).toPrecision(l)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(x);for(var S=parseInt(h),C=h&&h[0]+""=="0"?"0":" ";A.length<S;)A=c!==void 0?A+C:C+A;return A}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(o,a)},n.getBytes=function(t,e){return ei.encode(t,e)},n.getCharCode=function(t,e){return e===void 0&&(e=0),t.charCodeAt(e)},n.getCharAt=function(t){return String.fromCharCode(t)},n.SHIFT_JIS=vn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=vn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=vn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),zt=(function(){function n(t){t===void 0&&(t=""),this.value=t}return n.prototype.enableDecoding=function(t){return this.encoding=t,this},n.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=te.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},n.prototype.appendChars=function(t,e,r){for(var i=e;e<e+r;i++)this.append(t[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(t){return this.value.charAt(t)},n.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},n.prototype.setCharAt=function(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)},n.prototype.substring=function(t,e){return this.value.substring(t,e)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(t,e){this.value=this.value.substring(0,t)+e+this.value.substring(t)},n})(),ia=(function(){function n(t,e,r,i){if(this.width=t,this.height=e,this.rowSize=r,this.bits=i,e==null&&(e=t),this.height=e,t<1||e<1)throw new bt("Both dimensions must be greater than 0");r==null&&(r=Math.floor((t+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(t){for(var e=t.length,r=t[0].length,i=new n(r,e),a=0;a<e;a++)for(var o=t[a],l=0;l<r;l++)o[l]&&i.set(l,a);return i},n.parseFromString=function(t,e,r){if(t===null)throw new bt("stringRepresentation cannot be null");for(var i=new Array(t.length),a=0,o=0,l=-1,c=0,h=0;h<t.length;)if(t.charAt(h)===`
`||t.charAt(h)==="\r"){if(a>o){if(l===-1)l=a-o;else if(a-o!==l)throw new bt("row lengths do not match");o=a,c++}h++}else if(t.substring(h,h+e.length)===e)h+=e.length,i[a]=!0,a++;else if(t.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new bt("illegal character encountered: "+t.substring(h));if(a>o){if(l===-1)l=a-o;else if(a-o!==l)throw new bt("row lengths do not match");c++}for(var p=new n(l,c),g=0;g<a;g++)i[g]&&p.set(Math.floor(g%l),Math.floor(g/l));return p},n.prototype.get=function(t,e){var r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(t&31)&1)!==0},n.prototype.set=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(t&31)&4294967295},n.prototype.unset=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(t&31)&4294967295)},n.prototype.flip=function(t,e){var r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(t&31)&4294967295},n.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new bt("input matrix dimensions do not match");for(var e=new Dn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var l=a*r,c=t.getRow(a,e).getBitArray(),h=0;h<r;h++)i[l+h]^=c[h]},n.prototype.clear=function(){for(var t=this.bits,e=t.length,r=0;r<e;r++)t[r]=0},n.prototype.setRegion=function(t,e,r,i){if(e<0||t<0)throw new bt("Left and top must be nonnegative");if(i<1||r<1)throw new bt("Height and width must be at least 1");var a=t+r,o=e+i;if(o>this.height||a>this.width)throw new bt("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,h=e;h<o;h++)for(var p=h*l,g=t;g<a;g++)c[p+Math.floor(g/32)]|=1<<(g&31)&4294967295},n.prototype.getRow=function(t,e){e==null||e.getSize()<this.width?e=new Dn(this.width):e.clear();for(var r=this.rowSize,i=this.bits,a=t*r,o=0;o<r;o++)e.setBulk(o*32,i[a+o]);return e},n.prototype.setRow=function(t,e){Ie.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var t=this.getWidth(),e=this.getHeight(),r=new Dn(t),i=new Dn(t),a=0,o=Math.floor((e+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(e-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(e-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var t=this.width,e=this.height,r=this.rowSize,i=this.bits,a=t,o=e,l=-1,c=-1,h=0;h<e;h++)for(var p=0;p<r;p++){var g=i[h*r+p];if(g!==0){if(h<o&&(o=h),h>c&&(c=h),p*32<a){for(var v=0;(g<<31-v&4294967295)===0;)v++;p*32+v<a&&(a=p*32+v)}if(p*32+31>l){for(var v=31;!(g>>>v);)v--;p*32+v>l&&(l=p*32+v)}}}return l<a||c<o?null:Int32Array.from([a,o,l-a+1,c-o+1])},n.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,e=this.bits,r=0;r<e.length&&e[r]===0;)r++;if(r===e.length)return null;for(var i=r/t,a=r%t*32,o=e[r],l=0;(o<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,e=this.bits,r=e.length-1;r>=0&&e[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/t),a=Math.floor(r%t)*32,o=e[r],l=31;!(o>>>l);)l--;return a+=l,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.width===e.width&&this.height===e.height&&this.rowSize===e.rowSize&&_n.equals(this.bits,e.bits)},n.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+_n.hashCode(this.bits),t},n.prototype.toString=function(t,e,r){return t===void 0&&(t="X "),e===void 0&&(e="  "),r===void 0&&(r=`
`),this.buildToString(t,e,r)},n.prototype.buildToString=function(t,e,r){for(var i=new zt,a=0,o=this.height;a<o;a++){for(var l=0,c=this.width;l<c;l++)i.append(this.get(l,a)?t:e);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),tz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),rt=(function(n){tz(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t})(Er),ez=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),nz=(function(n){ez(t,n);function t(e){var r=n.call(this,e)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return t.prototype.getBlackRow=function(e,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new Dn(a):r.clear(),this.initArrays(a);for(var o=i.getRow(e,this.luminances),l=this.buckets,c=0;c<a;c++)l[(o[c]&255)>>t.LUMINANCE_SHIFT]++;var h=t.estimateBlackPoint(l);if(a<3)for(var c=0;c<a;c++)(o[c]&255)<h&&r.set(c);else for(var p=o[0]&255,g=o[1]&255,c=1;c<a-1;c++){var v=o[c+1]&255;(g*4-p-v)/2<h&&r.set(c),p=g,g=v}return r},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),a=new ia(r,i);this.initArrays(r);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(i*l/5),h=e.getRow(c,this.luminances),p=Math.floor(r*4/5),g=Math.floor(r/5);g<p;g++){var v=h[g]&255;o[v>>t.LUMINANCE_SHIFT]++}for(var x=t.estimateBlackPoint(o),A=e.getMatrix(),l=0;l<i;l++)for(var S=l*r,g=0;g<r;g++){var v=A[S+g]&255;v<x&&a.set(g,l)}return a},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var r=this.buckets,i=0;i<t.LUMINANCE_BUCKETS;i++)r[i]=0},t.estimateBlackPoint=function(e){for(var r=e.length,i=0,a=0,o=0,l=0;l<r;l++)e[l]>o&&(a=l,o=e[l]),e[l]>i&&(i=e[l]);for(var c=0,h=0,l=0;l<r;l++){var p=l-a,g=e[l]*p*p;g>h&&(c=l,h=g)}if(a>c){var v=a;a=c,c=v}if(c-a<=r/16)throw new rt;for(var x=c-1,A=-1,l=c-1;l>a;l--){var S=l-a,g=S*S*(c-l)*(i-e[l]);g>A&&(x=l,A=g)}return x<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t})(XU),rz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),iz=(function(n){rz(t,n);function t(e){var r=n.call(this,e)||this;return r.matrix=null,r}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var a=e.getMatrix(),o=r>>t.BLOCK_SIZE_POWER;(r&t.BLOCK_SIZE_MASK)!==0&&o++;var l=i>>t.BLOCK_SIZE_POWER;(i&t.BLOCK_SIZE_MASK)!==0&&l++;var c=t.calculateBlackPoints(a,o,l,r,i),h=new ia(r,i);t.calculateThresholdForBlock(a,o,l,r,i,c,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,r,i,a,o,l,c){for(var h=o-t.BLOCK_SIZE,p=a-t.BLOCK_SIZE,g=0;g<i;g++){var v=g<<t.BLOCK_SIZE_POWER;v>h&&(v=h);for(var x=t.cap(g,2,i-3),A=0;A<r;A++){var S=A<<t.BLOCK_SIZE_POWER;S>p&&(S=p);for(var C=t.cap(A,2,r-3),O=0,D=-2;D<=2;D++){var P=l[x+D];O+=P[C-2]+P[C-1]+P[C]+P[C+1]+P[C+2]}var k=O/25;t.thresholdBlock(e,S,v,k,a,c)}}},t.cap=function(e,r,i){return e<r?r:e>i?i:e},t.thresholdBlock=function(e,r,i,a,o,l){for(var c=0,h=i*o+r;c<t.BLOCK_SIZE;c++,h+=o)for(var p=0;p<t.BLOCK_SIZE;p++)(e[h+p]&255)<=a&&l.set(r+p,i+c)},t.calculateBlackPoints=function(e,r,i,a,o){for(var l=o-t.BLOCK_SIZE,c=a-t.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var g=p<<t.BLOCK_SIZE_POWER;g>l&&(g=l);for(var v=0;v<r;v++){var x=v<<t.BLOCK_SIZE_POWER;x>c&&(x=c);for(var A=0,S=255,C=0,O=0,D=g*a+x;O<t.BLOCK_SIZE;O++,D+=a){for(var P=0;P<t.BLOCK_SIZE;P++){var k=e[D+P]&255;A+=k,k<S&&(S=k),k>C&&(C=k)}if(C-S>t.MIN_DYNAMIC_RANGE)for(O++,D+=a;O<t.BLOCK_SIZE;O++,D+=a)for(var P=0;P<t.BLOCK_SIZE;P++)A+=e[D+P]&255}var j=A>>t.BLOCK_SIZE_POWER*2;if(C-S<=t.MIN_DYNAMIC_RANGE&&(j=S/2,p>0&&v>0)){var K=(h[p-1][v]+2*h[p][v-1]+h[p-1][v-1])/4;S<K&&(j=K)}h[p][v]=j}}return h},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t})(nz),Rp=(function(){function n(t,e){this.width=t,this.height=e}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(t,e,r,i){throw new s1("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new s1("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new s1("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),e=new zt,r=0;r<this.height;r++){for(var i=this.getRow(r,t),a=0;a<this.width;a++){var o=i[a]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",e.append(l)}e.append(`
`)}return e.toString()},n})(),az=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),P2=(function(n){az(t,n);function t(e){var r=n.call(this,e.getWidth(),e.getHeight())||this;return r.delegate=e,r}return t.prototype.getRow=function(e,r){for(var i=this.delegate.getRow(e,r),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(e[a]&255);return i},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,r,i,a){return new t(this.delegate.crop(e,r,i,a))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t})(Rp),sz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),oz=(function(n){sz(t,n);function t(e){var r=n.call(this,e.width,e.height)||this;return r.canvas=e,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(e),r}return t.makeBufferFromCanvasImageData=function(e){var r=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,r,i){var a=new Uint8ClampedArray(r*i);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX)for(var o=0,l=0,c=e.length;o<c;o+=4,l++){var h=void 0,p=e[o+3];if(p===0)h=255;else{var g=e[o],v=e[o+1],x=e[o+2];h=306*g+601*v+117*x+512>>10}a[l]=h}else for(var o=0,l=0,A=e.length;o<A;o+=4,l++){var h=void 0,p=e[o+3];if(p===0)h=255;else{var g=e[o],v=e[o+1],x=e[o+2];h=306*g+601*v+117*x+512>>10}a[l]=255-h}return a},t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new bt("Requested row is outside the image: "+e);var i=this.getWidth(),a=e*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return n.prototype.crop.call(this,e,r,i,a),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*l),h=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*l);return r.width=c,r.height=h,i.translate(c/2,h/2),i.rotate(a),i.drawImage(this.canvas,o/-2,l/-2),this.buffer=t.makeBufferFromCanvasImageData(r),this},t.prototype.invert=function(){return new P2(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t})(Rp),uz=(function(){function n(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),rr=function(n,t,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function l(p){try{h(r.next(p))}catch(g){o(g)}}function c(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(l,c)}h((r=r.apply(n,t||[])).next())})},ir=function(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){e.label=h[1];break}if(h[0]===6&&e.label<a[1]){e.label=a[1],a=h;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(h);break}a[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},lz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hc=(function(){function n(t,e,r){e===void 0&&(e=500),this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return rr(this,void 0,void 0,function(){var t,e,r,i,a,o,l,c,h,p,g,v;return ir(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=x.sent(),e=[];try{for(r=lz(t),i=r.next();!i.done;i=r.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(l=a.deviceId||a.id,c=a.label||"Video device "+(e.length+1),h=a.groupId,p={deviceId:l,label:c,kind:o,groupId:h},e.push(p))}catch(A){g={error:A}}finally{try{i&&!i.done&&(v=r.return)&&v.call(r)}finally{if(g)throw g.error}}return[2,e]}})})},n.prototype.getVideoInputDevices=function(){return rr(this,void 0,void 0,function(){var t;return ir(this,function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=e.sent(),[2,t.map(function(r){return new uz(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(t){return rr(this,void 0,void 0,function(){var e;return ir(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),e?[2,e.find(function(i){return i.deviceId===t})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(t,e){return rr(this,void 0,void 0,function(){return ir(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,e)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(t,e){return rr(this,void 0,void 0,function(){var r,i;return ir(this,function(a){switch(a.label){case 0:return this.reset(),t?r={deviceId:{exact:t}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,e)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(t,e){return rr(this,void 0,void 0,function(){var r;return ir(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,e)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(t,e){return rr(this,void 0,void 0,function(){var r,i;return ir(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(t,e,r){return rr(this,void 0,void 0,function(){return ir(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(t,e,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(t,e,r){return rr(this,void 0,void 0,function(){var i,a;return ir(this,function(o){switch(o.label){case 0:return t?i={deviceId:{exact:t}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,e,r)];case 1:return[2,o.sent()]}})})},n.prototype.decodeFromConstraints=function(t,e,r){return rr(this,void 0,void 0,function(){var i;return ir(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,e,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(t,e,r){return rr(this,void 0,void 0,function(){var i;return ir(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,e)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(t,e){return rr(this,void 0,void 0,function(){var r;return ir(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(e),this.addVideoSource(r,t),this.videoElement=r,this.stream=t,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(t){var e=this;return new Promise(function(r,i){return e.playVideoOnLoad(t,function(){return r()})})},n.prototype.playVideoOnLoad=function(t,e){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)},n.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},n.prototype.tryPlayVideo=function(t){return rr(this,void 0,void 0,function(){return ir(this,function(e){switch(e.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.play()];case 2:return e.sent(),[3,4];case 3:return e.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(t,e){var r=document.getElementById(t);if(!r)throw new mi("element with id '"+t+"' not found");if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new mi("element with id '"+t+"' must be an "+e+" element");return r},n.prototype.decodeFromImage=function(t,e){if(!t&&!e)throw new mi("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)},n.prototype.decodeFromVideo=function(t,e){if(!t&&!e)throw new mi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)},n.prototype.decodeFromVideoContinuously=function(t,e,r){if(t===void 0&&e===void 0)throw new mi("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)},n.prototype.decodeFromImageElement=function(t){if(!t)throw new mi("An image element must be provided.");this.reset();var e=this.prepareImageElement(t);this.imageElement=e;var r;return this.isImageLoaded(e)?r=this.decodeOnce(e,!1,!0):r=this._decodeOnLoadImage(e),r},n.prototype.decodeFromVideoElement=function(t){var e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)},n.prototype.decodeFromVideoElementContinuously=function(t,e){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)},n.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new mi("A video element must be provided.");this.reset();var e=this.prepareVideoElement(t);return this.videoElement=e,e},n.prototype.decodeFromImageUrl=function(t){if(!t)throw new mi("An URL must be provided.");this.reset();var e=this.prepareImageElement();this.imageElement=e;var r=this._decodeOnLoadImage(e);return e.src=t,r},n.prototype.decodeFromVideoUrl=function(t){if(!t)throw new mi("An URL must be provided.");this.reset();var e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r},n.prototype.decodeFromVideoUrlContinuously=function(t,e){if(!t)throw new mi("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,e);return r.src=t,i},n.prototype._decodeOnLoadImage=function(t){var e=this;return new Promise(function(r,i){e.imageLoadedListener=function(){return e.decodeOnce(t,!1,!0).then(r,i)},t.addEventListener("load",e.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(t){return rr(this,void 0,void 0,function(){return ir(this,function(e){switch(e.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return e.sent(),[4,this.decodeOnce(t)];case 2:return[2,e.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(t,e){return rr(this,void 0,void 0,function(){return ir(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),this.decodeContinuously(t,e),[2]}})})},n.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},n.prototype.prepareImageElement=function(t){var e;return typeof t>"u"&&(e=document.createElement("img"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e},n.prototype.prepareVideoElement=function(t){var e;return!t&&typeof document<"u"&&(e=document.createElement("video"),e.width=200,e.height=200),typeof t=="string"&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e},n.prototype.decodeOnce=function(t,e,r){var i=this;e===void 0&&(e=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(o,l){if(i._stopAsyncDecode){l(new rt("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(t);o(c)}catch(v){var h=e&&v instanceof rt,p=v instanceof Rn||v instanceof dt,g=p&&r;if(h||g)return setTimeout(a,i._timeBetweenDecodingAttempts,o,l);l(v)}};return new Promise(function(o,l){return a(o,l)})},n.prototype.decodeContinuously=function(t,e){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(t);e(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){e(null,c);var o=c instanceof Rn||c instanceof dt,l=c instanceof rt;(o||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(t){var e=this.createBinaryBitmap(t);return this.decodeBitmap(e)},n.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t),t instanceof HTMLVideoElement?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);var e=this.getCaptureCanvas(t),r=new oz(e),i=new iz(r);return new qU(i)},n.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var e=this.getCaptureCanvas(t),r=void 0;try{r=e.getContext("2d",{willReadFrequently:!0})}catch{r=e.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.drawImageOnCanvas=function(t,e,r){e===void 0&&(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)},n.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},n.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var e=document.createElement("canvas"),r,i;return typeof t<"u"&&(t instanceof HTMLVideoElement?(r=t.videoWidth,i=t.videoHeight):t instanceof HTMLImageElement&&(r=t.naturalWidth||t.width,i=t.naturalHeight||t.height)),e.style.width=r+"px",e.style.height=i+"px",e.width=r,e.height=i,e},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(t,e){try{t.srcObject=e}catch{t.src=URL.createObjectURL(e)}},n.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},n})(),Jn=(function(){function n(t,e,r,i,a,o){r===void 0&&(r=e==null?0:8*e.length),o===void 0&&(o=Ie.currentTimeMillis()),this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=t,this.rawBytes=e,r==null?this.numBits=e==null?0:8*e.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=Ie.currentTimeMillis():this.timestamp=o}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(t,e){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)},n.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},n.prototype.addResultPoints=function(t){var e=this.resultPoints;if(e===null)this.resultPoints=t;else if(t!==null&&t.length>0){var r=new Array(e.length+t.length);Ie.arraycopy(e,0,r,0,e.length),Ie.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),Rv;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Rv||(Rv={}));const Ct=Rv;var Dv;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Dv||(Dv={}));const jn=Dv;var Dp=(function(){function n(t,e,r,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=t==null?0:8*t.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(t){this.numBits=t},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(t){this.erasures=t},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(t){this.other=t},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),kf=(function(){function n(){}return n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new bt;return this.logTable[t]},n.addOrSubtract=function(t,e){return t^e},n})(),js=(function(){function n(t,e){if(e.length===0)throw new bt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Ie.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var e=this.coefficients,r;if(t===1){r=0;for(var i=0,a=e.length;i!==a;i++){var o=e[i];r=kf.addOrSubtract(r,o)}return r}r=e[0];for(var l=e.length,c=this.field,i=1;i<l;i++)r=kf.addOrSubtract(c.multiply(t,r),e[i]);return r},n.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new bt("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),o=r.length-e.length;Ie.arraycopy(r,0,a,0,o);for(var l=o;l<r.length;l++)a[l]=kf.addOrSubtract(e[l-o],r[l]);return new n(this.field,a)},n.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new bt("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,o=new Int32Array(r+a-1),l=this.field,c=0;c<r;c++)for(var h=e[c],p=0;p<a;p++)o[c+p]=kf.addOrSubtract(o[c+p],l.multiply(h,i[p]));return new n(l,o)},n.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var e=this.coefficients.length,r=this.field,i=new Int32Array(e),a=this.coefficients,o=0;o<e;o++)i[o]=r.multiply(a[o],t);return new n(r,i)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new bt;if(e===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+t),o=this.field,l=0;l<i;l++)a[l]=o.multiply(r[l],e);return new n(o,a)},n.prototype.divide=function(t){if(!this.field.equals(t.field))throw new bt("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new bt("Divide by 0");for(var e=this.field,r=e.getZero(),i=this,a=t.getCoefficient(t.getDegree()),o=e.inverse(a);i.getDegree()>=t.getDegree()&&!i.isZero();){var l=i.getDegree()-t.getDegree(),c=e.multiply(i.getCoefficient(i.getDegree()),o),h=t.multiplyByMonomial(l,c),p=e.buildMonomial(l,c);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var t="",e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);if(r!==0){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),e===0||r!==1){var i=this.field.log(r);i===0?t+="1":i===1?t+="a":(t+="a^",t+=i)}e!==0&&(e===1?t+="x":(t+="x^",t+=e))}}return t},n})(),cz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),R8=(function(n){cz(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ArithmeticException",t})(Er),fz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),yr=(function(n){fz(t,n);function t(e,r,i){var a=n.call(this)||this;a.primitive=e,a.size=r,a.generatorBase=i;for(var o=new Int32Array(r),l=1,c=0;c<r;c++)o[c]=l,l*=2,l>=r&&(l^=e,l&=r-1);a.expTable=o;for(var h=new Int32Array(r),c=0;c<r-1;c++)h[o[c]]=c;return a.logTable=h,a.zero=new js(a,Int32Array.from([0])),a.one=new js(a,Int32Array.from([1])),a}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new bt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new js(this,i)},t.prototype.inverse=function(e){if(e===0)throw new R8;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+Ht.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t})(kf),hz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),P0=(function(n){hz(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReedSolomonException",t})(Er),dz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Gh=(function(n){dz(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="IllegalStateException",t})(Er),Op=(function(){function n(t){this.field=t}return n.prototype.decode=function(t,e){for(var r=this.field,i=new js(r,t),a=new Int32Array(e),o=!0,l=0;l<e;l++){var c=i.evaluateAt(r.exp(l+r.getGeneratorBase()));a[a.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var h=new js(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(e,1),h,e),g=p[0],v=p[1],x=this.findErrorLocations(g),A=this.findErrorMagnitudes(v,x),l=0;l<x.length;l++){var S=t.length-1-r.log(x[l]);if(S<0)throw new P0("Bad error location");t[S]=yr.addOrSubtract(t[S],A[l])}},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=this.field,o=t,l=e,c=a.getZero(),h=a.getOne();l.getDegree()>=(r/2|0);){var p=o,g=c;if(o=l,c=h,o.isZero())throw new P0("r_{i-1} was zero");l=p;for(var v=a.getZero(),x=o.getCoefficient(o.getDegree()),A=a.inverse(x);l.getDegree()>=o.getDegree()&&!l.isZero();){var S=l.getDegree()-o.getDegree(),C=a.multiply(l.getCoefficient(l.getDegree()),A);v=v.addOrSubtract(a.buildMonomial(S,C)),l=l.addOrSubtract(o.multiplyByMonomial(S,C))}if(h=v.multiply(c).addOrSubtract(g),l.getDegree()>=o.getDegree())throw new Gh("Division algorithm failed to reduce polynomial?")}var O=h.getCoefficient(0);if(O===0)throw new P0("sigmaTilde(0) was zero");var D=a.inverse(O),P=h.multiplyScalar(D),k=l.multiplyScalar(D);return[P,k]},n.prototype.findErrorLocations=function(t){var e=t.getDegree();if(e===1)return Int32Array.from([t.getCoefficient(1)]);for(var r=new Int32Array(e),i=0,a=this.field,o=1;o<a.getSize()&&i<e;o++)t.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==e)throw new P0("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(t,e){for(var r=e.length,i=new Int32Array(r),a=this.field,o=0;o<r;o++){for(var l=a.inverse(e[o]),c=1,h=0;h<r;h++)if(o!==h){var p=a.multiply(e[h],l),g=(p&1)===0?p|1:p&-2;c=a.multiply(c,g)}i[o]=a.multiply(t.evaluateAt(l),a.inverse(c)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],l))}return i},n})(),Bn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(Bn||(Bn={}));var LI=(function(){function n(){}return n.prototype.decode=function(t){this.ddata=t;var e=t.getBits(),r=this.extractBits(e),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),o=n.getEncodedData(i),l=new Dp(a,o,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(t){return this.getEncodedData(t)},n.getEncodedData=function(t){for(var e=t.length,r=Bn.UPPER,i=Bn.UPPER,a="",o=0;o<e;)if(i===Bn.BINARY){if(e-o<5)break;var l=n.readCode(t,o,5);if(o+=5,l===0){if(e-o<11)break;l=n.readCode(t,o,11)+31,o+=11}for(var c=0;c<l;c++){if(e-o<8){o=e;break}var h=n.readCode(t,o,8);a+=te.castAsNonUtf8Char(h),o+=8}i=r}else{var p=i===Bn.DIGIT?4:5;if(e-o<p)break;var h=n.readCode(t,o,p);o+=p;var g=n.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=n.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a},n.getTable=function(t){switch(t){case"L":return Bn.LOWER;case"P":return Bn.PUNCT;case"M":return Bn.MIXED;case"D":return Bn.DIGIT;case"B":return Bn.BINARY;default:return Bn.UPPER}},n.getCharacter=function(t,e){switch(t){case Bn.UPPER:return n.UPPER_TABLE[e];case Bn.LOWER:return n.LOWER_TABLE[e];case Bn.MIXED:return n.MIXED_TABLE[e];case Bn.PUNCT:return n.PUNCT_TABLE[e];case Bn.DIGIT:return n.DIGIT_TABLE[e];default:throw new Gh("Bad table")}},n.prototype.correctBits=function(t){var e,r;this.ddata.getNbLayers()<=2?(r=6,e=yr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,e=yr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,e=yr.AZTEC_DATA_10):(r=12,e=yr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=t.length/r;if(a<i)throw new dt;for(var o=t.length%r,l=new Int32Array(a),c=0;c<a;c++,o+=r)l[c]=n.readCode(t,o,r);try{var h=new Op(e);h.decode(l,a-i)}catch(C){throw new dt(C)}for(var p=(1<<r)-1,g=0,c=0;c<i;c++){var v=l[c];if(v===0||v===p)throw new dt;(v===1||v===p-1)&&g++}for(var x=new Array(i*r-g),A=0,c=0;c<i;c++){var v=l[c];if(v===1||v===p-1)x.fill(v>1,A,A+r-1),A+=r-1;else for(var S=r-1;S>=0;--S)x[A++]=(v&1<<S)!==0}return x},n.prototype.extractBits=function(t){var e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(e?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,e));if(e)for(var l=0;l<a.length;l++)a[l]=l;else for(var c=i+1+2*Ht.truncDivision(Ht.truncDivision(i,2)-1,15),h=i/2,p=Ht.truncDivision(c,2),l=0;l<h;l++){var g=l+Ht.truncDivision(l,15);a[h-l-1]=p-g-1,a[h+l]=p+g+1}for(var l=0,v=0;l<r;l++){for(var x=(r-l)*4+(e?9:12),A=l*2,S=i-1-A,C=0;C<x;C++)for(var O=C*2,D=0;D<2;D++)o[v+O+D]=t.get(a[A+D],a[A+C]),o[v+2*x+O+D]=t.get(a[A+C],a[S-D]),o[v+4*x+O+D]=t.get(a[S-D],a[S-C]),o[v+6*x+O+D]=t.get(a[S-C],a[A+D]);v+=x*8}return o},n.readCode=function(t,e,r){for(var i=0,a=e;a<e+r;a++)i<<=1,t[a]&&(i|=1);return i},n.readByte=function(t,e){var r=t.length-e;return r>=8?n.readCode(t,e,8):n.readCode(t,e,r)<<8-r},n.convertBoolArrayToByteArray=function(t){for(var e=new Uint8Array((t.length+7)/8),r=0;r<e.length;r++)e[r]=n.readByte(t,8*r);return e},n.prototype.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),ie=(function(){function n(){}return n.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},n.distance=function(t,e,r,i){var a=t-r,o=e-i;return Math.sqrt(a*a+o*o)},n.sum=function(t){for(var e=0,r=0,i=t.length;r!==i;r++){var a=t[r];e+=a}return e},n})(),Ov=(function(){function n(){}return n.floatToIntBits=function(t){return t},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Et=(function(){function n(t,e){this.x=t,this.y=e}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(t){if(t instanceof n){var e=t;return this.x===e.x&&this.y===e.y}return!1},n.prototype.hashCode=function(){return 31*Ov.floatToIntBits(this.x)+Ov.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(t){var e=this.distance(t[0],t[1]),r=this.distance(t[1],t[2]),i=this.distance(t[0],t[2]),a,o,l;if(r>=e&&r>=i?(o=t[0],a=t[1],l=t[2]):i>=r&&i>=e?(o=t[1],a=t[0],l=t[2]):(o=t[2],a=t[0],l=t[1]),this.crossProductZ(a,o,l)<0){var c=a;a=l,l=c}t[0]=a,t[1]=o,t[2]=l},n.distance=function(t,e){return ie.distance(t.x,t.y,e.x,e.y)},n.crossProductZ=function(t,e,r){var i=e.x,a=e.y;return(r.x-i)*(t.y-a)-(r.y-a)*(t.x-i)},n})(),M2=(function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),pz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),gz=(function(n){pz(t,n);function t(e,r,i,a,o){var l=n.call(this,e,r)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=o,l}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t})(M2),Nv=(function(){function n(t,e,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),e==null&&(e=n.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);var a=e/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new rt}return n.prototype.detect=function(){for(var t=this.leftInit,e=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,l=!1,c=!1,h=!1,p=!1,g=!1,v=this.width,x=this.height;o;){o=!1;for(var A=!0;(A||!c)&&e<v;)A=this.containsBlackPoint(r,i,e,!1),A?(e++,o=!0,c=!0):c||e++;if(e>=v){a=!0;break}for(var S=!0;(S||!h)&&i<x;)S=this.containsBlackPoint(t,e,i,!0),S?(i++,o=!0,h=!0):h||i++;if(i>=x){a=!0;break}for(var C=!0;(C||!p)&&t>=0;)C=this.containsBlackPoint(r,i,t,!1),C?(t--,o=!0,p=!0):p||t--;if(t<0){a=!0;break}for(var O=!0;(O||!g)&&r>=0;)O=this.containsBlackPoint(t,e,r,!0),O?(r--,o=!0,g=!0):g||r--;if(r<0){a=!0;break}o&&(l=!0)}if(!a&&l){for(var D=e-t,P=null,k=1;P===null&&k<D;k++)P=this.getBlackPointOnSegment(t,i-k,t+k,i);if(P==null)throw new rt;for(var j=null,k=1;j===null&&k<D;k++)j=this.getBlackPointOnSegment(t,r+k,t+k,r);if(j==null)throw new rt;for(var K=null,k=1;K===null&&k<D;k++)K=this.getBlackPointOnSegment(e,r+k,e-k,r);if(K==null)throw new rt;for(var R=null,k=1;R===null&&k<D;k++)R=this.getBlackPointOnSegment(e,i-k,e-k,i);if(R==null)throw new rt;return this.centerEdges(R,P,K,j)}else throw new rt},n.prototype.getBlackPointOnSegment=function(t,e,r,i){for(var a=ie.round(ie.distance(t,e,r,i)),o=(r-t)/a,l=(i-e)/a,c=this.image,h=0;h<a;h++){var p=ie.round(t+h*o),g=ie.round(e+h*l);if(c.get(p,g))return new Et(p,g)}return null},n.prototype.centerEdges=function(t,e,r,i){var a=t.getX(),o=t.getY(),l=e.getX(),c=e.getY(),h=r.getX(),p=r.getY(),g=i.getX(),v=i.getY(),x=n.CORR;return a<this.width/2?[new Et(g-x,v+x),new Et(l+x,c+x),new Et(h-x,p-x),new Et(a+x,o-x)]:[new Et(g+x,v+x),new Et(l+x,c-x),new Et(h-x,p+x),new Et(a-x,o-x)]},n.prototype.containsBlackPoint=function(t,e,r,i){var a=this.image;if(i){for(var o=t;o<=e;o++)if(a.get(o,r))return!0}else for(var l=t;l<=e;l++)if(a.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),kI=(function(){function n(){}return n.checkAndNudgePoints=function(t,e){for(var r=t.getWidth(),i=t.getHeight(),a=!0,o=0;o<e.length&&a;o+=2){var l=Math.floor(e[o]),c=Math.floor(e[o+1]);if(l<-1||l>r||c<-1||c>i)throw new rt;a=!1,l===-1?(e[o]=0,a=!0):l===r&&(e[o]=r-1,a=!0),c===-1?(e[o+1]=0,a=!0):c===i&&(e[o+1]=i-1,a=!0)}a=!0;for(var o=e.length-2;o>=0&&a;o-=2){var l=Math.floor(e[o]),c=Math.floor(e[o+1]);if(l<-1||l>r||c<-1||c>i)throw new rt;a=!1,l===-1?(e[o]=0,a=!0):l===r&&(e[o]=r-1,a=!0),c===-1?(e[o+1]=0,a=!0):c===i&&(e[o+1]=i-1,a=!0)}},n})(),D8=(function(){function n(t,e,r,i,a,o,l,c,h){this.a11=t,this.a21=e,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=l,this.a23=c,this.a33=h}return n.quadrilateralToQuadrilateral=function(t,e,r,i,a,o,l,c,h,p,g,v,x,A,S,C){var O=n.quadrilateralToSquare(t,e,r,i,a,o,l,c),D=n.squareToQuadrilateral(h,p,g,v,x,A,S,C);return D.times(O)},n.prototype.transformPoints=function(t){for(var e=t.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,l=this.a22,c=this.a23,h=this.a31,p=this.a32,g=this.a33,v=0;v<e;v+=2){var x=t[v],A=t[v+1],S=a*x+c*A+g;t[v]=(r*x+o*A+h)/S,t[v+1]=(i*x+l*A+p)/S}},n.prototype.transformPointsWithValues=function(t,e){for(var r=this.a11,i=this.a12,a=this.a13,o=this.a21,l=this.a22,c=this.a23,h=this.a31,p=this.a32,g=this.a33,v=t.length,x=0;x<v;x++){var A=t[x],S=e[x],C=a*A+c*S+g;t[x]=(r*A+o*S+h)/C,e[x]=(i*A+l*S+p)/C}},n.squareToQuadrilateral=function(t,e,r,i,a,o,l,c){var h=t-r+a-l,p=e-i+o-c;if(h===0&&p===0)return new n(r-t,a-r,t,i-e,o-i,e,0,0,1);var g=r-a,v=l-a,x=i-o,A=c-o,S=g*A-v*x,C=(h*A-v*p)/S,O=(g*p-h*x)/S;return new n(r-t+C*r,l-t+O*l,t,i-e+C*i,c-e+O*c,e,C,O,1)},n.quadrilateralToSquare=function(t,e,r,i,a,o,l,c){return n.squareToQuadrilateral(t,e,r,i,a,o,l,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(t){return new n(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},n})(),mz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),yz=(function(n){mz(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.sampleGrid=function(e,r,i,a,o,l,c,h,p,g,v,x,A,S,C,O,D,P,k){var j=D8.quadrilateralToQuadrilateral(a,o,l,c,h,p,g,v,x,A,S,C,O,D,P,k);return this.sampleGridWithTransform(e,r,i,j)},t.prototype.sampleGridWithTransform=function(e,r,i,a){if(r<=0||i<=0)throw new rt;for(var o=new ia(r,i),l=new Float32Array(2*r),c=0;c<i;c++){for(var h=l.length,p=c+.5,g=0;g<h;g+=2)l[g]=g/2+.5,l[g+1]=p;a.transformPoints(l),kI.checkAndNudgePoints(e,l);try{for(var g=0;g<h;g+=2)e.get(Math.floor(l[g]),Math.floor(l[g+1]))&&o.set(g/2,c)}catch{throw new rt}}return o},t})(kI),V2=(function(){function n(){}return n.setGridSampler=function(t){n.gridSampler=t},n.getInstance=function(){return n.gridSampler},n.gridSampler=new yz,n})(),gr=(function(){function n(t,e){this.x=t,this.y=e}return n.prototype.toResultPoint=function(){return new Et(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),vz=(function(){function n(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(t){var e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),o=this.getMatrixCornerPoints(r);return new gz(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new rt;var e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);for(var i=0,a=0;a<4;a++){var o=r[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(t,e){var r=0;t.forEach(function(a,o,l){var c=(a>>e-2<<1)+(a&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ht.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new rt},n.prototype.getCorrectedParameterData=function(t,e){var r,i;e?(r=7,i=2):(r=10,i=4);for(var a=r-i,o=new Int32Array(r),l=r-1;l>=0;--l)o[l]=t&15,t>>=4;try{var c=new Op(yr.AZTEC_PARAM);c.decode(o,a)}catch{throw new rt}for(var h=0,l=0;l<i;l++)h=(h<<4)+o[l];return h},n.prototype.getBullsEyeCorners=function(t){var e=t,r=t,i=t,a=t,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(e,o,1,-1),c=this.getFirstDifferent(r,o,1,1),h=this.getFirstDifferent(i,o,-1,1),p=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var g=this.distancePoint(p,l)*this.nbCenterLayers/(this.distancePoint(a,e)*(this.nbCenterLayers+2));if(g<.75||g>1.25||!this.isWhiteOrBlackRectangle(l,c,h,p))break}e=l,r=c,i=h,a=p,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new rt;this.compact=this.nbCenterLayers===5;var v=new Et(e.getX()+.5,e.getY()-.5),x=new Et(r.getX()+.5,r.getY()+.5),A=new Et(i.getX()-.5,i.getY()+.5),S=new Et(a.getX()-.5,a.getY()-.5);return this.expandSquare([v,x,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var t,e,r,i;try{var a=new Nv(this.image).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;t=this.getFirstDifferent(new gr(o+7,l-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new gr(o+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new gr(o-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new gr(o-7,l-7),!1,-1,-1).toResultPoint()}var c=ie.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=ie.round((t.getY()+i.getY()+e.getY()+r.getY())/4);try{var a=new Nv(this.image,15,c,h).detect();t=a[0],e=a[1],r=a[2],i=a[3]}catch{t=this.getFirstDifferent(new gr(c+7,h-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new gr(c+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new gr(c-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new gr(c-7,h-7),!1,-1,-1).toResultPoint()}return c=ie.round((t.getX()+i.getX()+e.getX()+r.getX())/4),h=ie.round((t.getY()+i.getY()+e.getY()+r.getY())/4),new gr(c,h)},n.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(t,e,r,i,a){var o=V2.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,h=l/2+this.nbCenterLayers;return o.sampleGrid(t,l,l,c,c,h,c,h,h,c,h,e.getX(),e.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(t,e,r){for(var i=0,a=this.distanceResultPoint(t,e),o=a/r,l=t.getX(),c=t.getY(),h=o*(e.getX()-t.getX())/a,p=o*(e.getY()-t.getY())/a,g=0;g<r;g++)this.image.get(ie.round(l+g*h),ie.round(c+g*p))&&(i|=1<<r-g-1);return i},n.prototype.isWhiteOrBlackRectangle=function(t,e,r,i){var a=3;t=new gr(t.getX()-a,t.getY()+a),e=new gr(e.getX()-a,e.getY()-a),r=new gr(r.getX()+a,r.getY()-a),i=new gr(i.getX()+a,i.getY()+a);var o=this.getColor(i,t);if(o===0)return!1;var l=this.getColor(t,e);return l!==o||(l=this.getColor(e,r),l!==o)?!1:(l=this.getColor(r,i),l===o)},n.prototype.getColor=function(t,e){for(var r=this.distancePoint(t,e),i=(e.getX()-t.getX())/r,a=(e.getY()-t.getY())/r,o=0,l=t.getX(),c=t.getY(),h=this.image.get(t.getX(),t.getY()),p=Math.ceil(r),g=0;g<p;g++)l+=i,c+=a,this.image.get(ie.round(l),ie.round(c))!==h&&o++;var v=o/r;return v>.1&&v<.9?0:v<=.1===h?1:-1},n.prototype.getFirstDifferent=function(t,e,r,i){for(var a=t.getX()+r,o=t.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===e;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===e;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===e;)o+=i;return o-=i,new gr(a,o)},n.prototype.expandSquare=function(t,e,r){var i=r/(2*e),a=t[0].getX()-t[2].getX(),o=t[0].getY()-t[2].getY(),l=(t[0].getX()+t[2].getX())/2,c=(t[0].getY()+t[2].getY())/2,h=new Et(l+i*a,c+i*o),p=new Et(l-i*a,c-i*o);a=t[1].getX()-t[3].getX(),o=t[1].getY()-t[3].getY(),l=(t[1].getX()+t[3].getX())/2,c=(t[1].getY()+t[3].getY())/2;var g=new Et(l+i*a,c+i*o),v=new Et(l-i*a,c-i*o),x=[h,g,p,v];return x},n.prototype.isValid=function(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()},n.prototype.isValidPoint=function(t){var e=ie.round(t.getX()),r=ie.round(t.getY());return this.isValid(e,r)},n.prototype.distancePoint=function(t,e){return ie.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.distanceResultPoint=function(t,e){return ie.distance(t.getX(),t.getY(),e.getX(),e.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ht.truncDivision(this.nbLayers-4,8)+1)+15},n})(),Pv=(function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=null,i=new vz(t.getBlackMatrix()),a=null,o=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(e,a),o=new LI().decode(l)}catch(g){r=g}if(o==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(e,a),o=new LI().decode(l)}catch(g){throw r??g}var c=new Jn(o.getText(),o.getRawBytes(),o.getNumBits(),a,Ct.AZTEC,Ie.currentTimeMillis()),h=o.getByteSegments();h!=null&&c.putMetadata(jn.BYTE_SEGMENTS,h);var p=o.getECLevel();return p!=null&&c.putMetadata(jn.ERROR_CORRECTION_LEVEL,p),c},n.prototype.reportFoundResultPoints=function(t,e){if(t!=null){var r=t.get(Ue.NEED_RESULT_POINT_CALLBACK);r!=null&&e.forEach(function(i,a,o){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),_z=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){_z(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Pv,e)||this}return t})(hc);var xn=(function(){function n(){}return n.prototype.decode=function(t,e){try{return this.doDecode(t,e)}catch{var r=e&&e.get(Ue.TRY_HARDER)===!0;if(r&&t.isRotateSupported()){var i=t.rotateCounterClockwise(),a=this.doDecode(i,e),o=a.getResultMetadata(),l=270;o!==null&&o.get(jn.ORIENTATION)===!0&&(l=l+o.get(jn.ORIENTATION)%360),a.putMetadata(jn.ORIENTATION,l);var c=a.getResultPoints();if(c!==null)for(var h=i.getHeight(),p=0;p<c.length;p++)c[p]=new Et(h-c[p].getY()-1,c[p].getX());return a}else throw new rt}},n.prototype.reset=function(){},n.prototype.doDecode=function(t,e){var r=t.getWidth(),i=t.getHeight(),a=new Dn(r),o=e&&e.get(Ue.TRY_HARDER)===!0,l=Math.max(1,i>>(o?8:5)),c;o?c=i:c=15;for(var h=Math.trunc(i/2),p=0;p<c;p++){var g=Math.trunc((p+1)/2),v=(p&1)===0,x=h+l*(v?g:-g);if(x<0||x>=i)break;try{a=t.getBlackRow(x,a)}catch{continue}for(var A=function(D){if(D===1&&(a.reverse(),e&&e.get(Ue.NEED_RESULT_POINT_CALLBACK)===!0)){var P=new Map;e.forEach(function(K,R){return P.set(R,K)}),P.delete(Ue.NEED_RESULT_POINT_CALLBACK),e=P}try{var k=S.decodeRow(x,a,e);if(D===1){k.putMetadata(jn.ORIENTATION,180);var j=k.getResultPoints();j!==null&&(j[0]=new Et(r-j[0].getX()-1,j[0].getY()),j[1]=new Et(r-j[1].getX()-1,j[1].getY()))}return{value:k}}catch{}},S=this,C=0;C<2;C++){var O=A(C);if(typeof O=="object")return O.value}}throw new rt},n.recordPattern=function(t,e,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var o=t.getSize();if(e>=o)throw new rt;for(var l=!t.get(e),c=0,h=e;h<o;){if(t.get(h)!==l)r[c]++;else{if(++c===i)break;r[c]=1,l=!l}h++}if(!(c===i||c===i-1&&h===o))throw new rt},n.recordPatternInReverse=function(t,e,r){for(var i=r.length,a=t.get(e);e>0&&i>=0;)t.get(--e)!==a&&(i--,a=!a);if(i>=0)throw new rt;n.recordPattern(t,e+1,r)},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,o=0,l=0;l<i;l++)a+=t[l],o+=e[l];if(a<o)return Number.POSITIVE_INFINITY;var c=a/o;r*=c;for(var h=0,p=0;p<i;p++){var g=t[p],v=e[p]*c,x=g>v?g-v:v-g;if(x>r)return Number.POSITIVE_INFINITY;h+=x}return h/a},n})(),xz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),BI=(function(n){xz(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.findStartPattern=function(e){for(var r=e.getSize(),i=e.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),l=i,c=!1,h=6,p=i;p<r;p++)if(e.get(p)!==c)o[a]++;else{if(a===h-1){for(var g=t.MAX_AVG_VARIANCE,v=-1,x=t.CODE_START_A;x<=t.CODE_START_C;x++){var A=xn.patternMatchVariance(o,t.CODE_PATTERNS[x],t.MAX_INDIVIDUAL_VARIANCE);A<g&&(g=A,v=x)}if(v>=0&&e.isRange(Math.max(0,l-(p-l)/2),l,!1))return Int32Array.from([l,p,v]);l+=o[0]+o[1],o=o.slice(2,o.length-1),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,c=!c}throw new rt},t.decodeCode=function(e,r,i){xn.recordPattern(e,i,r);for(var a=t.MAX_AVG_VARIANCE,o=-1,l=0;l<t.CODE_PATTERNS.length;l++){var c=t.CODE_PATTERNS[l],h=this.patternMatchVariance(r,c,t.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,o=l)}if(o>=0)return o;throw new rt},t.prototype.decodeRow=function(e,r,i){var a=i&&i.get(Ue.ASSUME_GS1)===!0,o=t.findStartPattern(r),l=o[2],c=0,h=new Uint8Array(20);h[c++]=l;var p;switch(l){case t.CODE_START_A:p=t.CODE_CODE_A;break;case t.CODE_START_B:p=t.CODE_CODE_B;break;case t.CODE_START_C:p=t.CODE_CODE_C;break;default:throw new dt}for(var g=!1,v=!1,x="",A=o[0],S=o[1],C=Int32Array.from([0,0,0,0,0,0]),O=0,D=0,P=l,k=0,j=!0,K=!1,R=!1;!g;){var I=v;switch(v=!1,O=D,D=t.decodeCode(r,C,S),h[c++]=D,D!==t.CODE_STOP&&(j=!0),D!==t.CODE_STOP&&(k++,P+=k*D),A=S,S+=C.reduce(function(ft,yt){return ft+yt},0),D){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new dt}switch(p){case t.CODE_CODE_A:if(D<64)R===K?x+=String.fromCharCode(32+D):x+=String.fromCharCode(32+D+128),R=!1;else if(D<96)R===K?x+=String.fromCharCode(D-64):x+=String.fromCharCode(D+64),R=!1;else switch(D!==t.CODE_STOP&&(j=!1),D){case t.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!K&&R?(K=!0,R=!1):K&&R?(K=!1,R=!1):R=!0;break;case t.CODE_SHIFT:v=!0,p=t.CODE_CODE_B;break;case t.CODE_CODE_B:p=t.CODE_CODE_B;break;case t.CODE_CODE_C:p=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_B:if(D<96)R===K?x+=String.fromCharCode(32+D):x+=String.fromCharCode(32+D+128),R=!1;else switch(D!==t.CODE_STOP&&(j=!1),D){case t.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!K&&R?(K=!0,R=!1):K&&R?(K=!1,R=!1):R=!0;break;case t.CODE_SHIFT:v=!0,p=t.CODE_CODE_A;break;case t.CODE_CODE_A:p=t.CODE_CODE_A;break;case t.CODE_CODE_C:p=t.CODE_CODE_C;break;case t.CODE_STOP:g=!0;break}break;case t.CODE_CODE_C:if(D<100)D<10&&(x+="0"),x+=D;else switch(D!==t.CODE_STOP&&(j=!1),D){case t.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case t.CODE_CODE_A:p=t.CODE_CODE_A;break;case t.CODE_CODE_B:p=t.CODE_CODE_B;break;case t.CODE_STOP:g=!0;break}break}I&&(p=p===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var M=S-A;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-A)/2),!1))throw new rt;if(P-=k*O,P%103!==O)throw new Rn;var B=x.length;if(B===0)throw new rt;B>0&&j&&(p===t.CODE_CODE_C?x=x.substring(0,B-2):x=x.substring(0,B-1));for(var U=(o[1]+o[0])/2,H=A+M/2,F=h.length,Ut=new Uint8Array(F),ae=0;ae<F;ae++)Ut[ae]=h[ae];var nt=[new Et(U,e),new Et(H,e)];return new Jn(x,Ut,0,nt,Ct.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t})(xn),Ez=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),py=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},FI=(function(n){Ez(t,n);function t(e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=e,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return t.prototype.decodeRow=function(e,r,i){var a,o,l,c,h=this.counters;h.fill(0),this.decodeRowResult="";var p=t.findAsteriskPattern(r,h),g=r.getNextSet(p[1]),v=r.getSize(),x,A;do{t.recordPattern(r,g,h);var S=t.toNarrowWidePattern(h);if(S<0)throw new rt;x=t.patternToChar(S),this.decodeRowResult+=x,A=g;try{for(var C=(a=void 0,py(h)),O=C.next();!O.done;O=C.next()){var D=O.value;g+=D}}catch(F){a={error:F}}finally{try{O&&!O.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}g=r.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var k=py(h),j=k.next();!j.done;j=k.next()){var D=j.value;P+=D}}catch(F){l={error:F}}finally{try{j&&!j.done&&(c=k.return)&&c.call(k)}finally{if(l)throw l.error}}var K=g-A-P;if(g!==v&&K*2<P)throw new rt;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,I=0,M=0;M<R;M++)I+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(M));if(this.decodeRowResult.charAt(R)!==t.ALPHABET_STRING.charAt(I%43))throw new Rn;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new rt;var B;this.extendedMode?B=t.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;var U=(p[1]+p[0])/2,H=A+P/2;return new Jn(B,null,0,[new Et(U,e),new Et(H,e)],Ct.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(e,r){for(var i=e.getSize(),a=e.getNextSet(0),o=0,l=a,c=!1,h=r.length,p=a;p<i;p++)if(e.get(p)!==c)r[o]++;else{if(o===h-1){if(this.toNarrowWidePattern(r)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,l-Math.floor((p-l)/2)),l,!1))return[l,p];l+=r[0]+r[1],r.copyWithin(0,2,2+o-1),r[o-1]=0,r[o]=0,o--}else o++;r[o]=1,c=!c}throw new rt},t.toNarrowWidePattern=function(e){var r,i,a=e.length,o=0,l;do{var c=2147483647;try{for(var h=(r=void 0,py(e)),p=h.next();!p.done;p=h.next()){var g=p.value;g<c&&g>o&&(c=g)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}o=c,l=0;for(var v=0,x=0,A=0;A<a;A++){var g=e[A];g>o&&(x|=1<<a-1-A,l++,v+=g)}if(l===3){for(var A=0;A<a&&l>0;A++){var g=e[A];if(g>o&&(l--,g*2>=v))return-1}return x}}while(l>3);return-1},t.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);if(e===t.ASTERISK_ENCODING)return"*";throw new rt},t.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var o=e.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=e.charAt(a+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new dt;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new dt;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new dt;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new dt;break}i+=c,a++}else i+=o}return i},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t})(xn),Az=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),gy=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},UI=(function(n){Az(t,n);function t(){var e=n.call(this)||this;return e.decodeRowResult="",e.counters=new Int32Array(6),e}return t.prototype.decodeRow=function(e,r,i){var a,o,l,c,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),g=r.getSize(),v=this.counters;v.fill(0),this.decodeRowResult="";var x,A;do{t.recordPattern(r,p,v);var S=this.toPattern(v);if(S<0)throw new rt;x=this.patternToChar(S),this.decodeRowResult+=x,A=p;try{for(var C=(a=void 0,gy(v)),O=C.next();!O.done;O=C.next()){var D=O.value;p+=D}}catch(M){a={error:M}}finally{try{O&&!O.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var P=0;try{for(var k=gy(v),j=k.next();!j.done;j=k.next()){var D=j.value;P+=D}}catch(M){l={error:M}}finally{try{j&&!j.done&&(c=k.return)&&c.call(k)}finally{if(l)throw l.error}}if(p===g||!r.get(p))throw new rt;if(this.decodeRowResult.length<2)throw new rt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var K=this.decodeExtended(this.decodeRowResult),R=(h[1]+h[0])/2,I=A+P/2;return new Jn(K,null,0,[new Et(R,e),new Et(I,e)],Ct.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(e){var r=e.getSize(),i=e.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,l=!1,c=a.length,h=0,p=i;p<r;p++)if(e.get(p)!==l)a[h]++;else{if(h===c-1){if(this.toPattern(a)===t.ASTERISK_ENCODING)return new Int32Array([o,p]);o+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new rt},t.prototype.toPattern=function(e){var r,i,a=0;try{for(var o=gy(e),l=o.next();!l.done;l=o.next()){var c=l.value;a+=c}}catch(A){r={error:A}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}for(var h=0,p=e.length,g=0;g<p;g++){var v=Math.round(e[g]*9/a);if(v<1||v>4)return-1;if((g&1)===0)for(var x=0;x<v;x++)h=h<<1|1;else h<<=v}return h},t.prototype.patternToChar=function(e){for(var r=0;r<t.CHARACTER_ENCODINGS.length;r++)if(t.CHARACTER_ENCODINGS[r]===e)return t.ALPHABET_STRING.charAt(r);throw new rt},t.prototype.decodeExtended=function(e){for(var r=e.length,i="",a=0;a<r;a++){var o=e.charAt(a);if(o>="a"&&o<="d"){if(a>=r-1)throw new dt;var l=e.charAt(a+1),c="\0";switch(o){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new dt;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new dt;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new dt;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new dt;break}i+=c,a++}else i+=o}return i},t.prototype.checkChecksums=function(e){var r=e.length;this.checkOneChecksum(e,r-2,20),this.checkOneChecksum(e,r-1,15)},t.prototype.checkOneChecksum=function(e,r,i){for(var a=1,o=0,l=r-1;l>=0;l--)o+=a*t.ALPHABET_STRING.indexOf(e.charAt(l)),++a>i&&(a=1);if(e.charAt(r)!==t.ALPHABET_STRING[o%47])throw new Rn},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t})(xn),wz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Tz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zI=(function(n){wz(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.narrowLineWidth=-1,e}return t.prototype.decodeRow=function(e,r,i){var a,o,l=this.decodeStart(r),c=this.decodeEnd(r),h=new zt;t.decodeMiddle(r,l[1],c[0],h);var p=h.toString(),g=null;i!=null&&(g=i.get(Ue.ALLOWED_LENGTHS)),g==null&&(g=t.DEFAULT_ALLOWED_LENGTHS);var v=p.length,x=!1,A=0;try{for(var S=Tz(g),C=S.next();!C.done;C=S.next()){var O=C.value;if(v===O){x=!0;break}O>A&&(A=O)}}catch(k){a={error:k}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}if(!x&&v>A&&(x=!0),!x)throw new dt;var D=[new Et(l[1],e),new Et(c[0],e)],P=new Jn(p,null,0,D,Ct.ITF,new Date().getTime());return P},t.decodeMiddle=function(e,r,i,a){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);r<i;){xn.recordPattern(e,r,o);for(var h=0;h<5;h++){var p=2*h;l[h]=o[p],c[h]=o[p+1]}var g=t.decodeDigit(l);a.append(g.toString()),g=this.decodeDigit(c),a.append(g.toString()),o.forEach(function(v){r+=v})}},t.prototype.decodeStart=function(e){var r=t.skipWhiteSpace(e),i=t.findGuardPattern(e,r,t.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i},t.prototype.validateQuietZone=function(e,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!e.get(a);a--)i--;if(i!==0)throw new rt},t.skipWhiteSpace=function(e){var r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new rt;return i},t.prototype.decodeEnd=function(e){e.reverse();try{var r=t.skipWhiteSpace(e),i=void 0;try{i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[0])}catch(o){o instanceof rt&&(i=t.findGuardPattern(e,r,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);var a=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-a,i}finally{e.reverse()}},t.findGuardPattern=function(e,r,i){var a=i.length,o=new Int32Array(a),l=e.getSize(),c=!1,h=0,p=r;o.fill(0);for(var g=r;g<l;g++)if(e.get(g)!==c)o[h]++;else{if(h===a-1){if(xn.patternMatchVariance(o,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[p,g];p+=o[0]+o[1],Ie.arraycopy(o,2,o,0,h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,c=!c}throw new rt},t.decodeDigit=function(e){for(var r=t.MAX_AVG_VARIANCE,i=-1,a=t.PATTERNS.length,o=0;o<a;o++){var l=t.PATTERNS[o],c=xn.patternMatchVariance(e,l,t.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=o):c===r&&(i=-1)}if(i>=0)return i%10;throw new rt},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t})(xn),Sz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Jl=(function(n){Sz(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.decodeRowStringBuffer="",e}return t.findStartGuardPattern=function(e){for(var r=!1,i,a=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]),i=t.findGuardPattern(e,a,!1,this.START_END_PATTERN,o);var l=i[0];a=i[1];var c=l-(a-l);c>=0&&(r=e.isRange(c,l,!1))}return i},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var o=e.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new dt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=e.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new dt;i+=o}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,r,i,a){return this.findGuardPattern(e,r,i,a,new Int32Array(a.length))},t.findGuardPattern=function(e,r,i,a,o){var l=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);for(var c=0,h=r,p=a.length,g=i,v=r;v<l;v++)if(e.get(v)!==g)o[c]++;else{if(c===p-1){if(xn.patternMatchVariance(o,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([h,v]);h+=o[0]+o[1];for(var x=o.slice(2,o.length),A=0;A<c-1;A++)o[A]=x[A];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,g=!g}throw new rt},t.decodeDigit=function(e,r,i,a){this.recordPattern(e,i,r);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=a.length,h=0;h<c;h++){var p=a[h],g=xn.patternMatchVariance(r,p,t.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,l=h)}if(l>=0)return l;throw new rt},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t})(xn),Iz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Cz=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),o=i.toString(),l=n.parseExtensionString(o),c=[new Et((r[0]+r[1])/2,t),new Et(a,t)],h=new Jn(o,null,0,c,Ct.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(t,e,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=t.getSize(),c=e[1],h=0,p=0;p<5&&c<l;p++){var g=Jl.decodeDigit(t,o,c,Jl.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var v=(i=void 0,Iz(o)),x=v.next();!x.done;x=v.next()){var A=x.value;c+=A}}catch(C){i={error:C}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}g>=10&&(h|=1<<4-p),p!==4&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(r.length!==5)throw new rt;var S=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==S)throw new rt;return c},n.extensionChecksum=function(t){for(var e=t.length,r=0,i=e-2;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;r*=3;for(var i=e-1;i>=0;i-=2)r+=t.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(t){for(var e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new rt},n.parseExtensionString=function(t){if(t.length!==5)return null;var e=n.parseExtension5String(t);return e==null?null:new Map([[jn.SUGGESTED_PRICE,e]])},n.parseExtension5String=function(t){var e;switch(t.charAt(0)){case"0":e="";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e="";break}var r=parseInt(t.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return e+i+"."+o},n})(),bz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rz=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(t,e,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(e,r,i),o=i.toString(),l=n.parseExtensionString(o),c=[new Et((r[0]+r[1])/2,t),new Et(a,t)],h=new Jn(o,null,0,c,Ct.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(t,e,r){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=t.getSize(),c=e[1],h=0,p=0;p<2&&c<l;p++){var g=Jl.decodeDigit(t,o,c,Jl.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);try{for(var v=(i=void 0,bz(o)),x=v.next();!x.done;x=v.next()){var A=x.value;c+=A}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}g>=10&&(h|=1<<1-p),p!==1&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(r.length!==2)throw new rt;if(parseInt(r.toString())%4!==h)throw new rt;return c},n.parseExtensionString=function(t){return t.length!==2?null:new Map([[jn.ISSUE_NUMBER,parseInt(t)]])},n})(),Dz=(function(){function n(){}return n.decodeRow=function(t,e,r){var i=Jl.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new Cz;return a.decodeRow(t,e,i)}catch{var o=new Rz;return o.decodeRow(t,e,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),Oz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),yn=(function(n){Oz(t,n);function t(){var e=n.call(this)||this;e.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];t.L_AND_G_PATTERNS[r]=a}return e}return t.prototype.decodeRow=function(e,r,i){var a=t.findStartGuardPattern(r),o=i==null?null:i.get(Ue.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new Et((a[0]+a[1])/2,e);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=c.rowOffset,p=c.resultString;if(o!=null){var g=new Et(h,e);o.foundPossibleResultPoint(g)}var v=t.decodeEnd(r,h);if(o!=null){var x=new Et((v[0]+v[1])/2,e);o.foundPossibleResultPoint(x)}var A=v[1],S=A+(A-v[0]);if(S>=r.getSize()||!r.isRange(A,S,!1))throw new rt;var C=p.toString();if(C.length<8)throw new dt;if(!t.checkChecksum(C))throw new Rn;var O=(a[1]+a[0])/2,D=(v[1]+v[0])/2,P=this.getBarcodeFormat(),k=[new Et(O,e),new Et(D,e)],j=new Jn(C,null,0,k,P,new Date().getTime()),K=0;try{var R=Dz.decodeRow(e,r,v[1]);j.putMetadata(jn.UPC_EAN_EXTENSION,R.getText()),j.putAllMetadata(R.getResultMetadata()),j.addResultPoints(R.getResultPoints()),K=R.getText().length}catch{}var I=i==null?null:i.get(Ue.ALLOWED_EAN_EXTENSIONS);if(I!=null){var M=!1;for(var B in I)if(K.toString()===B){M=!0;break}if(!M)throw new rt}return P===Ct.EAN_13||Ct.UPC_A,j},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var r=e.length;if(r===0)return!1;var i=parseInt(e.charAt(r-1),10);return t.getStandardUPCEANChecksum(e.substring(0,r-1))===i},t.getStandardUPCEANChecksum=function(e){for(var r=e.length,i=0,a=r-1;a>=0;a-=2){var o=e.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new dt;i+=o}i*=3;for(var a=r-2;a>=0;a-=2){var o=e.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new dt;i+=o}return(1e3-i)%10},t.decodeEnd=function(e,r){return t.findGuardPattern(e,r,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t})(Jl),Nz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),jI=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mv=(function(n){Nz(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,o,l,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=e.getSize(),g=r[1],v=0,x=0;x<6&&g<p;x++){var A=yn.decodeDigit(e,h,g,yn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var S=(a=void 0,jI(h)),C=S.next();!C.done;C=S.next()){var O=C.value;g+=O}}catch(j){a={error:j}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}A>=10&&(v|=1<<5-x)}i=t.determineFirstDigit(i,v);var D=yn.findGuardPattern(e,g,!0,yn.MIDDLE_PATTERN,new Int32Array(yn.MIDDLE_PATTERN.length).fill(0));g=D[1];for(var x=0;x<6&&g<p;x++){var A=yn.decodeDigit(e,h,g,yn.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var P=(l=void 0,jI(h)),k=P.next();!k.done;k=P.next()){var O=k.value;g+=O}}catch(R){l={error:R}}finally{try{k&&!k.done&&(c=P.return)&&c.call(P)}finally{if(l)throw l.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Ct.EAN_13},t.determineFirstDigit=function(e,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new rt},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t})(yn),Pz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),HI=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GI=(function(n){Pz(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=Int32Array.from([0,0,0,0]),e}return t.prototype.decodeMiddle=function(e,r,i){var a,o,l,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=e.getSize(),g=r[1],v=0;v<4&&g<p;v++){var x=yn.decodeDigit(e,h,g,yn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var A=(a=void 0,HI(h)),S=A.next();!S.done;S=A.next()){var C=S.value;g+=C}}catch(k){a={error:k}}finally{try{S&&!S.done&&(o=A.return)&&o.call(A)}finally{if(a)throw a.error}}}var O=yn.findGuardPattern(e,g,!0,yn.MIDDLE_PATTERN,new Int32Array(yn.MIDDLE_PATTERN.length).fill(0));g=O[1];for(var v=0;v<4&&g<p;v++){var x=yn.decodeDigit(e,h,g,yn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var D=(l=void 0,HI(h)),P=D.next();!P.done;P=D.next()){var C=P.value;g+=C}}catch(K){l={error:K}}finally{try{P&&!P.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}}return{rowOffset:g,resultString:i}},t.prototype.getBarcodeFormat=function(){return Ct.EAN_8},t})(yn),Mz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),qI=(function(n){Mz(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.ean13Reader=new Mv,e}return t.prototype.getBarcodeFormat=function(){return Ct.UPC_A},t.prototype.decode=function(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))},t.prototype.decodeMiddle=function(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)},t.prototype.maybeReturnResult=function(e){var r=e.getText();if(r.charAt(0)==="0"){var i=new Jn(r.substring(1),null,null,e.getResultPoints(),Ct.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new rt},t.prototype.reset=function(){this.ean13Reader.reset()},t})(yn),Vz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Lz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},KI=(function(n){Vz(t,n);function t(){var e=n.call(this)||this;return e.decodeMiddleCounters=new Int32Array(4),e}return t.prototype.decodeMiddle=function(e,r,i){var a,o,l=this.decodeMiddleCounters.map(function(C){return C});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=e.getSize(),h=r[1],p=0,g=0;g<6&&h<c;g++){var v=t.decodeDigit(e,l,h,t.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var x=(a=void 0,Lz(l)),A=x.next();!A.done;A=x.next()){var S=A.value;h+=S}}catch(C){a={error:C}}finally{try{A&&!A.done&&(o=x.return)&&o.call(x)}finally{if(a)throw a.error}}v>=10&&(p|=1<<5-g)}return t.determineNumSysAndCheckDigit(new zt(i),p),h},t.prototype.decodeEnd=function(e,r){return t.findGuardPatternWithoutCounters(e,r,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return yn.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){e.insert(0,"0"+i),e.append("0"+a);return}throw rt.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return Ct.UPC_E},t.convertUPCEtoUPCA=function(e){var r=e.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new zt;i.append(e.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t})(yn),kz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),XI=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},my=(function(n){kz(t,n);function t(e){var r=n.call(this)||this,i=e==null?null:e.get(Ue.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Ct.EAN_13)>-1&&a.push(new Mv),i.indexOf(Ct.UPC_A)>-1&&a.push(new qI),i.indexOf(Ct.EAN_8)>-1&&a.push(new GI),i.indexOf(Ct.UPC_E)>-1&&a.push(new KI)),a.length===0&&(a.push(new Mv),a.push(new qI),a.push(new GI),a.push(new KI)),r.readers=a,r}return t.prototype.decodeRow=function(e,r,i){var a,o;try{for(var l=XI(this.readers),c=l.next();!c.done;c=l.next()){var h=c.value;try{var p=h.decodeRow(e,r,i),g=p.getBarcodeFormat()===Ct.EAN_13&&p.getText().charAt(0)==="0",v=i==null?null:i.get(Ue.POSSIBLE_FORMATS),x=v==null||v.includes(Ct.UPC_A);if(g&&x){var A=p.getRawBytes(),S=new Jn(p.getText().substring(1),A,A?A.length:null,p.getResultPoints(),Ct.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(C){a={error:C}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}throw new rt},t.prototype.reset=function(){var e,r;try{for(var i=XI(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t})(xn),Bz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Fz=(function(n){Bz(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},e}return t.prototype.decodeRow=function(e,r,i){var a=this.getValidRowData(r);if(!a)throw new rt;var o=this.codaBarDecodeRow(a.row);if(!o)throw new rt;return new Jn(o,null,0,[new Et(a.left,e),new Et(a.right,e)],Ct.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(e){var r=e.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var o=[],l=r[0],c=1,h=1;h<r.length;h++)r[h]===l?c++:(l=r[h],o.push(c),c=1);return o.push(c),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},t.prototype.codaBarDecodeRow=function(e){for(var r=[],i=Math.ceil(e.reduce(function(c,h){return(c+h)/2},0));e.length>0;){var a=e.splice(0,8).splice(0,7),o=a.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[o])}var l=r.join("");return this.validCodaBarString(l)?l:null},t.prototype.validCodaBarString=function(e){var r=/^[A-D].{1,}[A-D]$/;return r.test(e)},t})(xn),Uz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),zz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zo=(function(n){Uz(t,n);function t(){var e=n.call(this)||this;return e.decodeFinderCounters=new Int32Array(4),e.dataCharacterCounters=new Int32Array(8),e.oddRoundingErrors=new Array(4),e.evenRoundingErrors=new Array(4),e.oddCounts=new Array(e.dataCharacterCounters.length/2),e.evenCounts=new Array(e.dataCharacterCounters.length/2),e}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,r){for(var i=0;i<r.length;i++)if(xn.patternMatchVariance(e,r[i],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return i;throw new rt},t.count=function(e){return ie.sum(new Int32Array(e))},t.increment=function(e,r){for(var i=0,a=r[0],o=1;o<e.length;o++)r[o]>a&&(a=r[o],i=o);e[i]++},t.decrement=function(e,r){for(var i=0,a=r[0],o=1;o<e.length;o++)r[o]<a&&(a=r[o],i=o);e[i]--},t.isFinderPattern=function(e){var r,i,a=e[0]+e[1],o=a+e[2]+e[3],l=a/o;if(l>=t.MIN_FINDER_PATTERN_RATIO&&l<=t.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=zz(e),g=p.next();!g.done;g=p.next()){var v=g.value;v>h&&(h=v),v<c&&(c=v)}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*c}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t})(xn),G1=(function(){function n(t,e){this.value=t,this.checksumPortion=e}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value&&this.checksumPortion===e.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),O8=(function(){function n(t,e,r,i,a){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=new Array,this.resultPoints.push(new Et(r,a)),this.resultPoints.push(new Et(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.hashCode=function(){return this.value},n})(),jz=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Il=(function(){function n(){}return n.getRSSvalue=function(t,e,r){var i,a,o=0;try{for(var l=jz(t),c=l.next();!c.done;c=l.next()){var h=c.value;o+=h}}catch(D){i={error:D}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var p=0,g=0,v=t.length,x=0;x<v-1;x++){var A=void 0;for(A=1,g|=1<<x;A<t[x];A++,g&=~(1<<x)){var S=n.combins(o-A-1,v-x-2);if(r&&g===0&&o-A-(v-x-1)>=v-x-1&&(S-=n.combins(o-A-(v-x),v-x-2)),v-x-1>1){for(var C=0,O=o-A-(v-x-2);O>e;O--)C+=n.combins(o-A-O-1,v-x-3);S-=C*(v-1-x)}else o-A>e&&S--;p+=S}o-=A}return p},n.combins=function(t,e){var r,i;t-e>e?(i=e,r=t-e):(i=t-e,r=e);for(var a=1,o=1,l=t;l>r;l--)a*=l,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},n})(),Hz=(function(){function n(){}return n.buildBitArray=function(t){var e=t.length*2-1;t[t.length-1].getRightChar()==null&&(e-=1);for(var r=12*e,i=new Dn(r),a=0,o=t[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!==0&&i.set(a),a++;for(var c=1;c<t.length;++c){for(var h=t[c],p=h.getLeftChar().getValue(),g=11;g>=0;--g)(p&1<<g)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var v=h.getRightChar().getValue(),g=11;g>=0;--g)(v&1<<g)!==0&&i.set(a),a++}return i},n})(),Vo=(function(){function n(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),L2=(function(){function n(t){this.newPosition=t}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),Gz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),gi=(function(n){Gz(t,n);function t(e,r){var i=n.call(this,e)||this;return i.value=r,i}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t})(L2),qz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Lo=(function(n){qz(t,n);function t(e,r,i){var a=n.call(this,e)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t})(L2),Kz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),pl=(function(n){Kz(t,n);function t(e,r,i){var a=n.call(this,e)||this;if(r<0||r>10||i<0||i>10)throw new dt;return a.firstDigit=r,a.secondDigit=i,a}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t})(L2),M0=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xz=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(t){var e,r,i,a,o,l,c,h;if(!t)return null;if(t.length<2)throw new rt;var p=t.substring(0,2);try{for(var g=M0(n.TWO_DIGIT_DATA_LENGTH),v=g.next();!v.done;v=g.next()){var x=v.value;if(x[0]===p)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],t):n.processFixedAI(2,x[1],t)}}catch(K){e={error:K}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}if(t.length<3)throw new rt;var A=t.substring(0,3);try{for(var S=M0(n.THREE_DIGIT_DATA_LENGTH),C=S.next();!C.done;C=S.next()){var x=C.value;if(x[0]===A)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],t):n.processFixedAI(3,x[1],t)}}catch(K){i={error:K}}finally{try{C&&!C.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var O=M0(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),D=O.next();!D.done;D=O.next()){var x=D.value;if(x[0]===A)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],t):n.processFixedAI(4,x[1],t)}}catch(K){o={error:K}}finally{try{D&&!D.done&&(l=O.return)&&l.call(O)}finally{if(o)throw o.error}}if(t.length<4)throw new rt;var P=t.substring(0,4);try{for(var k=M0(n.FOUR_DIGIT_DATA_LENGTH),j=k.next();!j.done;j=k.next()){var x=j.value;if(x[0]===P)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],t):n.processFixedAI(4,x[1],t)}}catch(K){c={error:K}}finally{try{j&&!j.done&&(h=k.return)&&h.call(k)}finally{if(c)throw c.error}}throw new rt},n.processFixedAI=function(t,e,r){if(r.length<t)throw new rt;var i=r.substring(0,t);if(r.length<t+e)throw new rt;var a=r.substring(t,t+e),o=r.substring(t+e),l="("+i+")"+a,c=n.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},n.processVariableAI=function(t,e,r){var i=r.substring(0,t),a;r.length<t+e?a=r.length:a=t+e;var o=r.substring(t,a),l=r.substring(a),c="("+i+")"+o,h=n.parseFieldsInGeneralPurpose(l);return h==null?c:c+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),o1=(function(){function n(t){this.buffer=new zt,this.information=t}return n.prototype.decodeAllCodes=function(t,e){var r=e,i=null;do{var a=this.decodeGeneralPurposeField(r,i),o=Xz.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&t.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return t.toString()},n.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)},n.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var e=this.extractNumericValueFromBitArray(t,4);return e===0?new pl(this.information.getSize(),pl.FNC1,pl.FNC1):new pl(this.information.getSize(),e-1,pl.FNC1)}var r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,a=(r-8)%11;return new pl(t+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(t,e){return n.extractNumericValueFromBitArray(this.information,t,e)},n.extractNumericValueFromBitArray=function(t,e,r){for(var i=0,a=0;a<r;++a)t.get(e+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(t,e){this.buffer.setLengthToZero(),e!=null&&this.buffer.append(e),this.current.setPosition(t);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Lo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Lo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var t,e;do{var r=this.current.getPosition();this.current.isAlpha()?(e=this.parseAlphaBlock(),t=e.isFinished()):this.current.isIsoIec646()?(e=this.parseIsoIec646Block(),t=e.isFinished()):(e=this.parseNumericBlock(),t=e.isFinished());var i=r!==this.current.getPosition();if(!i&&!t)break}while(!t);return e.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var e=void 0;return t.isSecondDigitFNC1()?e=new Lo(this.current.getPosition(),this.buffer.toString()):e=new Lo(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Vo(!0,e)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var e=new Lo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,e)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Vo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Lo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Vo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var e=new Lo(this.current.getPosition(),this.buffer.toString());return new Vo(!0,e)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Vo(!1)},n.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(t,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new gi(t+5,gi.FNC1);if(e>=5&&e<15)return new gi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<90)return new gi(t+7,""+(r+1));if(r>=90&&r<116)return new gi(t+7,""+(r+7));var i=this.extractNumericValueFromBitArray(t,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new dt}return new gi(t+8,a)},n.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(t){var e=this.extractNumericValueFromBitArray(t,5);if(e===15)return new gi(t+5,gi.FNC1);if(e>=5&&e<15)return new gi(t+5,"0"+(e-5));var r=this.extractNumericValueFromBitArray(t,6);if(r>=32&&r<58)return new gi(t+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Gh("Decoding invalid alphanumeric value: "+r)}return new gi(t+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<5&&e+t<this.information.getSize();++e)if(e===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0},n})(),N8=(function(){function n(t){this.information=t,this.generalDecoder=new o1(t)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),Wz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),_i=(function(n){Wz(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedGtin=function(e,r){e.append("(01)");var i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)},t.prototype.encodeCompressedGtinWithoutAI=function(e,r,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);o/100===0&&e.append("0"),o/10===0&&e.append("0"),e.append(o)}t.appendCheckDigit(e,i)},t.appendCheckDigit=function(e,r){for(var i=0,a=0;a<13;a++){var o=e.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*o:o}i=10-i%10,i===10&&(i=0),e.append(i)},t.GTIN_SIZE=40,t})(N8),Yz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),$z=(function(n){Yz(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new zt;e.append("(01)");var r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t})(_i),Qz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Zz=(function(n){Qz(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){var e=new zt;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t})(N8),Jz=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),u1=(function(n){Jz(t,n);function t(e){return n.call(this,e)||this}return t.prototype.encodeCompressedWeight=function(e,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,a);for(var o=this.checkWeight(a),l=1e5,c=0;c<5;++c)o/l===0&&e.append("0"),l/=10;e.append(o)},t})(_i),tj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),P8=(function(n){tj(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+u1.GTIN_SIZE+t.WEIGHT_SIZE)throw new rt;var e=new zt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+u1.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t})(u1),ej=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),nj=(function(n){ej(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t})(P8),rj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),ij=(function(n){rj(t,n);function t(e){return n.call(this,e)||this}return t.prototype.addWeightCode=function(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t})(P8),aj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),sj=(function(n){aj(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+_i.GTIN_SIZE)throw new rt;var e=new zt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+_i.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+_i.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t})(_i),oj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),uj=(function(n){oj(t,n);function t(e){return n.call(this,e)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+_i.GTIN_SIZE)throw new rt;var e=new zt;this.encodeCompressedGtin(e,t.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+_i.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+_i.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+_i.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t})(_i),lj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Ss=(function(n){lj(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.dateCode=i,a.firstAIdigits=r,a}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new rt;var e=new zt;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,t.DATE_SIZE);if(i!==38400){e.append("("),e.append(this.dateCode),e.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var l=i;l/10===0&&e.append("0"),e.append(l),o/10===0&&e.append("0"),e.append(o),a/10===0&&e.append("0"),e.append(a)}},t.prototype.addWeightCode=function(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t})(u1);function cj(n){try{if(n.get(1))return new $z(n);if(!n.get(2))return new Zz(n);var t=o1.extractNumericValueFromBitArray(n,1,4);switch(t){case 4:return new nj(n);case 5:return new ij(n)}var e=o1.extractNumericValueFromBitArray(n,1,5);switch(e){case 12:return new sj(n);case 13:return new uj(n)}var r=o1.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Ss(n,"310","11");case 57:return new Ss(n,"320","11");case 58:return new Ss(n,"310","13");case 59:return new Ss(n,"320","13");case 60:return new Ss(n,"310","15");case 61:return new Ss(n,"320","15");case 62:return new Ss(n,"310","17");case 63:return new Ss(n,"320","17")}}catch(i){throw console.log(i),new Gh("unknown decoder: "+n)}}var WI=(function(){function n(t,e,r,i){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(t,e){return t instanceof n?n.equalsOrNull(t.leftchar,e.leftchar)&&n.equalsOrNull(t.rightchar,e.rightchar)&&n.equalsOrNull(t.finderpattern,e.finderpattern):!1},n.equalsOrNull=function(t,e){return t===null?e===null:n.equals(t,e)},n.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},n})(),fj=(function(){function n(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(t,e){return t instanceof n?this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed:!1},n.prototype.checkEqualitity=function(t,e){if(!(!t||!e)){var r;return t.forEach(function(i,a){e.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),hj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Is=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},dj=(function(n){hj(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.pairs=new Array(t.MAX_PAIRS),e.rows=new Array,e.startEnd=[2],e}return t.prototype.decodeRow=function(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,r))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(l){if(l instanceof rt){if(!this.pairs.length)throw new rt;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new rt},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return e&&(this.rows=this.rows.reverse()),r},t.prototype.checkRows=function(e,r){for(var i,a,o=r;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(i=void 0,Is(e)),h=c.next();!h.done;h=c.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var g=new Array(e);g.push(l);try{return this.checkRows(g,o+1)}catch(v){console.log(v)}}}throw new rt},t.isValidSequence=function(e){var r,i;try{for(var a=Is(t.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var l=o.value;if(!(e.length>l.length)){for(var c=!0,h=0;h<e.length;h++)if(e[h].getFinderPattern().getValue()!==l[h]){c=!1;break}if(c)return!0}}}catch(p){r={error:p}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},t.prototype.storeRow=function(e,r){for(var i=0,a=!1,o=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>e){o=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}o||a||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new fj(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,r){var i,a,o,l,c,h;try{for(var p=Is(r),g=p.next();!g.done;g=p.next()){var v=g.value;if(v.getPairs().length!==e.length){var x=!0;try{for(var A=(o=void 0,Is(v.getPairs())),S=A.next();!S.done;S=A.next()){var C=S.value,O=!1;try{for(var D=(c=void 0,Is(e)),P=D.next();!P.done;P=D.next()){var k=P.value;if(WI.equals(C,k)){O=!0;break}}}catch(j){c={error:j}}finally{try{P&&!P.done&&(h=D.return)&&h.call(D)}finally{if(c)throw c.error}}O||(x=!1)}}catch(j){o={error:j}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(o)throw o.error}}}}}catch(j){i={error:j}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},t.isPartialRow=function(e,r){var i,a,o,l,c,h;try{for(var p=Is(r),g=p.next();!g.done;g=p.next()){var v=g.value,x=!0;try{for(var A=(o=void 0,Is(e)),S=A.next();!S.done;S=A.next()){var C=S.value,O=!1;try{for(var D=(c=void 0,Is(v.getPairs())),P=D.next();!P.done;P=D.next()){var k=P.value;if(C.equals(k)){O=!0;break}}}catch(j){c={error:j}}finally{try{P&&!P.done&&(h=D.return)&&h.call(D)}finally{if(c)throw c.error}}if(!O){x=!1;break}}}catch(j){o={error:j}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(o)throw o.error}}if(x)return!0}}catch(j){i={error:j}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var r=Hz.buildBitArray(e),i=cj(r),a=i.parseInformation(),o=e[0].getFinderPattern().getResultPoints(),l=e[e.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new Jn(a,null,null,c,Ct.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);a+=c.getLeftChar().getChecksumPortion(),o++;var h=c.getRightChar();h!=null&&(a+=h.getChecksumPortion(),o++)}a%=211;var p=211*(o-4)+a;return p===r.getValue()},t.getNextSecondBar=function(e,r){var i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i},t.prototype.retrieveNextPair=function(e,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var o,l=!0,c=-1;do this.findNextPair(e,r,c),o=this.parseFoundFinderPattern(e,i,a),o===null?c=t.getNextSecondBar(e,this.startEnd[0]):l=!1;while(l);var h=this.decodeDataCharacter(e,o,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new rt;var p;try{p=this.decodeDataCharacter(e,o,a,!1)}catch(g){p=null,console.log(g)}return new WI(h,p,o,!0)},t.prototype.isEmptyPair=function(e){return e.length===0},t.prototype.findNextPair=function(e,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=e.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var c=r[r.length-1];l=c.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;l<o&&(p=!e.get(l),!!p);)l++;for(var g=0,v=l,x=l;x<o;x++)if(e.get(x)!==p)a[g]++;else{if(g===3){if(h&&t.reverseCounters(a),t.isFinderPattern(a)){this.startEnd[0]=v,this.startEnd[1]=x;return}h&&t.reverseCounters(a),v+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,p=!p}throw new rt},t.reverseCounters=function(e){for(var r=e.length,i=0;i<r/2;++i){var a=e[i];e[i]=e[r-i-1],e[r-i-1]=a}},t.prototype.parseFoundFinderPattern=function(e,r,i){var a,o,l;if(i){for(var c=this.startEnd[0]-1;c>=0&&!e.get(c);)c--;c++,a=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=e.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var h=this.getDecodeFinderCounters();Ie.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,t.FINDER_PATTERNS)}catch{return null}return new O8(p,[o,l],o,l,r)},t.prototype.decodeDataCharacter=function(e,r,i,a){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(a)t.recordPatternInReverse(e,r.getStartEnd()[0],o);else{t.recordPattern(e,r.getStartEnd()[1],o);for(var c=0,h=o.length-1;c<h;c++,h--){var p=o[c];o[c]=o[h],o[h]=p}}var g=17,v=ie.sum(new Int32Array(o))/g,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(v-x)/x>.3)throw new rt;for(var A=this.getOddCounts(),S=this.getEvenCounts(),C=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var D=1*o[c]/v,P=D+.5;if(P<1){if(D<.3)throw new rt;P=1}else if(P>8){if(D>8.7)throw new rt;P=8}var k=c/2;(c&1)===0?(A[k]=P,C[k]=D-P):(S[k]=P,O[k]=D-P)}this.adjustOddEvenCounts(g);for(var j=4*r.getValue()+(i?0:2)+(a?0:1)-1,K=0,R=0,c=A.length-1;c>=0;c--){if(t.isNotA1left(r,i,a)){var I=t.WEIGHTS[j][2*c];R+=A[c]*I}K+=A[c]}for(var M=0,c=S.length-1;c>=0;c--)if(t.isNotA1left(r,i,a)){var I=t.WEIGHTS[j][2*c+1];M+=S[c]*I}var B=R+M;if((K&1)!==0||K>13||K<4)throw new rt;var U=(13-K)/2,H=t.SYMBOL_WIDEST[U],F=9-H,Ut=Il.getRSSvalue(A,H,!0),ae=Il.getRSSvalue(S,F,!1),nt=t.EVEN_TOTAL_SUBSET[U],ft=t.GSUM[U],yt=Ut*nt+ae+ft;return new G1(yt,B)},t.isNotA1left=function(e,r,i){return!(e.getValue()===0&&r&&i)},t.prototype.adjustOddEvenCounts=function(e){var r=ie.sum(new Int32Array(this.getOddCounts())),i=ie.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;r>13?o=!0:r<4&&(a=!0);var l=!1,c=!1;i>13?c=!0:i<4&&(l=!0);var h=r+i-e,p=(r&1)===1,g=(i&1)===0;if(h===1)if(p){if(g)throw new rt;o=!0}else{if(!g)throw new rt;c=!0}else if(h===-1)if(p){if(g)throw new rt;a=!0}else{if(!g)throw new rt;l=!0}else if(h===0){if(p){if(!g)throw new rt;r<i?(a=!0,c=!0):(o=!0,l=!0)}else if(g)throw new rt}else throw new rt;if(a){if(o)throw new rt;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new rt;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t})(zo),pj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),gj=(function(n){pj(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.count=0,a.finderPattern=i,a}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t})(G1),mj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),yy=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},YI=(function(n){mj(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.possibleLeftPairs=[],e.possibleRightPairs=[],e}return t.prototype.decodeRow=function(e,r,i){var a,o,l,c,h=this.decodePair(r,!1,e,i);t.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,e,i);t.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var g=yy(this.possibleLeftPairs),v=g.next();!v.done;v=g.next()){var x=v.value;if(x.getCount()>1)try{for(var A=(l=void 0,yy(this.possibleRightPairs)),S=A.next();!S.done;S=A.next()){var C=S.value;if(C.getCount()>1&&t.checkChecksum(x,C))return t.constructResult(x,C)}}catch(O){l={error:O}}finally{try{S&&!S.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}}}catch(O){a={error:O}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}throw new rt},t.addOrTally=function(e,r){var i,a;if(r!=null){var o=!1;try{for(var l=yy(e),c=l.next();!c.done;c=l.next()){var h=c.value;if(h.getValue()===r.getValue()){h.incrementCount(),o=!0;break}}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}o||e.push(r)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,r){for(var i=4537077*e.getValue()+r.getValue(),a=new String(i).toString(),o=new zt,l=13-a.length;l>0;l--)o.append("0");o.append(a);for(var c=0,l=0;l<13;l++){var h=o.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*h:h}c=10-c%10,c===10&&(c=0),o.append(c.toString());var p=e.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new Jn(o.toString(),null,0,[p[0],p[1],g[0],g[1]],Ct.RSS_14,new Date().getTime())},t.checkChecksum=function(e,r){var i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},t.prototype.decodePair=function(e,r,i,a){try{var o=this.findFinderPattern(e,r),l=this.parseFoundFinderPattern(e,i,r,o),c=a==null?null:a.get(Ue.NEED_RESULT_POINT_CALLBACK);if(c!=null){var h=(o[0]+o[1])/2;r&&(h=e.getSize()-1-h),c.foundPossibleResultPoint(new Et(h,i))}var p=this.decodeDataCharacter(e,l,!0),g=this.decodeDataCharacter(e,l,!1);return new gj(1597*p.getValue()+g.getValue(),p.getChecksumPortion()+4*g.getChecksumPortion(),l)}catch{return null}},t.prototype.decodeDataCharacter=function(e,r,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)xn.recordPatternInReverse(e,r.getStartEnd()[0],a);else{xn.recordPattern(e,r.getStartEnd()[1]+1,a);for(var l=0,c=a.length-1;l<c;l++,c--){var h=a[l];a[l]=a[c],a[c]=h}}for(var p=i?16:15,g=ie.sum(new Int32Array(a))/p,v=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var C=a[l]/g,O=Math.floor(C+.5);O<1?O=1:O>8&&(O=8);var D=Math.floor(l/2);(l&1)===0?(v[D]=O,A[D]=C-O):(x[D]=O,S[D]=C-O)}this.adjustOddEvenCounts(i,p);for(var P=0,k=0,l=v.length-1;l>=0;l--)k*=9,k+=v[l],P+=v[l];for(var j=0,K=0,l=x.length-1;l>=0;l--)j*=9,j+=x[l],K+=x[l];var R=k+3*j;if(i){if((P&1)!==0||P>12||P<4)throw new rt;var I=(12-P)/2,M=t.OUTSIDE_ODD_WIDEST[I],B=9-M,U=Il.getRSSvalue(v,M,!1),H=Il.getRSSvalue(x,B,!0),F=t.OUTSIDE_EVEN_TOTAL_SUBSET[I],Ut=t.OUTSIDE_GSUM[I];return new G1(U*F+H+Ut,R)}else{if((K&1)!==0||K>10||K<4)throw new rt;var I=(10-K)/2,M=t.INSIDE_ODD_WIDEST[I],B=9-M,U=Il.getRSSvalue(v,M,!0),H=Il.getRSSvalue(x,B,!1),ae=t.INSIDE_ODD_TOTAL_SUBSET[I],Ut=t.INSIDE_GSUM[I];return new G1(H*ae+U+Ut,R)}},t.prototype.findFinderPattern=function(e,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=e.getSize(),o=!1,l=0;l<a&&(o=!e.get(l),r!==o);)l++;for(var c=0,h=l,p=l;p<a;p++)if(e.get(p)!==o)i[c]++;else{if(c===3){if(zo.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,o=!o}throw new rt},t.prototype.parseFoundFinderPattern=function(e,r,i,a){for(var o=e.get(a[0]),l=a[0]-1;l>=0&&o!==e.get(l);)l--;l++;var c=a[0]-l,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);Ie.arraycopy(h,0,p,1,h.length-1),p[0]=c;var g=this.parseFinderValue(p,t.FINDER_PATTERNS),v=l,x=a[1];return i&&(v=e.getSize()-1-v,x=e.getSize()-1-x),new O8(g,[l,a[1]],v,x,r)},t.prototype.adjustOddEvenCounts=function(e,r){var i=ie.sum(new Int32Array(this.getOddCounts())),a=ie.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,h=!1;e?(i>12?l=!0:i<4&&(o=!0),a>12?h=!0:a<4&&(c=!0)):(i>11?l=!0:i<5&&(o=!0),a>10?h=!0:a<4&&(c=!0));var p=i+a-r,g=(i&1)===(e?1:0),v=(a&1)===1;if(p===1)if(g){if(v)throw new rt;l=!0}else{if(!v)throw new rt;h=!0}else if(p===-1)if(g){if(v)throw new rt;o=!0}else{if(!v)throw new rt;c=!0}else if(p===0){if(g){if(!v)throw new rt;i<a?(o=!0,h=!0):(l=!0,c=!0)}else if(v)throw new rt}else throw new rt;if(o){if(l)throw new rt;zo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&zo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new rt;zo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&zo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t})(zo),yj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Bf=(function(n){yj(t,n);function t(e){var r=n.call(this)||this;r.readers=[];var i=e?e.get(Ue.POSSIBLE_FORMATS):null,a=e&&e.get(Ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Ct.EAN_13)||i.includes(Ct.UPC_A)||i.includes(Ct.EAN_8)||i.includes(Ct.UPC_E))&&r.readers.push(new my(e)),i.includes(Ct.CODE_39)&&r.readers.push(new FI(a)),i.includes(Ct.CODE_93)&&r.readers.push(new UI),i.includes(Ct.CODE_128)&&r.readers.push(new BI),i.includes(Ct.ITF)&&r.readers.push(new zI),i.includes(Ct.CODABAR)&&r.readers.push(new Fz),i.includes(Ct.RSS_14)&&r.readers.push(new YI),i.includes(Ct.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new dj))),r.readers.length===0&&(r.readers.push(new my(e)),r.readers.push(new FI),r.readers.push(new UI),r.readers.push(new my(e)),r.readers.push(new BI),r.readers.push(new zI),r.readers.push(new YI)),r}return t.prototype.decodeRow=function(e,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,i)}catch{}throw new rt},t.prototype.reset=function(){this.readers.forEach(function(e){return e.reset()})},t})(xn),vj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){vj(t,n);function t(e,r){return e===void 0&&(e=500),n.call(this,new Bf(r),e,r)||this}return t})(hc);var $I=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fe=(function(){function n(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),ue=(function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),_j=(function(){function n(t,e,r,i,a,o){var l,c;this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var h=0,p=o.getECCodewords(),g=o.getECBlocks();try{for(var v=$I(g),x=v.next();!x.done;x=v.next()){var A=x.value;h+=A.getCount()*(A.getDataCodewords()+p)}}catch(S){l={error:S}}finally{try{x&&!x.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(t,e){var r,i;if((t&1)!==0||(e&1)!==0)throw new dt;try{for(var a=$I(n.VERSIONS),o=a.next();!o.done;o=a.next()){var l=o.value;if(l.symbolSizeRows===t&&l.symbolSizeColumns===e)return l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new dt},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new fe(5,new ue(1,3))),new n(2,12,12,10,10,new fe(7,new ue(1,5))),new n(3,14,14,12,12,new fe(10,new ue(1,8))),new n(4,16,16,14,14,new fe(12,new ue(1,12))),new n(5,18,18,16,16,new fe(14,new ue(1,18))),new n(6,20,20,18,18,new fe(18,new ue(1,22))),new n(7,22,22,20,20,new fe(20,new ue(1,30))),new n(8,24,24,22,22,new fe(24,new ue(1,36))),new n(9,26,26,24,24,new fe(28,new ue(1,44))),new n(10,32,32,14,14,new fe(36,new ue(1,62))),new n(11,36,36,16,16,new fe(42,new ue(1,86))),new n(12,40,40,18,18,new fe(48,new ue(1,114))),new n(13,44,44,20,20,new fe(56,new ue(1,144))),new n(14,48,48,22,22,new fe(68,new ue(1,174))),new n(15,52,52,24,24,new fe(42,new ue(2,102))),new n(16,64,64,14,14,new fe(56,new ue(2,140))),new n(17,72,72,16,16,new fe(36,new ue(4,92))),new n(18,80,80,18,18,new fe(48,new ue(4,114))),new n(19,88,88,20,20,new fe(56,new ue(4,144))),new n(20,96,96,22,22,new fe(68,new ue(4,174))),new n(21,104,104,24,24,new fe(56,new ue(6,136))),new n(22,120,120,18,18,new fe(68,new ue(6,175))),new n(23,132,132,20,20,new fe(62,new ue(8,163))),new n(24,144,144,22,22,new fe(62,new ue(8,156),new ue(2,155))),new n(25,8,18,6,16,new fe(7,new ue(1,5))),new n(26,8,32,6,14,new fe(11,new ue(1,10))),new n(27,12,26,10,24,new fe(14,new ue(1,16))),new n(28,12,36,10,16,new fe(18,new ue(1,22))),new n(29,16,36,14,16,new fe(24,new ue(1,32))),new n(30,16,48,14,22,new fe(28,new ue(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),xj=(function(){function n(t){var e=t.getHeight();if(e<8||e>144||(e&1)!==0)throw new dt;this.version=n.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new ia(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(t){var e=t.getHeight(),r=t.getWidth();return _j.getVersionForDimensions(e,r)},n.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,h=!1,p=!1;do if(r===a&&i===0&&!l)t[e++]=this.readCorner1(a,o)&255,r-=2,i+=2,l=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!c)t[e++]=this.readCorner2(a,o)&255,r-=2,i+=2,c=!0;else if(r===a+4&&i===2&&(o&7)===0&&!h)t[e++]=this.readCorner3(a,o)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(o&7)===4&&!p)t[e++]=this.readCorner4(a,o)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(t[e++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(e!==this.version.getTotalCodewords())throw new dt;return t},n.prototype.readModule=function(t,e,r,i){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=i,t+=4-(i+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)},n.prototype.readUtah=function(t,e,r,i){var a=0;return this.readModule(t-2,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-2,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t-1,e,r,i)&&(a|=1),a<<=1,this.readModule(t,e-2,r,i)&&(a|=1),a<<=1,this.readModule(t,e-1,r,i)&&(a|=1),a<<=1,this.readModule(t,e,r,i)&&(a|=1),a},n.prototype.readCorner1=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.readCorner2=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner3=function(t,e){var r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r},n.prototype.readCorner4=function(t,e){var r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r},n.prototype.extractDataRegion=function(t){var e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new bt("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=e/i|0,l=r/a|0,c=o*i,h=l*a,p=new ia(h,c),g=0;g<o;++g)for(var v=g*i,x=0;x<l;++x)for(var A=x*a,S=0;S<i;++S)for(var C=g*(i+2)+1+S,O=v+S,D=0;D<a;++D){var P=x*(a+2)+1+D;if(t.get(P,C)){var k=A+D;p.set(k,O)}}return p},n})(),QI=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ej=(function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e){var r,i,a,o,l=e.getECBlocks(),c=0,h=l.getECBlocks();try{for(var p=QI(h),g=p.next();!g.done;g=p.next()){var v=g.value;c+=v.getCount()}}catch(Ut){r={error:Ut}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var x=new Array(c),A=0;try{for(var S=QI(h),C=S.next();!C.done;C=S.next())for(var v=C.value,O=0;O<v.getCount();O++){var D=v.getDataCodewords(),P=l.getECCodewords()+D;x[A++]=new n(D,new Uint8Array(P))}}catch(Ut){a={error:Ut}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var k=x[0].codewords.length,j=k-l.getECCodewords(),K=j-1,R=0,O=0;O<K;O++)for(var I=0;I<A;I++)x[I].codewords[O]=t[R++];for(var M=e.getVersionNumber()===24,B=M?8:A,I=0;I<B;I++)x[I].codewords[j-1]=t[R++];for(var U=x[0].codewords.length,O=j;O<U;O++)for(var I=0;I<A;I++){var H=M?(I+8)%A:I,F=M&&H>7?O-1:O;x[H].codewords[F]=t[R++]}if(R!==t.length)throw new bt;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),M8=(function(){function n(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new bt(""+t);var e=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var o=8-r,l=t<o?t:o,c=o-l,h=255>>8-l<<c;e=(a[i]&h)>>c,t-=l,r+=l,r===8&&(r=0,i++)}if(t>0){for(;t>=8;)e=e<<8|a[i]&255,i++,t-=8;if(t>0){var c=8-t,h=255>>c<<c;e=e<<t|(a[i]&h)>>c,r+=t}}return this.bitOffset=r,this.byteOffset=i,e},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),pn;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(pn||(pn={}));var Aj=(function(){function n(){}return n.decode=function(t){var e=new M8(t),r=new zt,i=new zt,a=new Array,o=pn.ASCII_ENCODE;do if(o===pn.ASCII_ENCODE)o=this.decodeAsciiSegment(e,r,i);else{switch(o){case pn.C40_ENCODE:this.decodeC40Segment(e,r);break;case pn.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case pn.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case pn.BASE256_ENCODE:this.decodeBase256Segment(e,r,a);break;default:throw new dt}o=pn.ASCII_ENCODE}while(o!==pn.PAD_ENCODE&&e.available()>0);return i.length()>0&&r.append(i.toString()),new Dp(t,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(t,e,r){var i=!1;do{var a=t.readBits(8);if(a===0)throw new dt;if(a<=128)return i&&(a+=128),e.append(String.fromCharCode(a-1)),pn.ASCII_ENCODE;if(a===129)return pn.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&e.append("0"),e.append(""+o)}else switch(a){case 230:return pn.C40_ENCODE;case 231:return pn.BASE256_ENCODE;case 232:e.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:e.append("[)>05"),r.insert(0,"");break;case 237:e.append("[)>06"),r.insert(0,"");break;case 238:return pn.ANSIX12_ENCODE;case 239:return pn.TEXT_ENCODE;case 240:return pn.EDIFACT_ENCODE;case 241:break;default:if(a!==254||t.available()!==0)throw new dt;break}}while(t.available()>0);return pn.ASCII_ENCODE},n.decodeC40Segment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[c];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new dt;break;case 1:r?(e.append(String.fromCharCode(c+128)),r=!1):e.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[c];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(c){case 27:e.append("");break;case 30:r=!0;break;default:throw new dt}a=0;break;case 3:r?(e.append(String.fromCharCode(c+224)),r=!1):e.append(String.fromCharCode(c+96)),a=0;break;default:throw new dt}}}while(t.available()>0)},n.decodeTextSegment=function(t,e){var r=!1,i=[],a=0;do{if(t.available()===8)return;var o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(a){case 0:if(c<3)a=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[c];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else throw new dt;break;case 1:r?(e.append(String.fromCharCode(c+128)),r=!1):e.append(String.fromCharCode(c)),a=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[c];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h)}else switch(c){case 27:e.append("");break;case 30:r=!0;break;default:throw new dt}a=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[c];r?(e.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):e.append(h),a=0}else throw new dt;break;default:throw new dt}}}while(t.available()>0)},n.decodeAnsiX12Segment=function(t,e){var r=[];do{if(t.available()===8)return;var i=t.readBits(8);if(i===254)return;this.parseTwoBytes(i,t.readBits(8),r);for(var a=0;a<3;a++){var o=r[a];switch(o){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(o<14)e.append(String.fromCharCode(o+44));else if(o<40)e.append(String.fromCharCode(o+51));else throw new dt;break}}}while(t.available()>0)},n.parseTwoBytes=function(t,e,r){var i=(t<<8)+e-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(t,e){do{if(t.available()<=16)return;for(var r=0;r<4;r++){var i=t.readBits(6);if(i===31){var a=8-t.getBitOffset();a!==8&&t.readBits(a);return}(i&32)===0&&(i|=64),e.append(String.fromCharCode(i))}}while(t.available()>0)},n.decodeBase256Segment=function(t,e,r){var i=1+t.getByteOffset(),a=this.unrandomize255State(t.readBits(8),i++),o;if(a===0?o=t.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(t.readBits(8),i++),o<0)throw new dt;for(var l=new Uint8Array(o),c=0;c<o;c++){if(t.available()<8)throw new dt;l[c]=this.unrandomize255State(t.readBits(8),i++)}r.push(l);try{e.append(ei.decode(l,te.ISO88591))}catch(h){throw new Gh("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(t,e){var r=149*e%255+1,i=t-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),wj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tj=(function(){function n(){this.rsDecoder=new Op(yr.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(t){var e,r,i=new xj(t),a=i.getVersion(),o=i.readCodewords(),l=Ej.getDataBlocks(o,a),c=0;try{for(var h=wj(l),p=h.next();!p.done;p=h.next()){var g=p.value;c+=g.getNumDataCodewords()}}catch(P){e={error:P}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}for(var v=new Uint8Array(c),x=l.length,A=0;A<x;A++){var S=l[A],C=S.getCodewords(),O=S.getNumDataCodewords();this.correctErrors(C,O);for(var D=0;D<O;D++)v[D*x+A]=C[D]}return Aj.decode(v)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Rn}for(var i=0;i<e;i++)t[i]=r[i]},n})(),Sj=(function(){function n(t){this.image=t,this.rectangleDetector=new Nv(this.image)}return n.prototype.detect=function(){var t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if(e=this.detectSolid2(e),e[3]=this.correctTopRight(e),!e[3])throw new rt;e=this.shiftToModuleCenter(e);var r=e[0],i=e[1],a=e[2],o=e[3],l=this.transitionsBetween(r,o)+1,c=this.transitionsBetween(a,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var h=n.sampleGrid(this.image,r,i,a,o,l,c);return new M2(h,[r,i,a,o])},n.shiftPoint=function(t,e,r){var i=(e.getX()-t.getX())/(r+1),a=(e.getY()-t.getY())/(r+1);return new Et(t.getX()+i,t.getY()+a)},n.moveAway=function(t,e,r){var i=t.getX(),a=t.getY();return i<e?i-=1:i+=1,a<r?a-=1:a+=1,new Et(i,a)},n.prototype.detectSolid1=function(t){var e=t[0],r=t[1],i=t[3],a=t[2],o=this.transitionsBetween(e,r),l=this.transitionsBetween(r,i),c=this.transitionsBetween(i,a),h=this.transitionsBetween(a,e),p=o,g=[a,e,r,i];return p>l&&(p=l,g[0]=e,g[1]=r,g[2]=i,g[3]=a),p>c&&(p=c,g[0]=r,g[1]=i,g[2]=a,g[3]=e),p>h&&(g[0]=i,g[1]=a,g[2]=e,g[3]=r),g},n.prototype.detectSolid2=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],o=this.transitionsBetween(e,a),l=n.shiftPoint(r,i,(o+1)*4),c=n.shiftPoint(i,r,(o+1)*4),h=this.transitionsBetween(l,e),p=this.transitionsBetween(c,a);return h<p?(t[0]=e,t[1]=r,t[2]=i,t[3]=a):(t[0]=r,t[1]=i,t[2]=a,t[3]=e),t},n.prototype.correctTopRight=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],o=this.transitionsBetween(e,a),l=this.transitionsBetween(r,a),c=n.shiftPoint(e,r,(l+1)*4),h=n.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(c,a),l=this.transitionsBetween(h,a);var p=new Et(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),g=new Et(a.getX()+(e.getX()-r.getX())/(l+1),a.getY()+(e.getY()-r.getY())/(l+1));if(!this.isValid(p))return this.isValid(g)?g:null;if(!this.isValid(g))return p;var v=this.transitionsBetween(c,p)+this.transitionsBetween(h,p),x=this.transitionsBetween(c,g)+this.transitionsBetween(h,g);return v>x?p:g},n.prototype.shiftToModuleCenter=function(t){var e=t[0],r=t[1],i=t[2],a=t[3],o=this.transitionsBetween(e,a)+1,l=this.transitionsBetween(i,a)+1,c=n.shiftPoint(e,r,l*4),h=n.shiftPoint(i,r,o*4);o=this.transitionsBetween(c,a)+1,l=this.transitionsBetween(h,a)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var p=(e.getX()+r.getX()+i.getX()+a.getX())/4,g=(e.getY()+r.getY()+i.getY()+a.getY())/4;e=n.moveAway(e,p,g),r=n.moveAway(r,p,g),i=n.moveAway(i,p,g),a=n.moveAway(a,p,g);var v,x;return c=n.shiftPoint(e,r,l*4),c=n.shiftPoint(c,a,o*4),v=n.shiftPoint(r,e,l*4),v=n.shiftPoint(v,i,o*4),h=n.shiftPoint(i,a,l*4),h=n.shiftPoint(h,r,o*4),x=n.shiftPoint(a,i,l*4),x=n.shiftPoint(x,e,o*4),[c,v,h,x]},n.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},n.sampleGrid=function(t,e,r,i,a,o,l){var c=V2.getInstance();return c.sampleGrid(t,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,e.getX(),e.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(t,e){var r=Math.trunc(t.getX()),i=Math.trunc(t.getY()),a=Math.trunc(e.getX()),o=Math.trunc(e.getY()),l=Math.abs(o-i)>Math.abs(a-r);if(l){var c=r;r=i,i=c,c=a,a=o,o=c}for(var h=Math.abs(a-r),p=Math.abs(o-i),g=-h/2,v=i<o?1:-1,x=r<a?1:-1,A=0,S=this.image.get(l?i:r,l?r:i),C=r,O=i;C!==a;C+=x){var D=this.image.get(l?O:C,l?C:O);if(D!==S&&(A++,S=D),g+=p,g>0){if(O===o)break;O+=v,g-=h}}return A},n})(),Vv=(function(){function n(){this.decoder=new Tj}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r,i;if(e!=null&&e.has(Ue.PURE_BARCODE)){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var o=new Sj(t.getBlackMatrix()).detect();r=this.decoder.decode(o.getBits()),i=o.getPoints()}var l=r.getRawBytes(),c=new Jn(r.getText(),l,8*l.length,i,Ct.DATA_MATRIX,Ie.currentTimeMillis()),h=r.getByteSegments();h!=null&&c.putMetadata(jn.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&c.putMetadata(jn.ERROR_CORRECTION_LEVEL,p),c},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e==null||r==null)throw new rt;var i=this.moduleSize(e,t),a=e[1],o=r[1],l=e[0],c=r[0],h=(c-l+1)/i,p=(o-a+1)/i;if(h<=0||p<=0)throw new rt;var g=i/2;a+=g,l+=g;for(var v=new ia(h,p),x=0;x<p;x++)for(var A=a+x*i,S=0;S<h;S++)t.get(l+S*i,A)&&v.set(S,x);return v},n.moduleSize=function(t,e){for(var r=e.getWidth(),i=t[0],a=t[1];i<r&&e.get(i,a);)i++;if(i===r)throw new rt;var o=i-t[0];if(o===0)throw new rt;return o},n.NO_POINTS=[],n})(),Ij=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){Ij(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Vv,e)||this}return t})(hc);var Cl;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Cl||(Cl={}));var Cj=(function(){function n(t,e,r){this.value=t,this.stringValue=e,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(t,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(t){switch(t){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new mi(t+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.forBits=function(t){if(t<0||t>=n.FOR_BITS.size)throw new bt;return n.FOR_BITS.get(t)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Cl.L,"L",1),n.M=new n(Cl.M,"M",0),n.Q=new n(Cl.Q,"Q",3),n.H=new n(Cl.H,"H",2),n})(),bj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},V8=(function(){function n(t){this.errorCorrectionLevel=Cj.forBits(t>>3&3),this.dataMask=t&7}return n.numBitsDiffering=function(t,e){return Ht.bitCount(t^e)},n.decodeFormatInformation=function(t,e){var r=n.doDecodeFormatInformation(t,e);return r!==null?r:n.doDecodeFormatInformation(t^n.FORMAT_INFO_MASK_QR,e^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(t,e){var r,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=bj(n.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var h=c.value,p=h[0];if(p===t||p===e)return new n(h[1]);var g=n.numBitsDiffering(t,p);g<a&&(o=h[1],a=g),t!==e&&(g=n.numBitsDiffering(e,p),g<a&&(o=h[1],a=g))}}catch(v){r={error:v}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a<=3?new n(o):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.errorCorrectionLevel===e.errorCorrectionLevel&&this.dataMask===e.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),Rj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$=(function(){function n(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.ecCodewordsPerBlock=t,this.ecBlocks=e}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var t,e,r=0,i=this.ecBlocks;try{for(var a=Rj(i),o=a.next();!o.done;o=a.next()){var l=o.value;r+=l.getCount()}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),V=(function(){function n(t,e){this.count=t,this.dataCodewords=e}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),Dj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},iu=(function(){function n(t,e){for(var r,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=a;var l=0,c=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=Dj(h),g=p.next();!g.done;g=p.next()){var v=g.value;l+=v.getCount()*(v.getDataCodewords()+c)}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},n.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new dt;try{return this.getVersionForNumber((t-17)/4)}catch{throw new dt}},n.getVersionForNumber=function(t){if(t<1||t>40)throw new bt;return n.VERSIONS[t-1]},n.decodeVersionInformation=function(t){for(var e=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===t)return n.getVersionForNumber(i+7);var o=V8.numBitsDiffering(t,a);o<e&&(r=i+7,e=o)}return e<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),e=new ia(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||e.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new $(7,new V(1,19)),new $(10,new V(1,16)),new $(13,new V(1,13)),new $(17,new V(1,9))),new n(2,Int32Array.from([6,18]),new $(10,new V(1,34)),new $(16,new V(1,28)),new $(22,new V(1,22)),new $(28,new V(1,16))),new n(3,Int32Array.from([6,22]),new $(15,new V(1,55)),new $(26,new V(1,44)),new $(18,new V(2,17)),new $(22,new V(2,13))),new n(4,Int32Array.from([6,26]),new $(20,new V(1,80)),new $(18,new V(2,32)),new $(26,new V(2,24)),new $(16,new V(4,9))),new n(5,Int32Array.from([6,30]),new $(26,new V(1,108)),new $(24,new V(2,43)),new $(18,new V(2,15),new V(2,16)),new $(22,new V(2,11),new V(2,12))),new n(6,Int32Array.from([6,34]),new $(18,new V(2,68)),new $(16,new V(4,27)),new $(24,new V(4,19)),new $(28,new V(4,15))),new n(7,Int32Array.from([6,22,38]),new $(20,new V(2,78)),new $(18,new V(4,31)),new $(18,new V(2,14),new V(4,15)),new $(26,new V(4,13),new V(1,14))),new n(8,Int32Array.from([6,24,42]),new $(24,new V(2,97)),new $(22,new V(2,38),new V(2,39)),new $(22,new V(4,18),new V(2,19)),new $(26,new V(4,14),new V(2,15))),new n(9,Int32Array.from([6,26,46]),new $(30,new V(2,116)),new $(22,new V(3,36),new V(2,37)),new $(20,new V(4,16),new V(4,17)),new $(24,new V(4,12),new V(4,13))),new n(10,Int32Array.from([6,28,50]),new $(18,new V(2,68),new V(2,69)),new $(26,new V(4,43),new V(1,44)),new $(24,new V(6,19),new V(2,20)),new $(28,new V(6,15),new V(2,16))),new n(11,Int32Array.from([6,30,54]),new $(20,new V(4,81)),new $(30,new V(1,50),new V(4,51)),new $(28,new V(4,22),new V(4,23)),new $(24,new V(3,12),new V(8,13))),new n(12,Int32Array.from([6,32,58]),new $(24,new V(2,92),new V(2,93)),new $(22,new V(6,36),new V(2,37)),new $(26,new V(4,20),new V(6,21)),new $(28,new V(7,14),new V(4,15))),new n(13,Int32Array.from([6,34,62]),new $(26,new V(4,107)),new $(22,new V(8,37),new V(1,38)),new $(24,new V(8,20),new V(4,21)),new $(22,new V(12,11),new V(4,12))),new n(14,Int32Array.from([6,26,46,66]),new $(30,new V(3,115),new V(1,116)),new $(24,new V(4,40),new V(5,41)),new $(20,new V(11,16),new V(5,17)),new $(24,new V(11,12),new V(5,13))),new n(15,Int32Array.from([6,26,48,70]),new $(22,new V(5,87),new V(1,88)),new $(24,new V(5,41),new V(5,42)),new $(30,new V(5,24),new V(7,25)),new $(24,new V(11,12),new V(7,13))),new n(16,Int32Array.from([6,26,50,74]),new $(24,new V(5,98),new V(1,99)),new $(28,new V(7,45),new V(3,46)),new $(24,new V(15,19),new V(2,20)),new $(30,new V(3,15),new V(13,16))),new n(17,Int32Array.from([6,30,54,78]),new $(28,new V(1,107),new V(5,108)),new $(28,new V(10,46),new V(1,47)),new $(28,new V(1,22),new V(15,23)),new $(28,new V(2,14),new V(17,15))),new n(18,Int32Array.from([6,30,56,82]),new $(30,new V(5,120),new V(1,121)),new $(26,new V(9,43),new V(4,44)),new $(28,new V(17,22),new V(1,23)),new $(28,new V(2,14),new V(19,15))),new n(19,Int32Array.from([6,30,58,86]),new $(28,new V(3,113),new V(4,114)),new $(26,new V(3,44),new V(11,45)),new $(26,new V(17,21),new V(4,22)),new $(26,new V(9,13),new V(16,14))),new n(20,Int32Array.from([6,34,62,90]),new $(28,new V(3,107),new V(5,108)),new $(26,new V(3,41),new V(13,42)),new $(30,new V(15,24),new V(5,25)),new $(28,new V(15,15),new V(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new $(28,new V(4,116),new V(4,117)),new $(26,new V(17,42)),new $(28,new V(17,22),new V(6,23)),new $(30,new V(19,16),new V(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new $(28,new V(2,111),new V(7,112)),new $(28,new V(17,46)),new $(30,new V(7,24),new V(16,25)),new $(24,new V(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new $(30,new V(4,121),new V(5,122)),new $(28,new V(4,47),new V(14,48)),new $(30,new V(11,24),new V(14,25)),new $(30,new V(16,15),new V(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new $(30,new V(6,117),new V(4,118)),new $(28,new V(6,45),new V(14,46)),new $(30,new V(11,24),new V(16,25)),new $(30,new V(30,16),new V(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new $(26,new V(8,106),new V(4,107)),new $(28,new V(8,47),new V(13,48)),new $(30,new V(7,24),new V(22,25)),new $(30,new V(22,15),new V(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new $(28,new V(10,114),new V(2,115)),new $(28,new V(19,46),new V(4,47)),new $(28,new V(28,22),new V(6,23)),new $(30,new V(33,16),new V(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new $(30,new V(8,122),new V(4,123)),new $(28,new V(22,45),new V(3,46)),new $(30,new V(8,23),new V(26,24)),new $(30,new V(12,15),new V(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new $(30,new V(3,117),new V(10,118)),new $(28,new V(3,45),new V(23,46)),new $(30,new V(4,24),new V(31,25)),new $(30,new V(11,15),new V(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new $(30,new V(7,116),new V(7,117)),new $(28,new V(21,45),new V(7,46)),new $(30,new V(1,23),new V(37,24)),new $(30,new V(19,15),new V(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new $(30,new V(5,115),new V(10,116)),new $(28,new V(19,47),new V(10,48)),new $(30,new V(15,24),new V(25,25)),new $(30,new V(23,15),new V(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new $(30,new V(13,115),new V(3,116)),new $(28,new V(2,46),new V(29,47)),new $(30,new V(42,24),new V(1,25)),new $(30,new V(23,15),new V(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new $(30,new V(17,115)),new $(28,new V(10,46),new V(23,47)),new $(30,new V(10,24),new V(35,25)),new $(30,new V(19,15),new V(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new $(30,new V(17,115),new V(1,116)),new $(28,new V(14,46),new V(21,47)),new $(30,new V(29,24),new V(19,25)),new $(30,new V(11,15),new V(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new $(30,new V(13,115),new V(6,116)),new $(28,new V(14,46),new V(23,47)),new $(30,new V(44,24),new V(7,25)),new $(30,new V(59,16),new V(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new $(30,new V(12,121),new V(7,122)),new $(28,new V(12,47),new V(26,48)),new $(30,new V(39,24),new V(14,25)),new $(30,new V(22,15),new V(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new $(30,new V(6,121),new V(14,122)),new $(28,new V(6,47),new V(34,48)),new $(30,new V(46,24),new V(10,25)),new $(30,new V(2,15),new V(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new $(30,new V(17,122),new V(4,123)),new $(28,new V(29,46),new V(14,47)),new $(30,new V(49,24),new V(10,25)),new $(30,new V(24,15),new V(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new $(30,new V(4,122),new V(18,123)),new $(28,new V(13,46),new V(32,47)),new $(30,new V(48,24),new V(14,25)),new $(30,new V(42,15),new V(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new $(30,new V(20,117),new V(4,118)),new $(28,new V(40,47),new V(7,48)),new $(30,new V(43,24),new V(22,25)),new $(30,new V(10,15),new V(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new $(30,new V(19,118),new V(6,119)),new $(28,new V(18,47),new V(31,48)),new $(30,new V(34,24),new V(34,25)),new $(30,new V(20,15),new V(61,16)))],n})(),In;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(In||(In={}));var ZI=(function(){function n(t,e){this.value=t,this.isMasked=e}return n.prototype.unmaskBitMatrix=function(t,e){for(var r=0;r<e;r++)for(var i=0;i<e;i++)this.isMasked(r,i)&&t.flip(i,r)},n.values=new Map([[In.DATA_MASK_000,new n(In.DATA_MASK_000,function(t,e){return(t+e&1)===0})],[In.DATA_MASK_001,new n(In.DATA_MASK_001,function(t,e){return(t&1)===0})],[In.DATA_MASK_010,new n(In.DATA_MASK_010,function(t,e){return e%3===0})],[In.DATA_MASK_011,new n(In.DATA_MASK_011,function(t,e){return(t+e)%3===0})],[In.DATA_MASK_100,new n(In.DATA_MASK_100,function(t,e){return(Math.floor(t/2)+Math.floor(e/3)&1)===0})],[In.DATA_MASK_101,new n(In.DATA_MASK_101,function(t,e){return t*e%6===0})],[In.DATA_MASK_110,new n(In.DATA_MASK_110,function(t,e){return t*e%6<3})],[In.DATA_MASK_111,new n(In.DATA_MASK_111,function(t,e){return(t+e+t*e%3&1)===0})]]),n})(),Oj=(function(){function n(t){var e=t.getHeight();if(e<21||(e&3)!==1)throw new dt;this.bitMatrix=t}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var r=5;r>=0;r--)t=this.copyBit(8,r,t);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,r=i-1;r>=o;r--)a=this.copyBit(8,r,a);for(var e=i-8;e<i;e++)a=this.copyBit(e,8,a);if(this.parsedFormatInfo=V8.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new dt},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return iu.getVersionForNumber(e);for(var r=0,i=t-11,a=5;a>=0;a--)for(var o=t-9;o>=i;o--)r=this.copyBit(o,a,r);var l=iu.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;r=0;for(var o=5;o>=0;o--)for(var a=t-9;a>=i;a--)r=this.copyBit(o,a,r);if(l=iu.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===t)return this.parsedVersion=l,l;throw new dt},n.prototype.copyBit=function(t,e,r){var i=this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var t=this.readFormatInformation(),e=this.readVersion(),r=ZI.values.get(t.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=e.buildFunctionPattern(),o=!0,l=new Uint8Array(e.getTotalCodewords()),c=0,h=0,p=0,g=i-1;g>0;g-=2){g===6&&g--;for(var v=0;v<i;v++)for(var x=o?i-1-v:v,A=0;A<2;A++)a.get(g-A,x)||(p++,h<<=1,this.bitMatrix.get(g-A,x)&&(h|=1),p===8&&(l[c++]=h,p=0,h=0));o=!o}if(c!==e.getTotalCodewords())throw new dt;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=ZI.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}},n.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},n.prototype.mirror=function(){for(var t=this.bitMatrix,e=0,r=t.getWidth();e<r;e++)for(var i=e+1,a=t.getHeight();i<a;i++)t.get(e,i)!==t.get(i,e)&&(t.flip(i,e),t.flip(e,i))},n})(),JI=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nj=(function(){function n(t,e){this.numDataCodewords=t,this.codewords=e}return n.getDataBlocks=function(t,e,r){var i,a,o,l;if(t.length!==e.getTotalCodewords())throw new bt;var c=e.getECBlocksForLevel(r),h=0,p=c.getECBlocks();try{for(var g=JI(p),v=g.next();!v.done;v=g.next()){var x=v.value;h+=x.getCount()}}catch(F){i={error:F}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}var A=new Array(h),S=0;try{for(var C=JI(p),O=C.next();!O.done;O=C.next())for(var x=O.value,D=0;D<x.getCount();D++){var P=x.getDataCodewords(),k=c.getECCodewordsPerBlock()+P;A[S++]=new n(P,new Uint8Array(k))}}catch(F){o={error:F}}finally{try{O&&!O.done&&(l=C.return)&&l.call(C)}finally{if(o)throw o.error}}for(var j=A[0].codewords.length,K=A.length-1;K>=0;){var R=A[K].codewords.length;if(R===j)break;K--}K++;for(var I=j-c.getECCodewordsPerBlock(),M=0,D=0;D<I;D++)for(var B=0;B<S;B++)A[B].codewords[D]=t[M++];for(var B=K;B<S;B++)A[B].codewords[I]=t[M++];for(var U=A[0].codewords.length,D=I;D<U;D++)for(var B=0;B<S;B++){var H=B<K?D:D+1;A[B].codewords[H]=t[M++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),$r;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})($r||($r={}));var Oe=(function(){function n(t,e,r,i){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(t,this)}return n.forBits=function(t){var e=n.FOR_BITS.get(t);if(e===void 0)throw new bt;return e},n.prototype.getCharacterCountBits=function(t){var e=t.getVersionNumber(),r;return e<=9?r=0:e<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;return this.value===e.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n($r.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n($r.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n($r.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n($r.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n($r.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n($r.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n($r.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n($r.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n($r.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n($r.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),Pj=(function(){function n(){}return n.decode=function(t,e,r,i){var a=new M8(t),o=new zt,l=new Array,c=-1,h=-1;try{var p=null,g=!1,v=void 0;do{if(a.available()<4)v=Oe.TERMINATOR;else{var x=a.readBits(4);v=Oe.forBits(x)}switch(v){case Oe.TERMINATOR:break;case Oe.FNC1_FIRST_POSITION:case Oe.FNC1_SECOND_POSITION:g=!0;break;case Oe.STRUCTURED_APPEND:if(a.available()<16)throw new dt;c=a.readBits(8),h=a.readBits(8);break;case Oe.ECI:var A=n.parseECIValue(a);if(p=vn.getCharacterSetECIByValue(A),p===null)throw new dt;break;case Oe.HANZI:var S=a.readBits(4),C=a.readBits(v.getCharacterCountBits(e));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,o,C);break;default:var O=a.readBits(v.getCharacterCountBits(e));switch(v){case Oe.NUMERIC:n.decodeNumericSegment(a,o,O);break;case Oe.ALPHANUMERIC:n.decodeAlphanumericSegment(a,o,O,g);break;case Oe.BYTE:n.decodeByteSegment(a,o,O,p,l,i);break;case Oe.KANJI:n.decodeKanjiSegment(a,o,O);break;default:throw new dt}break}}while(v!==Oe.TERMINATOR)}catch{throw new dt}return new Dp(t,o.toString(),l.length===0?null:l,r===null?null:r.toString(),c,h)},n.decodeHanziSegment=function(t,e,r){if(r*13>t.available())throw new dt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=t.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,r--}try{e.append(ei.decode(i,te.GB2312))}catch(c){throw new dt(c)}},n.decodeKanjiSegment=function(t,e,r){if(r*13>t.available())throw new dt;for(var i=new Uint8Array(2*r),a=0;r>0;){var o=t.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,r--}try{e.append(ei.decode(i,te.SHIFT_JIS))}catch(c){throw new dt(c)}},n.decodeByteSegment=function(t,e,r,i,a,o){if(8*r>t.available())throw new dt;for(var l=new Uint8Array(r),c=0;c<r;c++)l[c]=t.readBits(8);var h;i===null?h=te.guessEncoding(l,o):h=i.getName();try{e.append(ei.decode(l,h))}catch(p){throw new dt(p)}a.push(l)},n.toAlphaNumericChar=function(t){if(t>=n.ALPHANUMERIC_CHARS.length)throw new dt;return n.ALPHANUMERIC_CHARS[t]},n.decodeAlphanumericSegment=function(t,e,r,i){for(var a=e.length();r>1;){if(t.available()<11)throw new dt;var o=t.readBits(11);e.append(n.toAlphaNumericChar(Math.floor(o/45))),e.append(n.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(t.available()<6)throw new dt;e.append(n.toAlphaNumericChar(t.readBits(6)))}if(i)for(var l=a;l<e.length();l++)e.charAt(l)==="%"&&(l<e.length()-1&&e.charAt(l+1)==="%"?e.deleteCharAt(l+1):e.setCharAt(l,""))},n.decodeNumericSegment=function(t,e,r){for(;r>=3;){if(t.available()<10)throw new dt;var i=t.readBits(10);if(i>=1e3)throw new dt;e.append(n.toAlphaNumericChar(Math.floor(i/100))),e.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),e.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new dt;var a=t.readBits(7);if(a>=100)throw new dt;e.append(n.toAlphaNumericChar(Math.floor(a/10))),e.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(t.available()<4)throw new dt;var o=t.readBits(4);if(o>=10)throw new dt;e.append(n.toAlphaNumericChar(o))}},n.parseECIValue=function(t){var e=t.readBits(8);if((e&128)===0)return e&127;if((e&192)===128){var r=t.readBits(8);return(e&63)<<8&4294967295|r}if((e&224)===192){var i=t.readBits(16);return(e&31)<<16&4294967295|i}throw new dt},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),L8=(function(){function n(t){this.mirrored=t}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var e=t[0];t[0]=t[2],t[2]=e}},n})(),tC=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Mj=(function(){function n(){this.rsDecoder=new Op(yr.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(t,e){return this.decodeBitMatrix(ia.parseFromBooleanArray(t),e)},n.prototype.decodeBitMatrix=function(t,e){var r=new Oj(t),i=null;try{return this.decodeBitMatrixParser(r,e)}catch(o){i=o}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,e);return a.setOther(new L8(!0)),a}catch(o){throw i!==null?i:o}},n.prototype.decodeBitMatrixParser=function(t,e){var r,i,a,o,l=t.readVersion(),c=t.readFormatInformation().getErrorCorrectionLevel(),h=t.readCodewords(),p=Nj.getDataBlocks(h,l,c),g=0;try{for(var v=tC(p),x=v.next();!x.done;x=v.next()){var A=x.value;g+=A.getNumDataCodewords()}}catch(K){r={error:K}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}var S=new Uint8Array(g),C=0;try{for(var O=tC(p),D=O.next();!D.done;D=O.next()){var A=D.value,P=A.getCodewords(),k=A.getNumDataCodewords();this.correctErrors(P,k);for(var j=0;j<k;j++)S[C++]=P[j]}}catch(K){a={error:K}}finally{try{D&&!D.done&&(o=O.return)&&o.call(O)}finally{if(a)throw a.error}}return Pj.decode(S,l,c,e)},n.prototype.correctErrors=function(t,e){var r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch{throw new Rn}for(var i=0;i<e;i++)t[i]=r[i]},n})(),Vj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Lj=(function(n){Vj(t,n);function t(e,r,i){var a=n.call(this,e,r)||this;return a.estimatedModuleSize=i,a}return t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=(this.getX()+r)/2,o=(this.getY()+e)/2,l=(this.estimatedModuleSize+i)/2;return new t(a,o,l)},t})(Et),kj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bj=(function(){function n(t,e,r,i,a,o,l){this.image=t,this.startX=e,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var t=this.startX,e=this.height,r=this.width,i=t+r,a=this.startY+e/2,o=new Int32Array(3),l=this.image,c=0;c<e;c++){var h=a+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var p=t;p<i&&!l.get(p,h);)p++;for(var g=0;p<i;){if(l.get(p,h))if(g===1)o[1]++;else if(g===2){if(this.foundPatternCross(o)){var v=this.handlePossibleCenter(o,h,p);if(v!==null)return v}o[0]=o[2],o[1]=1,o[2]=0,g=1}else o[++g]++;else g===1&&g++,o[g]++;p++}if(this.foundPatternCross(o)){var v=this.handlePossibleCenter(o,h,i);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new rt},n.centerFromEnd=function(t,e){return e-t[2]-t[1]/2},n.prototype.foundPatternCross=function(t){for(var e=this.moduleSize,r=e/2,i=0;i<3;i++)if(Math.abs(e-t[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(t,e,r,i){var a=this.image,o=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=t;c>=0&&a.get(e,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&!a.get(e,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<o&&a.get(e,c)&&l[1]<=r;)l[1]++,c++;if(c===o||l[1]>r)return NaN;for(;c<o&&!a.get(e,c)&&l[2]<=r;)l[2]++,c++;if(l[2]>r)return NaN;var h=l[0]+l[1]+l[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(t,e,r){var i,a,o=t[0]+t[1]+t[2],l=n.centerFromEnd(t,r),c=this.crossCheckVertical(e,l,2*t[1],o);if(!isNaN(c)){var h=(t[0]+t[1]+t[2])/3;try{for(var p=kj(this.possibleCenters),g=p.next();!g.done;g=p.next()){var v=g.value;if(v.aboutEquals(h,c,l))return v.combineEstimate(c,l,h)}}catch(A){i={error:A}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new Lj(l,c,h);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n})(),Fj=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Uj=(function(n){Fj(t,n);function t(e,r,i,a){var o=n.call(this,e,r)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){var a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,r,i){var a=this.count+1,o=(this.count*this.getX()+r)/a,l=(this.count*this.getY()+e)/a,c=(this.count*this.estimatedModuleSize+i)/a;return new t(o,l,c,a)},t})(Et),zj=(function(){function n(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),If=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jj=(function(){function n(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(t){var e=t!=null&&t.get(Ue.TRY_HARDER)!==void 0,r=t!=null&&t.get(Ue.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),l=Math.floor(3*a/(4*n.MAX_MODULES));(l<n.MIN_SKIP||e)&&(l=n.MIN_SKIP);for(var c=!1,h=new Int32Array(5),p=l-1;p<a&&!c;p+=l){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var g=0,v=0;v<o;v++)if(i.get(v,p))(g&1)===1&&g++,h[g]++;else if((g&1)===0)if(g===4)if(n.foundPatternCross(h)){var x=this.handlePossibleCenter(h,p,v,r);if(x===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>h[2]&&(p+=A-h[2]-l,v=o-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;continue}g=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,g=3;else h[++g]++;else h[g]++;if(n.foundPatternCross(h)){var x=this.handlePossibleCenter(h,p,o,r);x===!0&&(l=h[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Et.orderBestPatterns(S),new zj(S)},n.centerFromEnd=function(t,e){return e-t[4]-t[3]-t[2]/2},n.foundPatternCross=function(t){for(var e=0,r=0;r<5;r++){var i=t[r];if(i===0)return!1;e+=i}if(e<7)return!1;var a=e/7,o=a/2;return Math.abs(a-t[0])<o&&Math.abs(a-t[1])<o&&Math.abs(3*a-t[2])<3*o&&Math.abs(a-t[3])<o&&Math.abs(a-t[4])<o},n.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},n.prototype.crossCheckDiagonal=function(t,e,r,i){for(var a=this.getCrossCheckStateCount(),o=0,l=this.image;t>=o&&e>=o&&l.get(e-o,t-o);)a[2]++,o++;if(t<o||e<o)return!1;for(;t>=o&&e>=o&&!l.get(e-o,t-o)&&a[1]<=r;)a[1]++,o++;if(t<o||e<o||a[1]>r)return!1;for(;t>=o&&e>=o&&l.get(e-o,t-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;var c=l.getHeight(),h=l.getWidth();for(o=1;t+o<c&&e+o<h&&l.get(e+o,t+o);)a[2]++,o++;if(t+o>=c||e+o>=h)return!1;for(;t+o<c&&e+o<h&&!l.get(e+o,t+o)&&a[3]<r;)a[3]++,o++;if(t+o>=c||e+o>=h||a[3]>=r)return!1;for(;t+o<c&&e+o<h&&l.get(e+o,t+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(t,e,r,i){for(var a=this.image,o=a.getHeight(),l=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(e,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(e,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&a.get(e,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<o&&a.get(e,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(e,c)&&l[3]<r;)l[3]++,c++;if(c===o||l[3]>=r)return NaN;for(;c<o&&a.get(e,c)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.crossCheckHorizontal=function(t,e,r,i){for(var a=this.image,o=a.getWidth(),l=this.getCrossCheckStateCount(),c=t;c>=0&&a.get(c,e);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!a.get(c,e)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&a.get(c,e)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=t+1;c<o&&a.get(c,e);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!a.get(c,e)&&l[3]<r;)l[3]++,c++;if(c===o||l[3]>=r)return NaN;for(;c<o&&a.get(c,e)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(t,e,r,i){var a=t[0]+t[1]+t[2]+t[3]+t[4],o=n.centerFromEnd(t,r),l=this.crossCheckVertical(e,Math.floor(o),t[2],a);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),t[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),t[2],a)))){for(var c=a/7,h=!1,p=this.possibleCenters,g=0,v=p.length;g<v;g++){var x=p[g];if(x.aboutEquals(c,l,o)){p[g]=x.combineEstimate(l,o,c),h=!0;break}}if(!h){var A=new Uj(o,l,c);p.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var t,e,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=If(this.possibleCenters),o=a.next();!o.done;o=a.next()){var l=o.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var t,e,r,i,a=0,o=0,l=this.possibleCenters.length;try{for(var c=If(this.possibleCenters),h=c.next();!h.done;h=c.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,o+=p.getEstimatedModuleSize())}}catch(S){t={error:S}}finally{try{h&&!h.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}if(a<3)return!1;var g=o/l,v=0;try{for(var x=If(this.possibleCenters),A=x.next();!A.done;A=x.next()){var p=A.value;v+=Math.abs(p.getEstimatedModuleSize()-g)}}catch(S){r={error:S}}finally{try{A&&!A.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return v<=.05*o},n.prototype.selectBestPatterns=function(){var t,e,r,i,a=this.possibleCenters.length;if(a<3)throw new rt;var o=this.possibleCenters,l;if(a>3){var c=0,h=0;try{for(var p=If(this.possibleCenters),g=p.next();!g.done;g=p.next()){var v=g.value,x=v.getEstimatedModuleSize();c+=x,h+=x*x}}catch(j){t={error:j}}finally{try{g&&!g.done&&(e=p.return)&&e.call(p)}finally{if(t)throw t.error}}l=c/a;var A=Math.sqrt(h/a-l*l);o.sort(function(j,K){var R=Math.abs(K.getEstimatedModuleSize()-l),I=Math.abs(j.getEstimatedModuleSize()-l);return R<I?-1:R>I?1:0});for(var S=Math.max(.2*l,A),C=0;C<o.length&&o.length>3;C++){var O=o[C];Math.abs(O.getEstimatedModuleSize()-l)>S&&(o.splice(C,1),C--)}}if(o.length>3){var c=0;try{for(var D=If(o),P=D.next();!P.done;P=D.next()){var k=P.value;c+=k.getEstimatedModuleSize()}}catch(K){r={error:K}}finally{try{P&&!P.done&&(i=D.return)&&i.call(D)}finally{if(r)throw r.error}}l=c/o.length,o.sort(function(K,R){if(R.getCount()===K.getCount()){var I=Math.abs(R.getEstimatedModuleSize()-l),M=Math.abs(K.getEstimatedModuleSize()-l);return I<M?1:I>M?-1:0}else return R.getCount()-K.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),Hj=(function(){function n(t){this.image=t}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(Ue.NEED_RESULT_POINT_CALLBACK);var e=new jj(this.image,this.resultPointCallback),r=e.find(t);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(t){var e=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),a=this.calculateModuleSize(e,r,i);if(a<1)throw new rt("No pattern found in proccess finder.");var o=n.computeDimension(e,r,i,a),l=iu.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,h=null;if(l.getAlignmentPatternCenters().length>0)for(var p=r.getX()-e.getX()+i.getX(),g=r.getY()-e.getY()+i.getY(),v=1-3/c,x=Math.floor(e.getX()+v*(p-e.getX())),A=Math.floor(e.getY()+v*(g-e.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,x,A,S);break}catch(P){if(!(P instanceof rt))throw P}var C=n.createTransform(e,r,i,h,o),O=n.sampleGrid(this.image,C,o),D;return h===null?D=[i,e,r]:D=[i,e,r,h],new M2(O,D)},n.createTransform=function(t,e,r,i,a){var o=a-3.5,l,c,h,p;return i!==null?(l=i.getX(),c=i.getY(),h=o-3,p=h):(l=e.getX()-t.getX()+r.getX(),c=e.getY()-t.getY()+r.getY(),h=o,p=o),D8.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,h,p,3.5,o,t.getX(),t.getY(),e.getX(),e.getY(),l,c,r.getX(),r.getY())},n.sampleGrid=function(t,e,r){var i=V2.getInstance();return i.sampleGridWithTransform(t,r,r,e)},n.computeDimension=function(t,e,r,i){var a=ie.round(Et.distance(t,e)/i),o=ie.round(Et.distance(t,r)/i),l=Math.floor((a+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new rt("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2},n.prototype.calculateModuleSizeOneWay=function(t,e){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,e,r,i){var a=this.sizeOfBlackWhiteBlackRun(t,e,r,i),o=1,l=t-(r-t);l<0?(o=t/(t-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-t)/(l-t),l=this.image.getWidth()-1);var c=Math.floor(e-(i-e)*o);return o=1,c<0?(o=e/(e-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-e)/(c-e),c=this.image.getHeight()-1),l=Math.floor(t+(l-t)*o),a+=this.sizeOfBlackWhiteBlackRun(t,e,l,c),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(t,e,r,i){var a=Math.abs(i-e)>Math.abs(r-t);if(a){var o=t;t=e,e=o,o=r,r=i,i=o}for(var l=Math.abs(r-t),c=Math.abs(i-e),h=-l/2,p=t<r?1:-1,g=e<i?1:-1,v=0,x=r+p,A=t,S=e;A!==x;A+=p){var C=a?S:A,O=a?A:S;if(v===1===this.image.get(C,O)){if(v===2)return ie.distance(A,S,t,e);v++}if(h+=c,h>0){if(S===i)break;S+=g,h-=l}}return v===2?ie.distance(r+p,i,t,e):NaN},n.prototype.findAlignmentInRegion=function(t,e,r,i){var a=Math.floor(i*t),o=Math.max(0,e-a),l=Math.min(this.image.getWidth()-1,e+a);if(l-o<t*3)throw new rt("Alignment top exceeds estimated module size.");var c=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-c<t*3)throw new rt("Alignment bottom exceeds estimated module size.");var p=new Bj(this.image,o,c,l-o,h-c,t,this.resultPointCallback);return p.find()},n})(),Lv=(function(){function n(){this.decoder=new Mj}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(t,e){var r,i;if(e!=null&&e.get(Ue.PURE_BARCODE)!==void 0){var a=n.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,e),i=n.NO_POINTS}else{var o=new Hj(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(o.getBits(),e),i=o.getPoints()}r.getOther()instanceof L8&&r.getOther().applyMirroredCorrection(i);var l=new Jn(r.getText(),r.getRawBytes(),void 0,i,Ct.QR_CODE,void 0),c=r.getByteSegments();c!==null&&l.putMetadata(jn.BYTE_SEGMENTS,c);var h=r.getECLevel();return h!==null&&l.putMetadata(jn.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(l.putMetadata(jn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(jn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(t){var e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(e===null||r===null)throw new rt;var i=this.moduleSize(e,t),a=e[1],o=r[1],l=e[0],c=r[0];if(l>=c||a>=o)throw new rt;if(o-a!==c-l&&(c=l+(o-a),c>=t.getWidth()))throw new rt;var h=Math.round((c-l+1)/i),p=Math.round((o-a+1)/i);if(h<=0||p<=0)throw new rt;if(p!==h)throw new rt;var g=Math.floor(i/2);a+=g,l+=g;var v=l+Math.floor((h-1)*i)-c;if(v>0){if(v>g)throw new rt;l-=v}var x=a+Math.floor((p-1)*i)-o;if(x>0){if(x>g)throw new rt;a-=x}for(var A=new ia(h,p),S=0;S<p;S++)for(var C=a+Math.floor(S*i),O=0;O<h;O++)t.get(l+Math.floor(O*i),C)&&A.set(O,S);return A},n.moduleSize=function(t,e){for(var r=e.getHeight(),i=e.getWidth(),a=t[0],o=t[1],l=!0,c=0;a<i&&o<r;){if(l!==e.get(a,o)){if(++c===5)break;l=!l}a++,o++}if(a===i||o===r)throw new rt;return(a-t[0])/7},n.NO_POINTS=new Array,n})(),Gj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ee=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(t){return ie.sum(t)},n.toIntArray=function(t){var e,r;if(t==null||!t.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),a=0;try{for(var o=Gj(t),l=o.next();!l.done;l=o.next()){var c=l.value;i[a++]=c}}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return i},n.getCodeword=function(t){var e=_n.binarySearch(n.SYMBOL_TABLE,t&262143);return e<0?-1:(n.CODEWORD_TABLE[e]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),qj=(function(){function n(t,e){this.bits=t,this.points=e}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),Kj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xj=(function(){function n(){}return n.detectMultiple=function(t,e,r){var i=t.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new qj(i,a)},n.detect=function(t,e){for(var r,i,a=new Array,o=0,l=0,c=!1;o<e.getHeight();){var h=n.findVertices(e,o,l);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,l=0;try{for(var p=(r=void 0,Kj(a)),g=p.next();!g.done;g=p.next()){var v=g.value;v[1]!=null&&(o=Math.trunc(Math.max(o,v[1].getY()))),v[3]!=null&&(o=Math.max(o,Math.trunc(v[3].getY())))}}catch(x){r={error:x}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}o+=n.ROW_STEP;continue}if(c=!0,a.push(h),!t)break;h[2]!=null?(l=Math.trunc(h[2].getX()),o=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),o=Math.trunc(h[4].getY()))}return a},n.findVertices=function(t,e,r){var i=t.getHeight(),a=t.getWidth(),o=new Array(8);return n.copyToResult(o,n.findRowsWithPattern(t,i,a,e,r,n.START_PATTERN),n.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),e=Math.trunc(o[4].getY())),n.copyToResult(o,n.findRowsWithPattern(t,i,a,e,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),o},n.copyToResult=function(t,e,r){for(var i=0;i<r.length;i++)t[r[i]]=e[i]},n.findRowsWithPattern=function(t,e,r,i,a,o){for(var l=new Array(4),c=!1,h=new Int32Array(o.length);i<e;i+=n.ROW_STEP){var p=n.findGuardPattern(t,a,i,r,!1,o,h);if(p!=null){for(;i>0;){var g=n.findGuardPattern(t,a,--i,r,!1,o,h);if(g!=null)p=g;else{i++;break}}l[0]=new Et(p[0],i),l[1]=new Et(p[1],i),c=!0;break}}var v=i+1;if(c){for(var x=0,g=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);v<e;v++){var p=n.findGuardPattern(t,g[0],v,r,!1,o,h);if(p!=null&&Math.abs(g[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(g[1]-p[1])<n.MAX_PATTERN_DRIFT)g=p,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}v-=x+1,l[2]=new Et(g[0],v),l[3]=new Et(g[1],v)}return v-i<n.BARCODE_MIN_HEIGHT&&_n.fill(l,null),l},n.findGuardPattern=function(t,e,r,i,a,o,l){_n.fillWithin(l,0,l.length,0);for(var c=e,h=0;t.get(c,r)&&c>0&&h++<n.MAX_PIXEL_DRIFT;)c--;for(var p=c,g=0,v=o.length,x=a;p<i;p++){var A=t.get(p,r);if(A!==x)l[g]++;else{if(g===v-1){if(n.patternMatchVariance(l,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,p]);c+=l[0]+l[1],Ie.arraycopy(l,2,l,0,g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,x=!x}}return g===v-1&&n.patternMatchVariance(l,o,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,p-1]):null},n.patternMatchVariance=function(t,e,r){for(var i=t.length,a=0,o=0,l=0;l<i;l++)a+=t[l],o+=e[l];if(a<o)return 1/0;var c=a/o;r*=c;for(var h=0,p=0;p<i;p++){var g=t[p],v=e[p]*c,x=g>v?g-v:v-g;if(x>r)return 1/0;h+=x}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),Wj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$o=(function(){function n(t,e){if(e.length===0)throw new bt;this.field=t;var r=e.length;if(r>1&&e[0]===0){for(var i=1;i<r&&e[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Ie.arraycopy(e,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},n.prototype.evaluateAt=function(t){var e,r;if(t===0)return this.getCoefficient(0);if(t===1){var i=0;try{for(var a=Wj(this.coefficients),o=a.next();!o.done;o=a.next()){var l=o.value;i=this.field.add(i,l)}}catch(g){e={error:g}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i}for(var c=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)c=this.field.add(this.field.multiply(t,c),this.coefficients[p]);return c},n.prototype.add=function(t){if(!this.field.equals(t.field))throw new bt("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var e=this.coefficients,r=t.coefficients;if(e.length>r.length){var i=e;e=r,r=i}var a=new Int32Array(r.length),o=r.length-e.length;Ie.arraycopy(r,0,a,0,o);for(var l=o;l<r.length;l++)a[l]=this.field.add(e[l-o],r[l]);return new n(this.field,a)},n.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new bt("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},n.prototype.multiply=function(t){return t instanceof n?this.multiplyOther(t):this.multiplyScalar(t)},n.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new bt("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new n(this.field,new Int32Array([0]));for(var e=this.coefficients,r=e.length,i=t.coefficients,a=i.length,o=new Int32Array(r+a-1),l=0;l<r;l++)for(var c=e[l],h=0;h<a;h++)o[l+h]=this.field.add(o[l+h],this.field.multiply(c,i[h]));return new n(this.field,o)},n.prototype.negative=function(){for(var t=this.coefficients.length,e=new Int32Array(t),r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,e)},n.prototype.multiplyScalar=function(t){if(t===0)return new n(this.field,new Int32Array([0]));if(t===1)return this;for(var e=this.coefficients.length,r=new Int32Array(e),i=0;i<e;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(t,e){if(t<0)throw new bt;if(e===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],e);return new n(this.field,i)},n.prototype.toString=function(){for(var t=new zt,e=this.getDegree();e>=0;e--){var r=this.getCoefficient(e);r!==0&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(e===0||r!==1)&&t.append(r),e!==0&&(e===1?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()},n})(),Yj=(function(){function n(){}return n.prototype.add=function(t,e){return(t+e)%this.modulus},n.prototype.subtract=function(t,e){return(this.modulus+t-e)%this.modulus},n.prototype.exp=function(t){return this.expTable[t]},n.prototype.log=function(t){if(t===0)throw new bt;return this.logTable[t]},n.prototype.inverse=function(t){if(t===0)throw new R8;return this.expTable[this.modulus-this.logTable[t]-1]},n.prototype.multiply=function(t,e){return t===0||e===0?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(t){return t===this},n})(),$j=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),Qj=(function(n){$j(t,n);function t(e,r){var i=n.call(this)||this;i.modulus=e,i.expTable=new Int32Array(e),i.logTable=new Int32Array(e);for(var a=1,o=0;o<e;o++)i.expTable[o]=a,a=a*r%e;for(var o=0;o<e-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new $o(i,new Int32Array([0])),i.one=new $o(i,new Int32Array([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,r){if(e<0)throw new bt;if(r===0)return this.zero;var i=new Int32Array(e+1);return i[0]=r,new $o(this,i)},t.PDF417_GF=new t(ee.NUMBER_OF_CODEWORDS,3),t})(Yj),Zj=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jj=(function(){function n(){this.field=Qj.PDF417_GF}return n.prototype.decode=function(t,e,r){for(var i,a,o=new $o(this.field,t),l=new Int32Array(e),c=!1,h=e;h>0;h--){var p=o.evaluateAt(this.field.exp(h));l[e-h]=p,p!==0&&(c=!0)}if(!c)return 0;var g=this.field.getOne();if(r!=null)try{for(var v=Zj(r),x=v.next();!x.done;x=v.next()){var A=x.value,S=this.field.exp(t.length-1-A),C=new $o(this.field,new Int32Array([this.field.subtract(0,S),1]));g=g.multiply(C)}}catch(I){i={error:I}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}for(var O=new $o(this.field,l),D=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),O,e),P=D[0],k=D[1],j=this.findErrorLocations(P),K=this.findErrorMagnitudes(k,P,j),h=0;h<j.length;h++){var R=t.length-1-this.field.log(j[h]);if(R<0)throw Rn.getChecksumInstance();t[R]=this.field.subtract(t[R],K[h])}return j.length},n.prototype.runEuclideanAlgorithm=function(t,e,r){if(t.getDegree()<e.getDegree()){var i=t;t=e,e=i}for(var a=t,o=e,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(r/2);){var h=a,p=l;if(a=o,l=c,a.isZero())throw Rn.getChecksumInstance();o=h;for(var g=this.field.getZero(),v=a.getCoefficient(a.getDegree()),x=this.field.inverse(v);o.getDegree()>=a.getDegree()&&!o.isZero();){var A=o.getDegree()-a.getDegree(),S=this.field.multiply(o.getCoefficient(o.getDegree()),x);g=g.add(this.field.buildMonomial(A,S)),o=o.subtract(a.multiplyByMonomial(A,S))}c=g.multiply(l).subtract(p).negative()}var C=c.getCoefficient(0);if(C===0)throw Rn.getChecksumInstance();var O=this.field.inverse(C),D=c.multiply(O),P=o.multiply(O);return[D,P]},n.prototype.findErrorLocations=function(t){for(var e=t.getDegree(),r=new Int32Array(e),i=0,a=1;a<this.field.getSize()&&i<e;a++)t.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==e)throw Rn.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(t,e,r){for(var i=e.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,e.getCoefficient(o));for(var l=new $o(this.field,a),c=r.length,h=new Int32Array(c),o=0;o<c;o++){var p=this.field.inverse(r[o]),g=this.field.subtract(0,t.evaluateAt(p)),v=this.field.inverse(l.evaluateAt(p));h[o]=this.field.multiply(g,v)}return h},n})(),kv=(function(){function n(t,e,r,i,a){t instanceof n?this.constructor_2(t):this.constructor_1(t,e,r,i,a)}return n.prototype.constructor_1=function(t,e,r,i,a){var o=e==null||r==null,l=i==null||a==null;if(o&&l)throw new rt;o?(e=new Et(0,i.getY()),r=new Et(0,a.getY())):l&&(i=new Et(t.getWidth()-1,e.getY()),a=new Et(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(e.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},n.merge=function(t,e){return t==null?e:e==null?t:new n(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)},n.prototype.addMissingRows=function(t,e,r){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(t>0){var c=r?this.topLeft:this.topRight,h=Math.trunc(c.getY()-t);h<0&&(h=0);var p=new Et(c.getX(),h);r?i=p:o=p}if(e>0){var g=r?this.bottomLeft:this.bottomRight,v=Math.trunc(g.getY()+e);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);var x=new Et(g.getX(),v);r?a=x:l=x}return new n(this.image,i,a,o,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),tH=(function(){function n(t,e,r,i){this.columnCount=t,this.errorCorrectionLevel=i,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),k2=(function(){function n(){this.buffer=""}return n.form=function(t,e){var r=-1;function i(o,l,c,h,p,g){if(o==="%%")return"%";if(e[++r]!==void 0){o=h?parseInt(h.substr(1)):void 0;var v=p?parseInt(p.substr(1)):void 0,x;switch(g){case"s":x=e[r];break;case"c":x=e[r][0];break;case"f":x=parseFloat(e[r]).toFixed(o);break;case"p":x=parseFloat(e[r]).toPrecision(o);break;case"e":x=parseFloat(e[r]).toExponential(o);break;case"x":x=parseInt(e[r]).toString(v||16);break;case"d":x=parseFloat(parseInt(e[r],v||10).toPrecision(o)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(v);for(var A=parseInt(c),S=c&&c[0]+""=="0"?"0":" ";x.length<A;)x=l!==void 0?x+S:S+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,i)},n.prototype.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.buffer+=n.form(t,e)},n.prototype.toString=function(){return this.buffer},n})(),eH=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},k8=(function(){function n(t){this.boundingBox=new kv(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return n.prototype.getCodewordNearby=function(t){var e=this.getCodeword(t);if(e!=null)return e;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(e=this.codewords[i],e!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(e=this.codewords[i],e!=null)))return e}return null},n.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},n.prototype.setCodeword=function(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e},n.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var t,e,r=new k2,i=0;try{for(var a=eH(this.codewords),o=a.next();!o.done;o=a.next()){var l=o.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(c){t={error:c}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),nH=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rH=function(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(o)throw o.error}}return a},Ff=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(t){t=Math.trunc(t);var e=this.values.get(t);e==null&&(e=0),e++,this.values.set(t,e)},n.prototype.getValue=function(){var t,e,r=-1,i=new Array,a=function(g,v){var x={getKey:function(){return g},getValue:function(){return v}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var o=nH(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=rH(l.value,2),h=c[0],p=c[1];a(h,p)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return ee.toIntArray(i)},n.prototype.getConfidence=function(t){return this.values.get(t)},n})(),iH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),vy=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},eC=(function(n){iH(t,n);function t(e,r){var i=n.call(this,e)||this;return i._isLeft=r,i}return t.prototype.setRowNumbers=function(){var e,r;try{for(var i=vy(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=-1,p=1,g=0,v=l;v<c;v++)if(r[v]!=null){var x=r[v],A=x.getRowNumber()-h;if(A===0)g++;else if(A===1)p=Math.max(p,g),g=1,h=x.getRowNumber();else if(A<0||x.getRowNumber()>=e.getRowCount()||A>v)r[v]=null;else{var S=void 0;p>2?S=(p-2)*A:S=A;for(var C=S>=v,O=1;O<=S&&!C;O++)C=r[v-O]!=null;C?r[v]=null:(h=x.getRowNumber(),g=1)}}},t.prototype.getRowHeights=function(){var e,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=vy(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var h=c.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){e={error:p}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return a},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),c=this.getCodewords(),h=-1,p=o;p<l;p++)if(c[p]!=null){var g=c[p];g.setRowNumberAsRowIndicatorColumn();var v=g.getRowNumber()-h;v===0||(v===1?h=g.getRowNumber():g.getRowNumber()>=e.getRowCount()?c[p]=null:h=g.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,r,i=this.getCodewords(),a=new Ff,o=new Ff,l=new Ff,c=new Ff;try{for(var h=vy(i),p=h.next();!p.done;p=h.next()){var g=p.value;if(g!=null){g.setRowNumberAsRowIndicatorColumn();var v=g.getValue()%30,x=g.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(v*3+1);break;case 1:c.setValue(v/3),l.setValue(v%3);break;case 2:a.setValue(v+1);break}}}}catch(S){e={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(a.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<ee.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>ee.MAX_ROWS_IN_BARCODE)return null;var A=new tH(a.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},t.prototype.removeIncorrectCodewords=function(e,r){for(var i=0;i<e.length;i++){var a=e[i];if(e[i]!=null){var o=a.getValue()%30,l=a.getRowNumber();if(l>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(o/3)!==r.getErrorCorrectionLevel()||o%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:o+1!==r.getColumnCount()&&(e[i]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},t})(k8),aH=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sH=(function(){function n(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=ee.MAX_CODEWORDS_IN_BARCODE,e;do e=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<e);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var e=1;e<this.barcodeColumnCount+1;e++)for(var r=this.detectionResultColumns[e].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(e,i,r));return t},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null&&e[r]!=null&&t[r].getRowNumber()===e[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(t[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,e=this.detectionResultColumns[0].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null)for(var i=e[r].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||t++)}return t},n.adjustRowNumberIfValid=function(t,e,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e},n.prototype.adjustRowNumbers=function(t,e,r){var i,a;if(this.detectionResultColumns[t-1]!=null){var o=r[e],l=this.detectionResultColumns[t-1].getCodewords(),c=l;this.detectionResultColumns[t+1]!=null&&(c=this.detectionResultColumns[t+1].getCodewords());var h=new Array(14);h[2]=l[e],h[3]=c[e],e>0&&(h[0]=r[e-1],h[4]=l[e-1],h[5]=c[e-1]),e>1&&(h[8]=r[e-2],h[10]=l[e-2],h[11]=c[e-2]),e<r.length-1&&(h[1]=r[e+1],h[6]=l[e+1],h[7]=c[e+1]),e<r.length-2&&(h[9]=r[e+2],h[12]=l[e+2],h[13]=c[e+2]);try{for(var p=aH(h),g=p.next();!g.done;g=p.next()){var v=g.value;if(n.adjustRowNumber(o,v))return}}catch(x){i={error:x}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(t,e){return e==null?!1:e.hasValidRowNumber()&&e.getBucket()===t.getBucket()?(t.setRowNumber(e.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(t){this.boundingBox=t},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(t,e){this.detectionResultColumns[t]=e},n.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},n.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var e=new k2,r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){e.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){e.format("    |   ");continue}e.format(" %3d|%3d",a.getRowNumber(),a.getValue())}e.format("%n")}return e.toString()},n})(),oH=(function(){function n(t,e,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(t){return t!==n.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(t){this.rowNumber=t},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),uH=(function(){function n(){}return n.initialize=function(){for(var t=0;t<ee.SYMBOL_TABLE.length;t++)for(var e=ee.SYMBOL_TABLE[t],r=e&1,i=0;i<ee.BARS_IN_MODULE;i++){for(var a=0;(e&1)===r;)a+=1,e>>=1;r=e&1,n.RATIOS_TABLE[t]||(n.RATIOS_TABLE[t]=new Array(ee.BARS_IN_MODULE)),n.RATIOS_TABLE[t][ee.BARS_IN_MODULE-i-1]=Math.fround(a/ee.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(t){var e=n.getDecodedCodewordValue(n.sampleBitCounts(t));return e!==-1?e:n.getClosestDecodedValue(t)},n.sampleBitCounts=function(t){for(var e=ie.sum(t),r=new Int32Array(ee.BARS_IN_MODULE),i=0,a=0,o=0;o<ee.MODULES_IN_CODEWORD;o++){var l=e/(2*ee.MODULES_IN_CODEWORD)+o*e/ee.MODULES_IN_CODEWORD;a+t[i]<=l&&(a+=t[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(t){var e=n.getBitValue(t);return ee.getCodeword(e)===-1?-1:e},n.getBitValue=function(t){for(var e=0,r=0;r<t.length;r++)for(var i=0;i<t[r];i++)e=e<<1|(r%2===0?1:0);return Math.trunc(e)},n.getClosestDecodedValue=function(t){var e=ie.sum(t),r=new Array(ee.BARS_IN_MODULE);if(e>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/e);var a=Ov.MAX_VALUE,o=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var c=0,h=n.RATIOS_TABLE[l],p=0;p<ee.BARS_IN_MODULE;p++){var g=Math.fround(h[p]-r[p]);if(c+=Math.fround(g*g),c>=a)break}c<a&&(a=c,o=ee.SYMBOL_TABLE[l])}return o},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(ee.SYMBOL_TABLE.length).map(function(t){return new Array(ee.BARS_IN_MODULE)}),n})(),lH=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(t){this.segmentIndex=t},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(t){this.fileId=t},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(t){this.optionalData=t},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(t){this.lastSegment=t},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(t){this.segmentCount=t},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(t){this.sender=t},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(t){this.addressee=t},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(t){this.fileName=t},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(t){this.fileSize=t},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(t){this.checksum=t},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(t){this.timestamp=t},n})(),nC=(function(){function n(){}return n.parseLong=function(t,e){return e===void 0&&(e=void 0),parseInt(t,e)},n})(),cH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),fH=(function(n){cH(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="NullPointerException",t})(Er),hH=(function(){function n(){}return n.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},n.prototype.writeBytesOffset=function(t,e,r){if(t==null)throw new fH;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new N2;if(r===0)return;for(var i=0;i<r;i++)this.write(t[e+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),dH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),pH=(function(n){dH(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t})(Er),gH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),mH=(function(n){gH(t,n);function t(e){e===void 0&&(e=32);var r=n.call(this)||this;if(r.count=0,e<0)throw new bt("Negative initial size: "+e);return r.buf=new Uint8Array(e),r}return t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var r=this.buf.length,i=r<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new pH;i=Ht.MAX_VALUE}this.buf=_n.copyOfUint8Array(this.buf,i)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new N2;this.ensureCapacity(this.count+i),Ie.arraycopy(e,r,this.buf,this.count,i),this.count+=i},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return _n.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t})(hH),Te;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Te||(Te={}));function B8(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var V0;function bs(n){if(typeof V0>"u"&&(V0=B8()),V0===null)throw new Error("BigInt is not supported!");return V0(n)}function yH(){var n=[];n[0]=bs(1);var t=bs(900);n[1]=t;for(var e=2;e<16;e++)n[e]=n[e-1]*t;return n}var vH=(function(){function n(){}return n.decode=function(t,e){var r=new zt(""),i=vn.ISO8859_1;r.enableDecoding(i);for(var a=1,o=t[a++],l=new lH;a<t[0];){switch(o){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(t,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(o,t,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(t,a,r);break;case n.ECI_CHARSET:vn.getCharacterSetECIByValue(t[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(t,a,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new dt;default:a--,a=n.textCompaction(t,a,r);break}if(a<t.length)o=t[a++];else throw dt.getFormatInstance()}if(r.length()===0)throw dt.getFormatInstance();var c=new Dp(null,r.toString(),null,e);return c.setOther(l),c},n.decodeMacroBlock=function(t,e,r){if(e+n.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw dt.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,e++)i[a]=t[e];r.setSegmentIndex(Ht.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new zt;e=n.textCompaction(t,e,o),r.setFileId(o.toString());var l=-1;for(t[e]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=e+1);e<t[0];)switch(t[e]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e++,t[e]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new zt;e=n.textCompaction(t,e+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new zt;e=n.textCompaction(t,e+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new zt;e=n.textCompaction(t,e+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var g=new zt;e=n.numericCompaction(t,e+1,g),r.setSegmentCount(Ht.parseInt(g.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var v=new zt;e=n.numericCompaction(t,e+1,v),r.setTimestamp(nC.parseLong(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new zt;e=n.numericCompaction(t,e+1,x),r.setChecksum(Ht.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new zt;e=n.numericCompaction(t,e+1,A),r.setFileSize(nC.parseLong(A.toString()));break;default:throw dt.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw dt.getFormatInstance()}if(l!==-1){var S=e-l;r.isLastSegment()&&S--,r.setOptionalData(_n.copyOfRange(t,l,l+S))}return e},n.textCompaction=function(t,e,r){for(var i=new Int32Array((t[0]-e)*2),a=new Int32Array((t[0]-e)*2),o=0,l=!1;e<t[0]&&!l;){var c=t[e++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[o]=c/30,i[o+1]=c%30,o+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[o++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=t[e++],a[o]=c,o++;break}}return n.decodeTextCompaction(i,a,o,r),e},n.decodeTextCompaction=function(t,e,r,i){for(var a=Te.ALPHA,o=Te.ALPHA,l=0;l<r;){var c=t[l],h="";switch(a){case Te.ALPHA:if(c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case n.LL:a=Te.LOWER;break;case n.ML:a=Te.MIXED;break;case n.PS:o=a,a=Te.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Te.ALPHA;break}break;case Te.LOWER:if(c<26)h=String.fromCharCode(97+c);else switch(c){case 26:h=" ";break;case n.AS:o=a,a=Te.ALPHA_SHIFT;break;case n.ML:a=Te.MIXED;break;case n.PS:o=a,a=Te.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Te.ALPHA;break}break;case Te.MIXED:if(c<n.PL)h=n.MIXED_CHARS[c];else switch(c){case n.PL:a=Te.PUNCT;break;case 26:h=" ";break;case n.LL:a=Te.LOWER;break;case n.AL:a=Te.ALPHA;break;case n.PS:o=a,a=Te.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Te.ALPHA;break}break;case Te.PUNCT:if(c<n.PAL)h=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Te.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Te.ALPHA;break}break;case Te.ALPHA_SHIFT:if(a=o,c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=Te.ALPHA;break}break;case Te.PUNCT_SHIFT:if(a=o,c<n.PAL)h=n.PUNCT_CHARS[c];else switch(c){case n.PAL:a=Te.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=Te.ALPHA;break}break}h!==""&&i.append(h),l++}},n.byteCompaction=function(t,e,r,i,a){var o=new mH,l=0,c=0,h=!1;switch(t){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),g=e[i++];i<e[0]&&!h;)switch(p[l++]=g,c=900*c+g,g=e[i++],g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(l%5===0&&l>0){for(var v=0;v<6;++v)o.write(Number(bs(c)>>bs(8*(5-v))));c=0,l=0}break}i===e[0]&&g<n.TEXT_COMPACTION_MODE_LATCH&&(p[l++]=g);for(var x=0;x<l;x++)o.write(p[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<e[0]&&!h;){var A=e[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(l%5===0&&l>0){for(var v=0;v<6;++v)o.write(Number(bs(c)>>bs(8*(5-v))));c=0,l=0}}break}return a.append(ei.decode(o.toByteArray(),r)),i},n.numericCompaction=function(t,e,r){for(var i=0,a=!1,o=new Int32Array(n.MAX_NUMERIC_CODEWORDS);e<t[0]&&!a;){var l=t[e++];if(e===t[0]&&(a=!0),l<n.TEXT_COMPACTION_MODE_LATCH)o[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:e--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(o,i)),i=0)}return e},n.decodeBase900toBase10=function(t,e){for(var r=bs(0),i=0;i<e;i++)r+=n.EXP900[e-i-1]*bs(t[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new dt;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=B8()?yH():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Cf=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_H=(function(){function n(){}return n.decode=function(t,e,r,i,a,o,l){for(var c=new kv(t,e,r,i,a),h=null,p=null,g,v=!0;;v=!1){if(e!=null&&(h=n.getRowIndicatorColumn(t,c,e,!0,o,l)),i!=null&&(p=n.getRowIndicatorColumn(t,c,i,!1,o,l)),g=n.merge(h,p),g==null)throw rt.getNotFoundInstance();var x=g.getBoundingBox();if(v&&x!=null&&(x.getMinY()<c.getMinY()||x.getMaxY()>c.getMaxY()))c=x;else break}g.setBoundingBox(c);var A=g.getBarcodeColumnCount()+1;g.setDetectionResultColumn(0,h),g.setDetectionResultColumn(A,p);for(var S=h!=null,C=1;C<=A;C++){var O=S?C:A-C;if(g.getDetectionResultColumn(O)===void 0){var D=void 0;O===0||O===A?D=new eC(c,O===0):D=new k8(c),g.setDetectionResultColumn(O,D);for(var P=-1,k=P,j=c.getMinY();j<=c.getMaxY();j++){if(P=n.getStartColumn(g,O,j,S),P<0||P>c.getMaxX()){if(k===-1)continue;P=k}var K=n.detectCodeword(t,c.getMinX(),c.getMaxX(),S,P,j,o,l);K!=null&&(D.setCodeword(j,K),k=P,o=Math.min(o,K.getWidth()),l=Math.max(l,K.getWidth()))}}}return n.createDecoderResult(g)},n.merge=function(t,e){if(t==null&&e==null)return null;var r=n.getBarcodeMetadata(t,e);if(r==null)return null;var i=kv.merge(n.adjustBoundingBox(t),n.adjustBoundingBox(e));return new sH(r,i)},n.adjustBoundingBox=function(t){var e,r;if(t==null)return null;var i=t.getRowHeights();if(i==null)return null;var a=n.getMax(i),o=0;try{for(var l=Cf(i),c=l.next();!c.done;c=l.next()){var h=c.value;if(o+=a-h,h>0)break}}catch(x){e={error:x}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}for(var p=t.getCodewords(),g=0;o>0&&p[g]==null;g++)o--;for(var v=0,g=i.length-1;g>=0&&(v+=a-i[g],!(i[g]>0));g--);for(var g=p.length-1;v>0&&p[g]==null;g--)v--;return t.getBoundingBox().addMissingRows(o,v,t.isLeft())},n.getMax=function(t){var e,r,i=-1;try{for(var a=Cf(t),o=a.next();!o.done;o=a.next()){var l=o.value;i=Math.max(i,l)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},n.getBarcodeMetadata=function(t,e){var r;if(t==null||(r=t.getBarcodeMetadata())==null)return e==null?null:e.getBarcodeMetadata();var i;return e==null||(i=e.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(t,e,r,i,a,o){for(var l=new eC(e,i),c=0;c<2;c++)for(var h=c===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),g=Math.trunc(Math.trunc(r.getY()));g<=e.getMaxY()&&g>=e.getMinY();g+=h){var v=n.detectCodeword(t,0,t.getWidth(),i,p,g,a,o);v!=null&&(l.setCodeword(g,v),i?p=v.getStartX():p=v.getEndX())}return l},n.adjustCodewordCount=function(t,e){var r=e[0][1],i=r.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-n.getNumberOfECCodeWords(t.getBarcodeECLevel());if(i.length===0){if(a<1||a>ee.MAX_CODEWORDS_IN_BARCODE)throw rt.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(t){var e=n.createBarcodeMatrix(t);n.adjustCodewordCount(t,e);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],o=new Array,l=0;l<t.getBarcodeRowCount();l++)for(var c=0;c<t.getBarcodeColumnCount();c++){var h=e[l][c+1].getValue(),p=l*t.getBarcodeColumnCount()+c;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(o.push(p),a.push(h))}for(var g=new Array(a.length),v=0;v<g.length;v++)g[v]=a[v];return n.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,ee.toIntArray(r),ee.toIntArray(o),g)},n.createDecoderResultFromAmbiguousValues=function(t,e,r,i,a){for(var o=new Int32Array(i.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)e[i[c]]=a[c][o[c]];try{return n.decodeCodewords(e,t,r)}catch(p){var h=p instanceof Rn;if(!h)throw p}if(o.length===0)throw Rn.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<a[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw Rn.getChecksumInstance()}throw Rn.getChecksumInstance()},n.createBarcodeMatrix=function(t){for(var e,r,i,a,o=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new Ff;var h=0;try{for(var p=Cf(t.getDetectionResultColumns()),g=p.next();!g.done;g=p.next()){var v=g.value;if(v!=null)try{for(var x=(i=void 0,Cf(v.getCodewords())),A=x.next();!A.done;A=x.next()){var S=A.value;if(S!=null){var C=S.getRowNumber();if(C>=0){if(C>=o.length)continue;o[C][h].setValue(S.getValue())}}}}catch(O){i={error:O}}finally{try{A&&!A.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}h++}}catch(O){e={error:O}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}return o},n.isValidBarcodeColumn=function(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1},n.getStartColumn=function(t,e,r,i){var a,o,l=i?1:-1,c=null;if(n.isValidBarcodeColumn(t,e-l)&&(c=t.getDetectionResultColumn(e-l).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=t.getDetectionResultColumn(e).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(t,e-l)&&(c=t.getDetectionResultColumn(e-l).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var h=0;n.isValidBarcodeColumn(t,e-l);){e-=l;try{for(var p=(a=void 0,Cf(t.getDetectionResultColumn(e).getCodewords())),g=p.next();!g.done;g=p.next()){var v=g.value;if(v!=null)return(i?v.getEndX():v.getStartX())+l*h*(v.getEndX()-v.getStartX())}}catch(x){a={error:x}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},n.detectCodeword=function(t,e,r,i,a,o,l,c){a=n.adjustCodewordStartColumn(t,e,r,i,a,o);var h=n.getModuleBitCount(t,e,r,i,a,o);if(h==null)return null;var p,g=ie.sum(h);if(i)p=a+g;else{for(var v=0;v<h.length/2;v++){var x=h[v];h[v]=h[h.length-1-v],h[h.length-1-v]=x}p=a,a=p-g}if(!n.checkCodewordSkew(g,l,c))return null;var A=uH.getDecodedValue(h),S=ee.getCodeword(A);return S===-1?null:new oH(a,p,n.getCodewordBucketNumber(A),S)},n.getModuleBitCount=function(t,e,r,i,a,o){for(var l=a,c=new Int32Array(8),h=0,p=i?1:-1,g=i;(i?l<r:l>=e)&&h<c.length;)t.get(l,o)===g?(c[h]++,l+=p):(h++,g=!g);return h===c.length||l===(i?r:e)&&h===c.length-1?c:null},n.getNumberOfECCodeWords=function(t){return 2<<t},n.adjustCodewordStartColumn=function(t,e,r,i,a,o){for(var l=a,c=i?-1:1,h=0;h<2;h++){for(;(i?l>=e:l<r)&&i===t.get(l,o);){if(Math.abs(a-l)>n.CODEWORD_SKEW_SIZE)return a;l+=c}c=-c,i=!i}return l},n.checkCodewordSkew=function(t,e,r){return e-n.CODEWORD_SKEW_SIZE<=t&&t<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(t,e,r){if(t.length===0)throw dt.getFormatInstance();var i=1<<e+1,a=n.correctErrors(t,r,i);n.verifyCodewordCount(t,i);var o=vH.decode(t,""+e);return o.setErrorsCorrected(a),o.setErasures(r.length),o},n.correctErrors=function(t,e,r){if(e!=null&&e.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw Rn.getChecksumInstance();return n.errorCorrection.decode(t,r,e)},n.verifyCodewordCount=function(t,e){if(t.length<4)throw dt.getFormatInstance();var r=t[0];if(r>t.length)throw dt.getFormatInstance();if(r===0)if(e<t.length)t[0]=t.length-e;else throw dt.getFormatInstance()},n.getBitCountForCodeword=function(t){for(var e=new Int32Array(8),r=0,i=e.length-1;!((t&1)!==r&&(r=t&1,i--,i<0));)e[i]++,t>>=1;return e},n.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},n.getCodewordBucketNumber_number=function(t){return n.getCodewordBucketNumber(n.getBitCountForCodeword(t))},n.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},n.toString=function(t){for(var e=new k2,r=0;r<t.length;r++){e.format("Row %2d: ",r);for(var i=0;i<t[r].length;i++){var a=t[r][i];a.getValue().length===0?e.format("        ",null):e.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}e.format("%n")}return e.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new Jj,n})(),xH=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bv=(function(){function n(){}return n.prototype.decode=function(t,e){e===void 0&&(e=null);var r=n.decode(t,e,!1);if(r==null||r.length===0||r[0]==null)throw rt.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(t,e){e===void 0&&(e=null);try{return n.decode(t,e,!0)}catch(r){throw r instanceof dt||r instanceof Rn?rt.getNotFoundInstance():r}},n.decode=function(t,e,r){var i,a,o=new Array,l=Xj.detectMultiple(t,e,r);try{for(var c=xH(l.getPoints()),h=c.next();!h.done;h=c.next()){var p=h.value,g=_H.decode(l.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),v=new Jn(g.getText(),g.getRawBytes(),void 0,p,Ct.PDF_417);v.putMetadata(jn.ERROR_CORRECTION_LEVEL,g.getECLevel());var x=g.getOther();x!=null&&v.putMetadata(jn.PDF417_EXTRA_METADATA,x),o.push(v)}}catch(A){i={error:A}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return o.map(function(A){return A})},n.getMaxWidth=function(t,e){return t==null||e==null?0:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMinWidth=function(t,e){return t==null||e==null?Ht.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))},n.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(n.getMaxWidth(t[0],t[4]),n.getMaxWidth(t[6],t[2])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(t[1],t[5]),n.getMaxWidth(t[7],t[3])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(n.getMinWidth(t[0],t[4]),n.getMinWidth(t[6],t[2])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(t[1],t[5]),n.getMinWidth(t[7],t[3])*ee.MODULES_IN_CODEWORD/ee.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),EH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),rC=(function(n){EH(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="ReaderException",t})(Er),iC=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},AH=(function(){function n(){}return n.prototype.decode=function(t,e){return this.setHints(e),this.decodeInternal(t)},n.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},n.prototype.setHints=function(t){this.hints=t;var e=t!=null&&t.get(Ue.TRY_HARDER)!==void 0,r=t==null?null:t.get(Ue.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(o){return o===Ct.UPC_A||o===Ct.UPC_E||o===Ct.EAN_13||o===Ct.EAN_8||o===Ct.CODABAR||o===Ct.CODE_39||o===Ct.CODE_93||o===Ct.CODE_128||o===Ct.ITF||o===Ct.RSS_14||o===Ct.RSS_EXPANDED});a&&!e&&i.push(new Bf(t)),r.includes(Ct.QR_CODE)&&i.push(new Lv),r.includes(Ct.DATA_MATRIX)&&i.push(new Vv),r.includes(Ct.AZTEC)&&i.push(new Pv),r.includes(Ct.PDF_417)&&i.push(new Bv),a&&e&&i.push(new Bf(t))}i.length===0&&(e||i.push(new Bf(t)),i.push(new Lv),i.push(new Vv),i.push(new Pv),i.push(new Bv),e&&i.push(new Bf(t))),this.readers=i},n.prototype.reset=function(){var t,e;if(this.readers!==null)try{for(var r=iC(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},n.prototype.decodeInternal=function(t){var e,r;if(this.readers===null)throw new rC("No readers where selected, nothing can be read.");try{for(var i=iC(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(t,this.hints)}catch(l){if(l instanceof rC)continue}}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}throw new rt("No MultiFormat Readers were able to detect the code.")},n})(),wH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),TH=(function(n){wH(t,n);function t(e,r){e===void 0&&(e=null),r===void 0&&(r=500);var i=this,a=new AH;return a.setHints(e),i=n.call(this,a,r)||this,i}return t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t})(hc),SH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){SH(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Bv,e)||this}return t})(hc);var IH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){IH(t,n);function t(e){return e===void 0&&(e=500),n.call(this,new Lv,e)||this}return t})(hc);var Fv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Fv||(Fv={}));const L0=Fv;var F8=(function(){function n(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new js(t,Int32Array.from([1])))}return n.prototype.buildGenerator=function(t){var e=this.cachedGenerators;if(t>=e.length)for(var r=e[e.length-1],i=this.field,a=e.length;a<=t;a++){var o=r.multiply(new js(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));e.push(o),r=o}return e[t]},n.prototype.encode=function(t,e){if(e===0)throw new bt("No error correction bytes");var r=t.length-e;if(r<=0)throw new bt("No data bytes provided");var i=this.buildGenerator(e),a=new Int32Array(r);Ie.arraycopy(t,0,a,0,r);var o=new js(this.field,a);o=o.multiplyByMonomial(e,1);for(var l=o.divide(i)[1],c=l.getCoefficients(),h=e-c.length,p=0;p<h;p++)t[r+p]=0;Ie.arraycopy(c,0,t,r+h,c.length)},n})(),Uf=(function(){function n(){}return n.applyMaskPenaltyRule1=function(t){return n.applyMaskPenaltyRule1Internal(t,!0)+n.applyMaskPenaltyRule1Internal(t,!1)},n.applyMaskPenaltyRule2=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),o=0;o<a-1;o++)for(var l=r[o],c=0;c<i-1;c++){var h=l[c];h===l[c+1]&&h===r[o+1][c]&&h===r[o+1][c+1]&&e++}return n.N2*e},n.applyMaskPenaltyRule3=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),o=0;o<a;o++)for(var l=0;l<i;l++){var c=r[o];l+6<i&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(n.isWhiteHorizontal(c,l-4,l)||n.isWhiteHorizontal(c,l+7,l+11))&&e++,o+6<a&&r[o][l]===1&&r[o+1][l]===0&&r[o+2][l]===1&&r[o+3][l]===1&&r[o+4][l]===1&&r[o+5][l]===0&&r[o+6][l]===1&&(n.isWhiteVertical(r,l,o-4,o)||n.isWhiteVertical(r,l,o+7,o+11))&&e++}return e*n.N3},n.isWhiteHorizontal=function(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(var i=e;i<r;i++)if(t[i]===1)return!1;return!0},n.isWhiteVertical=function(t,e,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(var a=r;a<i;a++)if(t[a][e]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(t){for(var e=0,r=t.getArray(),i=t.getWidth(),a=t.getHeight(),o=0;o<a;o++)for(var l=r[o],c=0;c<i;c++)l[c]===1&&e++;var h=t.getHeight()*t.getWidth(),p=Math.floor(Math.abs(e*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(t,e,r){var i,a;switch(t){case 0:i=r+e&1;break;case 1:i=r&1;break;case 2:i=e%3;break;case 3:i=(r+e)%3;break;case 4:i=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:a=r*e,i=(a&1)+a%3;break;case 6:a=r*e,i=(a&1)+a%3&1;break;case 7:a=r*e,i=a%3+(r+e&1)&1;break;default:throw new bt("Invalid mask pattern: "+t)}return i===0},n.applyMaskPenaltyRule1Internal=function(t,e){for(var r=0,i=e?t.getHeight():t.getWidth(),a=e?t.getWidth():t.getHeight(),o=t.getArray(),l=0;l<i;l++){for(var c=0,h=-1,p=0;p<a;p++){var g=e?o[l][p]:o[p][l];g===h?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,h=g)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),CH=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bH=(function(){function n(t,e){this.width=t,this.height=e;for(var r=new Array(e),i=0;i!==e;i++)r[i]=new Uint8Array(t);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(t,e){return this.bytes[e][t]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(t,e,r){this.bytes[e][t]=r},n.prototype.setBoolean=function(t,e,r){this.bytes[e][t]=r?1:0},n.prototype.clear=function(t){var e,r;try{for(var i=CH(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;_n.fill(o,t)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n.prototype.equals=function(t){if(!(t instanceof n))return!1;var e=t;if(this.width!==e.width||this.height!==e.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],o=e.bytes[r],l=0,c=this.width;l<c;++l)if(a[l]!==o[l])return!1;return!0},n.prototype.toString=function(){for(var t=new zt,e=0,r=this.height;e<r;++e){for(var i=this.bytes[e],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},n})(),Uv=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var t=new zt;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},n.prototype.setMode=function(t){this.mode=t},n.prototype.setECLevel=function(t){this.ecLevel=t},n.prototype.setVersion=function(t){this.version=t},n.prototype.setMaskPattern=function(t){this.maskPattern=t},n.prototype.setMatrix=function(t){this.matrix=t},n.isValidMaskPattern=function(t){return t>=0&&t<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),RH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),De=(function(n){RH(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.kind="WriterException",t})(Er),aC=(function(){function n(){}return n.clearMatrix=function(t){t.clear(255)},n.buildMatrix=function(t,e,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(e,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(t,i,a)},n.embedBasicPatterns=function(t,e){n.embedPositionDetectionPatternsAndSeparators(e),n.embedDarkDotAtLeftBottomCorner(e),n.maybeEmbedPositionAdjustmentPatterns(t,e),n.embedTimingPatterns(e)},n.embedTypeInfo=function(t,e,r){var i=new Dn;n.makeTypeInfoBits(t,e,i);for(var a=0,o=i.getSize();a<o;++a){var l=i.get(i.getSize()-1-a),c=n.TYPE_INFO_COORDINATES[a],h=c[0],p=c[1];if(r.setBoolean(h,p,l),a<8){var g=r.getWidth()-a-1,v=8;r.setBoolean(g,v,l)}else{var g=8,v=r.getHeight()-7+(a-8);r.setBoolean(g,v,l)}}},n.maybeEmbedVersionInfo=function(t,e){if(!(t.getVersionNumber()<7)){var r=new Dn;n.makeVersionInfoBits(t,r);for(var i=17,a=0;a<6;++a)for(var o=0;o<3;++o){var l=r.get(i);i--,e.setBoolean(a,e.getHeight()-11+o,l),e.setBoolean(e.getHeight()-11+o,a,l)}}},n.embedDataBits=function(t,e,r){for(var i=0,a=-1,o=r.getWidth()-1,l=r.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<r.getHeight();){for(var c=0;c<2;++c){var h=o-c;if(n.isEmpty(r.get(h,l))){var p=void 0;i<t.getSize()?(p=t.get(i),++i):p=!1,e!==255&&Uf.getDataMaskBit(e,h,l)&&(p=!p),r.setBoolean(h,l,p)}}l+=a}a=-a,l+=a,o-=2}if(i!==t.getSize())throw new De("Not all bits consumed: "+i+"/"+t.getSize())},n.findMSBSet=function(t){return 32-Ht.numberOfLeadingZeros(t)},n.calculateBCHCode=function(t,e){if(e===0)throw new bt("0 polynomial");var r=n.findMSBSet(e);for(t<<=r-1;n.findMSBSet(t)>=r;)t^=e<<n.findMSBSet(t)-r;return t},n.makeTypeInfoBits=function(t,e,r){if(!Uv.isValidMaskPattern(e))throw new De("Invalid mask pattern");var i=t.getBits()<<3|e;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var o=new Dn;if(o.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new De("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(t,e){e.appendBits(t.getVersionNumber(),6);var r=n.calculateBCHCode(t.getVersionNumber(),n.VERSION_INFO_POLY);if(e.appendBits(r,12),e.getSize()!==18)throw new De("should not happen but we got: "+e.getSize())},n.isEmpty=function(t){return t===255},n.embedTimingPatterns=function(t){for(var e=8;e<t.getWidth()-8;++e){var r=(e+1)%2;n.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),n.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}},n.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new De;t.setNumber(8,t.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(t,e,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(t+i,e)))throw new De;r.setNumber(t+i,e,0)}},n.embedVerticalSeparationPattern=function(t,e,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(t,e+i)))throw new De;r.setNumber(t,e+i,0)}},n.embedPositionAdjustmentPattern=function(t,e,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)r.setNumber(t+o,e+i,a[o])},n.embedPositionDetectionPattern=function(t,e,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)r.setNumber(t+o,e+i,a[o])},n.embedPositionDetectionPatternsAndSeparators=function(t){var e=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,t),n.embedPositionDetectionPattern(t.getWidth()-e,0,t),n.embedPositionDetectionPattern(0,t.getWidth()-e,t);var r=8;n.embedHorizontalSeparationPattern(0,r-1,t),n.embedHorizontalSeparationPattern(t.getWidth()-r,r-1,t),n.embedHorizontalSeparationPattern(0,t.getWidth()-r,t);var i=7;n.embedVerticalSeparationPattern(i,0,t),n.embedVerticalSeparationPattern(t.getHeight()-i-1,0,t),n.embedVerticalSeparationPattern(i,t.getHeight()-i,t)},n.maybeEmbedPositionAdjustmentPatterns=function(t,e){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,o=i.length;a!==o;a++){var l=i[a];if(l>=0)for(var c=0;c!==o;c++){var h=i[c];h>=0&&n.isEmpty(e.get(h,l))&&n.embedPositionAdjustmentPattern(h-2,l-2,e)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),DH=(function(){function n(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),sC=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(t){return Uf.applyMaskPenaltyRule1(t)+Uf.applyMaskPenaltyRule2(t)+Uf.applyMaskPenaltyRule3(t)+Uf.applyMaskPenaltyRule4(t)},n.encode=function(t,e,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(L0.CHARACTER_SET)!==void 0;a&&(i=r.get(L0.CHARACTER_SET).toString());var o=this.chooseMode(t,i),l=new Dn;if(o===Oe.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=vn.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var h=new Dn;this.appendBytes(t,o,h,i);var p;if(r!==null&&r.get(L0.QR_VERSION)!==void 0){var g=Number.parseInt(r.get(L0.QR_VERSION).toString(),10);p=iu.getVersionForNumber(g);var v=this.calculateBitsNeeded(o,l,h,p);if(!this.willFit(v,p,e))throw new De("Data too big for requested version")}else p=this.recommendVersion(e,o,l,h);var x=new Dn;x.appendBitArray(l);var A=o===Oe.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(A,p,o,x),x.appendBitArray(h);var S=p.getECBlocksForLevel(e),C=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(C,x);var O=this.interleaveWithECBytes(x,p.getTotalCodewords(),C,S.getNumBlocks()),D=new Uv;D.setECLevel(e),D.setMode(o),D.setVersion(p);var P=p.getDimensionForVersion(),k=new bH(P,P),j=this.chooseMaskPattern(O,e,p,k);return D.setMaskPattern(j),aC.buildMatrix(O,e,p,j,k),D.setMatrix(k),D},n.recommendVersion=function(t,e,r,i){var a=this.calculateBitsNeeded(e,r,i,iu.getVersionForNumber(1)),o=this.chooseVersion(a,t),l=this.calculateBitsNeeded(e,r,i,o);return this.chooseVersion(l,t)},n.calculateBitsNeeded=function(t,e,r,i){return e.getSize()+t.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(t){return t<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[t]:-1},n.chooseMode=function(t,e){if(e===void 0&&(e=null),vn.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return Oe.KANJI;for(var r=!1,i=!1,a=0,o=t.length;a<o;++a){var l=t.charAt(a);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return Oe.BYTE}return i?Oe.ALPHANUMERIC:r?Oe.NUMERIC:Oe.BYTE},n.isOnlyDoubleByteKanji=function(t){var e;try{e=ei.encode(t,vn.SJIS)}catch{return!1}var r=e.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=e[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(t,e,r,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<Uv.NUM_MASK_PATTERNS;l++){aC.buildMatrix(t,e,r,l,i);var c=this.calculateMaskPenalty(i);c<a&&(a=c,o=l)}return o},n.chooseVersion=function(t,e){for(var r=1;r<=40;r++){var i=iu.getVersionForNumber(r);if(n.willFit(t,i,e))return i}throw new De("Data too big")},n.willFit=function(t,e,r){var i=e.getTotalCodewords(),a=e.getECBlocksForLevel(r),o=a.getTotalECCodewords(),l=i-o,c=(t+7)/8;return l>=c},n.terminateBits=function(t,e){var r=t*8;if(e.getSize()>r)throw new De("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(var i=0;i<4&&e.getSize()<r;++i)e.appendBit(!1);var a=e.getSize()&7;if(a>0)for(var i=a;i<8;i++)e.appendBit(!1);for(var o=t-e.getSizeInBytes(),i=0;i<o;++i)e.appendBits((i&1)===0?236:17,8);if(e.getSize()!==r)throw new De("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(t,e,r,i,a,o){if(i>=r)throw new De("Block ID too large");var l=t%r,c=r-l,h=Math.floor(t/r),p=h+1,g=Math.floor(e/r),v=g+1,x=h-g,A=p-v;if(x!==A)throw new De("EC bytes mismatch");if(r!==c+l)throw new De("RS blocks mismatch");if(t!==(g+x)*c+(v+A)*l)throw new De("Total bytes mismatch");i<c?(a[0]=g,o[0]=x):(a[0]=v,o[0]=A)},n.interleaveWithECBytes=function(t,e,r,i){var a,o,l,c;if(t.getSizeInBytes()!==r)throw new De("Number of bits and data bytes does not match");for(var h=0,p=0,g=0,v=new Array,x=0;x<i;++x){var A=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(e,r,i,x,A,S);var C=A[0],O=new Uint8Array(C);t.toBytes(8*h,O,0,C);var D=n.generateECBytes(O,S[0]);v.push(new DH(O,D)),p=Math.max(p,C),g=Math.max(g,D.length),h+=A[0]}if(r!==h)throw new De("Data bytes does not match offset");for(var P=new Dn,x=0;x<p;++x)try{for(var k=(a=void 0,sC(v)),j=k.next();!j.done;j=k.next()){var K=j.value,O=K.getDataBytes();x<O.length&&P.appendBits(O[x],8)}}catch(B){a={error:B}}finally{try{j&&!j.done&&(o=k.return)&&o.call(k)}finally{if(a)throw a.error}}for(var x=0;x<g;++x)try{for(var R=(l=void 0,sC(v)),I=R.next();!I.done;I=R.next()){var K=I.value,D=K.getErrorCorrectionBytes();x<D.length&&P.appendBits(D[x],8)}}catch(B){l={error:B}}finally{try{I&&!I.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}if(e!==P.getSizeInBytes())throw new De("Interleaving error: "+e+" and "+P.getSizeInBytes()+" differ.");return P},n.generateECBytes=function(t,e){for(var r=t.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=t[a]&255;new F8(yr.QR_CODE_FIELD_256).encode(i,e);for(var o=new Uint8Array(e),a=0;a<e;a++)o[a]=i[r+a];return o},n.appendModeInfo=function(t,e){e.appendBits(t.getBits(),4)},n.appendLengthInfo=function(t,e,r,i){var a=r.getCharacterCountBits(e);if(t>=1<<a)throw new De(t+" is bigger than "+((1<<a)-1));i.appendBits(t,a)},n.appendBytes=function(t,e,r,i){switch(e){case Oe.NUMERIC:n.appendNumericBytes(t,r);break;case Oe.ALPHANUMERIC:n.appendAlphanumericBytes(t,r);break;case Oe.BYTE:n.append8BitBytes(t,r,i);break;case Oe.KANJI:n.appendKanjiBytes(t,r);break;default:throw new De("Invalid mode: "+e)}},n.getDigit=function(t){return t.charCodeAt(0)-48},n.isDigit=function(t){var e=n.getDigit(t);return e>=0&&e<=9},n.appendNumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getDigit(t.charAt(i));if(i+2<r){var o=n.getDigit(t.charAt(i+1)),l=n.getDigit(t.charAt(i+2));e.appendBits(a*100+o*10+l,10),i+=3}else if(i+1<r){var o=n.getDigit(t.charAt(i+1));e.appendBits(a*10+o,7),i+=2}else e.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(t,e){for(var r=t.length,i=0;i<r;){var a=n.getAlphanumericCode(t.charCodeAt(i));if(a===-1)throw new De;if(i+1<r){var o=n.getAlphanumericCode(t.charCodeAt(i+1));if(o===-1)throw new De;e.appendBits(a*45+o,11),i+=2}else e.appendBits(a,6),i++}},n.append8BitBytes=function(t,e,r){var i;try{i=ei.encode(t,r)}catch(c){throw new De(c)}for(var a=0,o=i.length;a!==o;a++){var l=i[a];e.appendBits(l,8)}},n.appendKanjiBytes=function(t,e){var r;try{r=ei.encode(t,vn.SJIS)}catch(g){throw new De(g)}for(var i=r.length,a=0;a<i;a+=2){var o=r[a]&255,l=r[a+1]&255,c=o<<8&4294967295|l,h=-1;if(c>=33088&&c<=40956?h=c-33088:c>=57408&&c<=60351&&(h=c-49472),h===-1)throw new De("Invalid byte sequence");var p=(h>>8)*192+(h&255);e.appendBits(p,13)}},n.appendECI=function(t,e){e.appendBits(Oe.ECI.getBits(),4),e.appendBits(t.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=vn.UTF8.getName(),n})();var OH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){OH(t,n);function t(e,r,i,a,o,l,c,h){var p=n.call(this,l,c)||this;if(p.yuvData=e,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=o,a+l>r||o+c>i)throw new bt("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(l,c),p}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new bt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return Ie.arraycopy(this.yuvData,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=e*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ie.arraycopy(this.yuvData,o,a,0,i),a;for(var l=0;l<r;l++){var c=l*e;Ie.arraycopy(this.yuvData,o,a,c,e),o+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,a,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),a=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var c=l*e,h=0;h<e;h++){var p=a[o+h*t.THUMBNAIL_SCALE_FACTOR]&255;i[c+h]=4278190080|p*65793}o+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return i},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,r){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<r;a++,o+=this.dataWidth)for(var l=o+e/2,c=o,h=o+e-1;c<l;c++,h--){var p=i[c];i[c]=i[h],i[h]=p}},t.prototype.invert=function(){return new P2(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(Rp);var NH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();(function(n){NH(t,n);function t(e,r,i,a,o,l,c){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=o,h.left=l,h.top=c,e.BYTES_PER_ELEMENT===4){for(var p=r*i,g=new Uint8ClampedArray(p),v=0;v<p;v++){var x=e[v],A=x>>16&255,S=x>>7&510,C=x&255;g[v]=(A+S+C)/4&255}h.luminances=g}else h.luminances=e;if(a===void 0&&(h.dataWidth=r),o===void 0&&(h.dataHeight=i),l===void 0&&(h.left=0),c===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new bt("Crop rectangle does not fit within image data.");return h}return t.prototype.getRow=function(e,r){if(e<0||e>=this.getHeight())throw new bt("Requested row is outside the image: "+e);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(e+this.top)*this.dataWidth+this.left;return Ie.arraycopy(this.luminances,a,r,0,i),r},t.prototype.getMatrix=function(){var e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=e*r,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Ie.arraycopy(this.luminances,o,a,0,i),a;for(var l=0;l<r;l++){var c=l*e;Ie.arraycopy(this.luminances,o,a,c,e),o+=this.dataWidth}return a},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,r,i,a){return new t(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)},t.prototype.invert=function(){return new P2(this)},t})(Rp);var PH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),MH=(function(n){PH(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.forName=function(e){return this.getCharacterSetECIByName(e)},t})(vn),VH=(function(){function n(){}return n.ISO_8859_1=vn.ISO8859_1,n})(),zv,LH=301,kH=function(n,t){for(var e=1,r=0;r<255;r++)t[r]=e,n[e]=r,e*=2,e>=256&&(e^=LH);return{LOG:n,ALOG:t}};zv=kH([],[]),zv.LOG;zv.ALOG;var oC;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(oC||(oC={}));var uC=129,U8=230,BH=231,FH=235,UH=236,zH=237,jH=238,HH=239,GH=240,_y=254,qH=254,lC="[)>05",cC="[)>06",fC="",me=0,Fn=1,ar=2,gn=3,Cn=4,qn=5,KH=(function(){function n(){}return n.prototype.getEncodingMode=function(){return me},n.prototype.encode=function(t){var e=xi.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(e>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var r=t.getCurrentChar(),i=xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case qn:t.writeCodeword(BH),t.signalEncoderChange(qn);return;case Fn:t.writeCodeword(U8),t.signalEncoderChange(Fn);return;case gn:t.writeCodeword(jH),t.signalEncoderChange(gn);break;case ar:t.writeCodeword(HH),t.signalEncoderChange(ar);break;case Cn:t.writeCodeword(GH),t.signalEncoderChange(Cn);break;default:throw new Error("Illegal mode: "+i)}else xi.isExtendedASCII(r)?(t.writeCodeword(FH),t.writeCodeword(r-128+1),t.pos++):(t.writeCodeword(r+1),t.pos++)}},n.prototype.encodeASCIIDigits=function(t,e){if(xi.isDigit(t)&&xi.isDigit(e)){var r=(t-48)*10+(e-48);return r+130}throw new Error("not digits: "+t+e)},n})(),XH=(function(){function n(){}return n.prototype.getEncodingMode=function(){return qn},n.prototype.encode=function(t){var e=new zt;for(e.append(0);t.hasMoreCharacters();){var r=t.getCurrentChar();e.append(r),t.pos++;var i=xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){t.signalEncoderChange(me);break}}var a=e.length()-1,o=1,l=t.getCodewordCount()+a+o;t.updateSymbolInfo(l);var c=t.getSymbolInfo().getDataCapacity()-l>0;if(t.hasMoreCharacters()||c)if(a<=249)e.setCharAt(0,te.getCharAt(a));else if(a<=1555)e.setCharAt(0,te.getCharAt(Math.floor(a/250)+249)),e.insert(1,te.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=e.length();h<r;h++)t.writeCodeword(this.randomize255State(e.charAt(h).charCodeAt(0),t.getCodewordCount()+1))},n.prototype.randomize255State=function(t,e){var r=149*e%255+1,i=t+r;return i<=255?i:i-256},n})(),B2=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Fn},n.prototype.encodeMaximal=function(t){for(var e=new zt,r=0,i=t.pos,a=0;t.hasMoreCharacters();){var o=t.getCurrentChar();t.pos++,r=this.encodeChar(o,e),e.length()%3===0&&(i=t.pos,a=e.length())}if(a!==e.length()){var l=Math.floor(e.length()/3*2),c=Math.floor(t.getCodewordCount()+l+1);t.updateSymbolInfo(c);var h=t.getSymbolInfo().getDataCapacity()-c,p=Math.floor(e.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(t.pos=i)}e.length()>0&&t.writeCodeword(U8),this.handleEOD(t,e)},n.prototype.encode=function(t){for(var e=new zt;t.hasMoreCharacters();){var r=t.getCurrentChar();t.pos++;var i=this.encodeChar(r,e),a=Math.floor(e.length()/3)*2,o=t.getCodewordCount()+a;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o;if(!t.hasMoreCharacters()){var c=new zt;for(e.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(t,e,c,i));e.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(t,e,c,i);break}var h=e.length();if(h%3===0){var p=xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){t.signalEncoderChange(me);break}}}this.handleEOD(t,e)},n.prototype.backtrackOneCharacter=function(t,e,r,i){var a=e.length(),o=e.toString().substring(0,a-i);e.setLengthToZero(),e.append(o),t.pos--;var l=t.getCurrentChar();return i=this.encodeChar(l,r),t.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(t,e){t.writeCodewords(this.encodeToCodewords(e.toString()));var r=e.toString().substring(3);e.setLengthToZero(),e.append(r)},n.prototype.handleEOD=function(t,e){var r=Math.floor(e.length()/3*2),i=e.length()%3,a=t.getCodewordCount()+r;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(i===2){for(e.append("\0");e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(_y)}else if(o===1&&i===1){for(;e.length()>=3;)this.writeNextTriplet(t,e);t.hasMoreCharacters()&&t.writeCodeword(_y),t.pos--}else if(i===0){for(;e.length()>=3;)this.writeNextTriplet(t,e);(o>0||t.hasMoreCharacters())&&t.writeCodeword(_y)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(me)},n.prototype.encodeChar=function(t,e){if(t===32)return e.append(3),1;if(t>=48&&t<=57)return e.append(t-48+4),1;if(t>=65&&t<=90)return e.append(t-65+14),1;if(t<32)return e.append(0),e.append(t),2;if(t<=47)return e.append(1),e.append(t-33),2;if(t<=64)return e.append(1),e.append(t-58+15),2;if(t<=95)return e.append(1),e.append(t-91+22),2;if(t<=127)return e.append(2),e.append(t-96),2;e.append("1");var r=2;return r+=this.encodeChar(t-128,e),r},n.prototype.encodeToCodewords=function(t){var e=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,r=e/256,i=e%256,a=new zt;return a.append(r),a.append(i),a.toString()},n})(),WH=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Cn},n.prototype.encode=function(t){for(var e=new zt;t.hasMoreCharacters();){var r=t.getCurrentChar();this.encodeChar(r,e),t.pos++;var i=e.length();if(i>=4){t.writeCodewords(this.encodeToCodewords(e.toString()));var a=e.toString().substring(4);e.setLengthToZero(),e.append(a);var o=xi.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(me);break}}}e.append(te.getCharAt(31)),this.handleEOD(t,e)},n.prototype.handleEOD=function(t,e){try{var r=e.length();if(r===0)return;if(r===1){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=t.getRemainingCharacters();if(a>i&&(t.updateSymbolInfo(t.getCodewordCount()+1),i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var o=r-1,l=this.encodeToCodewords(e.toString()),c=!t.hasMoreCharacters(),h=c&&o<=2;if(o<=2){t.updateSymbolInfo(t.getCodewordCount()+o);var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();i>=3&&(h=!1,t.updateSymbolInfo(t.getCodewordCount()+l.length))}h?(t.resetSymbolInfo(),t.pos-=o):t.writeCodewords(l)}finally{t.signalEncoderChange(me)}},n.prototype.encodeChar=function(t,e){t>=32&&t<=63?e.append(t):t>=64&&t<=94?e.append(te.getCharAt(t-64)):xi.illegalCharacter(te.getCharAt(t))},n.prototype.encodeToCodewords=function(t){var e=t.length;if(e===0)throw new Error("StringBuilder must not be empty");var r=t.charAt(0).charCodeAt(0),i=e>=2?t.charAt(1).charCodeAt(0):0,a=e>=3?t.charAt(2).charCodeAt(0):0,o=e>=4?t.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(a<<6)+o,c=l>>16&255,h=l>>8&255,p=l&255,g=new zt;return g.append(c),e>=2&&g.append(h),e>=3&&g.append(p),g.toString()},n})(),YH=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),$H=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},le=(function(){function n(t,e,r,i,a,o,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=t,this.dataCapacity=e,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=l,this.rsBlockError=c}return n.lookup=function(t,e,r,i,a){var o,l;e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var c=$H(ZH),h=c.next();!h.done;h=c.next()){var p=h.value;if(!(e===1&&p.rectangular)&&!(e===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&t<=p.dataCapacity)return p}}catch(g){o={error:g}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},n})(),QH=(function(n){YH(t,n);function t(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(e){return e<=8?156:155},t})(le),ZH=[new le(!1,3,5,8,8,1),new le(!1,5,7,10,10,1),new le(!0,5,7,16,6,1),new le(!1,8,10,12,12,1),new le(!0,10,11,14,6,2),new le(!1,12,12,14,14,1),new le(!0,16,14,24,10,1),new le(!1,18,14,16,16,1),new le(!1,22,18,18,18,1),new le(!0,22,18,16,10,2),new le(!1,30,20,20,20,1),new le(!0,32,24,16,14,2),new le(!1,36,24,22,22,1),new le(!1,44,28,24,24,1),new le(!0,49,28,22,14,2),new le(!1,62,36,14,14,4),new le(!1,86,42,16,16,4),new le(!1,114,48,18,18,4),new le(!1,144,56,20,20,4),new le(!1,174,68,22,22,4),new le(!1,204,84,24,24,4,102,42),new le(!1,280,112,14,14,16,140,56),new le(!1,368,144,16,16,16,92,36),new le(!1,456,192,18,18,16,114,48),new le(!1,576,224,20,20,16,144,56),new le(!1,696,272,22,22,16,174,68),new le(!1,816,336,24,24,16,136,56),new le(!1,1050,408,18,18,36,175,68),new le(!1,1304,496,20,20,36,163,62),new QH],JH=(function(){function n(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var e=t.split("").map(function(l){return l.charCodeAt(0)}),r=new zt,i=0,a=e.length;i<a;i++){var o=String.fromCharCode(e[i]&255);if(o==="?"&&t.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(o)}this.msg=r.toString(),this.shape=0,this.codewords=new zt,this.newEncoding=-1}return n.prototype.setSymbolShape=function(t){this.shape=t},n.prototype.setSizeConstraints=function(t,e){this.minSize=t,this.maxSize=e},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(t){this.codewords.append(t)},n.prototype.writeCodeword=function(t){this.codewords.append(t)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(t){this.newEncoding=t},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=le.lookup(t,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),tG=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),eG=(function(n){tG(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return gn},t.prototype.encode=function(e){for(var r=new zt;e.hasMoreCharacters();){var i=e.getCurrentChar();e.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(e,r);var o=xi.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(me);break}}}this.handleEOD(e,r)},t.prototype.encodeChar=function(e,r){switch(e){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:e>=48&&e<=57?r.append(e-48+4):e>=65&&e<=90?r.append(e-65+14):xi.illegalCharacter(te.getCharAt(e));break}return 1},t.prototype.handleEOD=function(e,r){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=r.length();e.pos-=a,(e.getRemainingCharacters()>1||i>1||e.getRemainingCharacters()!==i)&&e.writeCodeword(qH),e.getNewEncoding()<0&&e.signalEncoderChange(me)},t})(B2),nG=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),rG=(function(n){nG(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return ar},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=97&&e<=122)return r.append(e-97+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e>=91&&e<=95)return r.append(1),r.append(e-91+22),2;if(e===96)return r.append(2),r.append(0),2;if(e<=90)return r.append(2),r.append(e-65+1),2;if(e<=127)return r.append(2),r.append(e-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(e-128,r),i},t})(B2),xi=(function(){function n(){}return n.randomize253State=function(t){var e=149*t%253+1,r=uC+e;return r<=254?r:r-254},n.encodeHighLevel=function(t,e,r,i,a){e===void 0&&(e=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new B2,l=[new KH,o,new rG,new eG,new WH,new XH],c=new JH(t);c.setSymbolShape(e),c.setSizeConstraints(r,i),t.startsWith(lC)&&t.endsWith(fC)?(c.writeCodeword(UH),c.setSkipAtEnd(2),c.pos+=lC.length):t.startsWith(cC)&&t.endsWith(fC)&&(c.writeCodeword(zH),c.setSkipAtEnd(2),c.pos+=cC.length);var h=me;for(a&&(o.encodeMaximal(c),h=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[h].encode(c),c.getNewEncoding()>=0&&(h=c.getNewEncoding(),c.resetEncoderSignal());var p=c.getCodewordCount();c.updateSymbolInfo();var g=c.getSymbolInfo().getDataCapacity();p<g&&h!==me&&h!==qn&&h!==Cn&&c.writeCodeword("");var v=c.getCodewords();for(v.length()<g&&v.append(uC);v.length()<g;)v.append(this.randomize253State(v.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(t,e,r){var i=this.lookAheadTestIntern(t,e,r);if(r===gn&&i===gn){for(var a=Math.min(e+3,t.length),o=e;o<a;o++)if(!this.isNativeX12(t.charCodeAt(o)))return me}else if(r===Cn&&i===Cn){for(var a=Math.min(e+4,t.length),o=e;o<a;o++)if(!this.isNativeEDIFACT(t.charCodeAt(o)))return me}return i},n.lookAheadTestIntern=function(t,e,r){if(e>=t.length)return r;var i;r===me?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,o=new Uint8Array(6),l=[];;){if(e+a===t.length){_n.fill(o,0),_n.fill(l,0);var c=this.findMinimums(i,l,Ht.MAX_VALUE,o),h=this.getMinimumCount(o);if(l[me]===c)return me;if(h===1){if(o[qn]>0)return qn;if(o[Cn]>0)return Cn;if(o[ar]>0)return ar;if(o[gn]>0)return gn}return Fn}var p=t.charCodeAt(e+a);if(a++,this.isDigit(p)?i[me]+=.5:this.isExtendedASCII(p)?(i[me]=Math.ceil(i[me]),i[me]+=2):(i[me]=Math.ceil(i[me]),i[me]++),this.isNativeC40(p)?i[Fn]+=2/3:this.isExtendedASCII(p)?i[Fn]+=8/3:i[Fn]+=4/3,this.isNativeText(p)?i[ar]+=2/3:this.isExtendedASCII(p)?i[ar]+=8/3:i[ar]+=4/3,this.isNativeX12(p)?i[gn]+=2/3:this.isExtendedASCII(p)?i[gn]+=13/3:i[gn]+=10/3,this.isNativeEDIFACT(p)?i[Cn]+=3/4:this.isExtendedASCII(p)?i[Cn]+=17/4:i[Cn]+=13/4,this.isSpecialB256(p)?i[qn]+=4:i[qn]++,a>=4){if(_n.fill(o,0),_n.fill(l,0),this.findMinimums(i,l,Ht.MAX_VALUE,o),l[me]<this.min(l[qn],l[Fn],l[ar],l[gn],l[Cn]))return me;if(l[qn]<l[me]||l[qn]+1<this.min(l[Fn],l[ar],l[gn],l[Cn]))return qn;if(l[Cn]+1<this.min(l[qn],l[Fn],l[ar],l[gn],l[me]))return Cn;if(l[ar]+1<this.min(l[qn],l[Fn],l[Cn],l[gn],l[me]))return ar;if(l[gn]+1<this.min(l[qn],l[Fn],l[Cn],l[ar],l[me]))return gn;if(l[Fn]+1<this.min(l[me],l[qn],l[Cn],l[ar])){if(l[Fn]<l[gn])return Fn;if(l[Fn]===l[gn]){for(var g=e+a+1;g<t.length;){var v=t.charCodeAt(g);if(this.isX12TermSep(v))return gn;if(!this.isNativeX12(v))break;g++}return Fn}}}}},n.min=function(t,e,r,i,a){var o=Math.min(t,Math.min(e,Math.min(r,i)));return a===void 0?o:Math.min(o,a)},n.findMinimums=function(t,e,r,i){for(var a=0;a<6;a++){var o=e[a]=Math.ceil(t[a]);r>o&&(r=o,_n.fill(i,0)),r===o&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(t){for(var e=0,r=0;r<6;r++)e+=t[r];return e||0},n.isDigit=function(t){return t>=48&&t<=57},n.isExtendedASCII=function(t){return t>=128&&t<=255},n.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},n.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},n.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},n.isX12TermSep=function(t){return t===13||t===42||t===62},n.isNativeEDIFACT=function(t){return t>=32&&t<=94},n.isSpecialB256=function(t){return!1},n.determineConsecutiveDigitCount=function(t,e){e===void 0&&(e=0);for(var r=t.length,i=e;i<r&&this.isDigit(t.charCodeAt(i));)i++;return i-e},n.illegalCharacter=function(t){var e=Ht.toHexString(t.charCodeAt(0));throw e="0000".substring(0,4-e.length)+e,new Error("Illegal character: "+t+" (0x"+e+")")},n})(),xy=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hC=(function(){function n(t){this.charset=t,this.name=t.name}return n.prototype.canEncode=function(t){try{return ei.encode(t,this.charset)!=null}catch{return!1}},n})(),iG=(function(){function n(t,e,r){var i,a,o,l,c,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(M){return new hC(MH.forName(M))}),this.encoders=[];var p=[];p.push(new hC(VH.ISO_8859_1));for(var g=e!=null&&e.name.startsWith("UTF"),v=0;v<t.length;v++){var x=!1;try{for(var A=(i=void 0,xy(p)),S=A.next();!S.done;S=A.next()){var C=S.value,O=t.charAt(v),D=O.charCodeAt(0);if(D===r||C.canEncode(O)){x=!0;break}}}catch(M){i={error:M}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}if(!x)try{for(var P=(o=void 0,xy(this.ENCODERS)),k=P.next();!k.done;k=P.next()){var C=k.value;if(C.canEncode(t.charAt(v))){p.push(C),x=!0;break}}}catch(M){o={error:M}}finally{try{k&&!k.done&&(l=P.return)&&l.call(P)}finally{if(o)throw o.error}}x||(g=!0)}if(p.length===1&&!g)this.encoders=[p[0]];else{this.encoders=[];var j=0;try{for(var K=xy(p),R=K.next();!R.done;R=K.next()){var C=R.value;this.encoders[j++]=C}}catch(M){c={error:M}}finally{try{R&&!R.done&&(h=K.return)&&h.call(K)}finally{if(c)throw c.error}}}var I=-1;if(e!=null){for(var v=0;v<this.encoders.length;v++)if(this.encoders[v]!=null&&e.name===this.encoders[v].name){I=v;break}}this.priorityEncoderIndex=I}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},n.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},n.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(t,e){if(!(e<this.length()))throw new Error("index must be less than length");return ei.encode(te.getCharAt(t),this.encoders[e].name)},n})(),aG=3,sG=(function(){function n(t,e,r){this.fnc1=r;var i=new iG(t,e,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=t.charAt(a).charCodeAt(0);this.bytes[a]=o===r?1e3:o}else this.bytes=this.encodeMinimally(t,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(t,e){if(t+e-1>=this.bytes.length)return!1;for(var r=0;r<e;r++)if(this.isECI(t+r))return!1;return!0},n.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},n.prototype.subSequence=function(t,e){if(t<0||t>e||e>this.length())throw new Error(""+t);for(var r=new zt,i=t;i<e;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},n.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},n.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},n.prototype.addEdge=function(t,e,r){(t[e][r.encoderIndex]==null||t[e][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(t[e][r.encoderIndex]=r)},n.prototype.addEdges=function(t,e,r,i,a,o){var l=t.charAt(i).charCodeAt(0),c=0,h=e.length();e.getPriorityEncoderIndex()>=0&&(l===o||e.canEncode(l,e.getPriorityEncoderIndex()))&&(c=e.getPriorityEncoderIndex(),h=c+1);for(var p=c;p<h;p++)(l===o||e.canEncode(l,p))&&this.addEdge(r,i+1,new dC(l,e,p,a,o))},n.prototype.encodeMinimally=function(t,e,r){var i=t.length,a=new dC[i+1][e.length()];this.addEdges(t,e,a,0,null,r);for(var o=1;o<=i;o++){for(var l=0;l<e.length();l++)a[o][l]!=null&&o<i&&this.addEdges(t,e,a,o,a[o][l],r);for(var l=0;l<e.length();l++)a[o-1][l]=null}for(var c=-1,h=Ht.MAX_VALUE,l=0;l<e.length();l++)if(a[i][l]!=null){var p=a[i][l];p.cachedTotalSize<h&&(h=p.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+t+'"');for(var g=[],v=a[i][c];v!=null;){if(v.isFNC1())g.unshift(1e3);else for(var x=e.encode(v.c,v.encoderIndex),o=x.length-1;o>=0;o--)g.unshift(x[o]&255);var A=v.previous===null?0:v.previous.encoderIndex;A!==v.encoderIndex&&g.unshift(256+e.getECIValue(v.encoderIndex)),v=v.previous}for(var S=[],o=0;o<S.length;o++)S[o]=g[o];return S},n})(),dC=(function(){function n(t,e,r,i,a){this.c=t,this.encoderSet=e,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=t===a?1e3:t;var o=this.isFNC1()?1:e.encode(t,r).length,l=i===null?0:i.encoderIndex;l!==r&&(o+=aG),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),oG=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})();var pC;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(pC||(pC={}));(function(n){oG(t,n);function t(e,r,i,a,o){var l=n.call(this,e,r,i)||this;return l.shape=a,l.macroId=o,l}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(sG);var uG=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(t){this.compact=t},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(t){this.size=t},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(t){this.layers=t},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(t){this.codeWords=t},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(t){this.matrix=t},n})(),gC=(function(){function n(){}return n.singletonList=function(t){return[t]},n.min=function(t,e){return t.sort(e)[0]},n})(),lG=(function(){function n(t){this.previous=t}return n.prototype.getPrevious=function(){return this.previous},n})(),cG=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),F2=(function(n){cG(t,n);function t(e,r,i){var a=n.call(this,e)||this;return a.value=r,a.bitCount=i,a}return t.prototype.appendTo=function(e,r){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,r){return new t(this,e,r)},t.prototype.addBinaryShift=function(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,r)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+Ht.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t})(lG),fG=(function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}})(),hG=(function(n){fG(t,n);function t(e,r,i){var a=n.call(this,e,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return t.prototype.appendTo=function(e,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)},t.prototype.addBinaryShift=function(e,r){return new t(this,e,r)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t})(F2);function dG(n,t,e){return new hG(n,t,e)}function bf(n,t,e){return new F2(n,t,e)}var pG=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Hs=0,q1=1,Jr=2,z8=3,Yi=4,gG=new F2(null,0,0),Ey=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],mG=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function yG(n){var t,e;try{for(var r=mG(n),i=r.next();!i.done;i=r.next()){var a=i.value;_n.fill(a,-1)}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n[Hs][Yi]=0,n[q1][Yi]=0,n[q1][Hs]=28,n[z8][Yi]=0,n[Jr][Yi]=0,n[Jr][Hs]=15,n}var j8=yG(_n.createInt32Array(6,6)),vG=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_G=(function(){function n(t,e,r,i){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(t,e){var r=this.bitCount,i=this.token;if(t!==this.mode){var a=Ey[this.mode][t];i=bf(i,a&65535,a>>16),r+=a>>16}var o=t===Jr?4:5;return i=bf(i,e,o),new n(i,t,0,r+o)},n.prototype.shiftAndAppend=function(t,e){var r=this.token,i=this.mode===Jr?4:5;return r=bf(r,j8[this.mode][t],i),r=bf(r,e,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(t){var e=this.token,r=this.mode,i=this.bitCount;if(this.mode===Yi||this.mode===Jr){var a=Ey[r][Hs];e=bf(e,a&65535,a>>16),i+=a>>16,r=Hs}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(e,r,this.binaryShiftByteCount+1,i+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(t+1)),l},n.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var e=this.token;return e=dG(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(e,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(t){var e=this.bitCount+(Ey[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=n.calculateBinaryShiftCost(t)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount},n.prototype.toBitArray=function(t){for(var e,r,i=[],a=this.endBinaryShift(t.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new Dn;try{for(var l=vG(i),c=l.next();!c.done;c=l.next()){var h=c.value;h.appendTo(o,t)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return o},n.prototype.toString=function(){return te.format("%s bits=%d bytes=%d",pG[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(gG,Hs,0,0),n})();function xG(n){var t=te.getCharCode(" "),e=te.getCharCode("."),r=te.getCharCode(",");n[Hs][t]=1;for(var i=te.getCharCode("Z"),a=te.getCharCode("A"),o=a;o<=i;o++)n[Hs][o]=o-a+2;n[q1][t]=1;for(var l=te.getCharCode("z"),c=te.getCharCode("a"),o=c;o<=l;o++)n[q1][o]=o-c+2;n[Jr][t]=1;for(var h=te.getCharCode("9"),p=te.getCharCode("0"),o=p;o<=h;o++)n[Jr][o]=o-p+2;n[Jr][r]=12,n[Jr][e]=13;for(var g=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],v=0;v<g.length;v++)n[z8][te.getCharCode(g[v])]=v;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],v=0;v<x.length;v++)te.getCharCode(x[v])>0&&(n[Yi][te.getCharCode(x[v])]=v);return n}var Ay=xG(_n.createInt32Array(5,256)),k0=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},EG=(function(){function n(t){this.text=t}return n.prototype.encode=function(){for(var t=te.getCharCode(" "),e=te.getCharCode(`
`),r=gC.singletonList(_G.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case te.getCharCode("\r"):a=o===e?2:0;break;case te.getCharCode("."):a=o===t?3:0;break;case te.getCharCode(","):a=o===t?4:0;break;case te.getCharCode(":"):a=o===t?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var l=gC.min(r,function(c,h){return c.getBitCount()-h.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(t,e){var r,i,a=[];try{for(var o=k0(t),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,e,a)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(t,e,r){for(var i=this.text[e]&255,a=Ay[t.getMode()][i]>0,o=null,l=0;l<=Yi;l++){var c=Ay[l][i];if(c>0){if(o==null&&(o=t.endBinaryShift(e)),!a||l===t.getMode()||l===Jr){var h=o.latchAndAppend(l,c);r.push(h)}if(!a&&j8[t.getMode()][l]>=0){var p=o.shiftAndAppend(l,c);r.push(p)}}}if(t.getBinaryShiftByteCount()>0||Ay[t.getMode()][i]===0){var g=t.addBinaryShiftChar(e);r.push(g)}},n.updateStateListForPair=function(t,e,r){var i,a,o=[];try{for(var l=k0(t),c=l.next();!c.done;c=l.next()){var h=c.value;this.updateStateForPair(h,e,r,o)}}catch(p){i={error:p}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(o)},n.updateStateForPair=function(t,e,r,i){var a=t.endBinaryShift(e);if(i.push(a.latchAndAppend(Yi,r)),t.getMode()!==Yi&&i.push(a.shiftAndAppend(Yi,r)),r===3||r===4){var o=a.latchAndAppend(Jr,16-r).latchAndAppend(Jr,1);i.push(o)}if(t.getBinaryShiftByteCount()>0){var l=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);i.push(l)}},n.simplifyStates=function(t){var e,r,i,a,o=[];try{for(var l=k0(t),c=l.next();!c.done;c=l.next()){var h=c.value,p=!0,g=function(C){if(C.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(C)&&(o=o.filter(function(O){return O!==C}))};try{for(var v=(i=void 0,k0(o)),x=v.next();!x.done;x=v.next()){var A=x.value,S=g(A);if(S==="break")break}}catch(C){i={error:C}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}p&&o.push(h)}}catch(C){e={error:C}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return o},n})(),AG=function(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(t){return n.encode(t,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(t,e,r){var i=new EG(t).encode(),a=Ht.truncDivision(i.getSize()*e,100)+11,o=i.getSize()+a,l,c,h,p,g;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,c=Math.abs(r),c>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new bt(te.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(c,l),p=n.WORD_SIZE[c];var v=h-h%p;if(g=n.stuffBits(i,p),g.getSize()+a>v)throw new bt("Data to large for user specified layer");if(l&&g.getSize()>p*64)throw new bt("Data to large for user specified layer")}else{p=0,g=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new bt("Data too large for an Aztec code");if(l=x<=3,c=l?x+1:x,h=n.totalBitsInLayer(c,l),!(o>h)){(g==null||p!==n.WORD_SIZE[c])&&(p=n.WORD_SIZE[c],g=n.stuffBits(i,p));var v=h-h%p;if(!(l&&g.getSize()>p*64)&&g.getSize()+a<=v)break}}}var A=n.generateCheckWords(g,h,p),S=g.getSize()/p,C=n.generateModeMessage(l,c,S),O=(l?11:14)+c*4,D=new Int32Array(O),P;if(l){P=O;for(var x=0;x<D.length;x++)D[x]=x}else{P=O+1+2*Ht.truncDivision(Ht.truncDivision(O,2)-1,15);for(var k=Ht.truncDivision(O,2),j=Ht.truncDivision(P,2),x=0;x<k;x++){var K=x+Ht.truncDivision(x,15);D[k-x-1]=j-K-1,D[k+x]=j+K+1}}for(var R=new ia(P),x=0,I=0;x<c;x++){for(var M=(c-x)*4+(l?9:12),B=0;B<M;B++)for(var U=B*2,H=0;H<2;H++)A.get(I+U+H)&&R.set(D[x*2+H],D[x*2+B]),A.get(I+M*2+U+H)&&R.set(D[x*2+B],D[O-1-x*2-H]),A.get(I+M*4+U+H)&&R.set(D[O-1-x*2-H],D[O-1-x*2-B]),A.get(I+M*6+U+H)&&R.set(D[O-1-x*2-B],D[x*2+H]);I+=M*8}if(n.drawModeMessage(R,l,P,C),l)n.drawBullsEye(R,Ht.truncDivision(P,2),5);else{n.drawBullsEye(R,Ht.truncDivision(P,2),7);for(var x=0,B=0;x<Ht.truncDivision(O,2)-1;x+=15,B+=16)for(var H=Ht.truncDivision(P,2)&1;H<P;H+=2)R.set(Ht.truncDivision(P,2)-B,H),R.set(Ht.truncDivision(P,2)+B,H),R.set(H,Ht.truncDivision(P,2)-B),R.set(H,Ht.truncDivision(P,2)+B)}var F=new uG;return F.setCompact(l),F.setSize(P),F.setLayers(c),F.setCodeWords(S),F.setMatrix(R),F},n.drawBullsEye=function(t,e,r){for(var i=0;i<r;i+=2)for(var a=e-i;a<=e+i;a++)t.set(a,e-i),t.set(a,e+i),t.set(e-i,a),t.set(e+i,a);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)},n.generateModeMessage=function(t,e,r){var i=new Dn;return t?(i.appendBits(e-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(e-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(t,e,r,i){var a=Ht.truncDivision(r,2);if(e)for(var o=0;o<7;o++){var l=a-3+o;i.get(o)&&t.set(l,a-5),i.get(o+7)&&t.set(a+5,l),i.get(20-o)&&t.set(l,a+5),i.get(27-o)&&t.set(a-5,l)}else for(var o=0;o<10;o++){var l=a-5+o+Ht.truncDivision(o,5);i.get(o)&&t.set(l,a-7),i.get(o+10)&&t.set(a+7,l),i.get(29-o)&&t.set(l,a+7),i.get(39-o)&&t.set(a-7,l)}},n.generateCheckWords=function(t,e,r){var i,a,o=t.getSize()/r,l=new F8(n.getGF(r)),c=Ht.truncDivision(e,r),h=n.bitsToWords(t,r,c);l.encode(h,c-o);var p=e%r,g=new Dn;g.appendBits(0,p);try{for(var v=AG(Array.from(h)),x=v.next();!x.done;x=v.next()){var A=x.value;g.appendBits(A,r)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}return g},n.bitsToWords=function(t,e,r){var i=new Int32Array(r),a,o;for(a=0,o=t.getSize()/e;a<o;a++){for(var l=0,c=0;c<e;c++)l|=t.get(a*e+c)?1<<e-c-1:0;i[a]=l}return i},n.getGF=function(t){switch(t){case 4:return yr.AZTEC_PARAM;case 6:return yr.AZTEC_DATA_6;case 8:return yr.AZTEC_DATA_8;case 10:return yr.AZTEC_DATA_10;case 12:return yr.AZTEC_DATA_12;default:throw new bt("Unsupported word size "+t)}},n.stuffBits=function(t,e){for(var r=new Dn,i=t.getSize(),a=(1<<e)-2,o=0;o<i;o+=e){for(var l=0,c=0;c<e;c++)(o+c>=i||t.get(o+c))&&(l|=1<<e-1-c);(l&a)===a?(r.appendBits(l&a,e),o--):(l&a)===0?(r.appendBits(l|1,e),o--):r.appendBits(l,e)}return r},n.totalBitsInLayer=function(t,e){return((e?88:112)+16*t)*t},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var wG={audio:!1,video:{facingMode:"environment"}},TG=300,SG=function(n){var t=n===void 0?{}:n,e=t.timeBetweenDecodingAttempts,r=e===void 0?TG:e,i=t.hints;return st.useMemo(function(){var a=new TH(i);return a.timeBetweenDecodingAttempts=r,a},[i,r])},mC=function(n,t,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function l(p){try{h(r.next(p))}catch(g){o(g)}}function c(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(l,c)}h((r=r.apply(n,t||[])).next())})},yC=function(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){e.label=h[1];break}if(h[0]===6&&e.label<a[1]){e.label=a[1],a=h;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(h);break}a[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},IG=function(n){var t=n.resetStream,e=st.useState(!1),r=e[0],i=e[1],a=st.useState(null),o=a[0],l=a[1],c=st.useRef(null),h=st.useRef(t),p=st.useCallback(function(x){c.current=x,l(typeof x.getCapabilities=="function"?x.getCapabilities().torch!==void 0:!1)},[]),g=st.useCallback(function(){return mC(void 0,void 0,void 0,function(){return yC(this,function(x){switch(x.label){case 0:return!c.current||!o?[2]:[4,c.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return x.sent(),i(!0),[2]}})})},[o]),v=st.useCallback(function(){return mC(void 0,void 0,void 0,function(){return yC(this,function(x){switch(x.label){case 0:return!c.current||!o?[2]:(c.current=null,l(null),i(!1),[4,h.current()]);case 1:return x.sent(),[2]}})})},[o]);return st.useEffect(function(){h.current=t},[t]),{init:p,isOn:r,isAvailable:o,on:g,off:v}},CG=function(n,t){return JSON.stringify(n)===JSON.stringify(t)},vC=function(n,t,e,r){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function l(p){try{h(r.next(p))}catch(g){o(g)}}function c(p){try{h(r.throw(p))}catch(g){o(g)}}function h(p){p.done?a(p.value):i(p.value).then(l,c)}h((r=r.apply(n,t||[])).next())})},_C=function(n,t){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(p){return c([h,p])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return e.label++,{value:h[1],done:!1};case 5:e.label++,i=h[1],h=[0];continue;case 7:h=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){e=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){e.label=h[1];break}if(h[0]===6&&e.label<a[1]){e.label=a[1],a=h;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(h);break}a[2]&&e.ops.pop(),e.trys.pop();continue}h=t.call(n,e)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},bG=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e},RG=function(n){n===void 0&&(n={});var t=n.paused,e=t===void 0?!1:t,r=n.hints,i=n.timeBetweenDecodingAttempts,a=n.onDecodeResult,o=a===void 0?function(){}:a,l=n.onDecodeError,c=l===void 0?function(){}:l,h=n.onError,p=h===void 0?function(){}:h,g="deviceId"in n?n.deviceId:void 0,v=st.useState("constraints"in n?n.constraints:void 0),x=v[0],A=v[1],S=st.useRef(o),C=st.useRef(c),O=st.useRef(p),D=st.useRef(null),P=SG({hints:r,timeBetweenDecodingAttempts:i}),k=IG({resetStream:function(){return vC(void 0,void 0,void 0,function(){return _C(this,function(B){switch(B.label){case 0:return M(),[4,I()];case 1:return B.sent(),[2]}})})}}),j=k.init,K=bG(k,["init"]),R=st.useCallback(function(B,U){B&&S.current(B),U&&C.current(U)},[]),I=st.useCallback(function(){return vC(void 0,void 0,void 0,function(){var B,U,H;return _C(this,function(F){switch(F.label){case 0:if(!D.current)return[2];if(e)return[2];F.label=1;case 1:return F.trys.push([1,6,,7]),g?[4,P.decodeFromVideoDevice(g,D.current,R)]:[3,3];case 2:return F.sent(),[3,5];case 3:return[4,P.decodeFromConstraints(x??wG,D.current,R)];case 4:F.sent(),F.label=5;case 5:return[3,7];case 6:return B=F.sent(),O.current(B),[2];case 7:return D.current?(U=D.current.srcObject,H=U.getVideoTracks()[0],H&&j(H),[2]):[2]}})})},[P,g,x,e,R,j]),M=st.useCallback(function(){P.reset()},[P]);return st.useEffect(function(){S.current=o},[o]),st.useEffect(function(){C.current=c},[c]),st.useEffect(function(){O.current=p},[p]),st.useEffect(function(){var B=CG(x,n.constraints);B||A(n.constraints)},[x,n]),st.useEffect(function(){return I(),function(){M()}},[I,M]),{ref:D,torch:K}};const DG=({onResult:n,onClose:t})=>{const[e,r]=st.useState(null),{ref:i}=RG({onDecodeResult(a){n(a.getText())},onError(a){a instanceof DOMException&&a.name==="NotAllowedError"&&r("Camera access denied. Please allow camera permissions.")}});return L.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:[L.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"400px",background:"#000",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:[L.jsx("button",{onClick:t,style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.5)",border:"none",color:"white",borderRadius:"50%",padding:"8px",cursor:"pointer",zIndex:10},children:L.jsx(TC,{size:24})}),L.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:"50%",border:"2px solid rgba(255, 255, 255, 0.6)",borderRadius:"12px",pointerEvents:"none",zIndex:5}}),e?L.jsxs("div",{style:{padding:"40px",color:"white",textAlign:"center"},children:[L.jsx(EC,{size:48,style:{marginBottom:"16px",color:"#ff4444"}}),L.jsx("p",{children:e})]}):L.jsx("video",{ref:i,style:{width:"100%",display:"block"}})]}),L.jsx("p",{style:{color:"white",marginTop:"20px",textAlign:"center"},children:"Point your camera at a barcode to scan."})]})},H8=st.createContext({categories:t1,customCategories:[],addCategory:async()=>{},removeCategory:async()=>{},loading:!0}),U2=()=>st.useContext(H8),OG=({children:n})=>{const{user:t,userProfile:e}=Ap(),[r,i]=st.useState([]),[a,o]=st.useState(!0);st.useEffect(()=>{if(!t||!e?.householdId){i([]),o(!1);return}const p=F_(tu(mr,"categories"),U_("householdId","==",e.householdId)),g=yp(p,v=>{const x=v.docs.map(A=>({id:A.id,...A.data(),isCustom:!0}));i(x),o(!1)});return()=>g()},[t,e?.householdId]);const l=async p=>{if(!(!p.trim()||!e?.householdId)){if(t1.includes(p)||r.some(g=>g.name===p)){alert("Category already exists");return}await D1(tu(mr,"categories"),{name:p,householdId:e.householdId,createdAt:Date.now()})}},c=async(p,g)=>{if(t1.includes(g)){alert("Cannot delete default categories");return}await j_(Ws(mr,"categories",p))},h=[...new Set([...t1,...r.map(p=>p.name)])];return L.jsx(H8.Provider,{value:{categories:h,customCategories:r,addCategory:l,removeCategory:c,loading:a},children:n})},NG=({onSubmit:n,onCancel:t})=>{const[e,r]=st.useState(""),[i,a]=st.useState([]),[o,l]=st.useState(""),[c,h]=st.useState(""),[p,g]=st.useState(!1),[v,x]=st.useState(!1),{categories:A}=U2(),[S,C]=st.useState({show:!1,msg:"",type:"success"}),O=(I,M="success")=>{C({show:!0,msg:I,type:M}),setTimeout(()=>C(B=>({...B,show:!1})),3e3)},D=I=>{h(I),g(!1),O("Barcode scanned successfully!")},P=I=>{const M=I.target.value;if(r(M),M.length>1){const B=Object.keys(e1).filter(U=>U.toLowerCase().includes(M.toLowerCase())).slice(0,5);a(B)}else a([])},k=I=>{r(I),a([]);const M=e1[I];M&&l(M)},j=async I=>{I.preventDefault(),x(!0);try{n({name:e,category:o,location:"kichen",quantity:1,stockLevel:"full",value:0,barcode:c})}catch(M){console.error("Error preparing submission:",M),O("Error saving item","error"),x(!1)}},K={display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},R={fontWeight:600,fontSize:"0.875rem"};return L.jsxs("div",{className:"animate-slide-up",children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[L.jsx("h2",{className:"text-title",style:{margin:0},children:"Add New Item"}),L.jsxs(Wn,{variant:"secondary",onClick:()=>g(!0),children:[L.jsx(_w,{size:18}),L.jsx("span",{style:{marginLeft:"8px"},children:"Scan Barcode"})]})]}),p&&L.jsx(DG,{onResult:D,onClose:()=>g(!1)}),L.jsx(bp,{children:L.jsxs("form",{onSubmit:j,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[L.jsxs("div",{style:K,children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[L.jsx("label",{style:R,children:"Item Name"}),c&&L.jsxs("span",{style:{fontSize:"0.75rem",color:"hsl(var(--color-primary))",display:"flex",alignItems:"center",gap:"4px"},children:[L.jsx(_w,{size:12})," ",c]})]}),L.jsxs("div",{style:{position:"relative"},children:[L.jsx("input",{required:!0,type:"text",value:e,onChange:P,className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"e.g. Milk, Bread, Eggs...",autoFocus:!0,onBlur:()=>setTimeout(()=>a([]),200)}),i.length>0&&L.jsx("ul",{className:"dropdown-panel",style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",padding:"4px 0",listStyle:"none"},children:i.map(I=>L.jsx("li",{onClick:()=>k(I),className:"hover-lift",style:{padding:"8px 12px",cursor:"pointer",fontSize:"0.9rem",textTransform:"capitalize",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:L.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[L.jsx("span",{children:I}),L.jsx("span",{style:{fontSize:"0.8rem",opacity:.6,fontStyle:"italic"},children:e1[I]})]})},I))})]})]}),L.jsxs("div",{style:K,children:[L.jsx("label",{style:R,children:"Category (Optional - Auto-detected)"}),L.jsxs("select",{value:o,onChange:I=>l(I.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:[L.jsx("option",{value:"",children:"Auto-Detect"}),A.map(I=>L.jsx("option",{value:I,children:I},I))]})]}),L.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px",justifyContent:"flex-end"},children:[L.jsx(Wn,{type:"button",variant:"ghost",onClick:t,style:{color:"var(--text-muted)"},children:"Cancel"}),L.jsx(Wn,{type:"submit",disabled:v,children:v?L.jsx(Gv,{className:"animate-spin",size:18}):"Add to Pantry"})]})]})}),L.jsx(wp,{message:S.msg,type:S.type,isVisible:S.show,onClose:()=>C({...S,show:!1})})]})},PG=({value:n,onChange:t,options:e,placeholder:r="Select...",className:i=""})=>{const[a,o]=st.useState(!1),l=st.useRef(null);st.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=e.find(h=>h.value===n)?.label||r;return L.jsxs("div",{className:`dropdown-container ${i}`,ref:l,children:[L.jsxs("div",{className:"desktop-only-dropdown",style:{position:"relative"},children:[L.jsxs("button",{type:"button",onClick:()=>o(!a),className:"glass-panel",style:{width:"100%",padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"all 0.2s",boxShadow:"var(--shadow-sm)"},children:[L.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c}),a?L.jsx(GD,{size:18,style:{opacity:.6}}):L.jsx(jD,{size:18,style:{opacity:.6}})]}),a&&L.jsx("div",{className:"glass-panel animate-fade-in",style:{position:"absolute",top:"calc(100% + 8px)",left:0,right:0,zIndex:50,maxHeight:"240px",overflowY:"auto",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.3)",padding:"4px"},children:e.map(h=>L.jsx("div",{onClick:()=>{t(h.value),o(!1)},style:{padding:"10px 16px",cursor:"pointer",borderRadius:"12px",fontSize:"0.95rem",color:n===h.value?"hsl(var(--color-primary))":"var(--text-primary)",background:n===h.value?"rgba(59, 130, 246, 0.1)":"transparent",fontWeight:n===h.value?600:400,transition:"background 0.2s",marginBottom:"2px"},onMouseEnter:p=>p.currentTarget.style.background=n===h.value?"rgba(59, 130, 246, 0.15)":"rgba(255, 255, 255, 0.05)",onMouseLeave:p=>p.currentTarget.style.background=n===h.value?"rgba(59, 130, 246, 0.1)":"transparent",children:h.label},h.value))})]}),L.jsx("select",{className:"mobile-only-select",value:n,onChange:h=>t(h.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",color:"var(--text-primary)",fontSize:"1rem",appearance:"none"},children:e.map(h=>L.jsx("option",{value:h.value,children:h.label},h.value))}),L.jsx("style",{children:`
                @media (min-width: 1025px) {
                    .mobile-only-select { display: none !important; }
                    .desktop-only-dropdown { display: block !important; }
                }
                @media (max-width: 1024px) {
                    .mobile-only-select { display: block !important; }
                    .desktop-only-dropdown { display: none !important; }
                }
            `})]})},MG=()=>{const{todos:n,addTodo:t,toggleTodo:e,deleteTodo:r}=K4(),{addItem:i}=Q_(),{categories:a}=U2(),[o,l]=st.useState(""),[c,h]=st.useState(1),[p,g]=st.useState(a[0]||"Other"),[v,x]=st.useState({show:!1,msg:"",type:"success"}),A=(k,j="success",K,R)=>{x({show:!0,msg:k,type:j,actionLabel:K,onAction:R}),setTimeout(()=>x(M=>({...M,show:!1})),K?5e3:3e3)},S=k=>{k?.preventDefault(),o.trim()&&(t(o,c,p),l(""),h(1))},C=(k,j)=>{const K=n.find(R=>R.id===k);r(k),A(`Deleted "${j}"`,"info","Undo",()=>{K&&(t(K.text,K.quantity,K.category),A("Item restored"))})},O=()=>{const k=n.filter(j=>j.completed);k.length!==0&&confirm(`Move ${k.length} items to pantry ? `)&&(k.forEach(j=>{i({name:j.text,category:j.category,quantity:j.quantity,location:"Kitchen",stockLevel:"full",value:0}),r(j.id)}),A(`Moved ${k.length} items to Pantry`,"success"))},D=n.reduce((k,j)=>(k[j.category]||(k[j.category]=[]),k[j.category].push(j),k),{}),P=n.filter(k=>k.completed).length;return L.jsxs("div",{className:"animate-slide-up",style:{paddingBottom:"120px"},children:[L.jsx("h2",{className:"text-title",children:"Shopping List"}),L.jsx(bp,{className:"mb-6",children:L.jsxs("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[L.jsxs("div",{style:{display:"flex",gap:"12px"},children:[L.jsx("input",{type:"number",min:"1",value:c,onChange:k=>h(parseInt(k.target.value)||1),className:"glass-panel",style:{width:"60px",padding:"12px",background:"rgba(255,255,255,0.05)",outline:"none",textAlign:"center",border:"1px solid var(--glass-border)"},placeholder:"Qty"}),L.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),placeholder:"What do you need?",className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.05)",outline:"none",border:"1px solid var(--glass-border)"}})]}),L.jsxs("div",{style:{display:"flex",gap:"12px"},children:[L.jsx(PG,{value:p,onChange:k=>g(k),options:a.map(k=>({value:k,label:k})),placeholder:"Category"}),L.jsx(Wn,{type:"submit",disabled:!o.trim(),style:{width:"60px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:L.jsx(l1,{size:24})})]})]})}),L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[n.length===0&&L.jsx("div",{style:{textAlign:"center",padding:"40px",opacity:.5},children:L.jsx("p",{children:"Your shopping list is empty."})}),Object.entries(D).map(([k,j])=>L.jsxs("div",{className:"animate-fade-in",children:[L.jsx("h3",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"hsl(var(--color-primary))",marginBottom:"12px",marginLeft:"4px",textTransform:"uppercase",letterSpacing:"0.05em",opacity:.8},children:k}),L.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:j.map(K=>L.jsx(b8,{onSwipeLeft:()=>C(K.id,K.text),children:L.jsxs("div",{className:"tap-scale glass-panel",style:{display:"flex",alignItems:"center",padding:"16px",gap:"16px",background:K.completed?"rgba(0,0,0,0.2)":"var(--color-surface)",width:"100%",borderRadius:"16px",border:"1px solid var(--glass-border)",transition:"all 0.2s ease"},onClick:()=>e(K.id),children:[L.jsx("div",{style:{minWidth:"24px",height:"24px",borderRadius:"6px",border:K.completed?"none":"2px solid var(--text-muted)",background:K.completed?"hsl(var(--color-primary))":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0},children:K.completed&&L.jsx(Hv,{size:16,color:"white"})}),L.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[L.jsx("span",{style:{fontSize:"1rem",textDecoration:K.completed?"line-through":"none",fontWeight:500,color:K.completed?"var(--text-muted)":"var(--text-main)",transition:"all 0.2s",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:K.text}),K.quantity>1&&L.jsxs("span",{style:{fontSize:"0.8rem",color:"hsl(var(--color-primary))",fontWeight:"bold"},children:["Qty: ",K.quantity]})]})]})},K.id))})]},k))]}),P>0&&L.jsx("div",{className:"animate-slide-up",style:{position:"fixed",bottom:"90px",left:"50%",transform:"translateX(-50%)",zIndex:20},children:L.jsxs(Wn,{onClick:O,style:{borderRadius:"32px",padding:"12px 24px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold",background:"hsl(var(--color-primary))",color:"white",border:"1px solid rgba(255,255,255,0.2)"},children:[L.jsx(BD,{size:20}),"Move ",P," to Pantry"]})}),L.jsx(wp,{isVisible:v.show,message:v.msg,type:v.type,actionLabel:v.actionLabel,onAction:v.onAction,onClose:()=>x(k=>({...k,show:!1}))})]})},VG=()=>{const[n,t]=st.useState(null),[e,r]=st.useState(!1);return st.useEffect(()=>{const a=o=>{o.preventDefault(),t(o),r(!0)};return window.addEventListener("beforeinstallprompt",a),()=>{window.removeEventListener("beforeinstallprompt",a)}},[]),{isInstallable:e,promptToInstall:async()=>{if(!n)return;await n.prompt();const{outcome:a}=await n.userChoice;console.log(a==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),t(null),r(!1)}}},LG=()=>{const[n,t]=st.useState(!0),[e,r]=st.useState(!1),[i,a]=st.useState(""),[o,l]=st.useState(""),[c,h]=st.useState(!1),[p,g]=st.useState(!1),[v,x]=st.useState({msg:"",type:"info",show:!1}),A=(D,P)=>{x({msg:D,type:P,show:!0})},S=async D=>{D.preventDefault(),g(!0);try{n?await U7(Xo,i,o):await F7(Xo,i,o)}catch(P){console.error(P);let k="Authentication failed";P.code==="auth/invalid-credential"&&(k="Invalid email or password."),P.code==="auth/email-already-in-use"&&(k="Email already in use."),P.code==="auth/weak-password"&&(k="Password should be at least 6 characters."),P.code==="auth/operation-not-allowed"&&(k="Enable Email/Password in Firebase Console!"),A(k,"error"),g(!1)}},C=async()=>{g(!0);try{await M7(Xo)}catch(D){console.error(D),A("Failed to sign in anonymously.","error"),g(!1)}},O=async D=>{if(D.preventDefault(),!i){A("Please enter your email address.","info");return}g(!0);try{await B7(Xo,i),A("Password reset email sent! Check your inbox.","success"),r(!1)}catch(P){console.error(P);let k="Failed to send reset email.";P.code==="auth/user-not-found"&&(k="No account found with this email."),P.code==="auth/invalid-email"&&(k="Invalid email address."),A(k,"error")}finally{g(!1)}};return L.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",background:"radial-gradient(circle at 50% 10%, rgba(37, 99, 235, 0.1) 0%, transparent 50%)"},children:[L.jsxs("div",{className:"animate-fade-in",style:{width:"100%",maxWidth:"400px"},children:[L.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[L.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:800,marginBottom:"8px",background:"linear-gradient(135deg, hsl(var(--color-primary)) 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Bitlkhzin"}),L.jsx("p",{className:"text-muted",children:"Your smart inventory companion."})]}),L.jsx(bp,{children:L.jsxs("form",{onSubmit:e?O:S,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[L.jsx("h2",{className:"text-title",style:{fontSize:"1.5rem",textAlign:"center"},children:e?"Reset Password":n?"Welcome Back":"Create Account"}),L.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[L.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem",marginBottom:"8px"},children:"Email"}),L.jsx("input",{type:"email",required:!0,value:i,onChange:D=>a(D.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"you@example.com"})]}),!e&&L.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[L.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem"},children:"Password"}),n&&L.jsx("button",{type:"button",onClick:()=>r(!0),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontSize:"0.75rem",cursor:"pointer",fontWeight:500},children:"Forgot Password?"})]}),L.jsxs("div",{style:{position:"relative"},children:[L.jsx("input",{type:c?"text":"password",required:!0,minLength:6,value:o,onChange:D=>l(D.target.value),className:"glass-panel",style:{padding:"12px",paddingRight:"40px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:""}),L.jsx("button",{type:"button",onClick:()=>h(!c),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-light)",opacity:.6,display:"flex",alignItems:"center"},children:c?L.jsx($D,{size:18}):L.jsx(ZD,{size:18})})]})]}),L.jsxs(Wn,{type:"submit",style:{marginTop:"8px",display:"flex",justifyContent:"center",gap:"8px"},disabled:p,children:[p?L.jsx(Gv,{className:"animate-spin"}):e?L.jsx(sO,{size:18}):n?L.jsx(rO,{size:18}):L.jsx(xO,{size:18}),e?"Send Reset Link":n?"Sign In":"Create Account"]}),L.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:L.jsx("p",{className:"text-muted",style:{fontSize:"0.9rem"},children:e?L.jsx("button",{type:"button",onClick:()=>r(!1),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer"},children:"Back to Login"}):L.jsxs(L.Fragment,{children:[n?"Don't have an account? ":"Already have an account? ",L.jsx("button",{type:"button",onClick:()=>{t(!n),a(""),l("")},style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer",textDecoration:"underline"},children:n?"Sign Up":"Log In"})]})})}),!e&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{style:{position:"relative",margin:"20px 0",textAlign:"center"},children:[L.jsx("hr",{style:{borderColor:"var(--glass-border)",opacity:.5}}),L.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--color-surface-light)",padding:"0 10px",fontSize:"0.8rem",color:"var(--color-text-light)",opacity:.6},children:"OR"})]}),L.jsx(Wn,{type:"button",variant:"secondary",onClick:C,disabled:p,style:{width:"100%"},children:"Continue as Guest"})]})]})})]}),L.jsx(wp,{message:v.msg,type:v.type,isVisible:v.show,onClose:()=>x({...v,show:!1})})]})},kG=()=>{const{customCategories:n,addCategory:t,removeCategory:e}=U2(),[r,i]=st.useState(""),a=async o=>{o.preventDefault(),r.trim()&&(await t(r.trim()),i(""))};return L.jsxs("div",{children:[L.jsx("h3",{children:"Custom Categories"}),L.jsxs("form",{onSubmit:a,style:{display:"flex",gap:"8px",marginBottom:"12px",marginTop:"8px"},children:[L.jsx("input",{value:r,onChange:o=>i(o.target.value),placeholder:"New Category...",className:"glass-panel",style:{flex:1,padding:"8px"}}),L.jsx(Wn,{size:"sm",type:"submit",children:L.jsx(l1,{size:16})})]}),L.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[n.length===0&&L.jsx("span",{className:"text-muted",style:{fontSize:"0.9rem"},children:"No custom categories yet."}),n.map(o=>L.jsxs("div",{style:{background:"rgba(0,0,0,0.05)",padding:"4px 12px",borderRadius:"16px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"6px"},children:[o.name,L.jsx("button",{onClick:()=>e(o.id,o.name),style:{border:"none",background:"none",cursor:"pointer",color:"#ef4444",display:"flex"},children:L.jsx(wC,{size:14})})]},o.id))]})]})};function BG(){const[n,t]=st.useState(()=>localStorage.getItem("currentView")||"inventory");st.useEffect(()=>{localStorage.setItem("currentView",n)},[n]);const[e,r]=st.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{items:i,addItem:a,deleteItem:o}=Q_(),{isInstallable:l,promptToInstall:c}=VG(),{user:h,loading:p,userProfile:g,updateHousehold:v}=Ap();if(st.useEffect(()=>{const A=document.querySelector('meta[name="theme-color"]');e?(document.documentElement.classList.add("dark"),A&&A.setAttribute("content","#14171f")):(document.documentElement.classList.remove("dark"),A&&A.setAttribute("content","#f9fafb"))},[e]),p)return L.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:L.jsx(Gv,{className:"animate-spin",size:48,color:"hsl(var(--color-primary))"})});if(!h)return L.jsx(LG,{});const x=()=>{switch(n){case"add":return L.jsx(NG,{onSubmit:A=>{a(A),t("inventory")},onCancel:()=>t("inventory")});case"settings":return L.jsxs("div",{className:"animate-fade-in",children:[L.jsx("h2",{className:"text-title",children:"Settings"}),L.jsxs(bp,{children:[L.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[L.jsx("h3",{style:{margin:0},children:"Appearance"}),L.jsxs(Wn,{variant:"secondary",onClick:()=>r(!e),style:{display:"flex",alignItems:"center",gap:"8px"},children:[e?L.jsx(yO,{size:18}):L.jsx(uO,{size:18}),e?"Light Mode":"Dark Mode"]})]}),L.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),L.jsxs("div",{style:{opacity:.6},children:[L.jsx("p",{children:"App Version: 1.1.0"}),L.jsxs("p",{children:["Account: ",h.email]}),L.jsx("p",{children:"Sync Status: Cloud (Firebase)"}),L.jsxs(Wn,{size:"sm",variant:"secondary",onClick:()=>window.location.reload(),style:{marginTop:"12px",width:"100%",justifyContent:"center",gap:"8px"},children:[L.jsx(hO,{size:16}),"Check for Updates / Reload"]})]}),L.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),L.jsxs("div",{children:[L.jsx("h3",{children:"Family Sharing"}),L.jsx("p",{style:{fontSize:"0.9rem",opacity:.7,marginBottom:"8px"},children:"Share this code with your family to sync your list:"}),L.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[L.jsx("div",{style:{flex:1,background:"rgba(0,0,0,0.05)",padding:"12px",borderRadius:"8px",fontFamily:"monospace",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",textOverflow:"ellipsis"},children:g?.householdId||"Loading..."}),L.jsx(Wn,{size:"sm",onClick:()=>{navigator.clipboard.writeText(g?.householdId||""),alert("Code copied!")},style:{whiteSpace:"nowrap"},children:"Copy Code"})]}),L.jsxs("details",{children:[L.jsx("summary",{style:{cursor:"pointer",fontSize:"0.9rem",color:"hsl(var(--color-primary))"},children:"Join a Family"}),L.jsxs("form",{onSubmit:async A=>{A.preventDefault();const S=A.target.code.value;S&&confirm("Joining a new family will switch your view. Continue?")&&(await v(S),alert("You have joined the family!"),window.location.reload())},style:{marginTop:"12px",display:"flex",gap:"8px"},children:[L.jsx("input",{name:"code",placeholder:"Enter family code",className:"glass-panel",style:{padding:"8px",flex:1}}),L.jsx(Wn,{size:"sm",type:"submit",children:"Join"})]})]})]}),L.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),L.jsxs(Wn,{variant:"secondary",onClick:()=>Xo.signOut(),style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px",color:"#f87171",borderColor:"rgba(248, 113, 113, 0.3)"},children:[L.jsx(AC,{size:18}),"Log Out"]}),l&&L.jsxs(L.Fragment,{children:[L.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),L.jsxs(Wn,{onClick:c,style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px"},children:[L.jsx(WD,{size:18}),"Install App"]})]}),L.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),L.jsx(kG,{})]})]});case"todo":return L.jsx(MG,{});default:return L.jsx("div",{className:"animate-fade-in",children:L.jsx(kU,{items:i,onAddItem:()=>t("add"),onDeleteItem:o})})}};return L.jsx(rL,{currentView:n,onNavigate:A=>t(A),children:x()})}OD.createRoot(document.getElementById("root")).render(L.jsx(st.StrictMode,{children:L.jsx(iL,{children:L.jsx(OG,{children:L.jsx(BG,{})})})}));
