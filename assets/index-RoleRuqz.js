(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function hC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kp={exports:{}},Ac={};var $2;function dC(){if($2)return Ac;$2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:s,ref:i!==void 0?i:null,props:a}}return Ac.Fragment=e,Ac.jsx=t,Ac.jsxs=t,Ac}var Z2;function pC(){return Z2||(Z2=1,Kp.exports=dC()),Kp.exports}var U=pC(),Yp={exports:{}},Me={};var J2;function gC(){if(J2)return Me;J2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function E(H){return H===null||typeof H!="object"?null:(H=_&&H[_]||H["@@iterator"],typeof H=="function"?H:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,R={};function L(H,ue,ge){this.props=H,this.context=ue,this.refs=R,this.updater=ge||w}L.prototype.isReactComponent={},L.prototype.setState=function(H,ue){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ue,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function M(){}M.prototype=L.prototype;function B(H,ue,ge){this.props=H,this.context=ue,this.refs=R,this.updater=ge||w}var G=B.prototype=new M;G.constructor=B,S(G,L.prototype),G.isPureReactComponent=!0;var $=Array.isArray;function J(){}var C={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(H,ue,ge){var ve=ge.ref;return{$$typeof:n,type:H,key:ue,ref:ve!==void 0?ve:null,props:ge}}function k(H,ue){return N(H.type,ue,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function z(H){var ue={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ge){return ue[ge]})}var P=/\/+/g;function ze(H,ue){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):ue.toString(36)}function yt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(J,J):(H.status="pending",H.then(function(ue){H.status==="pending"&&(H.status="fulfilled",H.value=ue)},function(ue){H.status==="pending"&&(H.status="rejected",H.reason=ue)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ne(H,ue,ge,ve,De){var ke=typeof H;(ke==="undefined"||ke==="boolean")&&(H=null);var We=!1;if(H===null)We=!0;else switch(ke){case"bigint":case"string":case"number":We=!0;break;case"object":switch(H.$$typeof){case n:case e:We=!0;break;case p:return We=H._init,ne(We(H._payload),ue,ge,ve,De)}}if(We)return De=De(H),We=ve===""?"."+ze(H,0):ve,$(De)?(ge="",We!=null&&(ge=We.replace(P,"$&/")+"/"),ne(De,ue,ge,"",function(Ro){return Ro})):De!=null&&(V(De)&&(De=k(De,ge+(De.key==null||H&&H.key===De.key?"":(""+De.key).replace(P,"$&/")+"/")+We)),ue.push(De)),1;We=0;var an=ve===""?".":ve+":";if($(H))for(var Dt=0;Dt<H.length;Dt++)ve=H[Dt],ke=an+ze(ve,Dt),We+=ne(ve,ue,ge,ke,De);else if(Dt=E(H),typeof Dt=="function")for(H=Dt.call(H),Dt=0;!(ve=H.next()).done;)ve=ve.value,ke=an+ze(ve,Dt++),We+=ne(ve,ue,ge,ke,De);else if(ke==="object"){if(typeof H.then=="function")return ne(yt(H),ue,ge,ve,De);throw ue=String(H),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return We}function he(H,ue,ge){if(H==null)return H;var ve=[],De=0;return ne(H,ve,"","",function(ke){return ue.call(ge,ke,De++)}),ve}function we(H){if(H._status===-1){var ue=H._result;ue=ue(),ue.then(function(ge){(H._status===0||H._status===-1)&&(H._status=1,H._result=ge)},function(ge){(H._status===0||H._status===-1)&&(H._status=2,H._result=ge)}),H._status===-1&&(H._status=0,H._result=ue)}if(H._status===1)return H._result.default;throw H._result}var Ze=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},lt={map:he,forEach:function(H,ue,ge){he(H,function(){ue.apply(this,arguments)},ge)},count:function(H){var ue=0;return he(H,function(){ue++}),ue},toArray:function(H){return he(H,function(ue){return ue})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Me.Activity=v,Me.Children=lt,Me.Component=L,Me.Fragment=t,Me.Profiler=i,Me.PureComponent=B,Me.StrictMode=r,Me.Suspense=f,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Me.__COMPILER_RUNTIME={__proto__:null,c:function(H){return C.H.useMemoCache(H)}},Me.cache=function(H){return function(){return H.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(H,ue,ge){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ve=S({},H.props),De=H.key;if(ue!=null)for(ke in ue.key!==void 0&&(De=""+ue.key),ue)!b.call(ue,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ue.ref===void 0||(ve[ke]=ue[ke]);var ke=arguments.length-2;if(ke===1)ve.children=ge;else if(1<ke){for(var We=Array(ke),an=0;an<ke;an++)We[an]=arguments[an+2];ve.children=We}return N(H.type,De,ve)},Me.createContext=function(H){return H={$$typeof:s,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Me.createElement=function(H,ue,ge){var ve,De={},ke=null;if(ue!=null)for(ve in ue.key!==void 0&&(ke=""+ue.key),ue)b.call(ue,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(De[ve]=ue[ve]);var We=arguments.length-2;if(We===1)De.children=ge;else if(1<We){for(var an=Array(We),Dt=0;Dt<We;Dt++)an[Dt]=arguments[Dt+2];De.children=an}if(H&&H.defaultProps)for(ve in We=H.defaultProps,We)De[ve]===void 0&&(De[ve]=We[ve]);return N(H,ke,De)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(H){return{$$typeof:l,render:H}},Me.isValidElement=V,Me.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:we}},Me.memo=function(H,ue){return{$$typeof:h,type:H,compare:ue===void 0?null:ue}},Me.startTransition=function(H){var ue=C.T,ge={};C.T=ge;try{var ve=H(),De=C.S;De!==null&&De(ge,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(J,Ze)}catch(ke){Ze(ke)}finally{ue!==null&&ge.types!==null&&(ue.types=ge.types),C.T=ue}},Me.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Me.use=function(H){return C.H.use(H)},Me.useActionState=function(H,ue,ge){return C.H.useActionState(H,ue,ge)},Me.useCallback=function(H,ue){return C.H.useCallback(H,ue)},Me.useContext=function(H){return C.H.useContext(H)},Me.useDebugValue=function(){},Me.useDeferredValue=function(H,ue){return C.H.useDeferredValue(H,ue)},Me.useEffect=function(H,ue){return C.H.useEffect(H,ue)},Me.useEffectEvent=function(H){return C.H.useEffectEvent(H)},Me.useId=function(){return C.H.useId()},Me.useImperativeHandle=function(H,ue,ge){return C.H.useImperativeHandle(H,ue,ge)},Me.useInsertionEffect=function(H,ue){return C.H.useInsertionEffect(H,ue)},Me.useLayoutEffect=function(H,ue){return C.H.useLayoutEffect(H,ue)},Me.useMemo=function(H,ue){return C.H.useMemo(H,ue)},Me.useOptimistic=function(H,ue){return C.H.useOptimistic(H,ue)},Me.useReducer=function(H,ue,ge){return C.H.useReducer(H,ue,ge)},Me.useRef=function(H){return C.H.useRef(H)},Me.useState=function(H){return C.H.useState(H)},Me.useSyncExternalStore=function(H,ue,ge){return C.H.useSyncExternalStore(H,ue,ge)},Me.useTransition=function(){return C.H.useTransition()},Me.version="19.2.3",Me}var eE;function yv(){return eE||(eE=1,Yp.exports=gC()),Yp.exports}var ye=yv();const vC=hC(ye);var Wp={exports:{}},wc={},Qp={exports:{}},$p={};var tE;function mC(){return tE||(tE=1,(function(n){function e(ne,he){var we=ne.length;ne.push(he);e:for(;0<we;){var Ze=we-1>>>1,lt=ne[Ze];if(0<i(lt,he))ne[Ze]=he,ne[we]=lt,we=Ze;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var he=ne[0],we=ne.pop();if(we!==he){ne[0]=we;e:for(var Ze=0,lt=ne.length,H=lt>>>1;Ze<H;){var ue=2*(Ze+1)-1,ge=ne[ue],ve=ue+1,De=ne[ve];if(0>i(ge,we))ve<lt&&0>i(De,ge)?(ne[Ze]=De,ne[ve]=we,Ze=ve):(ne[Ze]=ge,ne[ue]=we,Ze=ue);else if(ve<lt&&0>i(De,we))ne[Ze]=De,ne[ve]=we,Ze=ve;else break e}}return he}function i(ne,he){var we=ne.sortIndex-he.sortIndex;return we!==0?we:ne.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var f=[],h=[],p=1,v=null,_=3,E=!1,w=!1,S=!1,R=!1,L=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function G(ne){for(var he=t(h);he!==null;){if(he.callback===null)r(h);else if(he.startTime<=ne)r(h),he.sortIndex=he.expirationTime,e(f,he);else break;he=t(h)}}function $(ne){if(S=!1,G(ne),!w)if(t(f)!==null)w=!0,J||(J=!0,z());else{var he=t(h);he!==null&&yt($,he.startTime-ne)}}var J=!1,C=-1,b=5,N=-1;function k(){return R?!0:!(n.unstable_now()-N<b)}function V(){if(R=!1,J){var ne=n.unstable_now();N=ne;var he=!0;try{e:{w=!1,S&&(S=!1,M(C),C=-1),E=!0;var we=_;try{t:{for(G(ne),v=t(f);v!==null&&!(v.expirationTime>ne&&k());){var Ze=v.callback;if(typeof Ze=="function"){v.callback=null,_=v.priorityLevel;var lt=Ze(v.expirationTime<=ne);if(ne=n.unstable_now(),typeof lt=="function"){v.callback=lt,G(ne),he=!0;break t}v===t(f)&&r(f),G(ne)}else r(f);v=t(f)}if(v!==null)he=!0;else{var H=t(h);H!==null&&yt($,H.startTime-ne),he=!1}}break e}finally{v=null,_=we,E=!1}he=void 0}}finally{he?z():J=!1}}}var z;if(typeof B=="function")z=function(){B(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ze=P.port2;P.port1.onmessage=V,z=function(){ze.postMessage(null)}}else z=function(){L(V,0)};function yt(ne,he){C=L(function(){ne(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(ne){switch(_){case 1:case 2:case 3:var he=3;break;default:he=_}var we=_;_=he;try{return ne()}finally{_=we}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(ne,he){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=_;_=ne;try{return he()}finally{_=we}},n.unstable_scheduleCallback=function(ne,he,we){var Ze=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ze+we:Ze):we=Ze,ne){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=we+lt,ne={id:p++,callback:he,priorityLevel:ne,startTime:we,expirationTime:lt,sortIndex:-1},we>Ze?(ne.sortIndex=we,e(h,ne),t(f)===null&&ne===t(h)&&(S?(M(C),C=-1):S=!0,yt($,we-Ze))):(ne.sortIndex=lt,e(f,ne),w||E||(w=!0,J||(J=!0,z()))),ne},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(ne){var he=_;return function(){var we=_;_=he;try{return ne.apply(this,arguments)}finally{_=we}}}})($p)),$p}var nE;function yC(){return nE||(nE=1,Qp.exports=mC()),Qp.exports}var Zp={exports:{}},kn={};var rE;function _C(){if(rE)return kn;rE=1;var n=yv();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:f,containerInfo:h,implementation:p}}var s=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,p)},kn.flushSync=function(f){var h=s.T,p=r.p;try{if(s.T=null,r.p=2,f)return f()}finally{s.T=h,r.p=p,r.d.f()}},kn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},kn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},kn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,v=l(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:E}):p==="script"&&r.d.X(f,{crossOrigin:v,integrity:_,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},kn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},kn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=l(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},kn.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=l(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},kn.requestFormReset=function(f){r.d.r(f)},kn.unstable_batchedUpdates=function(f,h){return f(h)},kn.useFormState=function(f,h,p){return s.H.useFormState(f,h,p)},kn.useFormStatus=function(){return s.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var iE;function EC(){if(iE)return Zp.exports;iE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zp.exports=_C(),Zp.exports}var aE;function xC(){if(aE)return wc;aE=1;var n=yC(),e=yv(),t=EC();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,c=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(c=u.return),o=u.return;while(o)}return u.tag===3?c:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function f(o){if(a(o)!==o)throw Error(r(188))}function h(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(r(188));return u!==o?null:o}for(var c=o,d=u;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return f(m),o;if(y===d)return f(m),u;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=m,d=y;else{for(var A=!1,I=m.child;I;){if(I===c){A=!0,c=m,d=y;break}if(I===d){A=!0,d=m,c=y;break}I=I.sibling}if(!A){for(I=y.child;I;){if(I===c){A=!0,c=y,d=m;break}if(I===d){A=!0,d=y,c=m;break}I=I.sibling}if(!A)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),B=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function ze(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case L:return"Profiler";case R:return"StrictMode";case $:return"Suspense";case J:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case B:return o.displayName||"Context";case M:return(o._context.displayName||"Context")+".Consumer";case G:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case C:return u=o.displayName||null,u!==null?u:ze(o.type)||"Memo";case b:u=o._payload,o=o._init;try{return ze(o(u))}catch{}}return null}var yt=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ze=[],lt=-1;function H(o){return{current:o}}function ue(o){0>lt||(o.current=Ze[lt],Ze[lt]=null,lt--)}function ge(o,u){lt++,Ze[lt]=o.current,o.current=u}var ve=H(null),De=H(null),ke=H(null),We=H(null);function an(o,u){switch(ge(ke,u),ge(De,o),ge(ve,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?E2(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=E2(u),o=x2(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ue(ve),ge(ve,o)}function Dt(){ue(ve),ue(De),ue(ke)}function Ro(o){o.memoizedState!==null&&ge(We,o);var u=ve.current,c=x2(u,o.type);u!==c&&(ge(De,o),ge(ve,c))}function Fs(o){De.current===o&&(ue(ve),ue(De)),We.current===o&&(ue(We),yc._currentValue=we)}var Us,zs;function si(o){if(Us===void 0)try{throw Error()}catch(c){var u=c.stack.trim().match(/\n( *(at )?)/);Us=u&&u[1]||"",zs=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Us+o+zs}var yl=!1;function Do(o,u){if(!o||yl)return"";yl=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(u){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(te){var Z=te}Reflect.construct(o,[],se)}else{try{se.call()}catch(te){Z=te}o.call(se.prototype)}}else{try{throw Error()}catch(te){Z=te}(se=o())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),A=y[0],I=y[1];if(A&&I){var F=A.split(`
`),Q=I.split(`
`);for(m=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(d===F.length||m===Q.length)for(d=F.length-1,m=Q.length-1;1<=d&&0<=m&&F[d]!==Q[m];)m--;for(;1<=d&&0<=m;d--,m--)if(F[d]!==Q[m]){if(d!==1||m!==1)do if(d--,m--,0>m||F[d]!==Q[m]){var ie=`
`+F[d].replace(" at new "," at ");return o.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",o.displayName)),ie}while(1<=d&&0<=m);break}}}finally{yl=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?si(c):""}function _l(o,u){switch(o.tag){case 26:case 27:case 5:return si(o.type);case 16:return si("Lazy");case 13:return o.child!==u&&u!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return Do(o.type,!1);case 11:return Do(o.type.render,!1);case 1:return Do(o.type,!0);case 31:return si("Activity");default:return""}}function El(o){try{var u="",c=null;do u+=_l(o,c),c=o,o=o.return;while(o);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var qt=Object.prototype.hasOwnProperty,on=n.unstable_scheduleCallback,xa=n.unstable_cancelCallback,W0=n.unstable_shouldYield,kf=n.unstable_requestPaint,Hn=n.unstable_now,Oo=n.unstable_getCurrentPriorityLevel,xl=n.unstable_ImmediatePriority,Al=n.unstable_UserBlockingPriority,Aa=n.unstable_NormalPriority,Q0=n.unstable_LowPriority,Bf=n.unstable_IdlePriority,Vf=n.log,Ff=n.unstable_setDisableYieldValue,zr=null,Sn=null;function Ar(o){if(typeof Vf=="function"&&Ff(o),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(zr,o)}catch{}}var zt=Math.clz32?Math.clz32:zf,Uf=Math.log,js=Math.LN2;function zf(o){return o>>>=0,o===0?32:31-(Uf(o)/js|0)|0}var ui=256,No=262144,Xt=4194304;function li(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ci(o,u,c){var d=o.pendingLanes;if(d===0)return 0;var m=0,y=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?m=li(d):(A&=I,A!==0?m=li(A):c||(c=I&~o,c!==0&&(m=li(c))))):(I=d&~y,I!==0?m=li(I):A!==0?m=li(A):c||(c=d&~o,c!==0&&(m=li(c)))),m===0?0:u!==0&&u!==m&&(u&y)===0&&(y=m&-m,c=u&-u,y>=c||y===32&&(c&4194048)!==0)?u:m}function jr(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function $0(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(){var o=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),o}function fi(o){for(var u=[],c=0;31>c;c++)u.push(o);return u}function Mo(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Z0(o,u,c,d,m,y){var A=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var I=o.entanglements,F=o.expirationTimes,Q=o.hiddenUpdates;for(c=A&~c;0<c;){var ie=31-zt(c),se=1<<ie;I[ie]=0,F[ie]=-1;var Z=Q[ie];if(Z!==null)for(Q[ie]=null,ie=0;ie<Z.length;ie++){var te=Z[ie];te!==null&&(te.lane&=-536870913)}c&=~se}d!==0&&Po(o,d,0),y!==0&&m===0&&o.tag!==0&&(o.suspendedLanes|=y&~(A&~u))}function Po(o,u,c){o.pendingLanes|=u,o.suspendedLanes&=~u;var d=31-zt(u);o.entangledLanes|=u,o.entanglements[d]=o.entanglements[d]|1073741824|c&261930}function wl(o,u){var c=o.entangledLanes|=u;for(o=o.entanglements;c;){var d=31-zt(c),m=1<<d;m&u|o[d]&u&&(o[d]|=u),c&=~m}}function Tl(o,u){var c=u&-u;return c=(c&42)!==0?1:Lo(c),(c&(o.suspendedLanes|u))!==0?0:c}function Lo(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function zi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Hf(){var o=he.p;return o!==0?o:(o=window.event,o===void 0?32:G2(o.type))}function Hr(o,u){var c=he.p;try{return he.p=o,u()}finally{he.p=c}}var Gr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Gr,vn="__reactProps$"+Gr,hi="__reactContainer$"+Gr,Hs="__reactEvents$"+Gr,J0="__reactListeners$"+Gr,Gf="__reactHandles$"+Gr,qf="__reactResources$"+Gr,di="__reactMarker$"+Gr;function Gs(o){delete o[Kt],delete o[vn],delete o[Hs],delete o[J0],delete o[Gf]}function pi(o){var u=o[Kt];if(u)return u;for(var c=o.parentNode;c;){if(u=c[hi]||c[Kt]){if(c=u.alternate,u.child!==null||c!==null&&c.child!==null)for(o=b2(o);o!==null;){if(c=o[Kt])return c;o=b2(o)}return u}o=c,c=o.parentNode}return null}function wr(o){if(o=o[Kt]||o[hi]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function lr(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function gi(o){var u=o[qf];return u||(u=o[qf]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Yt(o){o[di]=!0}var Sl=new Set,Il={};function vi(o,u){mi(o,u),mi(o+"Capture",u)}function mi(o,u){for(Il[o]=u,o=0;o<u.length;o++)Sl.add(u[o])}var Cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},Rl={};function Xf(o){return qt.call(Rl,o)?!0:qt.call(bl,o)?!1:Cl.test(o)?Rl[o]=!0:(bl[o]=!0,!1)}function qs(o,u,c){if(Xf(u))if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var d=u.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+c)}}function cr(o,u,c){if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+c)}}function Wt(o,u,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(u,c,""+d)}}function mn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function wa(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Dl(o,u,c){var d=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,y=d.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return m.call(this)},set:function(A){c=""+A,y.call(this,A)}}),Object.defineProperty(o,u,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function ct(o){if(!o._valueTracker){var u=wa(o)?"checked":"value";o._valueTracker=Dl(o,u,""+o[u])}}function ko(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var c=u.getValue(),d="";return o&&(d=wa(o)?o.checked?"true":"false":o.value),o=d,o!==c?(u.setValue(o),!0):!1}function yi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bo=/[\n"\\]/g;function Zn(o){return o.replace(Bo,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Xs(o,u,c,d,m,y,A,I){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),u!=null?A==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+mn(u)):o.value!==""+mn(u)&&(o.value=""+mn(u)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),u!=null?Ol(o,A,mn(u)):c!=null?Ol(o,A,mn(c)):d!=null&&o.removeAttribute("value"),m==null&&y!=null&&(o.defaultChecked=!!y),m!=null&&(o.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+mn(I):o.removeAttribute("name")}function Kf(o,u,c,d,m,y,A,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(o.type=y),u!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||u!=null)){ct(o);return}c=c!=null?""+mn(c):"",u=u!=null?""+mn(u):c,I||u===o.value||(o.value=u),o.defaultValue=u}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=I?o.checked:!!d,o.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A),ct(o)}function Ol(o,u,c){u==="number"&&yi(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function Ta(o,u,c,d){if(o=o.options,u){u={};for(var m=0;m<c.length;m++)u["$"+c[m]]=!0;for(c=0;c<o.length;c++)m=u.hasOwnProperty("$"+o[c].value),o[c].selected!==m&&(o[c].selected=m),m&&d&&(o[c].defaultSelected=!0)}else{for(c=""+mn(c),u=null,m=0;m<o.length;m++){if(o[m].value===c){o[m].selected=!0,d&&(o[m].defaultSelected=!0);return}u!==null||o[m].disabled||(u=o[m])}u!==null&&(u.selected=!0)}}function Yf(o,u,c){if(u!=null&&(u=""+mn(u),u!==o.value&&(o.value=u),c==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=c!=null?""+mn(c):""}function Sa(o,u,c,d){if(u==null){if(d!=null){if(c!=null)throw Error(r(92));if(yt(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),u=c}c=mn(u),o.defaultValue=c,d=o.textContent,d===c&&d!==""&&d!==null&&(o.value=d),ct(o)}function Jn(o,u){if(u){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=u;return}}o.textContent=u}var Wf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nl(o,u,c){var d=u.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":d?o.setProperty(u,c):typeof c!="number"||c===0||Wf.has(u)?u==="float"?o.cssFloat=c:o[u]=(""+c).trim():o[u]=c+"px"}function Ml(o,u,c){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||u!=null&&u.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var m in u)d=u[m],u.hasOwnProperty(m)&&c[m]!==d&&Nl(o,m,d)}else for(var y in u)u.hasOwnProperty(y)&&Nl(o,y,u[y])}function Ks(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ia=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(o){return Ia.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function qr(){}var Pl=null;function Tr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ca=null,_i=null;function Vo(o){var u=wr(o);if(u&&(o=u.stateNode)){var c=o[vn]||null;e:switch(o=u.stateNode,u.type){case"input":if(Xs(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),u=c.name,c.type==="radio"&&u!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Zn(""+u)+'"][type="radio"]'),u=0;u<c.length;u++){var d=c[u];if(d!==o&&d.form===o.form){var m=d[vn]||null;if(!m)throw Error(r(90));Xs(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(u=0;u<c.length;u++)d=c[u],d.form===o.form&&ko(d)}break e;case"textarea":Yf(o,c.value,c.defaultValue);break e;case"select":u=c.value,u!=null&&Ta(o,!!c.multiple,u,!1)}}}var Ws=!1;function ba(o,u,c){if(Ws)return o(u,c);Ws=!0;try{var d=o(u);return d}finally{if(Ws=!1,(Ca!==null||_i!==null)&&(Hh(),Ca&&(u=Ca,o=_i,_i=Ca=null,Vo(u),o)))for(u=0;u<o.length;u++)Vo(o[u])}}function Xr(o,u){var c=o.stateNode;if(c===null)return null;var d=c[vn]||null;if(d===null)return null;c=d[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,u,typeof c));return c}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fo=!1;if(Sr)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Fo=!1}var Ei=null,Ll=null,Uo=null;function kl(){if(Uo)return Uo;var o,u=Ll,c=u.length,d,m="value"in Ei?Ei.value:Ei.textContent,y=m.length;for(o=0;o<c&&u[o]===m[o];o++);var A=c-o;for(d=1;d<=A&&u[c-d]===m[y-d];d++);return Uo=m.slice(o,1<d?1-d:void 0)}function zo(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function ji(){return!0}function Kr(){return!1}function In(o){function u(c,d,m,y,A){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(c=o[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ji:Kr,this.isPropagationStopped=Kr,this}return v(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),u}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xi=In(Hi),Ra=v({},Hi,{view:0,detail:0}),Bl=In(Ra),Da,Qs,Ai,$s=v({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oa,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ai&&(Ai&&o.type==="mousemove"?(Da=o.screenX-Ai.screenX,Qs=o.screenY-Ai.screenY):Qs=Da=0,Ai=o),Da)},movementY:function(o){return"movementY"in o?o.movementY:Qs}}),Vl=In($s),jo=v({},$s,{dataTransfer:0}),$f=In(jo),Zf=v({},Ra,{relatedTarget:0}),Ho=In(Zf),Fl=v({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),Jf=In(Fl),Zs=v({},Hi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),eh=In(Zs),th=v({},Hi,{data:0}),wi=In(th),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=ih[o])?!!u[o]:!1}function Oa(){return ah}var Gn=v({},Ra,{key:function(o){if(o.key){var u=nh[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=zo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rh[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oa,charCode:function(o){return o.type==="keypress"?zo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),oh=In(Gn),sh=v({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gi=In(sh),g=v({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oa}),x=In(g),T=v({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=In(T),K=v({},$s,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=In(K),ce=v({},Hi,{newState:0,oldState:0}),Pe=In(ce),jt=[9,13,27,32],rt=Sr&&"CompositionEvent"in window,Ot=null;Sr&&"documentMode"in document&&(Ot=document.documentMode);var Ir=Sr&&"TextEvent"in window&&!Ot,Ti=Sr&&(!rt||Ot&&8<Ot&&11>=Ot),Yr=" ",Wr=!1;function Go(o,u){switch(o){case"keyup":return jt.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Js(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var eu=!1;function kS(o,u){switch(o){case"compositionend":return Js(u);case"keypress":return u.which!==32?null:(Wr=!0,Yr);case"textInput":return o=u.data,o===Yr&&Wr?null:o;default:return null}}function BS(o,u){if(eu)return o==="compositionend"||!rt&&Go(o,u)?(o=kl(),Uo=Ll=Ei=null,eu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ti&&u.locale!=="ko"?null:u.data;default:return null}}var VS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Om(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!VS[o.type]:u==="textarea"}function Nm(o,u,c,d){Ca?_i?_i.push(d):_i=[d]:Ca=d,u=Qh(u,"onChange"),0<u.length&&(c=new xi("onChange","change",null,c,d),o.push({event:c,listeners:u}))}var Ul=null,zl=null;function FS(o){p2(o,0)}function uh(o){var u=lr(o);if(ko(u))return o}function Mm(o,u){if(o==="change")return u}var Pm=!1;if(Sr){var e1;if(Sr){var t1="oninput"in document;if(!t1){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),t1=typeof Lm.oninput=="function"}e1=t1}else e1=!1;Pm=e1&&(!document.documentMode||9<document.documentMode)}function km(){Ul&&(Ul.detachEvent("onpropertychange",Bm),zl=Ul=null)}function Bm(o){if(o.propertyName==="value"&&uh(zl)){var u=[];Nm(u,zl,o,Tr(o)),ba(FS,u)}}function US(o,u,c){o==="focusin"?(km(),Ul=u,zl=c,Ul.attachEvent("onpropertychange",Bm)):o==="focusout"&&km()}function zS(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return uh(zl)}function jS(o,u){if(o==="click")return uh(u)}function HS(o,u){if(o==="input"||o==="change")return uh(u)}function GS(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var fr=typeof Object.is=="function"?Object.is:GS;function jl(o,u){if(fr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var c=Object.keys(o),d=Object.keys(u);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!qt.call(u,m)||!fr(o[m],u[m]))return!1}return!0}function Vm(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Fm(o,u){var c=Vm(o);o=0;for(var d;c;){if(c.nodeType===3){if(d=o+c.textContent.length,o<=u&&d>=u)return{node:c,offset:u-o};o=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Vm(c)}}function Um(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Um(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function zm(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=yi(o.document);u instanceof o.HTMLIFrameElement;){try{var c=typeof u.contentWindow.location.href=="string"}catch{c=!1}if(c)o=u.contentWindow;else break;u=yi(o.document)}return u}function n1(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var qS=Sr&&"documentMode"in document&&11>=document.documentMode,tu=null,r1=null,Hl=null,i1=!1;function jm(o,u,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;i1||tu==null||tu!==yi(d)||(d=tu,"selectionStart"in d&&n1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Hl&&jl(Hl,d)||(Hl=d,d=Qh(r1,"onSelect"),0<d.length&&(u=new xi("onSelect","select",null,u,c),o.push({event:u,listeners:d}),u.target=tu)))}function qo(o,u){var c={};return c[o.toLowerCase()]=u.toLowerCase(),c["Webkit"+o]="webkit"+u,c["Moz"+o]="moz"+u,c}var nu={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionrun:qo("Transition","TransitionRun"),transitionstart:qo("Transition","TransitionStart"),transitioncancel:qo("Transition","TransitionCancel"),transitionend:qo("Transition","TransitionEnd")},a1={},Hm={};Sr&&(Hm=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function Xo(o){if(a1[o])return a1[o];if(!nu[o])return o;var u=nu[o],c;for(c in u)if(u.hasOwnProperty(c)&&c in Hm)return a1[o]=u[c];return o}var Gm=Xo("animationend"),qm=Xo("animationiteration"),Xm=Xo("animationstart"),XS=Xo("transitionrun"),KS=Xo("transitionstart"),YS=Xo("transitioncancel"),Km=Xo("transitionend"),Ym=new Map,o1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o1.push("scrollEnd");function Qr(o,u){Ym.set(o,u),vi(u,[o])}var lh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Cr=[],ru=0,s1=0;function ch(){for(var o=ru,u=s1=ru=0;u<o;){var c=Cr[u];Cr[u++]=null;var d=Cr[u];Cr[u++]=null;var m=Cr[u];Cr[u++]=null;var y=Cr[u];if(Cr[u++]=null,d!==null&&m!==null){var A=d.pending;A===null?m.next=m:(m.next=A.next,A.next=m),d.pending=m}y!==0&&Wm(c,m,y)}}function fh(o,u,c,d){Cr[ru++]=o,Cr[ru++]=u,Cr[ru++]=c,Cr[ru++]=d,s1|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function u1(o,u,c,d){return fh(o,u,c,d),hh(o)}function Ko(o,u){return fh(o,null,null,u),hh(o)}function Wm(o,u,c){o.lanes|=c;var d=o.alternate;d!==null&&(d.lanes|=c);for(var m=!1,y=o.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(o=y.stateNode,o===null||o._visibility&1||(m=!0)),o=y,y=y.return;return o.tag===3?(y=o.stateNode,m&&u!==null&&(m=31-zt(c),o=y.hiddenUpdates,d=o[m],d===null?o[m]=[u]:d.push(u),u.lane=c|536870912),y):null}function hh(o){if(50<fc)throw fc=0,mp=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var iu={};function WS(o,u,c,d){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(o,u,c,d){return new WS(o,u,c,d)}function l1(o){return o=o.prototype,!(!o||!o.isReactComponent)}function qi(o,u){var c=o.alternate;return c===null?(c=hr(o.tag,u,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=u,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,u=o.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function Qm(o,u){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,u=c.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function dh(o,u,c,d,m,y){var A=0;if(d=o,typeof o=="function")l1(o)&&(A=1);else if(typeof o=="string")A=eC(o,c,ve.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=hr(31,c,u,m),o.elementType=N,o.lanes=y,o;case S:return Yo(c.children,m,y,u);case R:A=8,m|=24;break;case L:return o=hr(12,c,u,m|2),o.elementType=L,o.lanes=y,o;case $:return o=hr(13,c,u,m),o.elementType=$,o.lanes=y,o;case J:return o=hr(19,c,u,m),o.elementType=J,o.lanes=y,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:A=10;break e;case M:A=9;break e;case G:A=11;break e;case C:A=14;break e;case b:A=16,d=null;break e}A=29,c=Error(r(130,o===null?"null":typeof o,"")),d=null}return u=hr(A,c,u,m),u.elementType=o,u.type=d,u.lanes=y,u}function Yo(o,u,c,d){return o=hr(7,o,d,u),o.lanes=c,o}function c1(o,u,c){return o=hr(6,o,null,u),o.lanes=c,o}function $m(o){var u=hr(18,null,null,0);return u.stateNode=o,u}function f1(o,u,c){return u=hr(4,o.children!==null?o.children:[],o.key,u),u.lanes=c,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Zm=new WeakMap;function br(o,u){if(typeof o=="object"&&o!==null){var c=Zm.get(o);return c!==void 0?c:(u={value:o,source:u,stack:El(u)},Zm.set(o,u),u)}return{value:o,source:u,stack:El(u)}}var au=[],ou=0,ph=null,Gl=0,Rr=[],Dr=0,Na=null,Si=1,Ii="";function Xi(o,u){au[ou++]=Gl,au[ou++]=ph,ph=o,Gl=u}function Jm(o,u,c){Rr[Dr++]=Si,Rr[Dr++]=Ii,Rr[Dr++]=Na,Na=o;var d=Si;o=Ii;var m=32-zt(d)-1;d&=~(1<<m),c+=1;var y=32-zt(u)+m;if(30<y){var A=m-m%5;y=(d&(1<<A)-1).toString(32),d>>=A,m-=A,Si=1<<32-zt(u)+m|c<<m|d,Ii=y+o}else Si=1<<y|c<<m|d,Ii=o}function h1(o){o.return!==null&&(Xi(o,1),Jm(o,1,0))}function d1(o){for(;o===ph;)ph=au[--ou],au[ou]=null,Gl=au[--ou],au[ou]=null;for(;o===Na;)Na=Rr[--Dr],Rr[Dr]=null,Ii=Rr[--Dr],Rr[Dr]=null,Si=Rr[--Dr],Rr[Dr]=null}function ey(o,u){Rr[Dr++]=Si,Rr[Dr++]=Ii,Rr[Dr++]=Na,Si=u.id,Ii=u.overflow,Na=o}var Cn=null,It=null,Ye=!1,Ma=null,Or=!1,p1=Error(r(519));function Pa(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ql(br(u,o)),p1}function ty(o){var u=o.stateNode,c=o.type,d=o.memoizedProps;switch(u[Kt]=o,u[vn]=d,c){case"dialog":He("cancel",u),He("close",u);break;case"iframe":case"object":case"embed":He("load",u);break;case"video":case"audio":for(c=0;c<dc.length;c++)He(dc[c],u);break;case"source":He("error",u);break;case"img":case"image":case"link":He("error",u),He("load",u);break;case"details":He("toggle",u);break;case"input":He("invalid",u),Kf(u,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",u);break;case"textarea":He("invalid",u),Sa(u,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||u.textContent===""+c||d.suppressHydrationWarning===!0||y2(u.textContent,c)?(d.popover!=null&&(He("beforetoggle",u),He("toggle",u)),d.onScroll!=null&&He("scroll",u),d.onScrollEnd!=null&&He("scrollend",u),d.onClick!=null&&(u.onclick=qr),u=!0):u=!1,u||Pa(o,!0)}function ny(o){for(Cn=o.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Cn=Cn.return}}function su(o){if(o!==Cn)return!1;if(!Ye)return ny(o),Ye=!0,!1;var u=o.tag,c;if((c=u!==3&&u!==27)&&((c=u===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||Np(o.type,o.memoizedProps)),c=!c),c&&It&&Pa(o),ny(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));It=C2(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));It=C2(o)}else u===27?(u=It,Ya(o.type)?(o=Bp,Bp=null,It=o):It=u):It=Cn?Mr(o.stateNode.nextSibling):null;return!0}function Wo(){It=Cn=null,Ye=!1}function g1(){var o=Ma;return o!==null&&(rr===null?rr=o:rr.push.apply(rr,o),Ma=null),o}function ql(o){Ma===null?Ma=[o]:Ma.push(o)}var v1=H(null),Qo=null,Ki=null;function La(o,u,c){ge(v1,u._currentValue),u._currentValue=c}function Yi(o){o._currentValue=v1.current,ue(v1)}function m1(o,u,c){for(;o!==null;){var d=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,d!==null&&(d.childLanes|=u)):d!==null&&(d.childLanes&u)!==u&&(d.childLanes|=u),o===c)break;o=o.return}}function y1(o,u,c,d){var m=o.child;for(m!==null&&(m.return=o);m!==null;){var y=m.dependencies;if(y!==null){var A=m.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=m;for(var F=0;F<u.length;F++)if(I.context===u[F]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),m1(y.return,c,o),d||(A=null);break e}y=I.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(r(341));A.lanes|=c,y=A.alternate,y!==null&&(y.lanes|=c),m1(A,c,o),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===o){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function uu(o,u,c,d){o=null;for(var m=u,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(r(387));if(A=A.memoizedProps,A!==null){var I=m.type;fr(m.pendingProps.value,A.value)||(o!==null?o.push(I):o=[I])}}else if(m===We.current){if(A=m.alternate,A===null)throw Error(r(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(o!==null?o.push(yc):o=[yc])}m=m.return}o!==null&&y1(u,o,c,d),u.flags|=262144}function gh(o){for(o=o.firstContext;o!==null;){if(!fr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function $o(o){Qo=o,Ki=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function bn(o){return ry(Qo,o)}function vh(o,u){return Qo===null&&$o(o),ry(o,u)}function ry(o,u){var c=u._currentValue;if(u={context:u,memoizedValue:c,next:null},Ki===null){if(o===null)throw Error(r(308));Ki=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Ki=Ki.next=u;return c}var QS=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(c,d){o.push(d)}};this.abort=function(){u.aborted=!0,o.forEach(function(c){return c()})}},$S=n.unstable_scheduleCallback,ZS=n.unstable_NormalPriority,Qt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _1(){return{controller:new QS,data:new Map,refCount:0}}function Xl(o){o.refCount--,o.refCount===0&&$S(ZS,function(){o.controller.abort()})}var Kl=null,E1=0,lu=0,cu=null;function JS(o,u){if(Kl===null){var c=Kl=[];E1=0,lu=wp(),cu={status:"pending",value:void 0,then:function(d){c.push(d)}}}return E1++,u.then(iy,iy),u}function iy(){if(--E1===0&&Kl!==null){cu!==null&&(cu.status="fulfilled");var o=Kl;Kl=null,lu=0,cu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function eI(o,u){var c=[],d={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return o.then(function(){d.status="fulfilled",d.value=u;for(var m=0;m<c.length;m++)(0,c[m])(u)},function(m){for(d.status="rejected",d.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),d}var ay=ne.S;ne.S=function(o,u){j_=Hn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&JS(o,u),ay!==null&&ay(o,u)};var Zo=H(null);function x1(){var o=Zo.current;return o!==null?o:Tt.pooledCache}function mh(o,u){u===null?ge(Zo,Zo.current):ge(Zo,u.pool)}function oy(){var o=x1();return o===null?null:{parent:Qt._currentValue,pool:o}}var fu=Error(r(460)),A1=Error(r(474)),yh=Error(r(542)),_h={then:function(){}};function sy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function uy(o,u,c){switch(c=o[c],c===void 0?o.push(u):c!==u&&(u.then(qr,qr),u=c),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,cy(o),o;default:if(typeof u.status=="string")u.then(qr,qr);else{if(o=Tt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(d){if(u.status==="pending"){var m=u;m.status="fulfilled",m.value=d}},function(d){if(u.status==="pending"){var m=u;m.status="rejected",m.reason=d}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,cy(o),o}throw es=u,fu}}function Jo(o){try{var u=o._init;return u(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(es=c,fu):c}}var es=null;function ly(){if(es===null)throw Error(r(459));var o=es;return es=null,o}function cy(o){if(o===fu||o===yh)throw Error(r(483))}var hu=null,Yl=0;function Eh(o){var u=Yl;return Yl+=1,hu===null&&(hu=[]),uy(hu,o,u)}function Wl(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function xh(o,u){throw u.$$typeof===_?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function fy(o){function u(q,j){if(o){var W=q.deletions;W===null?(q.deletions=[j],q.flags|=16):W.push(j)}}function c(q,j){if(!o)return null;for(;j!==null;)u(q,j),j=j.sibling;return null}function d(q){for(var j=new Map;q!==null;)q.key!==null?j.set(q.key,q):j.set(q.index,q),q=q.sibling;return j}function m(q,j){return q=qi(q,j),q.index=0,q.sibling=null,q}function y(q,j,W){return q.index=W,o?(W=q.alternate,W!==null?(W=W.index,W<j?(q.flags|=67108866,j):W):(q.flags|=67108866,j)):(q.flags|=1048576,j)}function A(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function I(q,j,W,oe){return j===null||j.tag!==6?(j=c1(W,q.mode,oe),j.return=q,j):(j=m(j,W),j.return=q,j)}function F(q,j,W,oe){var Te=W.type;return Te===S?ie(q,j,W.props.children,oe,W.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&Jo(Te)===j.type)?(j=m(j,W.props),Wl(j,W),j.return=q,j):(j=dh(W.type,W.key,W.props,null,q.mode,oe),Wl(j,W),j.return=q,j)}function Q(q,j,W,oe){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=f1(W,q.mode,oe),j.return=q,j):(j=m(j,W.children||[]),j.return=q,j)}function ie(q,j,W,oe,Te){return j===null||j.tag!==7?(j=Yo(W,q.mode,oe,Te),j.return=q,j):(j=m(j,W),j.return=q,j)}function se(q,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=c1(""+j,q.mode,W),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case E:return W=dh(j.type,j.key,j.props,null,q.mode,W),Wl(W,j),W.return=q,W;case w:return j=f1(j,q.mode,W),j.return=q,j;case b:return j=Jo(j),se(q,j,W)}if(yt(j)||z(j))return j=Yo(j,q.mode,W,null),j.return=q,j;if(typeof j.then=="function")return se(q,Eh(j),W);if(j.$$typeof===B)return se(q,vh(q,j),W);xh(q,j)}return null}function Z(q,j,W,oe){var Te=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Te!==null?null:I(q,j,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===Te?F(q,j,W,oe):null;case w:return W.key===Te?Q(q,j,W,oe):null;case b:return W=Jo(W),Z(q,j,W,oe)}if(yt(W)||z(W))return Te!==null?null:ie(q,j,W,oe,null);if(typeof W.then=="function")return Z(q,j,Eh(W),oe);if(W.$$typeof===B)return Z(q,j,vh(q,W),oe);xh(q,W)}return null}function te(q,j,W,oe,Te){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return q=q.get(W)||null,I(j,q,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case E:return q=q.get(oe.key===null?W:oe.key)||null,F(j,q,oe,Te);case w:return q=q.get(oe.key===null?W:oe.key)||null,Q(j,q,oe,Te);case b:return oe=Jo(oe),te(q,j,W,oe,Te)}if(yt(oe)||z(oe))return q=q.get(W)||null,ie(j,q,oe,Te,null);if(typeof oe.then=="function")return te(q,j,W,Eh(oe),Te);if(oe.$$typeof===B)return te(q,j,W,vh(j,oe),Te);xh(j,oe)}return null}function me(q,j,W,oe){for(var Te=null,et=null,xe=j,Be=j=0,qe=null;xe!==null&&Be<W.length;Be++){xe.index>Be?(qe=xe,xe=null):qe=xe.sibling;var tt=Z(q,xe,W[Be],oe);if(tt===null){xe===null&&(xe=qe);break}o&&xe&&tt.alternate===null&&u(q,xe),j=y(tt,j,Be),et===null?Te=tt:et.sibling=tt,et=tt,xe=qe}if(Be===W.length)return c(q,xe),Ye&&Xi(q,Be),Te;if(xe===null){for(;Be<W.length;Be++)xe=se(q,W[Be],oe),xe!==null&&(j=y(xe,j,Be),et===null?Te=xe:et.sibling=xe,et=xe);return Ye&&Xi(q,Be),Te}for(xe=d(xe);Be<W.length;Be++)qe=te(xe,q,Be,W[Be],oe),qe!==null&&(o&&qe.alternate!==null&&xe.delete(qe.key===null?Be:qe.key),j=y(qe,j,Be),et===null?Te=qe:et.sibling=qe,et=qe);return o&&xe.forEach(function(Ja){return u(q,Ja)}),Ye&&Xi(q,Be),Te}function be(q,j,W,oe){if(W==null)throw Error(r(151));for(var Te=null,et=null,xe=j,Be=j=0,qe=null,tt=W.next();xe!==null&&!tt.done;Be++,tt=W.next()){xe.index>Be?(qe=xe,xe=null):qe=xe.sibling;var Ja=Z(q,xe,tt.value,oe);if(Ja===null){xe===null&&(xe=qe);break}o&&xe&&Ja.alternate===null&&u(q,xe),j=y(Ja,j,Be),et===null?Te=Ja:et.sibling=Ja,et=Ja,xe=qe}if(tt.done)return c(q,xe),Ye&&Xi(q,Be),Te;if(xe===null){for(;!tt.done;Be++,tt=W.next())tt=se(q,tt.value,oe),tt!==null&&(j=y(tt,j,Be),et===null?Te=tt:et.sibling=tt,et=tt);return Ye&&Xi(q,Be),Te}for(xe=d(xe);!tt.done;Be++,tt=W.next())tt=te(xe,q,Be,tt.value,oe),tt!==null&&(o&&tt.alternate!==null&&xe.delete(tt.key===null?Be:tt.key),j=y(tt,j,Be),et===null?Te=tt:et.sibling=tt,et=tt);return o&&xe.forEach(function(fC){return u(q,fC)}),Ye&&Xi(q,Be),Te}function At(q,j,W,oe){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var Te=W.key;j!==null;){if(j.key===Te){if(Te=W.type,Te===S){if(j.tag===7){c(q,j.sibling),oe=m(j,W.props.children),oe.return=q,q=oe;break e}}else if(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&Jo(Te)===j.type){c(q,j.sibling),oe=m(j,W.props),Wl(oe,W),oe.return=q,q=oe;break e}c(q,j);break}else u(q,j);j=j.sibling}W.type===S?(oe=Yo(W.props.children,q.mode,oe,W.key),oe.return=q,q=oe):(oe=dh(W.type,W.key,W.props,null,q.mode,oe),Wl(oe,W),oe.return=q,q=oe)}return A(q);case w:e:{for(Te=W.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){c(q,j.sibling),oe=m(j,W.children||[]),oe.return=q,q=oe;break e}else{c(q,j);break}else u(q,j);j=j.sibling}oe=f1(W,q.mode,oe),oe.return=q,q=oe}return A(q);case b:return W=Jo(W),At(q,j,W,oe)}if(yt(W))return me(q,j,W,oe);if(z(W)){if(Te=z(W),typeof Te!="function")throw Error(r(150));return W=Te.call(W),be(q,j,W,oe)}if(typeof W.then=="function")return At(q,j,Eh(W),oe);if(W.$$typeof===B)return At(q,j,vh(q,W),oe);xh(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(c(q,j.sibling),oe=m(j,W),oe.return=q,q=oe):(c(q,j),oe=c1(W,q.mode,oe),oe.return=q,q=oe),A(q)):c(q,j)}return function(q,j,W,oe){try{Yl=0;var Te=At(q,j,W,oe);return hu=null,Te}catch(xe){if(xe===fu||xe===yh)throw xe;var et=hr(29,xe,null,q.mode);return et.lanes=oe,et.return=q,et}}}var ts=fy(!0),hy=fy(!1),ka=!1;function w1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T1(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ba(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Va(o,u,c){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(it&2)!==0){var m=d.pending;return m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u,u=hh(o),Wm(o,null,c),u}return fh(o,d,u,c),hh(o)}function Ql(o,u,c){if(u=u.updateQueue,u!==null&&(u=u.shared,(c&4194048)!==0)){var d=u.lanes;d&=o.pendingLanes,c|=d,u.lanes=c,wl(o,c)}}function S1(o,u){var c=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=A:y=y.next=A,c=c.next}while(c!==null);y===null?m=y=u:y=y.next=u}else m=y=u;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=u}var I1=!1;function $l(){if(I1){var o=cu;if(o!==null)throw o}}function Zl(o,u,c,d){I1=!1;var m=o.updateQueue;ka=!1;var y=m.firstBaseUpdate,A=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var F=I,Q=F.next;F.next=null,A===null?y=Q:A.next=Q,A=F;var ie=o.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==A&&(I===null?ie.firstBaseUpdate=Q:I.next=Q,ie.lastBaseUpdate=F))}if(y!==null){var se=m.baseState;A=0,ie=Q=F=null,I=y;do{var Z=I.lane&-536870913,te=Z!==I.lane;if(te?(Ge&Z)===Z:(d&Z)===Z){Z!==0&&Z===lu&&(I1=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=o,be=I;Z=u;var At=c;switch(be.tag){case 1:if(me=be.payload,typeof me=="function"){se=me.call(At,se,Z);break e}se=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=be.payload,Z=typeof me=="function"?me.call(At,se,Z):me,Z==null)break e;se=v({},se,Z);break e;case 2:ka=!0}}Z=I.callback,Z!==null&&(o.flags|=64,te&&(o.flags|=8192),te=m.callbacks,te===null?m.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(Q=ie=te,F=se):ie=ie.next=te,A|=Z;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;te=I,I=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);ie===null&&(F=se),m.baseState=F,m.firstBaseUpdate=Q,m.lastBaseUpdate=ie,y===null&&(m.shared.lanes=0),Ha|=A,o.lanes=A,o.memoizedState=se}}function dy(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function py(o,u){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)dy(c[o],u)}var du=H(null),Ah=H(0);function gy(o,u){o=ra,ge(Ah,o),ge(du,u),ra=o|u.baseLanes}function C1(){ge(Ah,ra),ge(du,du.current)}function b1(){ra=Ah.current,ue(du),ue(Ah)}var dr=H(null),Nr=null;function Fa(o){var u=o.alternate;ge(Ht,Ht.current&1),ge(dr,o),Nr===null&&(u===null||du.current!==null||u.memoizedState!==null)&&(Nr=o)}function R1(o){ge(Ht,Ht.current),ge(dr,o),Nr===null&&(Nr=o)}function vy(o){o.tag===22?(ge(Ht,Ht.current),ge(dr,o),Nr===null&&(Nr=o)):Ua()}function Ua(){ge(Ht,Ht.current),ge(dr,dr.current)}function pr(o){ue(dr),Nr===o&&(Nr=null),ue(Ht)}var Ht=H(0);function wh(o){for(var u=o;u!==null;){if(u.tag===13){var c=u.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Lp(c)||kp(c)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Wi=0,Le=null,Et=null,$t=null,Th=!1,pu=!1,ns=!1,Sh=0,Jl=0,gu=null,tI=0;function Vt(){throw Error(r(321))}function D1(o,u){if(u===null)return!1;for(var c=0;c<u.length&&c<o.length;c++)if(!fr(o[c],u[c]))return!1;return!0}function O1(o,u,c,d,m,y){return Wi=y,Le=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ne.H=o===null||o.memoizedState===null?Jy:X1,ns=!1,y=c(d,m),ns=!1,pu&&(y=yy(u,c,d,m)),my(o),y}function my(o){ne.H=nc;var u=Et!==null&&Et.next!==null;if(Wi=0,$t=Et=Le=null,Th=!1,Jl=0,gu=null,u)throw Error(r(300));o===null||Zt||(o=o.dependencies,o!==null&&gh(o)&&(Zt=!0))}function yy(o,u,c,d){Le=o;var m=0;do{if(pu&&(gu=null),Jl=0,pu=!1,25<=m)throw Error(r(301));if(m+=1,$t=Et=null,o.updateQueue!=null){var y=o.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ne.H=e_,y=u(c,d)}while(pu);return y}function nI(){var o=ne.H,u=o.useState()[0];return u=typeof u.then=="function"?ec(u):u,o=o.useState()[0],(Et!==null?Et.memoizedState:null)!==o&&(Le.flags|=1024),u}function N1(){var o=Sh!==0;return Sh=0,o}function M1(o,u,c){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~c}function P1(o){if(Th){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Th=!1}Wi=0,$t=Et=Le=null,pu=!1,Jl=Sh=0,gu=null}function qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Le.memoizedState=$t=o:$t=$t.next=o,$t}function Gt(){if(Et===null){var o=Le.alternate;o=o!==null?o.memoizedState:null}else o=Et.next;var u=$t===null?Le.memoizedState:$t.next;if(u!==null)$t=u,Et=o;else{if(o===null)throw Le.alternate===null?Error(r(467)):Error(r(310));Et=o,o={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},$t===null?Le.memoizedState=$t=o:$t=$t.next=o}return $t}function Ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ec(o){var u=Jl;return Jl+=1,gu===null&&(gu=[]),o=uy(gu,o,u),u=Le,($t===null?u.memoizedState:$t.next)===null&&(u=u.alternate,ne.H=u===null||u.memoizedState===null?Jy:X1),o}function Ch(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ec(o);if(o.$$typeof===B)return bn(o)}throw Error(r(438,String(o)))}function L1(o){var u=null,c=Le.updateQueue;if(c!==null&&(u=c.memoCache),u==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(u={data:d.data.map(function(m){return m.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),c===null&&(c=Ih(),Le.updateQueue=c),c.memoCache=u,c=u.data[u.index],c===void 0)for(c=u.data[u.index]=Array(o),d=0;d<o;d++)c[d]=k;return u.index++,c}function Qi(o,u){return typeof u=="function"?u(o):u}function bh(o){var u=Gt();return k1(u,Et,o)}function k1(o,u,c){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var m=o.baseQueue,y=d.pending;if(y!==null){if(m!==null){var A=m.next;m.next=y.next,y.next=A}u.baseQueue=m=y,d.pending=null}if(y=o.baseState,m===null)o.memoizedState=y;else{u=m.next;var I=A=null,F=null,Q=u,ie=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Ge&se)===se:(Wi&se)===se){var Z=Q.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===lu&&(ie=!0);else if((Wi&Z)===Z){Q=Q.next,Z===lu&&(ie=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=se,A=y):F=F.next=se,Le.lanes|=Z,Ha|=Z;se=Q.action,ns&&c(y,se),y=Q.hasEagerState?Q.eagerState:c(y,se)}else Z={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=Z,A=y):F=F.next=Z,Le.lanes|=se,Ha|=se;Q=Q.next}while(Q!==null&&Q!==u);if(F===null?A=y:F.next=I,!fr(y,o.memoizedState)&&(Zt=!0,ie&&(c=cu,c!==null)))throw c;o.memoizedState=y,o.baseState=A,o.baseQueue=F,d.lastRenderedState=y}return m===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function B1(o){var u=Gt(),c=u.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var d=c.dispatch,m=c.pending,y=u.memoizedState;if(m!==null){c.pending=null;var A=m=m.next;do y=o(y,A.action),A=A.next;while(A!==m);fr(y,u.memoizedState)||(Zt=!0),u.memoizedState=y,u.baseQueue===null&&(u.baseState=y),c.lastRenderedState=y}return[y,d]}function _y(o,u,c){var d=Le,m=Gt(),y=Ye;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=u();var A=!fr((Et||m).memoizedState,c);if(A&&(m.memoizedState=c,Zt=!0),m=m.queue,U1(Ay.bind(null,d,m,o),[o]),m.getSnapshot!==u||A||$t!==null&&$t.memoizedState.tag&1){if(d.flags|=2048,vu(9,{destroy:void 0},xy.bind(null,d,m,c,u),null),Tt===null)throw Error(r(349));y||(Wi&127)!==0||Ey(d,u,c)}return c}function Ey(o,u,c){o.flags|=16384,o={getSnapshot:u,value:c},u=Le.updateQueue,u===null?(u=Ih(),Le.updateQueue=u,u.stores=[o]):(c=u.stores,c===null?u.stores=[o]:c.push(o))}function xy(o,u,c,d){u.value=c,u.getSnapshot=d,wy(u)&&Ty(o)}function Ay(o,u,c){return c(function(){wy(u)&&Ty(o)})}function wy(o){var u=o.getSnapshot;o=o.value;try{var c=u();return!fr(o,c)}catch{return!0}}function Ty(o){var u=Ko(o,2);u!==null&&ir(u,o,2)}function V1(o){var u=qn();if(typeof o=="function"){var c=o;if(o=c(),ns){Ar(!0);try{c()}finally{Ar(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:o},u}function Sy(o,u,c,d){return o.baseState=c,k1(o,Et,typeof d=="function"?d:Qi)}function rI(o,u,c,d,m){if(Oh(o))throw Error(r(485));if(o=u.action,o!==null){var y={payload:m,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};ne.T!==null?c(!0):y.isTransition=!1,d(y),c=u.pending,c===null?(y.next=u.pending=y,Iy(u,y)):(y.next=c.next,u.pending=c.next=y)}}function Iy(o,u){var c=u.action,d=u.payload,m=o.state;if(u.isTransition){var y=ne.T,A={};ne.T=A;try{var I=c(m,d),F=ne.S;F!==null&&F(A,I),Cy(o,u,I)}catch(Q){F1(o,u,Q)}finally{y!==null&&A.types!==null&&(y.types=A.types),ne.T=y}}else try{y=c(m,d),Cy(o,u,y)}catch(Q){F1(o,u,Q)}}function Cy(o,u,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){by(o,u,d)},function(d){return F1(o,u,d)}):by(o,u,c)}function by(o,u,c){u.status="fulfilled",u.value=c,Ry(u),o.state=c,u=o.pending,u!==null&&(c=u.next,c===u?o.pending=null:(c=c.next,u.next=c,Iy(o,c)))}function F1(o,u,c){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do u.status="rejected",u.reason=c,Ry(u),u=u.next;while(u!==d)}o.action=null}function Ry(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Dy(o,u){return u}function Oy(o,u){if(Ye){var c=Tt.formState;if(c!==null){e:{var d=Le;if(Ye){if(It){t:{for(var m=It,y=Or;m.nodeType!==8;){if(!y){m=null;break t}if(m=Mr(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){It=Mr(m.nextSibling),d=m.data==="F!";break e}}Pa(d)}d=!1}d&&(u=c[0])}}return c=qn(),c.memoizedState=c.baseState=u,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dy,lastRenderedState:u},c.queue=d,c=Qy.bind(null,Le,d),d.dispatch=c,d=V1(!1),y=q1.bind(null,Le,!1,d.queue),d=qn(),m={state:u,dispatch:null,action:o,pending:null},d.queue=m,c=rI.bind(null,Le,m,y,c),m.dispatch=c,d.memoizedState=o,[u,c,!1]}function Ny(o){var u=Gt();return My(u,Et,o)}function My(o,u,c){if(u=k1(o,u,Dy)[0],o=bh(Qi)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var d=ec(u)}catch(A){throw A===fu?yh:A}else d=u;u=Gt();var m=u.queue,y=m.dispatch;return c!==u.memoizedState&&(Le.flags|=2048,vu(9,{destroy:void 0},iI.bind(null,m,c),null)),[d,y,o]}function iI(o,u){o.action=u}function Py(o){var u=Gt(),c=Et;if(c!==null)return My(u,c,o);Gt(),u=u.memoizedState,c=Gt();var d=c.queue.dispatch;return c.memoizedState=o,[u,d,!1]}function vu(o,u,c,d){return o={tag:o,create:c,deps:d,inst:u,next:null},u=Le.updateQueue,u===null&&(u=Ih(),Le.updateQueue=u),c=u.lastEffect,c===null?u.lastEffect=o.next=o:(d=c.next,c.next=o,o.next=d,u.lastEffect=o),o}function Ly(){return Gt().memoizedState}function Rh(o,u,c,d){var m=qn();Le.flags|=o,m.memoizedState=vu(1|u,{destroy:void 0},c,d===void 0?null:d)}function Dh(o,u,c,d){var m=Gt();d=d===void 0?null:d;var y=m.memoizedState.inst;Et!==null&&d!==null&&D1(d,Et.memoizedState.deps)?m.memoizedState=vu(u,y,c,d):(Le.flags|=o,m.memoizedState=vu(1|u,y,c,d))}function ky(o,u){Rh(8390656,8,o,u)}function U1(o,u){Dh(2048,8,o,u)}function aI(o){Le.flags|=4;var u=Le.updateQueue;if(u===null)u=Ih(),Le.updateQueue=u,u.events=[o];else{var c=u.events;c===null?u.events=[o]:c.push(o)}}function By(o){var u=Gt().memoizedState;return aI({ref:u,nextImpl:o}),function(){if((it&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function Vy(o,u){return Dh(4,2,o,u)}function Fy(o,u){return Dh(4,4,o,u)}function Uy(o,u){if(typeof u=="function"){o=o();var c=u(o);return function(){typeof c=="function"?c():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function zy(o,u,c){c=c!=null?c.concat([o]):null,Dh(4,4,Uy.bind(null,u,o),c)}function z1(){}function jy(o,u){var c=Gt();u=u===void 0?null:u;var d=c.memoizedState;return u!==null&&D1(u,d[1])?d[0]:(c.memoizedState=[o,u],o)}function Hy(o,u){var c=Gt();u=u===void 0?null:u;var d=c.memoizedState;if(u!==null&&D1(u,d[1]))return d[0];if(d=o(),ns){Ar(!0);try{o()}finally{Ar(!1)}}return c.memoizedState=[d,u],d}function j1(o,u,c){return c===void 0||(Wi&1073741824)!==0&&(Ge&261930)===0?o.memoizedState=u:(o.memoizedState=c,o=G_(),Le.lanes|=o,Ha|=o,c)}function Gy(o,u,c,d){return fr(c,u)?c:du.current!==null?(o=j1(o,c,d),fr(o,u)||(Zt=!0),o):(Wi&42)===0||(Wi&1073741824)!==0&&(Ge&261930)===0?(Zt=!0,o.memoizedState=c):(o=G_(),Le.lanes|=o,Ha|=o,u)}function qy(o,u,c,d,m){var y=he.p;he.p=y!==0&&8>y?y:8;var A=ne.T,I={};ne.T=I,q1(o,!1,u,c);try{var F=m(),Q=ne.S;if(Q!==null&&Q(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ie=eI(F,d);tc(o,u,ie,mr(o))}else tc(o,u,d,mr(o))}catch(se){tc(o,u,{then:function(){},status:"rejected",reason:se},mr())}finally{he.p=y,A!==null&&I.types!==null&&(A.types=I.types),ne.T=A}}function oI(){}function H1(o,u,c,d){if(o.tag!==5)throw Error(r(476));var m=Xy(o).queue;qy(o,m,u,we,c===null?oI:function(){return Ky(o),c(d)})}function Xy(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:we},next:null};var c={};return u.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:c},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Ky(o){var u=Xy(o);u.next===null&&(u=o.alternate.memoizedState),tc(o,u.next.queue,{},mr())}function G1(){return bn(yc)}function Yy(){return Gt().memoizedState}function Wy(){return Gt().memoizedState}function sI(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var c=mr();o=Ba(c);var d=Va(u,o,c);d!==null&&(ir(d,u,c),Ql(d,u,c)),u={cache:_1()},o.payload=u;return}u=u.return}}function uI(o,u,c){var d=mr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Oh(o)?$y(u,c):(c=u1(o,u,c,d),c!==null&&(ir(c,o,d),Zy(c,u,d)))}function Qy(o,u,c){var d=mr();tc(o,u,c,d)}function tc(o,u,c,d){var m={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Oh(o))$y(u,m);else{var y=o.alternate;if(o.lanes===0&&(y===null||y.lanes===0)&&(y=u.lastRenderedReducer,y!==null))try{var A=u.lastRenderedState,I=y(A,c);if(m.hasEagerState=!0,m.eagerState=I,fr(I,A))return fh(o,u,m,0),Tt===null&&ch(),!1}catch{}if(c=u1(o,u,m,d),c!==null)return ir(c,o,d),Zy(c,u,d),!0}return!1}function q1(o,u,c,d){if(d={lane:2,revertLane:wp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Oh(o)){if(u)throw Error(r(479))}else u=u1(o,c,d,2),u!==null&&ir(u,o,2)}function Oh(o){var u=o.alternate;return o===Le||u!==null&&u===Le}function $y(o,u){pu=Th=!0;var c=o.pending;c===null?u.next=u:(u.next=c.next,c.next=u),o.pending=u}function Zy(o,u,c){if((c&4194048)!==0){var d=u.lanes;d&=o.pendingLanes,c|=d,u.lanes=c,wl(o,c)}}var nc={readContext:bn,use:Ch,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};nc.useEffectEvent=Vt;var Jy={readContext:bn,use:Ch,useCallback:function(o,u){return qn().memoizedState=[o,u===void 0?null:u],o},useContext:bn,useEffect:ky,useImperativeHandle:function(o,u,c){c=c!=null?c.concat([o]):null,Rh(4194308,4,Uy.bind(null,u,o),c)},useLayoutEffect:function(o,u){return Rh(4194308,4,o,u)},useInsertionEffect:function(o,u){Rh(4,2,o,u)},useMemo:function(o,u){var c=qn();u=u===void 0?null:u;var d=o();if(ns){Ar(!0);try{o()}finally{Ar(!1)}}return c.memoizedState=[d,u],d},useReducer:function(o,u,c){var d=qn();if(c!==void 0){var m=c(u);if(ns){Ar(!0);try{c(u)}finally{Ar(!1)}}}else m=u;return d.memoizedState=d.baseState=m,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:m},d.queue=o,o=o.dispatch=uI.bind(null,Le,o),[d.memoizedState,o]},useRef:function(o){var u=qn();return o={current:o},u.memoizedState=o},useState:function(o){o=V1(o);var u=o.queue,c=Qy.bind(null,Le,u);return u.dispatch=c,[o.memoizedState,c]},useDebugValue:z1,useDeferredValue:function(o,u){var c=qn();return j1(c,o,u)},useTransition:function(){var o=V1(!1);return o=qy.bind(null,Le,o.queue,!0,!1),qn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,c){var d=Le,m=qn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=u(),Tt===null)throw Error(r(349));(Ge&127)!==0||Ey(d,u,c)}m.memoizedState=c;var y={value:c,getSnapshot:u};return m.queue=y,ky(Ay.bind(null,d,y,o),[o]),d.flags|=2048,vu(9,{destroy:void 0},xy.bind(null,d,y,c,u),null),c},useId:function(){var o=qn(),u=Tt.identifierPrefix;if(Ye){var c=Ii,d=Si;c=(d&~(1<<32-zt(d)-1)).toString(32)+c,u="_"+u+"R_"+c,c=Sh++,0<c&&(u+="H"+c.toString(32)),u+="_"}else c=tI++,u="_"+u+"r_"+c.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:G1,useFormState:Oy,useActionState:Oy,useOptimistic:function(o){var u=qn();u.memoizedState=u.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=c,u=q1.bind(null,Le,!0,c),c.dispatch=u,[o,u]},useMemoCache:L1,useCacheRefresh:function(){return qn().memoizedState=sI.bind(null,Le)},useEffectEvent:function(o){var u=qn(),c={impl:o};return u.memoizedState=c,function(){if((it&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},X1={readContext:bn,use:Ch,useCallback:jy,useContext:bn,useEffect:U1,useImperativeHandle:zy,useInsertionEffect:Vy,useLayoutEffect:Fy,useMemo:Hy,useReducer:bh,useRef:Ly,useState:function(){return bh(Qi)},useDebugValue:z1,useDeferredValue:function(o,u){var c=Gt();return Gy(c,Et.memoizedState,o,u)},useTransition:function(){var o=bh(Qi)[0],u=Gt().memoizedState;return[typeof o=="boolean"?o:ec(o),u]},useSyncExternalStore:_y,useId:Yy,useHostTransitionStatus:G1,useFormState:Ny,useActionState:Ny,useOptimistic:function(o,u){var c=Gt();return Sy(c,Et,o,u)},useMemoCache:L1,useCacheRefresh:Wy};X1.useEffectEvent=By;var e_={readContext:bn,use:Ch,useCallback:jy,useContext:bn,useEffect:U1,useImperativeHandle:zy,useInsertionEffect:Vy,useLayoutEffect:Fy,useMemo:Hy,useReducer:B1,useRef:Ly,useState:function(){return B1(Qi)},useDebugValue:z1,useDeferredValue:function(o,u){var c=Gt();return Et===null?j1(c,o,u):Gy(c,Et.memoizedState,o,u)},useTransition:function(){var o=B1(Qi)[0],u=Gt().memoizedState;return[typeof o=="boolean"?o:ec(o),u]},useSyncExternalStore:_y,useId:Yy,useHostTransitionStatus:G1,useFormState:Py,useActionState:Py,useOptimistic:function(o,u){var c=Gt();return Et!==null?Sy(c,Et,o,u):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:L1,useCacheRefresh:Wy};e_.useEffectEvent=By;function K1(o,u,c,d){u=o.memoizedState,c=c(d,u),c=c==null?u:v({},u,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Y1={enqueueSetState:function(o,u,c){o=o._reactInternals;var d=mr(),m=Ba(d);m.payload=u,c!=null&&(m.callback=c),u=Va(o,m,d),u!==null&&(ir(u,o,d),Ql(u,o,d))},enqueueReplaceState:function(o,u,c){o=o._reactInternals;var d=mr(),m=Ba(d);m.tag=1,m.payload=u,c!=null&&(m.callback=c),u=Va(o,m,d),u!==null&&(ir(u,o,d),Ql(u,o,d))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var c=mr(),d=Ba(c);d.tag=2,u!=null&&(d.callback=u),u=Va(o,d,c),u!==null&&(ir(u,o,c),Ql(u,o,c))}};function t_(o,u,c,d,m,y,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,y,A):u.prototype&&u.prototype.isPureReactComponent?!jl(c,d)||!jl(m,y):!0}function n_(o,u,c,d){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(c,d),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(c,d),u.state!==o&&Y1.enqueueReplaceState(u,u.state,null)}function rs(o,u){var c=u;if("ref"in u){c={};for(var d in u)d!=="ref"&&(c[d]=u[d])}if(o=o.defaultProps){c===u&&(c=v({},c));for(var m in o)c[m]===void 0&&(c[m]=o[m])}return c}function r_(o){lh(o)}function i_(o){console.error(o)}function a_(o){lh(o)}function Nh(o,u){try{var c=o.onUncaughtError;c(u.value,{componentStack:u.stack})}catch(d){setTimeout(function(){throw d})}}function o_(o,u,c){try{var d=o.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function W1(o,u,c){return c=Ba(c),c.tag=3,c.payload={element:null},c.callback=function(){Nh(o,u)},c}function s_(o){return o=Ba(o),o.tag=3,o}function u_(o,u,c,d){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=d.value;o.payload=function(){return m(y)},o.callback=function(){o_(u,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){o_(u,c,d),typeof m!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function lI(o,u,c,d,m){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(u=c.alternate,u!==null&&uu(u,c,m,!0),c=dr.current,c!==null){switch(c.tag){case 31:case 13:return Nr===null?Gh():c.alternate===null&&Ft===0&&(Ft=3),c.flags&=-257,c.flags|=65536,c.lanes=m,d===_h?c.flags|=16384:(u=c.updateQueue,u===null?c.updateQueue=new Set([d]):u.add(d),Ep(o,d,m)),!1;case 22:return c.flags|=65536,d===_h?c.flags|=16384:(u=c.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=u):(c=u.retryQueue,c===null?u.retryQueue=new Set([d]):c.add(d)),Ep(o,d,m)),!1}throw Error(r(435,c.tag))}return Ep(o,d,m),Gh(),!1}if(Ye)return u=dr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=m,d!==p1&&(o=Error(r(422),{cause:d}),ql(br(o,c)))):(d!==p1&&(u=Error(r(423),{cause:d}),ql(br(u,c))),o=o.current.alternate,o.flags|=65536,m&=-m,o.lanes|=m,d=br(d,c),m=W1(o.stateNode,d,m),S1(o,m),Ft!==4&&(Ft=2)),!1;var y=Error(r(520),{cause:d});if(y=br(y,c),cc===null?cc=[y]:cc.push(y),Ft!==4&&(Ft=2),u===null)return!0;d=br(d,c),c=u;do{switch(c.tag){case 3:return c.flags|=65536,o=m&-m,c.lanes|=o,o=W1(c.stateNode,d,o),S1(c,o),!1;case 1:if(u=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ga===null||!Ga.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=s_(m),u_(m,o,c,d),S1(c,m),!1}c=c.return}while(c!==null);return!1}var Q1=Error(r(461)),Zt=!1;function Rn(o,u,c,d){u.child=o===null?hy(u,null,c,d):ts(u,o.child,c,d)}function l_(o,u,c,d,m){c=c.render;var y=u.ref;if("ref"in d){var A={};for(var I in d)I!=="ref"&&(A[I]=d[I])}else A=d;return $o(u),d=O1(o,u,c,A,y,m),I=N1(),o!==null&&!Zt?(M1(o,u,m),$i(o,u,m)):(Ye&&I&&h1(u),u.flags|=1,Rn(o,u,d,m),u.child)}function c_(o,u,c,d,m){if(o===null){var y=c.type;return typeof y=="function"&&!l1(y)&&y.defaultProps===void 0&&c.compare===null?(u.tag=15,u.type=y,f_(o,u,y,d,m)):(o=dh(c.type,null,d,u,u.mode,m),o.ref=u.ref,o.return=u,u.child=o)}if(y=o.child,!ip(o,m)){var A=y.memoizedProps;if(c=c.compare,c=c!==null?c:jl,c(A,d)&&o.ref===u.ref)return $i(o,u,m)}return u.flags|=1,o=qi(y,d),o.ref=u.ref,o.return=u,u.child=o}function f_(o,u,c,d,m){if(o!==null){var y=o.memoizedProps;if(jl(y,d)&&o.ref===u.ref)if(Zt=!1,u.pendingProps=d=y,ip(o,m))(o.flags&131072)!==0&&(Zt=!0);else return u.lanes=o.lanes,$i(o,u,m)}return $1(o,u,c,d,m)}function h_(o,u,c,d){var m=d.children,y=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((u.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,o!==null){for(d=u.child=o.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~y}else d=0,u.child=null;return d_(o,u,y,c,d)}if((c&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&mh(u,y!==null?y.cachePool:null),y!==null?gy(u,y):C1(),vy(u);else return d=u.lanes=536870912,d_(o,u,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(mh(u,y.cachePool),gy(u,y),Ua(),u.memoizedState=null):(o!==null&&mh(u,null),C1(),Ua());return Rn(o,u,m,c),u.child}function rc(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function d_(o,u,c,d,m){var y=x1();return y=y===null?null:{parent:Qt._currentValue,pool:y},u.memoizedState={baseLanes:c,cachePool:y},o!==null&&mh(u,null),C1(),vy(u),o!==null&&uu(o,u,d,!0),u.childLanes=m,null}function Mh(o,u){return u=Lh({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function p_(o,u,c){return ts(u,o.child,null,c),o=Mh(u,u.pendingProps),o.flags|=2,pr(u),u.memoizedState=null,o}function cI(o,u,c){var d=u.pendingProps,m=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Ye){if(d.mode==="hidden")return o=Mh(u,d),u.lanes=536870912,rc(null,o);if(R1(u),(o=It)?(o=I2(o,Or),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Na!==null?{id:Si,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},c=$m(o),c.return=u,u.child=c,Cn=u,It=null)):o=null,o===null)throw Pa(u);return u.lanes=536870912,null}return Mh(u,d)}var y=o.memoizedState;if(y!==null){var A=y.dehydrated;if(R1(u),m)if(u.flags&256)u.flags&=-257,u=p_(o,u,c);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if(Zt||uu(o,u,c,!1),m=(c&o.childLanes)!==0,Zt||m){if(d=Tt,d!==null&&(A=Tl(d,c),A!==0&&A!==y.retryLane))throw y.retryLane=A,Ko(o,A),ir(d,o,A),Q1;Gh(),u=p_(o,u,c)}else o=y.treeContext,It=Mr(A.nextSibling),Cn=u,Ye=!0,Ma=null,Or=!1,o!==null&&ey(u,o),u=Mh(u,d),u.flags|=4096;return u}return o=qi(o.child,{mode:d.mode,children:d.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Ph(o,u){var c=u.ref;if(c===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(u.flags|=4194816)}}function $1(o,u,c,d,m){return $o(u),c=O1(o,u,c,d,void 0,m),d=N1(),o!==null&&!Zt?(M1(o,u,m),$i(o,u,m)):(Ye&&d&&h1(u),u.flags|=1,Rn(o,u,c,m),u.child)}function g_(o,u,c,d,m,y){return $o(u),u.updateQueue=null,c=yy(u,d,c,m),my(o),d=N1(),o!==null&&!Zt?(M1(o,u,y),$i(o,u,y)):(Ye&&d&&h1(u),u.flags|=1,Rn(o,u,c,y),u.child)}function v_(o,u,c,d,m){if($o(u),u.stateNode===null){var y=iu,A=c.contextType;typeof A=="object"&&A!==null&&(y=bn(A)),y=new c(d,y),u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Y1,u.stateNode=y,y._reactInternals=u,y=u.stateNode,y.props=d,y.state=u.memoizedState,y.refs={},w1(u),A=c.contextType,y.context=typeof A=="object"&&A!==null?bn(A):iu,y.state=u.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(K1(u,c,A,d),y.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&Y1.enqueueReplaceState(y,y.state,null),Zl(u,d,y,m),$l(),y.state=u.memoizedState),typeof y.componentDidMount=="function"&&(u.flags|=4194308),d=!0}else if(o===null){y=u.stateNode;var I=u.memoizedProps,F=rs(c,I);y.props=F;var Q=y.context,ie=c.contextType;A=iu,typeof ie=="object"&&ie!==null&&(A=bn(ie));var se=c.getDerivedStateFromProps;ie=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=u.pendingProps!==I,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||Q!==A)&&n_(u,y,d,A),ka=!1;var Z=u.memoizedState;y.state=Z,Zl(u,d,y,m),$l(),Q=u.memoizedState,I||Z!==Q||ka?(typeof se=="function"&&(K1(u,c,se,d),Q=u.memoizedState),(F=ka||t_(u,c,F,d,Z,Q,A))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(u.flags|=4194308)):(typeof y.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=d,u.memoizedState=Q),y.props=d,y.state=Q,y.context=A,d=F):(typeof y.componentDidMount=="function"&&(u.flags|=4194308),d=!1)}else{y=u.stateNode,T1(o,u),A=u.memoizedProps,ie=rs(c,A),y.props=ie,se=u.pendingProps,Z=y.context,Q=c.contextType,F=iu,typeof Q=="object"&&Q!==null&&(F=bn(Q)),I=c.getDerivedStateFromProps,(Q=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==se||Z!==F)&&n_(u,y,d,F),ka=!1,Z=u.memoizedState,y.state=Z,Zl(u,d,y,m),$l();var te=u.memoizedState;A!==se||Z!==te||ka||o!==null&&o.dependencies!==null&&gh(o.dependencies)?(typeof I=="function"&&(K1(u,c,I,d),te=u.memoizedState),(ie=ka||t_(u,c,ie,d,Z,te,F)||o!==null&&o.dependencies!==null&&gh(o.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,te,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,te,F)),typeof y.componentDidUpdate=="function"&&(u.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=1024),u.memoizedProps=d,u.memoizedState=te),y.props=d,y.state=te,y.context=F,d=ie):(typeof y.componentDidUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=1024),d=!1)}return y=d,Ph(o,u),d=(u.flags&128)!==0,y||d?(y=u.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),u.flags|=1,o!==null&&d?(u.child=ts(u,o.child,null,m),u.child=ts(u,null,c,m)):Rn(o,u,c,m),u.memoizedState=y.state,o=u.child):o=$i(o,u,m),o}function m_(o,u,c,d){return Wo(),u.flags|=256,Rn(o,u,c,d),u.child}var Z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function J1(o){return{baseLanes:o,cachePool:oy()}}function ep(o,u,c){return o=o!==null?o.childLanes&~c:0,u&&(o|=vr),o}function y_(o,u,c){var d=u.pendingProps,m=!1,y=(u.flags&128)!==0,A;if((A=y)||(A=o!==null&&o.memoizedState===null?!1:(Ht.current&2)!==0),A&&(m=!0,u.flags&=-129),A=(u.flags&32)!==0,u.flags&=-33,o===null){if(Ye){if(m?Fa(u):Ua(),(o=It)?(o=I2(o,Or),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Na!==null?{id:Si,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},c=$m(o),c.return=u,u.child=c,Cn=u,It=null)):o=null,o===null)throw Pa(u);return kp(o)?u.lanes=32:u.lanes=536870912,null}var I=d.children;return d=d.fallback,m?(Ua(),m=u.mode,I=Lh({mode:"hidden",children:I},m),d=Yo(d,m,c,null),I.return=u,d.return=u,I.sibling=d,u.child=I,d=u.child,d.memoizedState=J1(c),d.childLanes=ep(o,A,c),u.memoizedState=Z1,rc(null,d)):(Fa(u),tp(u,I))}var F=o.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(y)u.flags&256?(Fa(u),u.flags&=-257,u=np(o,u,c)):u.memoizedState!==null?(Ua(),u.child=o.child,u.flags|=128,u=null):(Ua(),I=d.fallback,m=u.mode,d=Lh({mode:"visible",children:d.children},m),I=Yo(I,m,c,null),I.flags|=2,d.return=u,I.return=u,d.sibling=I,u.child=d,ts(u,o.child,null,c),d=u.child,d.memoizedState=J1(c),d.childLanes=ep(o,A,c),u.memoizedState=Z1,u=rc(null,d));else if(Fa(u),kp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Q=A.dgst;A=Q,d=Error(r(419)),d.stack="",d.digest=A,ql({value:d,source:null,stack:null}),u=np(o,u,c)}else if(Zt||uu(o,u,c,!1),A=(c&o.childLanes)!==0,Zt||A){if(A=Tt,A!==null&&(d=Tl(A,c),d!==0&&d!==F.retryLane))throw F.retryLane=d,Ko(o,d),ir(A,o,d),Q1;Lp(I)||Gh(),u=np(o,u,c)}else Lp(I)?(u.flags|=192,u.child=o.child,u=null):(o=F.treeContext,It=Mr(I.nextSibling),Cn=u,Ye=!0,Ma=null,Or=!1,o!==null&&ey(u,o),u=tp(u,d.children),u.flags|=4096);return u}return m?(Ua(),I=d.fallback,m=u.mode,F=o.child,Q=F.sibling,d=qi(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,Q!==null?I=qi(Q,I):(I=Yo(I,m,c,null),I.flags|=2),I.return=u,d.return=u,d.sibling=I,u.child=d,rc(null,d),d=u.child,I=o.child.memoizedState,I===null?I=J1(c):(m=I.cachePool,m!==null?(F=Qt._currentValue,m=m.parent!==F?{parent:F,pool:F}:m):m=oy(),I={baseLanes:I.baseLanes|c,cachePool:m}),d.memoizedState=I,d.childLanes=ep(o,A,c),u.memoizedState=Z1,rc(o.child,d)):(Fa(u),c=o.child,o=c.sibling,c=qi(c,{mode:"visible",children:d.children}),c.return=u,c.sibling=null,o!==null&&(A=u.deletions,A===null?(u.deletions=[o],u.flags|=16):A.push(o)),u.child=c,u.memoizedState=null,c)}function tp(o,u){return u=Lh({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Lh(o,u){return o=hr(22,o,null,u),o.lanes=0,o}function np(o,u,c){return ts(u,o.child,null,c),o=tp(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function __(o,u,c){o.lanes|=u;var d=o.alternate;d!==null&&(d.lanes|=u),m1(o.return,u,c)}function rp(o,u,c,d,m,y){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m,treeForkCount:y}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=m,A.treeForkCount=y)}function E_(o,u,c){var d=u.pendingProps,m=d.revealOrder,y=d.tail;d=d.children;var A=Ht.current,I=(A&2)!==0;if(I?(A=A&1|2,u.flags|=128):A&=1,ge(Ht,A),Rn(o,u,d,c),d=Ye?Gl:0,!I&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&__(o,c,u);else if(o.tag===19)__(o,c,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(m){case"forwards":for(c=u.child,m=null;c!==null;)o=c.alternate,o!==null&&wh(o)===null&&(m=c),c=c.sibling;c=m,c===null?(m=u.child,u.child=null):(m=c.sibling,c.sibling=null),rp(u,!1,m,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,m=u.child,u.child=null;m!==null;){if(o=m.alternate,o!==null&&wh(o)===null){u.child=m;break}o=m.sibling,m.sibling=c,c=m,m=o}rp(u,!0,c,null,y,d);break;case"together":rp(u,!1,null,null,void 0,d);break;default:u.memoizedState=null}return u.child}function $i(o,u,c){if(o!==null&&(u.dependencies=o.dependencies),Ha|=u.lanes,(c&u.childLanes)===0)if(o!==null){if(uu(o,u,c,!1),(c&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,c=qi(o,o.pendingProps),u.child=c,c.return=u;o.sibling!==null;)o=o.sibling,c=c.sibling=qi(o,o.pendingProps),c.return=u;c.sibling=null}return u.child}function ip(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&gh(o)))}function fI(o,u,c){switch(u.tag){case 3:an(u,u.stateNode.containerInfo),La(u,Qt,o.memoizedState.cache),Wo();break;case 27:case 5:Ro(u);break;case 4:an(u,u.stateNode.containerInfo);break;case 10:La(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,R1(u),null;break;case 13:var d=u.memoizedState;if(d!==null)return d.dehydrated!==null?(Fa(u),u.flags|=128,null):(c&u.child.childLanes)!==0?y_(o,u,c):(Fa(u),o=$i(o,u,c),o!==null?o.sibling:null);Fa(u);break;case 19:var m=(o.flags&128)!==0;if(d=(c&u.childLanes)!==0,d||(uu(o,u,c,!1),d=(c&u.childLanes)!==0),m){if(d)return E_(o,u,c);u.flags|=128}if(m=u.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ge(Ht,Ht.current),d)break;return null;case 22:return u.lanes=0,h_(o,u,c,u.pendingProps);case 24:La(u,Qt,o.memoizedState.cache)}return $i(o,u,c)}function x_(o,u,c){if(o!==null)if(o.memoizedProps!==u.pendingProps)Zt=!0;else{if(!ip(o,c)&&(u.flags&128)===0)return Zt=!1,fI(o,u,c);Zt=(o.flags&131072)!==0}else Zt=!1,Ye&&(u.flags&1048576)!==0&&Jm(u,Gl,u.index);switch(u.lanes=0,u.tag){case 16:e:{var d=u.pendingProps;if(o=Jo(u.elementType),u.type=o,typeof o=="function")l1(o)?(d=rs(o,d),u.tag=1,u=v_(null,u,o,d,c)):(u.tag=0,u=$1(null,u,o,d,c));else{if(o!=null){var m=o.$$typeof;if(m===G){u.tag=11,u=l_(null,u,o,d,c);break e}else if(m===C){u.tag=14,u=c_(null,u,o,d,c);break e}}throw u=ze(o)||o,Error(r(306,u,""))}}return u;case 0:return $1(o,u,u.type,u.pendingProps,c);case 1:return d=u.type,m=rs(d,u.pendingProps),v_(o,u,d,m,c);case 3:e:{if(an(u,u.stateNode.containerInfo),o===null)throw Error(r(387));d=u.pendingProps;var y=u.memoizedState;m=y.element,T1(o,u),Zl(u,d,null,c);var A=u.memoizedState;if(d=A.cache,La(u,Qt,d),d!==y.cache&&y1(u,[Qt],c,!0),$l(),d=A.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:A.cache},u.updateQueue.baseState=y,u.memoizedState=y,u.flags&256){u=m_(o,u,d,c);break e}else if(d!==m){m=br(Error(r(424)),u),ql(m),u=m_(o,u,d,c);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,It=Mr(o.firstChild),Cn=u,Ye=!0,Ma=null,Or=!0,c=hy(u,null,d,c),u.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Wo(),d===m){u=$i(o,u,c);break e}Rn(o,u,d,c)}u=u.child}return u;case 26:return Ph(o,u),o===null?(c=N2(u.type,null,u.pendingProps,null))?u.memoizedState=c:Ye||(c=u.type,o=u.pendingProps,d=$h(ke.current).createElement(c),d[Kt]=u,d[vn]=o,Dn(d,c,o),Yt(d),u.stateNode=d):u.memoizedState=N2(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ro(u),o===null&&Ye&&(d=u.stateNode=R2(u.type,u.pendingProps,ke.current),Cn=u,Or=!0,m=It,Ya(u.type)?(Bp=m,It=Mr(d.firstChild)):It=m),Rn(o,u,u.pendingProps.children,c),Ph(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Ye&&((m=d=It)&&(d=zI(d,u.type,u.pendingProps,Or),d!==null?(u.stateNode=d,Cn=u,It=Mr(d.firstChild),Or=!1,m=!0):m=!1),m||Pa(u)),Ro(u),m=u.type,y=u.pendingProps,A=o!==null?o.memoizedProps:null,d=y.children,Np(m,y)?d=null:A!==null&&Np(m,A)&&(u.flags|=32),u.memoizedState!==null&&(m=O1(o,u,nI,null,null,c),yc._currentValue=m),Ph(o,u),Rn(o,u,d,c),u.child;case 6:return o===null&&Ye&&((o=c=It)&&(c=jI(c,u.pendingProps,Or),c!==null?(u.stateNode=c,Cn=u,It=null,o=!0):o=!1),o||Pa(u)),null;case 13:return y_(o,u,c);case 4:return an(u,u.stateNode.containerInfo),d=u.pendingProps,o===null?u.child=ts(u,null,d,c):Rn(o,u,d,c),u.child;case 11:return l_(o,u,u.type,u.pendingProps,c);case 7:return Rn(o,u,u.pendingProps,c),u.child;case 8:return Rn(o,u,u.pendingProps.children,c),u.child;case 12:return Rn(o,u,u.pendingProps.children,c),u.child;case 10:return d=u.pendingProps,La(u,u.type,d.value),Rn(o,u,d.children,c),u.child;case 9:return m=u.type._context,d=u.pendingProps.children,$o(u),m=bn(m),d=d(m),u.flags|=1,Rn(o,u,d,c),u.child;case 14:return c_(o,u,u.type,u.pendingProps,c);case 15:return f_(o,u,u.type,u.pendingProps,c);case 19:return E_(o,u,c);case 31:return cI(o,u,c);case 22:return h_(o,u,c,u.pendingProps);case 24:return $o(u),d=bn(Qt),o===null?(m=x1(),m===null&&(m=Tt,y=_1(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),u.memoizedState={parent:d,cache:m},w1(u),La(u,Qt,m)):((o.lanes&c)!==0&&(T1(o,u),Zl(u,null,null,c),$l()),m=o.memoizedState,y=u.memoizedState,m.parent!==d?(m={parent:d,cache:d},u.memoizedState=m,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=m),La(u,Qt,d)):(d=y.cache,La(u,Qt,d),d!==m.cache&&y1(u,[Qt],c,!0))),Rn(o,u,u.pendingProps.children,c),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Zi(o){o.flags|=4}function ap(o,u,c,d,m){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(m&335544128)===m)if(o.stateNode.complete)o.flags|=8192;else if(Y_())o.flags|=8192;else throw es=_h,A1}else o.flags&=-16777217}function A_(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!B2(u))if(Y_())o.flags|=8192;else throw es=_h,A1}function kh(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?jf():536870912,o.lanes|=u,Eu|=u)}function ic(o,u){if(!Ye)switch(o.tailMode){case"hidden":u=o.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Ct(o){var u=o.alternate!==null&&o.alternate.child===o.child,c=0,d=0;if(u)for(var m=o.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=d,o.childLanes=c,u}function hI(o,u,c){var d=u.pendingProps;switch(d1(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(u),null;case 1:return Ct(u),null;case 3:return c=u.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Yi(Qt),Dt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(su(u)?Zi(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,g1())),Ct(u),null;case 26:var m=u.type,y=u.memoizedState;return o===null?(Zi(u),y!==null?(Ct(u),A_(u,y)):(Ct(u),ap(u,m,null,d,c))):y?y!==o.memoizedState?(Zi(u),Ct(u),A_(u,y)):(Ct(u),u.flags&=-16777217):(o=o.memoizedProps,o!==d&&Zi(u),Ct(u),ap(u,m,o,d,c)),null;case 27:if(Fs(u),c=ke.current,m=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==d&&Zi(u);else{if(!d){if(u.stateNode===null)throw Error(r(166));return Ct(u),null}o=ve.current,su(u)?ty(u):(o=R2(m,d,c),u.stateNode=o,Zi(u))}return Ct(u),null;case 5:if(Fs(u),m=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==d&&Zi(u);else{if(!d){if(u.stateNode===null)throw Error(r(166));return Ct(u),null}if(y=ve.current,su(u))ty(u);else{var A=$h(ke.current);switch(y){case 1:y=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=A.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?A.createElement(m,{is:d.is}):A.createElement(m)}}y[Kt]=u,y[vn]=d;e:for(A=u.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break e;for(;A.sibling===null;){if(A.return===null||A.return===u)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}u.stateNode=y;e:switch(Dn(y,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Zi(u)}}return Ct(u),ap(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,c),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==d&&Zi(u);else{if(typeof d!="string"&&u.stateNode===null)throw Error(r(166));if(o=ke.current,su(u)){if(o=u.stateNode,c=u.memoizedProps,d=null,m=Cn,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}o[Kt]=u,o=!!(o.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||y2(o.nodeValue,c)),o||Pa(u,!0)}else o=$h(o).createTextNode(d),o[Kt]=u,u.stateNode=o}return Ct(u),null;case 31:if(c=u.memoizedState,o===null||o.memoizedState!==null){if(d=su(u),c!==null){if(o===null){if(!d)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[Kt]=u}else Wo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ct(u),o=!1}else c=g1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return u.flags&256?(pr(u),u):(pr(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Ct(u),null;case 13:if(d=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(m=su(u),d!==null&&d.dehydrated!==null){if(o===null){if(!m)throw Error(r(318));if(m=u.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Kt]=u}else Wo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ct(u),m=!1}else m=g1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),m=!0;if(!m)return u.flags&256?(pr(u),u):(pr(u),null)}return pr(u),(u.flags&128)!==0?(u.lanes=c,u):(c=d!==null,o=o!==null&&o.memoizedState!==null,c&&(d=u.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048)),c!==o&&c&&(u.child.flags|=8192),kh(u,u.updateQueue),Ct(u),null);case 4:return Dt(),o===null&&Cp(u.stateNode.containerInfo),Ct(u),null;case 10:return Yi(u.type),Ct(u),null;case 19:if(ue(Ht),d=u.memoizedState,d===null)return Ct(u),null;if(m=(u.flags&128)!==0,y=d.rendering,y===null)if(m)ic(d,!1);else{if(Ft!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(y=wh(o),y!==null){for(u.flags|=128,ic(d,!1),o=y.updateQueue,u.updateQueue=o,kh(u,o),u.subtreeFlags=0,o=c,c=u.child;c!==null;)Qm(c,o),c=c.sibling;return ge(Ht,Ht.current&1|2),Ye&&Xi(u,d.treeForkCount),u.child}o=o.sibling}d.tail!==null&&Hn()>zh&&(u.flags|=128,m=!0,ic(d,!1),u.lanes=4194304)}else{if(!m)if(o=wh(y),o!==null){if(u.flags|=128,m=!0,o=o.updateQueue,u.updateQueue=o,kh(u,o),ic(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ye)return Ct(u),null}else 2*Hn()-d.renderingStartTime>zh&&c!==536870912&&(u.flags|=128,m=!0,ic(d,!1),u.lanes=4194304);d.isBackwards?(y.sibling=u.child,u.child=y):(o=d.last,o!==null?o.sibling=y:u.child=y,d.last=y)}return d.tail!==null?(o=d.tail,d.rendering=o,d.tail=o.sibling,d.renderingStartTime=Hn(),o.sibling=null,c=Ht.current,ge(Ht,m?c&1|2:c&1),Ye&&Xi(u,d.treeForkCount),o):(Ct(u),null);case 22:case 23:return pr(u),b1(),d=u.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(u.flags|=8192):d&&(u.flags|=8192),d?(c&536870912)!==0&&(u.flags&128)===0&&(Ct(u),u.subtreeFlags&6&&(u.flags|=8192)):Ct(u),c=u.updateQueue,c!==null&&kh(u,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==c&&(u.flags|=2048),o!==null&&ue(Zo),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),u.memoizedState.cache!==c&&(u.flags|=2048),Yi(Qt),Ct(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function dI(o,u){switch(d1(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Yi(Qt),Dt(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Fs(u),null;case 31:if(u.memoizedState!==null){if(pr(u),u.alternate===null)throw Error(r(340));Wo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(pr(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Wo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return ue(Ht),null;case 4:return Dt(),null;case 10:return Yi(u.type),null;case 22:case 23:return pr(u),b1(),o!==null&&ue(Zo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Yi(Qt),null;case 25:return null;default:return null}}function w_(o,u){switch(d1(u),u.tag){case 3:Yi(Qt),Dt();break;case 26:case 27:case 5:Fs(u);break;case 4:Dt();break;case 31:u.memoizedState!==null&&pr(u);break;case 13:pr(u);break;case 19:ue(Ht);break;case 10:Yi(u.type);break;case 22:case 23:pr(u),b1(),o!==null&&ue(Zo);break;case 24:Yi(Qt)}}function ac(o,u){try{var c=u.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&o)===o){d=void 0;var y=c.create,A=c.inst;d=y(),A.destroy=d}c=c.next}while(c!==m)}}catch(I){ht(u,u.return,I)}}function za(o,u,c){try{var d=u.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&o)===o){var A=d.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,m=u;var F=c,Q=I;try{Q()}catch(ie){ht(m,F,ie)}}}d=d.next}while(d!==y)}}catch(ie){ht(u,u.return,ie)}}function T_(o){var u=o.updateQueue;if(u!==null){var c=o.stateNode;try{py(u,c)}catch(d){ht(o,o.return,d)}}}function S_(o,u,c){c.props=rs(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(d){ht(o,u,d)}}function oc(o,u){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof c=="function"?o.refCleanup=c(d):c.current=d}}catch(m){ht(o,u,m)}}function Ci(o,u){var c=o.ref,d=o.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(m){ht(o,u,m)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ht(o,u,m)}else c.current=null}function I_(o){var u=o.type,c=o.memoizedProps,d=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(m){ht(o,o.return,m)}}function op(o,u,c){try{var d=o.stateNode;LI(d,o.type,c,u),d[vn]=u}catch(m){ht(o,o.return,m)}}function C_(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ya(o.type)||o.tag===4}function sp(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||C_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ya(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function up(o,u,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,u?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,u):(u=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,u.appendChild(o),c=c._reactRootContainer,c!=null||u.onclick!==null||(u.onclick=qr));else if(d!==4&&(d===27&&Ya(o.type)&&(c=o.stateNode,u=null),o=o.child,o!==null))for(up(o,u,c),o=o.sibling;o!==null;)up(o,u,c),o=o.sibling}function Bh(o,u,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,u?c.insertBefore(o,u):c.appendChild(o);else if(d!==4&&(d===27&&Ya(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Bh(o,u,c),o=o.sibling;o!==null;)Bh(o,u,c),o=o.sibling}function b_(o){var u=o.stateNode,c=o.memoizedProps;try{for(var d=o.type,m=u.attributes;m.length;)u.removeAttributeNode(m[0]);Dn(u,d,c),u[Kt]=o,u[vn]=c}catch(y){ht(o,o.return,y)}}var Ji=!1,Jt=!1,lp=!1,R_=typeof WeakSet=="function"?WeakSet:Set,yn=null;function pI(o,u){if(o=o.containerInfo,Dp=id,o=zm(o),n1(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var A=0,I=-1,F=-1,Q=0,ie=0,se=o,Z=null;t:for(;;){for(var te;se!==c||m!==0&&se.nodeType!==3||(I=A+m),se!==y||d!==0&&se.nodeType!==3||(F=A+d),se.nodeType===3&&(A+=se.nodeValue.length),(te=se.firstChild)!==null;)Z=se,se=te;for(;;){if(se===o)break t;if(Z===c&&++Q===m&&(I=A),Z===y&&++ie===d&&(F=A),(te=se.nextSibling)!==null)break;se=Z,Z=se.parentNode}se=te}c=I===-1||F===-1?null:{start:I,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Op={focusedElem:o,selectionRange:c},id=!1,yn=u;yn!==null;)if(u=yn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,yn=o;else for(;yn!==null;){switch(u=yn,y=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)m=o[c],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&y!==null){o=void 0,c=u,m=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var me=rs(c.type,m);o=d.getSnapshotBeforeUpdate(me,y),d.__reactInternalSnapshotBeforeUpdate=o}catch(be){ht(c,c.return,be)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,c=o.nodeType,c===9)Pp(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Pp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,yn=o;break}yn=u.return}}function D_(o,u,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ta(o,c),d&4&&ac(5,c);break;case 1:if(ta(o,c),d&4)if(o=c.stateNode,u===null)try{o.componentDidMount()}catch(A){ht(c,c.return,A)}else{var m=rs(c.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(m,u,o.__reactInternalSnapshotBeforeUpdate)}catch(A){ht(c,c.return,A)}}d&64&&T_(c),d&512&&oc(c,c.return);break;case 3:if(ta(o,c),d&64&&(o=c.updateQueue,o!==null)){if(u=null,c.child!==null)switch(c.child.tag){case 27:case 5:u=c.child.stateNode;break;case 1:u=c.child.stateNode}try{py(o,u)}catch(A){ht(c,c.return,A)}}break;case 27:u===null&&d&4&&b_(c);case 26:case 5:ta(o,c),u===null&&d&4&&I_(c),d&512&&oc(c,c.return);break;case 12:ta(o,c);break;case 31:ta(o,c),d&4&&M_(o,c);break;case 13:ta(o,c),d&4&&P_(o,c),d&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=wI.bind(null,c),HI(o,c))));break;case 22:if(d=c.memoizedState!==null||Ji,!d){u=u!==null&&u.memoizedState!==null||Jt,m=Ji;var y=Jt;Ji=d,(Jt=u)&&!y?na(o,c,(c.subtreeFlags&8772)!==0):ta(o,c),Ji=m,Jt=y}break;case 30:break;default:ta(o,c)}}function O_(o){var u=o.alternate;u!==null&&(o.alternate=null,O_(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Gs(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Nt=null,er=!1;function ea(o,u,c){for(c=c.child;c!==null;)N_(o,u,c),c=c.sibling}function N_(o,u,c){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(zr,c)}catch{}switch(c.tag){case 26:Jt||Ci(c,u),ea(o,u,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Jt||Ci(c,u);var d=Nt,m=er;Ya(c.type)&&(Nt=c.stateNode,er=!1),ea(o,u,c),gc(c.stateNode),Nt=d,er=m;break;case 5:Jt||Ci(c,u);case 6:if(d=Nt,m=er,Nt=null,ea(o,u,c),Nt=d,er=m,Nt!==null)if(er)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(c.stateNode)}catch(y){ht(c,u,y)}else try{Nt.removeChild(c.stateNode)}catch(y){ht(c,u,y)}break;case 18:Nt!==null&&(er?(o=Nt,T2(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),bu(o)):T2(Nt,c.stateNode));break;case 4:d=Nt,m=er,Nt=c.stateNode.containerInfo,er=!0,ea(o,u,c),Nt=d,er=m;break;case 0:case 11:case 14:case 15:za(2,c,u),Jt||za(4,c,u),ea(o,u,c);break;case 1:Jt||(Ci(c,u),d=c.stateNode,typeof d.componentWillUnmount=="function"&&S_(c,u,d)),ea(o,u,c);break;case 21:ea(o,u,c);break;case 22:Jt=(d=Jt)||c.memoizedState!==null,ea(o,u,c),Jt=d;break;default:ea(o,u,c)}}function M_(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{bu(o)}catch(c){ht(u,u.return,c)}}}function P_(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{bu(o)}catch(c){ht(u,u.return,c)}}function gI(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new R_),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new R_),u;default:throw Error(r(435,o.tag))}}function Vh(o,u){var c=gI(o);u.forEach(function(d){if(!c.has(d)){c.add(d);var m=TI.bind(null,o,d);d.then(m,m)}})}function tr(o,u){var c=u.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d],y=o,A=u,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Ya(I.type)){Nt=I.stateNode,er=!1;break e}break;case 5:Nt=I.stateNode,er=!1;break e;case 3:case 4:Nt=I.stateNode.containerInfo,er=!0;break e}I=I.return}if(Nt===null)throw Error(r(160));N_(y,A,m),Nt=null,er=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)L_(u,o),u=u.sibling}var $r=null;function L_(o,u){var c=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:tr(u,o),nr(o),d&4&&(za(3,o,o.return),ac(3,o),za(5,o,o.return));break;case 1:tr(u,o),nr(o),d&512&&(Jt||c===null||Ci(c,c.return)),d&64&&Ji&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var m=$r;if(tr(u,o),nr(o),d&512&&(Jt||c===null||Ci(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=o.memoizedState,c===null)if(d===null)if(o.stateNode===null){e:{d=o.type,c=o.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":y=m.getElementsByTagName("title")[0],(!y||y[di]||y[Kt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(d),m.head.insertBefore(y,m.querySelector("head > title"))),Dn(y,d,c),y[Kt]=o,Yt(y),d=y;break e;case"link":var A=L2("link","href",m).get(d+(c.href||""));if(A){for(var I=0;I<A.length;I++)if(y=A[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(I,1);break t}}y=m.createElement(d),Dn(y,d,c),m.head.appendChild(y);break;case"meta":if(A=L2("meta","content",m).get(d+(c.content||""))){for(I=0;I<A.length;I++)if(y=A[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(I,1);break t}}y=m.createElement(d),Dn(y,d,c),m.head.appendChild(y);break;default:throw Error(r(468,d))}y[Kt]=o,Yt(y),d=y}o.stateNode=d}else k2(m,o.type,o.stateNode);else o.stateNode=P2(m,d,o.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?k2(m,o.type,o.stateNode):P2(m,d,o.memoizedProps)):d===null&&o.stateNode!==null&&op(o,o.memoizedProps,c.memoizedProps)}break;case 27:tr(u,o),nr(o),d&512&&(Jt||c===null||Ci(c,c.return)),c!==null&&d&4&&op(o,o.memoizedProps,c.memoizedProps);break;case 5:if(tr(u,o),nr(o),d&512&&(Jt||c===null||Ci(c,c.return)),o.flags&32){m=o.stateNode;try{Jn(m,"")}catch(me){ht(o,o.return,me)}}d&4&&o.stateNode!=null&&(m=o.memoizedProps,op(o,m,c!==null?c.memoizedProps:m)),d&1024&&(lp=!0);break;case 6:if(tr(u,o),nr(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,c=o.stateNode;try{c.nodeValue=d}catch(me){ht(o,o.return,me)}}break;case 3:if(ed=null,m=$r,$r=Zh(u.containerInfo),tr(u,o),$r=m,nr(o),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bu(u.containerInfo)}catch(me){ht(o,o.return,me)}lp&&(lp=!1,k_(o));break;case 4:d=$r,$r=Zh(o.stateNode.containerInfo),tr(u,o),nr(o),$r=d;break;case 12:tr(u,o),nr(o);break;case 31:tr(u,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 13:tr(u,o),nr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Uh=Hn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 22:m=o.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,Q=Ji,ie=Jt;if(Ji=Q||m,Jt=ie||F,tr(u,o),Jt=ie,Ji=Q,nr(o),d&8192)e:for(u=o.stateNode,u._visibility=m?u._visibility&-2:u._visibility|1,m&&(c===null||F||Ji||Jt||is(o)),c=null,u=o;;){if(u.tag===5||u.tag===26){if(c===null){F=c=u;try{if(y=F.stateNode,m)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=F.stateNode;var se=F.memoizedProps.style,Z=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(me){ht(F,F.return,me)}}}else if(u.tag===6){if(c===null){F=u;try{F.stateNode.nodeValue=m?"":F.memoizedProps}catch(me){ht(F,F.return,me)}}}else if(u.tag===18){if(c===null){F=u;try{var te=F.stateNode;m?S2(te,!0):S2(F.stateNode,!1)}catch(me){ht(F,F.return,me)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}d&4&&(d=o.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Vh(o,c))));break;case 19:tr(u,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 30:break;case 21:break;default:tr(u,o),nr(o)}}function nr(o){var u=o.flags;if(u&2){try{for(var c,d=o.return;d!==null;){if(C_(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var m=c.stateNode,y=sp(o);Bh(o,y,m);break;case 5:var A=c.stateNode;c.flags&32&&(Jn(A,""),c.flags&=-33);var I=sp(o);Bh(o,I,A);break;case 3:case 4:var F=c.stateNode.containerInfo,Q=sp(o);up(o,Q,F);break;default:throw Error(r(161))}}catch(ie){ht(o,o.return,ie)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function k_(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;k_(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ta(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)D_(o,u.alternate,u),u=u.sibling}function is(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:za(4,u,u.return),is(u);break;case 1:Ci(u,u.return);var c=u.stateNode;typeof c.componentWillUnmount=="function"&&S_(u,u.return,c),is(u);break;case 27:gc(u.stateNode);case 26:case 5:Ci(u,u.return),is(u);break;case 22:u.memoizedState===null&&is(u);break;case 30:is(u);break;default:is(u)}o=o.sibling}}function na(o,u,c){for(c=c&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var d=u.alternate,m=o,y=u,A=y.flags;switch(y.tag){case 0:case 11:case 15:na(m,y,c),ac(4,y);break;case 1:if(na(m,y,c),d=y,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){ht(d,d.return,Q)}if(d=y,m=d.updateQueue,m!==null){var I=d.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)dy(F[m],I)}catch(Q){ht(d,d.return,Q)}}c&&A&64&&T_(y),oc(y,y.return);break;case 27:b_(y);case 26:case 5:na(m,y,c),c&&d===null&&A&4&&I_(y),oc(y,y.return);break;case 12:na(m,y,c);break;case 31:na(m,y,c),c&&A&4&&M_(m,y);break;case 13:na(m,y,c),c&&A&4&&P_(m,y);break;case 22:y.memoizedState===null&&na(m,y,c),oc(y,y.return);break;case 30:break;default:na(m,y,c)}u=u.sibling}}function cp(o,u){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&Xl(c))}function fp(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Xl(o))}function Zr(o,u,c,d){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)B_(o,u,c,d),u=u.sibling}function B_(o,u,c,d){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Zr(o,u,c,d),m&2048&&ac(9,u);break;case 1:Zr(o,u,c,d);break;case 3:Zr(o,u,c,d),m&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Xl(o)));break;case 12:if(m&2048){Zr(o,u,c,d),o=u.stateNode;try{var y=u.memoizedProps,A=y.id,I=y.onPostCommit;typeof I=="function"&&I(A,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){ht(u,u.return,F)}}else Zr(o,u,c,d);break;case 31:Zr(o,u,c,d);break;case 13:Zr(o,u,c,d);break;case 23:break;case 22:y=u.stateNode,A=u.alternate,u.memoizedState!==null?y._visibility&2?Zr(o,u,c,d):sc(o,u):y._visibility&2?Zr(o,u,c,d):(y._visibility|=2,mu(o,u,c,d,(u.subtreeFlags&10256)!==0||!1)),m&2048&&cp(A,u);break;case 24:Zr(o,u,c,d),m&2048&&fp(u.alternate,u);break;default:Zr(o,u,c,d)}}function mu(o,u,c,d,m){for(m=m&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var y=o,A=u,I=c,F=d,Q=A.flags;switch(A.tag){case 0:case 11:case 15:mu(y,A,I,F,m),ac(8,A);break;case 23:break;case 22:var ie=A.stateNode;A.memoizedState!==null?ie._visibility&2?mu(y,A,I,F,m):sc(y,A):(ie._visibility|=2,mu(y,A,I,F,m)),m&&Q&2048&&cp(A.alternate,A);break;case 24:mu(y,A,I,F,m),m&&Q&2048&&fp(A.alternate,A);break;default:mu(y,A,I,F,m)}u=u.sibling}}function sc(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var c=o,d=u,m=d.flags;switch(d.tag){case 22:sc(c,d),m&2048&&cp(d.alternate,d);break;case 24:sc(c,d),m&2048&&fp(d.alternate,d);break;default:sc(c,d)}u=u.sibling}}var uc=8192;function yu(o,u,c){if(o.subtreeFlags&uc)for(o=o.child;o!==null;)V_(o,u,c),o=o.sibling}function V_(o,u,c){switch(o.tag){case 26:yu(o,u,c),o.flags&uc&&o.memoizedState!==null&&tC(c,$r,o.memoizedState,o.memoizedProps);break;case 5:yu(o,u,c);break;case 3:case 4:var d=$r;$r=Zh(o.stateNode.containerInfo),yu(o,u,c),$r=d;break;case 22:o.memoizedState===null&&(d=o.alternate,d!==null&&d.memoizedState!==null?(d=uc,uc=16777216,yu(o,u,c),uc=d):yu(o,u,c));break;default:yu(o,u,c)}}function F_(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function lc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];yn=d,z_(d,o)}F_(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)U_(o),o=o.sibling}function U_(o){switch(o.tag){case 0:case 11:case 15:lc(o),o.flags&2048&&za(9,o,o.return);break;case 3:lc(o);break;case 12:lc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Fh(o)):lc(o);break;default:lc(o)}}function Fh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];yn=d,z_(d,o)}F_(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:za(8,u,u.return),Fh(u);break;case 22:c=u.stateNode,c._visibility&2&&(c._visibility&=-3,Fh(u));break;default:Fh(u)}o=o.sibling}}function z_(o,u){for(;yn!==null;){var c=yn;switch(c.tag){case 0:case 11:case 15:za(8,c,u);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Xl(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,yn=d;else e:for(c=o;yn!==null;){d=yn;var m=d.sibling,y=d.return;if(O_(d),d===c){yn=null;break e}if(m!==null){m.return=y,yn=m;break e}yn=y}}}var vI={getCacheForType:function(o){var u=bn(Qt),c=u.data.get(o);return c===void 0&&(c=o(),u.data.set(o,c)),c},cacheSignal:function(){return bn(Qt).controller.signal}},mI=typeof WeakMap=="function"?WeakMap:Map,it=0,Tt=null,je=null,Ge=0,ft=0,gr=null,ja=!1,_u=!1,hp=!1,ra=0,Ft=0,Ha=0,as=0,dp=0,vr=0,Eu=0,cc=null,rr=null,pp=!1,Uh=0,j_=0,zh=1/0,jh=null,Ga=null,sn=0,qa=null,xu=null,ia=0,gp=0,vp=null,H_=null,fc=0,mp=null;function mr(){return(it&2)!==0&&Ge!==0?Ge&-Ge:ne.T!==null?wp():Hf()}function G_(){if(vr===0)if((Ge&536870912)===0||Ye){var o=No;No<<=1,(No&3932160)===0&&(No=262144),vr=o}else vr=536870912;return o=dr.current,o!==null&&(o.flags|=32),vr}function ir(o,u,c){(o===Tt&&(ft===2||ft===9)||o.cancelPendingCommit!==null)&&(Au(o,0),Xa(o,Ge,vr,!1)),Mo(o,c),((it&2)===0||o!==Tt)&&(o===Tt&&((it&2)===0&&(as|=c),Ft===4&&Xa(o,Ge,vr,!1)),bi(o))}function q_(o,u,c){if((it&6)!==0)throw Error(r(327));var d=!c&&(u&127)===0&&(u&o.expiredLanes)===0||jr(o,u),m=d?EI(o,u):_p(o,u,!0),y=d;do{if(m===0){_u&&!d&&Xa(o,u,0,!1);break}else{if(c=o.current.alternate,y&&!yI(c)){m=_p(o,u,!1),y=!1;continue}if(m===2){if(y=u,o.errorRecoveryDisabledLanes&y)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){u=A;e:{var I=o;m=cc;var F=I.current.memoizedState.isDehydrated;if(F&&(Au(I,A).flags|=256),A=_p(I,A,!1),A!==2){if(hp&&!F){I.errorRecoveryDisabledLanes|=y,as|=y,m=4;break e}y=rr,rr=m,y!==null&&(rr===null?rr=y:rr.push.apply(rr,y))}m=A}if(y=!1,m!==2)continue}}if(m===1){Au(o,0),Xa(o,u,0,!0);break}e:{switch(d=o,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Xa(d,u,vr,!ja);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(m=Uh+300-Hn(),10<m)){if(Xa(d,u,vr,!ja),ci(d,0,!0)!==0)break e;ia=u,d.timeoutHandle=A2(X_.bind(null,d,c,rr,jh,pp,u,vr,as,Eu,ja,y,"Throttled",-0,0),m);break e}X_(d,c,rr,jh,pp,u,vr,as,Eu,ja,y,null,-0,0)}}break}while(!0);bi(o)}function X_(o,u,c,d,m,y,A,I,F,Q,ie,se,Z,te){if(o.timeoutHandle=-1,se=u.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},V_(u,y,se);var me=(y&62914560)===y?Uh-Hn():(y&4194048)===y?j_-Hn():0;if(me=nC(se,me),me!==null){ia=y,o.cancelPendingCommit=me(e2.bind(null,o,u,y,c,d,m,A,I,F,ie,se,null,Z,te)),Xa(o,y,A,!Q);return}}e2(o,u,y,c,d,m,A,I,F)}function yI(o){for(var u=o;;){var c=u.tag;if((c===0||c===11||c===15)&&u.flags&16384&&(c=u.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var m=c[d],y=m.getSnapshot;m=m.value;try{if(!fr(y(),m))return!1}catch{return!1}}if(c=u.child,u.subtreeFlags&16384&&c!==null)c.return=u,u=c;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Xa(o,u,c,d){u&=~dp,u&=~as,o.suspendedLanes|=u,o.pingedLanes&=~u,d&&(o.warmLanes|=u),d=o.expirationTimes;for(var m=u;0<m;){var y=31-zt(m),A=1<<y;d[y]=-1,m&=~A}c!==0&&Po(o,c,u)}function Hh(){return(it&6)===0?(hc(0),!1):!0}function yp(){if(je!==null){if(ft===0)var o=je.return;else o=je,Ki=Qo=null,P1(o),hu=null,Yl=0,o=je;for(;o!==null;)w_(o.alternate,o),o=o.return;je=null}}function Au(o,u){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,VI(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),ia=0,yp(),Tt=o,je=c=qi(o.current,null),Ge=u,ft=0,gr=null,ja=!1,_u=jr(o,u),hp=!1,Eu=vr=dp=as=Ha=Ft=0,rr=cc=null,pp=!1,(u&8)!==0&&(u|=u&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=u;0<d;){var m=31-zt(d),y=1<<m;u|=o[m],d&=~y}return ra=u,ch(),c}function K_(o,u){Le=null,ne.H=nc,u===fu||u===yh?(u=ly(),ft=3):u===A1?(u=ly(),ft=4):ft=u===Q1?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,gr=u,je===null&&(Ft=1,Nh(o,br(u,o.current)))}function Y_(){var o=dr.current;return o===null?!0:(Ge&4194048)===Ge?Nr===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?o===Nr:!1}function W_(){var o=ne.H;return ne.H=nc,o===null?nc:o}function Q_(){var o=ne.A;return ne.A=vI,o}function Gh(){Ft=4,ja||(Ge&4194048)!==Ge&&dr.current!==null||(_u=!0),(Ha&134217727)===0&&(as&134217727)===0||Tt===null||Xa(Tt,Ge,vr,!1)}function _p(o,u,c){var d=it;it|=2;var m=W_(),y=Q_();(Tt!==o||Ge!==u)&&(jh=null,Au(o,u)),u=!1;var A=Ft;e:do try{if(ft!==0&&je!==null){var I=je,F=gr;switch(ft){case 8:yp(),A=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(u=!0);var Q=ft;if(ft=0,gr=null,wu(o,I,F,Q),c&&_u){A=0;break e}break;default:Q=ft,ft=0,gr=null,wu(o,I,F,Q)}}_I(),A=Ft;break}catch(ie){K_(o,ie)}while(!0);return u&&o.shellSuspendCounter++,Ki=Qo=null,it=d,ne.H=m,ne.A=y,je===null&&(Tt=null,Ge=0,ch()),A}function _I(){for(;je!==null;)$_(je)}function EI(o,u){var c=it;it|=2;var d=W_(),m=Q_();Tt!==o||Ge!==u?(jh=null,zh=Hn()+500,Au(o,u)):_u=jr(o,u);e:do try{if(ft!==0&&je!==null){u=je;var y=gr;t:switch(ft){case 1:ft=0,gr=null,wu(o,u,y,1);break;case 2:case 9:if(sy(y)){ft=0,gr=null,Z_(u);break}u=function(){ft!==2&&ft!==9||Tt!==o||(ft=7),bi(o)},y.then(u,u);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:sy(y)?(ft=0,gr=null,Z_(u)):(ft=0,gr=null,wu(o,u,y,7));break;case 5:var A=null;switch(je.tag){case 26:A=je.memoizedState;case 5:case 27:var I=je;if(A?B2(A):I.stateNode.complete){ft=0,gr=null;var F=I.sibling;if(F!==null)je=F;else{var Q=I.return;Q!==null?(je=Q,qh(Q)):je=null}break t}}ft=0,gr=null,wu(o,u,y,5);break;case 6:ft=0,gr=null,wu(o,u,y,6);break;case 8:yp(),Ft=6;break e;default:throw Error(r(462))}}xI();break}catch(ie){K_(o,ie)}while(!0);return Ki=Qo=null,ne.H=d,ne.A=m,it=c,je!==null?0:(Tt=null,Ge=0,ch(),Ft)}function xI(){for(;je!==null&&!W0();)$_(je)}function $_(o){var u=x_(o.alternate,o,ra);o.memoizedProps=o.pendingProps,u===null?qh(o):je=u}function Z_(o){var u=o,c=u.alternate;switch(u.tag){case 15:case 0:u=g_(c,u,u.pendingProps,u.type,void 0,Ge);break;case 11:u=g_(c,u,u.pendingProps,u.type.render,u.ref,Ge);break;case 5:P1(u);default:w_(c,u),u=je=Qm(u,ra),u=x_(c,u,ra)}o.memoizedProps=o.pendingProps,u===null?qh(o):je=u}function wu(o,u,c,d){Ki=Qo=null,P1(u),hu=null,Yl=0;var m=u.return;try{if(lI(o,m,u,c,Ge)){Ft=1,Nh(o,br(c,o.current)),je=null;return}}catch(y){if(m!==null)throw je=m,y;Ft=1,Nh(o,br(c,o.current)),je=null;return}u.flags&32768?(Ye||d===1?o=!0:_u||(Ge&536870912)!==0?o=!1:(ja=o=!0,(d===2||d===9||d===3||d===6)&&(d=dr.current,d!==null&&d.tag===13&&(d.flags|=16384))),J_(u,o)):qh(u)}function qh(o){var u=o;do{if((u.flags&32768)!==0){J_(u,ja);return}o=u.return;var c=hI(u.alternate,u,ra);if(c!==null){je=c;return}if(u=u.sibling,u!==null){je=u;return}je=u=o}while(u!==null);Ft===0&&(Ft=5)}function J_(o,u){do{var c=dI(o.alternate,o);if(c!==null){c.flags&=32767,je=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!u&&(o=o.sibling,o!==null)){je=o;return}je=o=c}while(o!==null);Ft=6,je=null}function e2(o,u,c,d,m,y,A,I,F){o.cancelPendingCommit=null;do Xh();while(sn!==0);if((it&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(y=u.lanes|u.childLanes,y|=s1,Z0(o,c,y,A,I,F),o===Tt&&(je=Tt=null,Ge=0),xu=u,qa=o,ia=c,gp=y,vp=m,H_=d,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,SI(Aa,function(){return a2(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null,m=he.p,he.p=2,A=it,it|=4;try{pI(o,u,c)}finally{it=A,he.p=m,ne.T=d}}sn=1,t2(),n2(),r2()}}function t2(){if(sn===1){sn=0;var o=qa,u=xu,c=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null;var d=he.p;he.p=2;var m=it;it|=4;try{L_(u,o);var y=Op,A=zm(o.containerInfo),I=y.focusedElem,F=y.selectionRange;if(A!==I&&I&&I.ownerDocument&&Um(I.ownerDocument.documentElement,I)){if(F!==null&&n1(I)){var Q=F.start,ie=F.end;if(ie===void 0&&(ie=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(ie,I.value.length);else{var se=I.ownerDocument||document,Z=se&&se.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),me=I.textContent.length,be=Math.min(F.start,me),At=F.end===void 0?be:Math.min(F.end,me);!te.extend&&be>At&&(A=At,At=be,be=A);var q=Fm(I,be),j=Fm(I,At);if(q&&j&&(te.rangeCount!==1||te.anchorNode!==q.node||te.anchorOffset!==q.offset||te.focusNode!==j.node||te.focusOffset!==j.offset)){var W=se.createRange();W.setStart(q.node,q.offset),te.removeAllRanges(),be>At?(te.addRange(W),te.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),te.addRange(W))}}}}for(se=[],te=I;te=te.parentNode;)te.nodeType===1&&se.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var oe=se[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}id=!!Dp,Op=Dp=null}finally{it=m,he.p=d,ne.T=c}}o.current=u,sn=2}}function n2(){if(sn===2){sn=0;var o=qa,u=xu,c=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||c){c=ne.T,ne.T=null;var d=he.p;he.p=2;var m=it;it|=4;try{D_(o,u.alternate,u)}finally{it=m,he.p=d,ne.T=c}}sn=3}}function r2(){if(sn===4||sn===3){sn=0,kf();var o=qa,u=xu,c=ia,d=H_;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?sn=5:(sn=0,xu=qa=null,i2(o,o.pendingLanes));var m=o.pendingLanes;if(m===0&&(Ga=null),zi(c),u=u.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(zr,u,void 0,(u.current.flags&128)===128)}catch{}if(d!==null){u=ne.T,m=he.p,he.p=2,ne.T=null;try{for(var y=o.onRecoverableError,A=0;A<d.length;A++){var I=d[A];y(I.value,{componentStack:I.stack})}}finally{ne.T=u,he.p=m}}(ia&3)!==0&&Xh(),bi(o),m=o.pendingLanes,(c&261930)!==0&&(m&42)!==0?o===mp?fc++:(fc=0,mp=o):fc=0,hc(0)}}function i2(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Xl(u)))}function Xh(){return t2(),n2(),r2(),a2()}function a2(){if(sn!==5)return!1;var o=qa,u=gp;gp=0;var c=zi(ia),d=ne.T,m=he.p;try{he.p=32>c?32:c,ne.T=null,c=vp,vp=null;var y=qa,A=ia;if(sn=0,xu=qa=null,ia=0,(it&6)!==0)throw Error(r(331));var I=it;if(it|=4,U_(y.current),B_(y,y.current,A,c),it=I,hc(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(zr,y)}catch{}return!0}finally{he.p=m,ne.T=d,i2(o,u)}}function o2(o,u,c){u=br(c,u),u=W1(o.stateNode,u,2),o=Va(o,u,2),o!==null&&(Mo(o,2),bi(o))}function ht(o,u,c){if(o.tag===3)o2(o,o,c);else for(;u!==null;){if(u.tag===3){o2(u,o,c);break}else if(u.tag===1){var d=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ga===null||!Ga.has(d))){o=br(c,o),c=s_(2),d=Va(u,c,2),d!==null&&(u_(c,d,u,o),Mo(d,2),bi(d));break}}u=u.return}}function Ep(o,u,c){var d=o.pingCache;if(d===null){d=o.pingCache=new mI;var m=new Set;d.set(u,m)}else m=d.get(u),m===void 0&&(m=new Set,d.set(u,m));m.has(c)||(hp=!0,m.add(c),o=AI.bind(null,o,u,c),u.then(o,o))}function AI(o,u,c){var d=o.pingCache;d!==null&&d.delete(u),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,Tt===o&&(Ge&c)===c&&(Ft===4||Ft===3&&(Ge&62914560)===Ge&&300>Hn()-Uh?(it&2)===0&&Au(o,0):dp|=c,Eu===Ge&&(Eu=0)),bi(o)}function s2(o,u){u===0&&(u=jf()),o=Ko(o,u),o!==null&&(Mo(o,u),bi(o))}function wI(o){var u=o.memoizedState,c=0;u!==null&&(c=u.retryLane),s2(o,c)}function TI(o,u){var c=0;switch(o.tag){case 31:case 13:var d=o.stateNode,m=o.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(u),s2(o,c)}function SI(o,u){return on(o,u)}var Kh=null,Tu=null,xp=!1,Yh=!1,Ap=!1,Ka=0;function bi(o){o!==Tu&&o.next===null&&(Tu===null?Kh=Tu=o:Tu=Tu.next=o),Yh=!0,xp||(xp=!0,CI())}function hc(o,u){if(!Ap&&Yh){Ap=!0;do for(var c=!1,d=Kh;d!==null;){if(o!==0){var m=d.pendingLanes;if(m===0)var y=0;else{var A=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-zt(42|o)+1)-1,y&=m&~(A&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,f2(d,y))}else y=Ge,y=ci(d,d===Tt?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||jr(d,y)||(c=!0,f2(d,y));d=d.next}while(c);Ap=!1}}function II(){u2()}function u2(){Yh=xp=!1;var o=0;Ka!==0&&BI()&&(o=Ka);for(var u=Hn(),c=null,d=Kh;d!==null;){var m=d.next,y=l2(d,u);y===0?(d.next=null,c===null?Kh=m:c.next=m,m===null&&(Tu=c)):(c=d,(o!==0||(y&3)!==0)&&(Yh=!0)),d=m}sn!==0&&sn!==5||hc(o),Ka!==0&&(Ka=0)}function l2(o,u){for(var c=o.suspendedLanes,d=o.pingedLanes,m=o.expirationTimes,y=o.pendingLanes&-62914561;0<y;){var A=31-zt(y),I=1<<A,F=m[A];F===-1?((I&c)===0||(I&d)!==0)&&(m[A]=$0(I,u)):F<=u&&(o.expiredLanes|=I),y&=~I}if(u=Tt,c=Ge,c=ci(o,o===u?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,c===0||o===u&&(ft===2||ft===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&xa(d),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||jr(o,c)){if(u=c&-c,u===o.callbackPriority)return u;switch(d!==null&&xa(d),zi(c)){case 2:case 8:c=Al;break;case 32:c=Aa;break;case 268435456:c=Bf;break;default:c=Aa}return d=c2.bind(null,o),c=on(c,d),o.callbackPriority=u,o.callbackNode=c,u}return d!==null&&d!==null&&xa(d),o.callbackPriority=2,o.callbackNode=null,2}function c2(o,u){if(sn!==0&&sn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(Xh()&&o.callbackNode!==c)return null;var d=Ge;return d=ci(o,o===Tt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(q_(o,d,u),l2(o,Hn()),o.callbackNode!=null&&o.callbackNode===c?c2.bind(null,o):null)}function f2(o,u){if(Xh())return null;q_(o,u,!0)}function CI(){FI(function(){(it&6)!==0?on(xl,II):u2()})}function wp(){if(Ka===0){var o=lu;o===0&&(o=ui,ui<<=1,(ui&261888)===0&&(ui=256)),Ka=o}return Ka}function h2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ys(""+o)}function d2(o,u){var c=u.ownerDocument.createElement("input");return c.name=u.name,c.value=u.value,o.id&&c.setAttribute("form",o.id),u.parentNode.insertBefore(c,u),o=new FormData(o),c.parentNode.removeChild(c),o}function bI(o,u,c,d,m){if(u==="submit"&&c&&c.stateNode===m){var y=h2((m[vn]||null).action),A=d.submitter;A&&(u=(u=A[vn]||null)?h2(u.formAction):A.getAttribute("formAction"),u!==null&&(y=u,A=null));var I=new xi("action","action",null,d,m);o.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ka!==0){var F=A?d2(m,A):new FormData(m);H1(c,{pending:!0,data:F,method:m.method,action:y},null,F)}}else typeof y=="function"&&(I.preventDefault(),F=A?d2(m,A):new FormData(m),H1(c,{pending:!0,data:F,method:m.method,action:y},y,F))},currentTarget:m}]})}}for(var Tp=0;Tp<o1.length;Tp++){var Sp=o1[Tp],RI=Sp.toLowerCase(),DI=Sp[0].toUpperCase()+Sp.slice(1);Qr(RI,"on"+DI)}Qr(Gm,"onAnimationEnd"),Qr(qm,"onAnimationIteration"),Qr(Xm,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(XS,"onTransitionRun"),Qr(KS,"onTransitionStart"),Qr(YS,"onTransitionCancel"),Qr(Km,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dc));function p2(o,u){u=(u&4)!==0;for(var c=0;c<o.length;c++){var d=o[c],m=d.event;d=d.listeners;e:{var y=void 0;if(u)for(var A=d.length-1;0<=A;A--){var I=d[A],F=I.instance,Q=I.currentTarget;if(I=I.listener,F!==y&&m.isPropagationStopped())break e;y=I,m.currentTarget=Q;try{y(m)}catch(ie){lh(ie)}m.currentTarget=null,y=F}else for(A=0;A<d.length;A++){if(I=d[A],F=I.instance,Q=I.currentTarget,I=I.listener,F!==y&&m.isPropagationStopped())break e;y=I,m.currentTarget=Q;try{y(m)}catch(ie){lh(ie)}m.currentTarget=null,y=F}}}}function He(o,u){var c=u[Hs];c===void 0&&(c=u[Hs]=new Set);var d=o+"__bubble";c.has(d)||(g2(u,o,2,!1),c.add(d))}function Ip(o,u,c){var d=0;u&&(d|=4),g2(c,o,d,u)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function Cp(o){if(!o[Wh]){o[Wh]=!0,Sl.forEach(function(c){c!=="selectionchange"&&(OI.has(c)||Ip(c,!1,o),Ip(c,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Wh]||(u[Wh]=!0,Ip("selectionchange",!1,u))}}function g2(o,u,c,d){switch(G2(u)){case 2:var m=aC;break;case 8:m=oC;break;default:m=jp}c=m.bind(null,u,c,o),m=void 0,!Fo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(m=!0),d?m!==void 0?o.addEventListener(u,c,{capture:!0,passive:m}):o.addEventListener(u,c,!0):m!==void 0?o.addEventListener(u,c,{passive:m}):o.addEventListener(u,c,!1)}function bp(o,u,c,d,m){var y=d;if((u&1)===0&&(u&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var I=d.stateNode.containerInfo;if(I===m)break;if(A===4)for(A=d.return;A!==null;){var F=A.tag;if((F===3||F===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;I!==null;){if(A=pi(I),A===null)return;if(F=A.tag,F===5||F===6||F===26||F===27){d=y=A;continue e}I=I.parentNode}}d=d.return}ba(function(){var Q=y,ie=Tr(c),se=[];e:{var Z=Ym.get(o);if(Z!==void 0){var te=xi,me=o;switch(o){case"keypress":if(zo(c)===0)break e;case"keydown":case"keyup":te=oh;break;case"focusin":me="focus",te=Ho;break;case"focusout":me="blur",te=Ho;break;case"beforeblur":case"afterblur":te=Ho;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=x;break;case Gm:case qm:case Xm:te=Jf;break;case Km:te=D;break;case"scroll":case"scrollend":te=Bl;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Gi;break;case"toggle":case"beforetoggle":te=Pe}var be=(u&4)!==0,At=!be&&(o==="scroll"||o==="scrollend"),q=be?Z!==null?Z+"Capture":null:Z;be=[];for(var j=Q,W;j!==null;){var oe=j;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||q===null||(oe=Xr(j,q),oe!=null&&be.push(pc(j,oe,W))),At)break;j=j.return}0<be.length&&(Z=new te(Z,me,null,c,ie),se.push({event:Z,listeners:be}))}}if((u&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",te=o==="mouseout"||o==="pointerout",Z&&c!==Pl&&(me=c.relatedTarget||c.fromElement)&&(pi(me)||me[hi]))break e;if((te||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(me=c.relatedTarget||c.toElement,te=Q,me=me?pi(me):null,me!==null&&(At=a(me),be=me.tag,me!==At||be!==5&&be!==27&&be!==6)&&(me=null)):(te=null,me=Q),te!==me)){if(be=Vl,oe="onMouseLeave",q="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(be=Gi,oe="onPointerLeave",q="onPointerEnter",j="pointer"),At=te==null?Z:lr(te),W=me==null?Z:lr(me),Z=new be(oe,j+"leave",te,c,ie),Z.target=At,Z.relatedTarget=W,oe=null,pi(ie)===Q&&(be=new be(q,j+"enter",me,c,ie),be.target=W,be.relatedTarget=At,oe=be),At=oe,te&&me)t:{for(be=NI,q=te,j=me,W=0,oe=q;oe;oe=be(oe))W++;oe=0;for(var Te=j;Te;Te=be(Te))oe++;for(;0<W-oe;)q=be(q),W--;for(;0<oe-W;)j=be(j),oe--;for(;W--;){if(q===j||j!==null&&q===j.alternate){be=q;break t}q=be(q),j=be(j)}be=null}else be=null;te!==null&&v2(se,Z,te,be,!1),me!==null&&At!==null&&v2(se,At,me,be,!0)}}e:{if(Z=Q?lr(Q):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var et=Mm;else if(Om(Z))if(Pm)et=HS;else{et=zS;var xe=US}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Ks(Q.elementType)&&(et=Mm):et=jS;if(et&&(et=et(o,Q))){Nm(se,et,c,ie);break e}xe&&xe(o,Z,Q),o==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Ol(Z,"number",Z.value)}switch(xe=Q?lr(Q):window,o){case"focusin":(Om(xe)||xe.contentEditable==="true")&&(tu=xe,r1=Q,Hl=null);break;case"focusout":Hl=r1=tu=null;break;case"mousedown":i1=!0;break;case"contextmenu":case"mouseup":case"dragend":i1=!1,jm(se,c,ie);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":jm(se,c,ie)}var Be;if(rt)e:{switch(o){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else eu?Go(o,c)&&(qe="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(qe="onCompositionStart");qe&&(Ti&&c.locale!=="ko"&&(eu||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&eu&&(Be=kl()):(Ei=ie,Ll="value"in Ei?Ei.value:Ei.textContent,eu=!0)),xe=Qh(Q,qe),0<xe.length&&(qe=new wi(qe,o,null,c,ie),se.push({event:qe,listeners:xe}),Be?qe.data=Be:(Be=Js(c),Be!==null&&(qe.data=Be)))),(Be=Ir?kS(o,c):BS(o,c))&&(qe=Qh(Q,"onBeforeInput"),0<qe.length&&(xe=new wi("onBeforeInput","beforeinput",null,c,ie),se.push({event:xe,listeners:qe}),xe.data=Be)),bI(se,o,Q,c,ie)}p2(se,u)})}function pc(o,u,c){return{instance:o,listener:u,currentTarget:c}}function Qh(o,u){for(var c=u+"Capture",d=[];o!==null;){var m=o,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Xr(o,c),m!=null&&d.unshift(pc(o,m,y)),m=Xr(o,u),m!=null&&d.push(pc(o,m,y))),o.tag===3)return d;o=o.return}return[]}function NI(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function v2(o,u,c,d,m){for(var y=u._reactName,A=[];c!==null&&c!==d;){var I=c,F=I.alternate,Q=I.stateNode;if(I=I.tag,F!==null&&F===d)break;I!==5&&I!==26&&I!==27||Q===null||(F=Q,m?(Q=Xr(c,y),Q!=null&&A.unshift(pc(c,Q,F))):m||(Q=Xr(c,y),Q!=null&&A.push(pc(c,Q,F)))),c=c.return}A.length!==0&&o.push({event:u,listeners:A})}var MI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function m2(o){return(typeof o=="string"?o:""+o).replace(MI,`
`).replace(PI,"")}function y2(o,u){return u=m2(u),m2(o)===u}function xt(o,u,c,d,m,y){switch(c){case"children":typeof d=="string"?u==="body"||u==="textarea"&&d===""||Jn(o,d):(typeof d=="number"||typeof d=="bigint")&&u!=="body"&&Jn(o,""+d);break;case"className":cr(o,"class",d);break;case"tabIndex":cr(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(o,c,d);break;case"style":Ml(o,d,y);break;case"data":if(u!=="object"){cr(o,"data",d);break}case"src":case"href":if(d===""&&(u!=="a"||c!=="href")){o.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Ys(""+d),o.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(u!=="input"&&xt(o,u,"name",m.name,m,null),xt(o,u,"formEncType",m.formEncType,m,null),xt(o,u,"formMethod",m.formMethod,m,null),xt(o,u,"formTarget",m.formTarget,m,null)):(xt(o,u,"encType",m.encType,m,null),xt(o,u,"method",m.method,m,null),xt(o,u,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Ys(""+d),o.setAttribute(c,d);break;case"onClick":d!=null&&(o.onclick=qr);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}c=Ys(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""+d):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":d===!0?o.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,d):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(c,d):o.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(c):o.setAttribute(c,d);break;case"popover":He("beforetoggle",o),He("toggle",o),qs(o,"popover",d);break;case"xlinkActuate":Wt(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Wt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Wt(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Wt(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Wt(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Wt(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Wt(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Wt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Wt(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":qs(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Qf.get(c)||c,qs(o,c,d))}}function Rp(o,u,c,d,m,y){switch(c){case"style":Ml(o,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof d=="string"?Jn(o,d):(typeof d=="number"||typeof d=="bigint")&&Jn(o,""+d);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"onClick":d!=null&&(o.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),u=c.slice(2,m?c.length-7:void 0),y=o[vn]||null,y=y!=null?y[c]:null,typeof y=="function"&&o.removeEventListener(u,y,m),typeof d=="function")){typeof y!="function"&&y!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(u,d,m);break e}c in o?o[c]=d:d===!0?o.setAttribute(c,""):qs(o,c,d)}}}function Dn(o,u,c){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",o),He("load",o);var d=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var A=c[y];if(A!=null)switch(y){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:xt(o,u,y,A,c,null)}}m&&xt(o,u,"srcSet",c.srcSet,c,null),d&&xt(o,u,"src",c.src,c,null);return;case"input":He("invalid",o);var I=y=A=m=null,F=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var ie=c[d];if(ie!=null)switch(d){case"name":m=ie;break;case"type":A=ie;break;case"checked":F=ie;break;case"defaultChecked":Q=ie;break;case"value":y=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,u));break;default:xt(o,u,d,ie,c,null)}}Kf(o,y,I,F,Q,A,m,!1);return;case"select":He("invalid",o),d=A=y=null;for(m in c)if(c.hasOwnProperty(m)&&(I=c[m],I!=null))switch(m){case"value":y=I;break;case"defaultValue":A=I;break;case"multiple":d=I;default:xt(o,u,m,I,c,null)}u=y,c=A,o.multiple=!!d,u!=null?Ta(o,!!d,u,!1):c!=null&&Ta(o,!!d,c,!0);return;case"textarea":He("invalid",o),y=m=d=null;for(A in c)if(c.hasOwnProperty(A)&&(I=c[A],I!=null))switch(A){case"value":d=I;break;case"defaultValue":m=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:xt(o,u,A,I,c,null)}Sa(o,d,m,y);return;case"option":for(F in c)c.hasOwnProperty(F)&&(d=c[F],d!=null)&&(F==="selected"?o.selected=d&&typeof d!="function"&&typeof d!="symbol":xt(o,u,F,d,c,null));return;case"dialog":He("beforetoggle",o),He("toggle",o),He("cancel",o),He("close",o);break;case"iframe":case"object":He("load",o);break;case"video":case"audio":for(d=0;d<dc.length;d++)He(dc[d],o);break;case"image":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"embed":case"source":case"link":He("error",o),He("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:xt(o,u,Q,d,c,null)}return;default:if(Ks(u)){for(ie in c)c.hasOwnProperty(ie)&&(d=c[ie],d!==void 0&&Rp(o,u,ie,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&xt(o,u,I,d,c,null))}function LI(o,u,c,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,A=null,I=null,F=null,Q=null,ie=null;for(te in c){var se=c[te];if(c.hasOwnProperty(te)&&se!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":F=se;default:d.hasOwnProperty(te)||xt(o,u,te,null,d,se)}}for(var Z in d){var te=d[Z];if(se=c[Z],d.hasOwnProperty(Z)&&(te!=null||se!=null))switch(Z){case"type":y=te;break;case"name":m=te;break;case"checked":Q=te;break;case"defaultChecked":ie=te;break;case"value":A=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,u));break;default:te!==se&&xt(o,u,Z,te,d,se)}}Xs(o,A,I,F,Q,ie,y,m);return;case"select":te=A=I=Z=null;for(y in c)if(F=c[y],c.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":te=F;default:d.hasOwnProperty(y)||xt(o,u,y,null,d,F)}for(m in d)if(y=d[m],F=c[m],d.hasOwnProperty(m)&&(y!=null||F!=null))switch(m){case"value":Z=y;break;case"defaultValue":I=y;break;case"multiple":A=y;default:y!==F&&xt(o,u,m,y,d,F)}u=I,c=A,d=te,Z!=null?Ta(o,!!c,Z,!1):!!d!=!!c&&(u!=null?Ta(o,!!c,u,!0):Ta(o,!!c,c?[]:"",!1));return;case"textarea":te=Z=null;for(I in c)if(m=c[I],c.hasOwnProperty(I)&&m!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:xt(o,u,I,null,d,m)}for(A in d)if(m=d[A],y=c[A],d.hasOwnProperty(A)&&(m!=null||y!=null))switch(A){case"value":Z=m;break;case"defaultValue":te=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&xt(o,u,A,m,d,y)}Yf(o,Z,te);return;case"option":for(var me in c)Z=c[me],c.hasOwnProperty(me)&&Z!=null&&!d.hasOwnProperty(me)&&(me==="selected"?o.selected=!1:xt(o,u,me,null,d,Z));for(F in d)Z=d[F],te=c[F],d.hasOwnProperty(F)&&Z!==te&&(Z!=null||te!=null)&&(F==="selected"?o.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":xt(o,u,F,Z,d,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in c)Z=c[be],c.hasOwnProperty(be)&&Z!=null&&!d.hasOwnProperty(be)&&xt(o,u,be,null,d,Z);for(Q in d)if(Z=d[Q],te=c[Q],d.hasOwnProperty(Q)&&Z!==te&&(Z!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,u));break;default:xt(o,u,Q,Z,d,te)}return;default:if(Ks(u)){for(var At in c)Z=c[At],c.hasOwnProperty(At)&&Z!==void 0&&!d.hasOwnProperty(At)&&Rp(o,u,At,void 0,d,Z);for(ie in d)Z=d[ie],te=c[ie],!d.hasOwnProperty(ie)||Z===te||Z===void 0&&te===void 0||Rp(o,u,ie,Z,d,te);return}}for(var q in c)Z=c[q],c.hasOwnProperty(q)&&Z!=null&&!d.hasOwnProperty(q)&&xt(o,u,q,null,d,Z);for(se in d)Z=d[se],te=c[se],!d.hasOwnProperty(se)||Z===te||Z==null&&te==null||xt(o,u,se,Z,d,te)}function _2(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kI(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var m=c[d],y=m.transferSize,A=m.initiatorType,I=m.duration;if(y&&I&&_2(A)){for(A=0,I=m.responseEnd,d+=1;d<c.length;d++){var F=c[d],Q=F.startTime;if(Q>I)break;var ie=F.transferSize,se=F.initiatorType;ie&&_2(se)&&(F=F.responseEnd,A+=ie*(F<I?1:(I-Q)/(F-Q)))}if(--d,u+=8*(y+A)/(m.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Dp=null,Op=null;function $h(o){return o.nodeType===9?o:o.ownerDocument}function E2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function x2(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Np(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Mp=null;function BI(){var o=window.event;return o&&o.type==="popstate"?o===Mp?!1:(Mp=o,!0):(Mp=null,!1)}var A2=typeof setTimeout=="function"?setTimeout:void 0,VI=typeof clearTimeout=="function"?clearTimeout:void 0,w2=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof w2<"u"?function(o){return w2.resolve(null).then(o).catch(UI)}:A2;function UI(o){setTimeout(function(){throw o})}function Ya(o){return o==="head"}function T2(o,u){var c=u,d=0;do{var m=c.nextSibling;if(o.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"||c==="/&"){if(d===0){o.removeChild(m),bu(u);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")gc(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,gc(c);for(var y=c.firstChild;y;){var A=y.nextSibling,I=y.nodeName;y[di]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=A}}else c==="body"&&gc(o.ownerDocument.body);c=m}while(c);bu(u)}function S2(o,u){var c=o;o=0;do{var d=c.nextSibling;if(c.nodeType===1?u?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(u?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=d}while(c)}function Pp(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var c=u;switch(u=u.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Pp(c),Gs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function zI(o,u,c,d){for(;o.nodeType===1;){var m=c;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[di])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(y=o.getAttribute("rel"),y==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(y!==m.rel||o.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||o.getAttribute("title")!==(m.title==null?null:m.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(y=o.getAttribute("src"),(y!==(m.src==null?null:m.src)||o.getAttribute("type")!==(m.type==null?null:m.type)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&o.getAttribute("name")===y)return o}else return o;if(o=Mr(o.nextSibling),o===null)break}return null}function jI(o,u,c){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Mr(o.nextSibling),o===null))return null;return o}function I2(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Mr(o.nextSibling),o===null))return null;return o}function Lp(o){return o.data==="$?"||o.data==="$~"}function kp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function HI(o,u){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||c.readyState!=="loading")u();else{var d=function(){u(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Mr(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Bp=null;function C2(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(u===0)return Mr(o.nextSibling);u--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||u++}o=o.nextSibling}return null}function b2(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(u===0)return o;u--}else c!=="/$"&&c!=="/&"||u++}o=o.previousSibling}return null}function R2(o,u,c){switch(u=$h(c),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function gc(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Gs(o)}var Pr=new Map,D2=new Set;function Zh(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var aa=he.d;he.d={f:GI,r:qI,D:XI,C:KI,L:YI,m:WI,X:$I,S:QI,M:ZI};function GI(){var o=aa.f(),u=Hh();return o||u}function qI(o){var u=wr(o);u!==null&&u.tag===5&&u.type==="form"?Ky(u):aa.r(o)}var Su=typeof document>"u"?null:document;function O2(o,u,c){var d=Su;if(d&&typeof u=="string"&&u){var m=Zn(u);m='link[rel="'+o+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),D2.has(m)||(D2.add(m),o={rel:o,crossOrigin:c,href:u},d.querySelector(m)===null&&(u=d.createElement("link"),Dn(u,"link",o),Yt(u),d.head.appendChild(u)))}}function XI(o){aa.D(o),O2("dns-prefetch",o,null)}function KI(o,u){aa.C(o,u),O2("preconnect",o,u)}function YI(o,u,c){aa.L(o,u,c);var d=Su;if(d&&o&&u){var m='link[rel="preload"][as="'+Zn(u)+'"]';u==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Zn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Zn(c.imageSizes)+'"]')):m+='[href="'+Zn(o)+'"]';var y=m;switch(u){case"style":y=Iu(o);break;case"script":y=Cu(o)}Pr.has(y)||(o=v({rel:"preload",href:u==="image"&&c&&c.imageSrcSet?void 0:o,as:u},c),Pr.set(y,o),d.querySelector(m)!==null||u==="style"&&d.querySelector(vc(y))||u==="script"&&d.querySelector(mc(y))||(u=d.createElement("link"),Dn(u,"link",o),Yt(u),d.head.appendChild(u)))}}function WI(o,u){aa.m(o,u);var c=Su;if(c&&o){var d=u&&typeof u.as=="string"?u.as:"script",m='link[rel="modulepreload"][as="'+Zn(d)+'"][href="'+Zn(o)+'"]',y=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Cu(o)}if(!Pr.has(y)&&(o=v({rel:"modulepreload",href:o},u),Pr.set(y,o),c.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(mc(y)))return}d=c.createElement("link"),Dn(d,"link",o),Yt(d),c.head.appendChild(d)}}}function QI(o,u,c){aa.S(o,u,c);var d=Su;if(d&&o){var m=gi(d).hoistableStyles,y=Iu(o);u=u||"default";var A=m.get(y);if(!A){var I={loading:0,preload:null};if(A=d.querySelector(vc(y)))I.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":u},c),(c=Pr.get(y))&&Vp(o,c);var F=A=d.createElement("link");Yt(F),Dn(F,"link",o),F._p=new Promise(function(Q,ie){F.onload=Q,F.onerror=ie}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Jh(A,u,d)}A={type:"stylesheet",instance:A,count:1,state:I},m.set(y,A)}}}function $I(o,u){aa.X(o,u);var c=Su;if(c&&o){var d=gi(c).hoistableScripts,m=Cu(o),y=d.get(m);y||(y=c.querySelector(mc(m)),y||(o=v({src:o,async:!0},u),(u=Pr.get(m))&&Fp(o,u),y=c.createElement("script"),Yt(y),Dn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function ZI(o,u){aa.M(o,u);var c=Su;if(c&&o){var d=gi(c).hoistableScripts,m=Cu(o),y=d.get(m);y||(y=c.querySelector(mc(m)),y||(o=v({src:o,async:!0,type:"module"},u),(u=Pr.get(m))&&Fp(o,u),y=c.createElement("script"),Yt(y),Dn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function N2(o,u,c,d){var m=(m=ke.current)?Zh(m):null;if(!m)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(u=Iu(c.href),c=gi(m).hoistableStyles,d=c.get(u),d||(d={type:"style",instance:null,count:0,state:null},c.set(u,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Iu(c.href);var y=gi(m).hoistableStyles,A=y.get(o);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(o,A),(y=m.querySelector(vc(o)))&&!y._p&&(A.instance=y,A.state.loading=5),Pr.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Pr.set(o,c),y||JI(m,o,c,A.state))),u&&d===null)throw Error(r(528,""));return A}if(u&&d!==null)throw Error(r(529,""));return null;case"script":return u=c.async,c=c.src,typeof c=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Cu(c),c=gi(m).hoistableScripts,d=c.get(u),d||(d={type:"script",instance:null,count:0,state:null},c.set(u,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Iu(o){return'href="'+Zn(o)+'"'}function vc(o){return'link[rel="stylesheet"]['+o+"]"}function M2(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function JI(o,u,c,d){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?d.loading=1:(u=o.createElement("link"),d.preload=u,u.addEventListener("load",function(){return d.loading|=1}),u.addEventListener("error",function(){return d.loading|=2}),Dn(u,"link",c),Yt(u),o.head.appendChild(u))}function Cu(o){return'[src="'+Zn(o)+'"]'}function mc(o){return"script[async]"+o}function P2(o,u,c){if(u.count++,u.instance===null)switch(u.type){case"style":var d=o.querySelector('style[data-href~="'+Zn(c.href)+'"]');if(d)return u.instance=d,Yt(d),d;var m=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Yt(d),Dn(d,"style",m),Jh(d,c.precedence,o),u.instance=d;case"stylesheet":m=Iu(c.href);var y=o.querySelector(vc(m));if(y)return u.state.loading|=4,u.instance=y,Yt(y),y;d=M2(c),(m=Pr.get(m))&&Vp(d,m),y=(o.ownerDocument||o).createElement("link"),Yt(y);var A=y;return A._p=new Promise(function(I,F){A.onload=I,A.onerror=F}),Dn(y,"link",d),u.state.loading|=4,Jh(y,c.precedence,o),u.instance=y;case"script":return y=Cu(c.src),(m=o.querySelector(mc(y)))?(u.instance=m,Yt(m),m):(d=c,(m=Pr.get(y))&&(d=v({},c),Fp(d,m)),o=o.ownerDocument||o,m=o.createElement("script"),Yt(m),Dn(m,"link",d),o.head.appendChild(m),u.instance=m);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(d=u.instance,u.state.loading|=4,Jh(d,c.precedence,o));return u.instance}function Jh(o,u,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,y=m,A=0;A<d.length;A++){var I=d[A];if(I.dataset.precedence===u)y=I;else if(y!==m)break}y?y.parentNode.insertBefore(o,y.nextSibling):(u=c.nodeType===9?c.head:c,u.insertBefore(o,u.firstChild))}function Vp(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Fp(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var ed=null;function L2(o,u,c){if(ed===null){var d=new Map,m=ed=new Map;m.set(c,d)}else m=ed,d=m.get(c),d||(d=new Map,m.set(c,d));if(d.has(o))return d;for(d.set(o,null),c=c.getElementsByTagName(o),m=0;m<c.length;m++){var y=c[m];if(!(y[di]||y[Kt]||o==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(u)||"";A=o+A;var I=d.get(A);I?I.push(y):d.set(A,[y])}}return d}function k2(o,u,c){o=o.ownerDocument||o,o.head.insertBefore(c,u==="title"?o.querySelector("head > title"):null)}function eC(o,u,c){if(c===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function B2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function tC(o,u,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=Iu(d.href),y=u.querySelector(vc(m));if(y){u=y._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=td.bind(o),u.then(o,o)),c.state.loading|=4,c.instance=y,Yt(y);return}y=u.ownerDocument||u,d=M2(d),(m=Pr.get(m))&&Vp(d,m),y=y.createElement("link"),Yt(y);var A=y;A._p=new Promise(function(I,F){A.onload=I,A.onerror=F}),Dn(y,"link",d),c.instance=y}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=td.bind(o),u.addEventListener("load",c),u.addEventListener("error",c))}}var Up=0;function nC(o,u){return o.stylesheets&&o.count===0&&rd(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var d=setTimeout(function(){if(o.stylesheets&&rd(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4+u);0<o.imgBytes&&Up===0&&(Up=62500*kI());var m=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&rd(o,o.stylesheets),o.unsuspend)){var y=o.unsuspend;o.unsuspend=null,y()}},(o.imgBytes>Up?50:800)+u);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rd(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var nd=null;function rd(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,nd=new Map,u.forEach(rC,o),nd=null,td.call(o))}function rC(o,u){if(!(u.state.loading&4)){var c=nd.get(o);if(c)var d=c.get(null);else{c=new Map,nd.set(o,c);for(var m=o.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var A=m[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}m=u.instance,A=m.getAttribute("data-precedence"),y=c.get(A)||d,y===d&&c.set(null,m),c.set(A,m),this.count++,d=td.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),y?y.parentNode.insertBefore(m,y.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(m,o.firstChild)),u.state.loading|=4}}var yc={$$typeof:B,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function iC(o,u,c,d,m,y,A,I,F){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function V2(o,u,c,d,m,y,A,I,F,Q,ie,se){return o=new iC(o,u,c,A,F,Q,ie,se,I),u=1,y===!0&&(u|=24),y=hr(3,null,null,u),o.current=y,y.stateNode=o,u=_1(),u.refCount++,o.pooledCache=u,u.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:u},w1(y),o}function F2(o){return o?(o=iu,o):iu}function U2(o,u,c,d,m,y){m=F2(m),d.context===null?d.context=m:d.pendingContext=m,d=Ba(u),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Va(o,d,u),c!==null&&(ir(c,o,u),Ql(c,o,u))}function z2(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<u?c:u}}function zp(o,u){z2(o,u),(o=o.alternate)&&z2(o,u)}function j2(o){if(o.tag===13||o.tag===31){var u=Ko(o,67108864);u!==null&&ir(u,o,67108864),zp(o,67108864)}}function H2(o){if(o.tag===13||o.tag===31){var u=mr();u=Lo(u);var c=Ko(o,u);c!==null&&ir(c,o,u),zp(o,u)}}var id=!0;function aC(o,u,c,d){var m=ne.T;ne.T=null;var y=he.p;try{he.p=2,jp(o,u,c,d)}finally{he.p=y,ne.T=m}}function oC(o,u,c,d){var m=ne.T;ne.T=null;var y=he.p;try{he.p=8,jp(o,u,c,d)}finally{he.p=y,ne.T=m}}function jp(o,u,c,d){if(id){var m=Hp(d);if(m===null)bp(o,u,d,ad,c),q2(o,d);else if(uC(m,o,u,c,d))d.stopPropagation();else if(q2(o,d),u&4&&-1<sC.indexOf(o)){for(;m!==null;){var y=wr(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=li(y.pendingLanes);if(A!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var F=1<<31-zt(A);I.entanglements[1]|=F,A&=~F}bi(y),(it&6)===0&&(zh=Hn()+500,hc(0))}}break;case 31:case 13:I=Ko(y,2),I!==null&&ir(I,y,2),Hh(),zp(y,2)}if(y=Hp(d),y===null&&bp(o,u,d,ad,c),y===m)break;m=y}m!==null&&d.stopPropagation()}else bp(o,u,d,null,c)}}function Hp(o){return o=Tr(o),Gp(o)}var ad=null;function Gp(o){if(ad=null,o=pi(o),o!==null){var u=a(o);if(u===null)o=null;else{var c=u.tag;if(c===13){if(o=s(u),o!==null)return o;o=null}else if(c===31){if(o=l(u),o!==null)return o;o=null}else if(c===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return ad=o,null}function G2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oo()){case xl:return 2;case Al:return 8;case Aa:case Q0:return 32;case Bf:return 268435456;default:return 32}default:return 32}}var qp=!1,Wa=null,Qa=null,$a=null,_c=new Map,Ec=new Map,Za=[],sC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q2(o,u){switch(o){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":_c.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(u.pointerId)}}function xc(o,u,c,d,m,y){return o===null||o.nativeEvent!==y?(o={blockedOn:u,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},u!==null&&(u=wr(u),u!==null&&j2(u)),o):(o.eventSystemFlags|=d,u=o.targetContainers,m!==null&&u.indexOf(m)===-1&&u.push(m),o)}function uC(o,u,c,d,m){switch(u){case"focusin":return Wa=xc(Wa,o,u,c,d,m),!0;case"dragenter":return Qa=xc(Qa,o,u,c,d,m),!0;case"mouseover":return $a=xc($a,o,u,c,d,m),!0;case"pointerover":var y=m.pointerId;return _c.set(y,xc(_c.get(y)||null,o,u,c,d,m)),!0;case"gotpointercapture":return y=m.pointerId,Ec.set(y,xc(Ec.get(y)||null,o,u,c,d,m)),!0}return!1}function X2(o){var u=pi(o.target);if(u!==null){var c=a(u);if(c!==null){if(u=c.tag,u===13){if(u=s(c),u!==null){o.blockedOn=u,Hr(o.priority,function(){H2(c)});return}}else if(u===31){if(u=l(c),u!==null){o.blockedOn=u,Hr(o.priority,function(){H2(c)});return}}else if(u===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function od(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var c=Hp(o.nativeEvent);if(c===null){c=o.nativeEvent;var d=new c.constructor(c.type,c);Pl=d,c.target.dispatchEvent(d),Pl=null}else return u=wr(c),u!==null&&j2(u),o.blockedOn=c,!1;u.shift()}return!0}function K2(o,u,c){od(o)&&c.delete(u)}function lC(){qp=!1,Wa!==null&&od(Wa)&&(Wa=null),Qa!==null&&od(Qa)&&(Qa=null),$a!==null&&od($a)&&($a=null),_c.forEach(K2),Ec.forEach(K2)}function sd(o,u){o.blockedOn===u&&(o.blockedOn=null,qp||(qp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,lC)))}var ud=null;function Y2(o){ud!==o&&(ud=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ud===o&&(ud=null);for(var u=0;u<o.length;u+=3){var c=o[u],d=o[u+1],m=o[u+2];if(typeof d!="function"){if(Gp(d||c)===null)continue;break}var y=wr(c);y!==null&&(o.splice(u,3),u-=3,H1(y,{pending:!0,data:m,method:c.method,action:d},d,m))}}))}function bu(o){function u(F){return sd(F,o)}Wa!==null&&sd(Wa,o),Qa!==null&&sd(Qa,o),$a!==null&&sd($a,o),_c.forEach(u),Ec.forEach(u);for(var c=0;c<Za.length;c++){var d=Za[c];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Za.length&&(c=Za[0],c.blockedOn===null);)X2(c),c.blockedOn===null&&Za.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var m=c[d],y=c[d+1],A=m[vn]||null;if(typeof y=="function")A||Y2(c);else if(A){var I=null;if(y&&y.hasAttribute("formAction")){if(m=y,A=y[vn]||null)I=A.formAction;else if(Gp(m)!==null)continue}else I=A.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),Y2(c)}}}function W2(){function o(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(A){return m=A})},focusReset:"manual",scroll:"manual"})}function u(){m!==null&&(m(),m=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),m!==null&&(m(),m=null)}}}function Xp(o){this._internalRoot=o}ld.prototype.render=Xp.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var c=u.current,d=mr();U2(c,d,o,u,null,null)},ld.prototype.unmount=Xp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;U2(o.current,2,null,o,null,null),Hh(),u[hi]=null}};function ld(o){this._internalRoot=o}ld.prototype.unstable_scheduleHydration=function(o){if(o){var u=Hf();o={blockedOn:null,target:o,priority:u};for(var c=0;c<Za.length&&u!==0&&u<Za[c].priority;c++);Za.splice(c,0,o),c===0&&X2(o)}};var Q2=e.version;if(Q2!=="19.2.3")throw Error(r(527,Q2,"19.2.3"));he.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=h(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var cC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{zr=cd.inject(cC),Sn=cd}catch{}}return wc.createRoot=function(o,u){if(!i(o))throw Error(r(299));var c=!1,d="",m=r_,y=i_,A=a_;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(d=u.identifierPrefix),u.onUncaughtError!==void 0&&(m=u.onUncaughtError),u.onCaughtError!==void 0&&(y=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),u=V2(o,1,!1,null,null,c,d,null,m,y,A,W2),o[hi]=u.current,Cp(o),new Xp(u)},wc.hydrateRoot=function(o,u,c){if(!i(o))throw Error(r(299));var d=!1,m="",y=r_,A=i_,I=a_,F=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),u=V2(o,1,!0,u,c??null,d,m,F,y,A,I,W2),u.context=F2(null),c=u.current,d=mr(),d=Lo(d),m=Ba(d),m.callback=null,Va(c,m,d),c=d,u.current.lanes=c,Mo(u,c),bi(u),o[hi]=u.current,Cp(o),new ld(u)},wc.version="19.2.3",wc}var oE;function AC(){if(oE)return Wp.exports;oE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wp.exports=xC(),Wp.exports}var wC=AC();const TC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),sE=n=>{const e=SC(n);return e.charAt(0).toUpperCase()+e.slice(1)},$A=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),IC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var CC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bC=ye.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...l},f)=>ye.createElement("svg",{ref:f,...CC,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:$A("lucide",i),...!a&&!IC(l)&&{"aria-hidden":"true"},...l},[...s.map(([h,p])=>ye.createElement(h,p)),...Array.isArray(a)?a:[a]]));const Bt=(n,e)=>{const t=ye.forwardRef(({className:r,...i},a)=>ye.createElement(bC,{ref:a,iconNode:e,className:$A(`lucide-${TC(sE(n))}`,`lucide-${n}`,r),...i}));return t.displayName=sE(n),t};const RC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],DC=Bt("arrow-right",RC);const OC=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],NC=Bt("box",OC);const MC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ZA=Bt("circle-alert",MC);const PC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JA=Bt("circle-check-big",PC);const LC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kC=Bt("circle",LC);const BC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],VC=Bt("download",BC);const FC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UC=Bt("eye-off",FC);const zC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jC=Bt("eye",zC);const HC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GC=Bt("info",HC);const qC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],_v=Bt("loader-circle",qC);const XC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],KC=Bt("log-in",XC);const YC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ew=Bt("log-out",YC);const WC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],QC=Bt("mail",WC);const $C=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ZC=Bt("moon",$C);const JC=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],uE=Bt("package",JC);const e4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tw=Bt("plus",e4);const t4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],lE=Bt("scan-barcode",t4);const n4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cE=Bt("settings",n4);const r4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],fE=Bt("shopping-cart",r4);const i4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],a4=Bt("sun",i4);const o4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],s4=Bt("trash-2",o4);const u4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],l4=Bt("user-plus",u4);const c4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nw=Bt("x",c4),f4=()=>{};var hE={};const rw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},h4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],s=n[t++],l=n[t++],f=((i&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],s=i+1<n.length,l=s?n[i+1]:0,f=i+2<n.length,h=f?n[i+2]:0,p=a>>2,v=(a&3)<<4|l>>4;let _=(l&15)<<2|h>>6,E=h&63;f||(E=64,s||(_=64)),r.push(t[p],t[v],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(rw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):h4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||l==null||h==null||v==null)throw new d4;const _=a<<2|l>>4;if(r.push(_),h!==64){const E=l<<4&240|h>>2;if(r.push(E),v!==64){const w=h<<6&192|v;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class d4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const p4=function(n){const e=rw(n);return iw.encodeByteArray(e,!0)},qd=function(n){return p4(n).replace(/\./g,"")},aw=function(n){try{return iw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ow(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const g4=()=>ow().__FIREBASE_DEFAULTS__,v4=()=>{if(typeof process>"u"||typeof hE>"u")return;const n=hE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},m4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&aw(n[1]);return e&&JSON.parse(e)},_0=()=>{try{return f4()||g4()||v4()||m4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sw=n=>_0()?.emulatorHosts?.[n],y4=n=>{const e=sw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uw=()=>_0()?.config,lw=n=>_0()?.[`_${n}`];class _4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function cl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cw(n){return(await fetch(n,{credentials:"include"})).ok}function E4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qd(JSON.stringify(t)),qd(JSON.stringify(s)),""].join(".")}const Hc={};function x4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hc))Hc[e]?n.emulator.push(e):n.prod.push(e);return n}function A4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dE=!1;function fw(n,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||Hc[n]===e||Hc[n]||dE)return;Hc[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=x4().prod.length>0;function s(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{dE=!0,s()},_}function p(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=A4(r),E=t("text"),w=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),R=document.getElementById(S)||document.createElement("a"),L=t("preprendIcon"),M=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const B=_.element;l(B),p(R,S);const G=h();f(M,L),B.append(M,w,R,G),document.body.appendChild(B)}a?(w.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function hw(){const n=_0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function I4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function C4(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function dw(){return!hw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pw(){return!hw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function gw(){try{return typeof indexedDB=="object"}catch{return!1}}function b4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const R4="FirebaseError";class ga extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=R4,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yf.prototype.create)}}class yf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?D4(a,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new ga(i,l,r)}}function D4(n,e){return n.replace(O4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const O4=/\{\$([^}]+)}/g;function N4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ss(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],s=e[i];if(pE(a)&&pE(s)){if(!Ss(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function pE(n){return n!==null&&typeof n=="object"}function _f(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Nc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Mc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function M4(n,e){const t=new P4(n,e);return t.subscribe.bind(t)}class P4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");L4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Jp),i.error===void 0&&(i.error=Jp),i.complete===void 0&&(i.complete=Jp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jp(){}function Tn(n){return n&&n._delegate?n._delegate:n}class Is{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ls="[DEFAULT]";class k4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new _4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V4(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&s.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B4(n){return n===ls?void 0:n}function V4(n){return n.instantiationMode==="EAGER"}class F4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new k4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const U4={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},z4=Xe.INFO,j4={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},H4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=j4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ev{constructor(e){this.name=e,this._logLevel=z4,this._logHandler=H4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const G4=(n,e)=>e.some(t=>n instanceof t);let gE,vE;function q4(){return gE||(gE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X4(){return vE||(vE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vw=new WeakMap,Ag=new WeakMap,mw=new WeakMap,eg=new WeakMap,xv=new WeakMap;function K4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",s)},a=()=>{t(po(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&vw.set(t,n)}).catch(()=>{}),xv.set(e,n),e}function Y4(n){if(Ag.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",s),n.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",s),n.addEventListener("abort",s)});Ag.set(n,e)}let wg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ag.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return po(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function W4(n){wg=n(wg)}function Q4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(tg(this),e,...t);return mw.set(r,e.sort?e.sort():[e]),po(r)}:X4().includes(n)?function(...e){return n.apply(tg(this),e),po(vw.get(this))}:function(...e){return po(n.apply(tg(this),e))}}function $4(n){return typeof n=="function"?Q4(n):(n instanceof IDBTransaction&&Y4(n),G4(n,q4())?new Proxy(n,wg):n)}function po(n){if(n instanceof IDBRequest)return K4(n);if(eg.has(n))return eg.get(n);const e=$4(n);return e!==n&&(eg.set(n,e),xv.set(e,n)),e}const tg=n=>xv.get(n);function Z4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(n,e),l=po(s);return r&&s.addEventListener("upgradeneeded",f=>{r(po(s.result),f.oldVersion,f.newVersion,po(s.transaction),f)}),t&&s.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),l.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const J4=["get","getKey","getAll","getAllKeys","count"],eb=["put","add","delete","clear"],ng=new Map;function mE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=eb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||J4.includes(t)))return;const a=async function(s,...l){const f=this.transaction(s,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&f.done]))[0]};return ng.set(e,a),a}W4(n=>({...n,get:(e,t,r)=>mE(e,t)||n.get(e,t,r),has:(e,t)=>!!mE(e,t)||n.has(e,t)}));class tb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nb(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function nb(n){return n.getComponent()?.type==="VERSION"}const Tg="@firebase/app",yE="0.14.6";const ca=new Ev("@firebase/app"),rb="@firebase/app-compat",ib="@firebase/analytics-compat",ab="@firebase/analytics",ob="@firebase/app-check-compat",sb="@firebase/app-check",ub="@firebase/auth",lb="@firebase/auth-compat",cb="@firebase/database",fb="@firebase/data-connect",hb="@firebase/database-compat",db="@firebase/functions",pb="@firebase/functions-compat",gb="@firebase/installations",vb="@firebase/installations-compat",mb="@firebase/messaging",yb="@firebase/messaging-compat",_b="@firebase/performance",Eb="@firebase/performance-compat",xb="@firebase/remote-config",Ab="@firebase/remote-config-compat",wb="@firebase/storage",Tb="@firebase/storage-compat",Sb="@firebase/firestore",Ib="@firebase/ai",Cb="@firebase/firestore-compat",bb="firebase",Rb="12.6.0";const Sg="[DEFAULT]",Db={[Tg]:"fire-core",[rb]:"fire-core-compat",[ab]:"fire-analytics",[ib]:"fire-analytics-compat",[sb]:"fire-app-check",[ob]:"fire-app-check-compat",[ub]:"fire-auth",[lb]:"fire-auth-compat",[cb]:"fire-rtdb",[fb]:"fire-data-connect",[hb]:"fire-rtdb-compat",[db]:"fire-fn",[pb]:"fire-fn-compat",[gb]:"fire-iid",[vb]:"fire-iid-compat",[mb]:"fire-fcm",[yb]:"fire-fcm-compat",[_b]:"fire-perf",[Eb]:"fire-perf-compat",[xb]:"fire-rc",[Ab]:"fire-rc-compat",[wb]:"fire-gcs",[Tb]:"fire-gcs-compat",[Sb]:"fire-fst",[Cb]:"fire-fst-compat",[Ib]:"fire-vertex","fire-js":"fire-js",[bb]:"fire-js-all"};const Xd=new Map,Ob=new Map,Ig=new Map;function _E(n,e){try{n.container.addComponent(e)}catch(t){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wu(n){const e=n.name;if(Ig.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,n);for(const t of Xd.values())_E(t,n);for(const t of Ob.values())_E(t,n);return!0}function Av(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _r(n){return n==null?!1:n.settings!==void 0}const Nb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new yf("app","Firebase",Nb);class Mb{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}const fl=Rb;function yw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Sg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw go.create("bad-app-name",{appName:String(i)});if(t||(t=uw()),!t)throw go.create("no-options");const a=Xd.get(i);if(a){if(Ss(t,a.options)&&Ss(r,a.config))return a;throw go.create("duplicate-app",{appName:i})}const s=new F4(i);for(const f of Ig.values())s.addComponent(f);const l=new Mb(t,r,s);return Xd.set(i,l),l}function _w(n=Sg){const e=Xd.get(n);if(!e&&n===Sg&&uw())return yw();if(!e)throw go.create("no-app",{appName:n});return e}function vo(n,e,t){let r=Db[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(s.join(" "));return}Wu(new Is(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Pb="firebase-heartbeat-database",Lb=1,ef="firebase-heartbeat-store";let rg=null;function Ew(){return rg||(rg=Z4(Pb,Lb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ef)}catch(t){console.warn(t)}}}}).catch(n=>{throw go.create("idb-open",{originalErrorMessage:n.message})})),rg}async function kb(n){try{const t=(await Ew()).transaction(ef),r=await t.objectStore(ef).get(xw(n));return await t.done,r}catch(e){if(e instanceof ga)ca.warn(e.message);else{const t=go.create("idb-get",{originalErrorMessage:e?.message});ca.warn(t.message)}}}async function EE(n,e){try{const r=(await Ew()).transaction(ef,"readwrite");await r.objectStore(ef).put(e,xw(n)),await r.done}catch(t){if(t instanceof ga)ca.warn(t.message);else{const r=go.create("idb-set",{originalErrorMessage:t?.message});ca.warn(r.message)}}}function xw(n){return`${n.name}!${n.options.appId}`}const Bb=1024,Vb=30;class Fb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Vb){const i=jb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ca.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xE(),{heartbeatsToSend:t,unsentEntries:r}=Ub(this._heartbeatsCache.heartbeats),i=qd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ca.warn(e),""}}}function xE(){return new Date().toISOString().substring(0,10)}function Ub(n,e=Bb){const t=[];let r=n.slice();for(const i of n){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),AE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),AE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class zb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gw()?b4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return EE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function AE(n){return qd(JSON.stringify({version:2,heartbeats:n})).length}function jb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Hb(n){Wu(new Is("platform-logger",e=>new tb(e),"PRIVATE")),Wu(new Is("heartbeat",e=>new Fb(e),"PRIVATE")),vo(Tg,yE,n),vo(Tg,yE,"esm2020"),vo("fire-js","")}Hb("");var Gb="firebase",qb="12.7.0";vo(Gb,qb,"app");var wE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mo,Aw;(function(){var n;function e(C,b){function N(){}N.prototype=b.prototype,C.F=b.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(k,V,z){for(var P=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)P[ze-2]=arguments[ze];return b.prototype[V].apply(k,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,b,N){N||(N=0);const k=Array(16);if(typeof b=="string")for(var V=0;V<16;++V)k[V]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(V=0;V<16;++V)k[V]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=C.g[0],N=C.g[1],V=C.g[2];let z=C.g[3],P;P=b+(z^N&(V^z))+k[0]+3614090360&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[1]+3905402710&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[2]+606105819&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[3]+3250441966&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(z^N&(V^z))+k[4]+4118548399&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[5]+1200080426&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[6]+2821735955&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[7]+4249261313&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(z^N&(V^z))+k[8]+1770035416&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[9]+2336552879&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[10]+4294925233&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[11]+2304563134&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(z^N&(V^z))+k[12]+1804603682&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[13]+4254626195&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[14]+2792965006&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[15]+1236535329&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(V^z&(N^V))+k[1]+4129170786&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[6]+3225465664&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[11]+643717713&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[0]+3921069994&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(V^z&(N^V))+k[5]+3593408605&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[10]+38016083&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[15]+3634488961&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[4]+3889429448&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(V^z&(N^V))+k[9]+568446438&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[14]+3275163606&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[3]+4107603335&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[8]+1163531501&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(V^z&(N^V))+k[13]+2850285829&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[2]+4243563512&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[7]+1735328473&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[12]+2368359562&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(N^V^z)+k[5]+4294588738&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[8]+2272392833&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[11]+1839030562&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[14]+4259657740&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(N^V^z)+k[1]+2763975236&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[4]+1272893353&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[7]+4139469664&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[10]+3200236656&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(N^V^z)+k[13]+681279174&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[0]+3936430074&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[3]+3572445317&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[6]+76029189&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(N^V^z)+k[9]+3654602809&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[12]+3873151461&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[15]+530742520&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[2]+3299628645&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(V^(N|~z))+k[0]+4096336452&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[7]+1126891415&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[14]+2878612391&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[5]+4237533241&4294967295,N=V+(P<<21&4294967295|P>>>11),P=b+(V^(N|~z))+k[12]+1700485571&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[3]+2399980690&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[10]+4293915773&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[1]+2240044497&4294967295,N=V+(P<<21&4294967295|P>>>11),P=b+(V^(N|~z))+k[8]+1873313359&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[15]+4264355552&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[6]+2734768916&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[13]+1309151649&4294967295,N=V+(P<<21&4294967295|P>>>11),P=b+(V^(N|~z))+k[4]+4149444226&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[11]+3174756917&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[2]+718787259&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.v=function(C,b){b===void 0&&(b=C.length);const N=b-this.blockSize,k=this.C;let V=this.h,z=0;for(;z<b;){if(V==0)for(;z<=N;)i(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<b;)if(k[V++]=C.charCodeAt(z++),V==this.blockSize){i(this,k),V=0;break}}else for(;z<b;)if(k[V++]=C[z++],V==this.blockSize){i(this,k),V=0;break}}this.h=V,this.o+=b},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;b=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=b&255,b/=256;for(this.v(C),C=Array(16),b=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)C[b++]=this.g[N]>>>k&255;return C};function a(C,b){var N=l;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=b(C)}function s(C,b){this.h=b;const N=[];let k=!0;for(let V=C.length-1;V>=0;V--){const z=C[V]|0;k&&z==b||(N[V]=z,k=!1)}this.g=N}var l={};function f(C){return-128<=C&&C<128?a(C,function(b){return new s([b|0],b<0?-1:0)}):new s([C|0],C<0?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return R(h(-C));const b=[];let N=1;for(let k=0;C>=N;k++)b[k]=C/N|0,N*=4294967296;return new s(b,0)}function p(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return R(p(C.substring(1),b));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(b,8));let k=v;for(let z=0;z<C.length;z+=8){var V=Math.min(8,C.length-z);const P=parseInt(C.substring(z,z+V),b);V<8?(V=h(Math.pow(b,V)),k=k.j(V).add(h(P))):(k=k.j(N),k=k.add(h(P)))}return k}var v=f(0),_=f(1),E=f(16777216);n=s.prototype,n.m=function(){if(S(this))return-R(this).m();let C=0,b=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);C+=(k>=0?k:4294967296+k)*b,b*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(S(this))return"-"+R(this).toString(C);const b=h(Math.pow(C,6));var N=this;let k="";for(;;){const V=G(N,b).g;N=L(N,V.j(b));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=V,w(N))return z+k;for(;z.length<6;)z="0"+z;k=z+k}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(let b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function S(C){return C.h==-1}n.l=function(C){return C=L(this,C),S(C)?-1:w(C)?0:1};function R(C){const b=C.g.length,N=[];for(let k=0;k<b;k++)N[k]=~C.g[k];return new s(N,~C.h).add(_)}n.abs=function(){return S(this)?R(this):this},n.add=function(C){const b=Math.max(this.g.length,C.g.length),N=[];let k=0;for(let V=0;V<=b;V++){let z=k+(this.i(V)&65535)+(C.i(V)&65535),P=(z>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);k=P>>>16,z&=65535,P&=65535,N[V]=P<<16|z}return new s(N,N[N.length-1]&-2147483648?-1:0)};function L(C,b){return C.add(R(b))}n.j=function(C){if(w(this)||w(C))return v;if(S(this))return S(C)?R(this).j(R(C)):R(R(this).j(C));if(S(C))return R(this.j(R(C)));if(this.l(E)<0&&C.l(E)<0)return h(this.m()*C.m());const b=this.g.length+C.g.length,N=[];for(var k=0;k<2*b;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let V=0;V<C.g.length;V++){const z=this.i(k)>>>16,P=this.i(k)&65535,ze=C.i(V)>>>16,yt=C.i(V)&65535;N[2*k+2*V]+=P*yt,M(N,2*k+2*V),N[2*k+2*V+1]+=z*yt,M(N,2*k+2*V+1),N[2*k+2*V+1]+=P*ze,M(N,2*k+2*V+1),N[2*k+2*V+2]+=z*ze,M(N,2*k+2*V+2)}for(C=0;C<b;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=b;C<2*b;C++)N[C]=0;return new s(N,0)};function M(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function B(C,b){this.g=C,this.h=b}function G(C,b){if(w(b))throw Error("division by zero");if(w(C))return new B(v,v);if(S(C))return b=G(R(C),b),new B(R(b.g),R(b.h));if(S(b))return b=G(C,R(b)),new B(R(b.g),b.h);if(C.g.length>30){if(S(C)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var N=_,k=b;k.l(C)<=0;)N=$(N),k=$(k);var V=J(N,1),z=J(k,1);for(k=J(k,2),N=J(N,2);!w(k);){var P=z.add(k);P.l(C)<=0&&(V=V.add(N),z=P),k=J(k,1),N=J(N,1)}return b=L(C,V.j(b)),new B(V,b)}for(V=v;C.l(b)>=0;){for(N=Math.max(1,Math.floor(C.m()/b.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),z=h(N),P=z.j(b);S(P)||P.l(C)>0;)N-=k,z=h(N),P=z.j(b);w(z)&&(z=_),V=V.add(z),C=L(C,P)}return new B(V,C)}n.B=function(C){return G(this,C).h},n.and=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<b;k++)N[k]=this.i(k)&C.i(k);return new s(N,this.h&C.h)},n.or=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<b;k++)N[k]=this.i(k)|C.i(k);return new s(N,this.h|C.h)},n.xor=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<b;k++)N[k]=this.i(k)^C.i(k);return new s(N,this.h^C.h)};function $(C){const b=C.g.length+1,N=[];for(let k=0;k<b;k++)N[k]=C.i(k)<<1|C.i(k-1)>>>31;return new s(N,C.h)}function J(C,b){const N=b>>5;b%=32;const k=C.g.length-N,V=[];for(let z=0;z<k;z++)V[z]=b>0?C.i(z+N)>>>b|C.i(z+N+1)<<32-b:C.i(z+N);return new s(V,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Aw=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,mo=s}).apply(typeof wE<"u"?wE:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ww,Pc,Tw,Sd,Cg,Sw,Iw,Cw;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var x=0;x<g.length;++x){var T=g[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(g,x){if(x)e:{var T=r;g=g.split(".");for(var D=0;D<g.length-1;D++){var K=g[D];if(!(K in T))break e;T=T[K]}g=g[g.length-1],D=T[g],x=x(D),x!=D&&x!=null&&e(T,g,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(x){var T=[],D;for(D in x)Object.prototype.hasOwnProperty.call(x,D)&&T.push([D,x[D]]);return T}});var a=a||{},s=this||self;function l(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function f(g,x,T){return g.call.apply(g.bind,arguments)}function h(g,x,T){return h=f,h.apply(null,arguments)}function p(g,x){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),g.apply(this,D)}}function v(g,x){function T(){}T.prototype=x.prototype,g.Z=x.prototype,g.prototype=new T,g.prototype.constructor=g,g.Ob=function(D,K,ee){for(var ce=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ce[Pe-2]=arguments[Pe];return x.prototype[K].apply(D,ce)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const x=g.length;if(x>0){const T=Array(x);for(let D=0;D<x;D++)T[D]=g[D];return T}return[]}function w(g,x){for(let D=1;D<arguments.length;D++){const K=arguments[D];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=g.length||0;const ee=K.length||0;g.length=T+ee;for(let ce=0;ce<ee;ce++)g[T+ce]=K[ce]}else g.push(K)}}class S{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function R(g){s.setTimeout(()=>{throw g},0)}function L(){var g=C;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class M{constructor(){this.h=this.g=null}add(x,T){const D=B.get();D.set(x,T),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new S(()=>new G,g=>g.reset());class G{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let $,J=!1,C=new M,b=()=>{const g=Promise.resolve(void 0);$=()=>{g.then(N)}};function N(){for(var g;g=L();){try{g.h.call(g.g)}catch(T){R(T)}var x=B;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}J=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const T=()=>{};s.addEventListener("test",T,x),s.removeEventListener("test",T,x)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function ze(g,x){V.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}v(ze,V),ze.prototype.init=function(g,x){const T=this.type=g.type,D=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(T=="mouseover"?x=g.fromElement:T=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),ne=0;function he(g,x,T,D,K){this.listener=g,this.proxy=null,this.src=x,this.type=T,this.capture=!!D,this.ha=K,this.key=++ne,this.da=this.fa=!1}function we(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ze(g,x,T){for(const D in g)x.call(T,g[D],D,g)}function lt(g,x){for(const T in g)x.call(void 0,g[T],T,g)}function H(g){const x={};for(const T in g)x[T]=g[T];return x}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(g,x){let T,D;for(let K=1;K<arguments.length;K++){D=arguments[K];for(T in D)g[T]=D[T];for(let ee=0;ee<ue.length;ee++)T=ue[ee],Object.prototype.hasOwnProperty.call(D,T)&&(g[T]=D[T])}}function ve(g){this.src=g,this.g={},this.h=0}ve.prototype.add=function(g,x,T,D,K){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const ce=ke(g,x,D,K);return ce>-1?(x=g[ce],T||(x.fa=!1)):(x=new he(x,this.src,ee,!!D,K),x.fa=T,g.push(x)),x};function De(g,x){const T=x.type;if(T in g.g){var D=g.g[T],K=Array.prototype.indexOf.call(D,x,void 0),ee;(ee=K>=0)&&Array.prototype.splice.call(D,K,1),ee&&(we(x),g.g[T].length==0&&(delete g.g[T],g.h--))}}function ke(g,x,T,D){for(let K=0;K<g.length;++K){const ee=g[K];if(!ee.da&&ee.listener==x&&ee.capture==!!T&&ee.ha==D)return K}return-1}var We="closure_lm_"+(Math.random()*1e6|0),an={};function Dt(g,x,T,D,K){if(Array.isArray(x)){for(let ee=0;ee<x.length;ee++)Dt(g,x[ee],T,D,K);return null}return T=El(T),g&&g[yt]?g.J(x,T,l(D)?!!D.capture:!1,K):Ro(g,x,T,!1,D,K)}function Ro(g,x,T,D,K,ee){if(!x)throw Error("Invalid event type");const ce=l(K)?!!K.capture:!!K;let Pe=Do(g);if(Pe||(g[We]=Pe=new ve(g)),T=Pe.add(x,T,D,ce,ee),T.proxy)return T;if(D=Fs(),T.proxy=D,D.src=g,D.listener=T,g.addEventListener)z||(K=ce),K===void 0&&(K=!1),g.addEventListener(x.toString(),D,K);else if(g.attachEvent)g.attachEvent(si(x.toString()),D);else if(g.addListener&&g.removeListener)g.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Fs(){function g(T){return x.call(g.src,g.listener,T)}const x=yl;return g}function Us(g,x,T,D,K){if(Array.isArray(x))for(var ee=0;ee<x.length;ee++)Us(g,x[ee],T,D,K);else D=l(D)?!!D.capture:!!D,T=El(T),g&&g[yt]?(g=g.i,ee=String(x).toString(),ee in g.g&&(x=g.g[ee],T=ke(x,T,D,K),T>-1&&(we(x[T]),Array.prototype.splice.call(x,T,1),x.length==0&&(delete g.g[ee],g.h--)))):g&&(g=Do(g))&&(x=g.g[x.toString()],g=-1,x&&(g=ke(x,T,D,K)),(T=g>-1?x[g]:null)&&zs(T))}function zs(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[yt])De(x.i,g);else{var T=g.type,D=g.proxy;x.removeEventListener?x.removeEventListener(T,D,g.capture):x.detachEvent?x.detachEvent(si(T),D):x.addListener&&x.removeListener&&x.removeListener(D),(T=Do(x))?(De(T,g),T.h==0&&(T.src=null,x[We]=null)):we(g)}}}function si(g){return g in an?an[g]:an[g]="on"+g}function yl(g,x){if(g.da)g=!0;else{x=new ze(x,this);const T=g.listener,D=g.ha||g.src;g.fa&&zs(g),g=T.call(D,x)}return g}function Do(g){return g=g[We],g instanceof ve?g:null}var _l="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(g){return typeof g=="function"?g:(g[_l]||(g[_l]=function(x){return g.handleEvent(x)}),g[_l])}function qt(){k.call(this),this.i=new ve(this),this.M=this,this.G=null}v(qt,k),qt.prototype[yt]=!0,qt.prototype.removeEventListener=function(g,x,T,D){Us(this,g,x,T,D)};function on(g,x){var T,D=g.G;if(D)for(T=[];D;D=D.G)T.push(D);if(g=g.M,D=x.type||x,typeof x=="string")x=new V(x,g);else if(x instanceof V)x.target=x.target||g;else{var K=x;x=new V(D,g),ge(x,K)}K=!0;let ee,ce;if(T)for(ce=T.length-1;ce>=0;ce--)ee=x.g=T[ce],K=xa(ee,D,!0,x)&&K;if(ee=x.g=g,K=xa(ee,D,!0,x)&&K,K=xa(ee,D,!1,x)&&K,T)for(ce=0;ce<T.length;ce++)ee=x.g=T[ce],K=xa(ee,D,!1,x)&&K}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const T=g.g[x];for(let D=0;D<T.length;D++)we(T[D]);delete g.g[x],g.h--}}this.G=null},qt.prototype.J=function(g,x,T,D){return this.i.add(String(g),x,!1,T,D)},qt.prototype.K=function(g,x,T,D){return this.i.add(String(g),x,!0,T,D)};function xa(g,x,T,D){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let K=!0;for(let ee=0;ee<x.length;++ee){const ce=x[ee];if(ce&&!ce.da&&ce.capture==T){const Pe=ce.listener,jt=ce.ha||ce.src;ce.fa&&De(g.i,ce),K=Pe.call(jt,D)!==!1&&K}}return K&&!D.defaultPrevented}function W0(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:s.setTimeout(g,x||0)}function kf(g){g.g=W0(()=>{g.g=null,g.i&&(g.i=!1,kf(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class Hn extends k{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:kf(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oo(g){k.call(this),this.h=g,this.g={}}v(Oo,k);var xl=[];function Al(g){Ze(g.g,function(x,T){this.g.hasOwnProperty(T)&&zs(x)},g),g.g={}}Oo.prototype.N=function(){Oo.Z.N.call(this),Al(this)},Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Aa=s.JSON.stringify,Q0=s.JSON.parse,Bf=class{stringify(g){return s.JSON.stringify(g,void 0)}parse(g){return s.JSON.parse(g,void 0)}};function Vf(){}function Ff(){}var zr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){V.call(this,"d")}v(Sn,V);function Ar(){V.call(this,"c")}v(Ar,V);var zt={},Uf=null;function js(){return Uf=Uf||new qt}zt.Ia="serverreachability";function zf(g){V.call(this,zt.Ia,g)}v(zf,V);function ui(g){const x=js();on(x,new zf(x))}zt.STAT_EVENT="statevent";function No(g,x){V.call(this,zt.STAT_EVENT,g),this.stat=x}v(No,V);function Xt(g){const x=js();on(x,new No(x,g))}zt.Ja="timingevent";function li(g,x){V.call(this,zt.Ja,g),this.size=x}v(li,V);function ci(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){g()},x)}function jr(){this.g=!0}jr.prototype.ua=function(){this.g=!1};function $0(g,x,T,D,K,ee){g.info(function(){if(g.g)if(ee){var ce="",Pe=ee.split("&");for(let rt=0;rt<Pe.length;rt++){var jt=Pe[rt].split("=");if(jt.length>1){const Ot=jt[0];jt=jt[1];const Ir=Ot.split("_");ce=Ir.length>=2&&Ir[1]=="type"?ce+(Ot+"="+jt+"&"):ce+(Ot+"=redacted&")}}}else ce=null;else ce=ee;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+x+`
`+T+`
`+ce})}function jf(g,x,T,D,K,ee,ce){g.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+x+`
`+T+`
`+ee+" "+ce})}function fi(g,x,T,D){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+Z0(g,T)+(D?" "+D:"")})}function Mo(g,x){g.info(function(){return"TIMEOUT: "+x})}jr.prototype.info=function(){};function Z0(g,x){if(!g.g)return x;if(!x)return null;try{const ee=JSON.parse(x);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var T=ee[g];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var K=D[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ce=1;ce<D.length;ce++)D[ce]=""}}}}return Aa(ee)}catch{return x}}var Po={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tl;function Lo(){}v(Lo,Vf),Lo.prototype.g=function(){return new XMLHttpRequest},Tl=new Lo;function zi(g){return encodeURIComponent(String(g))}function Hf(g){var x=1;g=g.split(":");const T=[];for(;x>0&&g.length;)T.push(g.shift()),x--;return g.length&&T.push(g.join(":")),T}function Hr(g,x,T,D){this.j=g,this.i=x,this.l=T,this.S=D||1,this.V=new Oo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gr}function Gr(){this.i=null,this.g="",this.h=!1}var Kt={},vn={};function hi(g,x,T){g.M=1,g.A=ko(Wt(x)),g.u=T,g.R=!0,Hs(g,null)}function Hs(g,x){g.F=Date.now(),di(g),g.B=Wt(g.A);var T=g.B,D=g.S;Array.isArray(D)||(D=[String(D)]),Ks(T.i,"t",D),g.C=0,T=g.j.L,g.h=new Gr,g.g=ih(g.j,T?x:null,!g.u),g.P>0&&(g.O=new Hn(h(g.Y,g,g.g),g.P)),x=g.V,T=g.g,D=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(xl[0]=K.toString()),K=xl);for(let ee=0;ee<K.length;ee++){const ce=Dt(T,K[ee],D||x.handleEvent,!1,x.h||x);if(!ce)break;x.g[ce.key]=ce}x=g.J?H(g.J):{},g.u?(g.v||(g.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,x)):(g.v="GET",g.g.ea(g.B,g.v,null,x)),ui(),$0(g.i,g.v,g.B,g.l,g.S,g.u)}Hr.prototype.ba=function(g){g=g.target;const x=this.O;x&&Kr(g)==3?x.j():this.Y(g)},Hr.prototype.Y=function(g){try{if(g==this.g)e:{const Pe=Kr(this.g),jt=this.g.ya(),rt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||Pe!=4||jt==7||(jt==8||rt<=0?ui(3):ui(2)),pi(this);var x=this.g.ca();this.X=x;var T=J0(this);if(this.o=x==200,jf(this.i,this.v,this.B,this.l,this.S,Pe,x),this.o){if(this.U&&!this.L){t:{if(this.g){var D,K=this.g;if((D=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var ee=D;break t}}ee=null}if(g=ee)fi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,g);else{this.o=!1,this.m=3,Xt(12),lr(this),wr(this);break e}}if(this.R){g=!0;let Ot;for(;!this.K&&this.C<T.length;)if(Ot=qf(this,T),Ot==vn){Pe==4&&(this.m=4,Xt(14),g=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Kt){this.m=4,Xt(15),fi(this.i,this.l,T,"[Invalid Chunk]"),g=!1;break}else fi(this.i,this.l,Ot,null),gi(this,Ot);if(Gf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||T.length!=0||this.h.h||(this.m=1,Xt(16),g=!1),this.o=this.o&&g,!g)fi(this.i,this.l,T,"[Invalid Chunked Response]"),lr(this),wr(this);else if(T.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Fl(ce),ce.P=!0,Xt(11))}}else fi(this.i,this.l,T,null),gi(this,T);Pe==4&&lr(this),this.o&&!this.K&&(Pe==4?eh(this.j,this):(this.o=!1,di(this)))}else Hi(this.g),x==400&&T.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),lr(this),wr(this)}}}catch{}};function J0(g){if(!Gf(g))return g.g.la();const x=In(g.g);if(x==="")return"";let T="";const D=x.length,K=Kr(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return lr(g),wr(g),"";g.h.i=new s.TextDecoder}for(let ee=0;ee<D;ee++)g.h.h=!0,T+=g.h.i.decode(x[ee],{stream:!(K&&ee==D-1)});return x.length=0,g.h.g+=T,g.C=0,g.h.g}function Gf(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function qf(g,x){var T=g.C,D=x.indexOf(`
`,T);return D==-1?vn:(T=Number(x.substring(T,D)),isNaN(T)?Kt:(D+=1,D+T>x.length?vn:(x=x.slice(D,D+T),g.C=D+T,x)))}Hr.prototype.cancel=function(){this.K=!0,lr(this)};function di(g){g.T=Date.now()+g.H,Gs(g,g.H)}function Gs(g,x){if(g.D!=null)throw Error("WatchDog timer not null");g.D=ci(h(g.aa,g),x)}function pi(g){g.D&&(s.clearTimeout(g.D),g.D=null)}Hr.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Mo(this.i,this.B),this.M!=2&&(ui(),Xt(17)),lr(this),this.m=2,wr(this)):Gs(this,this.T-g)};function wr(g){g.j.I==0||g.K||eh(g.j,g)}function lr(g){pi(g);var x=g.O;x&&typeof x.dispose=="function"&&x.dispose(),g.O=null,Al(g.V),g.g&&(x=g.g,g.g=null,x.abort(),x.dispose())}function gi(g,x){try{var T=g.j;if(T.I!=0&&(T.g==g||mi(T.h,g))){if(!g.L&&mi(T.h,g)&&T.I==3){try{var D=T.Ba.g.parse(x)}catch{D=null}if(Array.isArray(D)&&D.length==3){var K=D;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<g.F)Zs(T),Da(T);else break e;Ho(T),Xt(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ci(h(T.Va,T),6e3));vi(T.h)<=1&&T.ta&&(T.ta=void 0)}else wi(T,11)}else if((g.L||T.g==g)&&Zs(T),!P(x))for(K=T.Ba.g.parse(x),x=0;x<K.length;x++){let rt=K[x];const Ot=rt[0];if(!(Ot<=T.K))if(T.K=Ot,rt=rt[1],T.I==2)if(rt[0]=="c"){T.M=rt[1],T.ba=rt[2];const Ir=rt[3];Ir!=null&&(T.ka=Ir,T.j.info("VER="+T.ka));const Ti=rt[4];Ti!=null&&(T.za=Ti,T.j.info("SVER="+T.za));const Yr=rt[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(D=1.5*Yr,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const Wr=g.g;if(Wr){const Go=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var ee=D.h;ee.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Cl(ee,ee.h),ee.h=null))}if(D.G){const Js=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Js&&(D.wa=Js,ct(D.J,D.G,Js))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-g.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var ce=g;if(D.na=rh(D,D.L?D.ba:null,D.W),ce.L){bl(D.h,ce);var Pe=ce,jt=D.O;jt&&(Pe.H=jt),Pe.D&&(pi(Pe),di(Pe)),D.g=ce}else Zf(D);T.i.length>0&&Ai(T)}else rt[0]!="stop"&&rt[0]!="close"||wi(T,7);else T.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?wi(T,7):Bl(T):rt[0]!="noop"&&T.l&&T.l.qa(rt),T.A=0)}}ui(4)}catch{}}var Yt=class{constructor(g,x){this.g=g,this.map=x}};function Sl(g){this.l=g||10,s.PerformanceNavigationTiming?(g=s.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Il(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function vi(g){return g.h?1:g.g?g.g.size:0}function mi(g,x){return g.h?g.h==x:g.g?g.g.has(x):!1}function Cl(g,x){g.g?g.g.add(x):g.h=x}function bl(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}Sl.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Rl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let x=g.i;for(const T of g.g.values())x=x.concat(T.G);return x}return E(g.i)}var Xf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qs(g,x){if(g){g=g.split("&");for(let T=0;T<g.length;T++){const D=g[T].indexOf("=");let K,ee=null;D>=0?(K=g[T].substring(0,D),ee=g[T].substring(D+1)):K=g[T],x(K,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function cr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;g instanceof cr?(this.l=g.l,mn(this,g.j),this.o=g.o,this.g=g.g,wa(this,g.u),this.h=g.h,Dl(this,Qf(g.i)),this.m=g.m):g&&(x=String(g).match(Xf))?(this.l=!1,mn(this,x[1]||"",!0),this.o=yi(x[2]||""),this.g=yi(x[3]||"",!0),wa(this,x[4]),this.h=yi(x[5]||"",!0),Dl(this,x[6]||"",!0),this.m=yi(x[7]||"")):(this.l=!1,this.i=new Sa(null,this.l))}cr.prototype.toString=function(){const g=[];var x=this.j;x&&g.push(Bo(x,Xs,!0),":");var T=this.g;return(T||x=="file")&&(g.push("//"),(x=this.o)&&g.push(Bo(x,Xs,!0),"@"),g.push(zi(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&g.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&g.push("/"),g.push(Bo(T,T.charAt(0)=="/"?Ol:Kf,!0))),(T=this.i.toString())&&g.push("?",T),(T=this.m)&&g.push("#",Bo(T,Yf)),g.join("")},cr.prototype.resolve=function(g){const x=Wt(this);let T=!!g.j;T?mn(x,g.j):T=!!g.o,T?x.o=g.o:T=!!g.g,T?x.g=g.g:T=g.u!=null;var D=g.h;if(T)wa(x,g.u);else if(T=!!g.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var K=x.h.lastIndexOf("/");K!=-1&&(D=x.h.slice(0,K+1)+D)}if(K=D,K==".."||K==".")D="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){D=K.lastIndexOf("/",0)==0,K=K.split("/");const ee=[];for(let ce=0;ce<K.length;){const Pe=K[ce++];Pe=="."?D&&ce==K.length&&ee.push(""):Pe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),D&&ce==K.length&&ee.push("")):(ee.push(Pe),D=!0)}D=ee.join("/")}else D=K}return T?x.h=D:T=g.i.toString()!=="",T?Dl(x,Qf(g.i)):T=!!g.m,T&&(x.m=g.m),x};function Wt(g){return new cr(g)}function mn(g,x,T){g.j=T?yi(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function wa(g,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);g.u=x}else g.u=null}function Dl(g,x,T){x instanceof Sa?(g.i=x,Ys(g.i,g.l)):(T||(x=Bo(x,Ta)),g.i=new Sa(x,g.l))}function ct(g,x,T){g.i.set(x,T)}function ko(g){return ct(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function yi(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Bo(g,x,T){return typeof g=="string"?(g=encodeURI(g).replace(x,Zn),T&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Zn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Xs=/[#\/\?@]/g,Kf=/[#\?:]/g,Ol=/[#\?]/g,Ta=/[#\?@]/g,Yf=/#/g;function Sa(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function Jn(g){g.g||(g.g=new Map,g.h=0,g.i&&qs(g.i,function(x,T){g.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}n=Sa.prototype,n.add=function(g,x){Jn(this),this.i=null,g=Ia(this,g);let T=this.g.get(g);return T||this.g.set(g,T=[]),T.push(x),this.h+=1,this};function Wf(g,x){Jn(g),x=Ia(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function Nl(g,x){return Jn(g),x=Ia(g,x),g.g.has(x)}n.forEach=function(g,x){Jn(this),this.g.forEach(function(T,D){T.forEach(function(K){g.call(x,K,D,this)},this)},this)};function Ml(g,x){Jn(g);let T=[];if(typeof x=="string")Nl(g,x)&&(T=T.concat(g.g.get(Ia(g,x))));else for(g=Array.from(g.g.values()),x=0;x<g.length;x++)T=T.concat(g[x]);return T}n.set=function(g,x){return Jn(this),this.i=null,g=Ia(this,g),Nl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},n.get=function(g,x){return g?(g=Ml(this,g),g.length>0?String(g[0]):x):x};function Ks(g,x,T){Wf(g,x),T.length>0&&(g.i=null,g.g.set(Ia(g,x),E(T)),g.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(let D=0;D<x.length;D++){var T=x[D];const K=zi(T);T=Ml(this,T);for(let ee=0;ee<T.length;ee++){let ce=K;T[ee]!==""&&(ce+="="+zi(T[ee])),g.push(ce)}}return this.i=g.join("&")};function Qf(g){const x=new Sa;return x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),x}function Ia(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function Ys(g,x){x&&!g.j&&(Jn(g),g.i=null,g.g.forEach(function(T,D){const K=D.toLowerCase();D!=K&&(Wf(this,D),Ks(this,K,T))},g)),g.j=x}function qr(g,x){const T=new jr;if(s.Image){const D=new Image;D.onload=p(Tr,T,"TestLoadImage: loaded",!0,x,D),D.onerror=p(Tr,T,"TestLoadImage: error",!1,x,D),D.onabort=p(Tr,T,"TestLoadImage: abort",!1,x,D),D.ontimeout=p(Tr,T,"TestLoadImage: timeout",!1,x,D),s.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=g}else x(!1)}function Pl(g,x){const T=new jr,D=new AbortController,K=setTimeout(()=>{D.abort(),Tr(T,"TestPingServer: timeout",!1,x)},1e4);fetch(g,{signal:D.signal}).then(ee=>{clearTimeout(K),ee.ok?Tr(T,"TestPingServer: ok",!0,x):Tr(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(K),Tr(T,"TestPingServer: error",!1,x)})}function Tr(g,x,T,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(T)}catch{}}function Ca(){this.g=new Bf}function _i(g){this.i=g.Sb||null,this.h=g.ab||!1}v(_i,Vf),_i.prototype.g=function(){return new Vo(this.i,this.h)};function Vo(g,x){qt.call(this),this.H=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Vo,qt),n=Vo.prototype,n.open=function(g,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=x,this.readyState=1,Xr(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(x.body=g),(this.H||s).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ws(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ws(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?ba(this):Xr(this),this.readyState==3&&Ws(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,ba(this))},n.Na=function(g){this.g&&(this.response=g,ba(this))},n.ga=function(){this.g&&ba(this)};function ba(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Xr(g)}n.setRequestHeader=function(g,x){this.A.append(g,x)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,g.push(T[0]+": "+T[1]),T=x.next();return g.join(`\r
`)};function Xr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Sr(g){let x="";return Ze(g,function(T,D){x+=D,x+=":",x+=T,x+=`\r
`}),x}function Fo(g,x,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Sr(T),typeof g=="string"?T!=null&&zi(T):ct(g,x,T))}function _t(g){qt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(_t,qt);var Ei=/^https?$/i,Ll=["POST","PUT"];n=_t.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,x,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tl.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(ee){Uo(this,ee);return}if(g=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)T.set(K,D[K]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ee of D.keys())T.set(ee,D.get(ee));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=s.FormData&&g instanceof s.FormData,!(Array.prototype.indexOf.call(Ll,x,void 0)>=0)||D||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ce]of T)this.g.setRequestHeader(ee,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){Uo(this,ee)}};function Uo(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.o=5,kl(g),ji(g)}function kl(g){g.A||(g.A=!0,on(g,"complete"),on(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,on(this,"complete"),on(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),_t.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?zo(this):this.Xa())},n.Xa=function(){zo(this)};function zo(g){if(g.h&&typeof a<"u"){if(g.v&&Kr(g)==4)setTimeout(g.Ca.bind(g),0);else if(on(g,"readystatechange"),Kr(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var D;if(D=ee===0){let ce=String(g.D).match(Xf)[1]||null;!ce&&s.self&&s.self.location&&(ce=s.self.location.protocol.slice(0,-1)),D=!Ei.test(ce?ce.toLowerCase():"")}T=D}if(T)on(g,"complete"),on(g,"success");else{g.o=6;try{var K=Kr(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",kl(g)}}finally{ji(g)}}}}function ji(g,x){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const T=g.g;g.g=null,x||on(g,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Kr(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var x=this.g.responseText;return g&&x.indexOf(g)==0&&(x=x.substring(g.length)),Q0(x)}};function In(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(g){const x={};g=(g.g&&Kr(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<g.length;D++){if(P(g[D]))continue;var T=Hf(g[D]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=x[K]||[];x[K]=ee,ee.push(T)}lt(x,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(g,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[g]||x}function Ra(g){this.za=0,this.i=[],this.j=new jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,g),this.Za=xi("retryDelaySeedMs",1e4,g),this.Ta=xi("forwardChannelMaxRetries",2,g),this.va=xi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Sl(g&&g.concurrentRequestLimit),this.Ba=new Ca,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(g,x,T,D){Xt(0),this.W=g,this.H=x||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=rh(this,null,this.W),Ai(this)};function Bl(g){if(Qs(g),g.I==3){var x=g.V++,T=Wt(g.J);if(ct(T,"SID",g.M),ct(T,"RID",x),ct(T,"TYPE","terminate"),jo(g,T),x=new Hr(g,g.j,x),x.M=2,x.A=ko(Wt(T)),T=!1,s.navigator&&s.navigator.sendBeacon)try{T=s.navigator.sendBeacon(x.A.toString(),"")}catch{}!T&&s.Image&&(new Image().src=x.A,T=!0),T||(x.g=ih(x.j,null),x.g.ea(x.A)),x.F=Date.now(),di(x)}nh(g)}function Da(g){g.g&&(Fl(g),g.g.cancel(),g.g=null)}function Qs(g){Da(g),g.v&&(s.clearTimeout(g.v),g.v=null),Zs(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&s.clearTimeout(g.m),g.m=null)}function Ai(g){if(!Il(g.h)&&!g.m){g.m=!0;var x=g.Ea;$||b(),J||($(),J=!0),C.add(x,g),g.D=0}}function $s(g,x){return vi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=x.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=ci(h(g.Ea,g,x),th(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new Hr(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=H(ee),ge(ee,this.U)):ee=this.U),this.u!==null||this.R||(K.J=ee,ee=null),this.S)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(x+=D,x>4096){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=$f(this,K,x),T=Wt(this.J),ct(T,"RID",g),ct(T,"CVER",22),this.G&&ct(T,"X-HTTP-Session-Id",this.G),jo(this,T),ee&&(this.R?x="headers="+zi(Sr(ee))+"&"+x:this.u&&Fo(T,this.u,ee)),Cl(this.h,K),this.Ra&&ct(T,"TYPE","init"),this.S?(ct(T,"$req",x),ct(T,"SID","null"),K.U=!0,hi(K,T,null)):hi(K,T,x),this.I=2}}else this.I==3&&(g?Vl(this,g):this.i.length==0||Il(this.h)||Vl(this))};function Vl(g,x){var T;x?T=x.l:T=g.V++;const D=Wt(g.J);ct(D,"SID",g.M),ct(D,"RID",T),ct(D,"AID",g.K),jo(g,D),g.u&&g.o&&Fo(D,g.u,g.o),T=new Hr(g,g.j,T,g.D+1),g.u===null&&(T.J=g.o),x&&(g.i=x.G.concat(g.i)),x=$f(g,T,1e3),T.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Cl(g.h,T),hi(T,D,x)}function jo(g,x){g.H&&Ze(g.H,function(T,D){ct(x,D,T)}),g.l&&Ze({},function(T,D){ct(x,D,T)})}function $f(g,x,T){T=Math.min(g.i.length,T);const D=g.l?h(g.l.Ka,g.l,g):null;e:{var K=g.i;let Pe=-1;for(;;){const jt=["count="+T];Pe==-1?T>0?(Pe=K[0].g,jt.push("ofs="+Pe)):Pe=0:jt.push("ofs="+Pe);let rt=!0;for(let Ot=0;Ot<T;Ot++){var ee=K[Ot].g;const Ir=K[Ot].map;if(ee-=Pe,ee<0)Pe=Math.max(0,K[Ot].g-100),rt=!1;else try{ee="req"+ee+"_"||"";try{var ce=Ir instanceof Map?Ir:Object.entries(Ir);for(const[Ti,Yr]of ce){let Wr=Yr;l(Yr)&&(Wr=Aa(Yr)),jt.push(ee+Ti+"="+encodeURIComponent(Wr))}}catch(Ti){throw jt.push(ee+"type="+encodeURIComponent("_badmap")),Ti}}catch{D&&D(Ir)}}if(rt){ce=jt.join("&");break e}}ce=void 0}return g=g.i.splice(0,T),x.G=g,ce}function Zf(g){if(!g.g&&!g.v){g.Y=1;var x=g.Da;$||b(),J||($(),J=!0),C.add(x,g),g.A=0}}function Ho(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=ci(h(g.Da,g),th(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Jf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=ci(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),Da(this),Jf(this))};function Fl(g){g.B!=null&&(s.clearTimeout(g.B),g.B=null)}function Jf(g){g.g=new Hr(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var x=Wt(g.na);ct(x,"RID","rpc"),ct(x,"SID",g.M),ct(x,"AID",g.K),ct(x,"CI",g.F?"0":"1"),!g.F&&g.ia&&ct(x,"TO",g.ia),ct(x,"TYPE","xmlhttp"),jo(g,x),g.u&&g.o&&Fo(x,g.u,g.o),g.O&&(g.g.H=g.O);var T=g.g;g=g.ba,T.M=1,T.A=ko(Wt(x)),T.u=null,T.R=!0,Hs(T,g)}n.Va=function(){this.C!=null&&(this.C=null,Da(this),Ho(this),Xt(19))};function Zs(g){g.C!=null&&(s.clearTimeout(g.C),g.C=null)}function eh(g,x){var T=null;if(g.g==x){Zs(g),Fl(g),g.g=null;var D=2}else if(mi(g.h,x))T=x.G,bl(g.h,x),D=1;else return;if(g.I!=0){if(x.o)if(D==1){T=x.u?x.u.length:0,x=Date.now()-x.F;var K=g.D;D=js(),on(D,new li(D,T)),Ai(g)}else Zf(g);else if(K=x.m,K==3||K==0&&x.X>0||!(D==1&&$s(g,x)||D==2&&Ho(g)))switch(T&&T.length>0&&(x=g.h,x.i=x.i.concat(T)),K){case 1:wi(g,5);break;case 4:wi(g,10);break;case 3:wi(g,6);break;default:wi(g,2)}}}function th(g,x){let T=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(T*=2),T*x}function wi(g,x){if(g.j.info("Error code "+x),x==2){var T=h(g.bb,g),D=g.Ua;const K=!D;D=new cr(D||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||mn(D,"https"),ko(D),K?qr(D.toString(),T):Pl(D.toString(),T)}else Xt(2);g.I=0,g.l&&g.l.pa(x),nh(g),Qs(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function nh(g){if(g.I=0,g.ja=[],g.l){const x=Rl(g.h);(x.length!=0||g.i.length!=0)&&(w(g.ja,x),w(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function rh(g,x,T){var D=T instanceof cr?Wt(T):new cr(T);if(D.g!="")x&&(D.g=x+"."+D.g),wa(D,D.u);else{var K=s.location;D=K.protocol,x=x?x+"."+K.hostname:K.hostname,K=+K.port;const ee=new cr(null);D&&mn(ee,D),x&&(ee.g=x),K&&wa(ee,K),T&&(ee.h=T),D=ee}return T=g.G,x=g.wa,T&&x&&ct(D,T,x),ct(D,"VER",g.ka),jo(g,D),D}function ih(g,x,T){if(x&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=g.Aa&&!g.ma?new _t(new _i({ab:T})):new _t(g.ma),x.Fa(g.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}n=ah.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Oa(){}Oa.prototype.g=function(g,x){return new Gn(g,x)};function Gn(g,x){qt.call(this),this.g=new Ra(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(g?g["X-WebChannel-Client-Profile"]=x.sa:g={"X-WebChannel-Client-Profile":x.sa}),this.g.U=g,(g=x&&x.Qb)&&!P(g)&&(this.g.u=g),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!P(x)&&(this.g.G=x,g=this.h,g!==null&&x in g&&(g=this.h,x in g&&delete g[x])),this.j=new Gi(this)}v(Gn,qt),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Bl(this.g)},Gn.prototype.o=function(g){var x=this.g;if(typeof g=="string"){var T={};T.__data__=g,g=T}else this.v&&(T={},T.__data__=Aa(g),g=T);x.i.push(new Yt(x.Ya++,g)),x.I==3&&Ai(x)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Bl(this.g),delete this.g,Gn.Z.N.call(this)};function oh(g){Sn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const T in x){g=T;break e}g=void 0}(this.i=g)&&(g=this.i,x=x!==null&&g in x?x[g]:void 0),this.data=x}else this.data=g}v(oh,Sn);function sh(){Ar.call(this),this.status=1}v(sh,Ar);function Gi(g){this.g=g}v(Gi,ah),Gi.prototype.ra=function(){on(this.g,"a")},Gi.prototype.qa=function(g){on(this.g,new oh(g))},Gi.prototype.pa=function(g){on(this.g,new sh)},Gi.prototype.oa=function(){on(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Cw=function(){return new Oa},Iw=function(){return js()},Sw=zt,Cg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,Sd=Po,wl.COMPLETE="complete",Tw=wl,Ff.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",qt.prototype.listen=qt.prototype.J,Pc=Ff,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,ww=_t}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const TE="@firebase/firestore",SE="4.9.3";class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let hl="12.7.0";const Cs=new Ev("@firebase/firestore");function ku(){return Cs.logLevel}function le(n,...e){if(Cs.logLevel<=Xe.DEBUG){const t=e.map(wv);Cs.debug(`Firestore (${hl}): ${n}`,...t)}}function Wn(n,...e){if(Cs.logLevel<=Xe.ERROR){const t=e.map(wv);Cs.error(`Firestore (${hl}): ${n}`,...t)}}function bs(n,...e){if(Cs.logLevel<=Xe.WARN){const t=e.map(wv);Cs.warn(`Firestore (${hl}): ${n}`,...t)}}function wv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function _e(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,bw(n,r,t)}function bw(n,e,t){let r=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Wn(r),new Error(r)}function Ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||bw(e,i,r)}function Ne(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ga{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Rw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class Kb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Yb{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},l=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((f=>l(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?l(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new Rw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class Wb{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Qb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Wb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $b{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const r=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new IE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new IE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Zb(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function bg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return ig(i)===ig(a)?Oe(i,a):ig(i)?1:-1}return Oe(n.length,e.length)}const Jb=55296,e8=57343;function ig(n){const e=n.charCodeAt(0);return e>=Jb&&e<=e8}function Qu(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function Dw(n){return n+"\0"}const CE="__name__";class Ri{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Ri.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Ri.isNumericId(e),i=Ri.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ri.extractNumericId(e).compare(Ri.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class st extends Ri{construct(e,t,r){return new st(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const t8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Ri{construct(e,t,r){return new Lt(e,t,r)}static isValidIdentifier(e){return t8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CE}static keyField(){return new Lt([CE])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new de(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new de(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(a(),i++)}if(a(),s)throw new de(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(st.fromString(e))}static fromName(e){return new pe(st.fromString(e).popFirst(5))}static empty(){return new pe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new st(e.slice()))}}function Ow(n,e,t){if(!t)throw new de(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function n8(n,e,t,r){if(e===!0&&r===!0)throw new de(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bE(n){if(!pe.isDocumentKey(n))throw new de(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RE(n){if(pe.isDocumentKey(n))throw new de(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function E0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function la(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=E0(n);throw new de(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ef(n,e){if(!Nw(n))throw new de(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new de(ae.INVALID_ARGUMENT,t);return!0}const DE=-62135596800,OE=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*OE);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<DE)throw new de(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OE}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ef(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-DE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:tn("string",gt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new gt(0,0))}static max(){return new Se(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const tf=-1;class Kd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Rg(n){return n.fields.find((e=>e.kind===2))}function cs(n){return n.fields.filter((e=>e.kind!==2))}Kd.UNKNOWN_ID=-1;class Id{constructor(e,t){this.fieldPath=e,this.kind=t}}class nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nf(0,xr.min())}}function r8(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new xr(i,pe.empty(),e)}function Mw(n){return new xr(n.readTime,n.key,tf)}class xr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xr(Se.min(),pe.empty(),tf)}static max(){return new xr(Se.max(),pe.empty(),tf)}}function Sv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}const Pw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bs(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Pw)throw n;le("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,r)=>{t(e)}))}static reject(e){return new X(((t,r)=>{r(e)}))}static waitFor(e){return new X(((t,r)=>{let i=0,a=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++a,s&&a===i&&t()}),(f=>r(f)))})),s=!0,a===i&&t()}))}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next((i=>i?X.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new X(((r,i)=>{const a=e.length,s=new Array(a);let l=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((p=>{s[h]=p,++l,l===a&&r(s)}),(p=>i(p)))}}))}static doWhile(e,t){return new X(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}const yr="SimpleDb";class x0{static open(e,t,r,i){try{return new x0(t,e.transaction(i,r))}catch(a){throw new Gc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Iv(r.target.error);this.S.reject(new Gc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new a8(t)}}class _o{static delete(e){return le(yr,"Removing database:",e),ds(ow().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!gw())return!1;if(_o.F())return!0;const e=pn(),t=_o.M(e),r=0<t&&t<10,i=kw(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,_o.M(pn())===12.2&&Wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(yr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;t(s)},i.onblocked=()=>{r(new Gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new de(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new de(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Gc(e,s))},i.onupgradeneeded=a=>{le(yr,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{le(yr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const l=x0.open(this.db,e,a?"readonly":"readwrite",r),f=i(l).next((h=>(l.C(),h))).catch((h=>(l.abort(h),X.reject(h)))).toPromise();return f.catch((()=>{})),await l.D,f}catch(l){const f=l,h=f.name!=="FirebaseError"&&s<3;if(le(yr,"Transaction failed with error:",f.message,"Retrying:",h),this.close(),!h)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function kw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class i8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ds(this.U.delete())}}class Gc extends de{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Co(n){return n.name==="IndexedDbTransactionError"}class a8{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(yr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ds(r)}add(e){return le(yr,"ADD",this.store.name,e,e),ds(this.store.add(e))}get(e){return ds(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(yr,"GET",this.store.name,e,t),t)))}delete(e){return le(yr,"DELETE",this.store.name,e),ds(this.store.delete(e))}count(){return le(yr,"COUNT",this.store.name),ds(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new X(((s,l)=>{a.onerror=f=>{l(f.target.error)},a.onsuccess=f=>{s(f.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((l,f)=>{s.push(f)})).next((()=>s))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new X(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,t){le(yr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,l)=>l.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new X(((r,i)=>{t.onerror=a=>{const s=Iv(a.target.error);i(s)},t.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():r()})):r()}}))}H(e,t){const r=[];return new X(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const f=new i8(l),h=t(l.primaryKey,l.value,f);if(h instanceof X){const p=h.catch((v=>(f.done(),X.reject(v))));r.push(p)}f.isDone?i():f.G===null?l.continue():l.continue(f.G)}})).next((()=>X.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ds(n){return new X(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Iv(r.target.error);t(i)}}))}let NE=!1;function Iv(n){const e=_o.M(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NE||(NE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const qc="IndexBackfiller";class o8{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(qc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(qc,`Documents written: ${t}`)}catch(t){Co(t)?le(qc,"Ignoring IndexedDB error during index backfill: ",t):await Bs(t)}await this.re(6e4)}))}}class s8{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return X.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return le(qc,`Processing collection: ${s}`),this.oe(e,s,i).next((l=>{i-=l,r.add(s)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((l=>(le(qc,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l)))).next((()=>s.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const s=Mw(a);Sv(s,r)>0&&(r=s)})),new xr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Br{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Br.ce=-1;const Es=-1;function A0(n){return n==null}function rf(n){return n===0&&1/n==-1/0}function u8(n){return typeof n=="number"&&Number.isInteger(n)&&!rf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Yd="";function zn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ME(e)),e=l8(n.get(t),e);return ME(e)}function l8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Yd:t+="";break;default:t+=a}}return t}function ME(n){return n+Yd+""}function Oi(n){const e=n.length;if(Ae(e>=2,64408,{path:n}),e===2)return Ae(n.charAt(0)===Yd&&n.charAt(1)==="",56145,{path:n}),st.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const s=n.indexOf(Yd,a);switch((s<0||s>t)&&_e(50515,{path:n}),n.charAt(s+1)){case"":const l=n.substring(a,s);let f;i.length===0?f=l:(i+=l,f=i,i=""),r.push(f);break;case"":i+=n.substring(a,s),i+="\0";break;case"":i+=n.substring(a,s+1);break;default:_e(61167,{path:n})}a=s+2}return new st(r)}const fs="remoteDocuments",xf="owner",Ru="owner",af="mutationQueues",c8="userId",ti="mutations",PE="batchId",ms="userMutationsIndex",LE=["userId","batchId"];function Cd(n,e){return[n,zn(e)]}function Bw(n,e,t){return[n,zn(e),t]}const f8={},$u="documentMutations",Wd="remoteDocumentsV14",h8=["prefixPath","collectionGroup","readTime","documentId"],bd="documentKeyIndex",d8=["prefixPath","collectionGroup","documentId"],Vw="collectionGroupIndex",p8=["collectionGroup","readTime","prefixPath","documentId"],of="remoteDocumentGlobal",Dg="remoteDocumentGlobalKey",Zu="targets",Fw="queryTargetsIndex",g8=["canonicalId","targetId"],Ju="targetDocuments",v8=["targetId","path"],Cv="documentTargetsIndex",m8=["path","targetId"],Qd="targetGlobalKey",xs="targetGlobal",sf="collectionParents",y8=["collectionId","parent"],el="clientMetadata",_8="clientId",w0="bundles",E8="bundleId",T0="namedQueries",x8="name",bv="indexConfiguration",A8="indexId",Og="collectionGroupIndex",w8="collectionGroup",Xc="indexState",T8=["indexId","uid"],Uw="sequenceNumberIndex",S8=["uid","sequenceNumber"],Kc="indexEntries",I8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zw="documentKeyIndex",C8=["indexId","uid","orderedDocumentKey"],S0="documentOverlays",b8=["userId","collectionPath","documentId"],Ng="collectionPathOverlayIndex",R8=["userId","collectionPath","largestBatchId"],jw="collectionGroupOverlayIndex",D8=["userId","collectionGroup","largestBatchId"],Rv="globals",O8="name",Hw=[af,ti,$u,fs,Zu,xf,xs,Ju,el,of,sf,w0,T0],N8=[...Hw,S0],Gw=[af,ti,$u,Wd,Zu,xf,xs,Ju,el,of,sf,w0,T0,S0],qw=Gw,Dv=[...qw,bv,Xc,Kc],M8=Dv,Xw=[...Dv,Rv],P8=Xw;class Mg extends Lw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(n,e){const t=Ne(n);return _o.O(t.le,e)}function kE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Pn.RED,this.left=i??Pn.EMPTY,this.right=a??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Pn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BE(this.data.getIterator())}getIteratorFrom(e){return new BE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class BE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Du(n){return n.hasNext()?n.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new mt(Lt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qu(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Yw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Yw("Invalid base64 string: "+a):a}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const L8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(n){if(Ae(!!n,39018),typeof n=="string"){let e=0;const t=L8.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ha(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}const Ww="server_timestamp",Qw="__type__",$w="__previous_value__",Zw="__local_write_time__";function Ov(n){return(n?.mapValue?.fields||{})[Qw]?.stringValue===Ww}function I0(n){const e=n.mapValue.fields[$w];return Ov(e)?I0(e):e}function uf(n){const e=fa(n.mapValue.fields[Zw].timestampValue);return new gt(e.seconds,e.nanos)}class k8{constructor(e,t,r,i,a,s,l,f,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p}}const $d="(default)";class Rs{constructor(e,t){this.projectId=e,this.database=t||$d}static empty(){return new Rs("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof Rs&&e.projectId===this.projectId&&e.database===this.database}}const Nv="__type__",Jw="__max__",ho={mapValue:{fields:{__type__:{stringValue:Jw}}}},Mv="__vector__",tl="value",Rd={nullValue:"NULL_VALUE"};function wo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ov(n)?4:eT(n)?9007199254740991:C0(n)?10:11:_e(28295,{value:n})}function Fi(n,e){if(n===e)return!0;const t=wo(n);if(t!==wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uf(n).isEqual(uf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=fa(i.timestampValue),l=fa(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return ha(i.bytesValue).isEqual(ha(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return Mt(i.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(i.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Mt(i.integerValue)===Mt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Mt(i.doubleValue),l=Mt(a.doubleValue);return s===l?rf(s)===rf(l):isNaN(s)&&isNaN(l)}return!1})(n,e);case 9:return Qu(n.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},l=a.mapValue.fields||{};if(kE(s)!==kE(l))return!1;for(const f in s)if(s.hasOwnProperty(f)&&(l[f]===void 0||!Fi(s[f],l[f])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function lf(n,e){return(n.values||[]).find((t=>Fi(t,e)))!==void 0}function To(n,e){if(n===e)return 0;const t=wo(n),r=wo(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=Mt(a.integerValue||a.doubleValue),f=Mt(s.integerValue||s.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1})(n,e);case 3:return VE(n.timestampValue,e.timestampValue);case 4:return VE(uf(n),uf(e));case 5:return bg(n.stringValue,e.stringValue);case 6:return(function(a,s){const l=ha(a),f=ha(s);return l.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),f=s.split("/");for(let h=0;h<l.length&&h<f.length;h++){const p=Oe(l[h],f[h]);if(p!==0)return p}return Oe(l.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=Oe(Mt(a.latitude),Mt(s.latitude));return l!==0?l:Oe(Mt(a.longitude),Mt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return FE(n.arrayValue,e.arrayValue);case 10:return(function(a,s){const l=a.fields||{},f=s.fields||{},h=l[tl]?.arrayValue,p=f[tl]?.arrayValue,v=Oe(h?.values?.length||0,p?.values?.length||0);return v!==0?v:FE(h,p)})(n.mapValue,e.mapValue);case 11:return(function(a,s){if(a===ho.mapValue&&s===ho.mapValue)return 0;if(a===ho.mapValue)return 1;if(s===ho.mapValue)return-1;const l=a.fields||{},f=Object.keys(l),h=s.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let v=0;v<f.length&&v<p.length;++v){const _=bg(f[v],p[v]);if(_!==0)return _;const E=To(l[f[v]],h[p[v]]);if(E!==0)return E}return Oe(f.length,p.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function VE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=fa(n),r=fa(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function FE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=To(t[i],r[i]);if(a)return a}return Oe(t.length,r.length)}function nl(n){return Pg(n)}function Pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=fa(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ha(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Pg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${Pg(t.fields[s])}`;return i+"}"})(n.mapValue):_e(61005,{value:n})}function Dd(n){switch(wo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=I0(n);return e?16+Dd(e):16;case 5:return 2*n.stringValue.length;case 6:return ha(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Dd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return bo(r.fields,((a,s)=>{i+=a.length+Dd(s)})),i})(n.mapValue);default:throw _e(13486,{value:n})}}function cf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lg(n){return!!n&&"integerValue"in n}function ff(n){return!!n&&"arrayValue"in n}function UE(n){return!!n&&"nullValue"in n}function zE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Od(n){return!!n&&"mapValue"in n}function C0(n){return(n?.mapValue?.fields||{})[Nv]?.stringValue===Mv}function Yc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return bo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Yc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return{...n}}function eT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Jw}const tT={mapValue:{fields:{[Nv]:{stringValue:Mv},[tl]:{arrayValue:{}}}}};function B8(n){return"nullValue"in n?Rd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cf(Rs.empty(),pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?C0(n)?tT:{mapValue:{}}:_e(35942,{value:n})}function V8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cf(Rs.empty(),pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?tT:"mapValue"in n?C0(n)?{mapValue:{}}:ho:_e(61959,{value:n})}function jE(n,e){const t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function HE(n,e){const t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Lt.emptyPath(),r={},i=[];e.forEach(((s,l)=>{if(!t.isImmediateParentOf(l)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=l.popLast()}s?r[l.lastSegment()]=Yc(s):i.push(l.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bo(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Un(Yc(this.value))}}function nT(n){const e=[];return bo(n.fields,((t,r)=>{const i=new Lt([t]);if(Od(r)){const a=nT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new sr(e)}class Ut{constructor(e,t,r,i,a,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,Se.min(),Se.min(),Se.min(),Un.empty(),0)}static newFoundDocument(e,t,r,i){return new Ut(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new Ut(e,2,t,Se.min(),Se.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Se.min(),Se.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class rl{constructor(e,t){this.position=e,this.inclusive=t}}function GE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],s=n.position[i];if(a.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),t.key):r=To(s,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function qE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fi(n.position[t],e.position[t]))return!1;return!0}class Zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function F8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class rT{}class Ke extends rT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new U8(e,t,r):t==="array-contains"?new H8(e,r):t==="in"?new lT(e,r):t==="not-in"?new G8(e,r):t==="array-contains-any"?new q8(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new z8(e,r):new j8(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(To(t,this.value)):t!==null&&wo(this.value)===wo(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends rT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return il(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function il(n){return n.op==="and"}function kg(n){return n.op==="or"}function Pv(n){return iT(n)&&il(n)}function iT(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function Bg(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+nl(n.value);if(Pv(n))return n.filters.map((e=>Bg(e))).join(",");{const e=n.filters.map((t=>Bg(t))).join(",");return`${n.op}(${e})`}}function aT(n,e){return n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Fi(r.value,i.value)})(n,e):n instanceof vt?(function(r,i){return i instanceof vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,l)=>a&&aT(s,i.filters[l])),!0):!1})(n,e):void _e(19439)}function oT(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function sT(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`})(n):n instanceof vt?(function(t){return t.op.toString()+" {"+t.getFilters().map(sT).join(" ,")+"}"})(n):"Filter"}class U8 extends Ke{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class z8 extends Ke{constructor(e,t){super(e,"in",t),this.keys=uT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class j8 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=uT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uT(n,e){return(e.arrayValue?.values||[]).map((t=>pe.fromName(t.referenceValue)))}class H8 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ff(t)&&lf(t.arrayValue,this.value)}}class lT extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lf(this.value.arrayValue,t)}}class G8 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lf(this.value.arrayValue,t)}}class q8 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ff(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>lf(this.value.arrayValue,r)))}}class X8{constructor(e,t=null,r=[],i=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=l,this.Te=null}}function Vg(n,e=null,t=[],r=[],i=null,a=null,s=null){return new X8(n,e,t,r,i,a,s)}function Ds(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Bg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),A0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>nl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>nl(r))).join(",")),e.Te=t}return e.Te}function Af(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qE(n.startAt,e.startAt)&&qE(n.endAt,e.endAt)}function Jd(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function e0(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function XE(n,e,t){let r=Rd,i=!0;for(const a of e0(n,e)){let s=Rd,l=!0;switch(a.op){case"<":case"<=":s=B8(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,l=!1;break;case"!=":case"not-in":s=Rd}jE({value:r,inclusive:i},{value:s,inclusive:l})<0&&(r=s,i=l)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const s=t.position[a];jE({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function KE(n,e,t){let r=ho,i=!0;for(const a of e0(n,e)){let s=ho,l=!0;switch(a.op){case">=":case">":s=V8(a.value),l=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,l=!1;break;case"!=":case"not-in":s=ho}HE({value:r,inclusive:i},{value:s,inclusive:l})>0&&(r=s,i=l)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const s=t.position[a];HE({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}class wf{constructor(e,t=null,r=[],i=[],a=null,s="F",l=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function K8(n,e,t,r,i,a,s,l){return new wf(n,e,t,r,i,a,s,l)}function b0(n){return new wf(n)}function YE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cT(n){return n.collectionGroup!==null}function Wc(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new mt(Lt.comparator);return s.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Zd(a,r))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new Zd(Lt.keyField(),r))}return e.Ie}function Fr(n){const e=Ne(n);return e.Ee||(e.Ee=Y8(e,Wc(n))),e.Ee}function Y8(n,e){if(n.limitType==="F")return Vg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Zd(i.field,a)}));const t=n.endAt?new rl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rl(n.startAt.position,n.startAt.inclusive):null;return Vg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Fg(n,e){const t=n.filters.concat([e]);return new wf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ug(n,e,t){return new wf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function R0(n,e){return Af(Fr(n),Fr(e))&&n.limitType===e.limitType}function fT(n){return`${Ds(Fr(n))}|lt:${n.limitType}`}function Bu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>sT(i))).join(", ")}]`),A0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>nl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>nl(i))).join(",")),`Target(${r})`})(Fr(n))}; limitType=${n.limitType})`}function Tf(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):pe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Wc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,l,f){const h=GE(s,l,f);return s.inclusive?h<=0:h<0})(r.startAt,Wc(r),i)||r.endAt&&!(function(s,l,f){const h=GE(s,l,f);return s.inclusive?h>=0:h>0})(r.endAt,Wc(r),i))})(n,e)}function W8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hT(n){return(e,t)=>{let r=!1;for(const i of Wc(n)){const a=Q8(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Q8(n,e,t){const r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(a,s,l){const f=s.data.field(a),h=l.data.field(a);return f!==null&&h!==null?To(f,h):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:n.dir})}}class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}const $8=new Pt(pe.comparator);function Er(){return $8}const dT=new Pt(pe.comparator);function Lc(...n){let e=dT;for(const t of n)e=e.insert(t.key,t);return e}function pT(n){let e=dT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ni(){return Qc()}function gT(){return Qc()}function Qc(){return new va((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Z8=new Pt(pe.comparator),J8=new mt(pe.comparator);function Fe(...n){let e=J8;for(const t of n)e=e.add(t);return e}const e6=new mt(Oe);function t6(){return e6}function Lv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(e)?"-0":e}}function vT(n){return{integerValue:""+n}}function n6(n,e){return u8(e)?vT(e):Lv(n,e)}class D0{constructor(){this._=void 0}}function r6(n,e,t){return n instanceof hf?(function(i,a){const s={fields:{[Qw]:{stringValue:Ww},[Zw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ov(a)&&(a=I0(a)),a&&(s.fields[$w]=a),{mapValue:s}})(t,e):n instanceof al?yT(n,e):n instanceof ol?_T(n,e):(function(i,a){const s=mT(i,a),l=WE(s)+WE(i.Ae);return Lg(s)&&Lg(i.Ae)?vT(l):Lv(i.serializer,l)})(n,e)}function i6(n,e,t){return n instanceof al?yT(n,e):n instanceof ol?_T(n,e):t}function mT(n,e){return n instanceof df?(function(r){return Lg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class hf extends D0{}class al extends D0{constructor(e){super(),this.elements=e}}function yT(n,e){const t=ET(e);for(const r of n.elements)t.some((i=>Fi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class ol extends D0{constructor(e){super(),this.elements=e}}function _T(n,e){let t=ET(e);for(const r of n.elements)t=t.filter((i=>!Fi(i,r)));return{arrayValue:{values:t}}}class df extends D0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WE(n){return Mt(n.integerValue||n.doubleValue)}function ET(n){return ff(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class a6{constructor(e,t){this.field=e,this.transform=t}}function o6(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof al&&i instanceof al||r instanceof ol&&i instanceof ol?Qu(r.elements,i.elements,Fi):r instanceof df&&i instanceof df?Fi(r.Ae,i.Ae):r instanceof hf&&i instanceof hf})(n.transform,e.transform)}class s6{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class O0{}function xT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new N0(n.key,Qn.none()):new dl(n.key,n.data,Qn.none());{const t=n.data,r=Un.empty();let i=new mt(Lt.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new ma(n.key,r,new sr(i.toArray()),Qn.none())}}function u6(n,e,t){n instanceof dl?(function(i,a,s){const l=i.value.clone(),f=$E(i.fieldTransforms,a,s.transformResults);l.setAll(f),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):n instanceof ma?(function(i,a,s){if(!Nd(i.precondition,a))return void a.convertToUnknownDocument(s.version);const l=$E(i.fieldTransforms,a,s.transformResults),f=a.data;f.setAll(AT(i)),f.setAll(l),a.convertToFoundDocument(s.version,f).setHasCommittedMutations()})(n,e,t):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function $c(n,e,t,r){return n instanceof dl?(function(a,s,l,f){if(!Nd(a.precondition,s))return l;const h=a.value.clone(),p=ZE(a.fieldTransforms,f,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof ma?(function(a,s,l,f){if(!Nd(a.precondition,s))return l;const h=ZE(a.fieldTransforms,f,s),p=s.data;return p.setAll(AT(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,s,l){return Nd(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(n,e,t)}function l6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=mT(r.transform,i||null);a!=null&&(t===null&&(t=Un.empty()),t.set(r.field,a))}return t||null}function QE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qu(r,i,((a,s)=>o6(a,s)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class dl extends O0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ma extends O0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function AT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function $E(n,e,t){const r=new Map;Ae(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],s=a.transform,l=e.data.field(a.field);r.set(a.field,i6(s,l,t[i]))}return r}function ZE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,s=t.data.field(i.field);r.set(i.field,r6(a,s,e))}return r}class N0 extends O0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wT extends O0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class kv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&u6(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$c(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$c(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=gT();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=t.has(i.key)?null:l;const f=xT(s,l);f!==null&&r.set(i.key,f),s.isValidDocument()||s.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Qu(this.mutations,e.mutations,((t,r)=>QE(t,r)))&&Qu(this.baseMutations,e.baseMutations,((t,r)=>QE(t,r)))}}class Bv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Z8})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new Bv(e,t,r,i)}}class Vv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class c6{constructor(e,t){this.count=e,this.unchangedNames=t}}var en,Qe;function f6(n){switch(n){case ae.OK:return _e(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function TT(n){if(n===void 0)return Wn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case en.OK:return ae.OK;case en.CANCELLED:return ae.CANCELLED;case en.UNKNOWN:return ae.UNKNOWN;case en.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case en.INTERNAL:return ae.INTERNAL;case en.UNAVAILABLE:return ae.UNAVAILABLE;case en.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case en.NOT_FOUND:return ae.NOT_FOUND;case en.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case en.ABORTED:return ae.ABORTED;case en.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case en.DATA_LOSS:return ae.DATA_LOSS;default:return _e(39323,{code:n})}}(Qe=en||(en={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function h6(){return new TextEncoder}const d6=new mo([4294967295,4294967295],0);function JE(n){const e=h6().encode(n),t=new Aw;return t.update(e),new Uint8Array(t.digest())}function ex(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([t,r],0),new mo([i,a],0)]}class Fv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new kc(`Invalid padding: ${t}`);if(r<0)throw new kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(mo.fromNumber(r)));return i.compare(d6)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=JE(e),[r,i]=ex(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new Fv(a,i,t);return r.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const t=JE(e),[r,i]=ex(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class M0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new M0(Se.min(),i,new Pt(Oe),Er(),Fe())}}class Sf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sf(r,t,Fe(),Fe(),Fe())}}class Md{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class ST{constructor(e,t){this.targetId=e,this.Ce=t}}class IT{constructor(e,t,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class tx{constructor(){this.ve=0,this.Fe=nx(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_e(38017,{changeType:a})}})),new Sf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=nx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Er(),this.Je=dd(),this.He=dd(),this.Ye=new Pt(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Jd(a))if(r===0){const s=new pe(a.path);this.et(t,s,Ut.newNoDocument(s,Se.min()))}else Ae(r===1,20013,{expectedCount:r});else{const s=this._t(t);if(s!==r){const l=this.ut(e),f=l?this.ct(l,e,s):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let s,l;try{s=ha(r).toUint8Array()}catch(f){if(f instanceof Yw)return bs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{l=new Fv(s,i,a)}catch(f){return bs(f instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return l.ge===0?null:l}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const l=this.ot(s);if(l){if(a.current&&Jd(l.target)){const f=new pe(l.target.path);this.It(f).has(s)||this.Et(s,f)||this.et(s,f,Ut.newNoDocument(f,e))}a.Be&&(t.set(s,a.ke()),a.qe())}}));let r=Fe();this.He.forEach(((a,s)=>{let l=!0;s.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new M0(e,t,this.Ye,this.je,r);return this.je=Er(),this.Je=dd(),this.He=dd(),this.Ye=new Pt(Oe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new tx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function dd(){return new Pt(pe.comparator)}function nx(){return new Pt(pe.comparator)}const g6={asc:"ASCENDING",desc:"DESCENDING"},v6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m6={and:"AND",or:"OR"};class y6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(n,e){return n.useProto3Json||A0(e)?e:{value:e}}function sl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _6(n,e){return sl(n,e.toTimestamp())}function $n(n){return Ae(!!n,49232),Se.fromTimestamp((function(t){const r=fa(t);return new gt(r.seconds,r.nanos)})(n))}function Uv(n,e){return jg(n,e).canonicalString()}function jg(n,e){const t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function bT(n){const e=st.fromString(n);return Ae(BT(e),10190,{key:e.toString()}),e}function t0(n,e){return Uv(n.databaseId,e.path)}function As(n,e){const t=bT(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(OT(t))}function RT(n,e){return Uv(n.databaseId,e)}function DT(n){const e=bT(n);return e.length===4?st.emptyPath():OT(e)}function Hg(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OT(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function rx(n,e,t){return{name:t0(n,e),fields:t.value.mapValue.fields}}function E6(n,e,t){const r=As(n,e.name),i=$n(e.updateTime),a=e.createTime?$n(e.createTime):Se.min(),s=new Un({mapValue:{fields:e.fields}}),l=Ut.newFoundDocument(r,i,a,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function x6(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_e(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Ae(p===void 0||typeof p=="string",58123),rn.fromBase64String(p||"")):(Ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),rn.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(h){const p=h.code===void 0?ae.UNKNOWN:TT(h.code);return new de(p,h.message||"")})(s);t=new IT(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=As(n,r.document.name),a=$n(r.document.updateTime),s=r.document.createTime?$n(r.document.createTime):Se.min(),l=new Un({mapValue:{fields:r.document.fields}}),f=Ut.newFoundDocument(i,a,s,l),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Md(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=As(n,r.document),a=r.readTime?$n(r.readTime):Se.min(),s=Ut.newNoDocument(i,a),l=r.removedTargetIds||[];t=new Md([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=As(n,r.document),a=r.removedTargetIds||[];t=new Md([],a,i,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new c6(i,a),l=r.targetId;t=new ST(l,s)}}return t}function n0(n,e){let t;if(e instanceof dl)t={update:rx(n,e.key,e.value)};else if(e instanceof N0)t={delete:t0(n,e.key)};else if(e instanceof ma)t={update:rx(n,e.key,e.data),updateMask:C6(e.fieldMask)};else{if(!(e instanceof wT))return _e(16599,{Vt:e.type});t={verify:t0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const l=s.transform;if(l instanceof hf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof al)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ol)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof df)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw _e(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:_6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_e(27497)})(n,e.precondition)),t}function Gg(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Qn.updateTime($n(a.updateTime)):a.exists!==void 0?Qn.exists(a.exists):Qn.none()})(e.currentDocument):Qn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let f=null;if("setToServerValue"in l)Ae(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),f=new hf;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];f=new al(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];f=new ol(p)}else"increment"in l?f=new df(s,l.increment):_e(16584,{proto:l});const h=Lt.fromServerFormat(l.fieldPath);return new a6(h,f)})(n,i))):[];if(e.update){e.update.name;const i=As(n,e.update.name),a=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(f){const h=f.fieldPaths||[];return new sr(h.map((p=>Lt.fromServerFormat(p))))})(e.updateMask);return new ma(i,a,s,t,r)}return new dl(i,a,t,r)}if(e.delete){const i=As(n,e.delete);return new N0(i,t)}if(e.verify){const i=As(n,e.verify);return new wT(i,t)}return _e(1463,{proto:e})}function A6(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map((t=>(function(i,a){let s=i.updateTime?$n(i.updateTime):$n(a);return s.isEqual(Se.min())&&(s=$n(a)),new s6(s,i.transformResults||[])})(t,e)))):[]}function NT(n,e){return{documents:[RT(n,e.path)]}}function MT(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=RT(n,i);const a=(function(h){if(h.length!==0)return kT(vt.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(h){if(h.length!==0)return h.map((p=>(function(_){return{field:Vu(_.field),direction:T6(_.dir)}})(p)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=zg(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function PT(n){let e=DT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ae(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(v){const _=LT(v);return _ instanceof vt&&Pv(_)?_.getFilters():[_]})(t.where));let s=[];t.orderBy&&(s=(function(v){return v.map((_=>(function(w){return new Zd(Fu(w.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(_)))})(t.orderBy));let l=null;t.limit&&(l=(function(v){let _;return _=typeof v=="object"?v.value:v,A0(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(v){const _=!!v.before,E=v.values||[];return new rl(E,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(v){const _=!v.before,E=v.values||[];return new rl(E,_)})(t.endAt)),K8(e,i,s,a,l,"F",f,h)}function w6(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fu(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fu(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fu(t.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fu(t.unaryFilter.field);return Ke.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(Fu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vt.create(t.compositeFilter.filters.map((r=>LT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function T6(n){return g6[n]}function S6(n){return v6[n]}function I6(n){return m6[n]}function Vu(n){return{fieldPath:n.canonicalString()}}function Fu(n){return Lt.fromServerFormat(n.fieldPath)}function kT(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(zE(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NAN"}};if(UE(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zE(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NOT_NAN"}};if(UE(t.value))return{unaryFilter:{field:Vu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(t.field),op:S6(t.op),value:t.value}}})(n):n instanceof vt?(function(t){const r=t.getFilters().map((i=>kT(i)));return r.length===1?r[0]:{compositeFilter:{op:I6(t.op),filters:r}}})(n):_e(54877,{filter:n})}function C6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function BT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class oa{constructor(e,t,r,i,a=Se.min(),s=Se.min(),l=rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(e){return new oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VT{constructor(e){this.yt=e}}function b6(n,e){let t;if(e.document)t=E6(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),i=Ns(e.noDocument.readTime);t=Ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const r=pe.fromSegments(e.unknownDocument.path),i=Ns(e.unknownDocument.version);t=Ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new gt(i[0],i[1]);return Se.fromTimestamp(a)})(e.readTime)),t}function ix(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:r0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:t0(a,s.key),fields:s.data.value.mapValue.fields,updateTime:sl(a,s.version.toTimestamp()),createTime:sl(a,s.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Os(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Os(e.version)}}return r}function r0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Os(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ns(n){const e=new gt(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function ps(n,e){const t=(e.baseMutations||[]).map((a=>Gg(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const l=e.mutations[a+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Gg(n.yt,a))),i=gt.fromMillis(e.localWriteTimeMs);return new kv(e.batchId,i,t,r)}function Bc(n){const e=Ns(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ns(n.lastLimboFreeSnapshotVersion):Se.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const s=a.documents.length;return Ae(s===1,1966,{count:s}),Fr(b0(DT(a.documents[0])))})(n.query):(function(a){return Fr(PT(a))})(n.query),new oa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rn.fromBase64String(n.resumeToken))}function FT(n,e){const t=Os(e.snapshotVersion),r=Os(e.lastLimboFreeSnapshotVersion);let i;i=Jd(e.target)?NT(n.yt,e.target):MT(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ds(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function UT(n){const e=PT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ug(e,e.limit,"L"):e}function ag(n,e){return new Vv(e.largestBatchId,Gg(n.yt,e.overlayMutation))}function ax(n,e){const t=e.path.lastSegment();return[n,zn(e.path.popLast()),t]}function ox(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Os(r.readTime),documentKey:zn(r.documentKey.path),largestBatchId:r.largestBatchId}}class R6{getBundleMetadata(e,t){return sx(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Ns(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return sx(e).put((function(i){return{bundleId:i.id,createTime:Os($n(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return ux(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:UT(a.bundledQuery),readTime:Ns(a.readTime)}})(r)}))}saveNamedQuery(e,t){return ux(e).put((function(i){return{name:i.name,readTime:Os($n(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function sx(n){return gn(n,w0)}function ux(n){return gn(n,T0)}class P0{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new P0(e,r)}getOverlay(e,t){return Tc(e).get(ax(this.userId,t)).next((r=>r?ag(this.serializer,r):null))}getOverlays(e,t){const r=Ni();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,s)=>{const l=new Vv(t,s);i.push(this.St(e,l))})),X.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((s=>i.add(zn(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(Tc(e).Z(Ng,l))})),X.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ni(),a=zn(t),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Tc(e).J(Ng,s).next((l=>{for(const f of l){const h=ag(this.serializer,f);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=Ni();let s;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tc(e).ee({index:jw,range:l},((f,h,p)=>{const v=ag(this.serializer,h);a.size()<i||v.largestBatchId===s?(a.set(v.getKey(),v),s=v.largestBatchId):p.done()})).next((()=>a))}St(e,t){return Tc(e).put((function(i,a,s){const[l,f,h]=ax(a,s.mutation.key);return{userId:a,collectionPath:f,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:n0(i.yt,s.mutation)}})(this.serializer,this.userId,t))}}function Tc(n){return gn(n,S0)}class D6{bt(e){return gn(e,Rv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?rn.fromUint8Array(r):rn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class gs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Mt(e.integerValue));else if("doubleValue"in e){const r=Mt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),rf(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=fa(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ha(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?eT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):C0(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):_e(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=tl,a=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Mt(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}gs.Kt=new gs;const Ou=255;function O6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function lx(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=O6(255&r[a]);if(i+=s,s!==8)break}return i})(n);return Math.ceil(e/8)}class N6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=lx(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=lx(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Ou),this.sn(255)}_n(){this.an(Ou),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Ou?(this.sn(Ou),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Ou?(this.an(Ou),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class M6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class P6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Sc{constructor(){this.cn=new N6,this.ln=new M6(this.cn),this.hn=new P6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class vs{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new vs(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Pd(this.En),directionalValue:Pd(this.dn),orderedDocumentKey:Pd(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function eo(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=cx(n.En,e.En),t!==0?t:(t=cx(n.dn,e.dn),t!==0?t:pe.comparator(n.In,e.In)))}function cx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Pd(n){return pw()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function fx(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class hx{constructor(e){this.mn=new mt(((t,r)=>Lt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Rg(e);if(t!==void 0&&!this.wn(t))return!1;const r=cs(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const f=r[a];if(!this.Sn(l,f)||!this.bn(this.fn[s++],f))return!1}++a}for(;a<r.length;++a){const l=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new mt(Lt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Id(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Id(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Id(r.field,r.dir==="asc"?0:1)));return new Kd(Kd.UNKNOWN_ID,this.collectionId,t,nf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function zT(n){if(Ae(n instanceof Ke||n instanceof vt,20012),n instanceof Ke){if(n instanceof lT){const t=n.value.arrayValue?.values?.map((r=>Ke.create(n.field,"==",r)))||[];return vt.create(t,"or")}return n}const e=n.filters.map((t=>zT(t)));return vt.create(e,n.op)}function L6(n){if(n.getFilters().length===0)return[];const e=Kg(zT(n));return Ae(jT(e),7391),qg(e)||Xg(e)?[e]:e.getFilters()}function qg(n){return n instanceof Ke}function Xg(n){return n instanceof vt&&Pv(n)}function jT(n){return qg(n)||Xg(n)||(function(t){if(t instanceof vt&&kg(t)){for(const r of t.getFilters())if(!qg(r)&&!Xg(r))return!1;return!0}return!1})(n)}function Kg(n){if(Ae(n instanceof Ke||n instanceof vt,34018),n instanceof Ke)return n;if(n.filters.length===1)return Kg(n.filters[0]);const e=n.filters.map((r=>Kg(r)));let t=vt.create(e,n.op);return t=i0(t),jT(t)?t:(Ae(t instanceof vt,64498),Ae(il(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((r,i)=>zv(r,i))))}function zv(n,e){let t;return Ae(n instanceof Ke||n instanceof vt,38388),Ae(e instanceof Ke||e instanceof vt,25473),t=n instanceof Ke?e instanceof Ke?(function(i,a){return vt.create([i,a],"and")})(n,e):dx(n,e):e instanceof Ke?dx(e,n):(function(i,a){if(Ae(i.filters.length>0&&a.filters.length>0,48005),il(i)&&il(a))return oT(i,a.getFilters());const s=kg(i)?i:a,l=kg(i)?a:i,f=s.filters.map((h=>zv(h,l)));return vt.create(f,"or")})(n,e),i0(t)}function dx(n,e){if(il(e))return oT(e,n.getFilters());{const t=e.filters.map((r=>zv(n,r)));return vt.create(t,"or")}}function i0(n){if(Ae(n instanceof Ke||n instanceof vt,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return i0(e[0]);if(iT(n))return n;const t=e.map((i=>i0(i))),r=[];return t.forEach((i=>{i instanceof Ke?r.push(i):i instanceof vt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:vt.create(r,n.op)}class k6{constructor(){this.Cn=new jv}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(xr.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class jv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(st.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(st.comparator)).toArray()}}const px="IndexedDbIndexManager",pd=new Uint8Array(0);class B6{constructor(e,t){this.databaseId=t,this.vn=new jv,this.Fn=new va((r=>Ds(r)),((r,i)=>Af(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:zn(i)};return gx(e).put(a)}return X.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Dw(t),""],!1,!0);return gx(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==t)break;r.push(Oi(s.parent))}return r}))}addFieldIndex(e,t){const r=Ic(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const s=Mu(e);return a.next((l=>{s.put(ox(l,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Ic(e),i=Mu(e),a=Nu(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ic(e),r=Nu(e),i=Mu(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return X.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new hx(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=Nu(e);let i=!0;const a=new Map;return X.forEach(this.Mn(t),(s=>this.xn(e,s).next((l=>{i&&(i=!!l),a.set(s,l)})))).next((()=>{if(i){let s=Fe();const l=[];return X.forEach(a,((f,h)=>{le(px,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((G=>`${G.fieldPath}:${G.kind}`)).join(",")}`})(f)} to execute ${Ds(t)}`);const p=(function(B,G){const $=Rg(G);if($===void 0)return null;for(const J of e0(B,$.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(h,f),v=(function(B,G){const $=new Map;for(const J of cs(G))for(const C of e0(B,J.fieldPath))switch(C.op){case"==":case"in":$.set(J.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return $.set(J.fieldPath.canonicalString(),C.value),Array.from($.values())}return null})(h,f),_=(function(B,G){const $=[];let J=!0;for(const C of cs(G)){const b=C.kind===0?XE(B,C.fieldPath,B.startAt):KE(B,C.fieldPath,B.startAt);$.push(b.value),J&&(J=b.inclusive)}return new rl($,J)})(h,f),E=(function(B,G){const $=[];let J=!0;for(const C of cs(G)){const b=C.kind===0?KE(B,C.fieldPath,B.endAt):XE(B,C.fieldPath,B.endAt);$.push(b.value),J&&(J=b.inclusive)}return new rl($,J)})(h,f),w=this.On(f,h,_),S=this.On(f,h,E),R=this.Nn(f,h,v),L=this.Bn(f.indexId,p,w,_.inclusive,S,E.inclusive,R);return X.forEach(L,(M=>r.Y(M,t.limit).next((B=>{B.forEach((G=>{const $=pe.fromSegments(G.documentKey);s.has($)||(s=s.add($),l.push($))}))}))))})).next((()=>l))}return X.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=L6(vt.create(e.filters,"and")).map((r=>Vg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,a,s,l){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),h=f/(t!=null?t.length:1),p=[];for(let v=0;v<f;++v){const _=t?this.Ln(t[v/h]):pd,E=this.kn(e,_,r[v%h],i),w=this.qn(e,_,a[v%h],s),S=l.map((R=>this.kn(e,_,R,!0)));p.push(...this.createRange(E,w,S))}return p}kn(e,t,r,i){const a=new vs(e,pe.empty(),t,r);return i?a:a.An()}qn(e,t,r,i){const a=new vs(e,pe.empty(),t,r);return i?a.An():a}xn(e,t){const r=new hx(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const l of a)r.yn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return X.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(f){let h=new mt(Lt.comparator),p=!1;for(const v of f.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:h=h.add(_.field));for(const v of f.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(p?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Sc;for(const i of cs(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);gs.Kt.Dt(a,s)}return r.un()}Ln(e){const t=new Sc;return gs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Sc;return gs.Kt.Dt(cf(this.databaseId,t),r.Pn((function(a){const s=cs(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Sc);let a=0;for(const s of cs(e)){const l=r[a++];for(const f of i)if(this.Un(t,s.fieldPath)&&ff(l))i=this.Kn(i,s,l);else{const h=f.Pn(s.kind);gs.Kt.Dt(l,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const l of i){const f=new Sc;f.seed(l.un()),gs.Kt.Dt(s,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof Ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Ic(e),i=Mu(e);return(t?r.J(Og,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const s=[];return X.forEach(a,(l=>i.get([l.indexId,this.uid]).next((f=>{s.push((function(p,v){const _=v?new nf(v.sequenceNumber,new xr(Ns(v.readTime),new pe(Oi(v.documentKey)),v.largestBatchId)):nf.empty(),E=p.fields.map((([w,S])=>new Id(Lt.fromServerFormat(w),S)));return new Kd(p.indexId,p.collectionGroup,E,_)})(l,f))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Oe(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Ic(e),a=Mu(e);return this.Gn(e).next((s=>i.J(Og,IDBKeyRange.bound(t,t)).next((l=>X.forEach(l,(f=>a.put(ox(f.indexId,this.uid,s,r))))))))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,((i,a)=>{const s=r.get(i.collectionGroup);return(s?X.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),X.forEach(l,(f=>this.zn(e,i,f).next((h=>{const p=this.jn(a,f);return h.isEqual(p)?X.resolve():this.Jn(e,a,f,h,p)})))))))}))}Hn(e,t,r,i){return Nu(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Nu(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Nu(e);let a=new mt(eo);return i.ee({index:zw,range:IDBKeyRange.only([r.indexId,this.uid,Pd(this.$n(r,t))])},((s,l)=>{a=a.add(new vs(r.indexId,t,fx(l.arrayValue),fx(l.directionalValue)))})).next((()=>a))}jn(e,t){let r=new mt(eo);const i=this.Qn(t,e);if(i==null)return r;const a=Rg(t);if(a!=null){const s=e.data.field(a.fieldPath);if(ff(s))for(const l of s.arrayValue.values||[])r=r.add(new vs(t.indexId,e.key,this.Ln(l),i))}else r=r.add(new vs(t.indexId,e.key,pd,i));return r}Jn(e,t,r,i,a){le(px,"Updating index entries for document '%s'",t.key);const s=[];return(function(f,h,p,v,_){const E=f.getIterator(),w=h.getIterator();let S=Du(E),R=Du(w);for(;S||R;){let L=!1,M=!1;if(S&&R){const B=p(S,R);B<0?M=!0:B>0&&(L=!0)}else S!=null?M=!0:L=!0;L?(v(R),R=Du(w)):M?(_(S),S=Du(E)):(S=Du(E),R=Du(w))}})(i,a,eo,(l=>{s.push(this.Hn(e,t,r,l))}),(l=>{s.push(this.Yn(e,t,r,l))})),X.waitFor(s)}Gn(e){let t=1;return Mu(e).ee({index:Uw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((s,l)=>eo(s,l))).filter(((s,l,f)=>!l||eo(s,f[l-1])!==0));const i=[];i.push(e);for(const s of r){const l=eo(s,e),f=eo(s,t);if(l===0)i[0]=e.An();else if(l>0&&f<0)i.push(s),i.push(s.An());else if(f>0)break}i.push(t);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const l=i[s].Vn(this.uid,pd,pe.empty()),f=i[s+1].Vn(this.uid,pd,pe.empty());a.push(IDBKeyRange.bound(l,f))}return a}Zn(e,t){return eo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(vx)}getMinOffset(e,t){return X.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||_e(44426))))).next(vx)}}function gx(n){return gn(n,sf)}function Nu(n){return gn(n,Kc)}function Ic(n){return gn(n,bv)}function Mu(n){return gn(n,Xc)}function vx(n){Ae(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Sv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xr(e.readTime,e.documentKey,t)}const mx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HT=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function GT(n,e,t){const r=n.store(ti),i=n.store($u),a=[],s=IDBKeyRange.only(t.batchId);let l=0;const f=r.ee({range:s},((p,v,_)=>(l++,_.delete())));a.push(f.next((()=>{Ae(l===1,47070,{batchId:t.batchId})})));const h=[];for(const p of t.mutations){const v=Bw(e,p.key.path,t.batchId);a.push(i.delete(v)),h.push(p.key)}return X.waitFor(a).next((()=>h))}function a0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _e(14731);e=n.noDocument}return JSON.stringify(e).length}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(HT,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);class L0{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ae(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new L0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return to(e).ee({index:ms,range:r},((i,a,s)=>{t=!1,s.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=Uu(e),s=to(e);return s.add({}).next((l=>{Ae(typeof l=="number",49019);const f=new kv(l,t,r,i),h=(function(E,w,S){const R=S.baseMutations.map((M=>n0(E.yt,M))),L=S.mutations.map((M=>n0(E.yt,M)));return{userId:w,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:R,mutations:L}})(this.serializer,this.userId,f),p=[];let v=new mt(((_,E)=>Oe(_.canonicalString(),E.canonicalString())));for(const _ of i){const E=Bw(this.userId,_.key.path,l);v=v.add(_.key.path.popLast()),p.push(s.put(h)),p.push(a.put(E,f8))}return v.forEach((_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[l]=f.keys()})),X.waitFor(p).next((()=>f))}))}lookupMutationBatch(e,t){return to(e).get(t).next((r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ps(this.serializer,r)):null))}er(e,t){return this.Xn[t]?X.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return to(e).ee({index:ms,range:i},((s,l,f)=>{l.userId===this.userId&&(Ae(l.batchId>=r,47524,{tr:r}),a=ps(this.serializer,l)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Es;return to(e).ee({index:ms,range:t,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Es],[this.userId,Number.POSITIVE_INFINITY]);return to(e).J(ms,t).next((r=>r.map((i=>ps(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Uu(e).ee({range:i},((s,l,f)=>{const[h,p,v]=s,_=Oi(p);if(h===this.userId&&t.path.isEqual(_))return to(e).get(v).next((E=>{if(!E)throw _e(61480,{nr:s,batchId:v});Ae(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:v}),a.push(ps(this.serializer,E))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Oe);const i=[];return t.forEach((a=>{const s=Cd(this.userId,a.path),l=IDBKeyRange.lowerBound(s),f=Uu(e).ee({range:l},((h,p,v)=>{const[_,E,w]=h,S=Oi(E);_===this.userId&&a.path.isEqual(S)?r=r.add(w):v.done()}));i.push(f)})),X.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Cd(this.userId,r),s=IDBKeyRange.lowerBound(a);let l=new mt(Oe);return Uu(e).ee({range:s},((f,h,p)=>{const[v,_,E]=f,w=Oi(_);v===this.userId&&r.isPrefixOf(w)?w.length===i&&(l=l.add(E)):p.done()})).next((()=>this.rr(e,l)))}rr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(to(e).get(a).next((s=>{if(s===null)throw _e(35274,{batchId:a});Ae(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(ps(this.serializer,s))})))})),X.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return GT(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),X.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Uu(e).ee({range:r},((a,s,l)=>{if(a[0]===this.userId){const f=Oi(a[1]);i.push(f)}else l.done()})).next((()=>{Ae(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return qT(e,this.userId,t)}_r(e){return XT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Es,lastStreamToken:""}))}}function qT(n,e,t){const r=Cd(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return Uu(n).ee({range:a,X:!0},((l,f,h)=>{const[p,v,_]=l;p===e&&v===i&&(s=!0),h.done()})).next((()=>s))}function to(n){return gn(n,ti)}function Uu(n){return gn(n,$u)}function XT(n){return gn(n,af)}class Ms{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ms(0)}static cr(){return new Ms(-1)}}class V6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ms(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Pu(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return Pu(e).ee(((s,l)=>{const f=Bc(l);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))})).next((()=>X.waitFor(a))).next((()=>i))}forEachTarget(e,t){return Pu(e).ee(((r,i)=>{const a=Bc(i);t(a)}))}lr(e){return yx(e).get(Qd).next((t=>(Ae(t!==null,2888),t)))}hr(e,t){return yx(e).put(Qd,t)}Pr(e,t){return Pu(e).put(FT(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Ds(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Pu(e).ee({range:i,index:Fw},((s,l,f)=>{const h=Bc(l);Af(t,h.target)&&(a=h,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=so(e);return t.forEach((s=>{const l=zn(s.path);i.push(a.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,s))})),X.waitFor(i)}removeMatchingKeys(e,t,r){const i=so(e);return X.forEach(t,(a=>{const s=zn(a.path);return X.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=so(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=so(e);let a=Fe();return i.ee({range:r,X:!0},((s,l,f)=>{const h=Oi(s[1]),p=new pe(h);a=a.add(p)})).next((()=>a))}containsKey(e,t){const r=zn(t.path),i=IDBKeyRange.bound([r],[Dw(r)],!1,!0);let a=0;return so(e).ee({index:Cv,X:!0,range:i},(([s,l],f,h)=>{s!==0&&(a++,h.done())})).next((()=>a>0))}At(e,t){return Pu(e).get(t).next((r=>r?Bc(r):null))}}function Pu(n){return gn(n,Zu)}function yx(n){return gn(n,xs)}function so(n){return gn(n,Ju)}const _x="LruGarbageCollector",F6=1048576;function Ex([n,e],[t,r]){const i=Oe(n,t);return i===0?Oe(e,r):i}class U6{constructor(e){this.Ir=e,this.buffer=new mt(Ex),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ex(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(_x,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Co(t)?le(_x,"Ignoring IndexedDB error during garbage collection: ",t):await Bs(t)}await this.Vr(3e5)}))}}class z6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Br.ce);const r=new U6(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(mx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,s,l,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,s=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,l=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(h=Date.now(),ku()<=Xe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${a} targets in `+(f-l)+`ms
	Removed ${v} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v}))))}}function YT(n,e){return new z6(n,e)}class j6{constructor(e,t){this.db=e,this.garbageCollector=YT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return gd(e,r)}removeReference(e,t,r){return gd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gd(e,t)}br(e,t){return(function(i,a){let s=!1;return XT(i).te((l=>qT(i,l,a).next((f=>(f&&(s=!0),X.resolve(!f)))))).next((()=>s))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,l)=>{if(l<=t){const f=this.br(e,s).next((h=>{if(!h)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,Se.min()),so(e).delete((function(v){return[0,zn(v.path)]})(s)))))}));i.push(f)}})).next((()=>X.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gd(e,t)}Sr(e,t){const r=so(e);let i,a=Br.ce;return r.ee({index:Cv},(([s,l],{path:f,sequenceNumber:h})=>{s===0?(a!==Br.ce&&t(new pe(Oi(i)),a),a=h,i=f):a=Br.ce})).next((()=>{a!==Br.ce&&t(new pe(Oi(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gd(n,e){return so(n).put((function(r,i){return{targetId:0,path:zn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class WT{constructor(){this.changes=new va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class H6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return os(e).put(r)}removeEntry(e,t,r){return os(e).delete((function(a,s){const l=a.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],r0(s),l[l.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ut.newInvalidDocument(t);return os(e).ee({index:bd,range:IDBKeyRange.only(Cc(t))},((i,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:Ut.newInvalidDocument(t)};return os(e).ee({index:bd,range:IDBKeyRange.only(Cc(t))},((i,a)=>{r={document:this.Cr(t,a),size:a0(a)}})).next((()=>r))}getEntries(e,t){let r=Er();return this.Fr(e,t,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,t){let r=Er(),i=new Pt(pe.comparator);return this.Fr(e,t,((a,s)=>{const l=this.Cr(a,s);r=r.insert(a,l),i=i.insert(a,a0(s))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return X.resolve();let i=new mt(wx);t.forEach((f=>i=i.add(f)));const a=IDBKeyRange.bound(Cc(i.first()),Cc(i.last())),s=i.getIterator();let l=s.getNext();return os(e).ee({index:bd,range:a},((f,h,p)=>{const v=pe.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&wx(l,v)<0;)r(l,null),l=s.getNext();l&&l.isEqual(v)&&(r(l,h),l=s.hasNext()?s.getNext():null),l?p.j(Cc(l)):p.done()})).next((()=>{for(;l;)r(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),r0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return os(e).J(IDBKeyRange.bound(l,f,!0)).next((h=>{a?.incrementDocumentReadCount(h.length);let p=Er();for(const v of h){const _=this.Cr(pe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(Tf(t,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p}))}getAllFromCollectionGroup(e,t,r,i){let a=Er();const s=Ax(t,r),l=Ax(t,xr.max());return os(e).ee({index:Vw,range:IDBKeyRange.bound(s,l,!0)},((f,h,p)=>{const v=this.Cr(pe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(v.key,v),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(e){return new G6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return xx(e).get(Dg).next((t=>(Ae(!!t,20021),t)))}Dr(e,t){return xx(e).put(Dg,t)}Cr(e,t){if(t){const r=b6(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Ut.newInvalidDocument(e)}}function QT(n){return new H6(n)}class G6 extends WT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new va((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new mt(((a,s)=>Oe(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const l=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,l.readTime)),s.isValidDocument()){const f=ix(this.Nr.serializer,s);i=i.add(a.path.popLast());const h=a0(f);r+=h-l.size,t.push(this.Nr.addEntry(e,a,f))}else if(r-=l.size,this.trackRemovals){const f=ix(this.Nr.serializer,s.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,a,f))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function xx(n){return gn(n,of)}function os(n){return gn(n,Wd)}function Cc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ax(n,e){const t=e.documentKey.path.toArray();return[n,r0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function wx(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Oe(t[a],r[a]),i)return i;return i=Oe(t.length,r.length),i||(i=Oe(t[t.length-2],r[r.length-2]),i||Oe(t[t.length-1],r[r.length-1]))}class q6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $T{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&$c(r.mutation,i,sr.empty(),gt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Fe()){const i=Ni();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let s=Lc();return a.forEach(((l,f)=>{s=s.insert(l,f.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const r=Ni();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Fe())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,l)=>{t.set(s,l)}))}))}computeViews(e,t,r,i){let a=Er();const s=Qc(),l=(function(){return Qc()})();return t.forEach(((f,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof ma)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),$c(p.mutation,h,p.mutation.getFieldMask(),gt.now())):s.set(h.key,sr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,p)=>s.set(h,p))),t.forEach(((h,p)=>l.set(h,new q6(p,s.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,t){const r=Qc();let i=new Pt(((s,l)=>s-l)),a=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const l of s)l.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let p=r.get(f)||sr.empty();p=l.applyToLocalView(h,p),r.set(f,p);const v=(i.get(l.batchId)||Fe()).add(f);i=i.insert(l.batchId,v)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),h=f.key,p=f.value,v=gT();p.forEach((_=>{if(!a.has(_)){const E=xT(t.get(_),r.get(_));E!==null&&v.set(_,E),a=a.add(_)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,v))}return X.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):X.resolve(Ni());let l=tf,f=a;return s.next((h=>X.forEach(h,((p,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),a.get(p)?X.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{f=f.insert(p,_)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Fe()))).next((p=>({batchId:l,changes:pT(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let i=Lc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let s=Lc();return this.indexManager.getCollectionParents(e,a).next((l=>X.forEach(l,(f=>{const h=(function(v,_){return new wf(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((v,_)=>{s=s.insert(v,_)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((s=>{a.forEach(((f,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,Ut.newInvalidDocument(p)))}));let l=Lc();return s.forEach(((f,h)=>{const p=a.get(f);p!==void 0&&$c(p.mutation,h,sr.empty(),gt.now()),Tf(t,h)&&(l=l.insert(f,h))})),l}))}}class X6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:UT(i.bundledQuery),readTime:$n(i.readTime)}})(t)),X.resolve()}}class K6{constructor(){this.overlays=new Pt(pe.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ni();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),X.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const i=Ni(),a=t.length+1,s=new pe(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const f=l.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return X.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Pt(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=Ni(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Ni(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return X.resolve(l)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Vv(t,r));let a=this.qr.get(t);a===void 0&&(a=Fe(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class Y6{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class Hv{constructor(){this.Qr=new mt(xn.$r),this.Ur=new mt(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new xn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new pe(new st([])),r=new xn(t,e),i=new xn(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pe(new st([])),r=new xn(t,e),i=new xn(t,e+1);let a=Fe();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new xn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pe.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||pe.comparator(e.key,t.key)}}class W6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(xn.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new kv(a,t,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new xn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(s)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Es:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xn(t,0),i=new xn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const l=this.Xr(s.Yr);a.push(l)})),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Oe);return t.forEach((i=>{const a=new xn(i,0),s=new xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(l=>{r=r.add(l.Yr)}))})),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;pe.isDocumentKey(a)||(a=a.child(""));const s=new xn(new pe(a),0);let l=new mt(Oe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(f.Yr)),!0)}),s),X.resolve(this.ti(l))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ae(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(t.mutations,(i=>{const a=new xn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new xn(t,0),i=this.Zr.firstAfterOrEqual(r);return X.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Q6{constructor(e){this.ri=e,this.docs=(function(){return new Pt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=Er();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ut.newInvalidDocument(i))})),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Er();const s=t.path,l=new pe(s.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||Sv(Mw(p),r)<=0||(i.has(p.key)||Tf(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,i){_e(9500)}ii(e,t){return X.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new $6(this)}getSize(e){return X.resolve(this.size)}}class $6 extends WT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Z6{constructor(e){this.persistence=e,this.si=new va((t=>Ds(t)),Af),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Hv,this.targetCount=0,this.ai=Ms.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ms(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),X.waitFor(a).next((()=>i))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}}class Gv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Br(0),this.li=!1,this.li=!0,this.hi=new Y6,this.referenceDelegate=e(this),this.Pi=new Z6(this),this.indexManager=new k6,this.remoteDocumentCache=(function(i){return new Q6(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new VT(t),this.Ii=new X6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new W6(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const i=new J6(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return X.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class J6 extends Lw{constructor(e){super(),this.currentSequenceNumber=e}}class k0{constructor(e){this.persistence=e,this.Ri=new Hv,this.Vi=null}static mi(e){return new k0(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(r=>{const i=pe.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class o0{constructor(e,t){this.persistence=e,this.pi=new va((r=>zn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=YT(this,t)}static mi(e,t){return new o0(e,t)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?X.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((l=>{l||(r++,a.removeEntry(s,Se.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Dd(e.data.value)),t}br(e,t,r){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return X.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class eR{constructor(e){this.serializer=e}k(e,t,r,i){const a=new x0("createOrUpgrade",t);r<1&&i>=1&&((function(f){f.createObjectStore(xf)})(e),(function(f){f.createObjectStore(af,{keyPath:c8}),f.createObjectStore(ti,{keyPath:PE,autoIncrement:!0}).createIndex(ms,LE,{unique:!0}),f.createObjectStore($u)})(e),Tx(e),(function(f){f.createObjectStore(fs)})(e));let s=X.resolve();return r<3&&i>=3&&(r!==0&&((function(f){f.deleteObjectStore(Ju),f.deleteObjectStore(Zu),f.deleteObjectStore(xs)})(e),Tx(e)),s=s.next((()=>(function(f){const h=f.store(xs),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return h.put(Qd,p)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(f,h){return h.store(ti).J().next((v=>{f.deleteObjectStore(ti),f.createObjectStore(ti,{keyPath:PE,autoIncrement:!0}).createIndex(ms,LE,{unique:!0});const _=h.store(ti),E=v.map((w=>_.put(w)));return X.waitFor(E)}))})(e,a)))),s=s.next((()=>{(function(f){f.createObjectStore(el,{keyPath:_8})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(f){f.createObjectStore(of)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(f){f.createObjectStore(w0,{keyPath:E8})})(e),(function(f){f.createObjectStore(T0,{keyPath:x8})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(f){const h=f.createObjectStore(S0,{keyPath:b8});h.createIndex(Ng,R8,{unique:!1}),h.createIndex(jw,D8,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(f){const h=f.createObjectStore(Wd,{keyPath:h8});h.createIndex(bd,d8),h.createIndex(Vw,p8)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(fs)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(f){f.createObjectStore(bv,{keyPath:A8,autoIncrement:!0}).createIndex(Og,w8,{unique:!1}),f.createObjectStore(Xc,{keyPath:T8}).createIndex(Uw,S8,{unique:!1}),f.createObjectStore(Kc,{keyPath:I8}).createIndex(zw,C8,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{t.objectStore(Xc).clear()})).next((()=>{t.objectStore(Kc).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(f){f.createObjectStore(Rv,{keyPath:O8})})(e)}))),r<18&&i>=18&&pw()&&(s=s.next((()=>{t.objectStore(Xc).clear()})).next((()=>{t.objectStore(Kc).clear()}))),s}wi(e){let t=0;return e.store(fs).ee(((r,i)=>{t+=a0(i)})).next((()=>{const r={byteSize:t};return e.store(of).put(Dg,r)}))}yi(e){const t=e.store(af),r=e.store(ti);return t.J().next((i=>X.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,Es],[a.userId,a.lastAcknowledgedBatchId]);return r.J(ms,s).next((l=>X.forEach(l,(f=>{Ae(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const h=ps(this.serializer,f);return GT(e,a.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ju),r=e.store(fs);return e.store(xs).get(Qd).next((i=>{const a=[];return r.ee(((s,l)=>{const f=new st(s),h=(function(v){return[0,zn(v)]})(f);a.push(t.get(h).next((p=>p?X.resolve():(v=>t.put({targetId:0,path:zn(v),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>X.waitFor(a)))}))}bi(e,t){e.createObjectStore(sf,{keyPath:y8});const r=t.store(sf),i=new jv,a=s=>{if(i.add(s)){const l=s.lastSegment(),f=s.popLast();return r.put({collectionId:l,parent:zn(f)})}};return t.store(fs).ee({X:!0},((s,l)=>{const f=new st(s);return a(f.popLast())})).next((()=>t.store($u).ee({X:!0},(([s,l,f],h)=>{const p=Oi(l);return a(p.popLast())}))))}Di(e){const t=e.store(Zu);return t.ee(((r,i)=>{const a=Bc(i),s=FT(this.serializer,a);return t.put(s)}))}Ci(e,t){const r=t.store(fs),i=[];return r.ee(((a,s)=>{const l=t.store(Wd),f=(function(v){return v.document?new pe(st.fromString(v.document.name).popFirst(5)):v.noDocument?pe.fromSegments(v.noDocument.path):v.unknownDocument?pe.fromSegments(v.unknownDocument.path):_e(36783)})(s).path.toArray(),h={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(h))})).next((()=>X.waitFor(i)))}Fi(e,t){const r=t.store(ti),i=QT(this.serializer),a=new Gv(k0.mi,this.serializer.yt);return r.J().next((s=>{const l=new Map;return s.forEach((f=>{let h=l.get(f.userId)??Fe();ps(this.serializer,f).keys().forEach((p=>h=h.add(p))),l.set(f.userId,h)})),X.forEach(l,((f,h)=>{const p=new Mn(h),v=P0.wt(this.serializer,p),_=a.getIndexManager(p),E=L0.wt(p,this.serializer,_,a.referenceDelegate);return new $T(i,E,v,_).recalculateAndSaveOverlaysForDocumentKeys(new Mg(t,Br.ce),f).next()}))}))}}function Tx(n){n.createObjectStore(Ju,{keyPath:v8}).createIndex(Cv,m8,{unique:!0}),n.createObjectStore(Zu,{keyPath:"targetId"}).createIndex(Fw,g8,{unique:!0}),n.createObjectStore(xs)}const no="IndexedDbPersistence",og=18e5,sg=5e3,ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tR="main";class qv{constructor(e,t,r,i,a,s,l,f,h,p,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=s,this.document=l,this.xi=h,this.Oi=p,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!qv.v())throw new de(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new j6(this,i),this.$i=t+tR,this.serializer=new VT(f),this.Ui=new _o(this.$i,this.Ni,new eR(this.serializer)),this.hi=new D6,this.Pi=new V6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QT(this.serializer),this.Ii=new R6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Wn(no,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(ae.FAILED_PRECONDITION,ug);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Br(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Co(e))return le(no,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(no,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return bc(e).get(Ru).next((t=>X.resolve(this.es(t))))}ts(e){return vd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,og)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=gn(t,el);return r.J().next((i=>{const a=this.ss(i,og),s=i.filter((l=>a.indexOf(l)===-1));return X.forEach(s,(l=>r.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?X.resolve(!0):bc(e).get(Ru).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new de(ae.FAILED_PRECONDITION,ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).J().next((r=>this.ss(r,sg).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(a||s&&l)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(no,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[xf,el],(e=>{const t=new Mg(e,Br.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>vd(e).J().next((t=>this.ss(t,og).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return L0.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new B6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return P0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){le(no,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?P8:f===17?Xw:f===16?M8:f===15?Dv:f===14?qw:f===13?Gw:f===12?N8:f===11?Hw:void _e(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(l=>(s=new Mg(l,this.ci?this.ci.next():Br.ce),t==="readwrite-primary"?this.Hi(s).next((f=>!!f||this.Yi(s))).next((f=>{if(!f)throw Wn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(ae.FAILED_PRECONDITION,Pw);return r(s)})).next((f=>this.Xi(s).next((()=>f)))):this.Is(s).next((()=>r(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Is(e){return bc(e).get(Ru).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(ae.FAILED_PRECONDITION,ug)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bc(e).put(Ru,t)}static v(){return _o.v()}Zi(e){const t=bc(e);return t.get(Ru).next((r=>this.es(r)?(le(no,"Releasing primary lease."),t.delete(Ru)):X.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Wn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;dw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(no,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Wn(no,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Wn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bc(n){return gn(n,xf)}function vd(n){return gn(n,el)}function nR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Xv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Fe(),i=Fe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Xv(e,t.fromCache,r,i)}}class rR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ZT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return dw()?8:kw(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new rR;return this.Ss(e,t,s).next((l=>{if(a.result=l,this.Vs)return this.bs(e,t,s,l.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ku()<=Xe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Bu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(ku()<=Xe.DEBUG&&le("QueryEngine","Query:",Bu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ku()<=Xe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Bu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):X.resolve())}ys(e,t){if(YE(t))return X.resolve(null);let r=Fr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Ug(t,null,"F"),r=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=Fe(...a);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.Ds(t,l);return this.Cs(t,h,s,f.readTime)?this.ys(e,Ug(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,r,i){return YE(t)||i.isEqual(Se.min())?X.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(t,a);return this.Cs(t,s,r,i)?X.resolve(null):(ku()<=Xe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bu(t)),this.vs(e,s,t,r8(i,tf)).next((l=>l)))}))}Ds(e,t){let r=new mt(hT(e));return t.forEach(((i,a)=>{Tf(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return ku()<=Xe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Bu(t)),this.ps.getDocumentsMatchingQuery(e,t,xr.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const Kv="LocalStore",iR=3e8;class aR{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Pt(Oe),this.xs=new va((a=>Ds(a)),Af),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $T(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function JT(n,e,t,r){return new aR(n,e,t,r)}async function e3(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],l=[];let f=Fe();for(const h of i){s.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return t.localDocuments.getDocuments(r,f).next((h=>({Ls:h,removedBatchIds:s,addedBatchIds:l})))}))}))}function oR(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,f,h,p){const v=h.batch,_=v.keys();let E=X.resolve();return _.forEach((w=>{E=E.next((()=>p.getEntry(f,w))).next((S=>{const R=h.docVersions.get(w);Ae(R!==null,48541),S.version.compareTo(R)<0&&(v.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(f,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let f=Fe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(f=f.add(l.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function t3(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sR(n,e){const t=Ne(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const l=[];e.targetChanges.forEach(((p,v)=>{const _=i.get(v);if(!_)return;l.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,v))));let E=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(rn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),i=i.insert(v,E),(function(S,R,L){return S.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=iR?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(_,E,p)&&l.push(t.Pi.updateTargetData(a,E))}));let f=Er(),h=Fe();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(uR(a,s,e.documentUpdates).next((p=>{f=p.ks,h=p.qs}))),!r.isEqual(Se.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));l.push(p)}return X.waitFor(l).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function uR(n,e,t){let r=Fe(),i=Fe();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let s=Er();return t.forEach(((l,f)=>{const h=a.get(l);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),f.isNoDocument()&&f.version.isEqual(Se.min())?(e.removeEntry(l,f.readTime),s=s.insert(l,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),s=s.insert(l,f)):le(Kv,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",f.version)})),{ks:s,qs:i}}))}function lR(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Es),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function cR(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,X.resolve(i)):t.Pi.allocateTargetId(r).next((s=>(i=new oa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Yg(n,e,t){const r=Ne(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Co(s))throw s;le(Kv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Sx(n,e,t){const r=Ne(n);let i=Se.min(),a=Fe();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(f,h,p){const v=Ne(f),_=v.xs.get(p);return _!==void 0?X.resolve(v.Ms.get(_)):v.Pi.getTargetData(h,p)})(r,s,Fr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Se.min(),t?a:Fe()))).next((l=>(fR(r,W8(e),l),{documents:l,Qs:a})))))}function fR(n,e,t){let r=n.Os.get(e)||Se.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class Ix{constructor(){this.activeTargetIds=t6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class n3{constructor(){this.Mo=new Ix,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ix,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hR{Oo(e){}shutdown(){}}const Cx="ConnectivityMonitor";class bx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(Cx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(Cx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let md=null;function Wg(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}const lg="RestConnection",dR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$d?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const s=Wg(),l=this.zo(e,t.toUriEncodedString());le(lg,`Sending RPC '${e}' ${s}:`,l,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:h}=new URL(l),p=cl(h);return this.Jo(e,l,f,r,p).then((v=>(le(lg,`Received RPC '${e}' ${s}: `,v),v)),(v=>{throw bs(lg,`RPC '${e}' ${s} failed with error: `,v,"url: ",l,"request:",r),v}))}Ho(e,t,r,i,a,s){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=dR[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class gR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Bn="WebChannelConnection";class vR extends pR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const s=Wg();return new Promise(((l,f)=>{const h=new ww;h.setWithCredentials(!0),h.listenOnce(Tw.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Sd.NO_ERROR:const v=h.getResponseJson();le(Bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(v)),l(v);break;case Sd.TIMEOUT:le(Bn,`RPC '${e}' ${s} timed out`),f(new de(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:const _=h.getStatus();if(le(Bn,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const w=E?.error;if(w&&w.status&&w.message){const S=(function(L){const M=L.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(M)>=0?M:ae.UNKNOWN})(w.status);f(new de(S,w.message))}else f(new de(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new de(ae.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:s,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{le(Bn,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(i);le(Bn,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=Wg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Cw(),l=Iw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const p=a.join("");le(Bn,`Creating RPC '${e}' stream ${i}: ${p}`,f);const v=s.createWebChannel(p,f);this.I_(v);let _=!1,E=!1;const w=new gR({Yo:R=>{E?le(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(_||(le(Bn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),le(Bn,`RPC '${e}' stream ${i} sending:`,R),v.send(R))},Zo:()=>v.close()}),S=(R,L,M)=>{R.listen(L,(B=>{try{M(B)}catch(G){setTimeout((()=>{throw G}),0)}}))};return S(v,Pc.EventType.OPEN,(()=>{E||(le(Bn,`RPC '${e}' stream ${i} transport opened.`),w.o_())})),S(v,Pc.EventType.CLOSE,(()=>{E||(E=!0,le(Bn,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(v))})),S(v,Pc.EventType.ERROR,(R=>{E||(E=!0,bs(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),w.a_(new de(ae.UNAVAILABLE,"The operation could not be completed")))})),S(v,Pc.EventType.MESSAGE,(R=>{if(!E){const L=R.data[0];Ae(!!L,16349);const M=L,B=M?.error||M[0]?.error;if(B){le(Bn,`RPC '${e}' stream ${i} received error:`,B);const G=B.status;let $=(function(b){const N=en[b];if(N!==void 0)return TT(N)})(G),J=B.message;$===void 0&&($=ae.INTERNAL,J="Unknown error status: "+G+" with message "+B.message),E=!0,w.a_(new de($,J)),v.close()}else le(Bn,`RPC '${e}' stream ${i} received:`,L),w.u_(L)}})),S(l,Sw.STAT_EVENT,(R=>{R.stat===Cg.PROXY?le(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Cg.NOPROXY&&le(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mR(){return typeof window<"u"?window:null}function Ld(){return typeof document<"u"?document:null}function B0(n){return new y6(n,!0)}class r3{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Rx="PersistentStream";class i3{constructor(e,t,r,i,a,s,l,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new r3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Wn(t.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new de(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(Rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(Rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yR extends i3{constructor(e,t,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=x6(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Se.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Se.min():s.readTime?$n(s.readTime):Se.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Hg(this.serializer),t.addTarget=(function(a,s){let l;const f=s.target;if(l=Jd(f)?{documents:NT(a,f)}:{query:MT(a,f).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=CT(a,s.resumeToken);const h=zg(a,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(Se.min())>0){l.readTime=sl(a,s.snapshotVersion.toTimestamp());const h=zg(a,s.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const r=w6(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.q_(t)}}class _R extends i3{constructor(e,t,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=A6(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Hg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>n0(this.serializer,r)))};this.q_(t)}}class ER{}class xR extends ER{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,jg(t,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ae.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,jg(t,r),i,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(ae.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wn(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ps="RemoteStore";class wR{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Vs(this)&&(le(Ps,"Restarting streams for network reachability change."),await(async function(f){const h=Ne(f);h.Ea.add(4),await If(h),h.Ra.set("Unknown"),h.Ea.delete(4),await V0(h)})(this))}))})),this.Ra=new AR(r,i)}}async function V0(n){if(Vs(n))for(const e of n.da)await e(!0)}async function If(n){for(const e of n.da)await e(!1)}function a3(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$v(t)?Qv(t):pl(t).O_()&&Wv(t,e))}function Yv(n,e){const t=Ne(n),r=pl(t);t.Ia.delete(e),r.O_()&&o3(t,e),t.Ia.size===0&&(r.O_()?r.L_():Vs(t)&&t.Ra.set("Unknown"))}function Wv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pl(n).Y_(e)}function o3(n,e){n.Va.Ue(e),pl(n).Z_(e)}function Qv(n){n.Va=new p6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),pl(n).start(),n.Ra.ua()}function $v(n){return Vs(n)&&!pl(n).x_()&&n.Ia.size>0}function Vs(n){return Ne(n).Ea.size===0}function s3(n){n.Va=void 0}async function TR(n){n.Ra.set("Online")}async function SR(n){n.Ia.forEach(((e,t)=>{Wv(n,e)}))}async function IR(n,e){s3(n),$v(n)?(n.Ra.ha(e),Qv(n)):n.Ra.set("Unknown")}async function CR(n,e,t){if(n.Ra.set("Online"),e instanceof IT&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(n,e)}catch(r){le(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await s0(n,r)}else if(e instanceof Md?n.Va.Ze(e):e instanceof ST?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const r=await t3(n.localStore);t.compareTo(r)>=0&&await(function(a,s){const l=a.Va.Tt(s);return l.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(f.resumeToken,s))}})),l.targetMismatches.forEach(((f,h)=>{const p=a.Ia.get(f);if(!p)return;a.Ia.set(f,p.withResumeToken(rn.EMPTY_BYTE_STRING,p.snapshotVersion)),o3(a,f);const v=new oa(p.target,f,h,p.sequenceNumber);Wv(a,v)})),a.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(r){le(Ps,"Failed to raise snapshot:",r),await s0(n,r)}}async function s0(n,e,t){if(!Co(e))throw e;n.Ea.add(1),await If(n),n.Ra.set("Offline"),t||(t=()=>t3(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Ps,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await V0(n)}))}function u3(n,e){return e().catch((t=>s0(n,t,e)))}async function Cf(n){const e=Ne(n),t=So(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Es;for(;bR(e);)try{const i=await lR(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,RR(e,i)}catch(i){await s0(e,i)}l3(e)&&c3(e)}function bR(n){return Vs(n)&&n.Ta.length<10}function RR(n,e){n.Ta.push(e);const t=So(n);t.O_()&&t.X_&&t.ea(e.mutations)}function l3(n){return Vs(n)&&!So(n).x_()&&n.Ta.length>0}function c3(n){So(n).start()}async function DR(n){So(n).ra()}async function OR(n){const e=So(n);for(const t of n.Ta)e.ea(t.mutations)}async function NR(n,e,t){const r=n.Ta.shift(),i=Bv.from(r,e,t);await u3(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Cf(n)}async function MR(n,e){e&&So(n).X_&&await(async function(r,i){if((function(s){return f6(s)&&s!==ae.ABORTED})(i.code)){const a=r.Ta.shift();So(r).B_(),await u3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Cf(r)}})(n,e),l3(n)&&c3(n)}async function Dx(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),le(Ps,"RemoteStore received new credentials");const r=Vs(t);t.Ea.add(3),await If(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await V0(t)}async function PR(n,e){const t=Ne(n);e?(t.Ea.delete(2),await V0(t)):e||(t.Ea.add(2),await If(t),t.Ra.set("Unknown"))}function pl(n){return n.ma||(n.ma=(function(t,r,i){const a=Ne(t);return a.sa(),new yR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:TR.bind(null,n),t_:SR.bind(null,n),r_:IR.bind(null,n),H_:CR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),$v(n)?Qv(n):n.Ra.set("Unknown")):(await n.ma.stop(),s3(n))}))),n.ma}function So(n){return n.fa||(n.fa=(function(t,r,i){const a=Ne(t);return a.sa(),new _R(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:DR.bind(null,n),r_:MR.bind(null,n),ta:OR.bind(null,n),na:NR.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Cf(n)):(await n.fa.stop(),n.Ta.length>0&&(le(Ps,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Zv{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const s=Date.now()+r,l=new Zv(e,t,s,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jv(n,e){if(Wn("AsyncQueue",`${e}: ${n}`),Co(n))return new de(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Gu{static emptySet(e){return new Gu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Lc(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Gu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ox{constructor(){this.ga=new Pt(pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ul{constructor(e,t,r,i,a,s,l,f,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,a){const s=[];return t.forEach((l=>{s.push({type:0,doc:l})})),new ul(e,t,Gu.emptySet(t),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class LR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class kR{constructor(){this.queries=Nx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ne(t),a=i.queries;i.queries=Nx(),a.forEach(((s,l)=>{for(const f of l.Sa)f.onError(r)}))})(this,new de(ae.ABORTED,"Firestore shutting down"))}}function Nx(){return new va((n=>fT(n)),R0)}async function BR(n,e){const t=Ne(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new LR,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const l=Jv(s,`Initialization of query '${Bu(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&em(t)}async function VR(n,e){const t=Ne(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function FR(n,e){const t=Ne(n);let r=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&em(t)}function UR(n,e,t){const r=Ne(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function em(n){n.Ca.forEach((e=>{e.next()}))}var Qg,Mx;(Mx=Qg||(Qg={})).Ma="default",Mx.Cache="cache";class zR{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}class f3{constructor(e){this.key=e}}class h3{constructor(e){this.key=e}}class jR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=hT(e),this.tu=new Gu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Ox,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,l=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,v)=>{const _=i.get(p),E=Tf(this.query,v)?v:null,w=!!_&&this.mutatedKeys.has(_.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;_&&E?_.data.isEqual(E.data)?w!==S&&(r.track({type:3,doc:E}),R=!0):this.su(_,E)||(r.track({type:2,doc:E}),R=!0,(f&&this.eu(E,f)>0||h&&this.eu(E,h)<0)&&(l=!0)):!_&&E?(r.track({type:0,doc:E}),R=!0):_&&!E&&(r.track({type:1,doc:_}),R=!0,(f||h)&&(l=!0)),R&&(E?(s=s.add(E),a=S?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:s,iu:r,Cs:l,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,v)=>(function(E,w){const S=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:R})}};return S(E)-S(w)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(r),i=i??!1;const l=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,h=f!==this.Za;return this.Za=f,s.length!==0||h?{snapshot:new ul(this.query,e.tu,a,s,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ox,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new h3(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new f3(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tm="SyncEngine";class HR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GR{constructor(e){this.key=e,this.hu=!1}}class qR{constructor(e,t,r,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new va((l=>fT(l)),R0),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(pe.comparator),this.Au=new Map,this.Ru=new Hv,this.Vu={},this.mu=new Map,this.fu=Ms.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XR(n,e,t=!0){const r=y3(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await d3(r,e,t,!0),i}async function KR(n,e){const t=y3(n);await d3(t,e,!0,!1)}async function d3(n,e,t,r){const i=await cR(n.localStore,Fr(e)),a=i.targetId,s=n.sharedClientState.addLocalQueryTarget(a,t);let l;return r&&(l=await YR(n,e,a,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&a3(n.remoteStore,i),l}async function YR(n,e,t,r,i){n.pu=(v,_,E)=>(async function(S,R,L,M){let B=R.view.ru(L);B.Cs&&(B=await Sx(S.localStore,R.query,!1).then((({documents:C})=>R.view.ru(C,B))));const G=M&&M.targetChanges.get(R.targetId),$=M&&M.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(B,S.isPrimaryClient,G,$);return Lx(S,R.targetId,J.au),J.snapshot})(n,v,_,E);const a=await Sx(n.localStore,e,!0),s=new jR(e,a.Qs),l=s.ru(a.documents),f=Sf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=s.applyChanges(l,n.isPrimaryClient,f);Lx(n,t,h.au);const p=new HR(e,t,s);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function WR(n,e,t){const r=Ne(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!R0(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Yg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Yv(r.remoteStore,i.targetId),$g(r,i.targetId)})).catch(Bs)):($g(r,i.targetId),await Yg(r.localStore,i.targetId,!0))}async function QR(n,e){const t=Ne(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yv(t.remoteStore,r.targetId))}async function $R(n,e,t){const r=_3(n);try{const i=await(function(s,l){const f=Ne(s),h=gt.now(),p=l.reduce(((E,w)=>E.add(w.key)),Fe());let v,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let w=Er(),S=Fe();return f.Ns.getEntries(E,p).next((R=>{w=R,w.forEach(((L,M)=>{M.isValidDocument()||(S=S.add(L))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,w))).next((R=>{v=R;const L=[];for(const M of l){const B=l6(M,v.get(M.key).overlayedDocument);B!=null&&L.push(new ma(M.key,B,nT(B.value.mapValue),Qn.exists(!0)))}return f.mutationQueue.addMutationBatch(E,h,L,l)})).next((R=>{_=R;const L=R.applyToLocalDocumentSet(v,S);return f.documentOverlayCache.saveOverlays(E,R.batchId,L)}))})).then((()=>({batchId:_.batchId,changes:pT(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,l,f){let h=s.Vu[s.currentUser.toKey()];h||(h=new Pt(Oe)),h=h.insert(l,f),s.Vu[s.currentUser.toKey()]=h})(r,i.batchId,t),await bf(r,i.changes),await Cf(r.remoteStore)}catch(i){const a=Jv(i,"Failed to persist write");t.reject(a)}}async function p3(n,e){const t=Ne(n);try{const r=await sR(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=t.Au.get(a);s&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ae(s.hu,14607):i.removedDocuments.size>0&&(Ae(s.hu,42227),s.hu=!1))})),await bf(t,r,e)}catch(r){await Bs(r)}}function Px(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const f=Ne(s);f.onlineState=l;let h=!1;f.queries.forEach(((p,v)=>{for(const _ of v.Sa)_.va(l)&&(h=!0)})),h&&em(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZR(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new Pt(pe.comparator);s=s.insert(a,Ut.newNoDocument(a,Se.min()));const l=Fe().add(a),f=new M0(Se.min(),new Map,new Pt(Oe),s,l);await p3(r,f),r.du=r.du.remove(a),r.Au.delete(e),nm(r)}else await Yg(r.localStore,e,!1).then((()=>$g(r,e,t))).catch(Bs)}async function JR(n,e){const t=Ne(n),r=e.batch.batchId;try{const i=await oR(t.localStore,e);v3(t,r,null),g3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bf(t,i)}catch(i){await Bs(i)}}async function eD(n,e,t){const r=Ne(n);try{const i=await(function(s,l){const f=Ne(s);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,l).next((v=>(Ae(v!==null,37113),p=v.keys(),f.mutationQueue.removeMutationBatch(h,v)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);v3(r,e,t),g3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bf(r,i)}catch(i){await Bs(i)}}function g3(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function v3(n,e,t){const r=Ne(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function $g(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||m3(n,r)}))}function m3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),nm(n))}function Lx(n,e,t){for(const r of t)r instanceof f3?(n.Ru.addReference(r.key,e),tD(n,r)):r instanceof h3?(le(tm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||m3(n,r.key)):_e(19791,{wu:r})}function tD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(tm,"New document in limbo: "+t),n.Eu.add(r),nm(n))}function nm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new pe(st.fromString(e)),r=n.fu.next();n.Au.set(r,new GR(t)),n.du=n.du.insert(t,r),a3(n.remoteStore,new oa(Fr(b0(t.path)),r,"TargetPurposeLimboResolution",Br.ce))}}async function bf(n,e,t){const r=Ne(n),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,f)=>{s.push(r.pu(f,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Xv.As(f.targetId,h);a.push(p)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(f,h){const p=Ne(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>X.forEach(h,(_=>X.forEach(_.Es,(E=>p.persistence.referenceDelegate.addReference(v,_.targetId,E))).next((()=>X.forEach(_.ds,(E=>p.persistence.referenceDelegate.removeReference(v,_.targetId,E)))))))))}catch(v){if(!Co(v))throw v;le(Kv,"Failed to update sequence numbers: "+v)}for(const v of h){const _=v.targetId;if(!v.fromCache){const E=p.Ms.get(_),w=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(w);p.Ms=p.Ms.insert(_,S)}}})(r.localStore,a))}async function nD(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){le(tm,"User change. New user:",e.toKey());const r=await e3(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((l=>{l.forEach((f=>{f.reject(new de(ae.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bf(t,r.Ls)}}function rD(n,e){const t=Ne(n),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let i=Fe();const a=t.Iu.get(e);if(!a)return i;for(const s of a){const l=t.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}function y3(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=p3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZR.bind(null,e),e.Pu.H_=FR.bind(null,e.eventManager),e.Pu.yu=UR.bind(null,e.eventManager),e}function _3(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eD.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=B0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return JT(this.persistence,new ZT,e.initialUser,this.serializer)}Cu(e){return new Gv(k0.mi,this.serializer)}Du(e){return new n3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class iD extends pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof o0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KT(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new Gv((r=>o0.mi(r,t)),this.serializer)}}class aD extends pf{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await _3(this.xu.syncEngine),await Cf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return JT(this.persistence,new ZT,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new KT(r,e.asyncQueue,t)}Mu(e,t){const r=new s8(t,this.persistence);return new o8(e.asyncQueue,r)}Cu(e){const t=nR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mR(),Ld(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new n3}}class u0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Px(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nD.bind(null,this.syncEngine),await PR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kR})()}createDatastore(e){const t=B0(e.databaseInfo.databaseId),r=(function(a){return new vR(a)})(e.databaseInfo);return(function(a,s,l,f){return new xR(a,s,l,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,s,l){return new wR(r,i,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>Px(this.syncEngine,t,0)),(function(){return bx.v()?new bx:new hR})())}createSyncEngine(e,t){return(function(i,a,s,l,f,h,p){const v=new qR(i,a,s,l,f,h);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ne(t);le(Ps,"RemoteStore shutting down."),r.Ea.add(5),await If(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}u0.provider={build:()=>new u0};class oD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Io="FirestoreClient";class sD{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=Tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{le(Io,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(le(Io,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Jv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cg(n,e){n.asyncQueue.verifyOperationInProgress(),le(Io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await e3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function kx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await uD(n);le(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Dx(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>Dx(e.remoteStore,i))),n._onlineComponents=e}async function uD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Io,"Using user provided OfflineComponentProvider");try{await cg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),await cg(n,new pf)}}else le(Io,"Using default OfflineComponentProvider"),await cg(n,new iD(void 0));return n._offlineComponents}async function E3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Io,"Using user provided OnlineComponentProvider"),await kx(n,n._uninitializedComponentsProvider._online)):(le(Io,"Using default OnlineComponentProvider"),await kx(n,new u0))),n._onlineComponents}function lD(n){return E3(n).then((e=>e.syncEngine))}async function Bx(n){const e=await E3(n),t=e.eventManager;return t.onListen=XR.bind(null,e.syncEngine),t.onUnlisten=WR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QR.bind(null,e.syncEngine),t}function x3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Vx=new Map;const A3="firestore.googleapis.com",Fx=!0;class Ux{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A3,this.ssl=Fx}else this.host=e.host,this.ssl=e.ssl??Fx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F6)throw new de(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x3(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ux({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ux(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Xb;switch(r.type){case"firstParty":return new Qb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Vx.get(t);r&&(le("ComponentProvider","Removing Datastore"),Vx.delete(t),r.terminate())})(this),Promise.resolve()}}function cD(n,e,t,r={}){n=la(n,F0);const i=cl(e),a=n._getSettings(),s={...a,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;i&&(cw(`https://${l}`),fw("Firestore",!0)),a.host!==A3&&a.host!==l&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:l,ssl:i,emulatorOptions:r};if(!Ss(f,s)&&(n._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Mn.MOCK_USER;else{h=E4(r.mockUserToken,n._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new de(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mn(v)}n._authCredentials=new Kb(new Rw(h,p))}}class gl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gl(this.firestore,e,this._query)}}class nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ef(t,nn._jsonSchema))return new nn(e,r||null,new pe(st.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:tn("string",nn._jsonSchemaVersion),referencePath:tn("string")};class Eo extends gl{constructor(e,t,r){super(e,t,b0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new pe(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function Zc(n,e,...t){if(n=Tn(n),Ow("collection","path",e),n instanceof F0){const r=st.fromString(e,...t);return RE(r),new Eo(n,null,r)}{if(!(n instanceof nn||n instanceof Eo))throw new de(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return RE(r),new Eo(n.firestore,null,r)}}function gf(n,e,...t){if(n=Tn(n),arguments.length===1&&(e=Tv.newId()),Ow("doc","path",e),n instanceof F0){const r=st.fromString(e,...t);return bE(r),new nn(n,null,new pe(r))}{if(!(n instanceof nn||n instanceof Eo))throw new de(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return bE(r),new nn(n.firestore,n instanceof Eo?n.converter:null,new pe(r))}}const zx="AsyncQueue";class jx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new r3(this,"async_queue_retry"),this._c=()=>{const r=Ld();r&&le(zx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Co(e))throw e;le(zx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Wn("INTERNAL UNHANDLED ERROR: ",Hx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Zv.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&_e(47125,{Pc:Hx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Hx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Gx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Ls extends F0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new jx,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jx(e),this._firestoreClient=void 0,await e}}}function fD(n,e){const t=typeof n=="object"?n:_w(),r=typeof n=="string"?n:$d,i=Av(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=y4("firestore");a&&cD(i,...a)}return i}function w3(n){if(n._terminated)throw new de(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||T3(n),n._firestoreClient}function T3(n){const e=n._freezeSettings(),t=(function(i,a,s,l){return new k8(i,a,s,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,x3(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new sD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}function hD(n,e){bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return dD(n,u0.provider,{build:r=>new aD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function dD(n,e,t){if((n=la(n,Ls))._firestoreClient||n._terminated)throw new de(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(ae.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},T3(n)}class kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kr(rn.fromBase64String(e))}catch(t){throw new de(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ef(e,kr._jsonSchema))return kr.fromBase64String(e.bytes)}}kr._jsonSchemaVersion="firestore/bytes/1.0",kr._jsonSchema={type:tn("string",kr._jsonSchemaVersion),bytes:tn("string")};class U0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rm{constructor(e){this._methodName=e}}class Pi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pi._jsonSchemaVersion}}static fromJSON(e){if(Ef(e,Pi._jsonSchema))return new Pi(e.latitude,e.longitude)}}Pi._jsonSchemaVersion="firestore/geoPoint/1.0",Pi._jsonSchema={type:tn("string",Pi._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ef(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new de(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:tn("string",Li._jsonSchemaVersion),vectorValues:tn("object")};const pD=/^__.*__$/;class gD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new dl(e,this.data,t,this.fieldTransforms)}}class S3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function I3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:n})}}class im{constructor(e,t,r,i,a,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new im({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return l0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(I3(this.Ac)&&pD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||B0(e)}Cc(e,t,r,i=!1){return new im({Ac:e,methodName:t,Dc:r,path:Lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function am(n){const e=n._freezeSettings(),t=B0(n._databaseId);return new vD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mD(n,e,t,r,i,a={}){const s=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);om("Data must be an object, but it was:",s,r);const l=C3(r,s);let f,h;if(a.merge)f=new sr(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const v of a.mergeFields){const _=Zg(e,v,t);if(!s.contains(_))throw new de(ae.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);R3(p,_)||p.push(_)}f=new sr(p),h=s.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,h=s.fieldTransforms;return new gD(new Un(l),f,h)}class z0 extends rm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof z0}}function yD(n,e,t,r){const i=n.Cc(1,e,t);om("Data must be an object, but it was:",i,r);const a=[],s=Un.empty();bo(r,((f,h)=>{const p=sm(e,f,t);h=Tn(h);const v=i.yc(p);if(h instanceof z0)a.push(p);else{const _=Rf(h,v);_!=null&&(a.push(p),s.set(p,_))}}));const l=new sr(a);return new S3(s,l,i.fieldTransforms)}function _D(n,e,t,r,i,a){const s=n.Cc(1,e,t),l=[Zg(e,r,t)],f=[i];if(a.length%2!=0)throw new de(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)l.push(Zg(e,a[_])),f.push(a[_+1]);const h=[],p=Un.empty();for(let _=l.length-1;_>=0;--_)if(!R3(h,l[_])){const E=l[_];let w=f[_];w=Tn(w);const S=s.yc(E);if(w instanceof z0)h.push(E);else{const R=Rf(w,S);R!=null&&(h.push(E),p.set(E,R))}}const v=new sr(h);return new S3(p,v,s.fieldTransforms)}function ED(n,e,t,r=!1){return Rf(t,n.Cc(r?4:3,e))}function Rf(n,e){if(b3(n=Tn(n)))return om("Unsupported field value:",e,n),C3(n,e);if(n instanceof rm)return(function(r,i){if(!I3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const l of r){let f=Rf(l,i.wc(s));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),s++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:sl(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sl(i.serializer,a)}}if(r instanceof Pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:CT(i.serializer,r._byteString)};if(r instanceof nn){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Uv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Li)return(function(s,l){return{mapValue:{fields:{[Nv]:{stringValue:Mv},[tl]:{arrayValue:{values:s.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Lv(l.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${E0(r)}`)})(n,e)}function C3(n,e){const t={};return Kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(n,((r,i)=>{const a=Rf(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function b3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Pi||n instanceof kr||n instanceof nn||n instanceof rm||n instanceof Li)}function om(n,e,t){if(!b3(t)||!Nw(t)){const r=E0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Zg(n,e,t){if((e=Tn(e))instanceof U0)return e._internalPath;if(typeof e=="string")return sm(n,e);throw l0("Field path arguments must be of type string or ",n,!1,void 0,t)}const xD=new RegExp("[~\\*/\\[\\]]");function sm(n,e,t){if(e.search(xD)>=0)throw l0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new U0(...e.split("."))._internalPath}catch{throw l0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function l0(n,e,t,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(a||s)&&(f+=" (found",a&&(f+=` in field ${r}`),s&&(f+=` in document ${i}`),f+=")"),new de(ae.INVALID_ARGUMENT,l+n+f)}function R3(n,e){return n.some((t=>t.isEqual(e)))}class D3{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(um("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AD extends D3{data(){return super.data()}}function um(n,e){return typeof e=="string"?sm(n,e):e instanceof U0?e._internalPath:e._delegate._internalPath}function wD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class TD extends lm{}function O3(n,e,...t){let r=[];e instanceof lm&&r.push(e),r=r.concat(t),(function(a){const s=a.filter((f=>f instanceof cm)).length,l=a.filter((f=>f instanceof j0)).length;if(s>1||s>0&&l>0)throw new de(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class j0 extends TD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new j0(e,t,r)}_apply(e){const t=this._parse(e);return M3(e._query,t),new gl(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=am(e.firestore);return(function(a,s,l,f,h,p,v){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new de(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){Xx(v,p);const w=[];for(const S of v)w.push(qx(f,a,S));_={arrayValue:{values:w}}}else _=qx(f,a,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||Xx(v,p),_=ED(l,s,v,p==="in"||p==="not-in");return Ke.create(h,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function N3(n,e,t){const r=e,i=um("where",n);return j0._create(i,r,t)}class cm extends lm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cm(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let s=i;const l=a.getFlattenedFilters();for(const f of l)M3(s,f),s=Fg(s,f)})(e._query,t),new gl(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function qx(n,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new de(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cT(e)&&t.indexOf("/")!==-1)throw new de(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(st.fromString(t));if(!pe.isDocumentKey(r))throw new de(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cf(n,new pe(r))}if(t instanceof nn)return cf(n,t._key);throw new de(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${E0(t)}.`)}function Xx(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M3(n,e){const t=(function(i,a){for(const s of i)for(const l of s.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SD{convertValue(e,t="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bo(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[tl].arrayValue?.values?.map((r=>Mt(r.doubleValue)));return new Li(t)}convertGeoPoint(e){return new Pi(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=I0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uf(e));default:return null}}convertTimestamp(e){const t=fa(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=st.fromString(e);Ae(BT(r),9688,{name:e});const i=new Rs(r.get(1),r.get(3)),a=new pe(r.popFirst(5));return i.isEqual(t)||Wn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function ID(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ws extends D3{constructor(e,t,r,i,a,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(um("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ws._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",ws._jsonSchema={type:tn("string",ws._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class kd extends ws{data(e={}){return super.data(e)}}class qu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new kd(this._firestore,this._userDataWriter,r.key,r,new Vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const f=new kd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Vc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:f,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const f=new kd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Vc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:CD(l.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function CD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}qu._jsonSchemaVersion="firestore/querySnapshot/1.0",qu._jsonSchema={type:tn("string",qu._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class P3 extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function L3(n,e,t,...r){n=la(n,nn);const i=la(n.firestore,Ls),a=am(i);let s;return s=typeof(e=Tn(e))=="string"||e instanceof U0?_D(a,"updateDoc",n._key,e,t,r):yD(a,"updateDoc",n._key,e),fm(i,[s.toMutation(n._key,Qn.exists(!0))])}function k3(n){return fm(la(n.firestore,Ls),[new N0(n._key,Qn.none())])}function Jg(n,e){const t=la(n.firestore,Ls),r=gf(n),i=ID(n.converter,e);return fm(t,[mD(am(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Qn.exists(!1))]).then((()=>r))}function B3(n,...e){n=Tn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Gx(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Gx(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,s,l;if(n instanceof nn)s=la(n.firestore,Ls),l=b0(n._key.path),a={next:f=>{e[r]&&e[r](bD(s,n,f))},error:e[r+1],complete:e[r+2]};else{const f=la(n,gl);s=la(f.firestore,Ls),l=f._query;const h=new P3(s);a={next:p=>{e[r]&&e[r](new qu(s,h,f,p))},error:e[r+1],complete:e[r+2]},wD(n._query)}return(function(h,p,v,_){const E=new oD(_),w=new zR(p,E,v);return h.asyncQueue.enqueueAndForget((async()=>BR(await Bx(h),w))),()=>{E.Nu(),h.asyncQueue.enqueueAndForget((async()=>VR(await Bx(h),w)))}})(w3(s),l,i,a)}function fm(n,e){return(function(r,i){const a=new yo;return r.asyncQueue.enqueueAndForget((async()=>$R(await lD(r),i,a))),a.promise})(w3(n),e)}function bD(n,e,t){const r=t.docs.get(e._key),i=new P3(n);return new ws(n,i,e._key,r,new Vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){hl=i})(fl),Wu(new Is("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),l=new Ls(new Yb(r.getProvider("auth-internal")),new $b(s,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new de(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(h.options.projectId,p)})(s,i),s);return a={useFetchStreams:t,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),vo(TE,SE,e),vo(TE,SE,"esm2020")})();function V3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RD=V3,F3=new yf("auth","Firebase",V3());const c0=new Ev("@firebase/auth");function DD(n,...e){c0.logLevel<=Xe.WARN&&c0.warn(`Auth (${fl}): ${n}`,...e)}function Bd(n,...e){c0.logLevel<=Xe.ERROR&&c0.error(`Auth (${fl}): ${n}`,...e)}function oi(n,...e){throw hm(n,...e)}function ki(n,...e){return hm(n,...e)}function U3(n,e,t){const r={...RD(),[e]:t};return new yf("auth","Firebase",r).create(e,{appName:n.name})}function Bi(n){return U3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return F3.create(n,...e)}function Re(n,e,...t){if(!n)throw hm(e,...t)}function sa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function da(n,e){n||sa(e)}function ev(){return typeof self<"u"&&self.location?.href||""}function OD(){return Kx()==="http:"||Kx()==="https:"}function Kx(){return typeof self<"u"&&self.location?.protocol||null}function ND(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OD()||S4()||"connection"in navigator)?navigator.onLine:!0}function MD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Df{constructor(e,t){this.shortDelay=e,this.longDelay=t,da(t>e,"Short delay should be less than long delay!"),this.isMobile=w4()||I4()}get(){return ND()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function dm(n,e){da(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class z3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const LD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kD=new Df(3e4,6e4);function ya(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function _a(n,e,t,r,i={}){return j3(n,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const l=_f({key:n.config.apiKey,...s}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return T4()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&cl(n.emulatorConfig.host)&&(h.credentials="include"),z3.fetch()(await H3(n,n.config.apiHost,t,l),h)})}async function j3(n,e,t){n._canInitEmulator=!1;const r={...PD,...e};try{const i=new VD(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw yd(n,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[f,h]=l.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(n,"credential-already-in-use",s);if(f==="EMAIL_EXISTS")throw yd(n,"email-already-in-use",s);if(f==="USER_DISABLED")throw yd(n,"user-disabled",s);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw U3(n,p,h);oi(n,p)}}catch(i){if(i instanceof ga)throw i;oi(n,"network-request-failed",{message:String(i)})}}async function Of(n,e,t,r,i={}){const a=await _a(n,e,t,r,i);return"mfaPendingCredential"in a&&oi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function H3(n,e,t,r){const i=`${e}${t}?${r}`,a=n,s=a.config.emulator?dm(n.config,i):`${n.config.apiScheme}://${i}`;return LD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function BD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ki(this.auth,"network-request-failed")),kD.get())})}}function yd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ki(n,e,r);return i.customData._tokenResponse=t,i}function Yx(n){return n!==void 0&&n.enterprise!==void 0}class FD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return BD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UD(n,e){return _a(n,"GET","/v2/recaptchaConfig",ya(n,e))}async function zD(n,e){return _a(n,"POST","/v1/accounts:delete",e)}async function f0(n,e){return _a(n,"POST","/v1/accounts:lookup",e)}function Jc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jD(n,e=!1){const t=Tn(n),r=await t.getIdToken(e),i=pm(r);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:r,authTime:Jc(fg(i.auth_time)),issuedAtTime:Jc(fg(i.iat)),expirationTime:Jc(fg(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function fg(n){return Number(n)*1e3}function pm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const i=aw(t);return i?JSON.parse(i):(Bd("Failed to decode base64 JWT payload"),null)}catch(i){return Bd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Wx(n){const e=pm(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ga&&HD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function HD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class GD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function h0(n){const e=n.auth,t=await n.getIdToken(),r=await vf(n,f0(e,{idToken:t}));Re(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?G3(i.providerUserInfo):[],s=XD(n.providerData,a),l=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!s?.length,h=l?f:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function qD(n){const e=Tn(n);await h0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XD(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function G3(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function KD(n,e){const t=await j3(n,{},async()=>{const r=_f({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,s=await H3(n,i,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:l,body:r};return n.emulatorConfig&&cl(n.emulatorConfig.host)&&(f.credentials="include"),z3.fetch()(s,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YD(n,e){return _a(n,"POST","/v2/accounts:revokeToken",ya(n,e))}class Xu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Wx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await KD(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,s=new Xu;return r&&(Re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Re(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xu,this.toJSON())}_performRefresh(){return sa("not implemented")}}function ro(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new GD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new tv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vf(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jD(this,e)}reload(){return qD(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await h0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await vf(this,zD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,s=t.photoURL??void 0,l=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:E,providerData:w,stsTokenManager:S}=t;Re(v&&S,e,"internal-error");const R=Xu.fromJSON(this.name,S);Re(typeof v=="string",e,"internal-error"),ro(r,e.name),ro(i,e.name),Re(typeof _=="boolean",e,"internal-error"),Re(typeof E=="boolean",e,"internal-error"),ro(a,e.name),ro(s,e.name),ro(l,e.name),ro(f,e.name),ro(h,e.name),ro(p,e.name);const L=new ii({uid:v,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:E,photoURL:s,phoneNumber:a,tenantId:l,stsTokenManager:R,createdAt:h,lastLoginAt:p});return w&&Array.isArray(w)&&(L.providerData=w.map(M=>({...M}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new Xu;i.updateFromServerResponse(t);const a=new ii({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await h0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?G3(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,l=new Xu;l.updateFromIdToken(r);const f=new ii({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new tv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,h),f}}const Qx=new Map;function ua(n){da(n instanceof Function,"Expected a class definition");let e=Qx.get(n);return e?(da(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Qx.set(n,e),e)}class q3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q3.type="NONE";const $x=q3;function Vd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ku{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Vd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Vd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await f0(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ku(ua($x),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||ua($x);const s=Vd(r,e.config.apiKey,e.name);let l=null;for(const h of t)try{const p=await h._get(s);if(p){let v;if(typeof p=="string"){const _=await f0(e,{idToken:p}).catch(()=>{});if(!_)break;v=await ii._fromGetAccountInfoResponse(e,_,p)}else v=ii._fromJSON(e,p);h!==a&&(l=v),a=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ku(a,e,r):(a=f[0],l&&await a._set(s,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new Ku(a,e,r))}}function Zx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($3(e))return"Blackberry";if(Z3(e))return"Webos";if(K3(e))return"Safari";if((e.includes("chrome/")||Y3(e))&&!e.includes("edge/"))return"Chrome";if(Q3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function X3(n=pn()){return/firefox\//i.test(n)}function K3(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y3(n=pn()){return/crios\//i.test(n)}function W3(n=pn()){return/iemobile/i.test(n)}function Q3(n=pn()){return/android/i.test(n)}function $3(n=pn()){return/blackberry/i.test(n)}function Z3(n=pn()){return/webos/i.test(n)}function gm(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WD(n=pn()){return gm(n)&&!!window.navigator?.standalone}function QD(){return C4()&&document.documentMode===10}function J3(n=pn()){return gm(n)||Q3(n)||Z3(n)||$3(n)||/windows phone/i.test(n)||W3(n)}function eS(n,e=[]){let t;switch(n){case"Browser":t=Zx(pn());break;case"Worker":t=`${Zx(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fl}/${r}`}class $D{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((s,l)=>{try{const f=e(a);s(f)}catch(f){l(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function ZD(n,e={}){return _a(n,"GET","/v2/passwordPolicy",ya(n,e))}const JD=6;class eO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??JD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class tO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jx(this),this.idTokenSubscription=new Jx(this),this.beforeStateQueue=new $D(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ua(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ku.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await f0(this,{idToken:e}),r=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_r(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===s)&&l?.user&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await h0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(Bi(this));const t=e?Tn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(Bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZD(this),t=new eO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await YD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ua(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Ku.create(this,[ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{s=!0,f()}}else{const f=e.addObserver(t);return()=>{s=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&DD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ea(n){return Tn(n)}class Jx{constructor(e){this.auth=e,this.observer=null,this.addObserver=M4(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let H0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nO(n){H0=n}function tS(n){return H0.loadJS(n)}function rO(){return H0.recaptchaEnterpriseScript}function iO(){return H0.gapiScript}function aO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class oO{constructor(){this.enterprise=new sO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const uO="recaptcha-enterprise",nS="NO_RECAPTCHA";class lO{constructor(e){this.type=uO,this.auth=Ea(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,l)=>{UD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new FD(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,s(h.siteKey)}}).catch(f=>{l(f)})})}function i(a,s,l){const f=window.grecaptcha;Yx(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{s(h)}).catch(()=>{s(nS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oO().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(l=>{if(!t&&Yx(window.grecaptcha))i(l,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let f=rO();f.length!==0&&(f+=l),tS(f).then(()=>{i(l,a,s)}).catch(h=>{s(h)})}}).catch(l=>{s(l)})})}}async function eA(n,e,t,r=!1,i=!1){const a=new lO(n);let s;if(i)s=nS;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const f=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const f=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function d0(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await eA(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await eA(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(a)})}function cO(n,e){const t=Av(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Ss(a,e??{}))return i;oi(i,"already-initialized")}return t.initialize({options:e})}function fO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ua);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function hO(n,e,t){const r=Ea(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=rS(e),{host:s,port:l}=dO(e),f=l===null?"":`:${l}`,h={url:`${a}//${s}${f}/`},p=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Ss(h,r.config.emulator)&&Ss(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,cl(s)?(cw(`${a}//${s}${f}`),fw("Auth",!0)):pO()}function rS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dO(n){const e=rS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:tA(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:tA(s)}}}function tA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class vm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sa("not implemented")}_getIdTokenResponse(e){return sa("not implemented")}_linkToIdToken(e,t){return sa("not implemented")}_getReauthenticationResolver(e){return sa("not implemented")}}async function gO(n,e){return _a(n,"POST","/v1/accounts:signUp",e)}async function vO(n,e){return Of(n,"POST","/v1/accounts:signInWithPassword",ya(n,e))}async function mO(n,e){return _a(n,"POST","/v1/accounts:sendOobCode",ya(n,e))}async function yO(n,e){return mO(n,e)}async function _O(n,e){return Of(n,"POST","/v1/accounts:signInWithEmailLink",ya(n,e))}async function EO(n,e){return Of(n,"POST","/v1/accounts:signInWithEmailLink",ya(n,e))}class mf extends vm{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new mf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d0(e,t,"signInWithPassword",vO);case"emailLink":return _O(e,{email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d0(e,r,"signUpPassword",gO);case"emailLink":return EO(e,{idToken:t,email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yu(n,e){return Of(n,"POST","/v1/accounts:signInWithIdp",ya(n,e))}const xO="http://localhost";class ks extends vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):oi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const s=new ks(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Yu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yu(e,t)}buildRequest(){const e={requestUri:xO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_f(t)}return e}}function AO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wO(n){const e=Nc(Mc(n)).link,t=e?Nc(Mc(e)).deep_link_id:null,r=Nc(Mc(n)).deep_link_id;return(r?Nc(Mc(r)).link:null)||r||t||e||n}class mm{constructor(e){const t=Nc(Mc(e)),r=t.apiKey??null,i=t.oobCode??null,a=AO(t.mode??null);Re(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wO(e);try{return new mm(t)}catch{return null}}}class vl{constructor(){this.providerId=vl.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=mm.parseLink(t);return Re(r,"argument-error"),mf._fromEmailAndCode(e,r.code,r.tenantId)}}vl.PROVIDER_ID="password";vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nf extends iS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uo extends Nf{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";uo.PROVIDER_ID="facebook.com";class lo extends Nf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ks._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return lo.credential(t,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";class co extends Nf{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";class fo extends Nf{constructor(){super("twitter.com")}static credential(e,t){return ks._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fo.credential(t,r)}catch{return null}}}fo.TWITTER_SIGN_IN_METHOD="twitter.com";fo.PROVIDER_ID="twitter.com";async function aS(n,e){return Of(n,"POST","/v1/accounts:signUp",ya(n,e))}class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await ii._fromIdTokenResponse(e,r,i),s=nA(r);return new pa({user:a,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=nA(r);return new pa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function nA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function TO(n){if(_r(n.app))return Promise.reject(Bi(n));const e=Ea(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new pa({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await aS(e,{returnSecureToken:!0}),r=await pa._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class p0 extends ga{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,p0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new p0(e,t,r,i)}}function oS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?p0._fromErrorAndOperation(n,a,e,r):a})}async function SO(n,e,t=!1){const r=await vf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return pa._forOperation(n,"link",r)}async function IO(n,e,t=!1){const{auth:r}=n;if(_r(r.app))return Promise.reject(Bi(r));const i="reauthenticate";try{const a=await vf(n,oS(r,i,e,n),t);Re(a.idToken,r,"internal-error");const s=pm(a.idToken);Re(s,r,"internal-error");const{sub:l}=s;return Re(n.uid===l,r,"user-mismatch"),pa._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&oi(r,"user-mismatch"),a}}async function sS(n,e,t=!1){if(_r(n.app))return Promise.reject(Bi(n));const r="signIn",i=await oS(n,r,e),a=await pa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function CO(n,e){return sS(Ea(n),e)}async function uS(n){const e=Ea(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bO(n,e,t){const r=Ea(n);await d0(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",yO)}async function RO(n,e,t){if(_r(n.app))return Promise.reject(Bi(n));const r=Ea(n),s=await d0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aS).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&uS(n),f}),l=await pa._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function DO(n,e,t){return _r(n.app)?Promise.reject(Bi(n)):CO(Tn(n),vl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uS(n),r})}function OO(n,e,t,r){return Tn(n).onIdTokenChanged(e,t,r)}function NO(n,e,t){return Tn(n).beforeAuthStateChanged(e,t)}function MO(n,e,t,r){return Tn(n).onAuthStateChanged(e,t,r)}const g0="__sak";class lS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(g0,"1"),this.storage.removeItem(g0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const PO=1e3,LO=10;class cS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,l,f)=>{this.notifyListeners(s,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!t&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);QD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,LO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},PO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cS.type="LOCAL";const kO=cS;class fS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fS.type="SESSION";const hS=fS;function BO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class G0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new G0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async h=>h(t.origin,a)),f=await BO(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}G0.receivers=[];function ym(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class VO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((l,f)=>{const h=ym("",20);i.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(v){const _=v;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(_.data.response);break;default:clearTimeout(p),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Vi(){return window}function FO(n){Vi().location.href=n}function dS(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function UO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zO(){return navigator?.serviceWorker?.controller||null}function jO(){return dS()?self:null}const pS="firebaseLocalStorageDb",HO=1,v0="firebaseLocalStorage",gS="fbase_key";class Mf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function q0(n,e){return n.transaction([v0],e?"readwrite":"readonly").objectStore(v0)}function GO(){const n=indexedDB.deleteDatabase(pS);return new Mf(n).toPromise()}function nv(){const n=indexedDB.open(pS,HO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(v0,{keyPath:gS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(v0)?e(r):(r.close(),await GO(),e(await nv()))})})}async function rA(n,e,t){const r=q0(n,!0).put({[gS]:e,value:t});return new Mf(r).toPromise()}async function qO(n,e){const t=q0(n,!1).get(e),r=await new Mf(t).toPromise();return r===void 0?null:r.value}function iA(n,e){const t=q0(n,!0).delete(e);return new Mf(t).toPromise()}const XO=800,KO=3;class vS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>KO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=G0._getInstance(jO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await UO(),!this.activeServiceWorker)return;this.sender=new VO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await nv();return await rA(e,g0,"1"),await iA(e,g0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=q0(i,!1).getAll();return new Mf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vS.type="LOCAL";const YO=vS;new Df(3e4,6e4);function WO(n,e){return e?ua(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class _m extends vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QO(n){return sS(n.auth,new _m(n),n.bypassAuthState)}function $O(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),IO(t,new _m(n),n.bypassAuthState)}async function ZO(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),SO(t,new _m(n),n.bypassAuthState)}class mS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QO;case"linkViaPopup":case"linkViaRedirect":return ZO;case"reauthViaPopup":case"reauthViaRedirect":return $O;default:oi(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const JO=new Df(2e3,1e4);class zu extends mS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,zu.currentPopupAction&&zu.currentPopupAction.cancel(),zu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){da(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JO.get())};e()}}zu.currentPopupAction=null;const e5="pendingRedirect",Fd=new Map;class t5 extends mS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const r=await n5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function n5(n,e){const t=a5(e),r=i5(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function r5(n,e){Fd.set(n._key(),e)}function i5(n){return ua(n._redirectPersistence)}function a5(n){return Vd(e5,n.config.apiKey,n.name)}async function o5(n,e,t=!1){if(_r(n.app))return Promise.reject(Bi(n));const r=Ea(n),i=WO(r,e),s=await new t5(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}const s5=600*1e3;class u5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yS(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ki(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aA(e))}saveEventToCache(e){this.cachedEventUids.add(aA(e)),this.lastProcessedEventTime=Date.now()}}function aA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function l5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yS(n);default:return!1}}async function c5(n,e={}){return _a(n,"GET","/v1/projects",e)}const f5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h5=/^https?/;async function d5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await c5(n);for(const t of e)try{if(p5(t))return}catch{}oi(n,"unauthorized-domain")}function p5(n){const e=ev(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!h5.test(t))return!1;if(f5.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const g5=new Df(3e4,6e4);function oA(){const n=Vi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function v5(n){return new Promise((e,t)=>{function r(){oA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oA(),t(ki(n,"network-request-failed"))},timeout:g5.get()})}if(Vi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vi().gapi?.load)r();else{const i=aO("iframefcb");return Vi()[i]=()=>{gapi.load?r():t(ki(n,"network-request-failed"))},tS(`${iO()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Ud=null,e})}let Ud=null;function m5(n){return Ud=Ud||v5(n),Ud}const y5=new Df(5e3,15e3),_5="__/auth/iframe",E5="emulator/auth/iframe",x5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function w5(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dm(e,E5):`https://${n.config.authDomain}/${_5}`,r={apiKey:e.apiKey,appName:n.name,v:fl},i=A5.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${_f(r).slice(1)}`}async function T5(n){const e=await m5(n),t=Vi().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:w5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x5,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=ki(n,"network-request-failed"),l=Vi().setTimeout(()=>{a(s)},y5.get());function f(){Vi().clearTimeout(l),i(r)}r.ping(f).then(f,()=>{a(s)})}))}const S5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I5=500,C5=600,b5="_blank",R5="http://localhost";class sA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D5(n,e,t,r=I5,i=C5){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const f={...S5,width:r.toString(),height:i.toString(),top:a,left:s},h=pn().toLowerCase();t&&(l=Y3(h)?b5:t),X3(h)&&(e=e||R5,f.scrollbars="yes");const p=Object.entries(f).reduce((_,[E,w])=>`${_}${E}=${w},`,"");if(WD(h)&&l!=="_self")return O5(e||"",l),new sA(null);const v=window.open(e||"",l,p);Re(v,n,"popup-blocked");try{v.focus()}catch{}return new sA(v)}function O5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const N5="__/auth/handler",M5="emulator/auth/handler",P5=encodeURIComponent("fac");async function uA(n,e,t,r,i,a){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:fl,eventId:i};if(e instanceof iS){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",N4(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))s[p]=v}if(e instanceof Nf){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(s.scopes=p.join(","))}n.tenantId&&(s.tid=n.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const f=await n._getAppCheckToken(),h=f?`#${P5}=${encodeURIComponent(f)}`:"";return`${L5(n)}?${_f(l).slice(1)}${h}`}function L5({config:n}){return n.emulator?dm(n,M5):`https://${n.authDomain}/${N5}`}const hg="webStorageSupport";class k5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hS,this._completeRedirectFn=o5,this._overrideRedirectResult=r5}async _openPopup(e,t,r,i){da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await uA(e,t,r,ev(),i);return D5(e,a,ym())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await uA(e,t,r,ev(),i);return FO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(da(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await T5(e),r=new u5(e);return t.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hg,{type:hg},i=>{const a=i?.[0]?.[hg];a!==void 0&&t(!!a),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=d5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J3()||K3()||gm()}}const B5=k5;var lA="@firebase/auth",cA="1.12.0";class V5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function F5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U5(n){Wu(new Is("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;Re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:s,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eS(n)},h=new tO(r,i,a,f);return fO(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wu(new Is("auth-internal",e=>{const t=Ea(e.getProvider("auth").getImmediate());return(r=>new V5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vo(lA,cA,F5(n)),vo(lA,cA,"esm2020")}const z5=300,j5=lw("authIdTokenMaxAge")||z5;let fA=null;const H5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>j5)return;const i=t?.token;fA!==i&&(fA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function G5(n=_w()){const e=Av(n,"auth");if(e.isInitialized())return e.getImmediate();const t=cO(n,{popupRedirectResolver:B5,persistence:[YO,kO,hS]}),r=lw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=H5(a.toString());NO(t,s,()=>s(t.currentUser)),OO(t,l=>s(l))}}const i=sw("auth");return i&&hO(t,`http://${i}`),t}function q5(){return document.getElementsByTagName("head")?.[0]??document}nO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=ki("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",q5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U5("Browser");const X5={apiKey:"AIzaSyDFJKoHEhMnpjt2bqTPpzru1qdA_rUOEdk",authDomain:"bitlkhzin-8d5c8.firebaseapp.com",projectId:"bitlkhzin-8d5c8",storageBucket:"bitlkhzin-8d5c8.firebasestorage.app",messagingSenderId:"862517672946",appId:"1:862517672946:web:66efa0f33cd67f0751896b"},_S=yw(X5),Di=fD(_S),ys=G5(_S);hD(Di).catch(n=>{n.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):n.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const K5=({children:n,currentView:e="inventory",onNavigate:t})=>U.jsxs("div",{className:"layout-container",style:{display:"flex",minHeight:"100vh"},children:[U.jsxs("aside",{className:"glass-panel sidebar desktop-only",style:{width:"280px",margin:"20px",height:"calc(100vh - 40px)",position:"sticky",top:"20px",display:"flex",flexDirection:"column",padding:"24px"},children:[U.jsxs("div",{style:{marginBottom:"40px",display:"flex",alignItems:"center",gap:"12px"},children:[U.jsx("div",{style:{width:"40px",height:"40px",background:"hsl(var(--color-primary))",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:U.jsx(NC,{size:24,strokeWidth:2.5})}),U.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"800"},children:"Bit Khzin"})]}),U.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:"8px",flex:1},children:[U.jsx(_d,{icon:U.jsx(uE,{size:20}),label:"Inventory",active:e==="inventory",onClick:()=>t?.("inventory")}),U.jsx(_d,{icon:U.jsx(fE,{size:20}),label:"Shopping List",active:e==="todo",onClick:()=>t?.("todo")}),U.jsx(_d,{icon:U.jsx(cE,{size:20}),label:"Settings",active:e==="settings",onClick:()=>t?.("settings")})]}),U.jsx("div",{style:{paddingTop:"20px",borderTop:"1px solid var(--glass-border)"},children:U.jsx(_d,{icon:U.jsx(ew,{size:20}),label:"Sign Out",onClick:()=>ys.signOut(),active:!1})})]}),U.jsx("main",{className:"animate-fade-in",style:{flex:1,padding:"20px",maxWidth:"100%",paddingBottom:"90px"},children:n},e),U.jsx("div",{className:"mobile-nav-container mobile-only",style:{position:"fixed",bottom:0,zIndex:50},children:U.jsxs("ul",{className:"nav-list",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",width:"100%"},children:[U.jsx("li",{className:`nav-item ${e==="inventory"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:U.jsxs("button",{className:`nav-link ${e==="inventory"?"active":""}`,onClick:()=>t?.("inventory"),children:[U.jsx("span",{className:"icon",children:U.jsx(uE,{size:24})}),U.jsx("span",{className:"text",children:"Pantry"})]})}),U.jsx("li",{className:`nav-item ${e==="todo"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:U.jsxs("button",{className:`nav-link ${e==="todo"?"active":""}`,onClick:()=>t?.("todo"),children:[U.jsx("span",{className:"icon",children:U.jsx(fE,{size:24})}),U.jsx("span",{className:"text",children:"Shop"})]})}),U.jsx("li",{className:`nav-item ${e==="settings"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:U.jsxs("button",{className:`nav-link ${e==="settings"?"active":""}`,onClick:()=>t?.("settings"),children:[U.jsx("span",{className:"icon",children:U.jsx(cE,{size:24})}),U.jsx("span",{className:"text",children:"Settings"})]})}),U.jsx("div",{className:"indicator",style:{left:`calc(100% / 3 * ${e==="inventory"?0:e==="todo"?1:2} + 100% / 6 - 35px)`}})]})}),U.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-only { display: none !important; }
        }
        @media (min-width: 769px) {
          .mobile-only { display: none !important; }
        }
      `})]}),_d=({icon:n,label:e,active:t=!1,onClick:r,vertical:i=!1})=>U.jsxs("button",{onClick:r,style:{display:"flex",flexDirection:i?"column":"row",alignItems:"center",gap:i?"4px":"12px",padding:"12px 16px",width:i?"auto":"100%",borderRadius:"var(--radius-sm)",border:"none",background:!i&&t?"rgba(59, 130, 246, 0.1)":"transparent",color:t?"hsl(var(--color-primary))":"inherit",cursor:"pointer",fontWeight:600,transition:"all 0.2s",textAlign:i?"center":"left",fontSize:i?"0.75rem":"1rem",opacity:!t&&i?.6:1},children:[n,e&&U.jsx("span",{children:e})]}),Pf=({children:n,className:e="",hoverEffect:t=!1,style:r,...i})=>U.jsx("div",{className:`glass-panel ${t?"hover-lift":""} ${e}`,style:{padding:"24px",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:t?"pointer":"default",...r},...i,children:n}),ai=({children:n,variant:e="primary",size:t="md",isLoading:r,className:i="",disabled:a,...s})=>{const l=()=>{switch(e){case"primary":return"btn-primary";case"secondary":return"btn-secondary";case"danger":return"btn-primary";case"ghost":return"btn-ghost";default:return"btn-primary"}},f=()=>{switch(t){case"sm":return{padding:"8px 16px",fontSize:"0.875rem"};case"lg":return{padding:"16px 32px",fontSize:"1.25rem"};default:return{}}},h=l();return U.jsxs("button",{className:`${h} tap-scale ${i}`,disabled:r||a,style:{...f(),opacity:r||a?.7:1,cursor:r||a?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",...s.style},...s,children:[r&&U.jsx("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:U.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"30 60"})}),n]})},ES=ye.createContext({user:null,loading:!0}),Em=()=>ye.useContext(ES),Y5=({children:n})=>{const[e,t]=ye.useState(null),[r,i]=ye.useState(!0);return ye.useEffect(()=>{const a=MO(ys,s=>{t(s),i(!1)});return()=>a()},[]),U.jsx(ES.Provider,{value:{user:e,loading:r},children:n})},xS=()=>{const[n,e]=ye.useState([]),{user:t}=Em();return ye.useEffect(()=>{if(!t){e([]);return}const s=O3(Zc(Di,"shopping-list"),N3("userId","==",t.uid)),l=B3(s,f=>{const h=f.docs.map(p=>({id:p.id,...p.data()}));h.sort((p,v)=>v.createdAt-p.createdAt),e(h)},f=>{console.error("Error fetching shopping list:",f)});return()=>l()},[t]),{todos:n,addTodo:async(s,l=1,f="Other")=>{if(!s.trim()||!t)return;const h=Date.now().toString(),p={id:h,text:s,completed:!1,quantity:l,category:f,createdAt:Date.now()};e(v=>[p,...v]);try{await Jg(Zc(Di,"shopping-list"),{text:s,userId:t.uid,completed:!1,quantity:l,category:f,createdAt:Date.now()})}catch(v){console.error("Error adding item:",v),e(_=>_.filter(E=>E.id!==h)),alert("Failed to add item. Please check your connection.")}},toggleTodo:async s=>{const l=n.find(f=>f.id===s);if(l){e(f=>f.map(h=>h.id===s?{...h,completed:!h.completed}:h));try{await L3(gf(Di,"shopping-list",s),{completed:!l.completed})}catch(f){console.error("Error toggling item:",f),e(h=>h.map(p=>p.id===s?{...p,completed:l.completed}:p))}}},deleteTodo:async s=>{const l=n.find(f=>f.id===s);if(l){e(f=>f.filter(h=>h.id!==s));try{await k3(gf(Di,"shopping-list",s))}catch(f){console.error("Error deleting item:",f),e(h=>{const p=[...h,l];return p.sort((v,_)=>_.createdAt-v.createdAt),p}),alert("Failed to delete item. Check console for details.")}}}}},rv=["Produce","Dairy","Bakery","Meat","Frozen","Pantry","Beverages","Snacks","Household","Other"],zd={milk:"Dairy",cheese:"Dairy",yogurt:"Dairy",butter:"Dairy",egg:"Dairy",eggs:"Dairy",bread:"Bakery",bagel:"Bakery",sugar:"Bakery",flour:"Bakery",apple:"Produce",banana:"Produce",lettuce:"Produce",tomato:"Produce",onion:"Produce",potato:"Produce",chicken:"Meat",beef:"Meat",steak:"Meat",water:"Beverages",juice:"Beverages",soda:"Beverages",coffee:"Pantry",tea:"Pantry",rice:"Pantry",pasta:"Pantry",oil:"Pantry",salt:"Pantry",pepper:"Pantry"},xm=()=>{const[n,e]=ye.useState([]),[t,r]=ye.useState(!0),{user:i}=Em();return ye.useEffect(()=>{if(!i){e([]),r(!1);return}const h=O3(Zc(Di,"inventory"),N3("userId","==",i.uid)),p=B3(h,v=>{const _=v.docs.map(E=>({id:E.id,...E.data()}));_.sort((E,w)=>w.createdAt-E.createdAt),e(_),r(!1)},v=>{console.error("Error fetching inventory:",v),r(!1)});return()=>p()},[i]),{items:n,loading:t,addItem:async h=>{if(!i)return;let p=h.category;if(!p||p==="Other"){const E=h.name.toLowerCase();for(const[w,S]of Object.entries(zd))if(E.includes(w)){p=S;break}}const v=Date.now().toString(),_={...h,category:p,stockLevel:h.stockLevel||"full",id:v,userId:i.uid,createdAt:Date.now(),updatedAt:Date.now()};e(E=>[_,...E]);try{await Jg(Zc(Di,"inventory"),{...h,category:p,stockLevel:h.stockLevel||"full",userId:i.uid,createdAt:Date.now(),updatedAt:Date.now()})}catch(E){throw console.error("Error adding item:",E),e(w=>w.filter(S=>S.id!==v)),E}},updateItem:async(h,p)=>{e(v=>v.map(_=>_.id===h?{..._,...p,updatedAt:Date.now()}:_));try{await L3(gf(Di,"inventory",h),{...p,updatedAt:Date.now()})}catch(v){console.error("Error updating item:",v)}},deleteItem:async h=>{const p=n.find(v=>v.id===h);if(p){e(v=>v.filter(_=>_.id!==h));try{await k3(gf(Di,"inventory",h))}catch(v){console.error("Error deleting item:",v),p&&e(_=>[..._,p].sort((E,w)=>w.createdAt-E.createdAt))}}},seedData:async()=>{if(!i)return;const h=[{name:"Milk",category:"Dairy",stockLevel:"full"},{name:"Eggs",category:"Dairy",stockLevel:"low"},{name:"Bread",category:"Bakery",stockLevel:"full"},{name:"Rice",category:"Pantry",stockLevel:"full"},{name:"Pasta",category:"Pantry",stockLevel:"normal"}];try{const p=h.map(v=>Jg(Zc(Di,"inventory"),{...v,location:"kitchen",quantity:1,value:0,userId:i.uid,createdAt:Date.now(),updatedAt:Date.now()}));await Promise.all(p)}catch(p){console.error("Error seeding data:",p)}}}},Am=({message:n,type:e="info",isVisible:t,onClose:r,duration:i=3e3})=>{if(ye.useEffect(()=>{if(t&&i>0){const l=setTimeout(()=>{r()},i);return()=>clearTimeout(l)}},[t,i,r]),!t)return null;const a=()=>{switch(e){case"success":return U.jsx(JA,{size:20,color:"#4ade80"});case"error":return U.jsx(ZA,{size:20,color:"#f87171"});default:return U.jsx(GC,{size:20,color:"#60a5fa"})}},s=()=>{switch(e){case"success":return"rgba(74, 222, 128, 0.5)";case"error":return"rgba(248, 113, 113, 0.5)";default:return"rgba(96, 165, 250, 0.5)"}};return U.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:2e3,display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",background:"rgba(20, 20, 30, 0.95)",backdropFilter:"blur(12px)",border:`1px solid ${s()}`,borderRadius:"99px",color:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",maxWidth:"90%",width:"max-content",animation:"slideDownFade 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[a(),U.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:n}),U.jsx("button",{onClick:r,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"rgba(255,255,255,0.6)",display:"flex"},children:U.jsx(nw,{size:16})}),U.jsx("style",{children:`
                @keyframes slideDownFade {
                    from { opacity: 0; transform: translate(-50%, -20px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
            `})]})},W5=({items:n,onAddItem:e,onDeleteItem:t})=>{const{addTodo:r}=xS(),{updateItem:i,seedData:a}=xm(),[s,l]=vC.useState({show:!1,msg:""}),f=v=>{r(v.name,1,v.category),l({show:!0,msg:`Added ${v.name} to Shopping List`}),setTimeout(()=>l({show:!1,msg:""}),3e3)},h=(v,_)=>{i(v.id,{stockLevel:_})},p=n.reduce((v,_)=>{const E=_.category||"Other";return v[E]||(v[E]=[]),v[E].push(_),v},{});return U.jsxs("div",{className:"animate-fade-in",style:{paddingBottom:"80px"},children:[U.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"16px"},children:U.jsxs(ai,{onClick:e,className:"tap-scale",children:[U.jsx(tw,{size:18})," Add Item"]})}),n.length===0?U.jsxs("div",{style:{textAlign:"center",padding:"48px",opacity:.8},children:[U.jsx("p",{style:{marginBottom:"16px"},children:"Your pantry is empty."}),U.jsx(ai,{onClick:()=>a&&a(),children:"Preload Essentials"})]}):U.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(p).map(([v,_],E)=>U.jsxs("div",{className:"animate-slide-up",style:{animationDelay:`${E*50}ms`},children:[U.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",paddingLeft:"8px",borderLeft:"4px solid hsl(var(--color-primary))"},children:U.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"hsl(var(--color-primary))",textTransform:"uppercase",letterSpacing:"0.05em"},children:v})}),U.jsx(Pf,{style:{padding:"0",overflow:"hidden"},children:_.map((w,S)=>U.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px",borderBottom:S!==_.length-1?"1px solid var(--glass-border)":"none",background:w.stockLevel==="low"?"rgba(239, 68, 68, 0.05)":"transparent"},children:[U.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid var(--text-muted)",borderRadius:"4px",marginRight:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>f(w),title:"Add to Shopping List"}),U.jsx("div",{style:{flex:1},children:U.jsx("span",{style:{fontWeight:500,fontSize:"1rem"},children:w.name})}),U.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[U.jsx("button",{onClick:()=>h(w,"low"),className:"tap-scale",style:{background:"none",border:"none",fontSize:"0.8rem",fontWeight:"600",color:w.stockLevel==="low"?"#ef4444":"var(--text-muted)",cursor:"pointer",opacity:w.stockLevel==="low"?1:.5,transition:"all 0.2s"},children:"Low"}),U.jsx("div",{style:{width:"1px",height:"12px",background:"var(--text-muted)",opacity:.3}}),U.jsx("button",{onClick:()=>h(w,"full"),className:"tap-scale",style:{background:"none",border:"none",fontSize:"0.8rem",fontWeight:"600",color:w.stockLevel==="full"?"#10b981":"var(--text-muted)",cursor:"pointer",opacity:w.stockLevel==="full"?1:.5,transition:"all 0.2s"},children:"Full"}),U.jsx("button",{onClick:()=>t(w.id),style:{marginLeft:"12px",opacity:.3,background:"none",border:"none",cursor:"pointer"},children:U.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"currentColor",boxShadow:"0 6px 0 currentColor, 0 -6px 0 currentColor"}})})]})]},w.id))})]},v))}),U.jsx(Am,{isVisible:s.show,message:s.msg,type:"success",onClose:()=>l({show:!1,msg:""})})]})};function Q5(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function $5(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var Z5=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),J5=(function(n){Z5(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),Q5(a,i.prototype),$5(a),a}return e})(Error),eN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ur=(function(n){eN(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(J5),tN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ei=(function(n){tN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(ur),nN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ce=(function(n){nN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(ur),rN=(function(){function n(e){if(this.binarizer=e,e===null)throw new Ce("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),iN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),An=(function(n){iN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(ur),aN=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),St=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),oN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),wm=(function(n){oN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(ur),sN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),hA=(function(n){sN(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(wm),uN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ce("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new hA(t);if(r>e)throw new hA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=uN(e),s=a.next();!s.done;s=a.next()){var l=s.value;i=31*i+l}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return St.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,l=r(t,e[s]);if(l>0)i=s+1;else if(l<0)a=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Ue=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),wn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);St.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=r[i]}var l=i*32+Ue.numberOfTrailingZeros(a);return l>t?t:l},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var s=r.length;a===0;){if(++i===s)return t;a=~r[i]}var l=i*32+Ue.numberOfTrailingZeros(a);return l>t?t:l},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ce;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=r;s<=i;s++){var l=s>r?0:e&31,f=s<i?31:t&31,h=(2<<f)-(1<<l);a[s]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ce;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,l=i;l<=a;l++){var f=l>i?0:e&31,h=l<a?31:t&31,p=(2<<h)-(1<<f)&4294967295;if((s[l]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ce("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var s=0,l=0;l<8;l++)this.get(e)&&(s|=1<<7-l),e++;t[r+a]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==r*32){for(var l=r*32-this.size,f=e[0]>>>l,a=1;a<r;a++){var h=e[a];f|=h<<32-l,e[a-1]=f,f=h>>>l}e[r-1]=f}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&hn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+hn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),iv;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(iv||(iv={}));const kt=iv;var lN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fe=(function(n){lN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(ur),cN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(dt||(dt={}));var fn=(function(){function n(e,t,r){for(var i,a,s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var f=this.values,h=0,p=f.length;h!==p;h++){var v=f[h];n.VALUES_TO_ECI.set(v,this)}try{for(var _=cN(s),E=_.next();!E.done;E=_.next()){var w=E.value;n.NAME_TO_ECI.set(w,this)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new fe("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new fe("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new fe("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(dt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(dt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(dt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(dt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(dt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(dt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(dt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(dt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(dt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(dt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(dt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(dt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(dt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(dt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(dt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(dt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(dt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(dt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(dt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(dt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(dt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(dt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(dt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(dt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(dt.Big5,28,"Big5"),n.GB18030=new n(dt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(dt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),fN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jd=(function(n){fN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(ur),Ur=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof fn?e:fn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,s=e.length;a<s;a++){var l=e[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(fn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new jd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(fn.UTF8)||e.equals(fn.ISO8859_1)||e.equals(fn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),$e=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Ur.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kt.CHARACTER_SET)!==void 0)return t.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,s=!0,l=0,f=0,h=0,p=0,v=0,_=0,E=0,w=0,S=0,R=0,L=0,M=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,B=0;B<r&&(i||a||s);B++){var G=e[B]&255;s&&(l>0?(G&128)===0?s=!1:l--:(G&128)!==0&&((G&64)===0?s=!1:(l++,(G&32)===0?f++:(l++,(G&16)===0?h++:(l++,(G&8)===0?p++:s=!1))))),i&&(G>127&&G<160?i=!1:G>159&&(G<192||G===215||G===247)&&L++),a&&(v>0?G<64||G===127||G>252?a=!1:v--:G===128||G===160||G>239?a=!1:G>160&&G<224?(_++,w=0,E++,E>S&&(S=E)):G>127?(v++,E=0,w++,w>R&&(R=w)):(E=0,w=0))}return s&&l>0&&(s=!1),a&&v>0&&(a=!1),s&&(M||f+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||R>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||L*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(l,f,h,p,v,_){if(l==="%%")return"%";if(t[++i]!==void 0){l=p?parseInt(p.substr(1)):void 0;var E=v?parseInt(v.substr(1)):void 0,w;switch(_){case"s":w=t[i];break;case"c":w=t[i][0];break;case"f":w=parseFloat(t[i]).toFixed(l);break;case"p":w=parseFloat(t[i]).toPrecision(l);break;case"e":w=parseFloat(t[i]).toExponential(l);break;case"x":w=parseInt(t[i]).toString(E||16);break;case"d":w=parseFloat(parseInt(t[i],E||10).toPrecision(l)).toFixed(0);break}w=typeof w=="object"?JSON.stringify(w):(+w).toString(E);for(var S=parseInt(h),R=h&&h[0]+""=="0"?"0":" ";w.length<S;)w=f!==void 0?w+R:R+w;return w}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},n.getBytes=function(e,t){return Ur.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=fn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=fn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=fn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),Ve=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=$e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),Ui=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ce("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var s=e[a],l=0;l<r;l++)s[l]&&i.set(l,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ce("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,l=-1,f=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new Ce("row lengths do not match");s=a,f++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new Ce("illegal character encountered: "+e.substring(h));if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new Ce("row lengths do not match");f++}for(var p=new n(l,f),v=0;v<a;v++)i[v]&&p.set(Math.floor(v%l),Math.floor(v/l));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ce("input matrix dimensions do not match");for(var t=new wn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var l=a*r,f=e.getRow(a,t).getBitArray(),h=0;h<r;h++)i[l+h]^=f[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ce("Left and top must be nonnegative");if(i<1||r<1)throw new Ce("Height and width must be at least 1");var a=e+r,s=t+i;if(s>this.height||a>this.width)throw new Ce("The region must fit inside the matrix");for(var l=this.rowSize,f=this.bits,h=t;h<s;h++)for(var p=h*l,v=e;v<a;v++)f[p+Math.floor(v/32)]|=1<<(v&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new wn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,s=0;s<r;s++)t.setBulk(s*32,i[a+s]);return t},n.prototype.setRow=function(e,t){St.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new wn(e),i=new wn(e),a=0,s=Math.floor((t+1)/2);a<s;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,s=t,l=-1,f=-1,h=0;h<t;h++)for(var p=0;p<r;p++){var v=i[h*r+p];if(v!==0){if(h<s&&(s=h),h>f&&(f=h),p*32<a){for(var _=0;(v<<31-_&4294967295)===0;)_++;p*32+_<a&&(a=p*32+_)}if(p*32+31>l){for(var _=31;!(v>>>_);)_--;p*32+_>l&&(l=p*32+_)}}}return l<a||f<s?null:Int32Array.from([a,s,l-a+1,f-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,s=t[r],l=0;(s<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,s=t[r],l=31;!(s>>>l);)l--;return a+=l,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&hn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+hn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Ve,a=0,s=this.height;a<s;a++){for(var l=0,f=this.width;l<f;l++)i.append(this.get(l,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),hN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),re=(function(n){hN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(ur),dN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pN=(function(n){dN(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new wn(a):r.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),l=this.buckets,f=0;f<a;f++)l[(s[f]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(l);if(a<3)for(var f=0;f<a;f++)(s[f]&255)<h&&r.set(f);else for(var p=s[0]&255,v=s[1]&255,f=1;f<a-1;f++){var _=s[f+1]&255;(v*4-p-_)/2<h&&r.set(f),p=v,v=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new Ui(r,i);this.initArrays(r);for(var s=this.buckets,l=1;l<5;l++)for(var f=Math.floor(i*l/5),h=t.getRow(f,this.luminances),p=Math.floor(r*4/5),v=Math.floor(r/5);v<p;v++){var _=h[v]&255;s[_>>e.LUMINANCE_SHIFT]++}for(var E=e.estimateBlackPoint(s),w=t.getMatrix(),l=0;l<i;l++)for(var S=l*r,v=0;v<r;v++){var _=w[S+v]&255;_<E&&a.set(v,l)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,s=0,l=0;l<r;l++)t[l]>s&&(a=l,s=t[l]),t[l]>i&&(i=t[l]);for(var f=0,h=0,l=0;l<r;l++){var p=l-a,v=t[l]*p*p;v>h&&(f=l,h=v)}if(a>f){var _=a;a=f,f=_}if(f-a<=r/16)throw new re;for(var E=f-1,w=-1,l=f-1;l>a;l--){var S=l-a,v=S*S*(f-l)*(i-t[l]);v>w&&(E=l,w=v)}return E<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(aN),gN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vN=(function(n){gN(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var l=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&l++;var f=e.calculateBlackPoints(a,s,l,r,i),h=new Ui(r,i);e.calculateThresholdForBlock(a,s,l,r,i,f,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,s,l,f){for(var h=s-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,v=0;v<i;v++){var _=v<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var E=e.cap(v,2,i-3),w=0;w<r;w++){var S=w<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var R=e.cap(w,2,r-3),L=0,M=-2;M<=2;M++){var B=l[E+M];L+=B[R-2]+B[R-1]+B[R]+B[R+1]+B[R+2]}var G=L/25;e.thresholdBlock(t,S,_,G,a,f)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,s,l){for(var f=0,h=i*s+r;f<e.BLOCK_SIZE;f++,h+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&l.set(r+p,i+f)},e.calculateBlackPoints=function(t,r,i,a,s){for(var l=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var v=p<<e.BLOCK_SIZE_POWER;v>l&&(v=l);for(var _=0;_<r;_++){var E=_<<e.BLOCK_SIZE_POWER;E>f&&(E=f);for(var w=0,S=255,R=0,L=0,M=v*a+E;L<e.BLOCK_SIZE;L++,M+=a){for(var B=0;B<e.BLOCK_SIZE;B++){var G=t[M+B]&255;w+=G,G<S&&(S=G),G>R&&(R=G)}if(R-S>e.MIN_DYNAMIC_RANGE)for(L++,M+=a;L<e.BLOCK_SIZE;L++,M+=a)for(var B=0;B<e.BLOCK_SIZE;B++)w+=t[M+B]&255}var $=w>>e.BLOCK_SIZE_POWER*2;if(R-S<=e.MIN_DYNAMIC_RANGE&&($=S/2,p>0&&_>0)){var J=(h[p-1][_]+2*h[p][_-1]+h[p-1][_-1])/4;S<J&&($=J)}h[p][_]=$}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(pN),X0=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new jd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new jd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new jd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ve,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var s=i[a]&255,l=void 0;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()},n})(),mN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tm=(function(n){mN(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(X0),yN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_N=(function(n){yN(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){var a=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,l=0,f=t.length;s<f;s+=4,l++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var v=t[s],_=t[s+1],E=t[s+2];h=306*v+601*_+117*E+512>>10}a[l]=h}else for(var s=0,l=0,w=t.length;s<w;s+=4,l++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var v=t[s],_=t[s+1],E=t[s+2];h=306*v+601*_+117*E+512>>10}a[l]=255-h}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,l=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*l),h=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*l);return r.width=f,r.height=h,i.translate(f/2,h/2),i.rotate(a),i.drawImage(this.canvas,s/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Tm(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(X0),EN=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Xn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(p){try{h(r.next(p))}catch(v){s(v)}}function f(p){try{h(r.throw(p))}catch(v){s(v)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})},Kn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},xN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ml=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Xn(this,void 0,void 0,function(){var e,t,r,i,a,s,l,f,h,p,v,_;return Kn(this,function(E){switch(E.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=E.sent(),t=[];try{for(r=xN(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(l=a.deviceId||a.id,f=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:l,label:f,kind:s,groupId:h},t.push(p))}catch(w){v={error:w}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(v)throw v.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Xn(this,void 0,void 0,function(){var e;return Kn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new EN(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Xn(this,void 0,void 0,function(){var t;return Kn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Xn(this,void 0,void 0,function(){return Kn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Xn(this,void 0,void 0,function(){var r,i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Xn(this,void 0,void 0,function(){var r;return Kn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Xn(this,void 0,void 0,function(){var r,i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Xn(this,void 0,void 0,function(){return Kn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Xn(this,void 0,void 0,function(){var i,a;return Kn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Xn(this,void 0,void 0,function(){var i;return Kn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Xn(this,void 0,void 0,function(){var i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Xn(this,void 0,void 0,function(){var r;return Kn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Xn(this,void 0,void 0,function(){return Kn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ei("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ei("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ei("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ei("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new ei("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new ei("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ei("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new ei("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ei("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ei("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Xn(this,void 0,void 0,function(){return Kn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Xn(this,void 0,void 0,function(){return Kn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(s,l){if(i._stopAsyncDecode){l(new re("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(e);s(f)}catch(_){var h=t&&_ instanceof re,p=_ instanceof An||_ instanceof fe,v=p&&r;if(h||v)return setTimeout(a,i._timeBetweenDecodingAttempts,s,l);l(_)}};return new Promise(function(s,l){return a(s,l)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(f){t(null,f);var s=f instanceof An||f instanceof fe,l=f instanceof re;(s||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),r=new _N(t),i=new vN(r);return new rN(i)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),jn=(function(){function n(e,t,r,i,a,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=St.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=St.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);St.arraycopy(t,0,r,0,t.length),St.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),av;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(av||(av={}));const Ie=av;var ov;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ov||(ov={}));const Ln=ov;var K0=(function(){function n(e,t,r,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),Fc=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),xo=(function(){function n(e,t){if(t.length===0)throw new Ce;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];r=Fc.addOrSubtract(r,s)}return r}r=t[0];for(var l=t.length,f=this.field,i=1;i<l;i++)r=Fc.addOrSubtract(f.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;St.arraycopy(r,0,a,0,s);for(var l=s;l<r.length;l++)a[l]=Fc.addOrSubtract(t[l-s],r[l]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),l=this.field,f=0;f<r;f++)for(var h=t[f],p=0;p<a;p++)s[f+p]=Fc.addOrSubtract(s[f+p],l.multiply(h,i[p]));return new n(l,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(a[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),s=this.field,l=0;l<i;l++)a[l]=s.multiply(r[l],t);return new n(s,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ce("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var l=i.getDegree()-e.getDegree(),f=t.multiply(i.getCoefficient(i.getDegree()),s),h=e.multiplyByMonomial(l,f),p=t.buildMonomial(l,f);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),AN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AS=(function(n){AN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(ur),wN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),or=(function(n){wN(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var s=new Int32Array(r),l=1,f=0;f<r;f++)s[f]=l,l*=2,l>=r&&(l^=t,l&=r-1);a.expTable=s;for(var h=new Int32Array(r),f=0;f<r-1;f++)h[s[f]]=f;return a.logTable=h,a.zero=new xo(a,Int32Array.from([0])),a.one=new xo(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ce;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new xo(this,i)},e.prototype.inverse=function(t){if(t===0)throw new AS;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ue.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Fc),TN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ed=(function(n){TN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(ur),SN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lf=(function(n){SN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(ur),Y0=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new xo(r,e),a=new Int32Array(t),s=!0,l=0;l<t;l++){var f=i.evaluateAt(r.exp(l+r.getGeneratorBase()));a[a.length-1-l]=f,f!==0&&(s=!1)}if(!s)for(var h=new xo(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),v=p[0],_=p[1],E=this.findErrorLocations(v),w=this.findErrorMagnitudes(_,E),l=0;l<E.length;l++){var S=e.length-1-r.log(E[l]);if(S<0)throw new Ed("Bad error location");e[S]=or.addOrSubtract(e[S],w[l])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,l=t,f=a.getZero(),h=a.getOne();l.getDegree()>=(r/2|0);){var p=s,v=f;if(s=l,f=h,s.isZero())throw new Ed("r_{i-1} was zero");l=p;for(var _=a.getZero(),E=s.getCoefficient(s.getDegree()),w=a.inverse(E);l.getDegree()>=s.getDegree()&&!l.isZero();){var S=l.getDegree()-s.getDegree(),R=a.multiply(l.getCoefficient(l.getDegree()),w);_=_.addOrSubtract(a.buildMonomial(S,R)),l=l.addOrSubtract(s.multiplyByMonomial(S,R))}if(h=_.multiply(f).addOrSubtract(v),l.getDegree()>=s.getDegree())throw new Lf("Division algorithm failed to reduce polynomial?")}var L=h.getCoefficient(0);if(L===0)throw new Ed("sigmaTilde(0) was zero");var M=a.inverse(L),B=h.multiplyScalar(M),G=l.multiplyScalar(M);return[B,G]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=a.inverse(s),i++);if(i!==t)throw new Ed("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,s=0;s<r;s++){for(var l=a.inverse(t[s]),f=1,h=0;h<r;h++)if(s!==h){var p=a.multiply(t[h],l),v=(p&1)===0?p|1:p&-2;f=a.multiply(f,v)}i[s]=a.multiply(e.evaluateAt(l),a.inverse(f)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],l))}return i},n})(),On;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(On||(On={}));var dA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),l=new K0(a,s,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=On.UPPER,i=On.UPPER,a="",s=0;s<t;)if(i===On.BINARY){if(t-s<5)break;var l=n.readCode(e,s,5);if(s+=5,l===0){if(t-s<11)break;l=n.readCode(e,s,11)+31,s+=11}for(var f=0;f<l;f++){if(t-s<8){s=t;break}var h=n.readCode(e,s,8);a+=$e.castAsNonUtf8Char(h),s+=8}i=r}else{var p=i===On.DIGIT?4:5;if(t-s<p)break;var h=n.readCode(e,s,p);s+=p;var v=n.getCharacter(i,h);v.startsWith("CTRL_")?(r=i,i=n.getTable(v.charAt(5)),v.charAt(6)==="L"&&(r=i)):(a+=v,i=r)}return a},n.getTable=function(e){switch(e){case"L":return On.LOWER;case"P":return On.PUNCT;case"M":return On.MIXED;case"D":return On.DIGIT;case"B":return On.BINARY;default:return On.UPPER}},n.getCharacter=function(e,t){switch(e){case On.UPPER:return n.UPPER_TABLE[t];case On.LOWER:return n.LOWER_TABLE[t];case On.MIXED:return n.MIXED_TABLE[t];case On.PUNCT:return n.PUNCT_TABLE[t];case On.DIGIT:return n.DIGIT_TABLE[t];default:throw new Lf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=or.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=or.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=or.AZTEC_DATA_10):(r=12,t=or.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new fe;for(var s=e.length%r,l=new Int32Array(a),f=0;f<a;f++,s+=r)l[f]=n.readCode(e,s,r);try{var h=new Y0(t);h.decode(l,a-i)}catch(R){throw new fe(R)}for(var p=(1<<r)-1,v=0,f=0;f<i;f++){var _=l[f];if(_===0||_===p)throw new fe;(_===1||_===p-1)&&v++}for(var E=new Array(i*r-v),w=0,f=0;f<i;f++){var _=l[f];if(_===1||_===p-1)E.fill(_>1,w,w+r-1),w+=r-1;else for(var S=r-1;S>=0;--S)E[w++]=(_&1<<S)!==0}return E},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var l=0;l<a.length;l++)a[l]=l;else for(var f=i+1+2*Ue.truncDivision(Ue.truncDivision(i,2)-1,15),h=i/2,p=Ue.truncDivision(f,2),l=0;l<h;l++){var v=l+Ue.truncDivision(l,15);a[h-l-1]=p-v-1,a[h+l]=p+v+1}for(var l=0,_=0;l<r;l++){for(var E=(r-l)*4+(t?9:12),w=l*2,S=i-1-w,R=0;R<E;R++)for(var L=R*2,M=0;M<2;M++)s[_+L+M]=e.get(a[w+M],a[w+R]),s[_+2*E+L+M]=e.get(a[w+R],a[S-M]),s[_+4*E+L+M]=e.get(a[S-M],a[S-R]),s[_+6*E+L+M]=e.get(a[S-R],a[w+M]);_+=E*8}return s},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),nt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,s=t-i;return Math.sqrt(a*a+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),sv=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),Ee=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*sv.floatToIntBits(this.x)+sv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,l;if(r>=t&&r>=i?(s=e[0],a=e[1],l=e[2]):i>=r&&i>=t?(s=e[1],a=e[0],l=e[2]):(s=e[2],a=e[0],l=e[1]),this.crossProductZ(a,s,l)<0){var f=a;a=l,l=f}e[0]=a,e[1]=s,e[2]=l},n.distance=function(e,t){return nt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Sm=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),IN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),CN=(function(n){IN(e,n);function e(t,r,i,a,s){var l=n.call(this,t,r)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=s,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Sm),uv=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,s=!0,l=!1,f=!1,h=!1,p=!1,v=!1,_=this.width,E=this.height;s;){s=!1;for(var w=!0;(w||!f)&&t<_;)w=this.containsBlackPoint(r,i,t,!1),w?(t++,s=!0,f=!0):f||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!h)&&i<E;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,s=!0,h=!0):h||i++;if(i>=E){a=!0;break}for(var R=!0;(R||!p)&&e>=0;)R=this.containsBlackPoint(r,i,e,!1),R?(e--,s=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var L=!0;(L||!v)&&r>=0;)L=this.containsBlackPoint(e,t,r,!0),L?(r--,s=!0,v=!0):v||r--;if(r<0){a=!0;break}s&&(l=!0)}if(!a&&l){for(var M=t-e,B=null,G=1;B===null&&G<M;G++)B=this.getBlackPointOnSegment(e,i-G,e+G,i);if(B==null)throw new re;for(var $=null,G=1;$===null&&G<M;G++)$=this.getBlackPointOnSegment(e,r+G,e+G,r);if($==null)throw new re;for(var J=null,G=1;J===null&&G<M;G++)J=this.getBlackPointOnSegment(t,r+G,t-G,r);if(J==null)throw new re;for(var C=null,G=1;C===null&&G<M;G++)C=this.getBlackPointOnSegment(t,i-G,t-G,i);if(C==null)throw new re;return this.centerEdges(C,B,J,$)}else throw new re},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=nt.round(nt.distance(e,t,r,i)),s=(r-e)/a,l=(i-t)/a,f=this.image,h=0;h<a;h++){var p=nt.round(e+h*s),v=nt.round(t+h*l);if(f.get(p,v))return new Ee(p,v)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),s=e.getY(),l=t.getX(),f=t.getY(),h=r.getX(),p=r.getY(),v=i.getX(),_=i.getY(),E=n.CORR;return a<this.width/2?[new Ee(v-E,_+E),new Ee(l+E,f+E),new Ee(h-E,p-E),new Ee(a+E,s-E)]:[new Ee(v+E,_+E),new Ee(l+E,f-E),new Ee(h-E,p+E),new Ee(a-E,s-E)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,r))return!0}else for(var l=e;l<=t;l++)if(a.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),pA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var l=Math.floor(t[s]),f=Math.floor(t[s+1]);if(l<-1||l>r||f<-1||f>i)throw new re;a=!1,l===-1?(t[s]=0,a=!0):l===r&&(t[s]=r-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var l=Math.floor(t[s]),f=Math.floor(t[s+1]);if(l<-1||l>r||f<-1||f>i)throw new re;a=!1,l===-1?(t[s]=0,a=!0):l===r&&(t[s]=r-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}},n})(),wS=(function(){function n(e,t,r,i,a,s,l,f,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=s,this.a13=l,this.a23=f,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,s,l,f,h,p,v,_,E,w,S,R){var L=n.quadrilateralToSquare(e,t,r,i,a,s,l,f),M=n.squareToQuadrilateral(h,p,v,_,E,w,S,R);return M.times(L)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,f=this.a23,h=this.a31,p=this.a32,v=this.a33,_=0;_<t;_+=2){var E=e[_],w=e[_+1],S=a*E+f*w+v;e[_]=(r*E+s*w+h)/S,e[_+1]=(i*E+l*w+p)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,f=this.a23,h=this.a31,p=this.a32,v=this.a33,_=e.length,E=0;E<_;E++){var w=e[E],S=t[E],R=a*w+f*S+v;e[E]=(r*w+s*S+h)/R,t[E]=(i*w+l*S+p)/R}},n.squareToQuadrilateral=function(e,t,r,i,a,s,l,f){var h=e-r+a-l,p=t-i+s-f;if(h===0&&p===0)return new n(r-e,a-r,e,i-t,s-i,t,0,0,1);var v=r-a,_=l-a,E=i-s,w=f-s,S=v*w-_*E,R=(h*w-_*p)/S,L=(v*p-h*E)/S;return new n(r-e+R*r,l-e+L*l,e,i-t+R*i,f-t+L*f,t,R,L,1)},n.quadrilateralToSquare=function(e,t,r,i,a,s,l,f){return n.squareToQuadrilateral(e,t,r,i,a,s,l,f).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),bN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RN=(function(n){bN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,s,l,f,h,p,v,_,E,w,S,R,L,M,B,G){var $=wS.quadrilateralToQuadrilateral(a,s,l,f,h,p,v,_,E,w,S,R,L,M,B,G);return this.sampleGridWithTransform(t,r,i,$)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new re;for(var s=new Ui(r,i),l=new Float32Array(2*r),f=0;f<i;f++){for(var h=l.length,p=f+.5,v=0;v<h;v+=2)l[v]=v/2+.5,l[v+1]=p;a.transformPoints(l),pA.checkAndNudgePoints(t,l);try{for(var v=0;v<h;v+=2)t.get(Math.floor(l[v]),Math.floor(l[v+1]))&&s.set(v/2,f)}catch{throw new re}}return s},e})(pA),Im=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new RN,n})(),ar=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Ee(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),DN=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new CN(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new re;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var s=r[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,s,l){var f=(a>>t-2<<1)+(a&1);r=(r<<3)+f}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ue.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new re},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,s=new Int32Array(r),l=r-1;l>=0;--l)s[l]=e&15,e>>=4;try{var f=new Y0(or.AZTEC_PARAM);f.decode(s,a)}catch{throw new re}for(var h=0,l=0;l<i;l++)h=(h<<4)+s[l];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(t,s,1,-1),f=this.getFirstDifferent(r,s,1,1),h=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var v=this.distancePoint(p,l)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(v<.75||v>1.25||!this.isWhiteOrBlackRectangle(l,f,h,p))break}t=l,r=f,i=h,a=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;var _=new Ee(t.getX()+.5,t.getY()-.5),E=new Ee(r.getX()+.5,r.getY()+.5),w=new Ee(i.getX()-.5,i.getY()+.5),S=new Ee(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,E,w,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new uv(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new ar(s+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ar(s+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ar(s-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ar(s-7,l-7),!1,-1,-1).toResultPoint()}var f=nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new uv(this.image,15,f,h).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new ar(f+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ar(f+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ar(f-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ar(f-7,h-7),!1,-1,-1).toResultPoint()}return f=nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new ar(f,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var s=Im.getInstance(),l=this.getDimension(),f=l/2-this.nbCenterLayers,h=l/2+this.nbCenterLayers;return s.sampleGrid(e,l,l,f,f,h,f,h,h,f,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),s=a/r,l=e.getX(),f=e.getY(),h=s*(t.getX()-e.getX())/a,p=s*(t.getY()-e.getY())/a,v=0;v<r;v++)this.image.get(nt.round(l+v*h),nt.round(f+v*p))&&(i|=1<<r-v-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new ar(e.getX()-a,e.getY()+a),t=new ar(t.getX()-a,t.getY()-a),r=new ar(r.getX()+a,r.getY()-a),i=new ar(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var l=this.getColor(e,t);return l!==s||(l=this.getColor(t,r),l!==s)?!1:(l=this.getColor(r,i),l===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,s=0,l=e.getX(),f=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),v=0;v<p;v++)l+=i,f+=a,this.image.get(nt.round(l),nt.round(f))!==h&&s++;var _=s/r;return _>.1&&_<.9?0:_<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r,s+=i;for(a-=r,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=r;for(a-=r;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new ar(a,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,h=new Ee(l+i*a,f+i*s),p=new Ee(l-i*a,f-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;var v=new Ee(l+i*a,f+i*s),_=new Ee(l-i*a,f-i*s),E=[h,v,p,_];return E},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=nt.round(e.getX()),r=nt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ue.truncDivision(this.nbLayers-4,8)+1)+15},n})(),lv=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new DN(e.getBlackMatrix()),a=null,s=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(t,a),s=new dA().decode(l)}catch(v){r=v}if(s==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(t,a),s=new dA().decode(l)}catch(v){throw r??v}var f=new jn(s.getText(),s.getRawBytes(),s.getNumBits(),a,Ie.AZTEC,St.currentTimeMillis()),h=s.getByteSegments();h!=null&&f.putMetadata(Ln.BYTE_SEGMENTS,h);var p=s.getECLevel();return p!=null&&f.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),ON=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){ON(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new lv,t)||this}return e})(ml);var dn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(kt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),l=270;s!==null&&s.get(Ln.ORIENTATION)===!0&&(l=l+s.get(Ln.ORIENTATION)%360),a.putMetadata(Ln.ORIENTATION,l);var f=a.getResultPoints();if(f!==null)for(var h=i.getHeight(),p=0;p<f.length;p++)f[p]=new Ee(h-f[p].getY()-1,f[p].getX());return a}else throw new re}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new wn(r),s=t&&t.get(kt.TRY_HARDER)===!0,l=Math.max(1,i>>(s?8:5)),f;s?f=i:f=15;for(var h=Math.trunc(i/2),p=0;p<f;p++){var v=Math.trunc((p+1)/2),_=(p&1)===0,E=h+l*(_?v:-v);if(E<0||E>=i)break;try{a=e.getBlackRow(E,a)}catch{continue}for(var w=function(M){if(M===1&&(a.reverse(),t&&t.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var B=new Map;t.forEach(function(J,C){return B.set(C,J)}),B.delete(kt.NEED_RESULT_POINT_CALLBACK),t=B}try{var G=S.decodeRow(E,a,t);if(M===1){G.putMetadata(Ln.ORIENTATION,180);var $=G.getResultPoints();$!==null&&($[0]=new Ee(r-$[0].getX()-1,$[0].getY()),$[1]=new Ee(r-$[1].getX()-1,$[1].getY()))}return{value:G}}catch{}},S=this,R=0;R<2;R++){var L=w(R);if(typeof L=="object")return L.value}}throw new re},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var s=e.getSize();if(t>=s)throw new re;for(var l=!e.get(t),f=0,h=t;h<s;){if(e.get(h)!==l)r[f]++;else{if(++f===i)break;r[f]=1,l=!l}h++}if(!(f===i||f===i-1&&h===s))throw new re},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new re;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,l=0;l<i;l++)a+=e[l],s+=t[l];if(a<s)return Number.POSITIVE_INFINITY;var f=a/s;r*=f;for(var h=0,p=0;p<i;p++){var v=e[p],_=t[p]*f,E=v>_?v-_:_-v;if(E>r)return Number.POSITIVE_INFINITY;h+=E}return h/a},n})(),NN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gA=(function(n){NN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),l=i,f=!1,h=6,p=i;p<r;p++)if(t.get(p)!==f)s[a]++;else{if(a===h-1){for(var v=e.MAX_AVG_VARIANCE,_=-1,E=e.CODE_START_A;E<=e.CODE_START_C;E++){var w=dn.patternMatchVariance(s,e.CODE_PATTERNS[E],e.MAX_INDIVIDUAL_VARIANCE);w<v&&(v=w,_=E)}if(_>=0&&t.isRange(Math.max(0,l-(p-l)/2),l,!1))return Int32Array.from([l,p,_]);l+=s[0]+s[1],s=s.slice(2,s.length-1),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,f=!f}throw new re},e.decodeCode=function(t,r,i){dn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,s=-1,l=0;l<e.CODE_PATTERNS.length;l++){var f=e.CODE_PATTERNS[l],h=this.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,s=l)}if(s>=0)return s;throw new re},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(kt.ASSUME_GS1)===!0,s=e.findStartPattern(r),l=s[2],f=0,h=new Uint8Array(20);h[f++]=l;var p;switch(l){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new fe}for(var v=!1,_=!1,E="",w=s[0],S=s[1],R=Int32Array.from([0,0,0,0,0,0]),L=0,M=0,B=l,G=0,$=!0,J=!1,C=!1;!v;){var b=_;switch(_=!1,L=M,M=e.decodeCode(r,R,S),h[f++]=M,M!==e.CODE_STOP&&($=!0),M!==e.CODE_STOP&&(G++,B+=G*M),w=S,S+=R.reduce(function(he,we){return he+we},0),M){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new fe}switch(p){case e.CODE_CODE_A:if(M<64)C===J?E+=String.fromCharCode(32+M):E+=String.fromCharCode(32+M+128),C=!1;else if(M<96)C===J?E+=String.fromCharCode(M-64):E+=String.fromCharCode(M+64),C=!1;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!J&&C?(J=!0,C=!1):J&&C?(J=!1,C=!1):C=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_B:if(M<96)C===J?E+=String.fromCharCode(32+M):E+=String.fromCharCode(32+M+128),C=!1;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!J&&C?(J=!0,C=!1):J&&C?(J=!1,C=!1):C=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_C:if(M<100)M<10&&(E+="0"),E+=M;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:v=!0;break}break}b&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=S-w;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-w)/2),!1))throw new re;if(B-=G*L,B%103!==L)throw new An;var k=E.length;if(k===0)throw new re;k>0&&$&&(p===e.CODE_CODE_C?E=E.substring(0,k-2):E=E.substring(0,k-1));for(var V=(s[1]+s[0])/2,z=w+N/2,P=h.length,ze=new Uint8Array(P),yt=0;yt<P;yt++)ze[yt]=h[yt];var ne=[new Ee(V,t),new Ee(z,t)];return new jn(E,ze,0,ne,Ie.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(dn),MN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vA=(function(n){MN(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,s,l,f,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,h),v=r.getNextSet(p[1]),_=r.getSize(),E,w;do{e.recordPattern(r,v,h);var S=e.toNarrowWidePattern(h);if(S<0)throw new re;E=e.patternToChar(S),this.decodeRowResult+=E,w=v;try{for(var R=(a=void 0,dg(h)),L=R.next();!L.done;L=R.next()){var M=L.value;v+=M}}catch(P){a={error:P}}finally{try{L&&!L.done&&(s=R.return)&&s.call(R)}finally{if(a)throw a.error}}v=r.getNextSet(v)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var G=dg(h),$=G.next();!$.done;$=G.next()){var M=$.value;B+=M}}catch(P){l={error:P}}finally{try{$&&!$.done&&(f=G.return)&&f.call(G)}finally{if(l)throw l.error}}var J=v-w-B;if(v!==_&&J*2<B)throw new re;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,b=0,N=0;N<C;N++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(b%43))throw new An;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new re;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var V=(p[1]+p[0])/2,z=w+B/2;return new jn(k,null,0,[new Ee(V,t),new Ee(z,t)],Ie.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),s=0,l=a,f=!1,h=r.length,p=a;p<i;p++)if(t.get(p)!==f)r[s]++;else{if(s===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,l-Math.floor((p-l)/2)),l,!1))return[l,p];l+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,f=!f}throw new re},e.toNarrowWidePattern=function(t){var r,i,a=t.length,s=0,l;do{var f=2147483647;try{for(var h=(r=void 0,dg(t)),p=h.next();!p.done;p=h.next()){var v=p.value;v<f&&v>s&&(f=v)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s=f,l=0;for(var _=0,E=0,w=0;w<a;w++){var v=t[w];v>s&&(E|=1<<a-1-w,l++,_+=v)}if(l===3){for(var w=0;w<a&&l>0;w++){var v=t[w];if(v>s&&(l--,v*2>=_))return-1}return E}}while(l>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new re},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var l=t.charAt(a+1),f="\0";switch(s){case"+":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new fe;break;case"$":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new fe;break;case"%":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l==="X"||l==="Y"||l==="Z")f="";else throw new fe;break;case"/":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new fe;break}i+=f,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(dn),PN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mA=(function(n){PN(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,s,l,f,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),v=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var E,w;do{e.recordPattern(r,p,_);var S=this.toPattern(_);if(S<0)throw new re;E=this.patternToChar(S),this.decodeRowResult+=E,w=p;try{for(var R=(a=void 0,pg(_)),L=R.next();!L.done;L=R.next()){var M=L.value;p+=M}}catch(N){a={error:N}}finally{try{L&&!L.done&&(s=R.return)&&s.call(R)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var G=pg(_),$=G.next();!$.done;$=G.next()){var M=$.value;B+=M}}catch(N){l={error:N}}finally{try{$&&!$.done&&(f=G.return)&&f.call(G)}finally{if(l)throw l.error}}if(p===v||!r.get(p))throw new re;if(this.decodeRowResult.length<2)throw new re;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var J=this.decodeExtended(this.decodeRowResult),C=(h[1]+h[0])/2,b=w+B/2;return new jn(J,null,0,[new Ee(C,t),new Ee(b,t)],Ie.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,l=!1,f=a.length,h=0,p=i;p<r;p++)if(t.get(p)!==l)a[h]++;else{if(h===f-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new re},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var s=pg(t),l=s.next();!l.done;l=s.next()){var f=l.value;a+=f}}catch(w){r={error:w}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var h=0,p=t.length,v=0;v<p;v++){var _=Math.round(t[v]*9/a);if(_<1||_>4)return-1;if((v&1)===0)for(var E=0;E<_;E++)h=h<<1|1;else h<<=_}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new re},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=r-1)throw new fe;var l=t.charAt(a+1),f="\0";switch(s){case"d":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new fe;break;case"a":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new fe;break;case"b":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l>="X"&&l<="Z")f="";else throw new fe;break;case"c":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new fe;break}i+=f,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,s=0,l=r-1;l>=0;l--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(l)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new An},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(dn),LN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yA=(function(n){LN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,s,l=this.decodeStart(r),f=this.decodeEnd(r),h=new Ve;e.decodeMiddle(r,l[1],f[0],h);var p=h.toString(),v=null;i!=null&&(v=i.get(kt.ALLOWED_LENGTHS)),v==null&&(v=e.DEFAULT_ALLOWED_LENGTHS);var _=p.length,E=!1,w=0;try{for(var S=kN(v),R=S.next();!R.done;R=S.next()){var L=R.value;if(_===L){E=!0;break}L>w&&(w=L)}}catch(G){a={error:G}}finally{try{R&&!R.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}if(!E&&_>w&&(E=!0),!E)throw new fe;var M=[new Ee(l[1],t),new Ee(f[0],t)],B=new jn(p,null,0,M,Ie.ITF,new Date().getTime());return B},e.decodeMiddle=function(t,r,i,a){var s=new Int32Array(10),l=new Int32Array(5),f=new Int32Array(5);for(s.fill(0),l.fill(0),f.fill(0);r<i;){dn.recordPattern(t,r,s);for(var h=0;h<5;h++){var p=2*h;l[h]=s[p],f[h]=s[p+1]}var v=e.decodeDigit(l);a.append(v.toString()),v=this.decodeDigit(f),a.append(v.toString()),s.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new re},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new re;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof re&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,s=new Int32Array(a),l=t.getSize(),f=!1,h=0,p=r;s.fill(0);for(var v=r;v<l;v++)if(t.get(v)!==f)s[h]++;else{if(h===a-1){if(dn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,v];p+=s[0]+s[1],St.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,f=!f}throw new re},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var l=e.PATTERNS[s],f=dn.patternMatchVariance(t,l,e.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,i=s):f===r&&(i=-1)}if(i>=0)return i%10;throw new re},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(dn),BN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ll=(function(n){BN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var l=i[0];a=i[1];var f=l-(a-l);f>=0&&(r=t.isRange(f,l,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,s){var l=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var f=0,h=r,p=a.length,v=i,_=r;_<l;_++)if(t.get(_)!==v)s[f]++;else{if(f===p-1){if(dn.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=s[0]+s[1];for(var E=s.slice(2,s.length),w=0;w<f-1;w++)s[w]=E[w];s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,v=!v}throw new re},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,l=-1,f=a.length,h=0;h<f;h++){var p=a[h],v=dn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);v<s&&(s=v,l=h)}if(l>=0)return l;throw new re},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(dn),VN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FN=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),l=n.parseExtensionString(s),f=[new Ee((r[0]+r[1])/2,e),new Ee(a,e)],h=new jn(s,null,0,f,Ie.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),f=t[1],h=0,p=0;p<5&&f<l;p++){var v=ll.decodeDigit(e,s,f,ll.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);try{for(var _=(i=void 0,VN(s)),E=_.next();!E.done;E=_.next()){var w=E.value;f+=w}}catch(R){i={error:R}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}v>=10&&(h|=1<<4-p),p!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==5)throw new re;var S=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==S)throw new re;return f},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new re},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Ln.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},n})(),UN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zN=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),s=i.toString(),l=n.parseExtensionString(s),f=[new Ee((r[0]+r[1])/2,e),new Ee(a,e)],h=new jn(s,null,0,f,Ie.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),f=t[1],h=0,p=0;p<2&&f<l;p++){var v=ll.decodeDigit(e,s,f,ll.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);try{for(var _=(i=void 0,UN(s)),E=_.next();!E.done;E=_.next()){var w=E.value;f+=w}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}v>=10&&(h|=1<<1-p),p!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==2)throw new re;if(parseInt(r.toString())%4!==h)throw new re;return f},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ln.ISSUE_NUMBER,parseInt(e)]])},n})(),jN=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=ll.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new FN;return a.decodeRow(e,t,i)}catch{var s=new zN;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),HN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cn=(function(n){HN(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),s=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var l=new Ee((a[0]+a[1])/2,t);s.foundPossibleResultPoint(l)}var f=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=f.rowOffset,p=f.resultString;if(s!=null){var v=new Ee(h,t);s.foundPossibleResultPoint(v)}var _=e.decodeEnd(r,h);if(s!=null){var E=new Ee((_[0]+_[1])/2,t);s.foundPossibleResultPoint(E)}var w=_[1],S=w+(w-_[0]);if(S>=r.getSize()||!r.isRange(w,S,!1))throw new re;var R=p.toString();if(R.length<8)throw new fe;if(!e.checkChecksum(R))throw new An;var L=(a[1]+a[0])/2,M=(_[1]+_[0])/2,B=this.getBarcodeFormat(),G=[new Ee(L,t),new Ee(M,t)],$=new jn(R,null,0,G,B,new Date().getTime()),J=0;try{var C=jN.decodeRow(t,r,_[1]);$.putMetadata(Ln.UPC_EAN_EXTENSION,C.getText()),$.putAllMetadata(C.getResultMetadata()),$.addResultPoints(C.getResultPoints()),J=C.getText().length}catch{}var b=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if(b!=null){var N=!1;for(var k in b)if(J.toString()===k){N=!0;break}if(!N)throw new re}return B===Ie.EAN_13||Ie.UPC_A,$},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}i*=3;for(var a=r-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(ll),GN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_A=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cv=(function(n){GN(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,l,f,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),v=r[1],_=0,E=0;E<6&&v<p;E++){var w=cn.decodeDigit(t,h,v,cn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+w%10);try{for(var S=(a=void 0,_A(h)),R=S.next();!R.done;R=S.next()){var L=R.value;v+=L}}catch($){a={error:$}}finally{try{R&&!R.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}w>=10&&(_|=1<<5-E)}i=e.determineFirstDigit(i,_);var M=cn.findGuardPattern(t,v,!0,cn.MIDDLE_PATTERN,new Int32Array(cn.MIDDLE_PATTERN.length).fill(0));v=M[1];for(var E=0;E<6&&v<p;E++){var w=cn.decodeDigit(t,h,v,cn.L_PATTERNS);i+=String.fromCharCode(48+w);try{for(var B=(l=void 0,_A(h)),G=B.next();!G.done;G=B.next()){var L=G.value;v+=L}}catch(C){l={error:C}}finally{try{G&&!G.done&&(f=B.return)&&f.call(B)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ie.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new re},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(cn),qN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xA=(function(n){qN(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,l,f,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),v=r[1],_=0;_<4&&v<p;_++){var E=cn.decodeDigit(t,h,v,cn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var w=(a=void 0,EA(h)),S=w.next();!S.done;S=w.next()){var R=S.value;v+=R}}catch(G){a={error:G}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}}var L=cn.findGuardPattern(t,v,!0,cn.MIDDLE_PATTERN,new Int32Array(cn.MIDDLE_PATTERN.length).fill(0));v=L[1];for(var _=0;_<4&&v<p;_++){var E=cn.decodeDigit(t,h,v,cn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var M=(l=void 0,EA(h)),B=M.next();!B.done;B=M.next()){var R=B.value;v+=R}}catch(J){l={error:J}}finally{try{B&&!B.done&&(f=M.return)&&f.call(M)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ie.EAN_8},e})(cn),XN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AA=(function(n){XN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new cv,t}return e.prototype.getBarcodeFormat=function(){return Ie.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new jn(r.substring(1),null,null,t.getResultPoints(),Ie.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new re},e.prototype.reset=function(){this.ean13Reader.reset()},e})(cn),KN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),YN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wA=(function(n){KN(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,s,l=this.decodeMiddleCounters.map(function(R){return R});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var f=t.getSize(),h=r[1],p=0,v=0;v<6&&h<f;v++){var _=e.decodeDigit(t,l,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var E=(a=void 0,YN(l)),w=E.next();!w.done;w=E.next()){var S=w.value;h+=S}}catch(R){a={error:R}}finally{try{w&&!w.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}_>=10&&(p|=1<<5-v)}return e.determineNumSysAndCheckDigit(new Ve(i),p),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return cn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw re.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ie.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ve;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(cn),WN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gg=(function(n){WN(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Ie.EAN_13)>-1&&a.push(new cv),i.indexOf(Ie.UPC_A)>-1&&a.push(new AA),i.indexOf(Ie.EAN_8)>-1&&a.push(new xA),i.indexOf(Ie.UPC_E)>-1&&a.push(new wA)),a.length===0&&(a.push(new cv),a.push(new AA),a.push(new xA),a.push(new wA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,s;try{for(var l=TA(this.readers),f=l.next();!f.done;f=l.next()){var h=f.value;try{var p=h.decodeRow(t,r,i),v=p.getBarcodeFormat()===Ie.EAN_13&&p.getText().charAt(0)==="0",_=i==null?null:i.get(kt.POSSIBLE_FORMATS),E=_==null||_.includes(Ie.UPC_A);if(v&&E){var w=p.getRawBytes(),S=new jn(p.getText().substring(1),w,w?w.length:null,p.getResultPoints(),Ie.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(R){a={error:R}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}throw new re},e.prototype.reset=function(){var t,r;try{for(var i=TA(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(dn),QN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),$N=(function(n){QN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new re;var s=this.codaBarDecodeRow(a.row);if(!s)throw new re;return new jn(s,null,0,[new Ee(a.left,t),new Ee(a.right,t)],Ie.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var s=[],l=r[0],f=1,h=1;h<r.length;h++)r[h]===l?f++:(l=r[h],s.push(f),f=1);return s.push(f),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(f,h){return(f+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(f){return f<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var l=r.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(dn),ZN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),JN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hs=(function(n){ZN(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(dn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new re},e.count=function(t){return nt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]>a&&(a=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],s=1;s<t.length;s++)r[s]<a&&(a=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],s=a+t[2]+t[3],l=a/s;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=JN(t),v=p.next();!v.done;v=p.next()){var _=v.value;_>h&&(h=_),_<f&&(f=_)}}catch(E){r={error:E}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*f}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(dn),m0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),TS=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ee(r,a)),this.resultPoints.push(new Ee(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),e9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ju=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,s=0;try{for(var l=e9(e),f=l.next();!f.done;f=l.next()){var h=f.value;s+=h}}catch(M){i={error:M}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var p=0,v=0,_=e.length,E=0;E<_-1;E++){var w=void 0;for(w=1,v|=1<<E;w<e[E];w++,v&=~(1<<E)){var S=n.combins(s-w-1,_-E-2);if(r&&v===0&&s-w-(_-E-1)>=_-E-1&&(S-=n.combins(s-w-(_-E),_-E-2)),_-E-1>1){for(var R=0,L=s-w-(_-E-2);L>t;L--)R+=n.combins(s-w-L-1,_-E-3);S-=R*(_-1-E)}else s-w>t&&S--;p+=S}s-=w}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,s=1,l=e;l>r;l--)a*=l,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},n})(),t9=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new wn(r),a=0,s=e[0],l=s.getRightChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(a),a++;for(var f=1;f<e.length;++f){for(var h=e[f],p=h.getLeftChar().getValue(),v=11;v>=0;--v)(p&1<<v)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var _=h.getRightChar().getValue(),v=11;v>=0;--v)(_&1<<v)!==0&&i.set(a),a++}return i},n})(),ss=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),Cm=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),n9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Jr=(function(n){n9(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Cm),r9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),us=(function(n){r9(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Cm),i9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lu=(function(n){i9(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new fe;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Cm),xd=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a9=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,s,l,f,h;if(!e)return null;if(e.length<2)throw new re;var p=e.substring(0,2);try{for(var v=xd(n.TWO_DIGIT_DATA_LENGTH),_=v.next();!_.done;_=v.next()){var E=_.value;if(E[0]===p)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,E[2],e):n.processFixedAI(2,E[1],e)}}catch(J){t={error:J}}finally{try{_&&!_.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}if(e.length<3)throw new re;var w=e.substring(0,3);try{for(var S=xd(n.THREE_DIGIT_DATA_LENGTH),R=S.next();!R.done;R=S.next()){var E=R.value;if(E[0]===w)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,E[2],e):n.processFixedAI(3,E[1],e)}}catch(J){i={error:J}}finally{try{R&&!R.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var L=xd(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),M=L.next();!M.done;M=L.next()){var E=M.value;if(E[0]===w)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,E[2],e):n.processFixedAI(4,E[1],e)}}catch(J){s={error:J}}finally{try{M&&!M.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}if(e.length<4)throw new re;var B=e.substring(0,4);try{for(var G=xd(n.FOUR_DIGIT_DATA_LENGTH),$=G.next();!$.done;$=G.next()){var E=$.value;if(E[0]===B)return E[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,E[2],e):n.processFixedAI(4,E[1],e)}}catch(J){f={error:J}}finally{try{$&&!$.done&&(h=G.return)&&h.call(G)}finally{if(f)throw f.error}}throw new re},n.processFixedAI=function(e,t,r){if(r.length<e)throw new re;var i=r.substring(0,e);if(r.length<e+t)throw new re;var a=r.substring(e,e+t),s=r.substring(e+t),l="("+i+")"+a,f=n.parseFieldsInGeneralPurpose(s);return f==null?l:l+f},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var s=r.substring(e,a),l=r.substring(a),f="("+i+")"+s,h=n.parseFieldsInGeneralPurpose(l);return h==null?f:f+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Hd=(function(){function n(e){this.buffer=new Ve,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),s=a9.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Lu(this.information.getSize(),Lu.FNC1,Lu.FNC1):new Lu(this.information.getSize(),t-1,Lu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new Lu(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new us(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new us(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new us(this.current.getPosition(),this.buffer.toString()):t=new us(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new ss(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new us(this.current.getPosition(),this.buffer.toString());return new ss(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ss(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new us(this.current.getPosition(),this.buffer.toString());return new ss(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ss(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new us(this.current.getPosition(),this.buffer.toString());return new ss(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ss(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Jr(e+5,Jr.FNC1);if(t>=5&&t<15)return new Jr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Jr(e+7,""+(r+1));if(r>=90&&r<116)return new Jr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new fe}return new Jr(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Jr(e+5,Jr.FNC1);if(t>=5&&t<15)return new Jr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Jr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Lf("Decoding invalid alphanumeric value: "+r)}return new Jr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),SS=(function(){function n(e){this.information=e,this.generalDecoder=new Hd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),o9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ni=(function(n){o9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(SS),s9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),u9=(function(n){s9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ve;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ni),l9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),c9=(function(n){l9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ve;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(SS),f9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gd=(function(n){f9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),l=1e5,f=0;f<5;++f)s/l===0&&t.append("0"),l/=10;t.append(s)},e})(ni),h9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),IS=(function(n){h9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Gd.GTIN_SIZE+e.WEIGHT_SIZE)throw new re;var t=new Ve;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Gd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Gd),d9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),p9=(function(n){d9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(IS),g9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),v9=(function(n){g9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(IS),m9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),y9=(function(n){m9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ni.GTIN_SIZE)throw new re;var t=new Ve;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ni.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ni.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ni),_9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E9=(function(n){_9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ni.GTIN_SIZE)throw new re;var t=new Ve;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ni.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ni.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ni.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ni),x9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),io=(function(n){x9(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new re;var t=new Ve;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var l=i;l/10===0&&t.append("0"),t.append(l),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Gd);function A9(n){try{if(n.get(1))return new u9(n);if(!n.get(2))return new c9(n);var e=Hd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new p9(n);case 5:return new v9(n)}var t=Hd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new y9(n);case 13:return new E9(n)}var r=Hd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new io(n,"310","11");case 57:return new io(n,"320","11");case 58:return new io(n,"310","13");case 59:return new io(n,"320","13");case 60:return new io(n,"310","15");case 61:return new io(n,"320","15");case 62:return new io(n,"310","17");case 63:return new io(n,"320","17")}}catch(i){throw console.log(i),new Lf("unknown decoder: "+n)}}var SA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),w9=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),T9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ao=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S9=(function(n){T9(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof re){if(!this.pairs.length)throw new re;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new re},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,s=r;s<this.rows.length;s++){var l=this.rows[s];this.pairs.length=0;try{for(var f=(i=void 0,ao(t)),h=f.next();!h.done;h=f.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(_){i={error:_}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var v=new Array(t);v.push(l);try{return this.checkRows(v,s+1)}catch(_){console.log(_)}}}throw new re},e.isValidSequence=function(t){var r,i;try{for(var a=ao(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var l=s.value;if(!(t.length>l.length)){for(var f=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==l[h]){f=!1;break}if(f)return!0}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,s=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>t){s=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new w9(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,s,l,f,h;try{for(var p=ao(r),v=p.next();!v.done;v=p.next()){var _=v.value;if(_.getPairs().length!==t.length){var E=!0;try{for(var w=(s=void 0,ao(_.getPairs())),S=w.next();!S.done;S=w.next()){var R=S.value,L=!1;try{for(var M=(f=void 0,ao(t)),B=M.next();!B.done;B=M.next()){var G=B.value;if(SA.equals(R,G)){L=!0;break}}}catch($){f={error:$}}finally{try{B&&!B.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}L||(E=!1)}}catch($){s={error:$}}finally{try{S&&!S.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}}}catch($){i={error:$}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,s,l,f,h;try{for(var p=ao(r),v=p.next();!v.done;v=p.next()){var _=v.value,E=!0;try{for(var w=(s=void 0,ao(t)),S=w.next();!S.done;S=w.next()){var R=S.value,L=!1;try{for(var M=(f=void 0,ao(_.getPairs())),B=M.next();!B.done;B=M.next()){var G=B.value;if(R.equals(G)){L=!0;break}}}catch($){f={error:$}}finally{try{B&&!B.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}if(!L){E=!1;break}}}catch($){s={error:$}}finally{try{S&&!S.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}if(E)return!0}}catch($){i={error:$}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=t9.buildBitArray(t),i=A9(r),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),l=t[t.length-1].getFinderPattern().getResultPoints(),f=[s[0],s[1],l[0],l[1]];return new jn(a,null,null,f,Ie.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,l=1;l<this.pairs.size();++l){var f=this.pairs.get(l);a+=f.getLeftChar().getChecksumPortion(),s++;var h=f.getRightChar();h!=null&&(a+=h.getChecksumPortion(),s++)}a%=211;var p=211*(s-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var s,l=!0,f=-1;do this.findNextPair(t,r,f),s=this.parseFoundFinderPattern(t,i,a),s===null?f=e.getNextSecondBar(t,this.startEnd[0]):l=!1;while(l);var h=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new re;var p;try{p=this.decodeDataCharacter(t,s,a,!1)}catch(v){p=null,console.log(v)}return new SA(h,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var f=r[r.length-1];l=f.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;l<s&&(p=!t.get(l),!!p);)l++;for(var v=0,_=l,E=l;E<s;E++)if(t.get(E)!==p)a[v]++;else{if(v===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=E;return}h&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,v--}else v++;a[v]=1,p=!p}throw new re},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,s,l;if(i){for(var f=this.startEnd[0]-1;f>=0&&!t.get(f);)f--;f++,a=this.startEnd[0]-f,s=f,l=this.startEnd[1]}else s=this.startEnd[0],l=t.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var h=this.getDecodeFinderCounters();St.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new TS(p,[s,l],s,l,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var f=0,h=s.length-1;f<h;f++,h--){var p=s[f];s[f]=s[h],s[h]=p}}var v=17,_=nt.sum(new Int32Array(s))/v,E=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-E)/E>.3)throw new re;for(var w=this.getOddCounts(),S=this.getEvenCounts(),R=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors(),f=0;f<s.length;f++){var M=1*s[f]/_,B=M+.5;if(B<1){if(M<.3)throw new re;B=1}else if(B>8){if(M>8.7)throw new re;B=8}var G=f/2;(f&1)===0?(w[G]=B,R[G]=M-B):(S[G]=B,L[G]=M-B)}this.adjustOddEvenCounts(v);for(var $=4*r.getValue()+(i?0:2)+(a?0:1)-1,J=0,C=0,f=w.length-1;f>=0;f--){if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[$][2*f];C+=w[f]*b}J+=w[f]}for(var N=0,f=S.length-1;f>=0;f--)if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[$][2*f+1];N+=S[f]*b}var k=C+N;if((J&1)!==0||J>13||J<4)throw new re;var V=(13-J)/2,z=e.SYMBOL_WIDEST[V],P=9-z,ze=ju.getRSSvalue(w,z,!0),yt=ju.getRSSvalue(S,P,!1),ne=e.EVEN_TOTAL_SUBSET[V],he=e.GSUM[V],we=ze*ne+yt+he;return new m0(we,k)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;r>13?s=!0:r<4&&(a=!0);var l=!1,f=!1;i>13?f=!0:i<4&&(l=!0);var h=r+i-t,p=(r&1)===1,v=(i&1)===0;if(h===1)if(p){if(v)throw new re;s=!0}else{if(!v)throw new re;f=!0}else if(h===-1)if(p){if(v)throw new re;a=!0}else{if(!v)throw new re;l=!0}else if(h===0){if(p){if(!v)throw new re;r<i?(a=!0,f=!0):(s=!0,l=!0)}else if(v)throw new re}else throw new re;if(a){if(s)throw new re;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(f)throw new re;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(hs),I9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),C9=(function(n){I9(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(m0),b9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IA=(function(n){b9(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,s,l,f,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var v=vg(this.possibleLeftPairs),_=v.next();!_.done;_=v.next()){var E=_.value;if(E.getCount()>1)try{for(var w=(l=void 0,vg(this.possibleRightPairs)),S=w.next();!S.done;S=w.next()){var R=S.value;if(R.getCount()>1&&e.checkChecksum(E,R))return e.constructResult(E,R)}}catch(L){l={error:L}}finally{try{S&&!S.done&&(f=w.return)&&f.call(w)}finally{if(l)throw l.error}}}}catch(L){a={error:L}}finally{try{_&&!_.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}throw new re},e.addOrTally=function(t,r){var i,a;if(r!=null){var s=!1;try{for(var l=vg(t),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getValue()===r.getValue()){h.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),s=new Ve,l=13-a.length;l>0;l--)s.append("0");s.append(a);for(var f=0,l=0;l<13;l++){var h=s.charAt(l).charCodeAt(0)-48;f+=(l&1)===0?3*h:h}f=10-f%10,f===10&&(f=0),s.append(f.toString());var p=t.getFinderPattern().getResultPoints(),v=r.getFinderPattern().getResultPoints();return new jn(s.toString(),null,0,[p[0],p[1],v[0],v[1]],Ie.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var s=this.findFinderPattern(t,r),l=this.parseFoundFinderPattern(t,i,r,s),f=a==null?null:a.get(kt.NEED_RESULT_POINT_CALLBACK);if(f!=null){var h=(s[0]+s[1])/2;r&&(h=t.getSize()-1-h),f.foundPossibleResultPoint(new Ee(h,i))}var p=this.decodeDataCharacter(t,l,!0),v=this.decodeDataCharacter(t,l,!1);return new C9(1597*p.getValue()+v.getValue(),p.getChecksumPortion()+4*v.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)dn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{dn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var l=0,f=a.length-1;l<f;l++,f--){var h=a[l];a[l]=a[f],a[f]=h}}for(var p=i?16:15,v=nt.sum(new Int32Array(a))/p,_=this.getOddCounts(),E=this.getEvenCounts(),w=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var R=a[l]/v,L=Math.floor(R+.5);L<1?L=1:L>8&&(L=8);var M=Math.floor(l/2);(l&1)===0?(_[M]=L,w[M]=R-L):(E[M]=L,S[M]=R-L)}this.adjustOddEvenCounts(i,p);for(var B=0,G=0,l=_.length-1;l>=0;l--)G*=9,G+=_[l],B+=_[l];for(var $=0,J=0,l=E.length-1;l>=0;l--)$*=9,$+=E[l],J+=E[l];var C=G+3*$;if(i){if((B&1)!==0||B>12||B<4)throw new re;var b=(12-B)/2,N=e.OUTSIDE_ODD_WIDEST[b],k=9-N,V=ju.getRSSvalue(_,N,!1),z=ju.getRSSvalue(E,k,!0),P=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],ze=e.OUTSIDE_GSUM[b];return new m0(V*P+z+ze,C)}else{if((J&1)!==0||J>10||J<4)throw new re;var b=(10-J)/2,N=e.INSIDE_ODD_WIDEST[b],k=9-N,V=ju.getRSSvalue(_,N,!0),z=ju.getRSSvalue(E,k,!1),yt=e.INSIDE_ODD_TOTAL_SUBSET[b],ze=e.INSIDE_GSUM[b];return new m0(z*yt+V+ze,C)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,l=0;l<a&&(s=!t.get(l),r!==s);)l++;for(var f=0,h=l,p=l;p<a;p++)if(t.get(p)!==s)i[f]++;else{if(f===3){if(hs.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,s=!s}throw new re},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var s=t.get(a[0]),l=a[0]-1;l>=0&&s!==t.get(l);)l--;l++;var f=a[0]-l,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);St.arraycopy(h,0,p,1,h.length-1),p[0]=f;var v=this.parseFinderValue(p,e.FINDER_PATTERNS),_=l,E=a[1];return i&&(_=t.getSize()-1-_,E=t.getSize()-1-E),new TS(v,[l,a[1]],_,E,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=nt.sum(new Int32Array(this.getOddCounts())),a=nt.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1,f=!1,h=!1;t?(i>12?l=!0:i<4&&(s=!0),a>12?h=!0:a<4&&(f=!0)):(i>11?l=!0:i<5&&(s=!0),a>10?h=!0:a<4&&(f=!0));var p=i+a-r,v=(i&1)===(t?1:0),_=(a&1)===1;if(p===1)if(v){if(_)throw new re;l=!0}else{if(!_)throw new re;h=!0}else if(p===-1)if(v){if(_)throw new re;s=!0}else{if(!_)throw new re;f=!0}else if(p===0){if(v){if(!_)throw new re;i<a?(s=!0,h=!0):(l=!0,f=!0)}else if(_)throw new re}else throw new re;if(s){if(l)throw new re;hs.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&hs.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new re;hs.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&hs.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(hs),R9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Uc=(function(n){R9(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kt.POSSIBLE_FORMATS):null,a=t&&t.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Ie.EAN_13)||i.includes(Ie.UPC_A)||i.includes(Ie.EAN_8)||i.includes(Ie.UPC_E))&&r.readers.push(new gg(t)),i.includes(Ie.CODE_39)&&r.readers.push(new vA(a)),i.includes(Ie.CODE_93)&&r.readers.push(new mA),i.includes(Ie.CODE_128)&&r.readers.push(new gA),i.includes(Ie.ITF)&&r.readers.push(new yA),i.includes(Ie.CODABAR)&&r.readers.push(new $N),i.includes(Ie.RSS_14)&&r.readers.push(new IA),i.includes(Ie.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new S9))),r.readers.length===0&&(r.readers.push(new gg(t)),r.readers.push(new vA),r.readers.push(new mA),r.readers.push(new gg(t)),r.readers.push(new gA),r.readers.push(new yA),r.readers.push(new IA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new re},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(dn),D9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){D9(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Uc(r),t,r)||this}return e})(ml);var CA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),at=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),O9=(function(){function n(e,t,r,i,a,s){var l,f;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var h=0,p=s.getECCodewords(),v=s.getECBlocks();try{for(var _=CA(v),E=_.next();!E.done;E=_.next()){var w=E.value;h+=w.getCount()*(w.getDataCodewords()+p)}}catch(S){l={error:S}}finally{try{E&&!E.done&&(f=_.return)&&f.call(_)}finally{if(l)throw l.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new fe;try{for(var a=CA(n.VERSIONS),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===t)return l}}catch(f){r={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new fe},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new ut(5,new at(1,3))),new n(2,12,12,10,10,new ut(7,new at(1,5))),new n(3,14,14,12,12,new ut(10,new at(1,8))),new n(4,16,16,14,14,new ut(12,new at(1,12))),new n(5,18,18,16,16,new ut(14,new at(1,18))),new n(6,20,20,18,18,new ut(18,new at(1,22))),new n(7,22,22,20,20,new ut(20,new at(1,30))),new n(8,24,24,22,22,new ut(24,new at(1,36))),new n(9,26,26,24,24,new ut(28,new at(1,44))),new n(10,32,32,14,14,new ut(36,new at(1,62))),new n(11,36,36,16,16,new ut(42,new at(1,86))),new n(12,40,40,18,18,new ut(48,new at(1,114))),new n(13,44,44,20,20,new ut(56,new at(1,144))),new n(14,48,48,22,22,new ut(68,new at(1,174))),new n(15,52,52,24,24,new ut(42,new at(2,102))),new n(16,64,64,14,14,new ut(56,new at(2,140))),new n(17,72,72,16,16,new ut(36,new at(4,92))),new n(18,80,80,18,18,new ut(48,new at(4,114))),new n(19,88,88,20,20,new ut(56,new at(4,144))),new n(20,96,96,22,22,new ut(68,new at(4,174))),new n(21,104,104,24,24,new ut(56,new at(6,136))),new n(22,120,120,18,18,new ut(68,new at(6,175))),new n(23,132,132,20,20,new ut(62,new at(8,163))),new n(24,144,144,22,22,new ut(62,new at(8,156),new at(2,155))),new n(25,8,18,6,16,new ut(7,new at(1,5))),new n(26,8,32,6,14,new ut(11,new at(1,10))),new n(27,12,26,10,24,new ut(14,new at(1,16))),new n(28,12,36,10,16,new ut(18,new at(1,22))),new n(29,16,36,14,16,new ut(24,new at(1,32))),new n(30,16,48,14,22,new ut(28,new at(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),N9=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new fe;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ui(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return O9.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,f=!1,h=!1,p=!1;do if(r===a&&i===0&&!l)e[t++]=this.readCorner1(a,s)&255,r-=2,i+=2,l=!0;else if(r===a-2&&i===0&&(s&3)!==0&&!f)e[t++]=this.readCorner2(a,s)&255,r-=2,i+=2,f=!0;else if(r===a+4&&i===2&&(s&7)===0&&!h)e[t++]=this.readCorner3(a,s)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(a,s)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,s)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<s);if(t!==this.version.getTotalCodewords())throw new fe;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,l=r/a|0,f=s*i,h=l*a,p=new Ui(h,f),v=0;v<s;++v)for(var _=v*i,E=0;E<l;++E)for(var w=E*a,S=0;S<i;++S)for(var R=v*(i+2)+1+S,L=_+S,M=0;M<a;++M){var B=E*(a+2)+1+M;if(e.get(B,R)){var G=w+M;p.set(G,L)}}return p},n})(),bA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M9=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,s,l=t.getECBlocks(),f=0,h=l.getECBlocks();try{for(var p=bA(h),v=p.next();!v.done;v=p.next()){var _=v.value;f+=_.getCount()}}catch(ze){r={error:ze}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var E=new Array(f),w=0;try{for(var S=bA(h),R=S.next();!R.done;R=S.next())for(var _=R.value,L=0;L<_.getCount();L++){var M=_.getDataCodewords(),B=l.getECCodewords()+M;E[w++]=new n(M,new Uint8Array(B))}}catch(ze){a={error:ze}}finally{try{R&&!R.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}for(var G=E[0].codewords.length,$=G-l.getECCodewords(),J=$-1,C=0,L=0;L<J;L++)for(var b=0;b<w;b++)E[b].codewords[L]=e[C++];for(var N=t.getVersionNumber()===24,k=N?8:w,b=0;b<k;b++)E[b].codewords[$-1]=e[C++];for(var V=E[0].codewords.length,L=$;L<V;L++)for(var b=0;b<w;b++){var z=N?(b+8)%w:b,P=N&&z>7?L-1:L;E[z].codewords[P]=e[C++]}if(C!==e.length)throw new Ce;return E},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),CS=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ce(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var s=8-r,l=e<s?e:s,f=s-l,h=255>>8-l<<f;t=(a[i]&h)>>f,e-=l,r+=l,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var f=8-e,h=255>>f<<f;t=t<<e|(a[i]&h)>>f,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),un;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(un||(un={}));var P9=(function(){function n(){}return n.decode=function(e){var t=new CS(e),r=new Ve,i=new Ve,a=new Array,s=un.ASCII_ENCODE;do if(s===un.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case un.C40_ENCODE:this.decodeC40Segment(t,r);break;case un.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case un.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case un.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case un.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new fe}s=un.ASCII_ENCODE}while(s!==un.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new K0(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new fe;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),un.ASCII_ENCODE;if(a===129)return un.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return un.C40_ENCODE;case 231:return un.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return un.ANSIX12_ENCODE;case 239:return un.TEXT_ENCODE;case 240:return un.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new fe;break}}while(e.available()>0);return un.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new fe;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new fe}a=0;break;case 3:r?(t.append(String.fromCharCode(f+224)),r=!1):t.append(String.fromCharCode(f+96)),a=0;break;default:throw new fe}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new fe;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new fe}a=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),a=0}else throw new fe;break;default:throw new fe}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var s=r[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new fe;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new fe;for(var l=new Uint8Array(s),f=0;f<s;f++){if(e.available()<8)throw new fe;l[f]=this.unrandomize255State(e.readBits(8),i++)}r.push(l);try{t.append(Ur.decode(l,$e.ISO88591))}catch(h){throw new Lf("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),L9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k9=(function(){function n(){this.rsDecoder=new Y0(or.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new N9(e),a=i.getVersion(),s=i.readCodewords(),l=M9.getDataBlocks(s,a),f=0;try{for(var h=L9(l),p=h.next();!p.done;p=h.next()){var v=p.value;f+=v.getNumDataCodewords()}}catch(B){t={error:B}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var _=new Uint8Array(f),E=l.length,w=0;w<E;w++){var S=l[w],R=S.getCodewords(),L=S.getNumDataCodewords();this.correctErrors(R,L);for(var M=0;M<L;M++)_[M*E+w]=R[M]}return P9.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),B9=(function(){function n(e){this.image=e,this.rectangleDetector=new uv(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new re;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],s=t[3],l=this.transitionsBetween(r,s)+1,f=this.transitionsBetween(a,s)+1;(l&1)===1&&(l+=1),(f&1)===1&&(f+=1),4*l<7*f&&4*f<7*l&&(l=f=Math.max(l,f));var h=n.sampleGrid(this.image,r,i,a,s,l,f);return new Sm(h,[r,i,a,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new Ee(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new Ee(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,r),l=this.transitionsBetween(r,i),f=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=s,v=[a,t,r,i];return p>l&&(p=l,v[0]=t,v[1]=r,v[2]=i,v[3]=a),p>f&&(p=f,v[0]=r,v[1]=i,v[2]=a,v[3]=t),p>h&&(v[0]=i,v[1]=a,v[2]=t,v[3]=r),v},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),l=n.shiftPoint(r,i,(s+1)*4),f=n.shiftPoint(i,r,(s+1)*4),h=this.transitionsBetween(l,t),p=this.transitionsBetween(f,a);return h<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),l=this.transitionsBetween(r,a),f=n.shiftPoint(t,r,(l+1)*4),h=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(f,a),l=this.transitionsBetween(h,a);var p=new Ee(a.getX()+(i.getX()-r.getX())/(s+1),a.getY()+(i.getY()-r.getY())/(s+1)),v=new Ee(a.getX()+(t.getX()-r.getX())/(l+1),a.getY()+(t.getY()-r.getY())/(l+1));if(!this.isValid(p))return this.isValid(v)?v:null;if(!this.isValid(v))return p;var _=this.transitionsBetween(f,p)+this.transitionsBetween(h,p),E=this.transitionsBetween(f,v)+this.transitionsBetween(h,v);return _>E?p:v},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,l=this.transitionsBetween(i,a)+1,f=n.shiftPoint(t,r,l*4),h=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(f,a)+1,l=this.transitionsBetween(h,a)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,v=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,v),r=n.moveAway(r,p,v),i=n.moveAway(i,p,v),a=n.moveAway(a,p,v);var _,E;return f=n.shiftPoint(t,r,l*4),f=n.shiftPoint(f,a,s*4),_=n.shiftPoint(r,t,l*4),_=n.shiftPoint(_,i,s*4),h=n.shiftPoint(i,a,l*4),h=n.shiftPoint(h,r,s*4),E=n.shiftPoint(a,i,l*4),E=n.shiftPoint(E,t,s*4),[f,_,h,E]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,s,l){var f=Im.getInstance();return f.sampleGrid(e,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.abs(s-i)>Math.abs(a-r);if(l){var f=r;r=i,i=f,f=a,a=s,s=f}for(var h=Math.abs(a-r),p=Math.abs(s-i),v=-h/2,_=i<s?1:-1,E=r<a?1:-1,w=0,S=this.image.get(l?i:r,l?r:i),R=r,L=i;R!==a;R+=E){var M=this.image.get(l?L:R,l?R:L);if(M!==S&&(w++,S=M),v+=p,v>0){if(L===s)break;L+=_,v-=h}}return w},n})(),fv=(function(){function n(){this.decoder=new k9}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(kt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var s=new B9(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var l=r.getRawBytes(),f=new jn(r.getText(),l,8*l.length,i,Ie.DATA_MATRIX,St.currentTimeMillis()),h=r.getByteSegments();h!=null&&f.putMetadata(Ln.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&f.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new re;var i=this.moduleSize(t,e),a=t[1],s=r[1],l=t[0],f=r[0],h=(f-l+1)/i,p=(s-a+1)/i;if(h<=0||p<=0)throw new re;var v=i/2;a+=v,l+=v;for(var _=new Ui(h,p),E=0;E<p;E++)for(var w=a+E*i,S=0;S<h;S++)e.get(l+S*i,w)&&_.set(S,E);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new re;var s=i-e[0];if(s===0)throw new re;return s},n.NO_POINTS=[],n})(),V9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){V9(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new fv,t)||this}return e})(ml);var Hu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Hu||(Hu={}));var F9=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new ei(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ce;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Hu.L,"L",1),n.M=new n(Hu.M,"M",0),n.Q=new n(Hu.Q,"Q",3),n.H=new n(Hu.H,"H",2),n})(),U9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bS=(function(){function n(e){this.errorCorrectionLevel=F9.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ue.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var l=U9(n.FORMAT_INFO_DECODE_LOOKUP),f=l.next();!f.done;f=l.next()){var h=f.value,p=h[0];if(p===e||p===t)return new n(h[1]);var v=n.numBitsDiffering(e,p);v<a&&(s=h[1],a=v),e!==t&&(v=n.numBitsDiffering(t,p),v<a&&(s=h[1],a=v))}}catch(_){r={error:_}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),z9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=z9(i),s=a.next();!s.done;s=a.next()){var l=s.value;r+=l.getCount()}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),O=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),j9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ts=(function(){function n(e,t){for(var r,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var l=0,f=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=j9(h),v=p.next();!v.done;v=p.next()){var _=v.value;l+=_.getCount()*(_.getDataCodewords()+f)}}catch(E){r={error:E}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new fe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new fe}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ce;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var s=bS.numBitsDiffering(e,a);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ui(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new O(1,19)),new Y(10,new O(1,16)),new Y(13,new O(1,13)),new Y(17,new O(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new O(1,34)),new Y(16,new O(1,28)),new Y(22,new O(1,22)),new Y(28,new O(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new O(1,55)),new Y(26,new O(1,44)),new Y(18,new O(2,17)),new Y(22,new O(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new O(1,80)),new Y(18,new O(2,32)),new Y(26,new O(2,24)),new Y(16,new O(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new O(1,108)),new Y(24,new O(2,43)),new Y(18,new O(2,15),new O(2,16)),new Y(22,new O(2,11),new O(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new O(2,68)),new Y(16,new O(4,27)),new Y(24,new O(4,19)),new Y(28,new O(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new O(2,78)),new Y(18,new O(4,31)),new Y(18,new O(2,14),new O(4,15)),new Y(26,new O(4,13),new O(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new O(2,97)),new Y(22,new O(2,38),new O(2,39)),new Y(22,new O(4,18),new O(2,19)),new Y(26,new O(4,14),new O(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new O(2,116)),new Y(22,new O(3,36),new O(2,37)),new Y(20,new O(4,16),new O(4,17)),new Y(24,new O(4,12),new O(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new O(2,68),new O(2,69)),new Y(26,new O(4,43),new O(1,44)),new Y(24,new O(6,19),new O(2,20)),new Y(28,new O(6,15),new O(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new O(4,81)),new Y(30,new O(1,50),new O(4,51)),new Y(28,new O(4,22),new O(4,23)),new Y(24,new O(3,12),new O(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new O(2,92),new O(2,93)),new Y(22,new O(6,36),new O(2,37)),new Y(26,new O(4,20),new O(6,21)),new Y(28,new O(7,14),new O(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new O(4,107)),new Y(22,new O(8,37),new O(1,38)),new Y(24,new O(8,20),new O(4,21)),new Y(22,new O(12,11),new O(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new O(3,115),new O(1,116)),new Y(24,new O(4,40),new O(5,41)),new Y(20,new O(11,16),new O(5,17)),new Y(24,new O(11,12),new O(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new O(5,87),new O(1,88)),new Y(24,new O(5,41),new O(5,42)),new Y(30,new O(5,24),new O(7,25)),new Y(24,new O(11,12),new O(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new O(5,98),new O(1,99)),new Y(28,new O(7,45),new O(3,46)),new Y(24,new O(15,19),new O(2,20)),new Y(30,new O(3,15),new O(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new O(1,107),new O(5,108)),new Y(28,new O(10,46),new O(1,47)),new Y(28,new O(1,22),new O(15,23)),new Y(28,new O(2,14),new O(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new O(5,120),new O(1,121)),new Y(26,new O(9,43),new O(4,44)),new Y(28,new O(17,22),new O(1,23)),new Y(28,new O(2,14),new O(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new O(3,113),new O(4,114)),new Y(26,new O(3,44),new O(11,45)),new Y(26,new O(17,21),new O(4,22)),new Y(26,new O(9,13),new O(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new O(3,107),new O(5,108)),new Y(26,new O(3,41),new O(13,42)),new Y(30,new O(15,24),new O(5,25)),new Y(28,new O(15,15),new O(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new O(4,116),new O(4,117)),new Y(26,new O(17,42)),new Y(28,new O(17,22),new O(6,23)),new Y(30,new O(19,16),new O(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new O(2,111),new O(7,112)),new Y(28,new O(17,46)),new Y(30,new O(7,24),new O(16,25)),new Y(24,new O(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new O(4,121),new O(5,122)),new Y(28,new O(4,47),new O(14,48)),new Y(30,new O(11,24),new O(14,25)),new Y(30,new O(16,15),new O(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new O(6,117),new O(4,118)),new Y(28,new O(6,45),new O(14,46)),new Y(30,new O(11,24),new O(16,25)),new Y(30,new O(30,16),new O(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new O(8,106),new O(4,107)),new Y(28,new O(8,47),new O(13,48)),new Y(30,new O(7,24),new O(22,25)),new Y(30,new O(22,15),new O(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new O(10,114),new O(2,115)),new Y(28,new O(19,46),new O(4,47)),new Y(28,new O(28,22),new O(6,23)),new Y(30,new O(33,16),new O(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new O(8,122),new O(4,123)),new Y(28,new O(22,45),new O(3,46)),new Y(30,new O(8,23),new O(26,24)),new Y(30,new O(12,15),new O(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new O(3,117),new O(10,118)),new Y(28,new O(3,45),new O(23,46)),new Y(30,new O(4,24),new O(31,25)),new Y(30,new O(11,15),new O(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new O(7,116),new O(7,117)),new Y(28,new O(21,45),new O(7,46)),new Y(30,new O(1,23),new O(37,24)),new Y(30,new O(19,15),new O(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new O(5,115),new O(10,116)),new Y(28,new O(19,47),new O(10,48)),new Y(30,new O(15,24),new O(25,25)),new Y(30,new O(23,15),new O(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new O(13,115),new O(3,116)),new Y(28,new O(2,46),new O(29,47)),new Y(30,new O(42,24),new O(1,25)),new Y(30,new O(23,15),new O(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new O(17,115)),new Y(28,new O(10,46),new O(23,47)),new Y(30,new O(10,24),new O(35,25)),new Y(30,new O(19,15),new O(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new O(17,115),new O(1,116)),new Y(28,new O(14,46),new O(21,47)),new Y(30,new O(29,24),new O(19,25)),new Y(30,new O(11,15),new O(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new O(13,115),new O(6,116)),new Y(28,new O(14,46),new O(23,47)),new Y(30,new O(44,24),new O(7,25)),new Y(30,new O(59,16),new O(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new O(12,121),new O(7,122)),new Y(28,new O(12,47),new O(26,48)),new Y(30,new O(39,24),new O(14,25)),new Y(30,new O(22,15),new O(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new O(6,121),new O(14,122)),new Y(28,new O(6,47),new O(34,48)),new Y(30,new O(46,24),new O(10,25)),new Y(30,new O(2,15),new O(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new O(17,122),new O(4,123)),new Y(28,new O(29,46),new O(14,47)),new Y(30,new O(49,24),new O(10,25)),new Y(30,new O(24,15),new O(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new O(4,122),new O(18,123)),new Y(28,new O(13,46),new O(32,47)),new Y(30,new O(48,24),new O(14,25)),new Y(30,new O(42,15),new O(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new O(20,117),new O(4,118)),new Y(28,new O(40,47),new O(7,48)),new Y(30,new O(43,24),new O(22,25)),new Y(30,new O(10,15),new O(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new O(19,118),new O(6,119)),new Y(28,new O(18,47),new O(31,48)),new Y(30,new O(34,24),new O(34,25)),new Y(30,new O(20,15),new O(61,16)))],n})(),_n;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(_n||(_n={}));var RA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[_n.DATA_MASK_000,new n(_n.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[_n.DATA_MASK_001,new n(_n.DATA_MASK_001,function(e,t){return(e&1)===0})],[_n.DATA_MASK_010,new n(_n.DATA_MASK_010,function(e,t){return t%3===0})],[_n.DATA_MASK_011,new n(_n.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[_n.DATA_MASK_100,new n(_n.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[_n.DATA_MASK_101,new n(_n.DATA_MASK_101,function(e,t){return e*t%6===0})],[_n.DATA_MASK_110,new n(_n.DATA_MASK_110,function(e,t){return e*t%6<3})],[_n.DATA_MASK_111,new n(_n.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),H9=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new fe;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,r=i-1;r>=s;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=bS.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new fe},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ts.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,a,r);var l=Ts.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;r=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)r=this.copyBit(s,a,r);if(l=Ts.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new fe},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=RA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,l=new Uint8Array(t.getTotalCodewords()),f=0,h=0,p=0,v=i-1;v>0;v-=2){v===6&&v--;for(var _=0;_<i;_++)for(var E=s?i-1-_:_,w=0;w<2;w++)a.get(v-w,E)||(p++,h<<=1,this.bitMatrix.get(v-w,E)&&(h|=1),p===8&&(l[f++]=h,p=0,h=0));s=!s}if(f!==t.getTotalCodewords())throw new fe;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=RA.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),DA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G9=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,s,l;if(e.length!==t.getTotalCodewords())throw new Ce;var f=t.getECBlocksForLevel(r),h=0,p=f.getECBlocks();try{for(var v=DA(p),_=v.next();!_.done;_=v.next()){var E=_.value;h+=E.getCount()}}catch(P){i={error:P}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}var w=new Array(h),S=0;try{for(var R=DA(p),L=R.next();!L.done;L=R.next())for(var E=L.value,M=0;M<E.getCount();M++){var B=E.getDataCodewords(),G=f.getECCodewordsPerBlock()+B;w[S++]=new n(B,new Uint8Array(G))}}catch(P){s={error:P}}finally{try{L&&!L.done&&(l=R.return)&&l.call(R)}finally{if(s)throw s.error}}for(var $=w[0].codewords.length,J=w.length-1;J>=0;){var C=w[J].codewords.length;if(C===$)break;J--}J++;for(var b=$-f.getECCodewordsPerBlock(),N=0,M=0;M<b;M++)for(var k=0;k<S;k++)w[k].codewords[M]=e[N++];for(var k=J;k<S;k++)w[k].codewords[b]=e[N++];for(var V=w[0].codewords.length,M=b;M<V;M++)for(var k=0;k<S;k++){var z=k<J?M:M+1;w[k].codewords[z]=e[N++]}return w},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Lr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Lr||(Lr={}));var Rt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ce;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Lr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),q9=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new CS(e),s=new Ve,l=new Array,f=-1,h=-1;try{var p=null,v=!1,_=void 0;do{if(a.available()<4)_=Rt.TERMINATOR;else{var E=a.readBits(4);_=Rt.forBits(E)}switch(_){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:v=!0;break;case Rt.STRUCTURED_APPEND:if(a.available()<16)throw new fe;f=a.readBits(8),h=a.readBits(8);break;case Rt.ECI:var w=n.parseECIValue(a);if(p=fn.getCharacterSetECIByValue(w),p===null)throw new fe;break;case Rt.HANZI:var S=a.readBits(4),R=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,s,R);break;default:var L=a.readBits(_.getCharacterCountBits(t));switch(_){case Rt.NUMERIC:n.decodeNumericSegment(a,s,L);break;case Rt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,s,L,v);break;case Rt.BYTE:n.decodeByteSegment(a,s,L,p,l,i);break;case Rt.KANJI:n.decodeKanjiSegment(a,s,L);break;default:throw new fe}break}}while(_!==Rt.TERMINATOR)}catch{throw new fe}return new K0(e,s.toString(),l.length===0?null:l,r===null?null:r.toString(),f,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new fe;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,r--}try{t.append(Ur.decode(i,$e.GB2312))}catch(f){throw new fe(f)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new fe;for(var i=new Uint8Array(2*r),a=0;r>0;){var s=e.readBits(13),l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,r--}try{t.append(Ur.decode(i,$e.SHIFT_JIS))}catch(f){throw new fe(f)}},n.decodeByteSegment=function(e,t,r,i,a,s){if(8*r>e.available())throw new fe;for(var l=new Uint8Array(r),f=0;f<r;f++)l[f]=e.readBits(8);var h;i===null?h=$e.guessEncoding(l,s):h=i.getName();try{t.append(Ur.decode(l,h))}catch(p){throw new fe(p)}a.push(l)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new fe;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new fe;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new fe;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var l=a;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new fe;var i=e.readBits(10);if(i>=1e3)throw new fe;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new fe;var a=e.readBits(7);if(a>=100)throw new fe;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new fe;var s=e.readBits(4);if(s>=10)throw new fe;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new fe},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),RS=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),OA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X9=(function(){function n(){this.rsDecoder=new Y0(or.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ui.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new H9(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new RS(!0)),a}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,s,l=e.readVersion(),f=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=G9.getDataBlocks(h,l,f),v=0;try{for(var _=OA(p),E=_.next();!E.done;E=_.next()){var w=E.value;v+=w.getNumDataCodewords()}}catch(J){r={error:J}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(v),R=0;try{for(var L=OA(p),M=L.next();!M.done;M=L.next()){var w=M.value,B=w.getCodewords(),G=w.getNumDataCodewords();this.correctErrors(B,G);for(var $=0;$<G;$++)S[R++]=B[$]}}catch(J){a={error:J}}finally{try{M&&!M.done&&(s=L.return)&&s.call(L)}finally{if(a)throw a.error}}return q9.decode(S,l,f,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),K9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Y9=(function(n){K9(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,s=(this.getY()+t)/2,l=(this.estimatedModuleSize+i)/2;return new e(a,s,l)},e})(Ee),W9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q9=(function(){function n(e,t,r,i,a,s,l){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,s=new Int32Array(3),l=this.image,f=0;f<t;f++){var h=a+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!l.get(p,h);)p++;for(var v=0;p<i;){if(l.get(p,h))if(v===1)s[1]++;else if(v===2){if(this.foundPatternCross(s)){var _=this.handlePossibleCenter(s,h,p);if(_!==null)return _}s[0]=s[2],s[1]=1,s[2]=0,v=1}else s[++v]++;else v===1&&v++,s[v]++;p++}if(this.foundPatternCross(s)){var _=this.handlePossibleCenter(s,h,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,s=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var f=e;f>=0&&a.get(t,f)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&!a.get(t,f)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=e+1;f<s&&a.get(t,f)&&l[1]<=r;)l[1]++,f++;if(f===s||l[1]>r)return NaN;for(;f<s&&!a.get(t,f)&&l[2]<=r;)l[2]++,f++;if(l[2]>r)return NaN;var h=l[0]+l[1]+l[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,s=e[0]+e[1]+e[2],l=n.centerFromEnd(e,r),f=this.crossCheckVertical(t,l,2*e[1],s);if(!isNaN(f)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=W9(this.possibleCenters),v=p.next();!v.done;v=p.next()){var _=v.value;if(_.aboutEquals(h,f,l))return _.combineEstimate(f,l,h)}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var E=new Y9(l,f,h);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null},n})(),$9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Z9=(function(n){$9(e,n);function e(t,r,i,a){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,s=(this.count*this.getX()+r)/a,l=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+i)/a;return new e(s,l,f,a)},e})(Ee),J9=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Rc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e7=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),l=Math.floor(3*a/(4*n.MAX_MODULES));(l<n.MIN_SKIP||t)&&(l=n.MIN_SKIP);for(var f=!1,h=new Int32Array(5),p=l-1;p<a&&!f;p+=l){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var v=0,_=0;_<s;_++)if(i.get(_,p))(v&1)===1&&v++,h[v]++;else if((v&1)===0)if(v===4)if(n.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,_,r);if(E===!0)if(l=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var w=this.findRowSkip();w>h[2]&&(p+=w-h[2]-l,_=s-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;continue}v=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;else h[++v]++;else h[v]++;if(n.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,s,r);E===!0&&(l=h[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Ee.orderBestPatterns(S),new J9(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),s=0,l=this.image;e>=s&&t>=s&&l.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!l.get(t-s,e-s)&&a[1]<=r;)a[1]++,s++;if(e<s||t<s||a[1]>r)return!1;for(;e>=s&&t>=s&&l.get(t-s,e-s)&&a[0]<=r;)a[0]++,s++;if(a[0]>r)return!1;var f=l.getHeight(),h=l.getWidth();for(s=1;e+s<f&&t+s<h&&l.get(t+s,e+s);)a[2]++,s++;if(e+s>=f||t+s>=h)return!1;for(;e+s<f&&t+s<h&&!l.get(t+s,e+s)&&a[3]<r;)a[3]++,s++;if(e+s>=f||t+s>=h||a[3]>=r)return!1;for(;e+s<f&&t+s<h&&l.get(t+s,e+s)&&a[4]<r;)a[4]++,s++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,s=a.getHeight(),l=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(t,f);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(t,f)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&a.get(t,f)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=e+1;f<s&&a.get(t,f);)l[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(t,f)&&l[3]<r;)l[3]++,f++;if(f===s||l[3]>=r)return NaN;for(;f<s&&a.get(t,f)&&l[4]<r;)l[4]++,f++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,s=a.getWidth(),l=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(f,t);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(f,t)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&a.get(f,t)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=e+1;f<s&&a.get(f,t);)l[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(f,t)&&l[3]<r;)l[3]++,f++;if(f===s||l[3]>=r)return NaN;for(;f<s&&a.get(f,t)&&l[4]<r;)l[4]++,f++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),l=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),e[2],a)))){for(var f=a/7,h=!1,p=this.possibleCenters,v=0,_=p.length;v<_;v++){var E=p[v];if(E.aboutEquals(f,l,s)){p[v]=E.combineEstimate(l,s,f),h=!0;break}}if(!h){var w=new Z9(s,l,f);p.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Rc(this.possibleCenters),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,s=0,l=this.possibleCenters.length;try{for(var f=Rc(this.possibleCenters),h=f.next();!h.done;h=f.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,s+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{h&&!h.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}if(a<3)return!1;var v=s/l,_=0;try{for(var E=Rc(this.possibleCenters),w=E.next();!w.done;w=E.next()){var p=w.value;_+=Math.abs(p.getEstimatedModuleSize()-v)}}catch(S){r={error:S}}finally{try{w&&!w.done&&(i=E.return)&&i.call(E)}finally{if(r)throw r.error}}return _<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new re;var s=this.possibleCenters,l;if(a>3){var f=0,h=0;try{for(var p=Rc(this.possibleCenters),v=p.next();!v.done;v=p.next()){var _=v.value,E=_.getEstimatedModuleSize();f+=E,h+=E*E}}catch($){e={error:$}}finally{try{v&&!v.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}l=f/a;var w=Math.sqrt(h/a-l*l);s.sort(function($,J){var C=Math.abs(J.getEstimatedModuleSize()-l),b=Math.abs($.getEstimatedModuleSize()-l);return C<b?-1:C>b?1:0});for(var S=Math.max(.2*l,w),R=0;R<s.length&&s.length>3;R++){var L=s[R];Math.abs(L.getEstimatedModuleSize()-l)>S&&(s.splice(R,1),R--)}}if(s.length>3){var f=0;try{for(var M=Rc(s),B=M.next();!B.done;B=M.next()){var G=B.value;f+=G.getEstimatedModuleSize()}}catch(J){r={error:J}}finally{try{B&&!B.done&&(i=M.return)&&i.call(M)}finally{if(r)throw r.error}}l=f/s.length,s.sort(function(J,C){if(C.getCount()===J.getCount()){var b=Math.abs(C.getEstimatedModuleSize()-l),N=Math.abs(J.getEstimatedModuleSize()-l);return b<N?1:b>N?-1:0}else return C.getCount()-J.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),t7=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var t=new e7(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new re("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,a),l=Ts.getProvisionalVersionForDimension(s),f=l.getDimensionForVersion()-7,h=null;if(l.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),v=r.getY()-t.getY()+i.getY(),_=1-3/f,E=Math.floor(t.getX()+_*(p-t.getX())),w=Math.floor(t.getY()+_*(v-t.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,E,w,S);break}catch(B){if(!(B instanceof re))throw B}var R=n.createTransform(t,r,i,h,s),L=n.sampleGrid(this.image,R,s),M;return h===null?M=[i,t,r]:M=[i,t,r,h],new Sm(L,M)},n.createTransform=function(e,t,r,i,a){var s=a-3.5,l,f,h,p;return i!==null?(l=i.getX(),f=i.getY(),h=s-3,p=h):(l=t.getX()-e.getX()+r.getX(),f=t.getY()-e.getY()+r.getY(),h=s,p=s),wS.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,h,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),l,f,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Im.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=nt.round(Ee.distance(e,t)/i),s=nt.round(Ee.distance(e,r)/i),l=Math.floor((a+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new re("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,l=e-(r-e);l<0?(s=e/(e-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var f=Math.floor(t-(i-t)*s);return s=1,f<0?(s=t/(t-f),f=0):f>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),l=Math.floor(e+(l-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,l,f),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var s=e;e=t,t=s,s=r,r=i,i=s}for(var l=Math.abs(r-e),f=Math.abs(i-t),h=-l/2,p=e<r?1:-1,v=t<i?1:-1,_=0,E=r+p,w=e,S=t;w!==E;w+=p){var R=a?S:w,L=a?w:S;if(_===1===this.image.get(R,L)){if(_===2)return nt.distance(w,S,e,t);_++}if(h+=f,h>0){if(S===i)break;S+=v,h-=l}}return _===2?nt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),s=Math.max(0,t-a),l=Math.min(this.image.getWidth()-1,t+a);if(l-s<e*3)throw new re("Alignment top exceeds estimated module size.");var f=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-f<e*3)throw new re("Alignment bottom exceeds estimated module size.");var p=new Q9(this.image,s,f,l-s,h-f,e,this.resultPointCallback);return p.find()},n})(),hv=(function(){function n(){this.decoder=new X9}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var s=new t7(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof RS&&r.getOther().applyMirroredCorrection(i);var l=new jn(r.getText(),r.getRawBytes(),void 0,i,Ie.QR_CODE,void 0),f=r.getByteSegments();f!==null&&l.putMetadata(Ln.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!==null&&l.putMetadata(Ln.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(l.putMetadata(Ln.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(Ln.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new re;var i=this.moduleSize(t,e),a=t[1],s=r[1],l=t[0],f=r[0];if(l>=f||a>=s)throw new re;if(s-a!==f-l&&(f=l+(s-a),f>=e.getWidth()))throw new re;var h=Math.round((f-l+1)/i),p=Math.round((s-a+1)/i);if(h<=0||p<=0)throw new re;if(p!==h)throw new re;var v=Math.floor(i/2);a+=v,l+=v;var _=l+Math.floor((h-1)*i)-f;if(_>0){if(_>v)throw new re;l-=_}var E=a+Math.floor((p-1)*i)-s;if(E>0){if(E>v)throw new re;a-=E}for(var w=new Ui(h,p),S=0;S<p;S++)for(var R=a+Math.floor(S*i),L=0;L<h;L++)e.get(l+Math.floor(L*i),R)&&w.set(L,S);return w},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],l=!0,f=0;a<i&&s<r;){if(l!==t.get(a,s)){if(++f===5)break;l=!l}a++,s++}if(a===i||s===r)throw new re;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),n7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return nt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=n7(e),l=s.next();!l.done;l=s.next()){var f=l.value;i[a++]=f}}catch(h){t={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=hn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),r7=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),i7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a7=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new r7(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,s=0,l=0,f=!1;s<t.getHeight();){var h=n.findVertices(t,s,l);if(h[0]==null&&h[3]==null){if(!f)break;f=!1,l=0;try{for(var p=(r=void 0,i7(a)),v=p.next();!v.done;v=p.next()){var _=v.value;_[1]!=null&&(s=Math.trunc(Math.max(s,_[1].getY()))),_[3]!=null&&(s=Math.max(s,Math.trunc(_[3].getY())))}}catch(E){r={error:E}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(f=!0,a.push(h),!e)break;h[2]!=null?(l=Math.trunc(h[2].getX()),s=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,s){for(var l=new Array(4),f=!1,h=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,s,h);if(p!=null){for(;i>0;){var v=n.findGuardPattern(e,a,--i,r,!1,s,h);if(v!=null)p=v;else{i++;break}}l[0]=new Ee(p[0],i),l[1]=new Ee(p[1],i),f=!0;break}}var _=i+1;if(f){for(var E=0,v=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);_<t;_++){var p=n.findGuardPattern(e,v[0],_,r,!1,s,h);if(p!=null&&Math.abs(v[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(v[1]-p[1])<n.MAX_PATTERN_DRIFT)v=p,E=0;else{if(E>n.SKIPPED_ROW_COUNT_MAX)break;E++}}_-=E+1,l[2]=new Ee(v[0],_),l[3]=new Ee(v[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&hn.fill(l,null),l},n.findGuardPattern=function(e,t,r,i,a,s,l){hn.fillWithin(l,0,l.length,0);for(var f=t,h=0;e.get(f,r)&&f>0&&h++<n.MAX_PIXEL_DRIFT;)f--;for(var p=f,v=0,_=s.length,E=a;p<i;p++){var w=e.get(p,r);if(w!==E)l[v]++;else{if(v===_-1){if(n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([f,p]);f+=l[0]+l[1],St.arraycopy(l,2,l,0,v-1),l[v-1]=0,l[v]=0,v--}else v++;l[v]=1,E=!E}}return v===_-1&&n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([f,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,s=0,l=0;l<i;l++)a+=e[l],s+=t[l];if(a<s)return 1/0;var f=a/s;r*=f;for(var h=0,p=0;p<i;p++){var v=e[p],_=t[p]*f,E=v>_?v-_:_-v;if(E>r)return 1/0;h+=E}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),o7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_s=(function(){function n(e,t){if(t.length===0)throw new Ce;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=o7(this.coefficients),s=a.next();!s.done;s=a.next()){var l=s.value;i=this.field.add(i,l)}}catch(v){t={error:v}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var f=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)f=this.field.add(this.field.multiply(e,f),this.coefficients[p]);return f},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),s=r.length-t.length;St.arraycopy(r,0,a,0,s);for(var l=s;l<r.length;l++)a[l]=this.field.add(t[l-s],r[l]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,s=new Int32Array(r+a-1),l=0;l<r;l++)for(var f=t[l],h=0;h<a;h++)s[l+h]=this.field.add(s[l+h],this.field.multiply(f,i[h]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Ve,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),s7=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new AS;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),u7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),l7=(function(n){u7(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new _s(i,new Int32Array([0])),i.one=new _s(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ce;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new _s(this,i)},e.PDF417_GF=new e(Je.NUMBER_OF_CODEWORDS,3),e})(s7),c7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f7=(function(){function n(){this.field=l7.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,s=new _s(this.field,e),l=new Int32Array(t),f=!1,h=t;h>0;h--){var p=s.evaluateAt(this.field.exp(h));l[t-h]=p,p!==0&&(f=!0)}if(!f)return 0;var v=this.field.getOne();if(r!=null)try{for(var _=c7(r),E=_.next();!E.done;E=_.next()){var w=E.value,S=this.field.exp(e.length-1-w),R=new _s(this.field,new Int32Array([this.field.subtract(0,S),1]));v=v.multiply(R)}}catch(b){i={error:b}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var L=new _s(this.field,l),M=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),L,t),B=M[0],G=M[1],$=this.findErrorLocations(B),J=this.findErrorMagnitudes(G,B,$),h=0;h<$.length;h++){var C=e.length-1-this.field.log($[h]);if(C<0)throw An.getChecksumInstance();e[C]=this.field.subtract(e[C],J[h])}return $.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,l=this.field.getZero(),f=this.field.getOne();s.getDegree()>=Math.round(r/2);){var h=a,p=l;if(a=s,l=f,a.isZero())throw An.getChecksumInstance();s=h;for(var v=this.field.getZero(),_=a.getCoefficient(a.getDegree()),E=this.field.inverse(_);s.getDegree()>=a.getDegree()&&!s.isZero();){var w=s.getDegree()-a.getDegree(),S=this.field.multiply(s.getCoefficient(s.getDegree()),E);v=v.add(this.field.buildMonomial(w,S)),s=s.subtract(a.multiplyByMonomial(w,S))}f=v.multiply(l).subtract(p).negative()}var R=f.getCoefficient(0);if(R===0)throw An.getChecksumInstance();var L=this.field.inverse(R),M=f.multiply(L),B=s.multiply(L);return[M,B]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw An.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var l=new _s(this.field,a),f=r.length,h=new Int32Array(f),s=0;s<f;s++){var p=this.field.inverse(r[s]),v=this.field.subtract(0,e.evaluateAt(p)),_=this.field.inverse(l.evaluateAt(p));h[s]=this.field.multiply(v,_)}return h},n})(),dv=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var s=t==null||r==null,l=i==null||a==null;if(s&&l)throw new re;s?(t=new Ee(0,i.getY()),r=new Ee(0,a.getY())):l&&(i=new Ee(e.getWidth()-1,t.getY()),a=new Ee(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(e>0){var f=r?this.topLeft:this.topRight,h=Math.trunc(f.getY()-e);h<0&&(h=0);var p=new Ee(f.getX(),h);r?i=p:s=p}if(t>0){var v=r?this.bottomLeft:this.bottomRight,_=Math.trunc(v.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var E=new Ee(v.getX(),_);r?a=E:l=E}return new n(this.image,i,a,s,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),h7=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),bm=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,l,f,h,p,v){if(s==="%%")return"%";if(t[++r]!==void 0){s=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,E;switch(v){case"s":E=t[r];break;case"c":E=t[r][0];break;case"f":E=parseFloat(t[r]).toFixed(s);break;case"p":E=parseFloat(t[r]).toPrecision(s);break;case"e":E=parseFloat(t[r]).toExponential(s);break;case"x":E=parseInt(t[r]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[r],_||10).toPrecision(s)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var w=parseInt(f),S=f&&f[0]+""=="0"?"0":" ";E.length<w;)E=l!==void 0?E+S:S+E;return E}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),d7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DS=(function(){function n(e){this.boundingBox=new dv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new bm,i=0;try{for(var a=d7(this.codewords),s=a.next();!s.done;s=a.next()){var l=s.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),p7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g7=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return a},zc=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(v,_){var E={getKey:function(){return v},getValue:function(){return _}};E.getValue()>r?(r=E.getValue(),i=[],i.push(E.getKey())):E.getValue()===r&&i.push(E.getKey())};try{for(var s=p7(this.values.entries()),l=s.next();!l.done;l=s.next()){var f=g7(l.value,2),h=f[0],p=f[1];a(h,p)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Je.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),v7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NA=(function(n){v7(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=mg(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=-1,p=1,v=0,_=l;_<f;_++)if(r[_]!=null){var E=r[_],w=E.getRowNumber()-h;if(w===0)v++;else if(w===1)p=Math.max(p,v),v=1,h=E.getRowNumber();else if(w<0||E.getRowNumber()>=t.getRowCount()||w>_)r[_]=null;else{var S=void 0;p>2?S=(p-2)*w:S=w;for(var R=S>=_,L=1;L<=S&&!R;L++)R=r[_-L]!=null;R?r[_]=null:(h=E.getRowNumber(),v=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=mg(this.getCodewords()),l=s.next();!l.done;l=s.next()){var f=l.value;if(f!=null){var h=f.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),h=-1,p=s;p<l;p++)if(f[p]!=null){var v=f[p];v.setRowNumberAsRowIndicatorColumn();var _=v.getRowNumber()-h;_===0||(_===1?h=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?f[p]=null:h=v.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new zc,s=new zc,l=new zc,f=new zc;try{for(var h=mg(i),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null){v.setRowNumberAsRowIndicatorColumn();var _=v.getValue()%30,E=v.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:s.setValue(_*3+1);break;case 1:f.setValue(_/3),l.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;var w=new h7(a.getValue()[0],s.getValue()[0],l.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,w),w},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,l=a.getRowNumber();if(l>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(DS),m7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y7=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Je.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=r[t],l=this.detectionResultColumns[e-1].getCodewords(),f=l;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=l[t],h[3]=f[t],t>0&&(h[0]=r[t-1],h[4]=l[t-1],h[5]=f[t-1]),t>1&&(h[8]=r[t-2],h[10]=l[t-2],h[11]=f[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=l[t+1],h[7]=f[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=l[t+2],h[13]=f[t+2]);try{for(var p=m7(h),v=p.next();!v.done;v=p.next()){var _=v.value;if(n.adjustRowNumber(s,_))return}}catch(E){i={error:E}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new bm,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),_7=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),E7=(function(){function n(){}return n.initialize=function(){for(var e=0;e<Je.SYMBOL_TABLE.length;e++)for(var t=Je.SYMBOL_TABLE[e],r=t&1,i=0;i<Je.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Je.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Je.BARS_IN_MODULE-i-1]=Math.fround(a/Je.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=nt.sum(e),r=new Int32Array(Je.BARS_IN_MODULE),i=0,a=0,s=0;s<Je.MODULES_IN_CODEWORD;s++){var l=t/(2*Je.MODULES_IN_CODEWORD)+s*t/Je.MODULES_IN_CODEWORD;a+e[i]<=l&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Je.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=nt.sum(e),r=new Array(Je.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=sv.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var f=0,h=n.RATIOS_TABLE[l],p=0;p<Je.BARS_IN_MODULE;p++){var v=Math.fround(h[p]-r[p]);if(f+=Math.fround(v*v),f>=a)break}f<a&&(a=f,s=Je.SYMBOL_TABLE[l])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(function(e){return new Array(Je.BARS_IN_MODULE)}),n})(),x7=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),MA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),A7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),w7=(function(n){A7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(ur),T7=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new w7;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new wm;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),S7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),I7=(function(n){S7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(ur),C7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b7=(function(n){C7(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ce("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new I7;i=Ue.MAX_VALUE}this.buf=hn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new wm;this.ensureCapacity(this.count+i),St.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return hn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(T7),wt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wt||(wt={}));function OS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Ad;function oo(n){if(typeof Ad>"u"&&(Ad=OS()),Ad===null)throw new Error("BigInt is not supported!");return Ad(n)}function R7(){var n=[];n[0]=oo(1);var e=oo(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var D7=(function(){function n(){}return n.decode=function(e,t){var r=new Ve(""),i=fn.ISO8859_1;r.enableDecoding(i);for(var a=1,s=e[a++],l=new x7;a<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(s,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:fn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new fe;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)s=e[a++];else throw fe.getFormatInstance()}if(r.length()===0)throw fe.getFormatInstance();var f=new K0(null,r.toString(),null,t);return f.setOther(l),f},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw fe.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Ue.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ve;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var l=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new Ve;t=n.textCompaction(e,t+1,f),r.setFileName(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new Ve;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Ve;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var v=new Ve;t=n.numericCompaction(e,t+1,v),r.setSegmentCount(Ue.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new Ve;t=n.numericCompaction(e,t+1,_),r.setTimestamp(MA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var E=new Ve;t=n.numericCompaction(e,t+1,E),r.setChecksum(Ue.parseInt(E.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var w=new Ve;t=n.numericCompaction(e,t+1,w),r.setFileSize(MA.parseLong(w.toString()));break;default:throw fe.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw fe.getFormatInstance()}if(l!==-1){var S=t-l;r.isLastSegment()&&S--,r.setOptionalData(hn.copyOfRange(e,l,l+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,l=!1;t<e[0]&&!l;){var f=e[t++];if(f<n.TEXT_COMPACTION_MODE_LATCH)i[s]=f/30,i[s+1]=f%30,s+=2;else switch(f){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],a[s]=f,s++;break}}return n.decodeTextCompaction(i,a,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=wt.ALPHA,s=wt.ALPHA,l=0;l<r;){var f=e[l],h="";switch(a){case wt.ALPHA:if(f<26)h=String.fromCharCode(65+f);else switch(f){case 26:h=" ";break;case n.LL:a=wt.LOWER;break;case n.ML:a=wt.MIXED;break;case n.PS:s=a,a=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.LOWER:if(f<26)h=String.fromCharCode(97+f);else switch(f){case 26:h=" ";break;case n.AS:s=a,a=wt.ALPHA_SHIFT;break;case n.ML:a=wt.MIXED;break;case n.PS:s=a,a=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.MIXED:if(f<n.PL)h=n.MIXED_CHARS[f];else switch(f){case n.PL:a=wt.PUNCT;break;case 26:h=" ";break;case n.LL:a=wt.LOWER;break;case n.AL:a=wt.ALPHA;break;case n.PS:s=a,a=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.PUNCT:if(f<n.PAL)h=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=wt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(a=s,f<26)h=String.fromCharCode(65+f);else switch(f){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(a=s,f<n.PAL)h=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=wt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break}h!==""&&i.append(h),l++}},n.byteCompaction=function(e,t,r,i,a){var s=new b7,l=0,f=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),v=t[i++];i<t[0]&&!h;)switch(p[l++]=v,f=900*f+v,v=t[i++],v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(l%5===0&&l>0){for(var _=0;_<6;++_)s.write(Number(oo(f)>>oo(8*(5-_))));f=0,l=0}break}i===t[0]&&v<n.TEXT_COMPACTION_MODE_LATCH&&(p[l++]=v);for(var E=0;E<l;E++)s.write(p[E]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var w=t[i++];if(w<n.TEXT_COMPACTION_MODE_LATCH)l++,f=900*f+w;else switch(w){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(l%5===0&&l>0){for(var _=0;_<6;++_)s.write(Number(oo(f)>>oo(8*(5-_))));f=0,l=0}}break}return a.append(Ur.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var l=e[t++];if(t===e[0]&&(a=!0),l<n.TEXT_COMPACTION_MODE_LATCH)s[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=oo(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*oo(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new fe;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=OS()?R7():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Dc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},O7=(function(){function n(){}return n.decode=function(e,t,r,i,a,s,l){for(var f=new dv(e,t,r,i,a),h=null,p=null,v,_=!0;;_=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,f,t,!0,s,l)),i!=null&&(p=n.getRowIndicatorColumn(e,f,i,!1,s,l)),v=n.merge(h,p),v==null)throw re.getNotFoundInstance();var E=v.getBoundingBox();if(_&&E!=null&&(E.getMinY()<f.getMinY()||E.getMaxY()>f.getMaxY()))f=E;else break}v.setBoundingBox(f);var w=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,h),v.setDetectionResultColumn(w,p);for(var S=h!=null,R=1;R<=w;R++){var L=S?R:w-R;if(v.getDetectionResultColumn(L)===void 0){var M=void 0;L===0||L===w?M=new NA(f,L===0):M=new DS(f),v.setDetectionResultColumn(L,M);for(var B=-1,G=B,$=f.getMinY();$<=f.getMaxY();$++){if(B=n.getStartColumn(v,L,$,S),B<0||B>f.getMaxX()){if(G===-1)continue;B=G}var J=n.detectCodeword(e,f.getMinX(),f.getMaxX(),S,B,$,s,l);J!=null&&(M.setCodeword($,J),G=B,s=Math.min(s,J.getWidth()),l=Math.max(l,J.getWidth()))}}}return n.createDecoderResult(v)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=dv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new y7(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),s=0;try{for(var l=Dc(i),f=l.next();!f.done;f=l.next()){var h=f.value;if(s+=a-h,h>0)break}}catch(E){t={error:E}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),v=0;s>0&&p[v]==null;v++)s--;for(var _=0,v=i.length-1;v>=0&&(_+=a-i[v],!(i[v]>0));v--);for(var v=p.length-1;_>0&&p[v]==null;v--)_--;return e.getBoundingBox().addMissingRows(s,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Dc(e),s=a.next();!s.done;s=a.next()){var l=s.value;i=Math.max(i,l)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,s){for(var l=new NA(t,i),f=0;f<2;f++)for(var h=f===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),v=Math.trunc(Math.trunc(r.getY()));v<=t.getMaxY()&&v>=t.getMinY();v+=h){var _=n.detectCodeword(e,0,e.getWidth(),i,p,v,a,s);_!=null&&(l.setCodeword(v,_),i?p=_.getStartX():p=_.getEndX())}return l},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Je.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var f=0;f<e.getBarcodeColumnCount();f++){var h=t[l][f+1].getValue(),p=l*e.getBarcodeColumnCount()+f;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(s.push(p),a.push(h))}for(var v=new Array(a.length),_=0;_<v.length;_++)v[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Je.toIntArray(r),Je.toIntArray(s),v)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var s=new Int32Array(i.length),l=100;l-- >0;){for(var f=0;f<s.length;f++)t[i[f]]=a[f][s[f]];try{return n.decodeCodewords(t,e,r)}catch(p){var h=p instanceof An;if(!h)throw p}if(s.length===0)throw An.getChecksumInstance();for(var f=0;f<s.length;f++)if(s[f]<a[f].length-1){s[f]++;break}else if(s[f]=0,f===s.length-1)throw An.getChecksumInstance()}throw An.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<s.length;l++)for(var f=0;f<s[l].length;f++)s[l][f]=new zc;var h=0;try{for(var p=Dc(e.getDetectionResultColumns()),v=p.next();!v.done;v=p.next()){var _=v.value;if(_!=null)try{for(var E=(i=void 0,Dc(_.getCodewords())),w=E.next();!w.done;w=E.next()){var S=w.value;if(S!=null){var R=S.getRowNumber();if(R>=0){if(R>=s.length)continue;s[R][h].setValue(S.getValue())}}}}catch(L){i={error:L}}finally{try{w&&!w.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}h++}}catch(L){t={error:L}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,s,l=i?1:-1,f=null;if(n.isValidBarcodeColumn(e,t-l)&&(f=e.getDetectionResultColumn(t-l).getCodeword(r)),f!=null)return i?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(t).getCodewordNearby(r),f!=null)return i?f.getStartX():f.getEndX();if(n.isValidBarcodeColumn(e,t-l)&&(f=e.getDetectionResultColumn(t-l).getCodewordNearby(r)),f!=null)return i?f.getEndX():f.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-l);){t-=l;try{for(var p=(a=void 0,Dc(e.getDetectionResultColumn(t).getCodewords())),v=p.next();!v.done;v=p.next()){var _=v.value;if(_!=null)return(i?_.getEndX():_.getStartX())+l*h*(_.getEndX()-_.getStartX())}}catch(E){a={error:E}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,s,l,f){a=n.adjustCodewordStartColumn(e,t,r,i,a,s);var h=n.getModuleBitCount(e,t,r,i,a,s);if(h==null)return null;var p,v=nt.sum(h);if(i)p=a+v;else{for(var _=0;_<h.length/2;_++){var E=h[_];h[_]=h[h.length-1-_],h[h.length-1-_]=E}p=a,a=p-v}if(!n.checkCodewordSkew(v,l,f))return null;var w=E7.getDecodedValue(h),S=Je.getCodeword(w);return S===-1?null:new _7(a,p,n.getCodewordBucketNumber(w),S)},n.getModuleBitCount=function(e,t,r,i,a,s){for(var l=a,f=new Int32Array(8),h=0,p=i?1:-1,v=i;(i?l<r:l>=t)&&h<f.length;)e.get(l,s)===v?(f[h]++,l+=p):(h++,v=!v);return h===f.length||l===(i?r:t)&&h===f.length-1?f:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,s){for(var l=a,f=i?-1:1,h=0;h<2;h++){for(;(i?l>=t:l<r)&&i===e.get(l,s);){if(Math.abs(a-l)>n.CODEWORD_SKEW_SIZE)return a;l+=f}f=-f,i=!i}return l},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw fe.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=D7.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw An.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw fe.getFormatInstance();var r=e[0];if(r>e.length)throw fe.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw fe.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new bm,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new f7,n})(),N7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pv=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw re.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof fe||r instanceof An?re.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,s=new Array,l=a7.detectMultiple(e,t,r);try{for(var f=N7(l.getPoints()),h=f.next();!h.done;h=f.next()){var p=h.value,v=O7.decode(l.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),_=new jn(v.getText(),v.getRawBytes(),void 0,p,Ie.PDF_417);_.putMetadata(Ln.ERROR_CORRECTION_LEVEL,v.getECLevel());var E=v.getOther();E!=null&&_.putMetadata(Ln.PDF417_EXTRA_METADATA,E),s.push(_)}}catch(w){i={error:w}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return s.map(function(w){return w})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ue.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),M7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),PA=(function(n){M7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(ur),LA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P7=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(s){return s===Ie.UPC_A||s===Ie.UPC_E||s===Ie.EAN_13||s===Ie.EAN_8||s===Ie.CODABAR||s===Ie.CODE_39||s===Ie.CODE_93||s===Ie.CODE_128||s===Ie.ITF||s===Ie.RSS_14||s===Ie.RSS_EXPANDED});a&&!t&&i.push(new Uc(e)),r.includes(Ie.QR_CODE)&&i.push(new hv),r.includes(Ie.DATA_MATRIX)&&i.push(new fv),r.includes(Ie.AZTEC)&&i.push(new lv),r.includes(Ie.PDF_417)&&i.push(new pv),a&&t&&i.push(new Uc(e))}i.length===0&&(t||i.push(new Uc(e)),i.push(new hv),i.push(new fv),i.push(new lv),i.push(new pv),t&&i.push(new Uc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=LA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new PA("No readers where selected, nothing can be read.");try{for(var i=LA(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(l){if(l instanceof PA)continue}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new re("No MultiFormat Readers were able to detect the code.")},n})(),L7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),k7=(function(n){L7(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new P7;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(ml),B7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){B7(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new pv,t)||this}return e})(ml);var V7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){V7(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new hv,t)||this}return e})(ml);var gv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(gv||(gv={}));const wd=gv;var NS=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new xo(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=r.multiply(new xo(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ce("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ce("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);St.arraycopy(e,0,a,0,r);var s=new xo(this.field,a);s=s.multiplyByMonomial(t,1);for(var l=s.divide(i)[1],f=l.getCoefficients(),h=t-f.length,p=0;p<h;p++)e[r+p]=0;St.arraycopy(f,0,e,r+h,f.length)},n})(),jc=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var l=r[s],f=0;f<i-1;f++){var h=l[f];h===l[f+1]&&h===r[s+1][f]&&h===r[s+1][f+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var l=0;l<i;l++){var f=r[s];l+6<i&&f[l]===1&&f[l+1]===0&&f[l+2]===1&&f[l+3]===1&&f[l+4]===1&&f[l+5]===0&&f[l+6]===1&&(n.isWhiteHorizontal(f,l-4,l)||n.isWhiteHorizontal(f,l+7,l+11))&&t++,s+6<a&&r[s][l]===1&&r[s+1][l]===0&&r[s+2][l]===1&&r[s+3][l]===1&&r[s+4][l]===1&&r[s+5][l]===0&&r[s+6][l]===1&&(n.isWhiteVertical(r,l,s-4,s)||n.isWhiteVertical(r,l,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var l=r[s],f=0;f<i;f++)l[f]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Ce("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),l=0;l<i;l++){for(var f=0,h=-1,p=0;p<a;p++){var v=t?s[l][p]:s[p][l];v===h?f++:(f>=5&&(r+=n.N1+(f-5)),f=1,h=v)}f>=5&&(r+=n.N1+(f-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),F7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U7=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=F7(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;hn.fill(s,e)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],s=t.bytes[r],l=0,f=this.width;l<f;++l)if(a[l]!==s[l])return!1;return!0},n.prototype.toString=function(){for(var e=new Ve,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),vv=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Ve;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),z7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bt=(function(n){z7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(ur),kA=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new wn;n.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var l=i.get(i.getSize()-1-a),f=n.TYPE_INFO_COORDINATES[a],h=f[0],p=f[1];if(r.setBoolean(h,p,l),a<8){var v=r.getWidth()-a-1,_=8;r.setBoolean(v,_,l)}else{var v=8,_=r.getHeight()-7+(a-8);r.setBoolean(v,_,l)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new wn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var l=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,l),t.setBoolean(t.getHeight()-11+s,a,l)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,s=r.getWidth()-1,l=r.getHeight()-1;s>0;){for(s===6&&(s-=1);l>=0&&l<r.getHeight();){for(var f=0;f<2;++f){var h=s-f;if(n.isEmpty(r.get(h,l))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&jc.getDataMaskBit(t,h,l)&&(p=!p),r.setBoolean(h,l,p)}}l+=a}a=-a,l+=a,s-=2}if(i!==e.getSize())throw new bt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ue.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ce("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!vv.isValidMaskPattern(t))throw new bt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var s=new wn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new bt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new bt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new bt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new bt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new bt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,a[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,s=i.length;a!==s;a++){var l=i[a];if(l>=0)for(var f=0;f!==s;f++){var h=i[f];h>=0&&n.isEmpty(t.get(h,l))&&n.embedPositionAdjustmentPattern(h-2,l-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),j7=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),BA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return jc.applyMaskPenaltyRule1(e)+jc.applyMaskPenaltyRule2(e)+jc.applyMaskPenaltyRule3(e)+jc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(wd.CHARACTER_SET)!==void 0;a&&(i=r.get(wd.CHARACTER_SET).toString());var s=this.chooseMode(e,i),l=new wn;if(s===Rt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=fn.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,l)}this.appendModeInfo(s,l);var h=new wn;this.appendBytes(e,s,h,i);var p;if(r!==null&&r.get(wd.QR_VERSION)!==void 0){var v=Number.parseInt(r.get(wd.QR_VERSION).toString(),10);p=Ts.getVersionForNumber(v);var _=this.calculateBitsNeeded(s,l,h,p);if(!this.willFit(_,p,t))throw new bt("Data too big for requested version")}else p=this.recommendVersion(t,s,l,h);var E=new wn;E.appendBitArray(l);var w=s===Rt.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(w,p,s,E),E.appendBitArray(h);var S=p.getECBlocksForLevel(t),R=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(R,E);var L=this.interleaveWithECBytes(E,p.getTotalCodewords(),R,S.getNumBlocks()),M=new vv;M.setECLevel(t),M.setMode(s),M.setVersion(p);var B=p.getDimensionForVersion(),G=new U7(B,B),$=this.chooseMaskPattern(L,t,p,G);return M.setMaskPattern($),kA.buildMatrix(L,t,p,$,G),M.setMatrix(G),M},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Ts.getVersionForNumber(1)),s=this.chooseVersion(a,e),l=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(l,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),fn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Rt.KANJI;for(var r=!1,i=!1,a=0,s=e.length;a<s;++a){var l=e.charAt(a);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return Rt.BYTE}return i?Rt.ALPHANUMERIC:r?Rt.NUMERIC:Rt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Ur.encode(e,fn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,l=0;l<vv.NUM_MASK_PATTERNS;l++){kA.buildMatrix(e,t,r,l,i);var f=this.calculateMaskPenalty(i);f<a&&(a=f,s=l)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Ts.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new bt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),s=a.getTotalECCodewords(),l=i-s,f=(e+7)/8;return l>=f},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new bt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new bt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,s){if(i>=r)throw new bt("Block ID too large");var l=e%r,f=r-l,h=Math.floor(e/r),p=h+1,v=Math.floor(t/r),_=v+1,E=h-v,w=p-_;if(E!==w)throw new bt("EC bytes mismatch");if(r!==f+l)throw new bt("RS blocks mismatch");if(e!==(v+E)*f+(_+w)*l)throw new bt("Total bytes mismatch");i<f?(a[0]=v,s[0]=E):(a[0]=_,s[0]=w)},n.interleaveWithECBytes=function(e,t,r,i){var a,s,l,f;if(e.getSizeInBytes()!==r)throw new bt("Number of bits and data bytes does not match");for(var h=0,p=0,v=0,_=new Array,E=0;E<i;++E){var w=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,E,w,S);var R=w[0],L=new Uint8Array(R);e.toBytes(8*h,L,0,R);var M=n.generateECBytes(L,S[0]);_.push(new j7(L,M)),p=Math.max(p,R),v=Math.max(v,M.length),h+=w[0]}if(r!==h)throw new bt("Data bytes does not match offset");for(var B=new wn,E=0;E<p;++E)try{for(var G=(a=void 0,BA(_)),$=G.next();!$.done;$=G.next()){var J=$.value,L=J.getDataBytes();E<L.length&&B.appendBits(L[E],8)}}catch(k){a={error:k}}finally{try{$&&!$.done&&(s=G.return)&&s.call(G)}finally{if(a)throw a.error}}for(var E=0;E<v;++E)try{for(var C=(l=void 0,BA(_)),b=C.next();!b.done;b=C.next()){var J=b.value,M=J.getErrorCorrectionBytes();E<M.length&&B.appendBits(M[E],8)}}catch(k){l={error:k}}finally{try{b&&!b.done&&(f=C.return)&&f.call(C)}finally{if(l)throw l.error}}if(t!==B.getSizeInBytes())throw new bt("Interleaving error: "+t+" and "+B.getSizeInBytes()+" differ.");return B},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new NS(or.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[r+a];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new bt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Rt.NUMERIC:n.appendNumericBytes(e,r);break;case Rt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Rt.BYTE:n.append8BitBytes(e,r,i);break;case Rt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new bt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),l=n.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+l,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new bt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new bt;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Ur.encode(e,r)}catch(f){throw new bt(f)}for(var a=0,s=i.length;a!==s;a++){var l=i[a];t.appendBits(l,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Ur.encode(e,fn.SJIS)}catch(v){throw new bt(v)}for(var i=r.length,a=0;a<i;a+=2){var s=r[a]&255,l=r[a+1]&255,f=s<<8&4294967295|l,h=-1;if(f>=33088&&f<=40956?h=f-33088:f>=57408&&f<=60351&&(h=f-49472),h===-1)throw new bt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Rt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=fn.UTF8.getName(),n})();var H7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){H7(e,n);function e(t,r,i,a,s,l,f,h){var p=n.call(this,l,f)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=s,a+l>r||s+f>i)throw new Ce("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(l,f),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.yuvData,s,a,0,i),a;for(var l=0;l<r;l++){var f=l*t;St.arraycopy(this.yuvData,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,s=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var f=l*t,h=0;h<t;h++){var p=a[s+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[f+h]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<r;a++,s+=this.dataWidth)for(var l=s+t/2,f=s,h=s+t-1;f<l;f++,h--){var p=i[f];i[f]=i[h],i[h]=p}},e.prototype.invert=function(){return new Tm(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(X0);var G7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){G7(e,n);function e(t,r,i,a,s,l,f){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=s,h.left=l,h.top=f,t.BYTES_PER_ELEMENT===4){for(var p=r*i,v=new Uint8ClampedArray(p),_=0;_<p;_++){var E=t[_],w=E>>16&255,S=E>>7&510,R=E&255;v[_]=(w+S+R)/4&255}h.luminances=v}else h.luminances=t;if(a===void 0&&(h.dataWidth=r),s===void 0&&(h.dataHeight=i),l===void 0&&(h.left=0),f===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Ce("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.luminances,s,a,0,i),a;for(var l=0;l<r;l++){var f=l*t;St.arraycopy(this.luminances,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Tm(this)},e})(X0);var q7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),X7=(function(n){q7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(fn),K7=(function(){function n(){}return n.ISO_8859_1=fn.ISO8859_1,n})(),mv,Y7=301,W7=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=Y7);return{LOG:n,ALOG:e}};mv=W7([],[]),mv.LOG;mv.ALOG;var VA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(VA||(VA={}));var FA=129,MS=230,Q7=231,$7=235,Z7=236,J7=237,eM=238,tM=239,nM=240,yg=254,rM=254,UA="[)>05",zA="[)>06",jA="",pt=0,Nn=1,Yn=2,ln=3,En=4,Vn=5,iM=(function(){function n(){}return n.prototype.getEncodingMode=function(){return pt},n.prototype.encode=function(e){var t=ri.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Vn:e.writeCodeword(Q7),e.signalEncoderChange(Vn);return;case Nn:e.writeCodeword(MS),e.signalEncoderChange(Nn);return;case ln:e.writeCodeword(eM),e.signalEncoderChange(ln);break;case Yn:e.writeCodeword(tM),e.signalEncoderChange(Yn);break;case En:e.writeCodeword(nM),e.signalEncoderChange(En);break;default:throw new Error("Illegal mode: "+i)}else ri.isExtendedASCII(r)?(e.writeCodeword($7),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(ri.isDigit(e)&&ri.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),aM=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Vn},n.prototype.encode=function(e){var t=new Ve;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}var a=t.length()-1,s=1,l=e.getCodewordCount()+a+s;e.updateSymbolInfo(l);var f=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||f)if(a<=249)t.setCharAt(0,$e.getCharAt(a));else if(a<=1555)t.setCharAt(0,$e.getCharAt(Math.floor(a/250)+249)),t.insert(1,$e.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Rm=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Nn},n.prototype.encodeMaximal=function(e){for(var t=new Ve,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var l=Math.floor(t.length()/3*2),f=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(f);var h=e.getSymbolInfo().getDataCapacity()-f,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(MS),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Ve;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var f=new Ve;for(t.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(e,t,f,i));t.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(e,t,f,i);break}var h=t.length();if(h%3===0){var p=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var l=e.getCurrentChar();return i=this.encodeChar(l,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(yg)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(yg),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(yg)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(pt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Ve;return a.append(r),a.append(i),a.toString()},n})(),oM=(function(){function n(){}return n.prototype.getEncodingMode=function(){return En},n.prototype.encode=function(e){for(var t=new Ve;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}}t.append($e.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,l=this.encodeToCodewords(t.toString()),f=!e.hasMoreCharacters(),h=f&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}h?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(l)}finally{e.signalEncoderChange(pt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append($e.getCharAt(e-64)):ri.illegalCharacter($e.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(a<<6)+s,f=l>>16&255,h=l>>8&255,p=l&255,v=new Ve;return v.append(f),t>=2&&v.append(h),t>=3&&v.append(p),v.toString()},n})(),sM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),uM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ot=(function(){function n(e,t,r,i,a,s,l,f){l===void 0&&(l=0),f===void 0&&(f=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=l,this.rsBlockError=f}return n.lookup=function(e,t,r,i,a){var s,l;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var f=uM(cM),h=f.next();!h.done;h=f.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(v){s={error:v}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),lM=(function(n){sM(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ot),cM=[new ot(!1,3,5,8,8,1),new ot(!1,5,7,10,10,1),new ot(!0,5,7,16,6,1),new ot(!1,8,10,12,12,1),new ot(!0,10,11,14,6,2),new ot(!1,12,12,14,14,1),new ot(!0,16,14,24,10,1),new ot(!1,18,14,16,16,1),new ot(!1,22,18,18,18,1),new ot(!0,22,18,16,10,2),new ot(!1,30,20,20,20,1),new ot(!0,32,24,16,14,2),new ot(!1,36,24,22,22,1),new ot(!1,44,28,24,24,1),new ot(!0,49,28,22,14,2),new ot(!1,62,36,14,14,4),new ot(!1,86,42,16,16,4),new ot(!1,114,48,18,18,4),new ot(!1,144,56,20,20,4),new ot(!1,174,68,22,22,4),new ot(!1,204,84,24,24,4,102,42),new ot(!1,280,112,14,14,16,140,56),new ot(!1,368,144,16,16,16,92,36),new ot(!1,456,192,18,18,16,114,48),new ot(!1,576,224,20,20,16,144,56),new ot(!1,696,272,22,22,16,174,68),new ot(!1,816,336,24,24,16,136,56),new ot(!1,1050,408,18,18,36,175,68),new ot(!1,1304,496,20,20,36,163,62),new lM],fM=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(l){return l.charCodeAt(0)}),r=new Ve,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new Ve,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ot.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),hM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),dM=(function(n){hM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ln},e.prototype.encode=function(t){for(var r=new Ve;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var s=ri.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(pt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):ri.illegalCharacter($e.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(rM),t.getNewEncoding()<0&&t.signalEncoderChange(pt)},e})(Rm),pM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gM=(function(n){pM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Yn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Rm),ri=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=FA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new Rm,l=[new iM,s,new gM,new dM,new oM,new aM],f=new fM(e);f.setSymbolShape(t),f.setSizeConstraints(r,i),e.startsWith(UA)&&e.endsWith(jA)?(f.writeCodeword(Z7),f.setSkipAtEnd(2),f.pos+=UA.length):e.startsWith(zA)&&e.endsWith(jA)&&(f.writeCodeword(J7),f.setSkipAtEnd(2),f.pos+=zA.length);var h=pt;for(a&&(s.encodeMaximal(f),h=f.getNewEncoding(),f.resetEncoderSignal());f.hasMoreCharacters();)l[h].encode(f),f.getNewEncoding()>=0&&(h=f.getNewEncoding(),f.resetEncoderSignal());var p=f.getCodewordCount();f.updateSymbolInfo();var v=f.getSymbolInfo().getDataCapacity();p<v&&h!==pt&&h!==Vn&&h!==En&&f.writeCodeword("");var _=f.getCodewords();for(_.length()<v&&_.append(FA);_.length()<v;)_.append(this.randomize253State(_.length()+1));return f.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===ln&&i===ln){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return pt}else if(r===En&&i===En){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return pt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===pt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,s=new Uint8Array(6),l=[];;){if(t+a===e.length){hn.fill(s,0),hn.fill(l,0);var f=this.findMinimums(i,l,Ue.MAX_VALUE,s),h=this.getMinimumCount(s);if(l[pt]===f)return pt;if(h===1){if(s[Vn]>0)return Vn;if(s[En]>0)return En;if(s[Yn]>0)return Yn;if(s[ln]>0)return ln}return Nn}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[pt]+=.5:this.isExtendedASCII(p)?(i[pt]=Math.ceil(i[pt]),i[pt]+=2):(i[pt]=Math.ceil(i[pt]),i[pt]++),this.isNativeC40(p)?i[Nn]+=2/3:this.isExtendedASCII(p)?i[Nn]+=8/3:i[Nn]+=4/3,this.isNativeText(p)?i[Yn]+=2/3:this.isExtendedASCII(p)?i[Yn]+=8/3:i[Yn]+=4/3,this.isNativeX12(p)?i[ln]+=2/3:this.isExtendedASCII(p)?i[ln]+=13/3:i[ln]+=10/3,this.isNativeEDIFACT(p)?i[En]+=3/4:this.isExtendedASCII(p)?i[En]+=17/4:i[En]+=13/4,this.isSpecialB256(p)?i[Vn]+=4:i[Vn]++,a>=4){if(hn.fill(s,0),hn.fill(l,0),this.findMinimums(i,l,Ue.MAX_VALUE,s),l[pt]<this.min(l[Vn],l[Nn],l[Yn],l[ln],l[En]))return pt;if(l[Vn]<l[pt]||l[Vn]+1<this.min(l[Nn],l[Yn],l[ln],l[En]))return Vn;if(l[En]+1<this.min(l[Vn],l[Nn],l[Yn],l[ln],l[pt]))return En;if(l[Yn]+1<this.min(l[Vn],l[Nn],l[En],l[ln],l[pt]))return Yn;if(l[ln]+1<this.min(l[Vn],l[Nn],l[En],l[Yn],l[pt]))return ln;if(l[Nn]+1<this.min(l[pt],l[Vn],l[En],l[Yn])){if(l[Nn]<l[ln])return Nn;if(l[Nn]===l[ln]){for(var v=t+a+1;v<e.length;){var _=e.charCodeAt(v);if(this.isX12TermSep(_))return ln;if(!this.isNativeX12(_))break;v++}return Nn}}}}},n.min=function(e,t,r,i,a){var s=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?s:Math.min(s,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);r>s&&(r=s,hn.fill(i,0)),r===s&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ue.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),_g=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HA=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Ur.encode(e,this.charset)!=null}catch{return!1}},n})(),vM=(function(){function n(e,t,r){var i,a,s,l,f,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new HA(X7.forName(N))}),this.encoders=[];var p=[];p.push(new HA(K7.ISO_8859_1));for(var v=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var E=!1;try{for(var w=(i=void 0,_g(p)),S=w.next();!S.done;S=w.next()){var R=S.value,L=e.charAt(_),M=L.charCodeAt(0);if(M===r||R.canEncode(L)){E=!0;break}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}if(!E)try{for(var B=(s=void 0,_g(this.ENCODERS)),G=B.next();!G.done;G=B.next()){var R=G.value;if(R.canEncode(e.charAt(_))){p.push(R),E=!0;break}}}catch(N){s={error:N}}finally{try{G&&!G.done&&(l=B.return)&&l.call(B)}finally{if(s)throw s.error}}E||(v=!0)}if(p.length===1&&!v)this.encoders=[p[0]];else{this.encoders=[];var $=0;try{for(var J=_g(p),C=J.next();!C.done;C=J.next()){var R=C.value;this.encoders[$++]=R}}catch(N){f={error:N}}finally{try{C&&!C.done&&(h=J.return)&&h.call(J)}finally{if(f)throw f.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Ur.encode($e.getCharAt(e),this.encoders[t].name)},n})(),mM=3,yM=(function(){function n(e,t,r){this.fnc1=r;var i=new vM(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Ve,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,s){var l=e.charAt(i).charCodeAt(0),f=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(l===s||t.canEncode(l,t.getPriorityEncoderIndex()))&&(f=t.getPriorityEncoderIndex(),h=f+1);for(var p=f;p<h;p++)(l===s||t.canEncode(l,p))&&this.addEdge(r,i+1,new GA(l,t,p,a,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new GA[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var s=1;s<=i;s++){for(var l=0;l<t.length();l++)a[s][l]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][l],r);for(var l=0;l<t.length();l++)a[s-1][l]=null}for(var f=-1,h=Ue.MAX_VALUE,l=0;l<t.length();l++)if(a[i][l]!=null){var p=a[i][l];p.cachedTotalSize<h&&(h=p.cachedTotalSize,f=l)}if(f<0)throw new Error('Failed to encode "'+e+'"');for(var v=[],_=a[i][f];_!=null;){if(_.isFNC1())v.unshift(1e3);else for(var E=t.encode(_.c,_.encoderIndex),s=E.length-1;s>=0;s--)v.unshift(E[s]&255);var w=_.previous===null?0:_.previous.encoderIndex;w!==_.encoderIndex&&v.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],s=0;s<S.length;s++)S[s]=v[s];return S},n})(),GA=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,l=i===null?0:i.encoderIndex;l!==r&&(s+=mM),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),_M=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var qA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(qA||(qA={}));(function(n){_M(e,n);function e(t,r,i,a,s){var l=n.call(this,t,r,i)||this;return l.shape=a,l.macroId=s,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(yM);var EM=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),XA=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),xM=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),AM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Dm=(function(n){AM(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ue.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(xM),wM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TM=(function(n){wM(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Dm);function SM(n,e,t){return new TM(n,e,t)}function Oc(n,e,t){return new Dm(n,e,t)}var IM=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ao=0,y0=1,Vr=2,PS=3,Mi=4,CM=new Dm(null,0,0),Eg=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],bM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function RM(n){var e,t;try{for(var r=bM(n),i=r.next();!i.done;i=r.next()){var a=i.value;hn.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Ao][Mi]=0,n[y0][Mi]=0,n[y0][Ao]=28,n[PS][Mi]=0,n[Vr][Mi]=0,n[Vr][Ao]=15,n}var LS=RM(hn.createInt32Array(6,6)),DM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OM=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Eg[this.mode][e];i=Oc(i,a&65535,a>>16),r+=a>>16}var s=e===Vr?4:5;return i=Oc(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Vr?4:5;return r=Oc(r,LS[this.mode][e],i),r=Oc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Mi||this.mode===Vr){var a=Eg[r][Ao];t=Oc(t,a&65535,a>>16),i+=a>>16,r=Ao}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(t,r,this.binaryShiftByteCount+1,i+s);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=SM(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Eg[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new wn;try{for(var l=DM(i),f=l.next();!f.done;f=l.next()){var h=f.value;h.appendTo(s,e)}}catch(p){t={error:p}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return $e.format("%s bits=%d bytes=%d",IM[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(CM,Ao,0,0),n})();function NM(n){var e=$e.getCharCode(" "),t=$e.getCharCode("."),r=$e.getCharCode(",");n[Ao][e]=1;for(var i=$e.getCharCode("Z"),a=$e.getCharCode("A"),s=a;s<=i;s++)n[Ao][s]=s-a+2;n[y0][e]=1;for(var l=$e.getCharCode("z"),f=$e.getCharCode("a"),s=f;s<=l;s++)n[y0][s]=s-f+2;n[Vr][e]=1;for(var h=$e.getCharCode("9"),p=$e.getCharCode("0"),s=p;s<=h;s++)n[Vr][s]=s-p+2;n[Vr][r]=12,n[Vr][t]=13;for(var v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<v.length;_++)n[PS][$e.getCharCode(v[_])]=_;for(var E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<E.length;_++)$e.getCharCode(E[_])>0&&(n[Mi][$e.getCharCode(E[_])]=_);return n}var xg=NM(hn.createInt32Array(5,256)),Td=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MM=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=$e.getCharCode(" "),t=$e.getCharCode(`
`),r=XA.singletonList(OM.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case $e.getCharCode("\r"):a=s===t?2:0;break;case $e.getCharCode("."):a=s===e?3:0;break;case $e.getCharCode(","):a=s===e?4:0;break;case $e.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var l=XA.min(r,function(f,h){return f.getBitCount()-h.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var s=Td(e),l=s.next();!l.done;l=s.next()){var f=l.value;this.updateStateForChar(f,t,a)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=xg[e.getMode()][i]>0,s=null,l=0;l<=Mi;l++){var f=xg[l][i];if(f>0){if(s==null&&(s=e.endBinaryShift(t)),!a||l===e.getMode()||l===Vr){var h=s.latchAndAppend(l,f);r.push(h)}if(!a&&LS[e.getMode()][l]>=0){var p=s.shiftAndAppend(l,f);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||xg[e.getMode()][i]===0){var v=e.addBinaryShiftChar(t);r.push(v)}},n.updateStateListForPair=function(e,t,r){var i,a,s=[];try{for(var l=Td(e),f=l.next();!f.done;f=l.next()){var h=f.value;this.updateStateForPair(h,t,r,s)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Mi,r)),e.getMode()!==Mi&&i.push(a.shiftAndAppend(Mi,r)),r===3||r===4){var s=a.latchAndAppend(Vr,16-r).latchAndAppend(Vr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(l)}},n.simplifyStates=function(e){var t,r,i,a,s=[];try{for(var l=Td(e),f=l.next();!f.done;f=l.next()){var h=f.value,p=!0,v=function(R){if(R.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(R)&&(s=s.filter(function(L){return L!==R}))};try{for(var _=(i=void 0,Td(s)),E=_.next();!E.done;E=_.next()){var w=E.value,S=v(w);if(S==="break")break}}catch(R){i={error:R}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}p&&s.push(h)}}catch(R){t={error:R}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n})(),PM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new MM(e).encode(),a=Ue.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,l,f,h,p,v;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,f=Math.abs(r),f>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ce($e.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(f,l),p=n.WORD_SIZE[f];var _=h-h%p;if(v=n.stuffBits(i,p),v.getSize()+a>_)throw new Ce("Data to large for user specified layer");if(l&&v.getSize()>p*64)throw new Ce("Data to large for user specified layer")}else{p=0,v=null;for(var E=0;;E++){if(E>n.MAX_NB_BITS)throw new Ce("Data too large for an Aztec code");if(l=E<=3,f=l?E+1:E,h=n.totalBitsInLayer(f,l),!(s>h)){(v==null||p!==n.WORD_SIZE[f])&&(p=n.WORD_SIZE[f],v=n.stuffBits(i,p));var _=h-h%p;if(!(l&&v.getSize()>p*64)&&v.getSize()+a<=_)break}}}var w=n.generateCheckWords(v,h,p),S=v.getSize()/p,R=n.generateModeMessage(l,f,S),L=(l?11:14)+f*4,M=new Int32Array(L),B;if(l){B=L;for(var E=0;E<M.length;E++)M[E]=E}else{B=L+1+2*Ue.truncDivision(Ue.truncDivision(L,2)-1,15);for(var G=Ue.truncDivision(L,2),$=Ue.truncDivision(B,2),E=0;E<G;E++){var J=E+Ue.truncDivision(E,15);M[G-E-1]=$-J-1,M[G+E]=$+J+1}}for(var C=new Ui(B),E=0,b=0;E<f;E++){for(var N=(f-E)*4+(l?9:12),k=0;k<N;k++)for(var V=k*2,z=0;z<2;z++)w.get(b+V+z)&&C.set(M[E*2+z],M[E*2+k]),w.get(b+N*2+V+z)&&C.set(M[E*2+k],M[L-1-E*2-z]),w.get(b+N*4+V+z)&&C.set(M[L-1-E*2-z],M[L-1-E*2-k]),w.get(b+N*6+V+z)&&C.set(M[L-1-E*2-k],M[E*2+z]);b+=N*8}if(n.drawModeMessage(C,l,B,R),l)n.drawBullsEye(C,Ue.truncDivision(B,2),5);else{n.drawBullsEye(C,Ue.truncDivision(B,2),7);for(var E=0,k=0;E<Ue.truncDivision(L,2)-1;E+=15,k+=16)for(var z=Ue.truncDivision(B,2)&1;z<B;z+=2)C.set(Ue.truncDivision(B,2)-k,z),C.set(Ue.truncDivision(B,2)+k,z),C.set(z,Ue.truncDivision(B,2)-k),C.set(z,Ue.truncDivision(B,2)+k)}var P=new EM;return P.setCompact(l),P.setSize(B),P.setLayers(f),P.setCodeWords(S),P.setMatrix(C),P},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new wn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Ue.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var l=a-3+s;i.get(s)&&e.set(l,a-5),i.get(s+7)&&e.set(a+5,l),i.get(20-s)&&e.set(l,a+5),i.get(27-s)&&e.set(a-5,l)}else for(var s=0;s<10;s++){var l=a-5+s+Ue.truncDivision(s,5);i.get(s)&&e.set(l,a-7),i.get(s+10)&&e.set(a+7,l),i.get(29-s)&&e.set(l,a+7),i.get(39-s)&&e.set(a-7,l)}},n.generateCheckWords=function(e,t,r){var i,a,s=e.getSize()/r,l=new NS(n.getGF(r)),f=Ue.truncDivision(t,r),h=n.bitsToWords(e,r,f);l.encode(h,f-s);var p=t%r,v=new wn;v.appendBits(0,p);try{for(var _=PM(Array.from(h)),E=_.next();!E.done;E=_.next()){var w=E.value;v.appendBits(w,r)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return v},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var l=0,f=0;f<t;f++)l|=e.get(a*t+f)?1<<t-f-1:0;i[a]=l}return i},n.getGF=function(e){switch(e){case 4:return or.AZTEC_PARAM;case 6:return or.AZTEC_DATA_6;case 8:return or.AZTEC_DATA_8;case 10:return or.AZTEC_DATA_10;case 12:return or.AZTEC_DATA_12;default:throw new Ce("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new wn,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var l=0,f=0;f<t;f++)(s+f>=i||e.get(s+f))&&(l|=1<<t-1-f);(l&a)===a?(r.appendBits(l&a,t),s--):(l&a)===0?(r.appendBits(l|1,t),s--):r.appendBits(l,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var LM={audio:!1,video:{facingMode:"environment"}},kM=300,BM=function(n){var e=n===void 0?{}:n,t=e.timeBetweenDecodingAttempts,r=t===void 0?kM:t,i=e.hints;return ye.useMemo(function(){var a=new k7(i);return a.timeBetweenDecodingAttempts=r,a},[i,r])},KA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(p){try{h(r.next(p))}catch(v){s(v)}}function f(p){try{h(r.throw(p))}catch(v){s(v)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})},YA=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},VM=function(n){var e=n.resetStream,t=ye.useState(!1),r=t[0],i=t[1],a=ye.useState(null),s=a[0],l=a[1],f=ye.useRef(null),h=ye.useRef(e),p=ye.useCallback(function(E){f.current=E,l(typeof E.getCapabilities=="function"?E.getCapabilities().torch!==void 0:!1)},[]),v=ye.useCallback(function(){return KA(void 0,void 0,void 0,function(){return YA(this,function(E){switch(E.label){case 0:return!f.current||!s?[2]:[4,f.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return E.sent(),i(!0),[2]}})})},[s]),_=ye.useCallback(function(){return KA(void 0,void 0,void 0,function(){return YA(this,function(E){switch(E.label){case 0:return!f.current||!s?[2]:(f.current=null,l(null),i(!1),[4,h.current()]);case 1:return E.sent(),[2]}})})},[s]);return ye.useEffect(function(){h.current=e},[e]),{init:p,isOn:r,isAvailable:s,on:v,off:_}},FM=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},WA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(p){try{h(r.next(p))}catch(v){s(v)}}function f(p){try{h(r.throw(p))}catch(v){s(v)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})},QA=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},UM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},zM=function(n){n===void 0&&(n={});var e=n.paused,t=e===void 0?!1:e,r=n.hints,i=n.timeBetweenDecodingAttempts,a=n.onDecodeResult,s=a===void 0?function(){}:a,l=n.onDecodeError,f=l===void 0?function(){}:l,h=n.onError,p=h===void 0?function(){}:h,v="deviceId"in n?n.deviceId:void 0,_=ye.useState("constraints"in n?n.constraints:void 0),E=_[0],w=_[1],S=ye.useRef(s),R=ye.useRef(f),L=ye.useRef(p),M=ye.useRef(null),B=BM({hints:r,timeBetweenDecodingAttempts:i}),G=VM({resetStream:function(){return WA(void 0,void 0,void 0,function(){return QA(this,function(k){switch(k.label){case 0:return N(),[4,b()];case 1:return k.sent(),[2]}})})}}),$=G.init,J=UM(G,["init"]),C=ye.useCallback(function(k,V){k&&S.current(k),V&&R.current(V)},[]),b=ye.useCallback(function(){return WA(void 0,void 0,void 0,function(){var k,V,z;return QA(this,function(P){switch(P.label){case 0:if(!M.current)return[2];if(t)return[2];P.label=1;case 1:return P.trys.push([1,6,,7]),v?[4,B.decodeFromVideoDevice(v,M.current,C)]:[3,3];case 2:return P.sent(),[3,5];case 3:return[4,B.decodeFromConstraints(E??LM,M.current,C)];case 4:P.sent(),P.label=5;case 5:return[3,7];case 6:return k=P.sent(),L.current(k),[2];case 7:return M.current?(V=M.current.srcObject,z=V.getVideoTracks()[0],z&&$(z),[2]):[2]}})})},[B,v,E,t,C,$]),N=ye.useCallback(function(){B.reset()},[B]);return ye.useEffect(function(){S.current=s},[s]),ye.useEffect(function(){R.current=f},[f]),ye.useEffect(function(){L.current=p},[p]),ye.useEffect(function(){var k=FM(E,n.constraints);k||w(n.constraints)},[E,n]),ye.useEffect(function(){return b(),function(){N()}},[b,N]),{ref:M,torch:J}};const jM=({onResult:n,onClose:e})=>{const[t,r]=ye.useState(null),{ref:i}=zM({onDecodeResult(a){n(a.getText())},onError(a){a instanceof DOMException&&a.name==="NotAllowedError"&&r("Camera access denied. Please allow camera permissions.")}});return U.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:[U.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"400px",background:"#000",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:[U.jsx("button",{onClick:e,style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.5)",border:"none",color:"white",borderRadius:"50%",padding:"8px",cursor:"pointer",zIndex:10},children:U.jsx(nw,{size:24})}),U.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:"50%",border:"2px solid rgba(255, 255, 255, 0.6)",borderRadius:"12px",pointerEvents:"none",zIndex:5}}),t?U.jsxs("div",{style:{padding:"40px",color:"white",textAlign:"center"},children:[U.jsx(ZA,{size:48,style:{marginBottom:"16px",color:"#ff4444"}}),U.jsx("p",{children:t})]}):U.jsx("video",{ref:i,style:{width:"100%",display:"block"}})]}),U.jsx("p",{style:{color:"white",marginTop:"20px",textAlign:"center"},children:"Point your camera at a barcode to scan."})]})},HM=({onSubmit:n,onCancel:e})=>{const[t,r]=ye.useState(""),[i,a]=ye.useState([]),[s,l]=ye.useState(""),[f,h]=ye.useState(""),[p,v]=ye.useState(!1),[_,E]=ye.useState(!1),[w,S]=ye.useState({show:!1,msg:"",type:"success"}),R=(C,b="success")=>{S({show:!0,msg:C,type:b}),setTimeout(()=>S(N=>({...N,show:!1})),3e3)},L=C=>{h(C),v(!1),R("Barcode scanned successfully!")},M=C=>{const b=C.target.value;if(r(b),b.length>1){const N=Object.keys(zd).filter(k=>k.toLowerCase().includes(b.toLowerCase())).slice(0,5);a(N)}else a([])},B=C=>{r(C),a([]);const b=zd[C];b&&l(b)},G=async C=>{C.preventDefault(),E(!0);try{n({name:t,category:s,location:"kichen",quantity:1,stockLevel:"full",value:0,barcode:f})}catch(b){console.error("Error preparing submission:",b),R("Error saving item","error"),E(!1)}},$={display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},J={fontWeight:600,fontSize:"0.875rem"};return U.jsxs("div",{className:"animate-slide-up",children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[U.jsx("h2",{className:"text-title",style:{margin:0},children:"Add New Item"}),U.jsxs(ai,{variant:"secondary",onClick:()=>v(!0),children:[U.jsx(lE,{size:18}),U.jsx("span",{style:{marginLeft:"8px"},children:"Scan Barcode"})]})]}),p&&U.jsx(jM,{onResult:L,onClose:()=>v(!1)}),U.jsx(Pf,{children:U.jsxs("form",{onSubmit:G,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[U.jsxs("div",{style:$,children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[U.jsx("label",{style:J,children:"Item Name"}),f&&U.jsxs("span",{style:{fontSize:"0.75rem",color:"hsl(var(--color-primary))",display:"flex",alignItems:"center",gap:"4px"},children:[U.jsx(lE,{size:12})," ",f]})]}),U.jsxs("div",{style:{position:"relative"},children:[U.jsx("input",{required:!0,type:"text",value:t,onChange:M,className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"e.g. Milk, Bread, Eggs...",autoFocus:!0,onBlur:()=>setTimeout(()=>a([]),200)}),i.length>0&&U.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:50,background:"var(--bg-card)",borderRadius:"0 0 var(--radius-md) var(--radius-md)",boxShadow:"var(--shadow-lg)",border:"1px solid var(--glass-border)",marginTop:"4px",padding:"4px 0",listStyle:"none"},children:i.map(C=>U.jsx("li",{onClick:()=>B(C),className:"hover-lift",style:{padding:"8px 12px",cursor:"pointer",fontSize:"0.9rem",textTransform:"capitalize",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:U.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[U.jsx("span",{children:C}),U.jsx("span",{style:{fontSize:"0.8rem",opacity:.6,fontStyle:"italic"},children:zd[C]})]})},C))})]})]}),U.jsxs("div",{style:$,children:[U.jsx("label",{style:J,children:"Category (Optional - Auto-detected)"}),U.jsxs("select",{value:s,onChange:C=>l(C.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:[U.jsx("option",{value:"",children:"Auto-Detect"}),rv.map(C=>U.jsx("option",{value:C,children:C},C))]})]}),U.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px",justifyContent:"flex-end"},children:[U.jsx(ai,{type:"button",variant:"ghost",onClick:e,style:{color:"var(--text-muted)"},children:"Cancel"}),U.jsx(ai,{type:"submit",disabled:_,children:_?U.jsx(_v,{className:"animate-spin",size:18}):"Add to Pantry"})]})]})}),U.jsx(Am,{message:w.msg,type:w.type,isVisible:w.show,onClose:()=>S({...w,show:!1})})]})},GM=()=>{const{todos:n,addTodo:e,toggleTodo:t,deleteTodo:r}=xS(),{addItem:i}=xm(),[a,s]=ye.useState(""),[l,f]=ye.useState(1),[h,p]=ye.useState(rv[0]),v=w=>{w?.preventDefault(),a.trim()&&(e(a,l,h),s(""),f(1))},_=w=>{confirm(`Move "${w.text}" to your inventory?`)&&(i({name:w.text,category:w.category,quantity:w.quantity,location:"Kitchen",stockLevel:"full",value:0}),r(w.id))},E=n.reduce((w,S)=>(w[S.category]||(w[S.category]=[]),w[S.category].push(S),w),{});return U.jsxs("div",{className:"animate-slide-up",children:[U.jsx("h2",{className:"text-title",children:"Shopping List"}),U.jsx(Pf,{className:"mb-6",children:U.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[U.jsxs("div",{style:{display:"flex",gap:"12px"},children:[U.jsx("input",{type:"number",min:"1",value:l,onChange:w=>f(parseInt(w.target.value)||1),className:"glass-panel",style:{width:"60px",padding:"12px",background:"rgba(255,255,255,0.5)",outline:"none",textAlign:"center"},placeholder:"Qty"}),U.jsx("input",{type:"text",value:a,onChange:w=>s(w.target.value),placeholder:"What do you need?",className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.5)",outline:"none"}})]}),U.jsxs("div",{style:{display:"flex",gap:"12px"},children:[U.jsx("select",{value:h,onChange:w=>p(w.target.value),className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.5)",outline:"none",cursor:"pointer"},children:rv.map(w=>U.jsx("option",{value:w,children:w},w))}),U.jsx(ai,{type:"submit",disabled:!a.trim(),style:{width:"60px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:U.jsx(tw,{size:24})})]})]})}),U.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[n.length===0&&U.jsx("div",{style:{textAlign:"center",padding:"40px",opacity:.5},children:U.jsx("p",{children:"Your shopping list is empty."})}),Object.entries(E).map(([w,S])=>U.jsxs("div",{className:"animate-fade-in",children:[U.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"hsl(var(--color-primary))",marginBottom:"8px",marginLeft:"4px",textTransform:"uppercase",letterSpacing:"0.05em"},children:w}),U.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:S.map((R,L)=>U.jsxs("div",{className:"glass-panel list-item-enter tap-scale",style:{display:"flex",alignItems:"center",padding:"12px 16px",gap:"12px",transition:"all 0.2s",opacity:0,animationDelay:`${L*50}ms`,background:R.completed?"rgba(0,0,0,0.02)":"var(--glass-bg)"},children:[U.jsx("button",{onClick:()=>t(R.id),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:R.completed?"hsl(var(--color-primary))":"var(--text-muted)"},children:R.completed?U.jsx(JA,{size:22,fill:"currentColor",className:"text-primary"}):U.jsx(kC,{size:22})}),U.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[U.jsx("span",{style:{fontSize:"1rem",textDecoration:R.completed?"line-through":"none",fontWeight:500},children:R.text}),R.quantity>1&&U.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["Qty: ",R.quantity]})]}),R.completed&&U.jsx("button",{onClick:()=>_(R),style:{background:"none",border:"none",cursor:"pointer",color:"hsl(var(--color-primary))",padding:"4px",marginRight:"4px"},title:"Move to Inventory",children:U.jsx(DC,{size:18})}),U.jsx("button",{onClick:()=>r(R.id),style:{background:"none",border:"none",opacity:.3,cursor:"pointer",color:"#ef4444",padding:"4px"},className:"hover:opacity-100",children:U.jsx(s4,{size:18})})]},R.id))})]},w))]})]})},qM=()=>{const[n,e]=ye.useState(null),[t,r]=ye.useState(!1);return ye.useEffect(()=>{const a=s=>{s.preventDefault(),e(s),r(!0)};return window.addEventListener("beforeinstallprompt",a),()=>{window.removeEventListener("beforeinstallprompt",a)}},[]),{isInstallable:t,promptToInstall:async()=>{if(!n)return;await n.prompt();const{outcome:a}=await n.userChoice;console.log(a==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null),r(!1)}}},XM=()=>{const[n,e]=ye.useState(!0),[t,r]=ye.useState(!1),[i,a]=ye.useState(""),[s,l]=ye.useState(""),[f,h]=ye.useState(!1),[p,v]=ye.useState(!1),[_,E]=ye.useState({msg:"",type:"info",show:!1}),w=(M,B)=>{E({msg:M,type:B,show:!0})},S=async M=>{M.preventDefault(),v(!0);try{n?await DO(ys,i,s):await RO(ys,i,s)}catch(B){console.error(B);let G="Authentication failed";B.code==="auth/invalid-credential"&&(G="Invalid email or password."),B.code==="auth/email-already-in-use"&&(G="Email already in use."),B.code==="auth/weak-password"&&(G="Password should be at least 6 characters."),B.code==="auth/operation-not-allowed"&&(G="Enable Email/Password in Firebase Console!"),w(G,"error"),v(!1)}},R=async()=>{v(!0);try{await TO(ys)}catch(M){console.error(M),w("Failed to sign in anonymously.","error"),v(!1)}},L=async M=>{if(M.preventDefault(),!i){w("Please enter your email address.","info");return}v(!0);try{await bO(ys,i),w("Password reset email sent! Check your inbox.","success"),r(!1)}catch(B){console.error(B);let G="Failed to send reset email.";B.code==="auth/user-not-found"&&(G="No account found with this email."),B.code==="auth/invalid-email"&&(G="Invalid email address."),w(G,"error")}finally{v(!1)}};return U.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",background:"radial-gradient(circle at 50% 10%, rgba(37, 99, 235, 0.1) 0%, transparent 50%)"},children:[U.jsxs("div",{className:"animate-fade-in",style:{width:"100%",maxWidth:"400px"},children:[U.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[U.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:800,marginBottom:"8px",background:"linear-gradient(135deg, hsl(var(--color-primary)) 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Bitlkhzin"}),U.jsx("p",{className:"text-muted",children:"Your smart inventory companion."})]}),U.jsx(Pf,{children:U.jsxs("form",{onSubmit:t?L:S,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[U.jsx("h2",{className:"text-title",style:{fontSize:"1.5rem",textAlign:"center"},children:t?"Reset Password":n?"Welcome Back":"Create Account"}),U.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[U.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem",marginBottom:"8px"},children:"Email"}),U.jsx("input",{type:"email",required:!0,value:i,onChange:M=>a(M.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"you@example.com"})]}),!t&&U.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[U.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem"},children:"Password"}),n&&U.jsx("button",{type:"button",onClick:()=>r(!0),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontSize:"0.75rem",cursor:"pointer",fontWeight:500},children:"Forgot Password?"})]}),U.jsxs("div",{style:{position:"relative"},children:[U.jsx("input",{type:f?"text":"password",required:!0,minLength:6,value:s,onChange:M=>l(M.target.value),className:"glass-panel",style:{padding:"12px",paddingRight:"40px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:""}),U.jsx("button",{type:"button",onClick:()=>h(!f),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-light)",opacity:.6,display:"flex",alignItems:"center"},children:f?U.jsx(UC,{size:18}):U.jsx(jC,{size:18})})]})]}),U.jsxs(ai,{type:"submit",style:{marginTop:"8px",display:"flex",justifyContent:"center",gap:"8px"},disabled:p,children:[p?U.jsx(_v,{className:"animate-spin"}):t?U.jsx(QC,{size:18}):n?U.jsx(KC,{size:18}):U.jsx(l4,{size:18}),t?"Send Reset Link":n?"Sign In":"Create Account"]}),U.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:U.jsx("p",{className:"text-muted",style:{fontSize:"0.9rem"},children:t?U.jsx("button",{type:"button",onClick:()=>r(!1),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer"},children:"Back to Login"}):U.jsxs(U.Fragment,{children:[n?"Don't have an account? ":"Already have an account? ",U.jsx("button",{type:"button",onClick:()=>{e(!n),a(""),l("")},style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer",textDecoration:"underline"},children:n?"Sign Up":"Log In"})]})})}),!t&&U.jsxs(U.Fragment,{children:[U.jsxs("div",{style:{position:"relative",margin:"20px 0",textAlign:"center"},children:[U.jsx("hr",{style:{borderColor:"var(--glass-border)",opacity:.5}}),U.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--color-surface-light)",padding:"0 10px",fontSize:"0.8rem",color:"var(--color-text-light)",opacity:.6},children:"OR"})]}),U.jsx(ai,{type:"button",variant:"secondary",onClick:R,disabled:p,style:{width:"100%"},children:"Continue as Guest"})]})]})})]}),U.jsx(Am,{message:_.msg,type:_.type,isVisible:_.show,onClose:()=>E({..._,show:!1})})]})};function KM(){const[n,e]=ye.useState("inventory"),[t,r]=ye.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{items:i,addItem:a,deleteItem:s}=xm(),{isInstallable:l,promptToInstall:f}=qM(),{user:h,loading:p}=Em();if(ye.useEffect(()=>{const _=document.querySelector('meta[name="theme-color"]');t?(document.documentElement.classList.add("dark"),_&&_.setAttribute("content","#14171f")):(document.documentElement.classList.remove("dark"),_&&_.setAttribute("content","#f9fafb"))},[t]),p)return U.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:U.jsx(_v,{className:"animate-spin",size:48,color:"hsl(var(--color-primary))"})});if(!h)return U.jsx(XM,{});const v=()=>{switch(n){case"add":return U.jsx(HM,{onSubmit:_=>{a(_),e("inventory")},onCancel:()=>e("inventory")});case"settings":return U.jsxs("div",{className:"animate-fade-in",children:[U.jsx("h2",{className:"text-title",children:"Settings"}),U.jsxs(Pf,{children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[U.jsx("h3",{style:{margin:0},children:"Appearance"}),U.jsxs(ai,{variant:"secondary",onClick:()=>r(!t),style:{display:"flex",alignItems:"center",gap:"8px"},children:[t?U.jsx(a4,{size:18}):U.jsx(ZC,{size:18}),t?"Light Mode":"Dark Mode"]})]}),U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs("div",{style:{opacity:.6},children:[U.jsx("p",{children:"App Version: 1.1.0"}),U.jsxs("p",{children:["Account: ",h.email]}),U.jsx("p",{children:"Sync Status: Cloud (Firebase)"})]}),U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs(ai,{variant:"secondary",onClick:()=>ys.signOut(),style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px",color:"#f87171",borderColor:"rgba(248, 113, 113, 0.3)"},children:[U.jsx(ew,{size:18}),"Log Out"]}),l&&U.jsxs(U.Fragment,{children:[U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs(ai,{onClick:f,style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px"},children:[U.jsx(VC,{size:18}),"Install App"]})]})]})]});case"todo":return U.jsx(GM,{});default:return U.jsx("div",{className:"animate-fade-in",children:U.jsx(W5,{items:i,onAddItem:()=>e("add"),onDeleteItem:s})})}};return U.jsx(K5,{currentView:n,onNavigate:_=>e(_),children:v()})}wC.createRoot(document.getElementById("root")).render(U.jsx(ye.StrictMode,{children:U.jsx(Y5,{children:U.jsx(KM,{})})}));
