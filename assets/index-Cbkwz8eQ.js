(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function gC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wp={exports:{}},wc={};var Z2;function vC(){if(Z2)return wc;Z2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var u=null;if(a!==void 0&&(u=""+a),i.key!==void 0&&(u=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:u,ref:i!==void 0?i:null,props:a}}return wc.Fragment=e,wc.jsx=t,wc.jsxs=t,wc}var J2;function mC(){return J2||(J2=1,Wp.exports=vC()),Wp.exports}var U=mC(),Qp={exports:{}},Me={};var ex;function yC(){if(ex)return Me;ex=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=_&&H[_]||H["@@iterator"],typeof H=="function"?H:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,R={};function L(H,ue,ge){this.props=H,this.context=ue,this.refs=R,this.updater=ge||A}L.prototype.isReactComponent={},L.prototype.setState=function(H,ue){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ue,"setState")},L.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function M(){}M.prototype=L.prototype;function B(H,ue,ge){this.props=H,this.context=ue,this.refs=R,this.updater=ge||A}var G=B.prototype=new M;G.constructor=B,S(G,L.prototype),G.isPureReactComponent=!0;var $=Array.isArray;function J(){}var C={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(H,ue,ge){var ve=ge.ref;return{$$typeof:n,type:H,key:ue,ref:ve!==void 0?ve:null,props:ge}}function k(H,ue){return N(H.type,ue,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function z(H){var ue={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ge){return ue[ge]})}var P=/\/+/g;function ze(H,ue){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):ue.toString(36)}function yt(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(J,J):(H.status="pending",H.then(function(ue){H.status==="pending"&&(H.status="fulfilled",H.value=ue)},function(ue){H.status==="pending"&&(H.status="rejected",H.reason=ue)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ne(H,ue,ge,ve,De){var ke=typeof H;(ke==="undefined"||ke==="boolean")&&(H=null);var We=!1;if(H===null)We=!0;else switch(ke){case"bigint":case"string":case"number":We=!0;break;case"object":switch(H.$$typeof){case n:case e:We=!0;break;case p:return We=H._init,ne(We(H._payload),ue,ge,ve,De)}}if(We)return De=De(H),We=ve===""?"."+ze(H,0):ve,$(De)?(ge="",We!=null&&(ge=We.replace(P,"$&/")+"/"),ne(De,ue,ge,"",function(Do){return Do})):De!=null&&(V(De)&&(De=k(De,ge+(De.key==null||H&&H.key===De.key?"":(""+De.key).replace(P,"$&/")+"/")+We)),ue.push(De)),1;We=0;var an=ve===""?".":ve+":";if($(H))for(var Dt=0;Dt<H.length;Dt++)ve=H[Dt],ke=an+ze(ve,Dt),We+=ne(ve,ue,ge,ke,De);else if(Dt=x(H),typeof Dt=="function")for(H=Dt.call(H),Dt=0;!(ve=H.next()).done;)ve=ve.value,ke=an+ze(ve,Dt++),We+=ne(ve,ue,ge,ke,De);else if(ke==="object"){if(typeof H.then=="function")return ne(yt(H),ue,ge,ve,De);throw ue=String(H),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return We}function he(H,ue,ge){if(H==null)return H;var ve=[],De=0;return ne(H,ve,"","",function(ke){return ue.call(ge,ke,De++)}),ve}function we(H){if(H._status===-1){var ue=H._result;ue=ue(),ue.then(function(ge){(H._status===0||H._status===-1)&&(H._status=1,H._result=ge)},function(ge){(H._status===0||H._status===-1)&&(H._status=2,H._result=ge)}),H._status===-1&&(H._status=0,H._result=ue)}if(H._status===1)return H._result.default;throw H._result}var Ze=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},lt={map:he,forEach:function(H,ue,ge){he(H,function(){ue.apply(this,arguments)},ge)},count:function(H){var ue=0;return he(H,function(){ue++}),ue},toArray:function(H){return he(H,function(ue){return ue})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Me.Activity=v,Me.Children=lt,Me.Component=L,Me.Fragment=t,Me.Profiler=i,Me.PureComponent=B,Me.StrictMode=r,Me.Suspense=f,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Me.__COMPILER_RUNTIME={__proto__:null,c:function(H){return C.H.useMemoCache(H)}},Me.cache=function(H){return function(){return H.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(H,ue,ge){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ve=S({},H.props),De=H.key;if(ue!=null)for(ke in ue.key!==void 0&&(De=""+ue.key),ue)!b.call(ue,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&ue.ref===void 0||(ve[ke]=ue[ke]);var ke=arguments.length-2;if(ke===1)ve.children=ge;else if(1<ke){for(var We=Array(ke),an=0;an<ke;an++)We[an]=arguments[an+2];ve.children=We}return N(H.type,De,ve)},Me.createContext=function(H){return H={$$typeof:u,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},Me.createElement=function(H,ue,ge){var ve,De={},ke=null;if(ue!=null)for(ve in ue.key!==void 0&&(ke=""+ue.key),ue)b.call(ue,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(De[ve]=ue[ve]);var We=arguments.length-2;if(We===1)De.children=ge;else if(1<We){for(var an=Array(We),Dt=0;Dt<We;Dt++)an[Dt]=arguments[Dt+2];De.children=an}if(H&&H.defaultProps)for(ve in We=H.defaultProps,We)De[ve]===void 0&&(De[ve]=We[ve]);return N(H,ke,De)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(H){return{$$typeof:l,render:H}},Me.isValidElement=V,Me.lazy=function(H){return{$$typeof:p,_payload:{_status:-1,_result:H},_init:we}},Me.memo=function(H,ue){return{$$typeof:h,type:H,compare:ue===void 0?null:ue}},Me.startTransition=function(H){var ue=C.T,ge={};C.T=ge;try{var ve=H(),De=C.S;De!==null&&De(ge,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(J,Ze)}catch(ke){Ze(ke)}finally{ue!==null&&ge.types!==null&&(ue.types=ge.types),C.T=ue}},Me.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Me.use=function(H){return C.H.use(H)},Me.useActionState=function(H,ue,ge){return C.H.useActionState(H,ue,ge)},Me.useCallback=function(H,ue){return C.H.useCallback(H,ue)},Me.useContext=function(H){return C.H.useContext(H)},Me.useDebugValue=function(){},Me.useDeferredValue=function(H,ue){return C.H.useDeferredValue(H,ue)},Me.useEffect=function(H,ue){return C.H.useEffect(H,ue)},Me.useEffectEvent=function(H){return C.H.useEffectEvent(H)},Me.useId=function(){return C.H.useId()},Me.useImperativeHandle=function(H,ue,ge){return C.H.useImperativeHandle(H,ue,ge)},Me.useInsertionEffect=function(H,ue){return C.H.useInsertionEffect(H,ue)},Me.useLayoutEffect=function(H,ue){return C.H.useLayoutEffect(H,ue)},Me.useMemo=function(H,ue){return C.H.useMemo(H,ue)},Me.useOptimistic=function(H,ue){return C.H.useOptimistic(H,ue)},Me.useReducer=function(H,ue,ge){return C.H.useReducer(H,ue,ge)},Me.useRef=function(H){return C.H.useRef(H)},Me.useState=function(H){return C.H.useState(H)},Me.useSyncExternalStore=function(H,ue,ge){return C.H.useSyncExternalStore(H,ue,ge)},Me.useTransition=function(){return C.H.useTransition()},Me.version="19.2.3",Me}var tx;function xv(){return tx||(tx=1,Qp.exports=yC()),Qp.exports}var ye=xv();const _C=gC(ye);var $p={exports:{}},Tc={},Zp={exports:{}},Jp={};var nx;function xC(){return nx||(nx=1,(function(n){function e(ne,he){var we=ne.length;ne.push(he);e:for(;0<we;){var Ze=we-1>>>1,lt=ne[Ze];if(0<i(lt,he))ne[Ze]=he,ne[we]=lt,we=Ze;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var he=ne[0],we=ne.pop();if(we!==he){ne[0]=we;e:for(var Ze=0,lt=ne.length,H=lt>>>1;Ze<H;){var ue=2*(Ze+1)-1,ge=ne[ue],ve=ue+1,De=ne[ve];if(0>i(ge,we))ve<lt&&0>i(De,ge)?(ne[Ze]=De,ne[ve]=we,Ze=ve):(ne[Ze]=ge,ne[ue]=we,Ze=ue);else if(ve<lt&&0>i(De,we))ne[Ze]=De,ne[ve]=we,Ze=ve;else break e}}return he}function i(ne,he){var we=ne.sortIndex-he.sortIndex;return we!==0?we:ne.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,l=u.now();n.unstable_now=function(){return u.now()-l}}var f=[],h=[],p=1,v=null,_=3,x=!1,A=!1,S=!1,R=!1,L=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function G(ne){for(var he=t(h);he!==null;){if(he.callback===null)r(h);else if(he.startTime<=ne)r(h),he.sortIndex=he.expirationTime,e(f,he);else break;he=t(h)}}function $(ne){if(S=!1,G(ne),!A)if(t(f)!==null)A=!0,J||(J=!0,z());else{var he=t(h);he!==null&&yt($,he.startTime-ne)}}var J=!1,C=-1,b=5,N=-1;function k(){return R?!0:!(n.unstable_now()-N<b)}function V(){if(R=!1,J){var ne=n.unstable_now();N=ne;var he=!0;try{e:{A=!1,S&&(S=!1,M(C),C=-1),x=!0;var we=_;try{t:{for(G(ne),v=t(f);v!==null&&!(v.expirationTime>ne&&k());){var Ze=v.callback;if(typeof Ze=="function"){v.callback=null,_=v.priorityLevel;var lt=Ze(v.expirationTime<=ne);if(ne=n.unstable_now(),typeof lt=="function"){v.callback=lt,G(ne),he=!0;break t}v===t(f)&&r(f),G(ne)}else r(f);v=t(f)}if(v!==null)he=!0;else{var H=t(h);H!==null&&yt($,H.startTime-ne),he=!1}}break e}finally{v=null,_=we,x=!1}he=void 0}}finally{he?z():J=!1}}}var z;if(typeof B=="function")z=function(){B(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,ze=P.port2;P.port1.onmessage=V,z=function(){ze.postMessage(null)}}else z=function(){L(V,0)};function yt(ne,he){C=L(function(){ne(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(ne){switch(_){case 1:case 2:case 3:var he=3;break;default:he=_}var we=_;_=he;try{return ne()}finally{_=we}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(ne,he){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=_;_=ne;try{return he()}finally{_=we}},n.unstable_scheduleCallback=function(ne,he,we){var Ze=n.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ze+we:Ze):we=Ze,ne){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=we+lt,ne={id:p++,callback:he,priorityLevel:ne,startTime:we,expirationTime:lt,sortIndex:-1},we>Ze?(ne.sortIndex=we,e(h,ne),t(f)===null&&ne===t(h)&&(S?(M(C),C=-1):S=!0,yt($,we-Ze))):(ne.sortIndex=lt,e(f,ne),A||x||(A=!0,J||(J=!0,z()))),ne},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(ne){var he=_;return function(){var we=_;_=he;try{return ne.apply(this,arguments)}finally{_=we}}}})(Jp)),Jp}var rx;function EC(){return rx||(rx=1,Zp.exports=xC()),Zp.exports}var eg={exports:{}},kn={};var ix;function AC(){if(ix)return kn;ix=1;var n=xv();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:f,containerInfo:h,implementation:p}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,p)},kn.flushSync=function(f){var h=u.T,p=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=h,r.p=p,r.d.f()}},kn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},kn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},kn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,v=l(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:v,integrity:_,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},kn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},kn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=l(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},kn.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=l(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},kn.requestFormReset=function(f){r.d.r(f)},kn.unstable_batchedUpdates=function(f,h){return f(h)},kn.useFormState=function(f,h,p){return u.H.useFormState(f,h,p)},kn.useFormStatus=function(){return u.H.useHostTransitionStatus()},kn.version="19.2.3",kn}var ax;function wC(){if(ax)return eg.exports;ax=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=AC(),eg.exports}var ox;function TC(){if(ox)return Tc;ox=1;var n=EC(),e=xv(),t=wC();function r(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,c=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(c=s.return),o=s.return;while(o)}return s.tag===3?c:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function l(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function f(o){if(a(o)!==o)throw Error(r(188))}function h(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(r(188));return s!==o?null:o}for(var c=o,d=s;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return f(m),o;if(y===d)return f(m),s;y=y.sibling}throw Error(r(188))}if(c.return!==d.return)c=m,d=y;else{for(var w=!1,I=m.child;I;){if(I===c){w=!0,c=m,d=y;break}if(I===d){w=!0,d=m,c=y;break}I=I.sibling}if(!w){for(I=y.child;I;){if(I===c){w=!0,c=y,d=m;break}if(I===d){w=!0,d=y,c=m;break}I=I.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?o:s}function p(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=p(o),s!==null)return s;o=o.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),B=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var P=Symbol.for("react.client.reference");function ze(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===P?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case L:return"Profiler";case R:return"StrictMode";case $:return"Suspense";case J:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case B:return o.displayName||"Context";case M:return(o._context.displayName||"Context")+".Consumer";case G:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case C:return s=o.displayName||null,s!==null?s:ze(o.type)||"Memo";case b:s=o._payload,o=o._init;try{return ze(o(s))}catch{}}return null}var yt=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ze=[],lt=-1;function H(o){return{current:o}}function ue(o){0>lt||(o.current=Ze[lt],Ze[lt]=null,lt--)}function ge(o,s){lt++,Ze[lt]=o.current,o.current=s}var ve=H(null),De=H(null),ke=H(null),We=H(null);function an(o,s){switch(ge(ke,s),ge(De,o),ge(ve,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?E2(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=E2(s),o=A2(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ue(ve),ge(ve,o)}function Dt(){ue(ve),ue(De),ue(ke)}function Do(o){o.memoizedState!==null&&ge(We,o);var s=ve.current,c=A2(s,o.type);s!==c&&(ge(De,o),ge(ve,c))}function Us(o){De.current===o&&(ue(ve),ue(De)),We.current===o&&(ue(We),_c._currentValue=we)}var zs,js;function li(o){if(zs===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);zs=s&&s[1]||"",js=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zs+o+js}var _l=!1;function Oo(o,s){if(!o||_l)return"";_l=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(te){var Z=te}Reflect.construct(o,[],se)}else{try{se.call()}catch(te){Z=te}o.call(se.prototype)}}else{try{throw Error()}catch(te){Z=te}(se=o())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),w=y[0],I=y[1];if(w&&I){var F=w.split(`
`),Q=I.split(`
`);for(m=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;m<Q.length&&!Q[m].includes("DetermineComponentFrameRoot");)m++;if(d===F.length||m===Q.length)for(d=F.length-1,m=Q.length-1;1<=d&&0<=m&&F[d]!==Q[m];)m--;for(;1<=d&&0<=m;d--,m--)if(F[d]!==Q[m]){if(d!==1||m!==1)do if(d--,m--,0>m||F[d]!==Q[m]){var ie=`
`+F[d].replace(" at new "," at ");return o.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",o.displayName)),ie}while(1<=d&&0<=m);break}}}finally{_l=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?li(c):""}function xl(o,s){switch(o.tag){case 26:case 27:case 5:return li(o.type);case 16:return li("Lazy");case 13:return o.child!==s&&s!==null?li("Suspense Fallback"):li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return Oo(o.type,!1);case 11:return Oo(o.type.render,!1);case 1:return Oo(o.type,!0);case 31:return li("Activity");default:return""}}function El(o){try{var s="",c=null;do s+=xl(o,c),c=o,o=o.return;while(o);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Xt=Object.prototype.hasOwnProperty,on=n.unstable_scheduleCallback,Ea=n.unstable_cancelCallback,$0=n.unstable_shouldYield,kf=n.unstable_requestPaint,Gn=n.unstable_now,No=n.unstable_getCurrentPriorityLevel,Al=n.unstable_ImmediatePriority,wl=n.unstable_UserBlockingPriority,Aa=n.unstable_NormalPriority,Z0=n.unstable_LowPriority,Bf=n.unstable_IdlePriority,Vf=n.log,Ff=n.unstable_setDisableYieldValue,Hr=null,Sn=null;function Ar(o){if(typeof Vf=="function"&&Ff(o),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(Hr,o)}catch{}}var zt=Math.clz32?Math.clz32:zf,Uf=Math.log,Hs=Math.LN2;function zf(o){return o>>>=0,o===0?32:31-(Uf(o)/Hs|0)|0}var ci=256,Mo=262144,Kt=4194304;function fi(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function hi(o,s,c){var d=o.pendingLanes;if(d===0)return 0;var m=0,y=o.suspendedLanes,w=o.pingedLanes;o=o.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?m=fi(d):(w&=I,w!==0?m=fi(w):c||(c=I&~o,c!==0&&(m=fi(c))))):(I=d&~y,I!==0?m=fi(I):w!==0?m=fi(w):c||(c=d&~o,c!==0&&(m=fi(c)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,c=s&-s,y>=c||y===32&&(c&4194048)!==0)?s:m}function Gr(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function J0(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(){var o=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),o}function di(o){for(var s=[],c=0;31>c;c++)s.push(o);return s}function Po(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function e1(o,s,c,d,m,y){var w=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var I=o.entanglements,F=o.expirationTimes,Q=o.hiddenUpdates;for(c=w&~c;0<c;){var ie=31-zt(c),se=1<<ie;I[ie]=0,F[ie]=-1;var Z=Q[ie];if(Z!==null)for(Q[ie]=null,ie=0;ie<Z.length;ie++){var te=Z[ie];te!==null&&(te.lane&=-536870913)}c&=~se}d!==0&&Lo(o,d,0),y!==0&&m===0&&o.tag!==0&&(o.suspendedLanes|=y&~(w&~s))}function Lo(o,s,c){o.pendingLanes|=s,o.suspendedLanes&=~s;var d=31-zt(s);o.entangledLanes|=s,o.entanglements[d]=o.entanglements[d]|1073741824|c&261930}function Tl(o,s){var c=o.entangledLanes|=s;for(o=o.entanglements;c;){var d=31-zt(c),m=1<<d;m&s|o[d]&s&&(o[d]|=s),c&=~m}}function Sl(o,s){var c=s&-s;return c=(c&42)!==0?1:ko(c),(c&(o.suspendedLanes|s))!==0?0:c}function ko(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ji(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Hf(){var o=he.p;return o!==0?o:(o=window.event,o===void 0?32:q2(o.type))}function qr(o,s){var c=he.p;try{return he.p=o,s()}finally{he.p=c}}var Xr=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Xr,vn="__reactProps$"+Xr,pi="__reactContainer$"+Xr,Gs="__reactEvents$"+Xr,t1="__reactListeners$"+Xr,Gf="__reactHandles$"+Xr,qf="__reactResources$"+Xr,gi="__reactMarker$"+Xr;function qs(o){delete o[Yt],delete o[vn],delete o[Gs],delete o[t1],delete o[Gf]}function vi(o){var s=o[Yt];if(s)return s;for(var c=o.parentNode;c;){if(s=c[pi]||c[Yt]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(o=R2(o);o!==null;){if(c=o[Yt])return c;o=R2(o)}return s}o=c,c=o.parentNode}return null}function wr(o){if(o=o[Yt]||o[pi]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function lr(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(r(33))}function mi(o){var s=o[qf];return s||(s=o[qf]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Wt(o){o[gi]=!0}var Il=new Set,Cl={};function yi(o,s){_i(o,s),_i(o+"Capture",s)}function _i(o,s){for(Cl[o]=s,o=0;o<s.length;o++)Il.add(s[o])}var bl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rl={},Dl={};function Xf(o){return Xt.call(Dl,o)?!0:Xt.call(Rl,o)?!1:bl.test(o)?Dl[o]=!0:(Rl[o]=!0,!1)}function Xs(o,s,c){if(Xf(s))if(c===null)o.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+c)}}function cr(o,s,c){if(c===null)o.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+c)}}function Qt(o,s,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(s,c,""+d)}}function mn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function wa(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ol(o,s,c){var d=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,y=d.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return m.call(this)},set:function(w){c=""+w,y.call(this,w)}}),Object.defineProperty(o,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function ct(o){if(!o._valueTracker){var s=wa(o)?"checked":"value";o._valueTracker=Ol(o,s,""+o[s])}}function Bo(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return o&&(d=wa(o)?o.checked?"true":"false":o.value),o=d,o!==c?(s.setValue(o),!0):!1}function xi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Vo=/[\n"\\]/g;function Zn(o){return o.replace(Vo,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ks(o,s,c,d,m,y,w,I){o.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?o.type=w:o.removeAttribute("type"),s!=null?w==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+mn(s)):o.value!==""+mn(s)&&(o.value=""+mn(s)):w!=="submit"&&w!=="reset"||o.removeAttribute("value"),s!=null?Nl(o,w,mn(s)):c!=null?Nl(o,w,mn(c)):d!=null&&o.removeAttribute("value"),m==null&&y!=null&&(o.defaultChecked=!!y),m!=null&&(o.checked=m&&typeof m!="function"&&typeof m!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+mn(I):o.removeAttribute("name")}function Kf(o,s,c,d,m,y,w,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(o.type=y),s!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){ct(o);return}c=c!=null?""+mn(c):"",s=s!=null?""+mn(s):c,I||s===o.value||(o.value=s),o.defaultValue=s}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=I?o.checked:!!d,o.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.name=w),ct(o)}function Nl(o,s,c){s==="number"&&xi(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function Ta(o,s,c,d){if(o=o.options,s){s={};for(var m=0;m<c.length;m++)s["$"+c[m]]=!0;for(c=0;c<o.length;c++)m=s.hasOwnProperty("$"+o[c].value),o[c].selected!==m&&(o[c].selected=m),m&&d&&(o[c].defaultSelected=!0)}else{for(c=""+mn(c),s=null,m=0;m<o.length;m++){if(o[m].value===c){o[m].selected=!0,d&&(o[m].defaultSelected=!0);return}s!==null||o[m].disabled||(s=o[m])}s!==null&&(s.selected=!0)}}function Yf(o,s,c){if(s!=null&&(s=""+mn(s),s!==o.value&&(o.value=s),c==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=c!=null?""+mn(c):""}function Sa(o,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(r(92));if(yt(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=mn(s),o.defaultValue=c,d=o.textContent,d===c&&d!==""&&d!==null&&(o.value=d),ct(o)}function Jn(o,s){if(s){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=s;return}}o.textContent=s}var Wf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ml(o,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":d?o.setProperty(s,c):typeof c!="number"||c===0||Wf.has(s)?s==="float"?o.cssFloat=c:o[s]=(""+c).trim():o[s]=c+"px"}function Pl(o,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(o=o.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var m in s)d=s[m],s.hasOwnProperty(m)&&c[m]!==d&&Ml(o,m,d)}else for(var y in s)s.hasOwnProperty(y)&&Ml(o,y,s[y])}function Ys(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ia=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(o){return Ia.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Kr(){}var Ll=null;function Tr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ca=null,Ei=null;function Fo(o){var s=wr(o);if(s&&(o=s.stateNode)){var c=o[vn]||null;e:switch(o=s.stateNode,s.type){case"input":if(Ks(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Zn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==o&&d.form===o.form){var m=d[vn]||null;if(!m)throw Error(r(90));Ks(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===o.form&&Bo(d)}break e;case"textarea":Yf(o,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ta(o,!!c.multiple,s,!1)}}}var Qs=!1;function ba(o,s,c){if(Qs)return o(s,c);Qs=!0;try{var d=o(s);return d}finally{if(Qs=!1,(Ca!==null||Ei!==null)&&(Hh(),Ca&&(s=Ca,o=Ei,Ei=Ca=null,Fo(s),o)))for(s=0;s<o.length;s++)Fo(o[s])}}function Yr(o,s){var c=o.stateNode;if(c===null)return null;var d=c[vn]||null;if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=!1;if(Sr)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Uo=!1}var Ai=null,kl=null,zo=null;function Bl(){if(zo)return zo;var o,s=kl,c=s.length,d,m="value"in Ai?Ai.value:Ai.textContent,y=m.length;for(o=0;o<c&&s[o]===m[o];o++);var w=c-o;for(d=1;d<=w&&s[c-d]===m[y-d];d++);return zo=m.slice(o,1<d?1-d:void 0)}function jo(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Hi(){return!0}function Wr(){return!1}function In(o){function s(c,d,m,y,w){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(c=o[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Hi:Wr,this.isPropagationStopped=Wr,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),s}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=In(Gi),Ra=v({},Gi,{view:0,detail:0}),Vl=In(Ra),Da,$s,Ti,Zs=v({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oa,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ti&&(Ti&&o.type==="mousemove"?(Da=o.screenX-Ti.screenX,$s=o.screenY-Ti.screenY):$s=Da=0,Ti=o),Da)},movementY:function(o){return"movementY"in o?o.movementY:$s}}),Fl=In(Zs),Ho=v({},Zs,{dataTransfer:0}),$f=In(Ho),Zf=v({},Ra,{relatedTarget:0}),Go=In(Zf),Ul=v({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Jf=In(Ul),Js=v({},Gi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),eh=In(Js),th=v({},Gi,{data:0}),Si=In(th),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ah(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=ih[o])?!!s[o]:!1}function Oa(){return ah}var qn=v({},Ra,{key:function(o){if(o.key){var s=nh[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=jo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?rh[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oa,charCode:function(o){return o.type==="keypress"?jo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?jo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),oh=In(qn),sh=v({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=In(sh),g=v({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oa}),E=In(g),T=v({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=In(T),K=v({},Zs,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=In(K),ce=v({},Gi,{newState:0,oldState:0}),Pe=In(ce),jt=[9,13,27,32],rt=Sr&&"CompositionEvent"in window,Ot=null;Sr&&"documentMode"in document&&(Ot=document.documentMode);var Ir=Sr&&"TextEvent"in window&&!Ot,Ii=Sr&&(!rt||Ot&&8<Ot&&11>=Ot),Qr=" ",$r=!1;function qo(o,s){switch(o){case"keyup":return jt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var tu=!1;function FS(o,s){switch(o){case"compositionend":return eu(s);case"keypress":return s.which!==32?null:($r=!0,Qr);case"textInput":return o=s.data,o===Qr&&$r?null:o;default:return null}}function US(o,s){if(tu)return o==="compositionend"||!rt&&qo(o,s)?(o=Bl(),zo=kl=Ai=null,tu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ii&&s.locale!=="ko"?null:s.data;default:return null}}var zS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!zS[o.type]:s==="textarea"}function Mm(o,s,c,d){Ca?Ei?Ei.push(d):Ei=[d]:Ca=d,s=Qh(s,"onChange"),0<s.length&&(c=new wi("onChange","change",null,c,d),o.push({event:c,listeners:s}))}var zl=null,jl=null;function jS(o){g2(o,0)}function uh(o){var s=lr(o);if(Bo(s))return o}function Pm(o,s){if(o==="change")return s}var Lm=!1;if(Sr){var n1;if(Sr){var r1="oninput"in document;if(!r1){var km=document.createElement("div");km.setAttribute("oninput","return;"),r1=typeof km.oninput=="function"}n1=r1}else n1=!1;Lm=n1&&(!document.documentMode||9<document.documentMode)}function Bm(){zl&&(zl.detachEvent("onpropertychange",Vm),jl=zl=null)}function Vm(o){if(o.propertyName==="value"&&uh(jl)){var s=[];Mm(s,jl,o,Tr(o)),ba(jS,s)}}function HS(o,s,c){o==="focusin"?(Bm(),zl=s,jl=c,zl.attachEvent("onpropertychange",Vm)):o==="focusout"&&Bm()}function GS(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return uh(jl)}function qS(o,s){if(o==="click")return uh(s)}function XS(o,s){if(o==="input"||o==="change")return uh(s)}function KS(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var fr=typeof Object.is=="function"?Object.is:KS;function Hl(o,s){if(fr(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var c=Object.keys(o),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!Xt.call(s,m)||!fr(o[m],s[m]))return!1}return!0}function Fm(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Um(o,s){var c=Fm(o);o=0;for(var d;c;){if(c.nodeType===3){if(d=o+c.textContent.length,o<=s&&d>=s)return{node:c,offset:s-o};o=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Fm(c)}}function zm(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?zm(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function jm(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=xi(o.document);s instanceof o.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)o=s.contentWindow;else break;s=xi(o.document)}return s}function i1(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var YS=Sr&&"documentMode"in document&&11>=document.documentMode,nu=null,a1=null,Gl=null,o1=!1;function Hm(o,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;o1||nu==null||nu!==xi(d)||(d=nu,"selectionStart"in d&&i1(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Gl&&Hl(Gl,d)||(Gl=d,d=Qh(a1,"onSelect"),0<d.length&&(s=new wi("onSelect","select",null,s,c),o.push({event:s,listeners:d}),s.target=nu)))}function Xo(o,s){var c={};return c[o.toLowerCase()]=s.toLowerCase(),c["Webkit"+o]="webkit"+s,c["Moz"+o]="moz"+s,c}var ru={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionrun:Xo("Transition","TransitionRun"),transitionstart:Xo("Transition","TransitionStart"),transitioncancel:Xo("Transition","TransitionCancel"),transitionend:Xo("Transition","TransitionEnd")},s1={},Gm={};Sr&&(Gm=document.createElement("div").style,"AnimationEvent"in window||(delete ru.animationend.animation,delete ru.animationiteration.animation,delete ru.animationstart.animation),"TransitionEvent"in window||delete ru.transitionend.transition);function Ko(o){if(s1[o])return s1[o];if(!ru[o])return o;var s=ru[o],c;for(c in s)if(s.hasOwnProperty(c)&&c in Gm)return s1[o]=s[c];return o}var qm=Ko("animationend"),Xm=Ko("animationiteration"),Km=Ko("animationstart"),WS=Ko("transitionrun"),QS=Ko("transitionstart"),$S=Ko("transitioncancel"),Ym=Ko("transitionend"),Wm=new Map,u1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");u1.push("scrollEnd");function Zr(o,s){Wm.set(o,s),yi(s,[o])}var lh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Cr=[],iu=0,l1=0;function ch(){for(var o=iu,s=l1=iu=0;s<o;){var c=Cr[s];Cr[s++]=null;var d=Cr[s];Cr[s++]=null;var m=Cr[s];Cr[s++]=null;var y=Cr[s];if(Cr[s++]=null,d!==null&&m!==null){var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}y!==0&&Qm(c,m,y)}}function fh(o,s,c,d){Cr[iu++]=o,Cr[iu++]=s,Cr[iu++]=c,Cr[iu++]=d,l1|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function c1(o,s,c,d){return fh(o,s,c,d),hh(o)}function Yo(o,s){return fh(o,null,null,s),hh(o)}function Qm(o,s,c){o.lanes|=c;var d=o.alternate;d!==null&&(d.lanes|=c);for(var m=!1,y=o.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(o=y.stateNode,o===null||o._visibility&1||(m=!0)),o=y,y=y.return;return o.tag===3?(y=o.stateNode,m&&s!==null&&(m=31-zt(c),o=y.hiddenUpdates,d=o[m],d===null?o[m]=[s]:d.push(s),s.lane=c|536870912),y):null}function hh(o){if(50<hc)throw hc=0,_p=null,Error(r(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var au={};function ZS(o,s,c,d){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(o,s,c,d){return new ZS(o,s,c,d)}function f1(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Xi(o,s){var c=o.alternate;return c===null?(c=hr(o.tag,s,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=s,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,s=o.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function $m(o,s){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,s=c.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function dh(o,s,c,d,m,y){var w=0;if(d=o,typeof o=="function")f1(o)&&(w=1);else if(typeof o=="string")w=rC(o,c,ve.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=hr(31,c,s,m),o.elementType=N,o.lanes=y,o;case S:return Wo(c.children,m,y,s);case R:w=8,m|=24;break;case L:return o=hr(12,c,s,m|2),o.elementType=L,o.lanes=y,o;case $:return o=hr(13,c,s,m),o.elementType=$,o.lanes=y,o;case J:return o=hr(19,c,s,m),o.elementType=J,o.lanes=y,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:w=10;break e;case M:w=9;break e;case G:w=11;break e;case C:w=14;break e;case b:w=16,d=null;break e}w=29,c=Error(r(130,o===null?"null":typeof o,"")),d=null}return s=hr(w,c,s,m),s.elementType=o,s.type=d,s.lanes=y,s}function Wo(o,s,c,d){return o=hr(7,o,d,s),o.lanes=c,o}function h1(o,s,c){return o=hr(6,o,null,s),o.lanes=c,o}function Zm(o){var s=hr(18,null,null,0);return s.stateNode=o,s}function d1(o,s,c){return s=hr(4,o.children!==null?o.children:[],o.key,s),s.lanes=c,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Jm=new WeakMap;function br(o,s){if(typeof o=="object"&&o!==null){var c=Jm.get(o);return c!==void 0?c:(s={value:o,source:s,stack:El(s)},Jm.set(o,s),s)}return{value:o,source:s,stack:El(s)}}var ou=[],su=0,ph=null,ql=0,Rr=[],Dr=0,Na=null,Ci=1,bi="";function Ki(o,s){ou[su++]=ql,ou[su++]=ph,ph=o,ql=s}function ey(o,s,c){Rr[Dr++]=Ci,Rr[Dr++]=bi,Rr[Dr++]=Na,Na=o;var d=Ci;o=bi;var m=32-zt(d)-1;d&=~(1<<m),c+=1;var y=32-zt(s)+m;if(30<y){var w=m-m%5;y=(d&(1<<w)-1).toString(32),d>>=w,m-=w,Ci=1<<32-zt(s)+m|c<<m|d,bi=y+o}else Ci=1<<y|c<<m|d,bi=o}function p1(o){o.return!==null&&(Ki(o,1),ey(o,1,0))}function g1(o){for(;o===ph;)ph=ou[--su],ou[su]=null,ql=ou[--su],ou[su]=null;for(;o===Na;)Na=Rr[--Dr],Rr[Dr]=null,bi=Rr[--Dr],Rr[Dr]=null,Ci=Rr[--Dr],Rr[Dr]=null}function ty(o,s){Rr[Dr++]=Ci,Rr[Dr++]=bi,Rr[Dr++]=Na,Ci=s.id,bi=s.overflow,Na=o}var Cn=null,It=null,Ye=!1,Ma=null,Or=!1,v1=Error(r(519));function Pa(o){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xl(br(s,o)),v1}function ny(o){var s=o.stateNode,c=o.type,d=o.memoizedProps;switch(s[Yt]=o,s[vn]=d,c){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(c=0;c<pc.length;c++)He(pc[c],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),Kf(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),Sa(s,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||_2(s.textContent,c)?(d.popover!=null&&(He("beforetoggle",s),He("toggle",s)),d.onScroll!=null&&He("scroll",s),d.onScrollEnd!=null&&He("scrollend",s),d.onClick!=null&&(s.onclick=Kr),s=!0):s=!1,s||Pa(o,!0)}function ry(o){for(Cn=o.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Cn=Cn.return}}function uu(o){if(o!==Cn)return!1;if(!Ye)return ry(o),Ye=!0,!1;var s=o.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||Pp(o.type,o.memoizedProps)),c=!c),c&&It&&Pa(o),ry(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));It=b2(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));It=b2(o)}else s===27?(s=It,Ya(o.type)?(o=Fp,Fp=null,It=o):It=s):It=Cn?Mr(o.stateNode.nextSibling):null;return!0}function Qo(){It=Cn=null,Ye=!1}function m1(){var o=Ma;return o!==null&&(rr===null?rr=o:rr.push.apply(rr,o),Ma=null),o}function Xl(o){Ma===null?Ma=[o]:Ma.push(o)}var y1=H(null),$o=null,Yi=null;function La(o,s,c){ge(y1,s._currentValue),s._currentValue=c}function Wi(o){o._currentValue=y1.current,ue(y1)}function _1(o,s,c){for(;o!==null;){var d=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),o===c)break;o=o.return}}function x1(o,s,c,d){var m=o.child;for(m!==null&&(m.return=o);m!==null;){var y=m.dependencies;if(y!==null){var w=m.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=m;for(var F=0;F<s.length;F++)if(I.context===s[F]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),_1(y.return,c,o),d||(w=null);break e}y=I.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(r(341));w.lanes|=c,y=w.alternate,y!==null&&(y.lanes|=c),_1(w,c,o),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===o){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function lu(o,s,c,d){o=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var I=m.type;fr(m.pendingProps.value,w.value)||(o!==null?o.push(I):o=[I])}}else if(m===We.current){if(w=m.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(o!==null?o.push(_c):o=[_c])}m=m.return}o!==null&&x1(s,o,c,d),s.flags|=262144}function gh(o){for(o=o.firstContext;o!==null;){if(!fr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Zo(o){$o=o,Yi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function bn(o){return iy($o,o)}function vh(o,s){return $o===null&&Zo(o),iy(o,s)}function iy(o,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Yi===null){if(o===null)throw Error(r(308));Yi=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else Yi=Yi.next=s;return c}var JS=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(c,d){o.push(d)}};this.abort=function(){s.aborted=!0,o.forEach(function(c){return c()})}},eI=n.unstable_scheduleCallback,tI=n.unstable_NormalPriority,$t={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function E1(){return{controller:new JS,data:new Map,refCount:0}}function Kl(o){o.refCount--,o.refCount===0&&eI(tI,function(){o.controller.abort()})}var Yl=null,A1=0,cu=0,fu=null;function nI(o,s){if(Yl===null){var c=Yl=[];A1=0,cu=Sp(),fu={status:"pending",value:void 0,then:function(d){c.push(d)}}}return A1++,s.then(ay,ay),s}function ay(){if(--A1===0&&Yl!==null){fu!==null&&(fu.status="fulfilled");var o=Yl;Yl=null,cu=0,fu=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function rI(o,s){var c=[],d={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return o.then(function(){d.status="fulfilled",d.value=s;for(var m=0;m<c.length;m++)(0,c[m])(s)},function(m){for(d.status="rejected",d.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),d}var oy=ne.S;ne.S=function(o,s){H_=Gn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&nI(o,s),oy!==null&&oy(o,s)};var Jo=H(null);function w1(){var o=Jo.current;return o!==null?o:Tt.pooledCache}function mh(o,s){s===null?ge(Jo,Jo.current):ge(Jo,s.pool)}function sy(){var o=w1();return o===null?null:{parent:$t._currentValue,pool:o}}var hu=Error(r(460)),T1=Error(r(474)),yh=Error(r(542)),_h={then:function(){}};function uy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ly(o,s,c){switch(c=o[c],c===void 0?o.push(s):c!==s&&(s.then(Kr,Kr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,fy(o),o;default:if(typeof s.status=="string")s.then(Kr,Kr);else{if(o=Tt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=s,o.status="pending",o.then(function(d){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=d}},function(d){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,fy(o),o}throw ts=s,hu}}function es(o){try{var s=o._init;return s(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ts=c,hu):c}}var ts=null;function cy(){if(ts===null)throw Error(r(459));var o=ts;return ts=null,o}function fy(o){if(o===hu||o===yh)throw Error(r(483))}var du=null,Wl=0;function xh(o){var s=Wl;return Wl+=1,du===null&&(du=[]),ly(du,o,s)}function Ql(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Eh(o,s){throw s.$$typeof===_?Error(r(525)):(o=Object.prototype.toString.call(s),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function hy(o){function s(q,j){if(o){var W=q.deletions;W===null?(q.deletions=[j],q.flags|=16):W.push(j)}}function c(q,j){if(!o)return null;for(;j!==null;)s(q,j),j=j.sibling;return null}function d(q){for(var j=new Map;q!==null;)q.key!==null?j.set(q.key,q):j.set(q.index,q),q=q.sibling;return j}function m(q,j){return q=Xi(q,j),q.index=0,q.sibling=null,q}function y(q,j,W){return q.index=W,o?(W=q.alternate,W!==null?(W=W.index,W<j?(q.flags|=67108866,j):W):(q.flags|=67108866,j)):(q.flags|=1048576,j)}function w(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function I(q,j,W,oe){return j===null||j.tag!==6?(j=h1(W,q.mode,oe),j.return=q,j):(j=m(j,W),j.return=q,j)}function F(q,j,W,oe){var Te=W.type;return Te===S?ie(q,j,W.props.children,oe,W.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&es(Te)===j.type)?(j=m(j,W.props),Ql(j,W),j.return=q,j):(j=dh(W.type,W.key,W.props,null,q.mode,oe),Ql(j,W),j.return=q,j)}function Q(q,j,W,oe){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=d1(W,q.mode,oe),j.return=q,j):(j=m(j,W.children||[]),j.return=q,j)}function ie(q,j,W,oe,Te){return j===null||j.tag!==7?(j=Wo(W,q.mode,oe,Te),j.return=q,j):(j=m(j,W),j.return=q,j)}function se(q,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=h1(""+j,q.mode,W),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case x:return W=dh(j.type,j.key,j.props,null,q.mode,W),Ql(W,j),W.return=q,W;case A:return j=d1(j,q.mode,W),j.return=q,j;case b:return j=es(j),se(q,j,W)}if(yt(j)||z(j))return j=Wo(j,q.mode,W,null),j.return=q,j;if(typeof j.then=="function")return se(q,xh(j),W);if(j.$$typeof===B)return se(q,vh(q,j),W);Eh(q,j)}return null}function Z(q,j,W,oe){var Te=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Te!==null?null:I(q,j,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return W.key===Te?F(q,j,W,oe):null;case A:return W.key===Te?Q(q,j,W,oe):null;case b:return W=es(W),Z(q,j,W,oe)}if(yt(W)||z(W))return Te!==null?null:ie(q,j,W,oe,null);if(typeof W.then=="function")return Z(q,j,xh(W),oe);if(W.$$typeof===B)return Z(q,j,vh(q,W),oe);Eh(q,W)}return null}function te(q,j,W,oe,Te){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return q=q.get(W)||null,I(j,q,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case x:return q=q.get(oe.key===null?W:oe.key)||null,F(j,q,oe,Te);case A:return q=q.get(oe.key===null?W:oe.key)||null,Q(j,q,oe,Te);case b:return oe=es(oe),te(q,j,W,oe,Te)}if(yt(oe)||z(oe))return q=q.get(W)||null,ie(j,q,oe,Te,null);if(typeof oe.then=="function")return te(q,j,W,xh(oe),Te);if(oe.$$typeof===B)return te(q,j,W,vh(j,oe),Te);Eh(j,oe)}return null}function me(q,j,W,oe){for(var Te=null,et=null,Ee=j,Be=j=0,qe=null;Ee!==null&&Be<W.length;Be++){Ee.index>Be?(qe=Ee,Ee=null):qe=Ee.sibling;var tt=Z(q,Ee,W[Be],oe);if(tt===null){Ee===null&&(Ee=qe);break}o&&Ee&&tt.alternate===null&&s(q,Ee),j=y(tt,j,Be),et===null?Te=tt:et.sibling=tt,et=tt,Ee=qe}if(Be===W.length)return c(q,Ee),Ye&&Ki(q,Be),Te;if(Ee===null){for(;Be<W.length;Be++)Ee=se(q,W[Be],oe),Ee!==null&&(j=y(Ee,j,Be),et===null?Te=Ee:et.sibling=Ee,et=Ee);return Ye&&Ki(q,Be),Te}for(Ee=d(Ee);Be<W.length;Be++)qe=te(Ee,q,Be,W[Be],oe),qe!==null&&(o&&qe.alternate!==null&&Ee.delete(qe.key===null?Be:qe.key),j=y(qe,j,Be),et===null?Te=qe:et.sibling=qe,et=qe);return o&&Ee.forEach(function(Ja){return s(q,Ja)}),Ye&&Ki(q,Be),Te}function be(q,j,W,oe){if(W==null)throw Error(r(151));for(var Te=null,et=null,Ee=j,Be=j=0,qe=null,tt=W.next();Ee!==null&&!tt.done;Be++,tt=W.next()){Ee.index>Be?(qe=Ee,Ee=null):qe=Ee.sibling;var Ja=Z(q,Ee,tt.value,oe);if(Ja===null){Ee===null&&(Ee=qe);break}o&&Ee&&Ja.alternate===null&&s(q,Ee),j=y(Ja,j,Be),et===null?Te=Ja:et.sibling=Ja,et=Ja,Ee=qe}if(tt.done)return c(q,Ee),Ye&&Ki(q,Be),Te;if(Ee===null){for(;!tt.done;Be++,tt=W.next())tt=se(q,tt.value,oe),tt!==null&&(j=y(tt,j,Be),et===null?Te=tt:et.sibling=tt,et=tt);return Ye&&Ki(q,Be),Te}for(Ee=d(Ee);!tt.done;Be++,tt=W.next())tt=te(Ee,q,Be,tt.value,oe),tt!==null&&(o&&tt.alternate!==null&&Ee.delete(tt.key===null?Be:tt.key),j=y(tt,j,Be),et===null?Te=tt:et.sibling=tt,et=tt);return o&&Ee.forEach(function(pC){return s(q,pC)}),Ye&&Ki(q,Be),Te}function At(q,j,W,oe){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case x:e:{for(var Te=W.key;j!==null;){if(j.key===Te){if(Te=W.type,Te===S){if(j.tag===7){c(q,j.sibling),oe=m(j,W.props.children),oe.return=q,q=oe;break e}}else if(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&es(Te)===j.type){c(q,j.sibling),oe=m(j,W.props),Ql(oe,W),oe.return=q,q=oe;break e}c(q,j);break}else s(q,j);j=j.sibling}W.type===S?(oe=Wo(W.props.children,q.mode,oe,W.key),oe.return=q,q=oe):(oe=dh(W.type,W.key,W.props,null,q.mode,oe),Ql(oe,W),oe.return=q,q=oe)}return w(q);case A:e:{for(Te=W.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){c(q,j.sibling),oe=m(j,W.children||[]),oe.return=q,q=oe;break e}else{c(q,j);break}else s(q,j);j=j.sibling}oe=d1(W,q.mode,oe),oe.return=q,q=oe}return w(q);case b:return W=es(W),At(q,j,W,oe)}if(yt(W))return me(q,j,W,oe);if(z(W)){if(Te=z(W),typeof Te!="function")throw Error(r(150));return W=Te.call(W),be(q,j,W,oe)}if(typeof W.then=="function")return At(q,j,xh(W),oe);if(W.$$typeof===B)return At(q,j,vh(q,W),oe);Eh(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(c(q,j.sibling),oe=m(j,W),oe.return=q,q=oe):(c(q,j),oe=h1(W,q.mode,oe),oe.return=q,q=oe),w(q)):c(q,j)}return function(q,j,W,oe){try{Wl=0;var Te=At(q,j,W,oe);return du=null,Te}catch(Ee){if(Ee===hu||Ee===yh)throw Ee;var et=hr(29,Ee,null,q.mode);return et.lanes=oe,et.return=q,et}}}var ns=hy(!0),dy=hy(!1),ka=!1;function S1(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function I1(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ba(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Va(o,s,c){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(it&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,s=hh(o),Qm(o,null,c),s}return fh(o,d,s,c),hh(o)}function $l(o,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=o.pendingLanes,c|=d,s.lanes=c,Tl(o,c)}}function C1(o,s){var c=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?m=y=s:y=y.next=s}else m=y=s;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=s:o.next=s,c.lastBaseUpdate=s}var b1=!1;function Zl(){if(b1){var o=fu;if(o!==null)throw o}}function Jl(o,s,c,d){b1=!1;var m=o.updateQueue;ka=!1;var y=m.firstBaseUpdate,w=m.lastBaseUpdate,I=m.shared.pending;if(I!==null){m.shared.pending=null;var F=I,Q=F.next;F.next=null,w===null?y=Q:w.next=Q,w=F;var ie=o.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==w&&(I===null?ie.firstBaseUpdate=Q:I.next=Q,ie.lastBaseUpdate=F))}if(y!==null){var se=m.baseState;w=0,ie=Q=F=null,I=y;do{var Z=I.lane&-536870913,te=Z!==I.lane;if(te?(Ge&Z)===Z:(d&Z)===Z){Z!==0&&Z===cu&&(b1=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=o,be=I;Z=s;var At=c;switch(be.tag){case 1:if(me=be.payload,typeof me=="function"){se=me.call(At,se,Z);break e}se=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=be.payload,Z=typeof me=="function"?me.call(At,se,Z):me,Z==null)break e;se=v({},se,Z);break e;case 2:ka=!0}}Z=I.callback,Z!==null&&(o.flags|=64,te&&(o.flags|=8192),te=m.callbacks,te===null?m.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(Q=ie=te,F=se):ie=ie.next=te,w|=Z;if(I=I.next,I===null){if(I=m.shared.pending,I===null)break;te=I,I=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);ie===null&&(F=se),m.baseState=F,m.firstBaseUpdate=Q,m.lastBaseUpdate=ie,y===null&&(m.shared.lanes=0),Ha|=w,o.lanes=w,o.memoizedState=se}}function py(o,s){if(typeof o!="function")throw Error(r(191,o));o.call(s)}function gy(o,s){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)py(c[o],s)}var pu=H(null),Ah=H(0);function vy(o,s){o=ia,ge(Ah,o),ge(pu,s),ia=o|s.baseLanes}function R1(){ge(Ah,ia),ge(pu,pu.current)}function D1(){ia=Ah.current,ue(pu),ue(Ah)}var dr=H(null),Nr=null;function Fa(o){var s=o.alternate;ge(Ht,Ht.current&1),ge(dr,o),Nr===null&&(s===null||pu.current!==null||s.memoizedState!==null)&&(Nr=o)}function O1(o){ge(Ht,Ht.current),ge(dr,o),Nr===null&&(Nr=o)}function my(o){o.tag===22?(ge(Ht,Ht.current),ge(dr,o),Nr===null&&(Nr=o)):Ua()}function Ua(){ge(Ht,Ht.current),ge(dr,dr.current)}function pr(o){ue(dr),Nr===o&&(Nr=null),ue(Ht)}var Ht=H(0);function wh(o){for(var s=o;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Bp(c)||Vp(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Qi=0,Le=null,xt=null,Zt=null,Th=!1,gu=!1,rs=!1,Sh=0,ec=0,vu=null,iI=0;function Vt(){throw Error(r(321))}function N1(o,s){if(s===null)return!1;for(var c=0;c<s.length&&c<o.length;c++)if(!fr(o[c],s[c]))return!1;return!0}function M1(o,s,c,d,m,y){return Qi=y,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ne.H=o===null||o.memoizedState===null?e_:Y1,rs=!1,y=c(d,m),rs=!1,gu&&(y=_y(s,c,d,m)),yy(o),y}function yy(o){ne.H=rc;var s=xt!==null&&xt.next!==null;if(Qi=0,Zt=xt=Le=null,Th=!1,ec=0,vu=null,s)throw Error(r(300));o===null||Jt||(o=o.dependencies,o!==null&&gh(o)&&(Jt=!0))}function _y(o,s,c,d){Le=o;var m=0;do{if(gu&&(vu=null),ec=0,gu=!1,25<=m)throw Error(r(301));if(m+=1,Zt=xt=null,o.updateQueue!=null){var y=o.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ne.H=t_,y=s(c,d)}while(gu);return y}function aI(){var o=ne.H,s=o.useState()[0];return s=typeof s.then=="function"?tc(s):s,o=o.useState()[0],(xt!==null?xt.memoizedState:null)!==o&&(Le.flags|=1024),s}function P1(){var o=Sh!==0;return Sh=0,o}function L1(o,s,c){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~c}function k1(o){if(Th){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Th=!1}Qi=0,Zt=xt=Le=null,gu=!1,ec=Sh=0,vu=null}function Xn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Le.memoizedState=Zt=o:Zt=Zt.next=o,Zt}function Gt(){if(xt===null){var o=Le.alternate;o=o!==null?o.memoizedState:null}else o=xt.next;var s=Zt===null?Le.memoizedState:Zt.next;if(s!==null)Zt=s,xt=o;else{if(o===null)throw Le.alternate===null?Error(r(467)):Error(r(310));xt=o,o={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Zt===null?Le.memoizedState=Zt=o:Zt=Zt.next=o}return Zt}function Ih(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tc(o){var s=ec;return ec+=1,vu===null&&(vu=[]),o=ly(vu,o,s),s=Le,(Zt===null?s.memoizedState:Zt.next)===null&&(s=s.alternate,ne.H=s===null||s.memoizedState===null?e_:Y1),o}function Ch(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return tc(o);if(o.$$typeof===B)return bn(o)}throw Error(r(438,String(o)))}function B1(o){var s=null,c=Le.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=Le.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Ih(),Le.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(o),d=0;d<o;d++)c[d]=k;return s.index++,c}function $i(o,s){return typeof s=="function"?s(o):s}function bh(o){var s=Gt();return V1(s,xt,o)}function V1(o,s,c){var d=o.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var m=o.baseQueue,y=d.pending;if(y!==null){if(m!==null){var w=m.next;m.next=y.next,y.next=w}s.baseQueue=m=y,d.pending=null}if(y=o.baseState,m===null)o.memoizedState=y;else{s=m.next;var I=w=null,F=null,Q=s,ie=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Ge&se)===se:(Qi&se)===se){var Z=Q.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===cu&&(ie=!0);else if((Qi&Z)===Z){Q=Q.next,Z===cu&&(ie=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=se,w=y):F=F.next=se,Le.lanes|=Z,Ha|=Z;se=Q.action,rs&&c(y,se),y=Q.hasEagerState?Q.eagerState:c(y,se)}else Z={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=Z,w=y):F=F.next=Z,Le.lanes|=se,Ha|=se;Q=Q.next}while(Q!==null&&Q!==s);if(F===null?w=y:F.next=I,!fr(y,o.memoizedState)&&(Jt=!0,ie&&(c=fu,c!==null)))throw c;o.memoizedState=y,o.baseState=w,o.baseQueue=F,d.lastRenderedState=y}return m===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function F1(o){var s=Gt(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var d=c.dispatch,m=c.pending,y=s.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do y=o(y,w.action),w=w.next;while(w!==m);fr(y,s.memoizedState)||(Jt=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function xy(o,s,c){var d=Le,m=Gt(),y=Ye;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=s();var w=!fr((xt||m).memoizedState,c);if(w&&(m.memoizedState=c,Jt=!0),m=m.queue,j1(wy.bind(null,d,m,o),[o]),m.getSnapshot!==s||w||Zt!==null&&Zt.memoizedState.tag&1){if(d.flags|=2048,mu(9,{destroy:void 0},Ay.bind(null,d,m,c,s),null),Tt===null)throw Error(r(349));y||(Qi&127)!==0||Ey(d,s,c)}return c}function Ey(o,s,c){o.flags|=16384,o={getSnapshot:s,value:c},s=Le.updateQueue,s===null?(s=Ih(),Le.updateQueue=s,s.stores=[o]):(c=s.stores,c===null?s.stores=[o]:c.push(o))}function Ay(o,s,c,d){s.value=c,s.getSnapshot=d,Ty(s)&&Sy(o)}function wy(o,s,c){return c(function(){Ty(s)&&Sy(o)})}function Ty(o){var s=o.getSnapshot;o=o.value;try{var c=s();return!fr(o,c)}catch{return!0}}function Sy(o){var s=Yo(o,2);s!==null&&ir(s,o,2)}function U1(o){var s=Xn();if(typeof o=="function"){var c=o;if(o=c(),rs){Ar(!0);try{c()}finally{Ar(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:o},s}function Iy(o,s,c,d){return o.baseState=c,V1(o,xt,typeof d=="function"?d:$i)}function oI(o,s,c,d,m){if(Oh(o))throw Error(r(485));if(o=s.action,o!==null){var y={payload:m,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};ne.T!==null?c(!0):y.isTransition=!1,d(y),c=s.pending,c===null?(y.next=s.pending=y,Cy(s,y)):(y.next=c.next,s.pending=c.next=y)}}function Cy(o,s){var c=s.action,d=s.payload,m=o.state;if(s.isTransition){var y=ne.T,w={};ne.T=w;try{var I=c(m,d),F=ne.S;F!==null&&F(w,I),by(o,s,I)}catch(Q){z1(o,s,Q)}finally{y!==null&&w.types!==null&&(y.types=w.types),ne.T=y}}else try{y=c(m,d),by(o,s,y)}catch(Q){z1(o,s,Q)}}function by(o,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Ry(o,s,d)},function(d){return z1(o,s,d)}):Ry(o,s,c)}function Ry(o,s,c){s.status="fulfilled",s.value=c,Dy(s),o.state=c,s=o.pending,s!==null&&(c=s.next,c===s?o.pending=null:(c=c.next,s.next=c,Cy(o,c)))}function z1(o,s,c){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,Dy(s),s=s.next;while(s!==d)}o.action=null}function Dy(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Oy(o,s){return s}function Ny(o,s){if(Ye){var c=Tt.formState;if(c!==null){e:{var d=Le;if(Ye){if(It){t:{for(var m=It,y=Or;m.nodeType!==8;){if(!y){m=null;break t}if(m=Mr(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){It=Mr(m.nextSibling),d=m.data==="F!";break e}}Pa(d)}d=!1}d&&(s=c[0])}}return c=Xn(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:s},c.queue=d,c=$y.bind(null,Le,d),d.dispatch=c,d=U1(!1),y=K1.bind(null,Le,!1,d.queue),d=Xn(),m={state:s,dispatch:null,action:o,pending:null},d.queue=m,c=oI.bind(null,Le,m,y,c),m.dispatch=c,d.memoizedState=o,[s,c,!1]}function My(o){var s=Gt();return Py(s,xt,o)}function Py(o,s,c){if(s=V1(o,s,Oy)[0],o=bh($i)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=tc(s)}catch(w){throw w===hu?yh:w}else d=s;s=Gt();var m=s.queue,y=m.dispatch;return c!==s.memoizedState&&(Le.flags|=2048,mu(9,{destroy:void 0},sI.bind(null,m,c),null)),[d,y,o]}function sI(o,s){o.action=s}function Ly(o){var s=Gt(),c=xt;if(c!==null)return Py(s,c,o);Gt(),s=s.memoizedState,c=Gt();var d=c.queue.dispatch;return c.memoizedState=o,[s,d,!1]}function mu(o,s,c,d){return o={tag:o,create:c,deps:d,inst:s,next:null},s=Le.updateQueue,s===null&&(s=Ih(),Le.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=o.next=o:(d=c.next,c.next=o,o.next=d,s.lastEffect=o),o}function ky(){return Gt().memoizedState}function Rh(o,s,c,d){var m=Xn();Le.flags|=o,m.memoizedState=mu(1|s,{destroy:void 0},c,d===void 0?null:d)}function Dh(o,s,c,d){var m=Gt();d=d===void 0?null:d;var y=m.memoizedState.inst;xt!==null&&d!==null&&N1(d,xt.memoizedState.deps)?m.memoizedState=mu(s,y,c,d):(Le.flags|=o,m.memoizedState=mu(1|s,y,c,d))}function By(o,s){Rh(8390656,8,o,s)}function j1(o,s){Dh(2048,8,o,s)}function uI(o){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=Ih(),Le.updateQueue=s,s.events=[o];else{var c=s.events;c===null?s.events=[o]:c.push(o)}}function Vy(o){var s=Gt().memoizedState;return uI({ref:s,nextImpl:o}),function(){if((it&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function Fy(o,s){return Dh(4,2,o,s)}function Uy(o,s){return Dh(4,4,o,s)}function zy(o,s){if(typeof s=="function"){o=o();var c=s(o);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function jy(o,s,c){c=c!=null?c.concat([o]):null,Dh(4,4,zy.bind(null,s,o),c)}function H1(){}function Hy(o,s){var c=Gt();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&N1(s,d[1])?d[0]:(c.memoizedState=[o,s],o)}function Gy(o,s){var c=Gt();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&N1(s,d[1]))return d[0];if(d=o(),rs){Ar(!0);try{o()}finally{Ar(!1)}}return c.memoizedState=[d,s],d}function G1(o,s,c){return c===void 0||(Qi&1073741824)!==0&&(Ge&261930)===0?o.memoizedState=s:(o.memoizedState=c,o=q_(),Le.lanes|=o,Ha|=o,c)}function qy(o,s,c,d){return fr(c,s)?c:pu.current!==null?(o=G1(o,c,d),fr(o,s)||(Jt=!0),o):(Qi&42)===0||(Qi&1073741824)!==0&&(Ge&261930)===0?(Jt=!0,o.memoizedState=c):(o=q_(),Le.lanes|=o,Ha|=o,s)}function Xy(o,s,c,d,m){var y=he.p;he.p=y!==0&&8>y?y:8;var w=ne.T,I={};ne.T=I,K1(o,!1,s,c);try{var F=m(),Q=ne.S;if(Q!==null&&Q(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ie=rI(F,d);nc(o,s,ie,mr(o))}else nc(o,s,d,mr(o))}catch(se){nc(o,s,{then:function(){},status:"rejected",reason:se},mr())}finally{he.p=y,w!==null&&I.types!==null&&(w.types=I.types),ne.T=w}}function lI(){}function q1(o,s,c,d){if(o.tag!==5)throw Error(r(476));var m=Ky(o).queue;Xy(o,m,s,we,c===null?lI:function(){return Yy(o),c(d)})}function Ky(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:we},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:c},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function Yy(o){var s=Ky(o);s.next===null&&(s=o.alternate.memoizedState),nc(o,s.next.queue,{},mr())}function X1(){return bn(_c)}function Wy(){return Gt().memoizedState}function Qy(){return Gt().memoizedState}function cI(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var c=mr();o=Ba(c);var d=Va(s,o,c);d!==null&&(ir(d,s,c),$l(d,s,c)),s={cache:E1()},o.payload=s;return}s=s.return}}function fI(o,s,c){var d=mr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Oh(o)?Zy(s,c):(c=c1(o,s,c,d),c!==null&&(ir(c,o,d),Jy(c,s,d)))}function $y(o,s,c){var d=mr();nc(o,s,c,d)}function nc(o,s,c,d){var m={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Oh(o))Zy(s,m);else{var y=o.alternate;if(o.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,I=y(w,c);if(m.hasEagerState=!0,m.eagerState=I,fr(I,w))return fh(o,s,m,0),Tt===null&&ch(),!1}catch{}if(c=c1(o,s,m,d),c!==null)return ir(c,o,d),Jy(c,s,d),!0}return!1}function K1(o,s,c,d){if(d={lane:2,revertLane:Sp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Oh(o)){if(s)throw Error(r(479))}else s=c1(o,c,d,2),s!==null&&ir(s,o,2)}function Oh(o){var s=o.alternate;return o===Le||s!==null&&s===Le}function Zy(o,s){gu=Th=!0;var c=o.pending;c===null?s.next=s:(s.next=c.next,c.next=s),o.pending=s}function Jy(o,s,c){if((c&4194048)!==0){var d=s.lanes;d&=o.pendingLanes,c|=d,s.lanes=c,Tl(o,c)}}var rc={readContext:bn,use:Ch,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};rc.useEffectEvent=Vt;var e_={readContext:bn,use:Ch,useCallback:function(o,s){return Xn().memoizedState=[o,s===void 0?null:s],o},useContext:bn,useEffect:By,useImperativeHandle:function(o,s,c){c=c!=null?c.concat([o]):null,Rh(4194308,4,zy.bind(null,s,o),c)},useLayoutEffect:function(o,s){return Rh(4194308,4,o,s)},useInsertionEffect:function(o,s){Rh(4,2,o,s)},useMemo:function(o,s){var c=Xn();s=s===void 0?null:s;var d=o();if(rs){Ar(!0);try{o()}finally{Ar(!1)}}return c.memoizedState=[d,s],d},useReducer:function(o,s,c){var d=Xn();if(c!==void 0){var m=c(s);if(rs){Ar(!0);try{c(s)}finally{Ar(!1)}}}else m=s;return d.memoizedState=d.baseState=m,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:m},d.queue=o,o=o.dispatch=fI.bind(null,Le,o),[d.memoizedState,o]},useRef:function(o){var s=Xn();return o={current:o},s.memoizedState=o},useState:function(o){o=U1(o);var s=o.queue,c=$y.bind(null,Le,s);return s.dispatch=c,[o.memoizedState,c]},useDebugValue:H1,useDeferredValue:function(o,s){var c=Xn();return G1(c,o,s)},useTransition:function(){var o=U1(!1);return o=Xy.bind(null,Le,o.queue,!0,!1),Xn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,c){var d=Le,m=Xn();if(Ye){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),Tt===null)throw Error(r(349));(Ge&127)!==0||Ey(d,s,c)}m.memoizedState=c;var y={value:c,getSnapshot:s};return m.queue=y,By(wy.bind(null,d,y,o),[o]),d.flags|=2048,mu(9,{destroy:void 0},Ay.bind(null,d,y,c,s),null),c},useId:function(){var o=Xn(),s=Tt.identifierPrefix;if(Ye){var c=bi,d=Ci;c=(d&~(1<<32-zt(d)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Sh++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=iI++,s="_"+s+"r_"+c.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:X1,useFormState:Ny,useActionState:Ny,useOptimistic:function(o){var s=Xn();s.memoizedState=s.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=K1.bind(null,Le,!0,c),c.dispatch=s,[o,s]},useMemoCache:B1,useCacheRefresh:function(){return Xn().memoizedState=cI.bind(null,Le)},useEffectEvent:function(o){var s=Xn(),c={impl:o};return s.memoizedState=c,function(){if((it&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Y1={readContext:bn,use:Ch,useCallback:Hy,useContext:bn,useEffect:j1,useImperativeHandle:jy,useInsertionEffect:Fy,useLayoutEffect:Uy,useMemo:Gy,useReducer:bh,useRef:ky,useState:function(){return bh($i)},useDebugValue:H1,useDeferredValue:function(o,s){var c=Gt();return qy(c,xt.memoizedState,o,s)},useTransition:function(){var o=bh($i)[0],s=Gt().memoizedState;return[typeof o=="boolean"?o:tc(o),s]},useSyncExternalStore:xy,useId:Wy,useHostTransitionStatus:X1,useFormState:My,useActionState:My,useOptimistic:function(o,s){var c=Gt();return Iy(c,xt,o,s)},useMemoCache:B1,useCacheRefresh:Qy};Y1.useEffectEvent=Vy;var t_={readContext:bn,use:Ch,useCallback:Hy,useContext:bn,useEffect:j1,useImperativeHandle:jy,useInsertionEffect:Fy,useLayoutEffect:Uy,useMemo:Gy,useReducer:F1,useRef:ky,useState:function(){return F1($i)},useDebugValue:H1,useDeferredValue:function(o,s){var c=Gt();return xt===null?G1(c,o,s):qy(c,xt.memoizedState,o,s)},useTransition:function(){var o=F1($i)[0],s=Gt().memoizedState;return[typeof o=="boolean"?o:tc(o),s]},useSyncExternalStore:xy,useId:Wy,useHostTransitionStatus:X1,useFormState:Ly,useActionState:Ly,useOptimistic:function(o,s){var c=Gt();return xt!==null?Iy(c,xt,o,s):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:B1,useCacheRefresh:Qy};t_.useEffectEvent=Vy;function W1(o,s,c,d){s=o.memoizedState,c=c(d,s),c=c==null?s:v({},s,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Q1={enqueueSetState:function(o,s,c){o=o._reactInternals;var d=mr(),m=Ba(d);m.payload=s,c!=null&&(m.callback=c),s=Va(o,m,d),s!==null&&(ir(s,o,d),$l(s,o,d))},enqueueReplaceState:function(o,s,c){o=o._reactInternals;var d=mr(),m=Ba(d);m.tag=1,m.payload=s,c!=null&&(m.callback=c),s=Va(o,m,d),s!==null&&(ir(s,o,d),$l(s,o,d))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var c=mr(),d=Ba(c);d.tag=2,s!=null&&(d.callback=s),s=Va(o,d,c),s!==null&&(ir(s,o,c),$l(s,o,c))}};function n_(o,s,c,d,m,y,w){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,y,w):s.prototype&&s.prototype.isPureReactComponent?!Hl(c,d)||!Hl(m,y):!0}function r_(o,s,c,d){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==o&&Q1.enqueueReplaceState(s,s.state,null)}function is(o,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(o=o.defaultProps){c===s&&(c=v({},c));for(var m in o)c[m]===void 0&&(c[m]=o[m])}return c}function i_(o){lh(o)}function a_(o){console.error(o)}function o_(o){lh(o)}function Nh(o,s){try{var c=o.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function s_(o,s,c){try{var d=o.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function $1(o,s,c){return c=Ba(c),c.tag=3,c.payload={element:null},c.callback=function(){Nh(o,s)},c}function u_(o){return o=Ba(o),o.tag=3,o}function l_(o,s,c,d){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=d.value;o.payload=function(){return m(y)},o.callback=function(){s_(s,c,d)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(o.callback=function(){s_(s,c,d),typeof m!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function hI(o,s,c,d,m){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&lu(s,c,m,!0),c=dr.current,c!==null){switch(c.tag){case 31:case 13:return Nr===null?Gh():c.alternate===null&&Ft===0&&(Ft=3),c.flags&=-257,c.flags|=65536,c.lanes=m,d===_h?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Ap(o,d,m)),!1;case 22:return c.flags|=65536,d===_h?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Ap(o,d,m)),!1}throw Error(r(435,c.tag))}return Ap(o,d,m),Gh(),!1}if(Ye)return s=dr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,d!==v1&&(o=Error(r(422),{cause:d}),Xl(br(o,c)))):(d!==v1&&(s=Error(r(423),{cause:d}),Xl(br(s,c))),o=o.current.alternate,o.flags|=65536,m&=-m,o.lanes|=m,d=br(d,c),m=$1(o.stateNode,d,m),C1(o,m),Ft!==4&&(Ft=2)),!1;var y=Error(r(520),{cause:d});if(y=br(y,c),fc===null?fc=[y]:fc.push(y),Ft!==4&&(Ft=2),s===null)return!0;d=br(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,o=m&-m,c.lanes|=o,o=$1(c.stateNode,d,o),C1(c,o),!1;case 1:if(s=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ga===null||!Ga.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=u_(m),l_(m,o,c,d),C1(c,m),!1}c=c.return}while(c!==null);return!1}var Z1=Error(r(461)),Jt=!1;function Rn(o,s,c,d){s.child=o===null?dy(s,null,c,d):ns(s,o.child,c,d)}function c_(o,s,c,d,m){c=c.render;var y=s.ref;if("ref"in d){var w={};for(var I in d)I!=="ref"&&(w[I]=d[I])}else w=d;return Zo(s),d=M1(o,s,c,w,y,m),I=P1(),o!==null&&!Jt?(L1(o,s,m),Zi(o,s,m)):(Ye&&I&&p1(s),s.flags|=1,Rn(o,s,d,m),s.child)}function f_(o,s,c,d,m){if(o===null){var y=c.type;return typeof y=="function"&&!f1(y)&&y.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=y,h_(o,s,y,d,m)):(o=dh(c.type,null,d,s,s.mode,m),o.ref=s.ref,o.return=s,s.child=o)}if(y=o.child,!op(o,m)){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:Hl,c(w,d)&&o.ref===s.ref)return Zi(o,s,m)}return s.flags|=1,o=Xi(y,d),o.ref=s.ref,o.return=s,s.child=o}function h_(o,s,c,d,m){if(o!==null){var y=o.memoizedProps;if(Hl(y,d)&&o.ref===s.ref)if(Jt=!1,s.pendingProps=d=y,op(o,m))(o.flags&131072)!==0&&(Jt=!0);else return s.lanes=o.lanes,Zi(o,s,m)}return J1(o,s,c,d,m)}function d_(o,s,c,d){var m=d.children,y=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,o!==null){for(d=s.child=o.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~y}else d=0,s.child=null;return p_(o,s,y,c,d)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&mh(s,y!==null?y.cachePool:null),y!==null?vy(s,y):R1(),my(s);else return d=s.lanes=536870912,p_(o,s,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(mh(s,y.cachePool),vy(s,y),Ua(),s.memoizedState=null):(o!==null&&mh(s,null),R1(),Ua());return Rn(o,s,m,c),s.child}function ic(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function p_(o,s,c,d,m){var y=w1();return y=y===null?null:{parent:$t._currentValue,pool:y},s.memoizedState={baseLanes:c,cachePool:y},o!==null&&mh(s,null),R1(),my(s),o!==null&&lu(o,s,d,!0),s.childLanes=m,null}function Mh(o,s){return s=Lh({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function g_(o,s,c){return ns(s,o.child,null,c),o=Mh(s,s.pendingProps),o.flags|=2,pr(s),s.memoizedState=null,o}function dI(o,s,c){var d=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(Ye){if(d.mode==="hidden")return o=Mh(s,d),s.lanes=536870912,ic(null,o);if(O1(s),(o=It)?(o=C2(o,Or),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Na!==null?{id:Ci,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},c=Zm(o),c.return=s,s.child=c,Cn=s,It=null)):o=null,o===null)throw Pa(s);return s.lanes=536870912,null}return Mh(s,d)}var y=o.memoizedState;if(y!==null){var w=y.dehydrated;if(O1(s),m)if(s.flags&256)s.flags&=-257,s=g_(o,s,c);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(r(558));else if(Jt||lu(o,s,c,!1),m=(c&o.childLanes)!==0,Jt||m){if(d=Tt,d!==null&&(w=Sl(d,c),w!==0&&w!==y.retryLane))throw y.retryLane=w,Yo(o,w),ir(d,o,w),Z1;Gh(),s=g_(o,s,c)}else o=y.treeContext,It=Mr(w.nextSibling),Cn=s,Ye=!0,Ma=null,Or=!1,o!==null&&ty(s,o),s=Mh(s,d),s.flags|=4096;return s}return o=Xi(o.child,{mode:d.mode,children:d.children}),o.ref=s.ref,s.child=o,o.return=s,o}function Ph(o,s){var c=s.ref;if(c===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(o===null||o.ref!==c)&&(s.flags|=4194816)}}function J1(o,s,c,d,m){return Zo(s),c=M1(o,s,c,d,void 0,m),d=P1(),o!==null&&!Jt?(L1(o,s,m),Zi(o,s,m)):(Ye&&d&&p1(s),s.flags|=1,Rn(o,s,c,m),s.child)}function v_(o,s,c,d,m,y){return Zo(s),s.updateQueue=null,c=_y(s,d,c,m),yy(o),d=P1(),o!==null&&!Jt?(L1(o,s,y),Zi(o,s,y)):(Ye&&d&&p1(s),s.flags|=1,Rn(o,s,c,y),s.child)}function m_(o,s,c,d,m){if(Zo(s),s.stateNode===null){var y=au,w=c.contextType;typeof w=="object"&&w!==null&&(y=bn(w)),y=new c(d,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Q1,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=d,y.state=s.memoizedState,y.refs={},S1(s),w=c.contextType,y.context=typeof w=="object"&&w!==null?bn(w):au,y.state=s.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(W1(s,c,w,d),y.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&Q1.enqueueReplaceState(y,y.state,null),Jl(s,d,y,m),Zl(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(o===null){y=s.stateNode;var I=s.memoizedProps,F=is(c,I);y.props=F;var Q=y.context,ie=c.contextType;w=au,typeof ie=="object"&&ie!==null&&(w=bn(ie));var se=c.getDerivedStateFromProps;ie=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||Q!==w)&&r_(s,y,d,w),ka=!1;var Z=s.memoizedState;y.state=Z,Jl(s,d,y,m),Zl(),Q=s.memoizedState,I||Z!==Q||ka?(typeof se=="function"&&(W1(s,c,se,d),Q=s.memoizedState),(F=ka||n_(s,c,F,d,Z,Q,w))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=Q),y.props=d,y.state=Q,y.context=w,d=F):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{y=s.stateNode,I1(o,s),w=s.memoizedProps,ie=is(c,w),y.props=ie,se=s.pendingProps,Z=y.context,Q=c.contextType,F=au,typeof Q=="object"&&Q!==null&&(F=bn(Q)),I=c.getDerivedStateFromProps,(Q=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==se||Z!==F)&&r_(s,y,d,F),ka=!1,Z=s.memoizedState,y.state=Z,Jl(s,d,y,m),Zl();var te=s.memoizedState;w!==se||Z!==te||ka||o!==null&&o.dependencies!==null&&gh(o.dependencies)?(typeof I=="function"&&(W1(s,c,I,d),te=s.memoizedState),(ie=ka||n_(s,c,ie,d,Z,te,F)||o!==null&&o.dependencies!==null&&gh(o.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,te,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,te,F)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===o.memoizedProps&&Z===o.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===o.memoizedProps&&Z===o.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=te),y.props=d,y.state=te,y.context=F,d=ie):(typeof y.componentDidUpdate!="function"||w===o.memoizedProps&&Z===o.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===o.memoizedProps&&Z===o.memoizedState||(s.flags|=1024),d=!1)}return y=d,Ph(o,s),d=(s.flags&128)!==0,y||d?(y=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,o!==null&&d?(s.child=ns(s,o.child,null,m),s.child=ns(s,null,c,m)):Rn(o,s,c,m),s.memoizedState=y.state,o=s.child):o=Zi(o,s,m),o}function y_(o,s,c,d){return Qo(),s.flags|=256,Rn(o,s,c,d),s.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(o){return{baseLanes:o,cachePool:sy()}}function np(o,s,c){return o=o!==null?o.childLanes&~c:0,s&&(o|=vr),o}function __(o,s,c){var d=s.pendingProps,m=!1,y=(s.flags&128)!==0,w;if((w=y)||(w=o!==null&&o.memoizedState===null?!1:(Ht.current&2)!==0),w&&(m=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,o===null){if(Ye){if(m?Fa(s):Ua(),(o=It)?(o=C2(o,Or),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Na!==null?{id:Ci,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},c=Zm(o),c.return=s,s.child=c,Cn=s,It=null)):o=null,o===null)throw Pa(s);return Vp(o)?s.lanes=32:s.lanes=536870912,null}var I=d.children;return d=d.fallback,m?(Ua(),m=s.mode,I=Lh({mode:"hidden",children:I},m),d=Wo(d,m,c,null),I.return=s,d.return=s,I.sibling=d,s.child=I,d=s.child,d.memoizedState=tp(c),d.childLanes=np(o,w,c),s.memoizedState=ep,ic(null,d)):(Fa(s),rp(s,I))}var F=o.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(y)s.flags&256?(Fa(s),s.flags&=-257,s=ip(o,s,c)):s.memoizedState!==null?(Ua(),s.child=o.child,s.flags|=128,s=null):(Ua(),I=d.fallback,m=s.mode,d=Lh({mode:"visible",children:d.children},m),I=Wo(I,m,c,null),I.flags|=2,d.return=s,I.return=s,d.sibling=I,s.child=d,ns(s,o.child,null,c),d=s.child,d.memoizedState=tp(c),d.childLanes=np(o,w,c),s.memoizedState=ep,s=ic(null,d));else if(Fa(s),Vp(I)){if(w=I.nextSibling&&I.nextSibling.dataset,w)var Q=w.dgst;w=Q,d=Error(r(419)),d.stack="",d.digest=w,Xl({value:d,source:null,stack:null}),s=ip(o,s,c)}else if(Jt||lu(o,s,c,!1),w=(c&o.childLanes)!==0,Jt||w){if(w=Tt,w!==null&&(d=Sl(w,c),d!==0&&d!==F.retryLane))throw F.retryLane=d,Yo(o,d),ir(w,o,d),Z1;Bp(I)||Gh(),s=ip(o,s,c)}else Bp(I)?(s.flags|=192,s.child=o.child,s=null):(o=F.treeContext,It=Mr(I.nextSibling),Cn=s,Ye=!0,Ma=null,Or=!1,o!==null&&ty(s,o),s=rp(s,d.children),s.flags|=4096);return s}return m?(Ua(),I=d.fallback,m=s.mode,F=o.child,Q=F.sibling,d=Xi(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,Q!==null?I=Xi(Q,I):(I=Wo(I,m,c,null),I.flags|=2),I.return=s,d.return=s,d.sibling=I,s.child=d,ic(null,d),d=s.child,I=o.child.memoizedState,I===null?I=tp(c):(m=I.cachePool,m!==null?(F=$t._currentValue,m=m.parent!==F?{parent:F,pool:F}:m):m=sy(),I={baseLanes:I.baseLanes|c,cachePool:m}),d.memoizedState=I,d.childLanes=np(o,w,c),s.memoizedState=ep,ic(o.child,d)):(Fa(s),c=o.child,o=c.sibling,c=Xi(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,o!==null&&(w=s.deletions,w===null?(s.deletions=[o],s.flags|=16):w.push(o)),s.child=c,s.memoizedState=null,c)}function rp(o,s){return s=Lh({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function Lh(o,s){return o=hr(22,o,null,s),o.lanes=0,o}function ip(o,s,c){return ns(s,o.child,null,c),o=rp(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function x_(o,s,c){o.lanes|=s;var d=o.alternate;d!==null&&(d.lanes|=s),_1(o.return,s,c)}function ap(o,s,c,d,m,y){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m,treeForkCount:y}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=c,w.tailMode=m,w.treeForkCount=y)}function E_(o,s,c){var d=s.pendingProps,m=d.revealOrder,y=d.tail;d=d.children;var w=Ht.current,I=(w&2)!==0;if(I?(w=w&1|2,s.flags|=128):w&=1,ge(Ht,w),Rn(o,s,d,c),d=Ye?ql:0,!I&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&x_(o,c,s);else if(o.tag===19)x_(o,c,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(m){case"forwards":for(c=s.child,m=null;c!==null;)o=c.alternate,o!==null&&wh(o)===null&&(m=c),c=c.sibling;c=m,c===null?(m=s.child,s.child=null):(m=c.sibling,c.sibling=null),ap(s,!1,m,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,m=s.child,s.child=null;m!==null;){if(o=m.alternate,o!==null&&wh(o)===null){s.child=m;break}o=m.sibling,m.sibling=c,c=m,m=o}ap(s,!0,c,null,y,d);break;case"together":ap(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Zi(o,s,c){if(o!==null&&(s.dependencies=o.dependencies),Ha|=s.lanes,(c&s.childLanes)===0)if(o!==null){if(lu(o,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(r(153));if(s.child!==null){for(o=s.child,c=Xi(o,o.pendingProps),s.child=c,c.return=s;o.sibling!==null;)o=o.sibling,c=c.sibling=Xi(o,o.pendingProps),c.return=s;c.sibling=null}return s.child}function op(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&gh(o)))}function pI(o,s,c){switch(s.tag){case 3:an(s,s.stateNode.containerInfo),La(s,$t,o.memoizedState.cache),Qo();break;case 27:case 5:Do(s);break;case 4:an(s,s.stateNode.containerInfo);break;case 10:La(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,O1(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(Fa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?__(o,s,c):(Fa(s),o=Zi(o,s,c),o!==null?o.sibling:null);Fa(s);break;case 19:var m=(o.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(lu(o,s,c,!1),d=(c&s.childLanes)!==0),m){if(d)return E_(o,s,c);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ge(Ht,Ht.current),d)break;return null;case 22:return s.lanes=0,d_(o,s,c,s.pendingProps);case 24:La(s,$t,o.memoizedState.cache)}return Zi(o,s,c)}function A_(o,s,c){if(o!==null)if(o.memoizedProps!==s.pendingProps)Jt=!0;else{if(!op(o,c)&&(s.flags&128)===0)return Jt=!1,pI(o,s,c);Jt=(o.flags&131072)!==0}else Jt=!1,Ye&&(s.flags&1048576)!==0&&ey(s,ql,s.index);switch(s.lanes=0,s.tag){case 16:e:{var d=s.pendingProps;if(o=es(s.elementType),s.type=o,typeof o=="function")f1(o)?(d=is(o,d),s.tag=1,s=m_(null,s,o,d,c)):(s.tag=0,s=J1(null,s,o,d,c));else{if(o!=null){var m=o.$$typeof;if(m===G){s.tag=11,s=c_(null,s,o,d,c);break e}else if(m===C){s.tag=14,s=f_(null,s,o,d,c);break e}}throw s=ze(o)||o,Error(r(306,s,""))}}return s;case 0:return J1(o,s,s.type,s.pendingProps,c);case 1:return d=s.type,m=is(d,s.pendingProps),m_(o,s,d,m,c);case 3:e:{if(an(s,s.stateNode.containerInfo),o===null)throw Error(r(387));d=s.pendingProps;var y=s.memoizedState;m=y.element,I1(o,s),Jl(s,d,null,c);var w=s.memoizedState;if(d=w.cache,La(s,$t,d),d!==y.cache&&x1(s,[$t],c,!0),Zl(),d=w.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=y_(o,s,d,c);break e}else if(d!==m){m=br(Error(r(424)),s),Xl(m),s=y_(o,s,d,c);break e}else for(o=s.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,It=Mr(o.firstChild),Cn=s,Ye=!0,Ma=null,Or=!0,c=dy(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Qo(),d===m){s=Zi(o,s,c);break e}Rn(o,s,d,c)}s=s.child}return s;case 26:return Ph(o,s),o===null?(c=M2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ye||(c=s.type,o=s.pendingProps,d=$h(ke.current).createElement(c),d[Yt]=s,d[vn]=o,Dn(d,c,o),Wt(d),s.stateNode=d):s.memoizedState=M2(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Do(s),o===null&&Ye&&(d=s.stateNode=D2(s.type,s.pendingProps,ke.current),Cn=s,Or=!0,m=It,Ya(s.type)?(Fp=m,It=Mr(d.firstChild)):It=m),Rn(o,s,s.pendingProps.children,c),Ph(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Ye&&((m=d=It)&&(d=GI(d,s.type,s.pendingProps,Or),d!==null?(s.stateNode=d,Cn=s,It=Mr(d.firstChild),Or=!1,m=!0):m=!1),m||Pa(s)),Do(s),m=s.type,y=s.pendingProps,w=o!==null?o.memoizedProps:null,d=y.children,Pp(m,y)?d=null:w!==null&&Pp(m,w)&&(s.flags|=32),s.memoizedState!==null&&(m=M1(o,s,aI,null,null,c),_c._currentValue=m),Ph(o,s),Rn(o,s,d,c),s.child;case 6:return o===null&&Ye&&((o=c=It)&&(c=qI(c,s.pendingProps,Or),c!==null?(s.stateNode=c,Cn=s,It=null,o=!0):o=!1),o||Pa(s)),null;case 13:return __(o,s,c);case 4:return an(s,s.stateNode.containerInfo),d=s.pendingProps,o===null?s.child=ns(s,null,d,c):Rn(o,s,d,c),s.child;case 11:return c_(o,s,s.type,s.pendingProps,c);case 7:return Rn(o,s,s.pendingProps,c),s.child;case 8:return Rn(o,s,s.pendingProps.children,c),s.child;case 12:return Rn(o,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,La(s,s.type,d.value),Rn(o,s,d.children,c),s.child;case 9:return m=s.type._context,d=s.pendingProps.children,Zo(s),m=bn(m),d=d(m),s.flags|=1,Rn(o,s,d,c),s.child;case 14:return f_(o,s,s.type,s.pendingProps,c);case 15:return h_(o,s,s.type,s.pendingProps,c);case 19:return E_(o,s,c);case 31:return dI(o,s,c);case 22:return d_(o,s,c,s.pendingProps);case 24:return Zo(s),d=bn($t),o===null?(m=w1(),m===null&&(m=Tt,y=E1(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),s.memoizedState={parent:d,cache:m},S1(s),La(s,$t,m)):((o.lanes&c)!==0&&(I1(o,s),Jl(s,null,null,c),Zl()),m=o.memoizedState,y=s.memoizedState,m.parent!==d?(m={parent:d,cache:d},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),La(s,$t,d)):(d=y.cache,La(s,$t,d),d!==m.cache&&x1(s,[$t],c,!0))),Rn(o,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Ji(o){o.flags|=4}function sp(o,s,c,d,m){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(m&335544128)===m)if(o.stateNode.complete)o.flags|=8192;else if(W_())o.flags|=8192;else throw ts=_h,T1}else o.flags&=-16777217}function w_(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!V2(s))if(W_())o.flags|=8192;else throw ts=_h,T1}function kh(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?jf():536870912,o.lanes|=s,Eu|=s)}function ac(o,s){if(!Ye)switch(o.tailMode){case"hidden":s=o.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Ct(o){var s=o.alternate!==null&&o.alternate.child===o.child,c=0,d=0;if(s)for(var m=o.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=o,m=m.sibling;else for(m=o.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=o,m=m.sibling;return o.subtreeFlags|=d,o.childLanes=c,s}function gI(o,s,c){var d=s.pendingProps;switch(g1(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(s),null;case 1:return Ct(s),null;case 3:return c=s.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Wi($t),Dt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(uu(s)?Ji(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,m1())),Ct(s),null;case 26:var m=s.type,y=s.memoizedState;return o===null?(Ji(s),y!==null?(Ct(s),w_(s,y)):(Ct(s),sp(s,m,null,d,c))):y?y!==o.memoizedState?(Ji(s),Ct(s),w_(s,y)):(Ct(s),s.flags&=-16777217):(o=o.memoizedProps,o!==d&&Ji(s),Ct(s),sp(s,m,o,d,c)),null;case 27:if(Us(s),c=ke.current,m=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==d&&Ji(s);else{if(!d){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}o=ve.current,uu(s)?ny(s):(o=D2(m,d,c),s.stateNode=o,Ji(s))}return Ct(s),null;case 5:if(Us(s),m=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==d&&Ji(s);else{if(!d){if(s.stateNode===null)throw Error(r(166));return Ct(s),null}if(y=ve.current,uu(s))ny(s);else{var w=$h(ke.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?w.createElement(m,{is:d.is}):w.createElement(m)}}y[Yt]=s,y[vn]=d;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=y;e:switch(Dn(y,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ji(s)}}return Ct(s),sp(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,c),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==d&&Ji(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(r(166));if(o=ke.current,uu(s)){if(o=s.stateNode,c=s.memoizedProps,d=null,m=Cn,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}o[Yt]=s,o=!!(o.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||_2(o.nodeValue,c)),o||Pa(s,!0)}else o=$h(o).createTextNode(d),o[Yt]=s,s.stateNode=o}return Ct(s),null;case 31:if(c=s.memoizedState,o===null||o.memoizedState!==null){if(d=uu(s),c!==null){if(o===null){if(!d)throw Error(r(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[Yt]=s}else Qo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),o=!1}else c=m1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return s.flags&256?(pr(s),s):(pr(s),null);if((s.flags&128)!==0)throw Error(r(558))}return Ct(s),null;case 13:if(d=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(m=uu(s),d!==null&&d.dehydrated!==null){if(o===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Yt]=s}else Qo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ct(s),m=!1}else m=m1(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(pr(s),s):(pr(s),null)}return pr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=d!==null,o=o!==null&&o.memoizedState!==null,c&&(d=s.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048)),c!==o&&c&&(s.child.flags|=8192),kh(s,s.updateQueue),Ct(s),null);case 4:return Dt(),o===null&&Rp(s.stateNode.containerInfo),Ct(s),null;case 10:return Wi(s.type),Ct(s),null;case 19:if(ue(Ht),d=s.memoizedState,d===null)return Ct(s),null;if(m=(s.flags&128)!==0,y=d.rendering,y===null)if(m)ac(d,!1);else{if(Ft!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(y=wh(o),y!==null){for(s.flags|=128,ac(d,!1),o=y.updateQueue,s.updateQueue=o,kh(s,o),s.subtreeFlags=0,o=c,c=s.child;c!==null;)$m(c,o),c=c.sibling;return ge(Ht,Ht.current&1|2),Ye&&Ki(s,d.treeForkCount),s.child}o=o.sibling}d.tail!==null&&Gn()>zh&&(s.flags|=128,m=!0,ac(d,!1),s.lanes=4194304)}else{if(!m)if(o=wh(y),o!==null){if(s.flags|=128,m=!0,o=o.updateQueue,s.updateQueue=o,kh(s,o),ac(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ye)return Ct(s),null}else 2*Gn()-d.renderingStartTime>zh&&c!==536870912&&(s.flags|=128,m=!0,ac(d,!1),s.lanes=4194304);d.isBackwards?(y.sibling=s.child,s.child=y):(o=d.last,o!==null?o.sibling=y:s.child=y,d.last=y)}return d.tail!==null?(o=d.tail,d.rendering=o,d.tail=o.sibling,d.renderingStartTime=Gn(),o.sibling=null,c=Ht.current,ge(Ht,m?c&1|2:c&1),Ye&&Ki(s,d.treeForkCount),o):(Ct(s),null);case 22:case 23:return pr(s),D1(),d=s.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(Ct(s),s.subtreeFlags&6&&(s.flags|=8192)):Ct(s),c=s.updateQueue,c!==null&&kh(s,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),o!==null&&ue(Jo),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Wi($t),Ct(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function vI(o,s){switch(g1(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Wi($t),Dt(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return Us(s),null;case 31:if(s.memoizedState!==null){if(pr(s),s.alternate===null)throw Error(r(340));Qo()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(pr(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Qo()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return ue(Ht),null;case 4:return Dt(),null;case 10:return Wi(s.type),null;case 22:case 23:return pr(s),D1(),o!==null&&ue(Jo),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return Wi($t),null;case 25:return null;default:return null}}function T_(o,s){switch(g1(s),s.tag){case 3:Wi($t),Dt();break;case 26:case 27:case 5:Us(s);break;case 4:Dt();break;case 31:s.memoizedState!==null&&pr(s);break;case 13:pr(s);break;case 19:ue(Ht);break;case 10:Wi(s.type);break;case 22:case 23:pr(s),D1(),o!==null&&ue(Jo);break;case 24:Wi($t)}}function oc(o,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&o)===o){d=void 0;var y=c.create,w=c.inst;d=y(),w.destroy=d}c=c.next}while(c!==m)}}catch(I){ht(s,s.return,I)}}function za(o,s,c){try{var d=s.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&o)===o){var w=d.inst,I=w.destroy;if(I!==void 0){w.destroy=void 0,m=s;var F=c,Q=I;try{Q()}catch(ie){ht(m,F,ie)}}}d=d.next}while(d!==y)}}catch(ie){ht(s,s.return,ie)}}function S_(o){var s=o.updateQueue;if(s!==null){var c=o.stateNode;try{gy(s,c)}catch(d){ht(o,o.return,d)}}}function I_(o,s,c){c.props=is(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(d){ht(o,s,d)}}function sc(o,s){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof c=="function"?o.refCleanup=c(d):c.current=d}}catch(m){ht(o,s,m)}}function Ri(o,s){var c=o.ref,d=o.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(m){ht(o,s,m)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){ht(o,s,m)}else c.current=null}function C_(o){var s=o.type,c=o.memoizedProps,d=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(m){ht(o,o.return,m)}}function up(o,s,c){try{var d=o.stateNode;VI(d,o.type,c,s),d[vn]=s}catch(m){ht(o,o.return,m)}}function b_(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ya(o.type)||o.tag===4}function lp(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||b_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ya(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function cp(o,s,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(o),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Kr));else if(d!==4&&(d===27&&Ya(o.type)&&(c=o.stateNode,s=null),o=o.child,o!==null))for(cp(o,s,c),o=o.sibling;o!==null;)cp(o,s,c),o=o.sibling}function Bh(o,s,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,s?c.insertBefore(o,s):c.appendChild(o);else if(d!==4&&(d===27&&Ya(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Bh(o,s,c),o=o.sibling;o!==null;)Bh(o,s,c),o=o.sibling}function R_(o){var s=o.stateNode,c=o.memoizedProps;try{for(var d=o.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Dn(s,d,c),s[Yt]=o,s[vn]=c}catch(y){ht(o,o.return,y)}}var ea=!1,en=!1,fp=!1,D_=typeof WeakSet=="function"?WeakSet:Set,yn=null;function mI(o,s){if(o=o.containerInfo,Np=id,o=jm(o),i1(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,I=-1,F=-1,Q=0,ie=0,se=o,Z=null;t:for(;;){for(var te;se!==c||m!==0&&se.nodeType!==3||(I=w+m),se!==y||d!==0&&se.nodeType!==3||(F=w+d),se.nodeType===3&&(w+=se.nodeValue.length),(te=se.firstChild)!==null;)Z=se,se=te;for(;;){if(se===o)break t;if(Z===c&&++Q===m&&(I=w),Z===y&&++ie===d&&(F=w),(te=se.nextSibling)!==null)break;se=Z,Z=se.parentNode}se=te}c=I===-1||F===-1?null:{start:I,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Mp={focusedElem:o,selectionRange:c},id=!1,yn=s;yn!==null;)if(s=yn,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,yn=o;else for(;yn!==null;){switch(s=yn,y=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)m=o[c],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&y!==null){o=void 0,c=s,m=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var me=is(c.type,m);o=d.getSnapshotBeforeUpdate(me,y),d.__reactInternalSnapshotBeforeUpdate=o}catch(be){ht(c,c.return,be)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,c=o.nodeType,c===9)kp(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":kp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=s.sibling,o!==null){o.return=s.return,yn=o;break}yn=s.return}}function O_(o,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:na(o,c),d&4&&oc(5,c);break;case 1:if(na(o,c),d&4)if(o=c.stateNode,s===null)try{o.componentDidMount()}catch(w){ht(c,c.return,w)}else{var m=is(c.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(m,s,o.__reactInternalSnapshotBeforeUpdate)}catch(w){ht(c,c.return,w)}}d&64&&S_(c),d&512&&sc(c,c.return);break;case 3:if(na(o,c),d&64&&(o=c.updateQueue,o!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{gy(o,s)}catch(w){ht(c,c.return,w)}}break;case 27:s===null&&d&4&&R_(c);case 26:case 5:na(o,c),s===null&&d&4&&C_(c),d&512&&sc(c,c.return);break;case 12:na(o,c);break;case 31:na(o,c),d&4&&P_(o,c);break;case 13:na(o,c),d&4&&L_(o,c),d&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=II.bind(null,c),XI(o,c))));break;case 22:if(d=c.memoizedState!==null||ea,!d){s=s!==null&&s.memoizedState!==null||en,m=ea;var y=en;ea=d,(en=s)&&!y?ra(o,c,(c.subtreeFlags&8772)!==0):na(o,c),ea=m,en=y}break;case 30:break;default:na(o,c)}}function N_(o){var s=o.alternate;s!==null&&(o.alternate=null,N_(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&qs(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Nt=null,er=!1;function ta(o,s,c){for(c=c.child;c!==null;)M_(o,s,c),c=c.sibling}function M_(o,s,c){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Hr,c)}catch{}switch(c.tag){case 26:en||Ri(c,s),ta(o,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:en||Ri(c,s);var d=Nt,m=er;Ya(c.type)&&(Nt=c.stateNode,er=!1),ta(o,s,c),vc(c.stateNode),Nt=d,er=m;break;case 5:en||Ri(c,s);case 6:if(d=Nt,m=er,Nt=null,ta(o,s,c),Nt=d,er=m,Nt!==null)if(er)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(c.stateNode)}catch(y){ht(c,s,y)}else try{Nt.removeChild(c.stateNode)}catch(y){ht(c,s,y)}break;case 18:Nt!==null&&(er?(o=Nt,S2(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),Ru(o)):S2(Nt,c.stateNode));break;case 4:d=Nt,m=er,Nt=c.stateNode.containerInfo,er=!0,ta(o,s,c),Nt=d,er=m;break;case 0:case 11:case 14:case 15:za(2,c,s),en||za(4,c,s),ta(o,s,c);break;case 1:en||(Ri(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&I_(c,s,d)),ta(o,s,c);break;case 21:ta(o,s,c);break;case 22:en=(d=en)||c.memoizedState!==null,ta(o,s,c),en=d;break;default:ta(o,s,c)}}function P_(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Ru(o)}catch(c){ht(s,s.return,c)}}}function L_(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Ru(o)}catch(c){ht(s,s.return,c)}}function yI(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new D_),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new D_),s;default:throw Error(r(435,o.tag))}}function Vh(o,s){var c=yI(o);s.forEach(function(d){if(!c.has(d)){c.add(d);var m=CI.bind(null,o,d);d.then(m,m)}})}function tr(o,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d],y=o,w=s,I=w;e:for(;I!==null;){switch(I.tag){case 27:if(Ya(I.type)){Nt=I.stateNode,er=!1;break e}break;case 5:Nt=I.stateNode,er=!1;break e;case 3:case 4:Nt=I.stateNode.containerInfo,er=!0;break e}I=I.return}if(Nt===null)throw Error(r(160));M_(y,w,m),Nt=null,er=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)k_(s,o),s=s.sibling}var Jr=null;function k_(o,s){var c=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:tr(s,o),nr(o),d&4&&(za(3,o,o.return),oc(3,o),za(5,o,o.return));break;case 1:tr(s,o),nr(o),d&512&&(en||c===null||Ri(c,c.return)),d&64&&ea&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var m=Jr;if(tr(s,o),nr(o),d&512&&(en||c===null||Ri(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=o.memoizedState,c===null)if(d===null)if(o.stateNode===null){e:{d=o.type,c=o.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":y=m.getElementsByTagName("title")[0],(!y||y[gi]||y[Yt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(d),m.head.insertBefore(y,m.querySelector("head > title"))),Dn(y,d,c),y[Yt]=o,Wt(y),d=y;break e;case"link":var w=k2("link","href",m).get(d+(c.href||""));if(w){for(var I=0;I<w.length;I++)if(y=w[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(I,1);break t}}y=m.createElement(d),Dn(y,d,c),m.head.appendChild(y);break;case"meta":if(w=k2("meta","content",m).get(d+(c.content||""))){for(I=0;I<w.length;I++)if(y=w[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(I,1);break t}}y=m.createElement(d),Dn(y,d,c),m.head.appendChild(y);break;default:throw Error(r(468,d))}y[Yt]=o,Wt(y),d=y}o.stateNode=d}else B2(m,o.type,o.stateNode);else o.stateNode=L2(m,d,o.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?B2(m,o.type,o.stateNode):L2(m,d,o.memoizedProps)):d===null&&o.stateNode!==null&&up(o,o.memoizedProps,c.memoizedProps)}break;case 27:tr(s,o),nr(o),d&512&&(en||c===null||Ri(c,c.return)),c!==null&&d&4&&up(o,o.memoizedProps,c.memoizedProps);break;case 5:if(tr(s,o),nr(o),d&512&&(en||c===null||Ri(c,c.return)),o.flags&32){m=o.stateNode;try{Jn(m,"")}catch(me){ht(o,o.return,me)}}d&4&&o.stateNode!=null&&(m=o.memoizedProps,up(o,m,c!==null?c.memoizedProps:m)),d&1024&&(fp=!0);break;case 6:if(tr(s,o),nr(o),d&4){if(o.stateNode===null)throw Error(r(162));d=o.memoizedProps,c=o.stateNode;try{c.nodeValue=d}catch(me){ht(o,o.return,me)}}break;case 3:if(ed=null,m=Jr,Jr=Zh(s.containerInfo),tr(s,o),Jr=m,nr(o),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ru(s.containerInfo)}catch(me){ht(o,o.return,me)}fp&&(fp=!1,B_(o));break;case 4:d=Jr,Jr=Zh(o.stateNode.containerInfo),tr(s,o),nr(o),Jr=d;break;case 12:tr(s,o),nr(o);break;case 31:tr(s,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 13:tr(s,o),nr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Uh=Gn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 22:m=o.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,Q=ea,ie=en;if(ea=Q||m,en=ie||F,tr(s,o),en=ie,ea=Q,nr(o),d&8192)e:for(s=o.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(c===null||F||ea||en||as(o)),c=null,s=o;;){if(s.tag===5||s.tag===26){if(c===null){F=c=s;try{if(y=F.stateNode,m)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{I=F.stateNode;var se=F.memoizedProps.style,Z=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(me){ht(F,F.return,me)}}}else if(s.tag===6){if(c===null){F=s;try{F.stateNode.nodeValue=m?"":F.memoizedProps}catch(me){ht(F,F.return,me)}}}else if(s.tag===18){if(c===null){F=s;try{var te=F.stateNode;m?I2(te,!0):I2(F.stateNode,!1)}catch(me){ht(F,F.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=o.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Vh(o,c))));break;case 19:tr(s,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Vh(o,d)));break;case 30:break;case 21:break;default:tr(s,o),nr(o)}}function nr(o){var s=o.flags;if(s&2){try{for(var c,d=o.return;d!==null;){if(b_(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var m=c.stateNode,y=lp(o);Bh(o,y,m);break;case 5:var w=c.stateNode;c.flags&32&&(Jn(w,""),c.flags&=-33);var I=lp(o);Bh(o,I,w);break;case 3:case 4:var F=c.stateNode.containerInfo,Q=lp(o);cp(o,Q,F);break;default:throw Error(r(161))}}catch(ie){ht(o,o.return,ie)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function B_(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;B_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function na(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)O_(o,s.alternate,s),s=s.sibling}function as(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:za(4,s,s.return),as(s);break;case 1:Ri(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&I_(s,s.return,c),as(s);break;case 27:vc(s.stateNode);case 26:case 5:Ri(s,s.return),as(s);break;case 22:s.memoizedState===null&&as(s);break;case 30:as(s);break;default:as(s)}o=o.sibling}}function ra(o,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,m=o,y=s,w=y.flags;switch(y.tag){case 0:case 11:case 15:ra(m,y,c),oc(4,y);break;case 1:if(ra(m,y,c),d=y,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Q){ht(d,d.return,Q)}if(d=y,m=d.updateQueue,m!==null){var I=d.stateNode;try{var F=m.shared.hiddenCallbacks;if(F!==null)for(m.shared.hiddenCallbacks=null,m=0;m<F.length;m++)py(F[m],I)}catch(Q){ht(d,d.return,Q)}}c&&w&64&&S_(y),sc(y,y.return);break;case 27:R_(y);case 26:case 5:ra(m,y,c),c&&d===null&&w&4&&C_(y),sc(y,y.return);break;case 12:ra(m,y,c);break;case 31:ra(m,y,c),c&&w&4&&P_(m,y);break;case 13:ra(m,y,c),c&&w&4&&L_(m,y);break;case 22:y.memoizedState===null&&ra(m,y,c),sc(y,y.return);break;case 30:break;default:ra(m,y,c)}s=s.sibling}}function hp(o,s){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&Kl(c))}function dp(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Kl(o))}function ei(o,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)V_(o,s,c,d),s=s.sibling}function V_(o,s,c,d){var m=s.flags;switch(s.tag){case 0:case 11:case 15:ei(o,s,c,d),m&2048&&oc(9,s);break;case 1:ei(o,s,c,d);break;case 3:ei(o,s,c,d),m&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Kl(o)));break;case 12:if(m&2048){ei(o,s,c,d),o=s.stateNode;try{var y=s.memoizedProps,w=y.id,I=y.onPostCommit;typeof I=="function"&&I(w,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){ht(s,s.return,F)}}else ei(o,s,c,d);break;case 31:ei(o,s,c,d);break;case 13:ei(o,s,c,d);break;case 23:break;case 22:y=s.stateNode,w=s.alternate,s.memoizedState!==null?y._visibility&2?ei(o,s,c,d):uc(o,s):y._visibility&2?ei(o,s,c,d):(y._visibility|=2,yu(o,s,c,d,(s.subtreeFlags&10256)!==0||!1)),m&2048&&hp(w,s);break;case 24:ei(o,s,c,d),m&2048&&dp(s.alternate,s);break;default:ei(o,s,c,d)}}function yu(o,s,c,d,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=o,w=s,I=c,F=d,Q=w.flags;switch(w.tag){case 0:case 11:case 15:yu(y,w,I,F,m),oc(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?yu(y,w,I,F,m):uc(y,w):(ie._visibility|=2,yu(y,w,I,F,m)),m&&Q&2048&&hp(w.alternate,w);break;case 24:yu(y,w,I,F,m),m&&Q&2048&&dp(w.alternate,w);break;default:yu(y,w,I,F,m)}s=s.sibling}}function uc(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=o,d=s,m=d.flags;switch(d.tag){case 22:uc(c,d),m&2048&&hp(d.alternate,d);break;case 24:uc(c,d),m&2048&&dp(d.alternate,d);break;default:uc(c,d)}s=s.sibling}}var lc=8192;function _u(o,s,c){if(o.subtreeFlags&lc)for(o=o.child;o!==null;)F_(o,s,c),o=o.sibling}function F_(o,s,c){switch(o.tag){case 26:_u(o,s,c),o.flags&lc&&o.memoizedState!==null&&iC(c,Jr,o.memoizedState,o.memoizedProps);break;case 5:_u(o,s,c);break;case 3:case 4:var d=Jr;Jr=Zh(o.stateNode.containerInfo),_u(o,s,c),Jr=d;break;case 22:o.memoizedState===null&&(d=o.alternate,d!==null&&d.memoizedState!==null?(d=lc,lc=16777216,_u(o,s,c),lc=d):_u(o,s,c));break;default:_u(o,s,c)}}function U_(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function cc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];yn=d,j_(d,o)}U_(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)z_(o),o=o.sibling}function z_(o){switch(o.tag){case 0:case 11:case 15:cc(o),o.flags&2048&&za(9,o,o.return);break;case 3:cc(o);break;case 12:cc(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,Fh(o)):cc(o);break;default:cc(o)}}function Fh(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];yn=d,j_(d,o)}U_(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:za(8,s,s.return),Fh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Fh(s));break;default:Fh(s)}o=o.sibling}}function j_(o,s){for(;yn!==null;){var c=yn;switch(c.tag){case 0:case 11:case 15:za(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Kl(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,yn=d;else e:for(c=o;yn!==null;){d=yn;var m=d.sibling,y=d.return;if(N_(d),d===c){yn=null;break e}if(m!==null){m.return=y,yn=m;break e}yn=y}}}var _I={getCacheForType:function(o){var s=bn($t),c=s.data.get(o);return c===void 0&&(c=o(),s.data.set(o,c)),c},cacheSignal:function(){return bn($t).controller.signal}},xI=typeof WeakMap=="function"?WeakMap:Map,it=0,Tt=null,je=null,Ge=0,ft=0,gr=null,ja=!1,xu=!1,pp=!1,ia=0,Ft=0,Ha=0,os=0,gp=0,vr=0,Eu=0,fc=null,rr=null,vp=!1,Uh=0,H_=0,zh=1/0,jh=null,Ga=null,sn=0,qa=null,Au=null,aa=0,mp=0,yp=null,G_=null,hc=0,_p=null;function mr(){return(it&2)!==0&&Ge!==0?Ge&-Ge:ne.T!==null?Sp():Hf()}function q_(){if(vr===0)if((Ge&536870912)===0||Ye){var o=Mo;Mo<<=1,(Mo&3932160)===0&&(Mo=262144),vr=o}else vr=536870912;return o=dr.current,o!==null&&(o.flags|=32),vr}function ir(o,s,c){(o===Tt&&(ft===2||ft===9)||o.cancelPendingCommit!==null)&&(wu(o,0),Xa(o,Ge,vr,!1)),Po(o,c),((it&2)===0||o!==Tt)&&(o===Tt&&((it&2)===0&&(os|=c),Ft===4&&Xa(o,Ge,vr,!1)),Di(o))}function X_(o,s,c){if((it&6)!==0)throw Error(r(327));var d=!c&&(s&127)===0&&(s&o.expiredLanes)===0||Gr(o,s),m=d?wI(o,s):Ep(o,s,!0),y=d;do{if(m===0){xu&&!d&&Xa(o,s,0,!1);break}else{if(c=o.current.alternate,y&&!EI(c)){m=Ep(o,s,!1),y=!1;continue}if(m===2){if(y=s,o.errorRecoveryDisabledLanes&y)var w=0;else w=o.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var I=o;m=fc;var F=I.current.memoizedState.isDehydrated;if(F&&(wu(I,w).flags|=256),w=Ep(I,w,!1),w!==2){if(pp&&!F){I.errorRecoveryDisabledLanes|=y,os|=y,m=4;break e}y=rr,rr=m,y!==null&&(rr===null?rr=y:rr.push.apply(rr,y))}m=w}if(y=!1,m!==2)continue}}if(m===1){wu(o,0),Xa(o,s,0,!0);break}e:{switch(d=o,y=m,y){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Xa(d,s,vr,!ja);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Uh+300-Gn(),10<m)){if(Xa(d,s,vr,!ja),hi(d,0,!0)!==0)break e;aa=s,d.timeoutHandle=w2(K_.bind(null,d,c,rr,jh,vp,s,vr,os,Eu,ja,y,"Throttled",-0,0),m);break e}K_(d,c,rr,jh,vp,s,vr,os,Eu,ja,y,null,-0,0)}}break}while(!0);Di(o)}function K_(o,s,c,d,m,y,w,I,F,Q,ie,se,Z,te){if(o.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kr},F_(s,y,se);var me=(y&62914560)===y?Uh-Gn():(y&4194048)===y?H_-Gn():0;if(me=aC(se,me),me!==null){aa=y,o.cancelPendingCommit=me(t2.bind(null,o,s,y,c,d,m,w,I,F,ie,se,null,Z,te)),Xa(o,y,w,!Q);return}}t2(o,s,y,c,d,m,w,I,F)}function EI(o){for(var s=o;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var m=c[d],y=m.getSnapshot;m=m.value;try{if(!fr(y(),m))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xa(o,s,c,d){s&=~gp,s&=~os,o.suspendedLanes|=s,o.pingedLanes&=~s,d&&(o.warmLanes|=s),d=o.expirationTimes;for(var m=s;0<m;){var y=31-zt(m),w=1<<y;d[y]=-1,m&=~w}c!==0&&Lo(o,c,s)}function Hh(){return(it&6)===0?(dc(0),!1):!0}function xp(){if(je!==null){if(ft===0)var o=je.return;else o=je,Yi=$o=null,k1(o),du=null,Wl=0,o=je;for(;o!==null;)T_(o.alternate,o),o=o.return;je=null}}function wu(o,s){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,zI(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),aa=0,xp(),Tt=o,je=c=Xi(o.current,null),Ge=s,ft=0,gr=null,ja=!1,xu=Gr(o,s),pp=!1,Eu=vr=gp=os=Ha=Ft=0,rr=fc=null,vp=!1,(s&8)!==0&&(s|=s&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=s;0<d;){var m=31-zt(d),y=1<<m;s|=o[m],d&=~y}return ia=s,ch(),c}function Y_(o,s){Le=null,ne.H=rc,s===hu||s===yh?(s=cy(),ft=3):s===T1?(s=cy(),ft=4):ft=s===Z1?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,gr=s,je===null&&(Ft=1,Nh(o,br(s,o.current)))}function W_(){var o=dr.current;return o===null?!0:(Ge&4194048)===Ge?Nr===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?o===Nr:!1}function Q_(){var o=ne.H;return ne.H=rc,o===null?rc:o}function $_(){var o=ne.A;return ne.A=_I,o}function Gh(){Ft=4,ja||(Ge&4194048)!==Ge&&dr.current!==null||(xu=!0),(Ha&134217727)===0&&(os&134217727)===0||Tt===null||Xa(Tt,Ge,vr,!1)}function Ep(o,s,c){var d=it;it|=2;var m=Q_(),y=$_();(Tt!==o||Ge!==s)&&(jh=null,wu(o,s)),s=!1;var w=Ft;e:do try{if(ft!==0&&je!==null){var I=je,F=gr;switch(ft){case 8:xp(),w=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(s=!0);var Q=ft;if(ft=0,gr=null,Tu(o,I,F,Q),c&&xu){w=0;break e}break;default:Q=ft,ft=0,gr=null,Tu(o,I,F,Q)}}AI(),w=Ft;break}catch(ie){Y_(o,ie)}while(!0);return s&&o.shellSuspendCounter++,Yi=$o=null,it=d,ne.H=m,ne.A=y,je===null&&(Tt=null,Ge=0,ch()),w}function AI(){for(;je!==null;)Z_(je)}function wI(o,s){var c=it;it|=2;var d=Q_(),m=$_();Tt!==o||Ge!==s?(jh=null,zh=Gn()+500,wu(o,s)):xu=Gr(o,s);e:do try{if(ft!==0&&je!==null){s=je;var y=gr;t:switch(ft){case 1:ft=0,gr=null,Tu(o,s,y,1);break;case 2:case 9:if(uy(y)){ft=0,gr=null,J_(s);break}s=function(){ft!==2&&ft!==9||Tt!==o||(ft=7),Di(o)},y.then(s,s);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:uy(y)?(ft=0,gr=null,J_(s)):(ft=0,gr=null,Tu(o,s,y,7));break;case 5:var w=null;switch(je.tag){case 26:w=je.memoizedState;case 5:case 27:var I=je;if(w?V2(w):I.stateNode.complete){ft=0,gr=null;var F=I.sibling;if(F!==null)je=F;else{var Q=I.return;Q!==null?(je=Q,qh(Q)):je=null}break t}}ft=0,gr=null,Tu(o,s,y,5);break;case 6:ft=0,gr=null,Tu(o,s,y,6);break;case 8:xp(),Ft=6;break e;default:throw Error(r(462))}}TI();break}catch(ie){Y_(o,ie)}while(!0);return Yi=$o=null,ne.H=d,ne.A=m,it=c,je!==null?0:(Tt=null,Ge=0,ch(),Ft)}function TI(){for(;je!==null&&!$0();)Z_(je)}function Z_(o){var s=A_(o.alternate,o,ia);o.memoizedProps=o.pendingProps,s===null?qh(o):je=s}function J_(o){var s=o,c=s.alternate;switch(s.tag){case 15:case 0:s=v_(c,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=v_(c,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:k1(s);default:T_(c,s),s=je=$m(s,ia),s=A_(c,s,ia)}o.memoizedProps=o.pendingProps,s===null?qh(o):je=s}function Tu(o,s,c,d){Yi=$o=null,k1(s),du=null,Wl=0;var m=s.return;try{if(hI(o,m,s,c,Ge)){Ft=1,Nh(o,br(c,o.current)),je=null;return}}catch(y){if(m!==null)throw je=m,y;Ft=1,Nh(o,br(c,o.current)),je=null;return}s.flags&32768?(Ye||d===1?o=!0:xu||(Ge&536870912)!==0?o=!1:(ja=o=!0,(d===2||d===9||d===3||d===6)&&(d=dr.current,d!==null&&d.tag===13&&(d.flags|=16384))),e2(s,o)):qh(s)}function qh(o){var s=o;do{if((s.flags&32768)!==0){e2(s,ja);return}o=s.return;var c=gI(s.alternate,s,ia);if(c!==null){je=c;return}if(s=s.sibling,s!==null){je=s;return}je=s=o}while(s!==null);Ft===0&&(Ft=5)}function e2(o,s){do{var c=vI(o.alternate,o);if(c!==null){c.flags&=32767,je=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(o=o.sibling,o!==null)){je=o;return}je=o=c}while(o!==null);Ft=6,je=null}function t2(o,s,c,d,m,y,w,I,F){o.cancelPendingCommit=null;do Xh();while(sn!==0);if((it&6)!==0)throw Error(r(327));if(s!==null){if(s===o.current)throw Error(r(177));if(y=s.lanes|s.childLanes,y|=l1,e1(o,c,y,w,I,F),o===Tt&&(je=Tt=null,Ge=0),Au=s,qa=o,aa=c,mp=y,yp=m,G_=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,bI(Aa,function(){return o2(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null,m=he.p,he.p=2,w=it,it|=4;try{mI(o,s,c)}finally{it=w,he.p=m,ne.T=d}}sn=1,n2(),r2(),i2()}}function n2(){if(sn===1){sn=0;var o=qa,s=Au,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null;var d=he.p;he.p=2;var m=it;it|=4;try{k_(s,o);var y=Mp,w=jm(o.containerInfo),I=y.focusedElem,F=y.selectionRange;if(w!==I&&I&&I.ownerDocument&&zm(I.ownerDocument.documentElement,I)){if(F!==null&&i1(I)){var Q=F.start,ie=F.end;if(ie===void 0&&(ie=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(ie,I.value.length);else{var se=I.ownerDocument||document,Z=se&&se.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),me=I.textContent.length,be=Math.min(F.start,me),At=F.end===void 0?be:Math.min(F.end,me);!te.extend&&be>At&&(w=At,At=be,be=w);var q=Um(I,be),j=Um(I,At);if(q&&j&&(te.rangeCount!==1||te.anchorNode!==q.node||te.anchorOffset!==q.offset||te.focusNode!==j.node||te.focusOffset!==j.offset)){var W=se.createRange();W.setStart(q.node,q.offset),te.removeAllRanges(),be>At?(te.addRange(W),te.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),te.addRange(W))}}}}for(se=[],te=I;te=te.parentNode;)te.nodeType===1&&se.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var oe=se[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}id=!!Np,Mp=Np=null}finally{it=m,he.p=d,ne.T=c}}o.current=s,sn=2}}function r2(){if(sn===2){sn=0;var o=qa,s=Au,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=ne.T,ne.T=null;var d=he.p;he.p=2;var m=it;it|=4;try{O_(o,s.alternate,s)}finally{it=m,he.p=d,ne.T=c}}sn=3}}function i2(){if(sn===4||sn===3){sn=0,kf();var o=qa,s=Au,c=aa,d=G_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?sn=5:(sn=0,Au=qa=null,a2(o,o.pendingLanes));var m=o.pendingLanes;if(m===0&&(Ga=null),ji(c),s=s.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Hr,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=ne.T,m=he.p,he.p=2,ne.T=null;try{for(var y=o.onRecoverableError,w=0;w<d.length;w++){var I=d[w];y(I.value,{componentStack:I.stack})}}finally{ne.T=s,he.p=m}}(aa&3)!==0&&Xh(),Di(o),m=o.pendingLanes,(c&261930)!==0&&(m&42)!==0?o===_p?hc++:(hc=0,_p=o):hc=0,dc(0)}}function a2(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,Kl(s)))}function Xh(){return n2(),r2(),i2(),o2()}function o2(){if(sn!==5)return!1;var o=qa,s=mp;mp=0;var c=ji(aa),d=ne.T,m=he.p;try{he.p=32>c?32:c,ne.T=null,c=yp,yp=null;var y=qa,w=aa;if(sn=0,Au=qa=null,aa=0,(it&6)!==0)throw Error(r(331));var I=it;if(it|=4,z_(y.current),V_(y,y.current,w,c),it=I,dc(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Hr,y)}catch{}return!0}finally{he.p=m,ne.T=d,a2(o,s)}}function s2(o,s,c){s=br(c,s),s=$1(o.stateNode,s,2),o=Va(o,s,2),o!==null&&(Po(o,2),Di(o))}function ht(o,s,c){if(o.tag===3)s2(o,o,c);else for(;s!==null;){if(s.tag===3){s2(s,o,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ga===null||!Ga.has(d))){o=br(c,o),c=u_(2),d=Va(s,c,2),d!==null&&(l_(c,d,s,o),Po(d,2),Di(d));break}}s=s.return}}function Ap(o,s,c){var d=o.pingCache;if(d===null){d=o.pingCache=new xI;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(c)||(pp=!0,m.add(c),o=SI.bind(null,o,s,c),s.then(o,o))}function SI(o,s,c){var d=o.pingCache;d!==null&&d.delete(s),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,Tt===o&&(Ge&c)===c&&(Ft===4||Ft===3&&(Ge&62914560)===Ge&&300>Gn()-Uh?(it&2)===0&&wu(o,0):gp|=c,Eu===Ge&&(Eu=0)),Di(o)}function u2(o,s){s===0&&(s=jf()),o=Yo(o,s),o!==null&&(Po(o,s),Di(o))}function II(o){var s=o.memoizedState,c=0;s!==null&&(c=s.retryLane),u2(o,c)}function CI(o,s){var c=0;switch(o.tag){case 31:case 13:var d=o.stateNode,m=o.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(s),u2(o,c)}function bI(o,s){return on(o,s)}var Kh=null,Su=null,wp=!1,Yh=!1,Tp=!1,Ka=0;function Di(o){o!==Su&&o.next===null&&(Su===null?Kh=Su=o:Su=Su.next=o),Yh=!0,wp||(wp=!0,DI())}function dc(o,s){if(!Tp&&Yh){Tp=!0;do for(var c=!1,d=Kh;d!==null;){if(o!==0){var m=d.pendingLanes;if(m===0)var y=0;else{var w=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-zt(42|o)+1)-1,y&=m&~(w&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,h2(d,y))}else y=Ge,y=hi(d,d===Tt?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Gr(d,y)||(c=!0,h2(d,y));d=d.next}while(c);Tp=!1}}function RI(){l2()}function l2(){Yh=wp=!1;var o=0;Ka!==0&&UI()&&(o=Ka);for(var s=Gn(),c=null,d=Kh;d!==null;){var m=d.next,y=c2(d,s);y===0?(d.next=null,c===null?Kh=m:c.next=m,m===null&&(Su=c)):(c=d,(o!==0||(y&3)!==0)&&(Yh=!0)),d=m}sn!==0&&sn!==5||dc(o),Ka!==0&&(Ka=0)}function c2(o,s){for(var c=o.suspendedLanes,d=o.pingedLanes,m=o.expirationTimes,y=o.pendingLanes&-62914561;0<y;){var w=31-zt(y),I=1<<w,F=m[w];F===-1?((I&c)===0||(I&d)!==0)&&(m[w]=J0(I,s)):F<=s&&(o.expiredLanes|=I),y&=~I}if(s=Tt,c=Ge,c=hi(o,o===s?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,c===0||o===s&&(ft===2||ft===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Ea(d),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||Gr(o,c)){if(s=c&-c,s===o.callbackPriority)return s;switch(d!==null&&Ea(d),ji(c)){case 2:case 8:c=wl;break;case 32:c=Aa;break;case 268435456:c=Bf;break;default:c=Aa}return d=f2.bind(null,o),c=on(c,d),o.callbackPriority=s,o.callbackNode=c,s}return d!==null&&d!==null&&Ea(d),o.callbackPriority=2,o.callbackNode=null,2}function f2(o,s){if(sn!==0&&sn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(Xh()&&o.callbackNode!==c)return null;var d=Ge;return d=hi(o,o===Tt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(X_(o,d,s),c2(o,Gn()),o.callbackNode!=null&&o.callbackNode===c?f2.bind(null,o):null)}function h2(o,s){if(Xh())return null;X_(o,s,!0)}function DI(){jI(function(){(it&6)!==0?on(Al,RI):l2()})}function Sp(){if(Ka===0){var o=cu;o===0&&(o=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ka=o}return Ka}function d2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Ws(""+o)}function p2(o,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,o.id&&c.setAttribute("form",o.id),s.parentNode.insertBefore(c,s),o=new FormData(o),c.parentNode.removeChild(c),o}function OI(o,s,c,d,m){if(s==="submit"&&c&&c.stateNode===m){var y=d2((m[vn]||null).action),w=d.submitter;w&&(s=(s=w[vn]||null)?d2(s.formAction):w.getAttribute("formAction"),s!==null&&(y=s,w=null));var I=new wi("action","action",null,d,m);o.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ka!==0){var F=w?p2(m,w):new FormData(m);q1(c,{pending:!0,data:F,method:m.method,action:y},null,F)}}else typeof y=="function"&&(I.preventDefault(),F=w?p2(m,w):new FormData(m),q1(c,{pending:!0,data:F,method:m.method,action:y},y,F))},currentTarget:m}]})}}for(var Ip=0;Ip<u1.length;Ip++){var Cp=u1[Ip],NI=Cp.toLowerCase(),MI=Cp[0].toUpperCase()+Cp.slice(1);Zr(NI,"on"+MI)}Zr(qm,"onAnimationEnd"),Zr(Xm,"onAnimationIteration"),Zr(Km,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(WS,"onTransitionRun"),Zr(QS,"onTransitionStart"),Zr($S,"onTransitionCancel"),Zr(Ym,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function g2(o,s){s=(s&4)!==0;for(var c=0;c<o.length;c++){var d=o[c],m=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var w=d.length-1;0<=w;w--){var I=d[w],F=I.instance,Q=I.currentTarget;if(I=I.listener,F!==y&&m.isPropagationStopped())break e;y=I,m.currentTarget=Q;try{y(m)}catch(ie){lh(ie)}m.currentTarget=null,y=F}else for(w=0;w<d.length;w++){if(I=d[w],F=I.instance,Q=I.currentTarget,I=I.listener,F!==y&&m.isPropagationStopped())break e;y=I,m.currentTarget=Q;try{y(m)}catch(ie){lh(ie)}m.currentTarget=null,y=F}}}}function He(o,s){var c=s[Gs];c===void 0&&(c=s[Gs]=new Set);var d=o+"__bubble";c.has(d)||(v2(s,o,2,!1),c.add(d))}function bp(o,s,c){var d=0;s&&(d|=4),v2(c,o,d,s)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function Rp(o){if(!o[Wh]){o[Wh]=!0,Il.forEach(function(c){c!=="selectionchange"&&(PI.has(c)||bp(c,!1,o),bp(c,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Wh]||(s[Wh]=!0,bp("selectionchange",!1,s))}}function v2(o,s,c,d){switch(q2(s)){case 2:var m=uC;break;case 8:m=lC;break;default:m=Gp}c=m.bind(null,s,c,o),m=void 0,!Uo||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?o.addEventListener(s,c,{capture:!0,passive:m}):o.addEventListener(s,c,!0):m!==void 0?o.addEventListener(s,c,{passive:m}):o.addEventListener(s,c,!1)}function Dp(o,s,c,d,m){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var I=d.stateNode.containerInfo;if(I===m)break;if(w===4)for(w=d.return;w!==null;){var F=w.tag;if((F===3||F===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;I!==null;){if(w=vi(I),w===null)return;if(F=w.tag,F===5||F===6||F===26||F===27){d=y=w;continue e}I=I.parentNode}}d=d.return}ba(function(){var Q=y,ie=Tr(c),se=[];e:{var Z=Wm.get(o);if(Z!==void 0){var te=wi,me=o;switch(o){case"keypress":if(jo(c)===0)break e;case"keydown":case"keyup":te=oh;break;case"focusin":me="focus",te=Go;break;case"focusout":me="blur",te=Go;break;case"beforeblur":case"afterblur":te=Go;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=E;break;case qm:case Xm:case Km:te=Jf;break;case Ym:te=D;break;case"scroll":case"scrollend":te=Vl;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=qi;break;case"toggle":case"beforetoggle":te=Pe}var be=(s&4)!==0,At=!be&&(o==="scroll"||o==="scrollend"),q=be?Z!==null?Z+"Capture":null:Z;be=[];for(var j=Q,W;j!==null;){var oe=j;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||q===null||(oe=Yr(j,q),oe!=null&&be.push(gc(j,oe,W))),At)break;j=j.return}0<be.length&&(Z=new te(Z,me,null,c,ie),se.push({event:Z,listeners:be}))}}if((s&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",te=o==="mouseout"||o==="pointerout",Z&&c!==Ll&&(me=c.relatedTarget||c.fromElement)&&(vi(me)||me[pi]))break e;if((te||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(me=c.relatedTarget||c.toElement,te=Q,me=me?vi(me):null,me!==null&&(At=a(me),be=me.tag,me!==At||be!==5&&be!==27&&be!==6)&&(me=null)):(te=null,me=Q),te!==me)){if(be=Fl,oe="onMouseLeave",q="onMouseEnter",j="mouse",(o==="pointerout"||o==="pointerover")&&(be=qi,oe="onPointerLeave",q="onPointerEnter",j="pointer"),At=te==null?Z:lr(te),W=me==null?Z:lr(me),Z=new be(oe,j+"leave",te,c,ie),Z.target=At,Z.relatedTarget=W,oe=null,vi(ie)===Q&&(be=new be(q,j+"enter",me,c,ie),be.target=W,be.relatedTarget=At,oe=be),At=oe,te&&me)t:{for(be=LI,q=te,j=me,W=0,oe=q;oe;oe=be(oe))W++;oe=0;for(var Te=j;Te;Te=be(Te))oe++;for(;0<W-oe;)q=be(q),W--;for(;0<oe-W;)j=be(j),oe--;for(;W--;){if(q===j||j!==null&&q===j.alternate){be=q;break t}q=be(q),j=be(j)}be=null}else be=null;te!==null&&m2(se,Z,te,be,!1),me!==null&&At!==null&&m2(se,At,me,be,!0)}}e:{if(Z=Q?lr(Q):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var et=Pm;else if(Nm(Z))if(Lm)et=XS;else{et=GS;var Ee=HS}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Ys(Q.elementType)&&(et=Pm):et=qS;if(et&&(et=et(o,Q))){Mm(se,et,c,ie);break e}Ee&&Ee(o,Z,Q),o==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Nl(Z,"number",Z.value)}switch(Ee=Q?lr(Q):window,o){case"focusin":(Nm(Ee)||Ee.contentEditable==="true")&&(nu=Ee,a1=Q,Gl=null);break;case"focusout":Gl=a1=nu=null;break;case"mousedown":o1=!0;break;case"contextmenu":case"mouseup":case"dragend":o1=!1,Hm(se,c,ie);break;case"selectionchange":if(YS)break;case"keydown":case"keyup":Hm(se,c,ie)}var Be;if(rt)e:{switch(o){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else tu?qo(o,c)&&(qe="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(qe="onCompositionStart");qe&&(Ii&&c.locale!=="ko"&&(tu||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&tu&&(Be=Bl()):(Ai=ie,kl="value"in Ai?Ai.value:Ai.textContent,tu=!0)),Ee=Qh(Q,qe),0<Ee.length&&(qe=new Si(qe,o,null,c,ie),se.push({event:qe,listeners:Ee}),Be?qe.data=Be:(Be=eu(c),Be!==null&&(qe.data=Be)))),(Be=Ir?FS(o,c):US(o,c))&&(qe=Qh(Q,"onBeforeInput"),0<qe.length&&(Ee=new Si("onBeforeInput","beforeinput",null,c,ie),se.push({event:Ee,listeners:qe}),Ee.data=Be)),OI(se,o,Q,c,ie)}g2(se,s)})}function gc(o,s,c){return{instance:o,listener:s,currentTarget:c}}function Qh(o,s){for(var c=s+"Capture",d=[];o!==null;){var m=o,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Yr(o,c),m!=null&&d.unshift(gc(o,m,y)),m=Yr(o,s),m!=null&&d.push(gc(o,m,y))),o.tag===3)return d;o=o.return}return[]}function LI(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function m2(o,s,c,d,m){for(var y=s._reactName,w=[];c!==null&&c!==d;){var I=c,F=I.alternate,Q=I.stateNode;if(I=I.tag,F!==null&&F===d)break;I!==5&&I!==26&&I!==27||Q===null||(F=Q,m?(Q=Yr(c,y),Q!=null&&w.unshift(gc(c,Q,F))):m||(Q=Yr(c,y),Q!=null&&w.push(gc(c,Q,F)))),c=c.return}w.length!==0&&o.push({event:s,listeners:w})}var kI=/\r\n?/g,BI=/\u0000|\uFFFD/g;function y2(o){return(typeof o=="string"?o:""+o).replace(kI,`
`).replace(BI,"")}function _2(o,s){return s=y2(s),y2(o)===s}function Et(o,s,c,d,m,y){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||Jn(o,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&Jn(o,""+d);break;case"className":cr(o,"class",d);break;case"tabIndex":cr(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(o,c,d);break;case"style":Pl(o,d,y);break;case"data":if(s!=="object"){cr(o,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){o.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Ws(""+d),o.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(s!=="input"&&Et(o,s,"name",m.name,m,null),Et(o,s,"formEncType",m.formEncType,m,null),Et(o,s,"formMethod",m.formMethod,m,null),Et(o,s,"formTarget",m.formTarget,m,null)):(Et(o,s,"encType",m.encType,m,null),Et(o,s,"method",m.method,m,null),Et(o,s,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Ws(""+d),o.setAttribute(c,d);break;case"onClick":d!=null&&(o.onclick=Kr);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}c=Ws(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""+d):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":d===!0?o.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,d):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(c,d):o.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(c):o.setAttribute(c,d);break;case"popover":He("beforetoggle",o),He("toggle",o),Xs(o,"popover",d);break;case"xlinkActuate":Qt(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Qt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Qt(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Qt(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Qt(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Qt(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Qt(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Qt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Qt(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Xs(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Qf.get(c)||c,Xs(o,c,d))}}function Op(o,s,c,d,m,y){switch(c){case"style":Pl(o,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));o.innerHTML=c}}break;case"children":typeof d=="string"?Jn(o,d):(typeof d=="number"||typeof d=="bigint")&&Jn(o,""+d);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"onClick":d!=null&&(o.onclick=Kr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),s=c.slice(2,m?c.length-7:void 0),y=o[vn]||null,y=y!=null?y[c]:null,typeof y=="function"&&o.removeEventListener(s,y,m),typeof d=="function")){typeof y!="function"&&y!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(s,d,m);break e}c in o?o[c]=d:d===!0?o.setAttribute(c,""):Xs(o,c,d)}}}function Dn(o,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",o),He("load",o);var d=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var w=c[y];if(w!=null)switch(y){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(o,s,y,w,c,null)}}m&&Et(o,s,"srcSet",c.srcSet,c,null),d&&Et(o,s,"src",c.src,c,null);return;case"input":He("invalid",o);var I=y=w=m=null,F=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var ie=c[d];if(ie!=null)switch(d){case"name":m=ie;break;case"type":w=ie;break;case"checked":F=ie;break;case"defaultChecked":Q=ie;break;case"value":y=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,s));break;default:Et(o,s,d,ie,c,null)}}Kf(o,y,I,F,Q,w,m,!1);return;case"select":He("invalid",o),d=w=y=null;for(m in c)if(c.hasOwnProperty(m)&&(I=c[m],I!=null))switch(m){case"value":y=I;break;case"defaultValue":w=I;break;case"multiple":d=I;default:Et(o,s,m,I,c,null)}s=y,c=w,o.multiple=!!d,s!=null?Ta(o,!!d,s,!1):c!=null&&Ta(o,!!d,c,!0);return;case"textarea":He("invalid",o),y=m=d=null;for(w in c)if(c.hasOwnProperty(w)&&(I=c[w],I!=null))switch(w){case"value":d=I;break;case"defaultValue":m=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(91));break;default:Et(o,s,w,I,c,null)}Sa(o,d,m,y);return;case"option":for(F in c)c.hasOwnProperty(F)&&(d=c[F],d!=null)&&(F==="selected"?o.selected=d&&typeof d!="function"&&typeof d!="symbol":Et(o,s,F,d,c,null));return;case"dialog":He("beforetoggle",o),He("toggle",o),He("cancel",o),He("close",o);break;case"iframe":case"object":He("load",o);break;case"video":case"audio":for(d=0;d<pc.length;d++)He(pc[d],o);break;case"image":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"embed":case"source":case"link":He("error",o),He("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Et(o,s,Q,d,c,null)}return;default:if(Ys(s)){for(ie in c)c.hasOwnProperty(ie)&&(d=c[ie],d!==void 0&&Op(o,s,ie,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&Et(o,s,I,d,c,null))}function VI(o,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,w=null,I=null,F=null,Q=null,ie=null;for(te in c){var se=c[te];if(c.hasOwnProperty(te)&&se!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":F=se;default:d.hasOwnProperty(te)||Et(o,s,te,null,d,se)}}for(var Z in d){var te=d[Z];if(se=c[Z],d.hasOwnProperty(Z)&&(te!=null||se!=null))switch(Z){case"type":y=te;break;case"name":m=te;break;case"checked":Q=te;break;case"defaultChecked":ie=te;break;case"value":w=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:te!==se&&Et(o,s,Z,te,d,se)}}Ks(o,w,I,F,Q,ie,y,m);return;case"select":te=w=I=Z=null;for(y in c)if(F=c[y],c.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":te=F;default:d.hasOwnProperty(y)||Et(o,s,y,null,d,F)}for(m in d)if(y=d[m],F=c[m],d.hasOwnProperty(m)&&(y!=null||F!=null))switch(m){case"value":Z=y;break;case"defaultValue":I=y;break;case"multiple":w=y;default:y!==F&&Et(o,s,m,y,d,F)}s=I,c=w,d=te,Z!=null?Ta(o,!!c,Z,!1):!!d!=!!c&&(s!=null?Ta(o,!!c,s,!0):Ta(o,!!c,c?[]:"",!1));return;case"textarea":te=Z=null;for(I in c)if(m=c[I],c.hasOwnProperty(I)&&m!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Et(o,s,I,null,d,m)}for(w in d)if(m=d[w],y=c[w],d.hasOwnProperty(w)&&(m!=null||y!=null))switch(w){case"value":Z=m;break;case"defaultValue":te=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==y&&Et(o,s,w,m,d,y)}Yf(o,Z,te);return;case"option":for(var me in c)Z=c[me],c.hasOwnProperty(me)&&Z!=null&&!d.hasOwnProperty(me)&&(me==="selected"?o.selected=!1:Et(o,s,me,null,d,Z));for(F in d)Z=d[F],te=c[F],d.hasOwnProperty(F)&&Z!==te&&(Z!=null||te!=null)&&(F==="selected"?o.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":Et(o,s,F,Z,d,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in c)Z=c[be],c.hasOwnProperty(be)&&Z!=null&&!d.hasOwnProperty(be)&&Et(o,s,be,null,d,Z);for(Q in d)if(Z=d[Q],te=c[Q],d.hasOwnProperty(Q)&&Z!==te&&(Z!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Et(o,s,Q,Z,d,te)}return;default:if(Ys(s)){for(var At in c)Z=c[At],c.hasOwnProperty(At)&&Z!==void 0&&!d.hasOwnProperty(At)&&Op(o,s,At,void 0,d,Z);for(ie in d)Z=d[ie],te=c[ie],!d.hasOwnProperty(ie)||Z===te||Z===void 0&&te===void 0||Op(o,s,ie,Z,d,te);return}}for(var q in c)Z=c[q],c.hasOwnProperty(q)&&Z!=null&&!d.hasOwnProperty(q)&&Et(o,s,q,null,d,Z);for(se in d)Z=d[se],te=c[se],!d.hasOwnProperty(se)||Z===te||Z==null&&te==null||Et(o,s,se,Z,d,te)}function x2(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FI(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var m=c[d],y=m.transferSize,w=m.initiatorType,I=m.duration;if(y&&I&&x2(w)){for(w=0,I=m.responseEnd,d+=1;d<c.length;d++){var F=c[d],Q=F.startTime;if(Q>I)break;var ie=F.transferSize,se=F.initiatorType;ie&&x2(se)&&(F=F.responseEnd,w+=ie*(F<I?1:(I-Q)/(F-Q)))}if(--d,s+=8*(y+w)/(m.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Np=null,Mp=null;function $h(o){return o.nodeType===9?o:o.ownerDocument}function E2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A2(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Pp(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lp=null;function UI(){var o=window.event;return o&&o.type==="popstate"?o===Lp?!1:(Lp=o,!0):(Lp=null,!1)}var w2=typeof setTimeout=="function"?setTimeout:void 0,zI=typeof clearTimeout=="function"?clearTimeout:void 0,T2=typeof Promise=="function"?Promise:void 0,jI=typeof queueMicrotask=="function"?queueMicrotask:typeof T2<"u"?function(o){return T2.resolve(null).then(o).catch(HI)}:w2;function HI(o){setTimeout(function(){throw o})}function Ya(o){return o==="head"}function S2(o,s){var c=s,d=0;do{var m=c.nextSibling;if(o.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"||c==="/&"){if(d===0){o.removeChild(m),Ru(s);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")vc(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,vc(c);for(var y=c.firstChild;y;){var w=y.nextSibling,I=y.nodeName;y[gi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=w}}else c==="body"&&vc(o.ownerDocument.body);c=m}while(c);Ru(s)}function I2(o,s){var c=o;o=0;do{var d=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=d}while(c)}function kp(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":kp(c),qs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function GI(o,s,c,d){for(;o.nodeType===1;){var m=c;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[gi])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(y=o.getAttribute("rel"),y==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(y!==m.rel||o.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||o.getAttribute("title")!==(m.title==null?null:m.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(y=o.getAttribute("src"),(y!==(m.src==null?null:m.src)||o.getAttribute("type")!==(m.type==null?null:m.type)||o.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&o.getAttribute("name")===y)return o}else return o;if(o=Mr(o.nextSibling),o===null)break}return null}function qI(o,s,c){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Mr(o.nextSibling),o===null))return null;return o}function C2(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=Mr(o.nextSibling),o===null))return null;return o}function Bp(o){return o.data==="$?"||o.data==="$~"}function Vp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function XI(o,s){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||c.readyState!=="loading")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Mr(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var Fp=null;function b2(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(s===0)return Mr(o.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}o=o.nextSibling}return null}function R2(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return o;s--}else c!=="/$"&&c!=="/&"||s++}o=o.previousSibling}return null}function D2(o,s,c){switch(s=$h(c),o){case"html":if(o=s.documentElement,!o)throw Error(r(452));return o;case"head":if(o=s.head,!o)throw Error(r(453));return o;case"body":if(o=s.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function vc(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);qs(o)}var Pr=new Map,O2=new Set;function Zh(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var oa=he.d;he.d={f:KI,r:YI,D:WI,C:QI,L:$I,m:ZI,X:eC,S:JI,M:tC};function KI(){var o=oa.f(),s=Hh();return o||s}function YI(o){var s=wr(o);s!==null&&s.tag===5&&s.type==="form"?Yy(s):oa.r(o)}var Iu=typeof document>"u"?null:document;function N2(o,s,c){var d=Iu;if(d&&typeof s=="string"&&s){var m=Zn(s);m='link[rel="'+o+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),O2.has(m)||(O2.add(m),o={rel:o,crossOrigin:c,href:s},d.querySelector(m)===null&&(s=d.createElement("link"),Dn(s,"link",o),Wt(s),d.head.appendChild(s)))}}function WI(o){oa.D(o),N2("dns-prefetch",o,null)}function QI(o,s){oa.C(o,s),N2("preconnect",o,s)}function $I(o,s,c){oa.L(o,s,c);var d=Iu;if(d&&o&&s){var m='link[rel="preload"][as="'+Zn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Zn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Zn(c.imageSizes)+'"]')):m+='[href="'+Zn(o)+'"]';var y=m;switch(s){case"style":y=Cu(o);break;case"script":y=bu(o)}Pr.has(y)||(o=v({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:o,as:s},c),Pr.set(y,o),d.querySelector(m)!==null||s==="style"&&d.querySelector(mc(y))||s==="script"&&d.querySelector(yc(y))||(s=d.createElement("link"),Dn(s,"link",o),Wt(s),d.head.appendChild(s)))}}function ZI(o,s){oa.m(o,s);var c=Iu;if(c&&o){var d=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Zn(d)+'"][href="'+Zn(o)+'"]',y=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=bu(o)}if(!Pr.has(y)&&(o=v({rel:"modulepreload",href:o},s),Pr.set(y,o),c.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(yc(y)))return}d=c.createElement("link"),Dn(d,"link",o),Wt(d),c.head.appendChild(d)}}}function JI(o,s,c){oa.S(o,s,c);var d=Iu;if(d&&o){var m=mi(d).hoistableStyles,y=Cu(o);s=s||"default";var w=m.get(y);if(!w){var I={loading:0,preload:null};if(w=d.querySelector(mc(y)))I.loading=5;else{o=v({rel:"stylesheet",href:o,"data-precedence":s},c),(c=Pr.get(y))&&Up(o,c);var F=w=d.createElement("link");Wt(F),Dn(F,"link",o),F._p=new Promise(function(Q,ie){F.onload=Q,F.onerror=ie}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Jh(w,s,d)}w={type:"stylesheet",instance:w,count:1,state:I},m.set(y,w)}}}function eC(o,s){oa.X(o,s);var c=Iu;if(c&&o){var d=mi(c).hoistableScripts,m=bu(o),y=d.get(m);y||(y=c.querySelector(yc(m)),y||(o=v({src:o,async:!0},s),(s=Pr.get(m))&&zp(o,s),y=c.createElement("script"),Wt(y),Dn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function tC(o,s){oa.M(o,s);var c=Iu;if(c&&o){var d=mi(c).hoistableScripts,m=bu(o),y=d.get(m);y||(y=c.querySelector(yc(m)),y||(o=v({src:o,async:!0,type:"module"},s),(s=Pr.get(m))&&zp(o,s),y=c.createElement("script"),Wt(y),Dn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(m,y))}}function M2(o,s,c,d){var m=(m=ke.current)?Zh(m):null;if(!m)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Cu(c.href),c=mi(m).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=Cu(c.href);var y=mi(m).hoistableStyles,w=y.get(o);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(o,w),(y=m.querySelector(mc(o)))&&!y._p&&(w.instance=y,w.state.loading=5),Pr.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Pr.set(o,c),y||nC(m,o,c,w.state))),s&&d===null)throw Error(r(528,""));return w}if(s&&d!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=bu(c),c=mi(m).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Cu(o){return'href="'+Zn(o)+'"'}function mc(o){return'link[rel="stylesheet"]['+o+"]"}function P2(o){return v({},o,{"data-precedence":o.precedence,precedence:null})}function nC(o,s,c,d){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=o.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Dn(s,"link",c),Wt(s),o.head.appendChild(s))}function bu(o){return'[src="'+Zn(o)+'"]'}function yc(o){return"script[async]"+o}function L2(o,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=o.querySelector('style[data-href~="'+Zn(c.href)+'"]');if(d)return s.instance=d,Wt(d),d;var m=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Wt(d),Dn(d,"style",m),Jh(d,c.precedence,o),s.instance=d;case"stylesheet":m=Cu(c.href);var y=o.querySelector(mc(m));if(y)return s.state.loading|=4,s.instance=y,Wt(y),y;d=P2(c),(m=Pr.get(m))&&Up(d,m),y=(o.ownerDocument||o).createElement("link"),Wt(y);var w=y;return w._p=new Promise(function(I,F){w.onload=I,w.onerror=F}),Dn(y,"link",d),s.state.loading|=4,Jh(y,c.precedence,o),s.instance=y;case"script":return y=bu(c.src),(m=o.querySelector(yc(y)))?(s.instance=m,Wt(m),m):(d=c,(m=Pr.get(y))&&(d=v({},c),zp(d,m)),o=o.ownerDocument||o,m=o.createElement("script"),Wt(m),Dn(m,"link",d),o.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Jh(d,c.precedence,o));return s.instance}function Jh(o,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,y=m,w=0;w<d.length;w++){var I=d[w];if(I.dataset.precedence===s)y=I;else if(y!==m)break}y?y.parentNode.insertBefore(o,y.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(o,s.firstChild))}function Up(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function zp(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var ed=null;function k2(o,s,c){if(ed===null){var d=new Map,m=ed=new Map;m.set(c,d)}else m=ed,d=m.get(c),d||(d=new Map,m.set(c,d));if(d.has(o))return d;for(d.set(o,null),c=c.getElementsByTagName(o),m=0;m<c.length;m++){var y=c[m];if(!(y[gi]||y[Yt]||o==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(s)||"";w=o+w;var I=d.get(w);I?I.push(y):d.set(w,[y])}}return d}function B2(o,s,c){o=o.ownerDocument||o,o.head.insertBefore(c,s==="title"?o.querySelector("head > title"):null)}function rC(o,s,c){if(c===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(o=s.disabled,typeof s.precedence=="string"&&o==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function V2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function iC(o,s,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var m=Cu(d.href),y=s.querySelector(mc(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=td.bind(o),s.then(o,o)),c.state.loading|=4,c.instance=y,Wt(y);return}y=s.ownerDocument||s,d=P2(d),(m=Pr.get(m))&&Up(d,m),y=y.createElement("link"),Wt(y);var w=y;w._p=new Promise(function(I,F){w.onload=I,w.onerror=F}),Dn(y,"link",d),c.instance=y}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=td.bind(o),s.addEventListener("load",c),s.addEventListener("error",c))}}var jp=0;function aC(o,s){return o.stylesheets&&o.count===0&&rd(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var d=setTimeout(function(){if(o.stylesheets&&rd(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4+s);0<o.imgBytes&&jp===0&&(jp=62500*FI());var m=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&rd(o,o.stylesheets),o.unsuspend)){var y=o.unsuspend;o.unsuspend=null,y()}},(o.imgBytes>jp?50:800)+s);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rd(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var nd=null;function rd(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,nd=new Map,s.forEach(oC,o),nd=null,td.call(o))}function oC(o,s){if(!(s.state.loading&4)){var c=nd.get(o);if(c)var d=c.get(null);else{c=new Map,nd.set(o,c);for(var m=o.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var w=m[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),d=w)}d&&c.set(null,d)}m=s.instance,w=m.getAttribute("data-precedence"),y=c.get(w)||d,y===d&&c.set(null,m),c.set(w,m),this.count++,d=td.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),y?y.parentNode.insertBefore(m,y.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(m,o.firstChild)),s.state.loading|=4}}var _c={$$typeof:B,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function sC(o,s,c,d,m,y,w,I,F){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=di(0),this.hiddenUpdates=di(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function F2(o,s,c,d,m,y,w,I,F,Q,ie,se){return o=new sC(o,s,c,w,F,Q,ie,se,I),s=1,y===!0&&(s|=24),y=hr(3,null,null,s),o.current=y,y.stateNode=o,s=E1(),s.refCount++,o.pooledCache=s,s.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:s},S1(y),o}function U2(o){return o?(o=au,o):au}function z2(o,s,c,d,m,y){m=U2(m),d.context===null?d.context=m:d.pendingContext=m,d=Ba(s),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Va(o,d,s),c!==null&&(ir(c,o,s),$l(c,o,s))}function j2(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<s?c:s}}function Hp(o,s){j2(o,s),(o=o.alternate)&&j2(o,s)}function H2(o){if(o.tag===13||o.tag===31){var s=Yo(o,67108864);s!==null&&ir(s,o,67108864),Hp(o,67108864)}}function G2(o){if(o.tag===13||o.tag===31){var s=mr();s=ko(s);var c=Yo(o,s);c!==null&&ir(c,o,s),Hp(o,s)}}var id=!0;function uC(o,s,c,d){var m=ne.T;ne.T=null;var y=he.p;try{he.p=2,Gp(o,s,c,d)}finally{he.p=y,ne.T=m}}function lC(o,s,c,d){var m=ne.T;ne.T=null;var y=he.p;try{he.p=8,Gp(o,s,c,d)}finally{he.p=y,ne.T=m}}function Gp(o,s,c,d){if(id){var m=qp(d);if(m===null)Dp(o,s,d,ad,c),X2(o,d);else if(fC(m,o,s,c,d))d.stopPropagation();else if(X2(o,d),s&4&&-1<cC.indexOf(o)){for(;m!==null;){var y=wr(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=fi(y.pendingLanes);if(w!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;w;){var F=1<<31-zt(w);I.entanglements[1]|=F,w&=~F}Di(y),(it&6)===0&&(zh=Gn()+500,dc(0))}}break;case 31:case 13:I=Yo(y,2),I!==null&&ir(I,y,2),Hh(),Hp(y,2)}if(y=qp(d),y===null&&Dp(o,s,d,ad,c),y===m)break;m=y}m!==null&&d.stopPropagation()}else Dp(o,s,d,null,c)}}function qp(o){return o=Tr(o),Xp(o)}var ad=null;function Xp(o){if(ad=null,o=vi(o),o!==null){var s=a(o);if(s===null)o=null;else{var c=s.tag;if(c===13){if(o=u(s),o!==null)return o;o=null}else if(c===31){if(o=l(s),o!==null)return o;o=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return ad=o,null}function q2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(No()){case Al:return 2;case wl:return 8;case Aa:case Z0:return 32;case Bf:return 268435456;default:return 32}default:return 32}}var Kp=!1,Wa=null,Qa=null,$a=null,xc=new Map,Ec=new Map,Za=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function X2(o,s){switch(o){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":xc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(s.pointerId)}}function Ac(o,s,c,d,m,y){return o===null||o.nativeEvent!==y?(o={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},s!==null&&(s=wr(s),s!==null&&H2(s)),o):(o.eventSystemFlags|=d,s=o.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),o)}function fC(o,s,c,d,m){switch(s){case"focusin":return Wa=Ac(Wa,o,s,c,d,m),!0;case"dragenter":return Qa=Ac(Qa,o,s,c,d,m),!0;case"mouseover":return $a=Ac($a,o,s,c,d,m),!0;case"pointerover":var y=m.pointerId;return xc.set(y,Ac(xc.get(y)||null,o,s,c,d,m)),!0;case"gotpointercapture":return y=m.pointerId,Ec.set(y,Ac(Ec.get(y)||null,o,s,c,d,m)),!0}return!1}function K2(o){var s=vi(o.target);if(s!==null){var c=a(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){o.blockedOn=s,qr(o.priority,function(){G2(c)});return}}else if(s===31){if(s=l(c),s!==null){o.blockedOn=s,qr(o.priority,function(){G2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function od(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var c=qp(o.nativeEvent);if(c===null){c=o.nativeEvent;var d=new c.constructor(c.type,c);Ll=d,c.target.dispatchEvent(d),Ll=null}else return s=wr(c),s!==null&&H2(s),o.blockedOn=c,!1;s.shift()}return!0}function Y2(o,s,c){od(o)&&c.delete(s)}function hC(){Kp=!1,Wa!==null&&od(Wa)&&(Wa=null),Qa!==null&&od(Qa)&&(Qa=null),$a!==null&&od($a)&&($a=null),xc.forEach(Y2),Ec.forEach(Y2)}function sd(o,s){o.blockedOn===s&&(o.blockedOn=null,Kp||(Kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,hC)))}var ud=null;function W2(o){ud!==o&&(ud=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ud===o&&(ud=null);for(var s=0;s<o.length;s+=3){var c=o[s],d=o[s+1],m=o[s+2];if(typeof d!="function"){if(Xp(d||c)===null)continue;break}var y=wr(c);y!==null&&(o.splice(s,3),s-=3,q1(y,{pending:!0,data:m,method:c.method,action:d},d,m))}}))}function Ru(o){function s(F){return sd(F,o)}Wa!==null&&sd(Wa,o),Qa!==null&&sd(Qa,o),$a!==null&&sd($a,o),xc.forEach(s),Ec.forEach(s);for(var c=0;c<Za.length;c++){var d=Za[c];d.blockedOn===o&&(d.blockedOn=null)}for(;0<Za.length&&(c=Za[0],c.blockedOn===null);)K2(c),c.blockedOn===null&&Za.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var m=c[d],y=c[d+1],w=m[vn]||null;if(typeof y=="function")w||W2(c);else if(w){var I=null;if(y&&y.hasAttribute("formAction")){if(m=y,w=y[vn]||null)I=w.formAction;else if(Xp(m)!==null)continue}else I=w.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),W2(c)}}}function Q2(){function o(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Yp(o){this._internalRoot=o}ld.prototype.render=Yp.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,d=mr();z2(c,d,o,s,null,null)},ld.prototype.unmount=Yp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;z2(o.current,2,null,o,null,null),Hh(),s[pi]=null}};function ld(o){this._internalRoot=o}ld.prototype.unstable_scheduleHydration=function(o){if(o){var s=Hf();o={blockedOn:null,target:o,priority:s};for(var c=0;c<Za.length&&s!==0&&s<Za[c].priority;c++);Za.splice(c,0,o),c===0&&K2(o)}};var $2=e.version;if($2!=="19.2.3")throw Error(r(527,$2,"19.2.3"));he.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=h(s),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var dC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{Hr=cd.inject(dC),Sn=cd}catch{}}return Tc.createRoot=function(o,s){if(!i(o))throw Error(r(299));var c=!1,d="",m=i_,y=a_,w=o_;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=F2(o,1,!1,null,null,c,d,null,m,y,w,Q2),o[pi]=s.current,Rp(o),new Yp(s)},Tc.hydrateRoot=function(o,s,c){if(!i(o))throw Error(r(299));var d=!1,m="",y=i_,w=a_,I=o_,F=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),s=F2(o,1,!0,s,c??null,d,m,F,y,w,I,Q2),s.context=U2(null),c=s.current,d=mr(),d=ko(d),m=Ba(d),m.callback=null,Va(c,m,d),c=d,s.current.lanes=c,Po(s,c),Di(s),o[pi]=s.current,Rp(o),new ld(s)},Tc.version="19.2.3",Tc}var sx;function SC(){if(sx)return $p.exports;sx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$p.exports=TC(),$p.exports}var IC=SC();const CC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),ux=n=>{const e=bC(n);return e.charAt(0).toUpperCase()+e.slice(1)},JA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),RC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var DC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const OC=ye.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:u,...l},f)=>ye.createElement("svg",{ref:f,...DC,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:JA("lucide",i),...!a&&!RC(l)&&{"aria-hidden":"true"},...l},[...u.map(([h,p])=>ye.createElement(h,p)),...Array.isArray(a)?a:[a]]));const Bt=(n,e)=>{const t=ye.forwardRef(({className:r,...i},a)=>ye.createElement(OC,{ref:a,iconNode:e,className:JA(`lucide-${CC(ux(n))}`,`lucide-${n}`,r),...i}));return t.displayName=ux(n),t};const NC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],MC=Bt("arrow-right",NC);const PC=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],LC=Bt("box",PC);const kC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ew=Bt("circle-alert",kC);const BC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tw=Bt("circle-check-big",BC);const VC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],FC=Bt("circle",VC);const UC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zC=Bt("download",UC);const jC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HC=Bt("eye-off",jC);const GC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qC=Bt("eye",GC);const XC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],KC=Bt("info",XC);const YC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ev=Bt("loader-circle",YC);const WC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],QC=Bt("log-in",WC);const $C=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nw=Bt("log-out",$C);const ZC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],JC=Bt("mail",ZC);const e4=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],t4=Bt("moon",e4);const n4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],lx=Bt("package",n4);const r4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],rw=Bt("plus",r4);const i4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],cx=Bt("scan-barcode",i4);const a4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fx=Bt("settings",a4);const o4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],hx=Bt("shopping-cart",o4);const s4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],u4=Bt("sun",s4);const l4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],c4=Bt("trash-2",l4);const f4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],h4=Bt("user-plus",f4);const d4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],iw=Bt("x",d4),p4=()=>{};var dx={};const aw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},g4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],u=n[t++],l=n[t++],f=((i&7)<<18|(a&63)<<12|(u&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|u&63)}}return e.join("")},ow={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],u=i+1<n.length,l=u?n[i+1]:0,f=i+2<n.length,h=f?n[i+2]:0,p=a>>2,v=(a&3)<<4|l>>4;let _=(l&15)<<2|h>>6,x=h&63;f||(x=64,u||(_=64)),r.push(t[p],t[v],t[_],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):g4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||l==null||h==null||v==null)throw new v4;const _=a<<2|l>>4;if(r.push(_),h!==64){const x=l<<4&240|h>>2;if(r.push(x),v!==64){const A=h<<6&192|v;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class v4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m4=function(n){const e=aw(n);return ow.encodeByteArray(e,!0)},qd=function(n){return m4(n).replace(/\./g,"")},sw=function(n){try{return ow.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const y4=()=>uw().__FIREBASE_DEFAULTS__,_4=()=>{if(typeof process>"u"||typeof dx>"u")return;const n=dx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},x4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sw(n[1]);return e&&JSON.parse(e)},_0=()=>{try{return p4()||y4()||_4()||x4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lw=n=>_0()?.emulatorHosts?.[n],E4=n=>{const e=lw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cw=()=>_0()?.config,fw=n=>_0()?.[`_${n}`];class A4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function fl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hw(n){return(await fetch(n,{credentials:"include"})).ok}function w4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qd(JSON.stringify(t)),qd(JSON.stringify(u)),""].join(".")}const Gc={};function T4(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?n.emulator.push(e):n.prod.push(e);return n}function S4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let px=!1;function dw(n,e){if(typeof window>"u"||typeof document>"u"||!fl(window.location.host)||Gc[n]===e||Gc[n]||px)return;Gc[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",a=T4().prod.length>0;function u(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,x){_.setAttribute("width","24"),_.setAttribute("id",x),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{px=!0,u()},_}function p(_,x){_.setAttribute("id",x),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=S4(r),x=t("text"),A=document.getElementById(x)||document.createElement("span"),S=t("learnmore"),R=document.getElementById(S)||document.createElement("a"),L=t("preprendIcon"),M=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const B=_.element;l(B),p(R,S);const G=h();f(M,L),B.append(M,A,R,G),document.body.appendChild(B)}a?(A.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function pw(){const n=_0()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function C4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function R4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D4(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gw(){return!pw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vw(){return!pw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function mw(){try{return typeof indexedDB=="object"}catch{return!1}}function O4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const N4="FirebaseError";class ga extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=N4,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yf.prototype.create)}}class yf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],u=a?M4(a,r):"Error",l=`${this.serviceName}: ${u} (${i}).`;return new ga(i,l,r)}}function M4(n,e){return n.replace(P4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const P4=/\{\$([^}]+)}/g;function L4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Is(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],u=e[i];if(gx(a)&&gx(u)){if(!Is(a,u))return!1}else if(a!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function gx(n){return n!==null&&typeof n=="object"}function _f(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Mc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Pc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function k4(n,e){const t=new B4(n,e);return t.subscribe.bind(t)}class B4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");V4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tg),i.error===void 0&&(i.error=tg),i.complete===void 0&&(i.complete=tg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tg(){}function Tn(n){return n&&n._delegate?n._delegate:n}class Cs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cs="[DEFAULT]";class F4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new A4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z4(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&u.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U4(n){return n===cs?void 0:n}function z4(n){return n.instantiationMode==="EAGER"}class j4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xe||(Xe={}));const H4={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},G4=Xe.INFO,q4={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},X4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=q4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Av{constructor(e){this.name=e,this._logLevel=G4,this._logHandler=X4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const K4=(n,e)=>e.some(t=>n instanceof t);let vx,mx;function Y4(){return vx||(vx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W4(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yw=new WeakMap,Tg=new WeakMap,_w=new WeakMap,ng=new WeakMap,wv=new WeakMap;function Q4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(po(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&yw.set(t,n)}).catch(()=>{}),wv.set(e,n),e}function $4(n){if(Tg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});Tg.set(n,e)}let Sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Tg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_w.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return po(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Z4(n){Sg=n(Sg)}function J4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rg(this),e,...t);return _w.set(r,e.sort?e.sort():[e]),po(r)}:W4().includes(n)?function(...e){return n.apply(rg(this),e),po(yw.get(this))}:function(...e){return po(n.apply(rg(this),e))}}function eb(n){return typeof n=="function"?J4(n):(n instanceof IDBTransaction&&$4(n),K4(n,Y4())?new Proxy(n,Sg):n)}function po(n){if(n instanceof IDBRequest)return Q4(n);if(ng.has(n))return ng.get(n);const e=eb(n);return e!==n&&(ng.set(n,e),wv.set(e,n)),e}const rg=n=>wv.get(n);function tb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const u=indexedDB.open(n,e),l=po(u);return r&&u.addEventListener("upgradeneeded",f=>{r(po(u.result),f.oldVersion,f.newVersion,po(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),l.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const nb=["get","getKey","getAll","getAllKeys","count"],rb=["put","add","delete","clear"],ig=new Map;function yx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ig.get(e))return ig.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=rb.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nb.includes(t)))return;const a=async function(u,...l){const f=this.transaction(u,i?"readwrite":"readonly");let h=f.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&f.done]))[0]};return ig.set(e,a),a}Z4(n=>({...n,get:(e,t,r)=>yx(e,t)||n.get(e,t,r),has:(e,t)=>!!yx(e,t)||n.has(e,t)}));class ib{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ab(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function ab(n){return n.getComponent()?.type==="VERSION"}const Ig="@firebase/app",_x="0.14.6";const ca=new Av("@firebase/app"),ob="@firebase/app-compat",sb="@firebase/analytics-compat",ub="@firebase/analytics",lb="@firebase/app-check-compat",cb="@firebase/app-check",fb="@firebase/auth",hb="@firebase/auth-compat",db="@firebase/database",pb="@firebase/data-connect",gb="@firebase/database-compat",vb="@firebase/functions",mb="@firebase/functions-compat",yb="@firebase/installations",_b="@firebase/installations-compat",xb="@firebase/messaging",Eb="@firebase/messaging-compat",Ab="@firebase/performance",wb="@firebase/performance-compat",Tb="@firebase/remote-config",Sb="@firebase/remote-config-compat",Ib="@firebase/storage",Cb="@firebase/storage-compat",bb="@firebase/firestore",Rb="@firebase/ai",Db="@firebase/firestore-compat",Ob="firebase",Nb="12.6.0";const Cg="[DEFAULT]",Mb={[Ig]:"fire-core",[ob]:"fire-core-compat",[ub]:"fire-analytics",[sb]:"fire-analytics-compat",[cb]:"fire-app-check",[lb]:"fire-app-check-compat",[fb]:"fire-auth",[hb]:"fire-auth-compat",[db]:"fire-rtdb",[pb]:"fire-data-connect",[gb]:"fire-rtdb-compat",[vb]:"fire-fn",[mb]:"fire-fn-compat",[yb]:"fire-iid",[_b]:"fire-iid-compat",[xb]:"fire-fcm",[Eb]:"fire-fcm-compat",[Ab]:"fire-perf",[wb]:"fire-perf-compat",[Tb]:"fire-rc",[Sb]:"fire-rc-compat",[Ib]:"fire-gcs",[Cb]:"fire-gcs-compat",[bb]:"fire-fst",[Db]:"fire-fst-compat",[Rb]:"fire-vertex","fire-js":"fire-js",[Ob]:"fire-js-all"};const Xd=new Map,Pb=new Map,bg=new Map;function xx(n,e){try{n.container.addComponent(e)}catch(t){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qu(n){const e=n.name;if(bg.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;bg.set(e,n);for(const t of Xd.values())xx(t,n);for(const t of Pb.values())xx(t,n);return!0}function Tv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _r(n){return n==null?!1:n.settings!==void 0}const Lb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new yf("app","Firebase",Lb);class kb{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}const hl=Nb;function xw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Cg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw go.create("bad-app-name",{appName:String(i)});if(t||(t=cw()),!t)throw go.create("no-options");const a=Xd.get(i);if(a){if(Is(t,a.options)&&Is(r,a.config))return a;throw go.create("duplicate-app",{appName:i})}const u=new j4(i);for(const f of bg.values())u.addComponent(f);const l=new kb(t,r,u);return Xd.set(i,l),l}function Ew(n=Cg){const e=Xd.get(n);if(!e&&n===Cg&&cw())return xw();if(!e)throw go.create("no-app",{appName:n});return e}function vo(n,e,t){let r=Mb[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(u.join(" "));return}Qu(new Cs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Bb="firebase-heartbeat-database",Vb=1,tf="firebase-heartbeat-store";let ag=null;function Aw(){return ag||(ag=tb(Bb,Vb,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tf)}catch(t){console.warn(t)}}}}).catch(n=>{throw go.create("idb-open",{originalErrorMessage:n.message})})),ag}async function Fb(n){try{const t=(await Aw()).transaction(tf),r=await t.objectStore(tf).get(ww(n));return await t.done,r}catch(e){if(e instanceof ga)ca.warn(e.message);else{const t=go.create("idb-get",{originalErrorMessage:e?.message});ca.warn(t.message)}}}async function Ex(n,e){try{const r=(await Aw()).transaction(tf,"readwrite");await r.objectStore(tf).put(e,ww(n)),await r.done}catch(t){if(t instanceof ga)ca.warn(t.message);else{const r=go.create("idb-set",{originalErrorMessage:t?.message});ca.warn(r.message)}}}function ww(n){return`${n.name}!${n.options.appId}`}const Ub=1024,zb=30;class jb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ax();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>zb){const i=qb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ca.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ax(),{heartbeatsToSend:t,unsentEntries:r}=Hb(this._heartbeatsCache.heartbeats),i=qd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ca.warn(e),""}}}function Ax(){return new Date().toISOString().substring(0,10)}function Hb(n,e=Ub){const t=[];let r=n.slice();for(const i of n){const a=t.find(u=>u.agent===i.agent);if(a){if(a.dates.push(i.date),wx(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),wx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Gb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mw()?O4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Fb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ex(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ex(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function wx(n){return qd(JSON.stringify({version:2,heartbeats:n})).length}function qb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Xb(n){Qu(new Cs("platform-logger",e=>new ib(e),"PRIVATE")),Qu(new Cs("heartbeat",e=>new jb(e),"PRIVATE")),vo(Ig,_x,n),vo(Ig,_x,"esm2020"),vo("fire-js","")}Xb("");var Kb="firebase",Yb="12.7.0";vo(Kb,Yb,"app");var Tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mo,Tw;(function(){var n;function e(C,b){function N(){}N.prototype=b.prototype,C.F=b.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(k,V,z){for(var P=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)P[ze-2]=arguments[ze];return b.prototype[V].apply(k,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,b,N){N||(N=0);const k=Array(16);if(typeof b=="string")for(var V=0;V<16;++V)k[V]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(V=0;V<16;++V)k[V]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=C.g[0],N=C.g[1],V=C.g[2];let z=C.g[3],P;P=b+(z^N&(V^z))+k[0]+3614090360&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[1]+3905402710&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[2]+606105819&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[3]+3250441966&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(z^N&(V^z))+k[4]+4118548399&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[5]+1200080426&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[6]+2821735955&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[7]+4249261313&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(z^N&(V^z))+k[8]+1770035416&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[9]+2336552879&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[10]+4294925233&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[11]+2304563134&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(z^N&(V^z))+k[12]+1804603682&4294967295,b=N+(P<<7&4294967295|P>>>25),P=z+(V^b&(N^V))+k[13]+4254626195&4294967295,z=b+(P<<12&4294967295|P>>>20),P=V+(N^z&(b^N))+k[14]+2792965006&4294967295,V=z+(P<<17&4294967295|P>>>15),P=N+(b^V&(z^b))+k[15]+1236535329&4294967295,N=V+(P<<22&4294967295|P>>>10),P=b+(V^z&(N^V))+k[1]+4129170786&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[6]+3225465664&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[11]+643717713&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[0]+3921069994&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(V^z&(N^V))+k[5]+3593408605&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[10]+38016083&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[15]+3634488961&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[4]+3889429448&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(V^z&(N^V))+k[9]+568446438&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[14]+3275163606&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[3]+4107603335&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[8]+1163531501&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(V^z&(N^V))+k[13]+2850285829&4294967295,b=N+(P<<5&4294967295|P>>>27),P=z+(N^V&(b^N))+k[2]+4243563512&4294967295,z=b+(P<<9&4294967295|P>>>23),P=V+(b^N&(z^b))+k[7]+1735328473&4294967295,V=z+(P<<14&4294967295|P>>>18),P=N+(z^b&(V^z))+k[12]+2368359562&4294967295,N=V+(P<<20&4294967295|P>>>12),P=b+(N^V^z)+k[5]+4294588738&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[8]+2272392833&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[11]+1839030562&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[14]+4259657740&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(N^V^z)+k[1]+2763975236&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[4]+1272893353&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[7]+4139469664&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[10]+3200236656&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(N^V^z)+k[13]+681279174&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[0]+3936430074&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[3]+3572445317&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[6]+76029189&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(N^V^z)+k[9]+3654602809&4294967295,b=N+(P<<4&4294967295|P>>>28),P=z+(b^N^V)+k[12]+3873151461&4294967295,z=b+(P<<11&4294967295|P>>>21),P=V+(z^b^N)+k[15]+530742520&4294967295,V=z+(P<<16&4294967295|P>>>16),P=N+(V^z^b)+k[2]+3299628645&4294967295,N=V+(P<<23&4294967295|P>>>9),P=b+(V^(N|~z))+k[0]+4096336452&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[7]+1126891415&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[14]+2878612391&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[5]+4237533241&4294967295,N=V+(P<<21&4294967295|P>>>11),P=b+(V^(N|~z))+k[12]+1700485571&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[3]+2399980690&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[10]+4293915773&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[1]+2240044497&4294967295,N=V+(P<<21&4294967295|P>>>11),P=b+(V^(N|~z))+k[8]+1873313359&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[15]+4264355552&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[6]+2734768916&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[13]+1309151649&4294967295,N=V+(P<<21&4294967295|P>>>11),P=b+(V^(N|~z))+k[4]+4149444226&4294967295,b=N+(P<<6&4294967295|P>>>26),P=z+(N^(b|~V))+k[11]+3174756917&4294967295,z=b+(P<<10&4294967295|P>>>22),P=V+(b^(z|~N))+k[2]+718787259&4294967295,V=z+(P<<15&4294967295|P>>>17),P=N+(z^(V|~b))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+z&4294967295}r.prototype.v=function(C,b){b===void 0&&(b=C.length);const N=b-this.blockSize,k=this.C;let V=this.h,z=0;for(;z<b;){if(V==0)for(;z<=N;)i(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<b;)if(k[V++]=C.charCodeAt(z++),V==this.blockSize){i(this,k),V=0;break}}else for(;z<b;)if(k[V++]=C[z++],V==this.blockSize){i(this,k),V=0;break}}this.h=V,this.o+=b},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;b=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=b&255,b/=256;for(this.v(C),C=Array(16),b=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)C[b++]=this.g[N]>>>k&255;return C};function a(C,b){var N=l;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=b(C)}function u(C,b){this.h=b;const N=[];let k=!0;for(let V=C.length-1;V>=0;V--){const z=C[V]|0;k&&z==b||(N[V]=z,k=!1)}this.g=N}var l={};function f(C){return-128<=C&&C<128?a(C,function(b){return new u([b|0],b<0?-1:0)}):new u([C|0],C<0?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return v;if(C<0)return R(h(-C));const b=[];let N=1;for(let k=0;C>=N;k++)b[k]=C/N|0,N*=4294967296;return new u(b,0)}function p(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return R(p(C.substring(1),b));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(b,8));let k=v;for(let z=0;z<C.length;z+=8){var V=Math.min(8,C.length-z);const P=parseInt(C.substring(z,z+V),b);V<8?(V=h(Math.pow(b,V)),k=k.j(V).add(h(P))):(k=k.j(N),k=k.add(h(P)))}return k}var v=f(0),_=f(1),x=f(16777216);n=u.prototype,n.m=function(){if(S(this))return-R(this).m();let C=0,b=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);C+=(k>=0?k:4294967296+k)*b,b*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A(this))return"0";if(S(this))return"-"+R(this).toString(C);const b=h(Math.pow(C,6));var N=this;let k="";for(;;){const V=G(N,b).g;N=L(N,V.j(b));let z=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=V,A(N))return z+k;for(;z.length<6;)z="0"+z;k=z+k}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function A(C){if(C.h!=0)return!1;for(let b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function S(C){return C.h==-1}n.l=function(C){return C=L(this,C),S(C)?-1:A(C)?0:1};function R(C){const b=C.g.length,N=[];for(let k=0;k<b;k++)N[k]=~C.g[k];return new u(N,~C.h).add(_)}n.abs=function(){return S(this)?R(this):this},n.add=function(C){const b=Math.max(this.g.length,C.g.length),N=[];let k=0;for(let V=0;V<=b;V++){let z=k+(this.i(V)&65535)+(C.i(V)&65535),P=(z>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);k=P>>>16,z&=65535,P&=65535,N[V]=P<<16|z}return new u(N,N[N.length-1]&-2147483648?-1:0)};function L(C,b){return C.add(R(b))}n.j=function(C){if(A(this)||A(C))return v;if(S(this))return S(C)?R(this).j(R(C)):R(R(this).j(C));if(S(C))return R(this.j(R(C)));if(this.l(x)<0&&C.l(x)<0)return h(this.m()*C.m());const b=this.g.length+C.g.length,N=[];for(var k=0;k<2*b;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let V=0;V<C.g.length;V++){const z=this.i(k)>>>16,P=this.i(k)&65535,ze=C.i(V)>>>16,yt=C.i(V)&65535;N[2*k+2*V]+=P*yt,M(N,2*k+2*V),N[2*k+2*V+1]+=z*yt,M(N,2*k+2*V+1),N[2*k+2*V+1]+=P*ze,M(N,2*k+2*V+1),N[2*k+2*V+2]+=z*ze,M(N,2*k+2*V+2)}for(C=0;C<b;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=b;C<2*b;C++)N[C]=0;return new u(N,0)};function M(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function B(C,b){this.g=C,this.h=b}function G(C,b){if(A(b))throw Error("division by zero");if(A(C))return new B(v,v);if(S(C))return b=G(R(C),b),new B(R(b.g),R(b.h));if(S(b))return b=G(C,R(b)),new B(R(b.g),b.h);if(C.g.length>30){if(S(C)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var N=_,k=b;k.l(C)<=0;)N=$(N),k=$(k);var V=J(N,1),z=J(k,1);for(k=J(k,2),N=J(N,2);!A(k);){var P=z.add(k);P.l(C)<=0&&(V=V.add(N),z=P),k=J(k,1),N=J(N,1)}return b=L(C,V.j(b)),new B(V,b)}for(V=v;C.l(b)>=0;){for(N=Math.max(1,Math.floor(C.m()/b.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),z=h(N),P=z.j(b);S(P)||P.l(C)>0;)N-=k,z=h(N),P=z.j(b);A(z)&&(z=_),V=V.add(z),C=L(C,P)}return new B(V,C)}n.B=function(C){return G(this,C).h},n.and=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<b;k++)N[k]=this.i(k)&C.i(k);return new u(N,this.h&C.h)},n.or=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<b;k++)N[k]=this.i(k)|C.i(k);return new u(N,this.h|C.h)},n.xor=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let k=0;k<b;k++)N[k]=this.i(k)^C.i(k);return new u(N,this.h^C.h)};function $(C){const b=C.g.length+1,N=[];for(let k=0;k<b;k++)N[k]=C.i(k)<<1|C.i(k-1)>>>31;return new u(N,C.h)}function J(C,b){const N=b>>5;b%=32;const k=C.g.length-N,V=[];for(let z=0;z<k;z++)V[z]=b>0?C.i(z+N)>>>b|C.i(z+N+1)<<32-b:C.i(z+N);return new u(V,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Tw=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=p,mo=u}).apply(typeof Tx<"u"?Tx:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Sw,Lc,Iw,Sd,Rg,Cw,bw,Rw;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var E=0;E<g.length;++E){var T=g[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function i(g,E){if(E)e:{var T=r;g=g.split(".");for(var D=0;D<g.length-1;D++){var K=g[D];if(!(K in T))break e;T=T[K]}g=g[g.length-1],D=T[g],E=E(D),E!=D&&E!=null&&e(T,g,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(E){var T=[],D;for(D in E)Object.prototype.hasOwnProperty.call(E,D)&&T.push([D,E[D]]);return T}});var a=a||{},u=this||self;function l(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function f(g,E,T){return g.call.apply(g.bind,arguments)}function h(g,E,T){return h=f,h.apply(null,arguments)}function p(g,E){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),g.apply(this,D)}}function v(g,E){function T(){}T.prototype=E.prototype,g.Z=E.prototype,g.prototype=new T,g.prototype.constructor=g,g.Ob=function(D,K,ee){for(var ce=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ce[Pe-2]=arguments[Pe];return E.prototype[K].apply(D,ce)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function x(g){const E=g.length;if(E>0){const T=Array(E);for(let D=0;D<E;D++)T[D]=g[D];return T}return[]}function A(g,E){for(let D=1;D<arguments.length;D++){const K=arguments[D];var T=typeof K;if(T=T!="object"?T:K?Array.isArray(K)?"array":T:"null",T=="array"||T=="object"&&typeof K.length=="number"){T=g.length||0;const ee=K.length||0;g.length=T+ee;for(let ce=0;ce<ee;ce++)g[T+ce]=K[ce]}else g.push(K)}}class S{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function R(g){u.setTimeout(()=>{throw g},0)}function L(){var g=C;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class M{constructor(){this.h=this.g=null}add(E,T){const D=B.get();D.set(E,T),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new S(()=>new G,g=>g.reset());class G{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let $,J=!1,C=new M,b=()=>{const g=Promise.resolve(void 0);$=()=>{g.then(N)}};function N(){for(var g;g=L();){try{g.h.call(g.g)}catch(T){R(T)}var E=B;E.j(g),E.h<100&&(E.h++,g.next=E.g,E.g=g)}J=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const T=()=>{};u.addEventListener("test",T,E),u.removeEventListener("test",T,E)}catch{}return g})();function P(g){return/^[\s\xa0]*$/.test(g)}function ze(g,E){V.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,E)}v(ze,V),ze.prototype.init=function(g,E){const T=this.type=g.type,D=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget,E||(T=="mouseover"?E=g.fromElement:T=="mouseout"&&(E=g.toElement)),this.relatedTarget=E,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),ne=0;function he(g,E,T,D,K){this.listener=g,this.proxy=null,this.src=E,this.type=T,this.capture=!!D,this.ha=K,this.key=++ne,this.da=this.fa=!1}function we(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ze(g,E,T){for(const D in g)E.call(T,g[D],D,g)}function lt(g,E){for(const T in g)E.call(void 0,g[T],T,g)}function H(g){const E={};for(const T in g)E[T]=g[T];return E}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(g,E){let T,D;for(let K=1;K<arguments.length;K++){D=arguments[K];for(T in D)g[T]=D[T];for(let ee=0;ee<ue.length;ee++)T=ue[ee],Object.prototype.hasOwnProperty.call(D,T)&&(g[T]=D[T])}}function ve(g){this.src=g,this.g={},this.h=0}ve.prototype.add=function(g,E,T,D,K){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const ce=ke(g,E,D,K);return ce>-1?(E=g[ce],T||(E.fa=!1)):(E=new he(E,this.src,ee,!!D,K),E.fa=T,g.push(E)),E};function De(g,E){const T=E.type;if(T in g.g){var D=g.g[T],K=Array.prototype.indexOf.call(D,E,void 0),ee;(ee=K>=0)&&Array.prototype.splice.call(D,K,1),ee&&(we(E),g.g[T].length==0&&(delete g.g[T],g.h--))}}function ke(g,E,T,D){for(let K=0;K<g.length;++K){const ee=g[K];if(!ee.da&&ee.listener==E&&ee.capture==!!T&&ee.ha==D)return K}return-1}var We="closure_lm_"+(Math.random()*1e6|0),an={};function Dt(g,E,T,D,K){if(Array.isArray(E)){for(let ee=0;ee<E.length;ee++)Dt(g,E[ee],T,D,K);return null}return T=El(T),g&&g[yt]?g.J(E,T,l(D)?!!D.capture:!1,K):Do(g,E,T,!1,D,K)}function Do(g,E,T,D,K,ee){if(!E)throw Error("Invalid event type");const ce=l(K)?!!K.capture:!!K;let Pe=Oo(g);if(Pe||(g[We]=Pe=new ve(g)),T=Pe.add(E,T,D,ce,ee),T.proxy)return T;if(D=Us(),T.proxy=D,D.src=g,D.listener=T,g.addEventListener)z||(K=ce),K===void 0&&(K=!1),g.addEventListener(E.toString(),D,K);else if(g.attachEvent)g.attachEvent(li(E.toString()),D);else if(g.addListener&&g.removeListener)g.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Us(){function g(T){return E.call(g.src,g.listener,T)}const E=_l;return g}function zs(g,E,T,D,K){if(Array.isArray(E))for(var ee=0;ee<E.length;ee++)zs(g,E[ee],T,D,K);else D=l(D)?!!D.capture:!!D,T=El(T),g&&g[yt]?(g=g.i,ee=String(E).toString(),ee in g.g&&(E=g.g[ee],T=ke(E,T,D,K),T>-1&&(we(E[T]),Array.prototype.splice.call(E,T,1),E.length==0&&(delete g.g[ee],g.h--)))):g&&(g=Oo(g))&&(E=g.g[E.toString()],g=-1,E&&(g=ke(E,T,D,K)),(T=g>-1?E[g]:null)&&js(T))}function js(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[yt])De(E.i,g);else{var T=g.type,D=g.proxy;E.removeEventListener?E.removeEventListener(T,D,g.capture):E.detachEvent?E.detachEvent(li(T),D):E.addListener&&E.removeListener&&E.removeListener(D),(T=Oo(E))?(De(T,g),T.h==0&&(T.src=null,E[We]=null)):we(g)}}}function li(g){return g in an?an[g]:an[g]="on"+g}function _l(g,E){if(g.da)g=!0;else{E=new ze(E,this);const T=g.listener,D=g.ha||g.src;g.fa&&js(g),g=T.call(D,E)}return g}function Oo(g){return g=g[We],g instanceof ve?g:null}var xl="__closure_events_fn_"+(Math.random()*1e9>>>0);function El(g){return typeof g=="function"?g:(g[xl]||(g[xl]=function(E){return g.handleEvent(E)}),g[xl])}function Xt(){k.call(this),this.i=new ve(this),this.M=this,this.G=null}v(Xt,k),Xt.prototype[yt]=!0,Xt.prototype.removeEventListener=function(g,E,T,D){zs(this,g,E,T,D)};function on(g,E){var T,D=g.G;if(D)for(T=[];D;D=D.G)T.push(D);if(g=g.M,D=E.type||E,typeof E=="string")E=new V(E,g);else if(E instanceof V)E.target=E.target||g;else{var K=E;E=new V(D,g),ge(E,K)}K=!0;let ee,ce;if(T)for(ce=T.length-1;ce>=0;ce--)ee=E.g=T[ce],K=Ea(ee,D,!0,E)&&K;if(ee=E.g=g,K=Ea(ee,D,!0,E)&&K,K=Ea(ee,D,!1,E)&&K,T)for(ce=0;ce<T.length;ce++)ee=E.g=T[ce],K=Ea(ee,D,!1,E)&&K}Xt.prototype.N=function(){if(Xt.Z.N.call(this),this.i){var g=this.i;for(const E in g.g){const T=g.g[E];for(let D=0;D<T.length;D++)we(T[D]);delete g.g[E],g.h--}}this.G=null},Xt.prototype.J=function(g,E,T,D){return this.i.add(String(g),E,!1,T,D)},Xt.prototype.K=function(g,E,T,D){return this.i.add(String(g),E,!0,T,D)};function Ea(g,E,T,D){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();let K=!0;for(let ee=0;ee<E.length;++ee){const ce=E[ee];if(ce&&!ce.da&&ce.capture==T){const Pe=ce.listener,jt=ce.ha||ce.src;ce.fa&&De(g.i,ce),K=Pe.call(jt,D)!==!1&&K}}return K&&!D.defaultPrevented}function $0(g,E){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(g,E||0)}function kf(g){g.g=$0(()=>{g.g=null,g.i&&(g.i=!1,kf(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class Gn extends k{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:kf(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(g){k.call(this),this.h=g,this.g={}}v(No,k);var Al=[];function wl(g){Ze(g.g,function(E,T){this.g.hasOwnProperty(T)&&js(E)},g),g.g={}}No.prototype.N=function(){No.Z.N.call(this),wl(this)},No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Aa=u.JSON.stringify,Z0=u.JSON.parse,Bf=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Vf(){}function Ff(){}var Hr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){V.call(this,"d")}v(Sn,V);function Ar(){V.call(this,"c")}v(Ar,V);var zt={},Uf=null;function Hs(){return Uf=Uf||new Xt}zt.Ia="serverreachability";function zf(g){V.call(this,zt.Ia,g)}v(zf,V);function ci(g){const E=Hs();on(E,new zf(E))}zt.STAT_EVENT="statevent";function Mo(g,E){V.call(this,zt.STAT_EVENT,g),this.stat=E}v(Mo,V);function Kt(g){const E=Hs();on(E,new Mo(E,g))}zt.Ja="timingevent";function fi(g,E){V.call(this,zt.Ja,g),this.size=E}v(fi,V);function hi(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},E)}function Gr(){this.g=!0}Gr.prototype.ua=function(){this.g=!1};function J0(g,E,T,D,K,ee){g.info(function(){if(g.g)if(ee){var ce="",Pe=ee.split("&");for(let rt=0;rt<Pe.length;rt++){var jt=Pe[rt].split("=");if(jt.length>1){const Ot=jt[0];jt=jt[1];const Ir=Ot.split("_");ce=Ir.length>=2&&Ir[1]=="type"?ce+(Ot+"="+jt+"&"):ce+(Ot+"=redacted&")}}}else ce=null;else ce=ee;return"XMLHTTP REQ ("+D+") [attempt "+K+"]: "+E+`
`+T+`
`+ce})}function jf(g,E,T,D,K,ee,ce){g.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+K+"]: "+E+`
`+T+`
`+ee+" "+ce})}function di(g,E,T,D){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+e1(g,T)+(D?" "+D:"")})}function Po(g,E){g.info(function(){return"TIMEOUT: "+E})}Gr.prototype.info=function(){};function e1(g,E){if(!g.g)return E;if(!E)return null;try{const ee=JSON.parse(E);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var T=ee[g];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var K=D[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ce=1;ce<D.length;ce++)D[ce]=""}}}}return Aa(ee)}catch{return E}}var Lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sl;function ko(){}v(ko,Vf),ko.prototype.g=function(){return new XMLHttpRequest},Sl=new ko;function ji(g){return encodeURIComponent(String(g))}function Hf(g){var E=1;g=g.split(":");const T=[];for(;E>0&&g.length;)T.push(g.shift()),E--;return g.length&&T.push(g.join(":")),T}function qr(g,E,T,D){this.j=g,this.i=E,this.l=T,this.S=D||1,this.V=new No(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xr}function Xr(){this.i=null,this.g="",this.h=!1}var Yt={},vn={};function pi(g,E,T){g.M=1,g.A=Bo(Qt(E)),g.u=T,g.R=!0,Gs(g,null)}function Gs(g,E){g.F=Date.now(),gi(g),g.B=Qt(g.A);var T=g.B,D=g.S;Array.isArray(D)||(D=[String(D)]),Ys(T.i,"t",D),g.C=0,T=g.j.L,g.h=new Xr,g.g=ih(g.j,T?E:null,!g.u),g.P>0&&(g.O=new Gn(h(g.Y,g,g.g),g.P)),E=g.V,T=g.g,D=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(Al[0]=K.toString()),K=Al);for(let ee=0;ee<K.length;ee++){const ce=Dt(T,K[ee],D||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=g.J?H(g.J):{},g.u?(g.v||(g.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,E)):(g.v="GET",g.g.ea(g.B,g.v,null,E)),ci(),J0(g.i,g.v,g.B,g.l,g.S,g.u)}qr.prototype.ba=function(g){g=g.target;const E=this.O;E&&Wr(g)==3?E.j():this.Y(g)},qr.prototype.Y=function(g){try{if(g==this.g)e:{const Pe=Wr(this.g),jt=this.g.ya(),rt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||Pe!=4||jt==7||(jt==8||rt<=0?ci(3):ci(2)),vi(this);var E=this.g.ca();this.X=E;var T=t1(this);if(this.o=E==200,jf(this.i,this.v,this.B,this.l,this.S,Pe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var D,K=this.g;if((D=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(D)){var ee=D;break t}}ee=null}if(g=ee)di(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mi(this,g);else{this.o=!1,this.m=3,Kt(12),lr(this),wr(this);break e}}if(this.R){g=!0;let Ot;for(;!this.K&&this.C<T.length;)if(Ot=qf(this,T),Ot==vn){Pe==4&&(this.m=4,Kt(14),g=!1),di(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Yt){this.m=4,Kt(15),di(this.i,this.l,T,"[Invalid Chunk]"),g=!1;break}else di(this.i,this.l,Ot,null),mi(this,Ot);if(Gf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||T.length!=0||this.h.h||(this.m=1,Kt(16),g=!1),this.o=this.o&&g,!g)di(this.i,this.l,T,"[Invalid Chunked Response]"),lr(this),wr(this);else if(T.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ul(ce),ce.P=!0,Kt(11))}}else di(this.i,this.l,T,null),mi(this,T);Pe==4&&lr(this),this.o&&!this.K&&(Pe==4?eh(this.j,this):(this.o=!1,gi(this)))}else Gi(this.g),E==400&&T.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),lr(this),wr(this)}}}catch{}};function t1(g){if(!Gf(g))return g.g.la();const E=In(g.g);if(E==="")return"";let T="";const D=E.length,K=Wr(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return lr(g),wr(g),"";g.h.i=new u.TextDecoder}for(let ee=0;ee<D;ee++)g.h.h=!0,T+=g.h.i.decode(E[ee],{stream:!(K&&ee==D-1)});return E.length=0,g.h.g+=T,g.C=0,g.h.g}function Gf(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function qf(g,E){var T=g.C,D=E.indexOf(`
`,T);return D==-1?vn:(T=Number(E.substring(T,D)),isNaN(T)?Yt:(D+=1,D+T>E.length?vn:(E=E.slice(D,D+T),g.C=D+T,E)))}qr.prototype.cancel=function(){this.K=!0,lr(this)};function gi(g){g.T=Date.now()+g.H,qs(g,g.H)}function qs(g,E){if(g.D!=null)throw Error("WatchDog timer not null");g.D=hi(h(g.aa,g),E)}function vi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}qr.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Po(this.i,this.B),this.M!=2&&(ci(),Kt(17)),lr(this),this.m=2,wr(this)):qs(this,this.T-g)};function wr(g){g.j.I==0||g.K||eh(g.j,g)}function lr(g){vi(g);var E=g.O;E&&typeof E.dispose=="function"&&E.dispose(),g.O=null,wl(g.V),g.g&&(E=g.g,g.g=null,E.abort(),E.dispose())}function mi(g,E){try{var T=g.j;if(T.I!=0&&(T.g==g||_i(T.h,g))){if(!g.L&&_i(T.h,g)&&T.I==3){try{var D=T.Ba.g.parse(E)}catch{D=null}if(Array.isArray(D)&&D.length==3){var K=D;if(K[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<g.F)Js(T),Da(T);else break e;Go(T),Kt(18)}}else T.xa=K[1],0<T.xa-T.K&&K[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=hi(h(T.Va,T),6e3));yi(T.h)<=1&&T.ta&&(T.ta=void 0)}else Si(T,11)}else if((g.L||T.g==g)&&Js(T),!P(E))for(K=T.Ba.g.parse(E),E=0;E<K.length;E++){let rt=K[E];const Ot=rt[0];if(!(Ot<=T.K))if(T.K=Ot,rt=rt[1],T.I==2)if(rt[0]=="c"){T.M=rt[1],T.ba=rt[2];const Ir=rt[3];Ir!=null&&(T.ka=Ir,T.j.info("VER="+T.ka));const Ii=rt[4];Ii!=null&&(T.za=Ii,T.j.info("SVER="+T.za));const Qr=rt[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(D=1.5*Qr,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const $r=g.g;if($r){const qo=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qo){var ee=D.h;ee.g||qo.indexOf("spdy")==-1&&qo.indexOf("quic")==-1&&qo.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(bl(ee,ee.h),ee.h=null))}if(D.G){const eu=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;eu&&(D.wa=eu,ct(D.J,D.G,eu))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-g.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var ce=g;if(D.na=rh(D,D.L?D.ba:null,D.W),ce.L){Rl(D.h,ce);var Pe=ce,jt=D.O;jt&&(Pe.H=jt),Pe.D&&(vi(Pe),gi(Pe)),D.g=ce}else Zf(D);T.i.length>0&&Ti(T)}else rt[0]!="stop"&&rt[0]!="close"||Si(T,7);else T.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Si(T,7):Vl(T):rt[0]!="noop"&&T.l&&T.l.qa(rt),T.A=0)}}ci(4)}catch{}}var Wt=class{constructor(g,E){this.g=g,this.map=E}};function Il(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function yi(g){return g.h?1:g.g?g.g.size:0}function _i(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function bl(g,E){g.g?g.g.add(E):g.h=E}function Rl(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}Il.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Dl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const T of g.g.values())E=E.concat(T.G);return E}return x(g.i)}var Xf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xs(g,E){if(g){g=g.split("&");for(let T=0;T<g.length;T++){const D=g[T].indexOf("=");let K,ee=null;D>=0?(K=g[T].substring(0,D),ee=g[T].substring(D+1)):K=g[T],E(K,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function cr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;g instanceof cr?(this.l=g.l,mn(this,g.j),this.o=g.o,this.g=g.g,wa(this,g.u),this.h=g.h,Ol(this,Qf(g.i)),this.m=g.m):g&&(E=String(g).match(Xf))?(this.l=!1,mn(this,E[1]||"",!0),this.o=xi(E[2]||""),this.g=xi(E[3]||"",!0),wa(this,E[4]),this.h=xi(E[5]||"",!0),Ol(this,E[6]||"",!0),this.m=xi(E[7]||"")):(this.l=!1,this.i=new Sa(null,this.l))}cr.prototype.toString=function(){const g=[];var E=this.j;E&&g.push(Vo(E,Ks,!0),":");var T=this.g;return(T||E=="file")&&(g.push("//"),(E=this.o)&&g.push(Vo(E,Ks,!0),"@"),g.push(ji(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&g.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&g.push("/"),g.push(Vo(T,T.charAt(0)=="/"?Nl:Kf,!0))),(T=this.i.toString())&&g.push("?",T),(T=this.m)&&g.push("#",Vo(T,Yf)),g.join("")},cr.prototype.resolve=function(g){const E=Qt(this);let T=!!g.j;T?mn(E,g.j):T=!!g.o,T?E.o=g.o:T=!!g.g,T?E.g=g.g:T=g.u!=null;var D=g.h;if(T)wa(E,g.u);else if(T=!!g.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var K=E.h.lastIndexOf("/");K!=-1&&(D=E.h.slice(0,K+1)+D)}if(K=D,K==".."||K==".")D="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){D=K.lastIndexOf("/",0)==0,K=K.split("/");const ee=[];for(let ce=0;ce<K.length;){const Pe=K[ce++];Pe=="."?D&&ce==K.length&&ee.push(""):Pe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),D&&ce==K.length&&ee.push("")):(ee.push(Pe),D=!0)}D=ee.join("/")}else D=K}return T?E.h=D:T=g.i.toString()!=="",T?Ol(E,Qf(g.i)):T=!!g.m,T&&(E.m=g.m),E};function Qt(g){return new cr(g)}function mn(g,E,T){g.j=T?xi(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function wa(g,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);g.u=E}else g.u=null}function Ol(g,E,T){E instanceof Sa?(g.i=E,Ws(g.i,g.l)):(T||(E=Vo(E,Ta)),g.i=new Sa(E,g.l))}function ct(g,E,T){g.i.set(E,T)}function Bo(g){return ct(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function xi(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Vo(g,E,T){return typeof g=="string"?(g=encodeURI(g).replace(E,Zn),T&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Zn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ks=/[#\/\?@]/g,Kf=/[#\?:]/g,Nl=/[#\?]/g,Ta=/[#\?@]/g,Yf=/#/g;function Sa(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function Jn(g){g.g||(g.g=new Map,g.h=0,g.i&&Xs(g.i,function(E,T){g.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}n=Sa.prototype,n.add=function(g,E){Jn(this),this.i=null,g=Ia(this,g);let T=this.g.get(g);return T||this.g.set(g,T=[]),T.push(E),this.h+=1,this};function Wf(g,E){Jn(g),E=Ia(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function Ml(g,E){return Jn(g),E=Ia(g,E),g.g.has(E)}n.forEach=function(g,E){Jn(this),this.g.forEach(function(T,D){T.forEach(function(K){g.call(E,K,D,this)},this)},this)};function Pl(g,E){Jn(g);let T=[];if(typeof E=="string")Ml(g,E)&&(T=T.concat(g.g.get(Ia(g,E))));else for(g=Array.from(g.g.values()),E=0;E<g.length;E++)T=T.concat(g[E]);return T}n.set=function(g,E){return Jn(this),this.i=null,g=Ia(this,g),Ml(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g?(g=Pl(this,g),g.length>0?String(g[0]):E):E};function Ys(g,E,T){Wf(g,E),T.length>0&&(g.i=null,g.g.set(Ia(g,E),x(T)),g.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(let D=0;D<E.length;D++){var T=E[D];const K=ji(T);T=Pl(this,T);for(let ee=0;ee<T.length;ee++){let ce=K;T[ee]!==""&&(ce+="="+ji(T[ee])),g.push(ce)}}return this.i=g.join("&")};function Qf(g){const E=new Sa;return E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),E}function Ia(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Ws(g,E){E&&!g.j&&(Jn(g),g.i=null,g.g.forEach(function(T,D){const K=D.toLowerCase();D!=K&&(Wf(this,D),Ys(this,K,T))},g)),g.j=E}function Kr(g,E){const T=new Gr;if(u.Image){const D=new Image;D.onload=p(Tr,T,"TestLoadImage: loaded",!0,E,D),D.onerror=p(Tr,T,"TestLoadImage: error",!1,E,D),D.onabort=p(Tr,T,"TestLoadImage: abort",!1,E,D),D.ontimeout=p(Tr,T,"TestLoadImage: timeout",!1,E,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=g}else E(!1)}function Ll(g,E){const T=new Gr,D=new AbortController,K=setTimeout(()=>{D.abort(),Tr(T,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:D.signal}).then(ee=>{clearTimeout(K),ee.ok?Tr(T,"TestPingServer: ok",!0,E):Tr(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(K),Tr(T,"TestPingServer: error",!1,E)})}function Tr(g,E,T,D,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),D(T)}catch{}}function Ca(){this.g=new Bf}function Ei(g){this.i=g.Sb||null,this.h=g.ab||!1}v(Ei,Vf),Ei.prototype.g=function(){return new Fo(this.i,this.h)};function Fo(g,E){Xt.call(this),this.H=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Fo,Xt),n=Fo.prototype,n.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=E,this.readyState=1,Yr(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(E.body=g),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qs(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qs(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?ba(this):Yr(this),this.readyState==3&&Qs(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,ba(this))},n.Na=function(g){this.g&&(this.response=g,ba(this))},n.ga=function(){this.g&&ba(this)};function ba(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Yr(g)}n.setRequestHeader=function(g,E){this.A.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,g.push(T[0]+": "+T[1]),T=E.next();return g.join(`\r
`)};function Yr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Sr(g){let E="";return Ze(g,function(T,D){E+=D,E+=":",E+=T,E+=`\r
`}),E}function Uo(g,E,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Sr(T),typeof g=="string"?T!=null&&ji(T):ct(g,E,T))}function _t(g){Xt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(_t,Xt);var Ai=/^https?$/i,kl=["POST","PUT"];n=_t.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,E,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sl.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(ee){zo(this,ee);return}if(g=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var K in D)T.set(K,D[K]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ee of D.keys())T.set(ee,D.get(ee));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(kl,E,void 0)>=0)||D||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ce]of T)this.g.setRequestHeader(ee,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){zo(this,ee)}};function zo(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.o=5,Bl(g),Hi(g)}function Bl(g){g.A||(g.A=!0,on(g,"complete"),on(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,on(this,"complete"),on(this,"abort"),Hi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),_t.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?jo(this):this.Xa())},n.Xa=function(){jo(this)};function jo(g){if(g.h&&typeof a<"u"){if(g.v&&Wr(g)==4)setTimeout(g.Ca.bind(g),0);else if(on(g,"readystatechange"),Wr(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var D;if(D=ee===0){let ce=String(g.D).match(Xf)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),D=!Ai.test(ce?ce.toLowerCase():"")}T=D}if(T)on(g,"complete"),on(g,"success");else{g.o=6;try{var K=Wr(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",Bl(g)}}finally{Hi(g)}}}}function Hi(g,E){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const T=g.g;g.g=null,E||on(g,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Wr(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Wr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),Z0(E)}};function In(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Gi(g){const E={};g=(g.g&&Wr(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<g.length;D++){if(P(g[D]))continue;var T=Hf(g[D]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=E[K]||[];E[K]=ee,ee.push(T)}lt(E,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(g,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[g]||E}function Ra(g){this.za=0,this.i=[],this.j=new Gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,g),this.Za=wi("retryDelaySeedMs",1e4,g),this.Ta=wi("forwardChannelMaxRetries",2,g),this.va=wi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Il(g&&g.concurrentRequestLimit),this.Ba=new Ca,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(g,E,T,D){Kt(0),this.W=g,this.H=E||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=rh(this,null,this.W),Ti(this)};function Vl(g){if($s(g),g.I==3){var E=g.V++,T=Qt(g.J);if(ct(T,"SID",g.M),ct(T,"RID",E),ct(T,"TYPE","terminate"),Ho(g,T),E=new qr(g,g.j,E),E.M=2,E.A=Bo(Qt(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=E.A,T=!0),T||(E.g=ih(E.j,null),E.g.ea(E.A)),E.F=Date.now(),gi(E)}nh(g)}function Da(g){g.g&&(Ul(g),g.g.cancel(),g.g=null)}function $s(g){Da(g),g.v&&(u.clearTimeout(g.v),g.v=null),Js(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Ti(g){if(!Cl(g.h)&&!g.m){g.m=!0;var E=g.Ea;$||b(),J||($(),J=!0),C.add(E,g),g.D=0}}function Zs(g,E){return yi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=E.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=hi(h(g.Ea,g,E),th(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new qr(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=H(ee),ge(ee,this.U)):ee=this.U),this.u!==null||this.R||(K.J=ee,ee=null),this.S)e:{for(var E=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(E+=D,E>4096){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=$f(this,K,E),T=Qt(this.J),ct(T,"RID",g),ct(T,"CVER",22),this.G&&ct(T,"X-HTTP-Session-Id",this.G),Ho(this,T),ee&&(this.R?E="headers="+ji(Sr(ee))+"&"+E:this.u&&Uo(T,this.u,ee)),bl(this.h,K),this.Ra&&ct(T,"TYPE","init"),this.S?(ct(T,"$req",E),ct(T,"SID","null"),K.U=!0,pi(K,T,null)):pi(K,T,E),this.I=2}}else this.I==3&&(g?Fl(this,g):this.i.length==0||Cl(this.h)||Fl(this))};function Fl(g,E){var T;E?T=E.l:T=g.V++;const D=Qt(g.J);ct(D,"SID",g.M),ct(D,"RID",T),ct(D,"AID",g.K),Ho(g,D),g.u&&g.o&&Uo(D,g.u,g.o),T=new qr(g,g.j,T,g.D+1),g.u===null&&(T.J=g.o),E&&(g.i=E.G.concat(g.i)),E=$f(g,T,1e3),T.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),bl(g.h,T),pi(T,D,E)}function Ho(g,E){g.H&&Ze(g.H,function(T,D){ct(E,D,T)}),g.l&&Ze({},function(T,D){ct(E,D,T)})}function $f(g,E,T){T=Math.min(g.i.length,T);const D=g.l?h(g.l.Ka,g.l,g):null;e:{var K=g.i;let Pe=-1;for(;;){const jt=["count="+T];Pe==-1?T>0?(Pe=K[0].g,jt.push("ofs="+Pe)):Pe=0:jt.push("ofs="+Pe);let rt=!0;for(let Ot=0;Ot<T;Ot++){var ee=K[Ot].g;const Ir=K[Ot].map;if(ee-=Pe,ee<0)Pe=Math.max(0,K[Ot].g-100),rt=!1;else try{ee="req"+ee+"_"||"";try{var ce=Ir instanceof Map?Ir:Object.entries(Ir);for(const[Ii,Qr]of ce){let $r=Qr;l(Qr)&&($r=Aa(Qr)),jt.push(ee+Ii+"="+encodeURIComponent($r))}}catch(Ii){throw jt.push(ee+"type="+encodeURIComponent("_badmap")),Ii}}catch{D&&D(Ir)}}if(rt){ce=jt.join("&");break e}}ce=void 0}return g=g.i.splice(0,T),E.G=g,ce}function Zf(g){if(!g.g&&!g.v){g.Y=1;var E=g.Da;$||b(),J||($(),J=!0),C.add(E,g),g.A=0}}function Go(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=hi(h(g.Da,g),th(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Jf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=hi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Da(this),Jf(this))};function Ul(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function Jf(g){g.g=new qr(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var E=Qt(g.na);ct(E,"RID","rpc"),ct(E,"SID",g.M),ct(E,"AID",g.K),ct(E,"CI",g.F?"0":"1"),!g.F&&g.ia&&ct(E,"TO",g.ia),ct(E,"TYPE","xmlhttp"),Ho(g,E),g.u&&g.o&&Uo(E,g.u,g.o),g.O&&(g.g.H=g.O);var T=g.g;g=g.ba,T.M=1,T.A=Bo(Qt(E)),T.u=null,T.R=!0,Gs(T,g)}n.Va=function(){this.C!=null&&(this.C=null,Da(this),Go(this),Kt(19))};function Js(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function eh(g,E){var T=null;if(g.g==E){Js(g),Ul(g),g.g=null;var D=2}else if(_i(g.h,E))T=E.G,Rl(g.h,E),D=1;else return;if(g.I!=0){if(E.o)if(D==1){T=E.u?E.u.length:0,E=Date.now()-E.F;var K=g.D;D=Hs(),on(D,new fi(D,T)),Ti(g)}else Zf(g);else if(K=E.m,K==3||K==0&&E.X>0||!(D==1&&Zs(g,E)||D==2&&Go(g)))switch(T&&T.length>0&&(E=g.h,E.i=E.i.concat(T)),K){case 1:Si(g,5);break;case 4:Si(g,10);break;case 3:Si(g,6);break;default:Si(g,2)}}}function th(g,E){let T=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(T*=2),T*E}function Si(g,E){if(g.j.info("Error code "+E),E==2){var T=h(g.bb,g),D=g.Ua;const K=!D;D=new cr(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||mn(D,"https"),Bo(D),K?Kr(D.toString(),T):Ll(D.toString(),T)}else Kt(2);g.I=0,g.l&&g.l.pa(E),nh(g),$s(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function nh(g){if(g.I=0,g.ja=[],g.l){const E=Dl(g.h);(E.length!=0||g.i.length!=0)&&(A(g.ja,E),A(g.ja,g.i),g.h.i.length=0,x(g.i),g.i.length=0),g.l.oa()}}function rh(g,E,T){var D=T instanceof cr?Qt(T):new cr(T);if(D.g!="")E&&(D.g=E+"."+D.g),wa(D,D.u);else{var K=u.location;D=K.protocol,E=E?E+"."+K.hostname:K.hostname,K=+K.port;const ee=new cr(null);D&&mn(ee,D),E&&(ee.g=E),K&&wa(ee,K),T&&(ee.h=T),D=ee}return T=g.G,E=g.wa,T&&E&&ct(D,T,E),ct(D,"VER",g.ka),Ho(g,D),D}function ih(g,E,T){if(E&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Aa&&!g.ma?new _t(new Ei({ab:T})):new _t(g.ma),E.Fa(g.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}n=ah.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Oa(){}Oa.prototype.g=function(g,E){return new qn(g,E)};function qn(g,E){Xt.call(this),this.g=new Ra(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(g?g["X-WebChannel-Client-Profile"]=E.sa:g={"X-WebChannel-Client-Profile":E.sa}),this.g.U=g,(g=E&&E.Qb)&&!P(g)&&(this.g.u=g),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!P(E)&&(this.g.G=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new qi(this)}v(qn,Xt),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Vl(this.g)},qn.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var T={};T.__data__=g,g=T}else this.v&&(T={},T.__data__=Aa(g),g=T);E.i.push(new Wt(E.Ya++,g)),E.I==3&&Ti(E)},qn.prototype.N=function(){this.g.l=null,delete this.j,Vl(this.g),delete this.g,qn.Z.N.call(this)};function oh(g){Sn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const T in E){g=T;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}v(oh,Sn);function sh(){Ar.call(this),this.status=1}v(sh,Ar);function qi(g){this.g=g}v(qi,ah),qi.prototype.ra=function(){on(this.g,"a")},qi.prototype.qa=function(g){on(this.g,new oh(g))},qi.prototype.pa=function(g){on(this.g,new sh)},qi.prototype.oa=function(){on(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,Rw=function(){return new Oa},bw=function(){return Hs()},Cw=zt,Rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,Sd=Lo,Tl.COMPLETE="complete",Iw=Tl,Ff.EventType=Hr,Hr.OPEN="a",Hr.CLOSE="b",Hr.ERROR="c",Hr.MESSAGE="d",Xt.prototype.listen=Xt.prototype.J,Lc=Ff,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,Sw=_t}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const Sx="@firebase/firestore",Ix="4.9.3";class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let dl="12.7.0";const bs=new Av("@firebase/firestore");function Bu(){return bs.logLevel}function le(n,...e){if(bs.logLevel<=Xe.DEBUG){const t=e.map(Sv);bs.debug(`Firestore (${dl}): ${n}`,...t)}}function Qn(n,...e){if(bs.logLevel<=Xe.ERROR){const t=e.map(Sv);bs.error(`Firestore (${dl}): ${n}`,...t)}}function Rs(n,...e){if(bs.logLevel<=Xe.WARN){const t=e.map(Sv);bs.warn(`Firestore (${dl}): ${n}`,...t)}}function Sv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function _e(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Dw(n,r,t)}function Dw(n,e,t){let r=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qn(r),new Error(r)}function Ae(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Dw(e,i,r)}function Ne(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ga{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ow{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class Qb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $b{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yo,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},l=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>l(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?l(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new Ow(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class Zb{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Zb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class e8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const r=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function t8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Iv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=t8(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function Dg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return og(i)===og(a)?Oe(i,a):og(i)?1:-1}return Oe(n.length,e.length)}const n8=55296,r8=57343;function og(n){const e=n.charCodeAt(0);return e>=n8&&e<=r8}function $u(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function Nw(n){return n+"\0"}const bx="__name__";class Oi{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=Oi.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const r=Oi.isNumericId(e),i=Oi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):Dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class st extends Oi{construct(e,t,r){return new st(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const i8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Oi{construct(e,t,r){return new Lt(e,t,r)}static isValidIdentifier(e){return i8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new Lt([bx])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new de(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new de(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else l==="`"?(u=!u,i++):l!=="."||u?(r+=l,i++):(a(),i++)}if(a(),u)throw new de(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(st.fromString(e))}static fromName(e){return new pe(st.fromString(e).popFirst(5))}static empty(){return new pe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new st(e.slice()))}}function Mw(n,e,t){if(!t)throw new de(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function a8(n,e,t,r){if(e===!0&&r===!0)throw new de(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Rx(n){if(!pe.isDocumentKey(n))throw new de(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Dx(n){if(pe.isDocumentKey(n))throw new de(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function x0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function si(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=x0(n);throw new de(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function xf(n,e){if(!Pw(n))throw new de(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new de(ae.INVALID_ARGUMENT,t);return!0}const Ox=-62135596800,Nx=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Nx);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ox)throw new de(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nx}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xf(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ox;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:nn("string",gt._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new gt(0,0))}static max(){return new Se(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nf=-1;class Kd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Og(n){return n.fields.find((e=>e.kind===2))}function fs(n){return n.fields.filter((e=>e.kind!==2))}Kd.UNKNOWN_ID=-1;class Id{constructor(e,t){this.fieldPath=e,this.kind=t}}class rf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rf(0,Er.min())}}function o8(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new Er(i,pe.empty(),e)}function Lw(n){return new Er(n.readTime,n.key,nf)}class Er{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Er(Se.min(),pe.empty(),nf)}static max(){return new Er(Se.max(),pe.empty(),nf)}}function Cv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}const kw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vs(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==kw)throw n;le("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,r)=>{t(e)}))}static reject(e){return new X(((t,r)=>{r(e)}))}static waitFor(e){return new X(((t,r)=>{let i=0,a=0,u=!1;e.forEach((l=>{++i,l.next((()=>{++a,u&&a===i&&t()}),(f=>r(f)))})),u=!0,a===i&&t()}))}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next((i=>i?X.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new X(((r,i)=>{const a=e.length,u=new Array(a);let l=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((p=>{u[h]=p,++l,l===a&&r(u)}),(p=>i(p)))}}))}static doWhile(e,t){return new X(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}const yr="SimpleDb";class E0{static open(e,t,r,i){try{return new E0(t,e.transaction(i,r))}catch(a){throw new qc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new qc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=bv(r.target.error);this.S.reject(new qc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new u8(t)}}class _o{static delete(e){return le(yr,"Removing database:",e),ps(uw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!mw())return!1;if(_o.F())return!0;const e=pn(),t=_o.M(e),r=0<t&&t<10,i=Vw(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,_o.M(pn())===12.2&&Qn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(yr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const u=a.target.result;t(u)},i.onblocked=()=>{r(new qc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const u=a.target.error;u.name==="VersionError"?r(new de(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new de(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new qc(e,u))},i.onupgradeneeded=a=>{le(yr,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const u=a.target.result;this.N.k(u,i.transaction,a.oldVersion,this.version).next((()=>{le(yr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.L(e);const l=E0.open(this.db,e,a?"readonly":"readwrite",r),f=i(l).next((h=>(l.C(),h))).catch((h=>(l.abort(h),X.reject(h)))).toPromise();return f.catch((()=>{})),await l.D,f}catch(l){const f=l,h=f.name!=="FirebaseError"&&u<3;if(le(yr,"Transaction failed with error:",f.message,"Retrying:",h),this.close(),!h)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Vw(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class s8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ps(this.U.delete())}}class qc extends de{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bo(n){return n.name==="IndexedDbTransactionError"}class u8{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(yr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(yr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ps(r)}add(e){return le(yr,"ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(yr,"GET",this.store.name,e,t),t)))}delete(e){return le(yr,"DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return le(yr,"COUNT",this.store.name),ps(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new X(((u,l)=>{a.onerror=f=>{l(f.target.error)},a.onsuccess=f=>{u(f.target.result)}}))}{const a=this.cursor(r),u=[];return this.H(a,((l,f)=>{u.push(f)})).next((()=>u))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new X(((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}}))}Z(e,t){le(yr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((a,u,l)=>l.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new X(((r,i)=>{t.onerror=a=>{const u=bv(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next((l=>{l?u.continue():r()})):r()}}))}H(e,t){const r=[];return new X(((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const l=u.target.result;if(!l)return void i();const f=new s8(l),h=t(l.primaryKey,l.value,f);if(h instanceof X){const p=h.catch((v=>(f.done(),X.reject(v))));r.push(p)}f.isDone?i():f.G===null?l.continue():l.continue(f.G)}})).next((()=>X.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ps(n){return new X(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=bv(r.target.error);t(i)}}))}let Mx=!1;function bv(n){const e=_o.M(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mx||(Mx=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Xc="IndexBackfiller";class l8{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(Xc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(Xc,`Documents written: ${t}`)}catch(t){bo(t)?le(Xc,"Ignoring IndexedDB error during index backfill: ",t):await Vs(t)}await this.re(6e4)}))}}class c8{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return X.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return le(Xc,`Processing collection: ${u}`),this.oe(e,u,i).next((l=>{i-=l,r.add(u)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this._e(i,a))).next((l=>(le(Xc,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l)))).next((()=>u.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const u=Lw(a);Cv(u,r)>0&&(r=u)})),new Er(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Vr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vr.ce=-1;const Es=-1;function A0(n){return n==null}function af(n){return n===0&&1/n==-1/0}function f8(n){return typeof n=="number"&&Number.isInteger(n)&&!af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Yd="";function jn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Px(e)),e=h8(n.get(t),e);return Px(e)}function h8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Yd:t+="";break;default:t+=a}}return t}function Px(n){return n+Yd+""}function Ni(n){const e=n.length;if(Ae(e>=2,64408,{path:n}),e===2)return Ae(n.charAt(0)===Yd&&n.charAt(1)==="",56145,{path:n}),st.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf(Yd,a);switch((u<0||u>t)&&_e(50515,{path:n}),n.charAt(u+1)){case"":const l=n.substring(a,u);let f;i.length===0?f=l:(i+=l,f=i,i=""),r.push(f);break;case"":i+=n.substring(a,u),i+="\0";break;case"":i+=n.substring(a,u+1);break;default:_e(61167,{path:n})}a=u+2}return new st(r)}const hs="remoteDocuments",Ef="owner",Du="owner",of="mutationQueues",d8="userId",ri="mutations",Lx="batchId",ys="userMutationsIndex",kx=["userId","batchId"];function Cd(n,e){return[n,jn(e)]}function Fw(n,e,t){return[n,jn(e),t]}const p8={},Zu="documentMutations",Wd="remoteDocumentsV14",g8=["prefixPath","collectionGroup","readTime","documentId"],bd="documentKeyIndex",v8=["prefixPath","collectionGroup","documentId"],Uw="collectionGroupIndex",m8=["collectionGroup","readTime","prefixPath","documentId"],sf="remoteDocumentGlobal",Ng="remoteDocumentGlobalKey",Ju="targets",zw="queryTargetsIndex",y8=["canonicalId","targetId"],el="targetDocuments",_8=["targetId","path"],Rv="documentTargetsIndex",x8=["path","targetId"],Qd="targetGlobalKey",As="targetGlobal",uf="collectionParents",E8=["collectionId","parent"],tl="clientMetadata",A8="clientId",w0="bundles",w8="bundleId",T0="namedQueries",T8="name",Dv="indexConfiguration",S8="indexId",Mg="collectionGroupIndex",I8="collectionGroup",Kc="indexState",C8=["indexId","uid"],jw="sequenceNumberIndex",b8=["uid","sequenceNumber"],Yc="indexEntries",R8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hw="documentKeyIndex",D8=["indexId","uid","orderedDocumentKey"],S0="documentOverlays",O8=["userId","collectionPath","documentId"],Pg="collectionPathOverlayIndex",N8=["userId","collectionPath","largestBatchId"],Gw="collectionGroupOverlayIndex",M8=["userId","collectionGroup","largestBatchId"],Ov="globals",P8="name",qw=[of,ri,Zu,hs,Ju,Ef,As,el,tl,sf,uf,w0,T0],L8=[...qw,S0],Xw=[of,ri,Zu,Wd,Ju,Ef,As,el,tl,sf,uf,w0,T0,S0],Kw=Xw,Nv=[...Kw,Dv,Kc,Yc],k8=Nv,Yw=[...Nv,Ov],B8=Yw;class Lg extends Bw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(n,e){const t=Ne(n);return _o.O(t.le,e)}function Bx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ww(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Pt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Pn.RED,this.left=i??Pn.EMPTY,this.right=a??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Pn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Pn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vx(this.data.getIterator())}getIteratorFrom(e){return new Vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class Vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ou(n){return n.hasNext()?n.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new mt(Lt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $u(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class Qw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Qw("Invalid base64 string: "+a):a}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);return a})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const V8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fa(n){if(Ae(!!n,39018),typeof n=="string"){let e=0;const t=V8.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ha(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}const $w="server_timestamp",Zw="__type__",Jw="__previous_value__",eT="__local_write_time__";function Mv(n){return(n?.mapValue?.fields||{})[Zw]?.stringValue===$w}function I0(n){const e=n.mapValue.fields[Jw];return Mv(e)?I0(e):e}function lf(n){const e=fa(n.mapValue.fields[eT].timestampValue);return new gt(e.seconds,e.nanos)}class F8{constructor(e,t,r,i,a,u,l,f,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p}}const $d="(default)";class Ds{constructor(e,t){this.projectId=e,this.database=t||$d}static empty(){return new Ds("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof Ds&&e.projectId===this.projectId&&e.database===this.database}}const Pv="__type__",tT="__max__",ho={mapValue:{fields:{__type__:{stringValue:tT}}}},Lv="__vector__",nl="value",Rd={nullValue:"NULL_VALUE"};function wo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Mv(n)?4:nT(n)?9007199254740991:C0(n)?10:11:_e(28295,{value:n})}function Ui(n,e){if(n===e)return!0;const t=wo(n);if(t!==wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lf(n).isEqual(lf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const u=fa(i.timestampValue),l=fa(a.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return ha(i.bytesValue).isEqual(ha(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return Mt(i.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(i.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Mt(i.integerValue)===Mt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const u=Mt(i.doubleValue),l=Mt(a.doubleValue);return u===l?af(u)===af(l):isNaN(u)&&isNaN(l)}return!1})(n,e);case 9:return $u(n.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(i,a){const u=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Bx(u)!==Bx(l))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(l[f]===void 0||!Ui(u[f],l[f])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function cf(n,e){return(n.values||[]).find((t=>Ui(t,e)))!==void 0}function To(n,e){if(n===e)return 0;const t=wo(n),r=wo(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const l=Mt(a.integerValue||a.doubleValue),f=Mt(u.integerValue||u.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1})(n,e);case 3:return Fx(n.timestampValue,e.timestampValue);case 4:return Fx(lf(n),lf(e));case 5:return Dg(n.stringValue,e.stringValue);case 6:return(function(a,u){const l=ha(a),f=ha(u);return l.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const l=a.split("/"),f=u.split("/");for(let h=0;h<l.length&&h<f.length;h++){const p=Oe(l[h],f[h]);if(p!==0)return p}return Oe(l.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const l=Oe(Mt(a.latitude),Mt(u.latitude));return l!==0?l:Oe(Mt(a.longitude),Mt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ux(n.arrayValue,e.arrayValue);case 10:return(function(a,u){const l=a.fields||{},f=u.fields||{},h=l[nl]?.arrayValue,p=f[nl]?.arrayValue,v=Oe(h?.values?.length||0,p?.values?.length||0);return v!==0?v:Ux(h,p)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===ho.mapValue&&u===ho.mapValue)return 0;if(a===ho.mapValue)return 1;if(u===ho.mapValue)return-1;const l=a.fields||{},f=Object.keys(l),h=u.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let v=0;v<f.length&&v<p.length;++v){const _=Dg(f[v],p[v]);if(_!==0)return _;const x=To(l[f[v]],h[p[v]]);if(x!==0)return x}return Oe(f.length,p.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function Fx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=fa(n),r=fa(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function Ux(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=To(t[i],r[i]);if(a)return a}return Oe(t.length,r.length)}function rl(n){return kg(n)}function kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=fa(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ha(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return pe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=kg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const u of r)a?a=!1:i+=",",i+=`${u}:${kg(t.fields[u])}`;return i+"}"})(n.mapValue):_e(61005,{value:n})}function Dd(n){switch(wo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=I0(n);return e?16+Dd(e):16;case 5:return 2*n.stringValue.length;case 6:return ha(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Dd(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ro(r.fields,((a,u)=>{i+=a.length+Dd(u)})),i})(n.mapValue);default:throw _e(13486,{value:n})}}function ff(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function hf(n){return!!n&&"arrayValue"in n}function zx(n){return!!n&&"nullValue"in n}function jx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Od(n){return!!n&&"mapValue"in n}function C0(n){return(n?.mapValue?.fields||{})[Pv]?.stringValue===Lv}function Wc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ro(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Wc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wc(n.arrayValue.values[t]);return e}return{...n}}function nT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tT}const rT={mapValue:{fields:{[Pv]:{stringValue:Lv},[nl]:{arrayValue:{}}}}};function U8(n){return"nullValue"in n?Rd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ff(Ds.empty(),pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?C0(n)?rT:{mapValue:{}}:_e(35942,{value:n})}function z8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ff(Ds.empty(),pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rT:"mapValue"in n?C0(n)?{mapValue:{}}:ho:_e(61959,{value:n})}function Hx(n,e){const t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gx(n,e){const t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Od(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}setAll(e){let t=Lt.emptyPath(),r={},i=[];e.forEach(((u,l)=>{if(!t.isImmediateParentOf(l)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=l.popLast()}u?r[l.lastSegment()]=Wc(u):i.push(l.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Od(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ro(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Un(Wc(this.value))}}function iT(n){const e=[];return Ro(n.fields,((t,r)=>{const i=new Lt([t]);if(Od(r)){const a=iT(r.mapValue).fields;if(a.length===0)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)})),new sr(e)}class Ut{constructor(e,t,r,i,a,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=u,this.documentState=l}static newInvalidDocument(e){return new Ut(e,0,Se.min(),Se.min(),Se.min(),Un.empty(),0)}static newFoundDocument(e,t,r,i){return new Ut(e,1,t,Se.min(),r,i,0)}static newNoDocument(e,t){return new Ut(e,2,t,Se.min(),Se.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Se.min(),Se.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class il{constructor(e,t){this.position=e,this.inclusive=t}}function qx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(a.field.isKeyField()?r=pe.comparator(pe.fromName(u.referenceValue),t.key):r=To(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ui(n.position[t],e.position[t]))return!1;return!0}class Zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function j8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class aT{}class Ke extends aT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new H8(e,t,r):t==="array-contains"?new X8(e,r):t==="in"?new fT(e,r):t==="not-in"?new K8(e,r):t==="array-contains-any"?new Y8(e,r):new Ke(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new G8(e,r):new q8(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(To(t,this.value)):t!==null&&wo(this.value)===wo(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends aT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return al(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function al(n){return n.op==="and"}function Vg(n){return n.op==="or"}function kv(n){return oT(n)&&al(n)}function oT(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function Fg(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+rl(n.value);if(kv(n))return n.filters.map((e=>Fg(e))).join(",");{const e=n.filters.map((t=>Fg(t))).join(",");return`${n.op}(${e})`}}function sT(n,e){return n instanceof Ke?(function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&Ui(r.value,i.value)})(n,e):n instanceof vt?(function(r,i){return i instanceof vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,u,l)=>a&&sT(u,i.filters[l])),!0):!1})(n,e):void _e(19439)}function uT(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function lT(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(n):n instanceof vt?(function(t){return t.op.toString()+" {"+t.getFilters().map(lT).join(" ,")+"}"})(n):"Filter"}class H8 extends Ke{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class G8 extends Ke{constructor(e,t){super(e,"in",t),this.keys=cT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class q8 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=cT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function cT(n,e){return(e.arrayValue?.values||[]).map((t=>pe.fromName(t.referenceValue)))}class X8 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hf(t)&&cf(t.arrayValue,this.value)}}class fT extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cf(this.value.arrayValue,t)}}class K8 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cf(this.value.arrayValue,t)}}class Y8 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>cf(this.value.arrayValue,r)))}}class W8{constructor(e,t=null,r=[],i=[],a=null,u=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=l,this.Te=null}}function Ug(n,e=null,t=[],r=[],i=null,a=null,u=null){return new W8(n,e,t,r,i,a,u)}function Os(n){const e=Ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Fg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),A0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>rl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>rl(r))).join(",")),e.Te=t}return e.Te}function Af(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!j8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Xx(n.startAt,e.startAt)&&Xx(n.endAt,e.endAt)}function Jd(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function e0(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function Kx(n,e,t){let r=Rd,i=!0;for(const a of e0(n,e)){let u=Rd,l=!0;switch(a.op){case"<":case"<=":u=U8(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,l=!1;break;case"!=":case"not-in":u=Rd}Hx({value:r,inclusive:i},{value:u,inclusive:l})<0&&(r=u,i=l)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Hx({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}}return{value:r,inclusive:i}}function Yx(n,e,t){let r=ho,i=!0;for(const a of e0(n,e)){let u=ho,l=!0;switch(a.op){case">=":case">":u=z8(a.value),l=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,l=!1;break;case"!=":case"not-in":u=ho}Gx({value:r,inclusive:i},{value:u,inclusive:l})>0&&(r=u,i=l)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Gx({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}}return{value:r,inclusive:i}}class wf{constructor(e,t=null,r=[],i=[],a=null,u="F",l=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=l,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q8(n,e,t,r,i,a,u,l){return new wf(n,e,t,r,i,a,u,l)}function b0(n){return new wf(n)}function Wx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hT(n){return n.collectionGroup!==null}function Qc(n){const e=Ne(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let l=new mt(Lt.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Zd(a,r))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new Zd(Lt.keyField(),r))}return e.Ie}function zr(n){const e=Ne(n);return e.Ee||(e.Ee=$8(e,Qc(n))),e.Ee}function $8(n,e){if(n.limitType==="F")return Ug(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Zd(i.field,a)}));const t=n.endAt?new il(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new il(n.startAt.position,n.startAt.inclusive):null;return Ug(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function zg(n,e){const t=n.filters.concat([e]);return new wf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jg(n,e,t){return new wf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function R0(n,e){return Af(zr(n),zr(e))&&n.limitType===e.limitType}function dT(n){return`${Os(zr(n))}|lt:${n.limitType}`}function Vu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>lT(i))).join(", ")}]`),A0(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>rl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>rl(i))).join(",")),`Target(${r})`})(zr(n))}; limitType=${n.limitType})`}function Tf(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):pe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of Qc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(u,l,f){const h=qx(u,l,f);return u.inclusive?h<=0:h<0})(r.startAt,Qc(r),i)||r.endAt&&!(function(u,l,f){const h=qx(u,l,f);return u.inclusive?h>=0:h>0})(r.endAt,Qc(r),i))})(n,e)}function Z8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pT(n){return(e,t)=>{let r=!1;for(const i of Qc(n)){const a=J8(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function J8(n,e,t){const r=n.field.isKeyField()?pe.comparator(e.key,t.key):(function(a,u,l){const f=u.data.field(a),h=l.data.field(a);return f!==null&&h!==null?To(f,h):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:n.dir})}}class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}const e6=new Pt(pe.comparator);function xr(){return e6}const gT=new Pt(pe.comparator);function kc(...n){let e=gT;for(const t of n)e=e.insert(t.key,t);return e}function vT(n){let e=gT;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Mi(){return $c()}function mT(){return $c()}function $c(){return new va((n=>n.toString()),((n,e)=>n.isEqual(e)))}const t6=new Pt(pe.comparator),n6=new mt(pe.comparator);function Fe(...n){let e=n6;for(const t of n)e=e.add(t);return e}const r6=new mt(Oe);function i6(){return r6}function Bv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function yT(n){return{integerValue:""+n}}function a6(n,e){return f8(e)?yT(e):Bv(n,e)}class D0{constructor(){this._=void 0}}function o6(n,e,t){return n instanceof df?(function(i,a){const u={fields:{[Zw]:{stringValue:$w},[eT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Mv(a)&&(a=I0(a)),a&&(u.fields[Jw]=a),{mapValue:u}})(t,e):n instanceof ol?xT(n,e):n instanceof sl?ET(n,e):(function(i,a){const u=_T(i,a),l=Qx(u)+Qx(i.Ae);return Bg(u)&&Bg(i.Ae)?yT(l):Bv(i.serializer,l)})(n,e)}function s6(n,e,t){return n instanceof ol?xT(n,e):n instanceof sl?ET(n,e):t}function _T(n,e){return n instanceof pf?(function(r){return Bg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class df extends D0{}class ol extends D0{constructor(e){super(),this.elements=e}}function xT(n,e){const t=AT(e);for(const r of n.elements)t.some((i=>Ui(i,r)))||t.push(r);return{arrayValue:{values:t}}}class sl extends D0{constructor(e){super(),this.elements=e}}function ET(n,e){let t=AT(e);for(const r of n.elements)t=t.filter((i=>!Ui(i,r)));return{arrayValue:{values:t}}}class pf extends D0{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Qx(n){return Mt(n.integerValue||n.doubleValue)}function AT(n){return hf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class u6{constructor(e,t){this.field=e,this.transform=t}}function l6(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ol&&i instanceof ol||r instanceof sl&&i instanceof sl?$u(r.elements,i.elements,Ui):r instanceof pf&&i instanceof pf?Ui(r.Ae,i.Ae):r instanceof df&&i instanceof df})(n.transform,e.transform)}class c6{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class O0{}function wT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new N0(n.key,zn.none()):new pl(n.key,n.data,zn.none());{const t=n.data,r=Un.empty();let i=new mt(Lt.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),i=i.add(a)}return new ma(n.key,r,new sr(i.toArray()),zn.none())}}function f6(n,e,t){n instanceof pl?(function(i,a,u){const l=i.value.clone(),f=Zx(i.fieldTransforms,a,u.transformResults);l.setAll(f),a.convertToFoundDocument(u.version,l).setHasCommittedMutations()})(n,e,t):n instanceof ma?(function(i,a,u){if(!Nd(i.precondition,a))return void a.convertToUnknownDocument(u.version);const l=Zx(i.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(TT(i)),f.setAll(l),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(i,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Zc(n,e,t,r){return n instanceof pl?(function(a,u,l,f){if(!Nd(a.precondition,u))return l;const h=a.value.clone(),p=Jx(a.fieldTransforms,f,u);return h.setAll(p),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,r):n instanceof ma?(function(a,u,l,f){if(!Nd(a.precondition,u))return l;const h=Jx(a.fieldTransforms,f,u),p=u.data;return p.setAll(TT(a)),p.setAll(h),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((v=>v.field)))})(n,e,t,r):(function(a,u,l){return Nd(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l})(n,e,t)}function h6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=_T(r.transform,i||null);a!=null&&(t===null&&(t=Un.empty()),t.set(r.field,a))}return t||null}function $x(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$u(r,i,((a,u)=>l6(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pl extends O0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ma extends O0{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function TT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Zx(n,e,t){const r=new Map;Ae(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,l=e.data.field(a.field);r.set(a.field,s6(u,l,t[i]))}return r}function Jx(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,o6(a,u,e))}return r}class N0 extends O0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ST extends O0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&f6(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mT();return this.mutations.forEach((i=>{const a=e.get(i.key),u=a.overlayedDocument;let l=this.applyToLocalView(u,a.mutatedFields);l=t.has(i.key)?null:l;const f=wT(u,l);f!==null&&r.set(i.key,f),u.isValidDocument()||u.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&$u(this.mutations,e.mutations,((t,r)=>$x(t,r)))&&$u(this.baseMutations,e.baseMutations,((t,r)=>$x(t,r)))}}class Fv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return t6})();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new Fv(e,t,r,i)}}class Uv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class d6{constructor(e,t){this.count=e,this.unchangedNames=t}}var tn,Qe;function p6(n){switch(n){case ae.OK:return _e(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function IT(n){if(n===void 0)return Qn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case tn.OK:return ae.OK;case tn.CANCELLED:return ae.CANCELLED;case tn.UNKNOWN:return ae.UNKNOWN;case tn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case tn.INTERNAL:return ae.INTERNAL;case tn.UNAVAILABLE:return ae.UNAVAILABLE;case tn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case tn.NOT_FOUND:return ae.NOT_FOUND;case tn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case tn.ABORTED:return ae.ABORTED;case tn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case tn.DATA_LOSS:return ae.DATA_LOSS;default:return _e(39323,{code:n})}}(Qe=tn||(tn={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function g6(){return new TextEncoder}const v6=new mo([4294967295,4294967295],0);function eE(n){const e=g6().encode(n),t=new Tw;return t.update(e),new Uint8Array(t.digest())}function tE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([t,r],0),new mo([i,a],0)]}class zv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Bc(`Invalid padding: ${t}`);if(r<0)throw new Bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Bc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(mo.fromNumber(r)));return i.compare(v6)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=eE(e),[r,i]=tE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);if(!this.we(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new zv(a,i,t);return r.forEach((l=>u.insert(l))),u}insert(e){if(this.ge===0)return;const t=eE(e),[r,i]=tE(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(r,i,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class M0{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new M0(Se.min(),i,new Pt(Oe),xr(),Fe())}}class Sf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Sf(r,t,Fe(),Fe(),Fe())}}class Md{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class CT{constructor(e,t){this.targetId=e,this.Ce=t}}class bT{constructor(e,t,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nE{constructor(){this.ve=0,this.Fe=rE(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:_e(38017,{changeType:a})}})),new Sf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class m6{constructor(e){this.Ge=e,this.ze=new Map,this.je=xr(),this.Je=dd(),this.He=dd(),this.Ye=new Pt(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Jd(a))if(r===0){const u=new pe(a.path);this.et(t,u,Ut.newNoDocument(u,Se.min()))}else Ae(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const l=this.ut(e),f=l?this.ct(l,e,u):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let u,l;try{u=ha(r).toUint8Array()}catch(f){if(f instanceof Qw)return Rs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{l=new zv(u,i,a)}catch(f){return Rs(f instanceof Bc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return l.ge===0?null:l}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const u=this.Ge.ht(),l=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const l=this.ot(u);if(l){if(a.current&&Jd(l.target)){const f=new pe(l.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,Ut.newNoDocument(f,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let r=Fe();this.He.forEach(((a,u)=>{let l=!0;u.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const i=new M0(e,t,this.Ye,this.je,r);return this.je=xr(),this.Je=dd(),this.He=dd(),this.Ye=new Pt(Oe),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new nE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new nE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function dd(){return new Pt(pe.comparator)}function rE(){return new Pt(pe.comparator)}const y6={asc:"ASCENDING",desc:"DESCENDING"},_6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x6={and:"AND",or:"OR"};class E6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(n,e){return n.useProto3Json||A0(e)?e:{value:e}}function ul(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function A6(n,e){return ul(n,e.toTimestamp())}function $n(n){return Ae(!!n,49232),Se.fromTimestamp((function(t){const r=fa(t);return new gt(r.seconds,r.nanos)})(n))}function jv(n,e){return Gg(n,e).canonicalString()}function Gg(n,e){const t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function DT(n){const e=st.fromString(n);return Ae(FT(e),10190,{key:e.toString()}),e}function t0(n,e){return jv(n.databaseId,e.path)}function ws(n,e){const t=DT(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(MT(t))}function OT(n,e){return jv(n.databaseId,e)}function NT(n){const e=DT(n);return e.length===4?st.emptyPath():MT(e)}function qg(n){return new st(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MT(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iE(n,e,t){return{name:t0(n,e),fields:t.value.mapValue.fields}}function w6(n,e,t){const r=ws(n,e.name),i=$n(e.updateTime),a=e.createTime?$n(e.createTime):Se.min(),u=new Un({mapValue:{fields:e.fields}}),l=Ut.newFoundDocument(r,i,a,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function T6(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:_e(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Ae(p===void 0||typeof p=="string",58123),rn.fromBase64String(p||"")):(Ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),rn.fromUint8Array(p||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,l=u&&(function(h){const p=h.code===void 0?ae.UNKNOWN:IT(h.code);return new de(p,h.message||"")})(u);t=new bT(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ws(n,r.document.name),a=$n(r.document.updateTime),u=r.document.createTime?$n(r.document.createTime):Se.min(),l=new Un({mapValue:{fields:r.document.fields}}),f=Ut.newFoundDocument(i,a,u,l),h=r.targetIds||[],p=r.removedTargetIds||[];t=new Md(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ws(n,r.document),a=r.readTime?$n(r.readTime):Se.min(),u=Ut.newNoDocument(i,a),l=r.removedTargetIds||[];t=new Md([],l,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ws(n,r.document),a=r.removedTargetIds||[];t=new Md([],a,i,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,u=new d6(i,a),l=r.targetId;t=new CT(l,u)}}return t}function n0(n,e){let t;if(e instanceof pl)t={update:iE(n,e.key,e.value)};else if(e instanceof N0)t={delete:t0(n,e.key)};else if(e instanceof ma)t={update:iE(n,e.key,e.data),updateMask:D6(e.fieldMask)};else{if(!(e instanceof ST))return _e(16599,{Vt:e.type});t={verify:t0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const l=u.transform;if(l instanceof df)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ol)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof sl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pf)return{fieldPath:u.field.canonicalString(),increment:l.Ae};throw _e(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:A6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_e(27497)})(n,e.precondition)),t}function Xg(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?zn.updateTime($n(a.updateTime)):a.exists!==void 0?zn.exists(a.exists):zn.none()})(e.currentDocument):zn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(u,l){let f=null;if("setToServerValue"in l)Ae(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),f=new df;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];f=new ol(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];f=new sl(p)}else"increment"in l?f=new pf(u,l.increment):_e(16584,{proto:l});const h=Lt.fromServerFormat(l.fieldPath);return new u6(h,f)})(n,i))):[];if(e.update){e.update.name;const i=ws(n,e.update.name),a=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(f){const h=f.fieldPaths||[];return new sr(h.map((p=>Lt.fromServerFormat(p))))})(e.updateMask);return new ma(i,a,u,t,r)}return new pl(i,a,t,r)}if(e.delete){const i=ws(n,e.delete);return new N0(i,t)}if(e.verify){const i=ws(n,e.verify);return new ST(i,t)}return _e(1463,{proto:e})}function S6(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map((t=>(function(i,a){let u=i.updateTime?$n(i.updateTime):$n(a);return u.isEqual(Se.min())&&(u=$n(a)),new c6(u,i.transformResults||[])})(t,e)))):[]}function PT(n,e){return{documents:[OT(n,e.path)]}}function LT(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OT(n,i);const a=(function(h){if(h.length!==0)return VT(vt.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((p=>(function(_){return{field:Fu(_.field),direction:C6(_.dir)}})(p)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=Hg(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function kT(n){let e=NT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ae(r===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(v){const _=BT(v);return _ instanceof vt&&kv(_)?_.getFilters():[_]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((_=>(function(A){return new Zd(Uu(A.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(_)))})(t.orderBy));let l=null;t.limit&&(l=(function(v){let _;return _=typeof v=="object"?v.value:v,A0(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(v){const _=!!v.before,x=v.values||[];return new il(x,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(v){const _=!v.before,x=v.values||[];return new il(x,_)})(t.endAt)),Q8(e,i,u,a,l,"F",f,h)}function I6(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Uu(t.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uu(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Uu(t.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Uu(t.unaryFilter.field);return Ke.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(Uu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vt.create(t.compositeFilter.filters.map((r=>BT(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function C6(n){return y6[n]}function b6(n){return _6[n]}function R6(n){return x6[n]}function Fu(n){return{fieldPath:n.canonicalString()}}function Uu(n){return Lt.fromServerFormat(n.fieldPath)}function VT(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(jx(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NAN"}};if(zx(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jx(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NAN"}};if(zx(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(t.field),op:b6(t.op),value:t.value}}})(n):n instanceof vt?(function(t){const r=t.getFilters().map((i=>VT(i)));return r.length===1?r[0]:{compositeFilter:{op:R6(t.op),filters:r}}})(n):_e(54877,{filter:n})}function D6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function FT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class sa{constructor(e,t,r,i,a=Se.min(),u=Se.min(),l=rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UT{constructor(e){this.yt=e}}function O6(n,e){let t;if(e.document)t=w6(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),i=Ms(e.noDocument.readTime);t=Ut.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const r=pe.fromSegments(e.unknownDocument.path),i=Ms(e.unknownDocument.version);t=Ut.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new gt(i[0],i[1]);return Se.fromTimestamp(a)})(e.readTime)),t}function aE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:r0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,u){return{name:t0(a,u.key),fields:u.data.value.mapValue.fields,updateTime:ul(a,u.version.toTimestamp()),createTime:ul(a,u.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ns(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ns(e.version)}}return r}function r0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ns(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ms(n){const e=new gt(n.seconds,n.nanoseconds);return Se.fromTimestamp(e)}function gs(n,e){const t=(e.baseMutations||[]).map((a=>Xg(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const l=e.mutations[a+1];u.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>Xg(n.yt,a))),i=gt.fromMillis(e.localWriteTimeMs);return new Vv(e.batchId,i,t,r)}function Vc(n){const e=Ms(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ms(n.lastLimboFreeSnapshotVersion):Se.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const u=a.documents.length;return Ae(u===1,1966,{count:u}),zr(b0(NT(a.documents[0])))})(n.query):(function(a){return zr(kT(a))})(n.query),new sa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rn.fromBase64String(n.resumeToken))}function zT(n,e){const t=Ns(e.snapshotVersion),r=Ns(e.lastLimboFreeSnapshotVersion);let i;i=Jd(e.target)?PT(n.yt,e.target):LT(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Os(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function jT(n){const e=kT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jg(e,e.limit,"L"):e}function sg(n,e){return new Uv(e.largestBatchId,Xg(n.yt,e.overlayMutation))}function oE(n,e){const t=e.path.lastSegment();return[n,jn(e.path.popLast()),t]}function sE(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ns(r.readTime),documentKey:jn(r.documentKey.path),largestBatchId:r.largestBatchId}}class N6{getBundleMetadata(e,t){return uE(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Ms(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return uE(e).put((function(i){return{bundleId:i.id,createTime:Ns($n(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return lE(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:jT(a.bundledQuery),readTime:Ms(a.readTime)}})(r)}))}saveNamedQuery(e,t){return lE(e).put((function(i){return{name:i.name,readTime:Ns($n(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function uE(n){return gn(n,w0)}function lE(n){return gn(n,T0)}class P0{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new P0(e,r)}getOverlay(e,t){return Sc(e).get(oE(this.userId,t)).next((r=>r?sg(this.serializer,r):null))}getOverlays(e,t){const r=Mi();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,u)=>{const l=new Uv(t,u);i.push(this.St(e,l))})),X.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((u=>i.add(jn(u.getCollectionPath()))));const a=[];return i.forEach((u=>{const l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(Sc(e).Z(Pg,l))})),X.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Mi(),a=jn(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Sc(e).J(Pg,u).next((l=>{for(const f of l){const h=sg(this.serializer,f);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=Mi();let u;const l=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sc(e).ee({index:Gw,range:l},((f,h,p)=>{const v=sg(this.serializer,h);a.size()<i||v.largestBatchId===u?(a.set(v.getKey(),v),u=v.largestBatchId):p.done()})).next((()=>a))}St(e,t){return Sc(e).put((function(i,a,u){const[l,f,h]=oE(a,u.mutation.key);return{userId:a,collectionPath:f,documentId:h,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:n0(i.yt,u.mutation)}})(this.serializer,this.userId,t))}}function Sc(n){return gn(n,S0)}class M6{bt(e){return gn(e,Ov)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?rn.fromUint8Array(r):rn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class vs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Mt(e.integerValue));else if("doubleValue"in e){const r=Mt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),af(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=fa(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ha(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?nT(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):C0(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):_e(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=nl,a=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Mt(a)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}vs.Kt=new vs;const Nu=255;function P6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function cE(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const u=P6(255&r[a]);if(i+=u,u!==8)break}return i})(n);return Math.ceil(e/8)}class L6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=cE(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=cE(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Nu),this.sn(255)}_n(){this.an(Nu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,a,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Nu?(this.sn(Nu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Nu?(this.an(Nu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class k6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class B6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ic{constructor(){this.cn=new L6,this.ln=new k6(this.cn),this.hn=new B6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ms{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new ms(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Pd(this.En),directionalValue:Pd(this.dn),orderedDocumentKey:Pd(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function eo(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=fE(n.En,e.En),t!==0?t:(t=fE(n.dn,e.dn),t!==0?t:pe.comparator(n.In,e.In)))}function fE(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Pd(n){return vw()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function hE(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class dE{constructor(e){this.mn=new mt(((t,r)=>Lt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Og(e);if(t!==void 0&&!this.wn(t))return!1;const r=fs(e);let i=new Set,a=0,u=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const f=r[a];if(!this.Sn(l,f)||!this.bn(this.fn[u++],f))return!1}++a}for(;a<r.length;++a){const l=r[a];if(u>=this.fn.length||!this.bn(this.fn[u++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new mt(Lt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Id(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Id(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Id(r.field,r.dir==="asc"?0:1)));return new Kd(Kd.UNKNOWN_ID,this.collectionId,t,rf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function HT(n){if(Ae(n instanceof Ke||n instanceof vt,20012),n instanceof Ke){if(n instanceof fT){const t=n.value.arrayValue?.values?.map((r=>Ke.create(n.field,"==",r)))||[];return vt.create(t,"or")}return n}const e=n.filters.map((t=>HT(t)));return vt.create(e,n.op)}function V6(n){if(n.getFilters().length===0)return[];const e=Wg(HT(n));return Ae(GT(e),7391),Kg(e)||Yg(e)?[e]:e.getFilters()}function Kg(n){return n instanceof Ke}function Yg(n){return n instanceof vt&&kv(n)}function GT(n){return Kg(n)||Yg(n)||(function(t){if(t instanceof vt&&Vg(t)){for(const r of t.getFilters())if(!Kg(r)&&!Yg(r))return!1;return!0}return!1})(n)}function Wg(n){if(Ae(n instanceof Ke||n instanceof vt,34018),n instanceof Ke)return n;if(n.filters.length===1)return Wg(n.filters[0]);const e=n.filters.map((r=>Wg(r)));let t=vt.create(e,n.op);return t=i0(t),GT(t)?t:(Ae(t instanceof vt,64498),Ae(al(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((r,i)=>Hv(r,i))))}function Hv(n,e){let t;return Ae(n instanceof Ke||n instanceof vt,38388),Ae(e instanceof Ke||e instanceof vt,25473),t=n instanceof Ke?e instanceof Ke?(function(i,a){return vt.create([i,a],"and")})(n,e):pE(n,e):e instanceof Ke?pE(e,n):(function(i,a){if(Ae(i.filters.length>0&&a.filters.length>0,48005),al(i)&&al(a))return uT(i,a.getFilters());const u=Vg(i)?i:a,l=Vg(i)?a:i,f=u.filters.map((h=>Hv(h,l)));return vt.create(f,"or")})(n,e),i0(t)}function pE(n,e){if(al(e))return uT(e,n.getFilters());{const t=e.filters.map((r=>Hv(n,r)));return vt.create(t,"or")}}function i0(n){if(Ae(n instanceof Ke||n instanceof vt,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return i0(e[0]);if(oT(n))return n;const t=e.map((i=>i0(i))),r=[];return t.forEach((i=>{i instanceof Ke?r.push(i):i instanceof vt&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:vt.create(r,n.op)}class F6{constructor(){this.Cn=new Gv}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Er.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class Gv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(st.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(st.comparator)).toArray()}}const gE="IndexedDbIndexManager",pd=new Uint8Array(0);class U6{constructor(e,t){this.databaseId=t,this.vn=new Gv,this.Fn=new va((r=>Os(r)),((r,i)=>Af(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:r,parent:jn(i)};return vE(e).put(a)}return X.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Nw(t),""],!1,!0);return vE(e).J(i).next((a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Ni(u.parent))}return r}))}addFieldIndex(e,t){const r=Cc(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const u=Pu(e);return a.next((l=>{u.put(sE(l,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Cc(e),i=Pu(e),a=Mu(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Cc(e),r=Mu(e),i=Pu(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return X.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new dE(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=Mu(e);let i=!0;const a=new Map;return X.forEach(this.Mn(t),(u=>this.xn(e,u).next((l=>{i&&(i=!!l),a.set(u,l)})))).next((()=>{if(i){let u=Fe();const l=[];return X.forEach(a,((f,h)=>{le(gE,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((G=>`${G.fieldPath}:${G.kind}`)).join(",")}`})(f)} to execute ${Os(t)}`);const p=(function(B,G){const $=Og(G);if($===void 0)return null;for(const J of e0(B,$.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(h,f),v=(function(B,G){const $=new Map;for(const J of fs(G))for(const C of e0(B,J.fieldPath))switch(C.op){case"==":case"in":$.set(J.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return $.set(J.fieldPath.canonicalString(),C.value),Array.from($.values())}return null})(h,f),_=(function(B,G){const $=[];let J=!0;for(const C of fs(G)){const b=C.kind===0?Kx(B,C.fieldPath,B.startAt):Yx(B,C.fieldPath,B.startAt);$.push(b.value),J&&(J=b.inclusive)}return new il($,J)})(h,f),x=(function(B,G){const $=[];let J=!0;for(const C of fs(G)){const b=C.kind===0?Yx(B,C.fieldPath,B.endAt):Kx(B,C.fieldPath,B.endAt);$.push(b.value),J&&(J=b.inclusive)}return new il($,J)})(h,f),A=this.On(f,h,_),S=this.On(f,h,x),R=this.Nn(f,h,v),L=this.Bn(f.indexId,p,A,_.inclusive,S,x.inclusive,R);return X.forEach(L,(M=>r.Y(M,t.limit).next((B=>{B.forEach((G=>{const $=pe.fromSegments(G.documentKey);u.has($)||(u=u.add($),l.push($))}))}))))})).next((()=>l))}return X.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=V6(vt.create(e.filters,"and")).map((r=>Ug(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,a,u,l){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),h=f/(t!=null?t.length:1),p=[];for(let v=0;v<f;++v){const _=t?this.Ln(t[v/h]):pd,x=this.kn(e,_,r[v%h],i),A=this.qn(e,_,a[v%h],u),S=l.map((R=>this.kn(e,_,R,!0)));p.push(...this.createRange(x,A,S))}return p}kn(e,t,r,i){const a=new ms(e,pe.empty(),t,r);return i?a:a.An()}qn(e,t,r,i){const a=new ms(e,pe.empty(),t,r);return i?a.An():a}xn(e,t){const r=new dE(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let u=null;for(const l of a)r.yn(l)&&(!u||l.fields.length>u.fields.length)&&(u=l);return u}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return X.forEach(i,(a=>this.xn(e,a).next((u=>{u?r!==0&&u.fields.length<(function(f){let h=new mt(Lt.comparator),p=!1;for(const v of f.filters)for(const _ of v.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:h=h.add(_.field));for(const v of f.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(p?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Ic;for(const i of fs(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const u=r.Pn(i.kind);vs.Kt.Dt(a,u)}return r.un()}Ln(e){const t=new Ic;return vs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Ic;return vs.Kt.Dt(ff(this.databaseId,t),r.Pn((function(a){const u=fs(a);return u.length===0?0:u[u.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Ic);let a=0;for(const u of fs(e)){const l=r[a++];for(const f of i)if(this.Un(t,u.fieldPath)&&hf(l))i=this.Kn(i,u,l);else{const h=f.Pn(u.kind);vs.Kt.Dt(l,h)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const l of i){const f=new Ic;f.seed(l.un()),vs.Kt.Dt(u,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((r=>r instanceof Ke&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Cc(e),i=Pu(e);return(t?r.J(Mg,IDBKeyRange.bound(t,t)):r.J()).next((a=>{const u=[];return X.forEach(a,(l=>i.get([l.indexId,this.uid]).next((f=>{u.push((function(p,v){const _=v?new rf(v.sequenceNumber,new Er(Ms(v.readTime),new pe(Ni(v.documentKey)),v.largestBatchId)):rf.empty(),x=p.fields.map((([A,S])=>new Id(Lt.fromServerFormat(A),S)));return new Kd(p.indexId,p.collectionGroup,x,_)})(l,f))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Oe(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Cc(e),a=Pu(e);return this.Gn(e).next((u=>i.J(Mg,IDBKeyRange.bound(t,t)).next((l=>X.forEach(l,(f=>a.put(sE(f.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return X.forEach(t,((i,a)=>{const u=r.get(i.collectionGroup);return(u?X.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),X.forEach(l,(f=>this.zn(e,i,f).next((h=>{const p=this.jn(a,f);return h.isEqual(p)?X.resolve():this.Jn(e,a,f,h,p)})))))))}))}Hn(e,t,r,i){return Mu(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Mu(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Mu(e);let a=new mt(eo);return i.ee({index:Hw,range:IDBKeyRange.only([r.indexId,this.uid,Pd(this.$n(r,t))])},((u,l)=>{a=a.add(new ms(r.indexId,t,hE(l.arrayValue),hE(l.directionalValue)))})).next((()=>a))}jn(e,t){let r=new mt(eo);const i=this.Qn(t,e);if(i==null)return r;const a=Og(t);if(a!=null){const u=e.data.field(a.fieldPath);if(hf(u))for(const l of u.arrayValue.values||[])r=r.add(new ms(t.indexId,e.key,this.Ln(l),i))}else r=r.add(new ms(t.indexId,e.key,pd,i));return r}Jn(e,t,r,i,a){le(gE,"Updating index entries for document '%s'",t.key);const u=[];return(function(f,h,p,v,_){const x=f.getIterator(),A=h.getIterator();let S=Ou(x),R=Ou(A);for(;S||R;){let L=!1,M=!1;if(S&&R){const B=p(S,R);B<0?M=!0:B>0&&(L=!0)}else S!=null?M=!0:L=!0;L?(v(R),R=Ou(A)):M?(_(S),S=Ou(x)):(S=Ou(x),R=Ou(A))}})(i,a,eo,(l=>{u.push(this.Hn(e,t,r,l))}),(l=>{u.push(this.Yn(e,t,r,l))})),X.waitFor(u)}Gn(e){let t=1;return Pu(e).ee({index:jw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,l)=>eo(u,l))).filter(((u,l,f)=>!l||eo(u,f[l-1])!==0));const i=[];i.push(e);for(const u of r){const l=eo(u,e),f=eo(u,t);if(l===0)i[0]=e.An();else if(l>0&&f<0)i.push(u),i.push(u.An());else if(f>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2){if(this.Zn(i[u],i[u+1]))return[];const l=i[u].Vn(this.uid,pd,pe.empty()),f=i[u+1].Vn(this.uid,pd,pe.empty());a.push(IDBKeyRange.bound(l,f))}return a}Zn(e,t){return eo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mE)}getMinOffset(e,t){return X.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||_e(44426))))).next(mE)}}function vE(n){return gn(n,uf)}function Mu(n){return gn(n,Yc)}function Cc(n){return gn(n,Dv)}function Pu(n){return gn(n,Kc)}function mE(n){Ae(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Cv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Er(e.readTime,e.documentKey,t)}const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qT=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function XT(n,e,t){const r=n.store(ri),i=n.store(Zu),a=[],u=IDBKeyRange.only(t.batchId);let l=0;const f=r.ee({range:u},((p,v,_)=>(l++,_.delete())));a.push(f.next((()=>{Ae(l===1,47070,{batchId:t.batchId})})));const h=[];for(const p of t.mutations){const v=Fw(e,p.key.path,t.batchId);a.push(i.delete(v)),h.push(p.key)}return X.waitFor(a).next((()=>h))}function a0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _e(14731);e=n.noDocument}return JSON.stringify(e).length}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(qT,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);class L0{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){Ae(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new L0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return to(e).ee({index:ys,range:r},((i,a,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=zu(e),u=to(e);return u.add({}).next((l=>{Ae(typeof l=="number",49019);const f=new Vv(l,t,r,i),h=(function(x,A,S){const R=S.baseMutations.map((M=>n0(x.yt,M))),L=S.mutations.map((M=>n0(x.yt,M)));return{userId:A,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:R,mutations:L}})(this.serializer,this.userId,f),p=[];let v=new mt(((_,x)=>Oe(_.canonicalString(),x.canonicalString())));for(const _ of i){const x=Fw(this.userId,_.key.path,l);v=v.add(_.key.path.popLast()),p.push(u.put(h)),p.push(a.put(x,p8))}return v.forEach((_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[l]=f.keys()})),X.waitFor(p).next((()=>f))}))}lookupMutationBatch(e,t){return to(e).get(t).next((r=>r?(Ae(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),gs(this.serializer,r)):null))}er(e,t){return this.Xn[t]?X.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return to(e).ee({index:ys,range:i},((u,l,f)=>{l.userId===this.userId&&(Ae(l.batchId>=r,47524,{tr:r}),a=gs(this.serializer,l)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Es;return to(e).ee({index:ys,range:t,reverse:!0},((i,a,u)=>{r=a.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Es],[this.userId,Number.POSITIVE_INFINITY]);return to(e).J(ys,t).next((r=>r.map((i=>gs(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Cd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return zu(e).ee({range:i},((u,l,f)=>{const[h,p,v]=u,_=Ni(p);if(h===this.userId&&t.path.isEqual(_))return to(e).get(v).next((x=>{if(!x)throw _e(61480,{nr:u,batchId:v});Ae(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:v}),a.push(gs(this.serializer,x))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Oe);const i=[];return t.forEach((a=>{const u=Cd(this.userId,a.path),l=IDBKeyRange.lowerBound(u),f=zu(e).ee({range:l},((h,p,v)=>{const[_,x,A]=h,S=Ni(x);_===this.userId&&a.path.isEqual(S)?r=r.add(A):v.done()}));i.push(f)})),X.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Cd(this.userId,r),u=IDBKeyRange.lowerBound(a);let l=new mt(Oe);return zu(e).ee({range:u},((f,h,p)=>{const[v,_,x]=f,A=Ni(_);v===this.userId&&r.isPrefixOf(A)?A.length===i&&(l=l.add(x)):p.done()})).next((()=>this.rr(e,l)))}rr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(to(e).get(a).next((u=>{if(u===null)throw _e(35274,{batchId:a});Ae(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:a}),r.push(gs(this.serializer,u))})))})),X.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return XT(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),X.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return X.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),i=[];return zu(e).ee({range:r},((a,u,l)=>{if(a[0]===this.userId){const f=Ni(a[1]);i.push(f)}else l.done()})).next((()=>{Ae(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return KT(e,this.userId,t)}_r(e){return YT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Es,lastStreamToken:""}))}}function KT(n,e,t){const r=Cd(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return zu(n).ee({range:a,X:!0},((l,f,h)=>{const[p,v,_]=l;p===e&&v===i&&(u=!0),h.done()})).next((()=>u))}function to(n){return gn(n,ri)}function zu(n){return gn(n,Zu)}function YT(n){return gn(n,of)}class Ps{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ps(0)}static cr(){return new Ps(-1)}}class z6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ps(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Lu(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ae(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return Lu(e).ee(((u,l)=>{const f=Vc(l);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))})).next((()=>X.waitFor(a))).next((()=>i))}forEachTarget(e,t){return Lu(e).ee(((r,i)=>{const a=Vc(i);t(a)}))}lr(e){return _E(e).get(Qd).next((t=>(Ae(t!==null,2888),t)))}hr(e,t){return _E(e).put(Qd,t)}Pr(e,t){return Lu(e).put(zT(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Os(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Lu(e).ee({range:i,index:zw},((u,l,f)=>{const h=Vc(l);Af(t,h.target)&&(a=h,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=so(e);return t.forEach((u=>{const l=jn(u.path);i.push(a.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,u))})),X.waitFor(i)}removeMatchingKeys(e,t,r){const i=so(e);return X.forEach(t,(a=>{const u=jn(a.path);return X.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=so(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=so(e);let a=Fe();return i.ee({range:r,X:!0},((u,l,f)=>{const h=Ni(u[1]),p=new pe(h);a=a.add(p)})).next((()=>a))}containsKey(e,t){const r=jn(t.path),i=IDBKeyRange.bound([r],[Nw(r)],!1,!0);let a=0;return so(e).ee({index:Rv,X:!0,range:i},(([u,l],f,h)=>{u!==0&&(a++,h.done())})).next((()=>a>0))}At(e,t){return Lu(e).get(t).next((r=>r?Vc(r):null))}}function Lu(n){return gn(n,Ju)}function _E(n){return gn(n,As)}function so(n){return gn(n,el)}const xE="LruGarbageCollector",j6=1048576;function EE([n,e],[t,r]){const i=Oe(n,t);return i===0?Oe(e,r):i}class H6{constructor(e){this.Ir=e,this.buffer=new mt(EE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();EE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(xE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bo(t)?le(xE,"Ignoring IndexedDB error during garbage collection: ",t):await Vs(t)}await this.Vr(3e5)}))}}class G6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Vr.ce);const r=new H6(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(yE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,u,l,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,u=Date.now(),this.nthSequenceNumber(e,i)))).next((v=>(r=v,l=Date.now(),this.removeTargets(e,r,t)))).next((v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(h=Date.now(),Bu()<=Xe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-p}ms
	Determined least recently used ${i} in `+(l-u)+`ms
	Removed ${a} targets in `+(f-l)+`ms
	Removed ${v} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v}))))}}function QT(n,e){return new G6(n,e)}class q6{constructor(e,t){this.db=e,this.garbageCollector=QT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return gd(e,r)}removeReference(e,t,r){return gd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gd(e,t)}br(e,t){return(function(i,a){let u=!1;return YT(i).te((l=>KT(i,l,a).next((f=>(f&&(u=!0),X.resolve(!f)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((u,l)=>{if(l<=t){const f=this.br(e,u).next((h=>{if(!h)return a++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Se.min()),so(e).delete((function(v){return[0,jn(v.path)]})(u)))))}));i.push(f)}})).next((()=>X.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gd(e,t)}Sr(e,t){const r=so(e);let i,a=Vr.ce;return r.ee({index:Rv},(([u,l],{path:f,sequenceNumber:h})=>{u===0?(a!==Vr.ce&&t(new pe(Ni(i)),a),a=h,i=f):a=Vr.ce})).next((()=>{a!==Vr.ce&&t(new pe(Ni(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gd(n,e){return so(n).put((function(r,i){return{targetId:0,path:jn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class $T{constructor(){this.changes=new va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class X6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ss(e).put(r)}removeEntry(e,t,r){return ss(e).delete((function(a,u){const l=a.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],r0(u),l[l.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=Ut.newInvalidDocument(t);return ss(e).ee({index:bd,range:IDBKeyRange.only(bc(t))},((i,a)=>{r=this.Cr(t,a)})).next((()=>r))}vr(e,t){let r={size:0,document:Ut.newInvalidDocument(t)};return ss(e).ee({index:bd,range:IDBKeyRange.only(bc(t))},((i,a)=>{r={document:this.Cr(t,a),size:a0(a)}})).next((()=>r))}getEntries(e,t){let r=xr();return this.Fr(e,t,((i,a)=>{const u=this.Cr(i,a);r=r.insert(i,u)})).next((()=>r))}Mr(e,t){let r=xr(),i=new Pt(pe.comparator);return this.Fr(e,t,((a,u)=>{const l=this.Cr(a,u);r=r.insert(a,l),i=i.insert(a,a0(u))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return X.resolve();let i=new mt(TE);t.forEach((f=>i=i.add(f)));const a=IDBKeyRange.bound(bc(i.first()),bc(i.last())),u=i.getIterator();let l=u.getNext();return ss(e).ee({index:bd,range:a},((f,h,p)=>{const v=pe.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&TE(l,v)<0;)r(l,null),l=u.getNext();l&&l.isEqual(v)&&(r(l,h),l=u.hasNext()?u.getNext():null),l?p.j(bc(l)):p.done()})).next((()=>{for(;l;)r(l,null),l=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),r0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ss(e).J(IDBKeyRange.bound(l,f,!0)).next((h=>{a?.incrementDocumentReadCount(h.length);let p=xr();for(const v of h){const _=this.Cr(pe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);_.isFoundDocument()&&(Tf(t,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p}))}getAllFromCollectionGroup(e,t,r,i){let a=xr();const u=wE(t,r),l=wE(t,Er.max());return ss(e).ee({index:Uw,range:IDBKeyRange.bound(u,l,!0)},((f,h,p)=>{const v=this.Cr(pe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(v.key,v),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(e){return new K6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return AE(e).get(Ng).next((t=>(Ae(!!t,20021),t)))}Dr(e,t){return AE(e).put(Ng,t)}Cr(e,t){if(t){const r=O6(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return Ut.newInvalidDocument(e)}}function ZT(n){return new X6(n)}class K6 extends $T{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new va((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new mt(((a,u)=>Oe(a.canonicalString(),u.canonicalString())));return this.changes.forEach(((a,u)=>{const l=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,l.readTime)),u.isValidDocument()){const f=aE(this.Nr.serializer,u);i=i.add(a.path.popLast());const h=a0(f);r+=h-l.size,t.push(this.Nr.addEntry(e,a,f))}else if(r-=l.size,this.trackRemovals){const f=aE(this.Nr.serializer,u.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,a,f))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,r)),X.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((a,u)=>{this.Br.set(a,{size:u,readTime:r.get(a).readTime})})),r)))}}function AE(n){return gn(n,sf)}function ss(n){return gn(n,Wd)}function bc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wE(n,e){const t=e.documentKey.path.toArray();return[n,r0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function TE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Oe(t[a],r[a]),i)return i;return i=Oe(t.length,r.length),i||(i=Oe(t[t.length-2],r[r.length-2]),i||Oe(t[t.length-1],r[r.length-1]))}class Y6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class JT{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Zc(r.mutation,i,sr.empty(),gt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Fe()){const i=Mi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let u=kc();return a.forEach(((l,f)=>{u=u.insert(l,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Mi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Fe())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((u,l)=>{t.set(u,l)}))}))}computeViews(e,t,r,i){let a=xr();const u=$c(),l=(function(){return $c()})();return t.forEach(((f,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof ma)?a=a.insert(h.key,h):p!==void 0?(u.set(h.key,p.mutation.getFieldMask()),Zc(p.mutation,h,p.mutation.getFieldMask(),gt.now())):u.set(h.key,sr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,p)=>u.set(h,p))),t.forEach(((h,p)=>l.set(h,new Y6(p,u.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,t){const r=$c();let i=new Pt(((u,l)=>u-l)),a=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const l of u)l.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let p=r.get(f)||sr.empty();p=l.applyToLocalView(h,p),r.set(f,p);const v=(i.get(l.batchId)||Fe()).add(f);i=i.insert(l.batchId,v)}))})).next((()=>{const u=[],l=i.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),h=f.key,p=f.value,v=mT();p.forEach((_=>{if(!a.has(_)){const x=wT(t.get(_),r.get(_));x!==null&&v.set(_,x),a=a.add(_)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,v))}return X.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(u){return pe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):X.resolve(Mi());let l=nf,f=a;return u.next((h=>X.forEach(h,((p,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),a.get(p)?X.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{f=f.insert(p,_)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Fe()))).next((p=>({batchId:l,changes:vT(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let i=kc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let u=kc();return this.indexManager.getCollectionParents(e,a).next((l=>X.forEach(l,(f=>{const h=(function(v,_){return new wf(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((v,_)=>{u=u.insert(v,_)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((u=>{a.forEach(((f,h)=>{const p=h.getKey();u.get(p)===null&&(u=u.insert(p,Ut.newInvalidDocument(p)))}));let l=kc();return u.forEach(((f,h)=>{const p=a.get(f);p!==void 0&&Zc(p.mutation,h,sr.empty(),gt.now()),Tf(t,h)&&(l=l.insert(f,h))})),l}))}}class W6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:jT(i.bundledQuery),readTime:$n(i.readTime)}})(t)),X.resolve()}}class Q6{constructor(){this.overlays=new Pt(pe.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mi();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),X.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const i=Mi(),a=t.length+1,u=new pe(t.child("")),l=this.overlays.getIteratorFrom(u);for(;l.hasNext();){const f=l.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return X.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Pt(((h,p)=>h-p));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=Mi(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Mi(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return X.resolve(l)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Uv(t,r));let a=this.qr.get(t);a===void 0&&(a=Fe(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}class $6{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class qv{constructor(){this.Qr=new mt(En.$r),this.Ur=new mt(En.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new En(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new En(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new pe(new st([])),r=new En(t,e),i=new En(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pe(new st([])),r=new En(t,e),i=new En(t,e+1);let a=Fe();return this.Ur.forEachInRange([r,i],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new En(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class En{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pe.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||pe.comparator(e.key,t.key)}}class Z6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(En.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Vv(a,t,r,i);this.mutationQueue.push(u);for(const l of i)this.Zr=this.Zr.add(new En(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(u)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Es:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new En(t,0),i=new En(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(u=>{const l=this.Xr(u.Yr);a.push(l)})),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(Oe);return t.forEach((i=>{const a=new En(i,0),u=new En(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(l=>{r=r.add(l.Yr)}))})),X.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;pe.isDocumentKey(a)||(a=a.child(""));const u=new En(new pe(a),0);let l=new mt(Oe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(f.Yr)),!0)}),u),X.resolve(this.ti(l))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ae(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return X.forEach(t.mutations,(i=>{const a=new En(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new En(t,0),i=this.Zr.firstAfterOrEqual(r);return X.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class J6{constructor(e){this.ri=e,this.docs=(function(){return new Pt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let r=xr();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ut.newInvalidDocument(i))})),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=xr();const u=t.path,l=new pe(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||Cv(Lw(p),r)<=0||(i.has(p.key)||Tf(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,i){_e(9500)}ii(e,t){return X.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new eR(this)}getSize(e){return X.resolve(this.size)}}class eR extends $T{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class tR{constructor(e){this.persistence=e,this.si=new va((t=>Os(t)),Af),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new qv,this.targetCount=0,this.ai=Ps.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ps(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((u,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),X.waitFor(a).next((()=>i))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((u=>{a.push(i.markPotentiallyOrphaned(e,u))})),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}}class Xv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vr(0),this.li=!1,this.li=!0,this.hi=new $6,this.referenceDelegate=e(this),this.Pi=new tR(this),this.indexManager=new F6,this.remoteDocumentCache=(function(i){return new J6(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new UT(t),this.Ii=new W6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Q6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Z6(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const i=new nR(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return X.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class nR extends Bw{constructor(e){super(),this.currentSequenceNumber=e}}class k0{constructor(e){this.persistence=e,this.Ri=new qv,this.Vi=null}static mi(e){return new k0(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(r=>{const i=pe.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class o0{constructor(e,t){this.persistence=e,this.pi=new va((r=>jn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=QT(this,t)}static mi(e,t){return new o0(e,t)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?X.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,t).next((l=>{l||(r++,a.removeEntry(u,Se.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Dd(e.data.value)),t}br(e,t,r){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return X.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class rR{constructor(e){this.serializer=e}k(e,t,r,i){const a=new E0("createOrUpgrade",t);r<1&&i>=1&&((function(f){f.createObjectStore(Ef)})(e),(function(f){f.createObjectStore(of,{keyPath:d8}),f.createObjectStore(ri,{keyPath:Lx,autoIncrement:!0}).createIndex(ys,kx,{unique:!0}),f.createObjectStore(Zu)})(e),SE(e),(function(f){f.createObjectStore(hs)})(e));let u=X.resolve();return r<3&&i>=3&&(r!==0&&((function(f){f.deleteObjectStore(el),f.deleteObjectStore(Ju),f.deleteObjectStore(As)})(e),SE(e)),u=u.next((()=>(function(f){const h=f.store(As),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return h.put(Qd,p)})(a)))),r<4&&i>=4&&(r!==0&&(u=u.next((()=>(function(f,h){return h.store(ri).J().next((v=>{f.deleteObjectStore(ri),f.createObjectStore(ri,{keyPath:Lx,autoIncrement:!0}).createIndex(ys,kx,{unique:!0});const _=h.store(ri),x=v.map((A=>_.put(A)));return X.waitFor(x)}))})(e,a)))),u=u.next((()=>{(function(f){f.createObjectStore(tl,{keyPath:A8})})(e)}))),r<5&&i>=5&&(u=u.next((()=>this.yi(a)))),r<6&&i>=6&&(u=u.next((()=>((function(f){f.createObjectStore(sf)})(e),this.wi(a))))),r<7&&i>=7&&(u=u.next((()=>this.Si(a)))),r<8&&i>=8&&(u=u.next((()=>this.bi(e,a)))),r<9&&i>=9&&(u=u.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(u=u.next((()=>this.Di(a)))),r<11&&i>=11&&(u=u.next((()=>{(function(f){f.createObjectStore(w0,{keyPath:w8})})(e),(function(f){f.createObjectStore(T0,{keyPath:T8})})(e)}))),r<12&&i>=12&&(u=u.next((()=>{(function(f){const h=f.createObjectStore(S0,{keyPath:O8});h.createIndex(Pg,N8,{unique:!1}),h.createIndex(Gw,M8,{unique:!1})})(e)}))),r<13&&i>=13&&(u=u.next((()=>(function(f){const h=f.createObjectStore(Wd,{keyPath:g8});h.createIndex(bd,v8),h.createIndex(Uw,m8)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(hs)))),r<14&&i>=14&&(u=u.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(u=u.next((()=>(function(f){f.createObjectStore(Dv,{keyPath:S8,autoIncrement:!0}).createIndex(Mg,I8,{unique:!1}),f.createObjectStore(Kc,{keyPath:C8}).createIndex(jw,b8,{unique:!1}),f.createObjectStore(Yc,{keyPath:R8}).createIndex(Hw,D8,{unique:!1})})(e)))),r<16&&i>=16&&(u=u.next((()=>{t.objectStore(Kc).clear()})).next((()=>{t.objectStore(Yc).clear()}))),r<17&&i>=17&&(u=u.next((()=>{(function(f){f.createObjectStore(Ov,{keyPath:P8})})(e)}))),r<18&&i>=18&&vw()&&(u=u.next((()=>{t.objectStore(Kc).clear()})).next((()=>{t.objectStore(Yc).clear()}))),u}wi(e){let t=0;return e.store(hs).ee(((r,i)=>{t+=a0(i)})).next((()=>{const r={byteSize:t};return e.store(sf).put(Ng,r)}))}yi(e){const t=e.store(of),r=e.store(ri);return t.J().next((i=>X.forEach(i,(a=>{const u=IDBKeyRange.bound([a.userId,Es],[a.userId,a.lastAcknowledgedBatchId]);return r.J(ys,u).next((l=>X.forEach(l,(f=>{Ae(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const h=gs(this.serializer,f);return XT(e,a.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(el),r=e.store(hs);return e.store(As).get(Qd).next((i=>{const a=[];return r.ee(((u,l)=>{const f=new st(u),h=(function(v){return[0,jn(v)]})(f);a.push(t.get(h).next((p=>p?X.resolve():(v=>t.put({targetId:0,path:jn(v),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>X.waitFor(a)))}))}bi(e,t){e.createObjectStore(uf,{keyPath:E8});const r=t.store(uf),i=new Gv,a=u=>{if(i.add(u)){const l=u.lastSegment(),f=u.popLast();return r.put({collectionId:l,parent:jn(f)})}};return t.store(hs).ee({X:!0},((u,l)=>{const f=new st(u);return a(f.popLast())})).next((()=>t.store(Zu).ee({X:!0},(([u,l,f],h)=>{const p=Ni(l);return a(p.popLast())}))))}Di(e){const t=e.store(Ju);return t.ee(((r,i)=>{const a=Vc(i),u=zT(this.serializer,a);return t.put(u)}))}Ci(e,t){const r=t.store(hs),i=[];return r.ee(((a,u)=>{const l=t.store(Wd),f=(function(v){return v.document?new pe(st.fromString(v.document.name).popFirst(5)):v.noDocument?pe.fromSegments(v.noDocument.path):v.unknownDocument?pe.fromSegments(v.unknownDocument.path):_e(36783)})(u).path.toArray(),h={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(l.put(h))})).next((()=>X.waitFor(i)))}Fi(e,t){const r=t.store(ri),i=ZT(this.serializer),a=new Xv(k0.mi,this.serializer.yt);return r.J().next((u=>{const l=new Map;return u.forEach((f=>{let h=l.get(f.userId)??Fe();gs(this.serializer,f).keys().forEach((p=>h=h.add(p))),l.set(f.userId,h)})),X.forEach(l,((f,h)=>{const p=new Mn(h),v=P0.wt(this.serializer,p),_=a.getIndexManager(p),x=L0.wt(p,this.serializer,_,a.referenceDelegate);return new JT(i,x,v,_).recalculateAndSaveOverlaysForDocumentKeys(new Lg(t,Vr.ce),f).next()}))}))}}function SE(n){n.createObjectStore(el,{keyPath:_8}).createIndex(Rv,x8,{unique:!0}),n.createObjectStore(Ju,{keyPath:"targetId"}).createIndex(zw,y8,{unique:!0}),n.createObjectStore(As)}const no="IndexedDbPersistence",ug=18e5,lg=5e3,cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",iR="main";class Kv{constructor(e,t,r,i,a,u,l,f,h,p,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=a,this.window=u,this.document=l,this.xi=h,this.Oi=p,this.Ni=v,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!Kv.v())throw new de(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new q6(this,i),this.$i=t+iR,this.serializer=new UT(f),this.Ui=new _o(this.$i,this.Ni,new rR(this.serializer)),this.hi=new M6,this.Pi=new z6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZT(this.serializer),this.Ii=new N6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Qn(no,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(ae.FAILED_PRECONDITION,cg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Vr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(bo(e))return le(no,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(no,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Rc(e).get(Du).next((t=>X.resolve(this.es(t))))}ts(e){return vd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,ug)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=gn(t,tl);return r.J().next((i=>{const a=this.ss(i,ug),u=i.filter((l=>a.indexOf(l)===-1));return X.forEach(u,(l=>r.delete(l.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?X.resolve(!0):Rc(e).get(Du).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new de(ae.FAILED_PRECONDITION,cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||vd(e).J().next((r=>this.ss(r,lg).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,u=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(a||u&&l)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(no,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ef,tl],(e=>{const t=new Lg(e,Vr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>vd(e).J().next((t=>this.ss(t,ug).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return L0.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new U6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return P0.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){le(no,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?B8:f===17?Yw:f===16?k8:f===15?Nv:f===14?Kw:f===13?Xw:f===12?L8:f===11?qw:void _e(60245)})(this.Ni);let u;return this.Ui.runTransaction(e,i,a,(l=>(u=new Lg(l,this.ci?this.ci.next():Vr.ce),t==="readwrite-primary"?this.Hi(u).next((f=>!!f||this.Yi(u))).next((f=>{if(!f)throw Qn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(ae.FAILED_PRECONDITION,kw);return r(u)})).next((f=>this.Xi(u).next((()=>f)))):this.Is(u).next((()=>r(u)))))).then((l=>(u.raiseOnCommittedEvent(),l)))}Is(e){return Rc(e).get(Du).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,lg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(ae.FAILED_PRECONDITION,cg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rc(e).put(Du,t)}static v(){return _o.v()}Zi(e){const t=Rc(e);return t.get(Du).next((r=>this.es(r)?(le(no,"Releasing primary lease."),t.delete(Du)):X.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Qn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;gw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(no,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Qn(no,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Qn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rc(n){return gn(n,Ef)}function vd(n){return gn(n,tl)}function aR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Yv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Fe(),i=Fe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Yv(e,t.fromCache,r,i)}}class oR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class e3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return gw()?8:Vw(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new oR;return this.Ss(e,t,u).next((l=>{if(a.result=l,this.Vs)return this.bs(e,t,u,l.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Bu()<=Xe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(Bu()<=Xe.DEBUG&&le("QueryEngine","Query:",Vu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Bu()<=Xe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):X.resolve())}ys(e,t){if(Wx(t))return X.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=jg(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Fe(...a);return this.ps.getDocuments(e,u).next((l=>this.indexManager.getMinOffset(e,r).next((f=>{const h=this.Ds(t,l);return this.Cs(t,h,u,f.readTime)?this.ys(e,jg(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,r,i){return Wx(t)||i.isEqual(Se.min())?X.resolve(null):this.ps.getDocuments(e,r).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,r,i)?X.resolve(null):(Bu()<=Xe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vu(t)),this.vs(e,u,t,o8(i,nf)).next((l=>l)))}))}Ds(e,t){let r=new mt(pT(e));return t.forEach(((i,a)=>{Tf(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return Bu()<=Xe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Vu(t)),this.ps.getDocumentsMatchingQuery(e,t,Er.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}const Wv="LocalStore",sR=3e8;class uR{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Pt(Oe),this.xs=new va((a=>Os(a)),Af),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function t3(n,e,t,r){return new uR(n,e,t,r)}async function n3(n,e){const t=Ne(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],l=[];let f=Fe();for(const h of i){u.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return t.localDocuments.getDocuments(r,f).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:l})))}))}))}function lR(n,e){const t=Ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,f,h,p){const v=h.batch,_=v.keys();let x=X.resolve();return _.forEach((A=>{x=x.next((()=>p.getEntry(f,A))).next((S=>{const R=h.docVersions.get(A);Ae(R!==null,48541),S.version.compareTo(R)<0&&(v.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),x.next((()=>l.mutationQueue.removeMutationBatch(f,v)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let f=Fe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(f=f.add(l.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function r3(n){const e=Ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cR(n,e){const t=Ne(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const l=[];e.targetChanges.forEach(((p,v)=>{const _=i.get(v);if(!_)return;l.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,v))));let x=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?x=x.withResumeToken(rn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):p.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(p.resumeToken,r)),i=i.insert(v,x),(function(S,R,L){return S.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=sR?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(_,x,p)&&l.push(t.Pi.updateTargetData(a,x))}));let f=xr(),h=Fe();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(fR(a,u,e.documentUpdates).next((p=>{f=p.ks,h=p.qs}))),!r.isEqual(Se.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((v=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));l.push(p)}return X.waitFor(l).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function fR(n,e,t){let r=Fe(),i=Fe();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=xr();return t.forEach(((l,f)=>{const h=a.get(l);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),f.isNoDocument()&&f.version.isEqual(Se.min())?(e.removeEntry(l,f.readTime),u=u.insert(l,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),u=u.insert(l,f)):le(Wv,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",f.version)})),{ks:u,qs:i}}))}function hR(n,e){const t=Ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Es),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function dR(n,e){const t=Ne(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,X.resolve(i)):t.Pi.allocateTargetId(r).next((u=>(i=new sa(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Qg(n,e,t){const r=Ne(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!bo(u))throw u;le(Wv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function IE(n,e,t){const r=Ne(n);let i=Se.min(),a=Fe();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,h,p){const v=Ne(f),_=v.xs.get(p);return _!==void 0?X.resolve(v.Ms.get(_)):v.Pi.getTargetData(h,p)})(r,u,zr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,l.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?i:Se.min(),t?a:Fe()))).next((l=>(pR(r,Z8(e),l),{documents:l,Qs:a})))))}function pR(n,e,t){let r=n.Os.get(e)||Se.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class CE{constructor(){this.activeTargetIds=i6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i3{constructor(){this.Mo=new CE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new CE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gR{Oo(e){}shutdown(){}}const bE="ConnectivityMonitor";class RE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(bE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(bE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let md=null;function $g(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}const fg="RestConnection",vR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$d?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const u=$g(),l=this.zo(e,t.toUriEncodedString());le(fg,`Sending RPC '${e}' ${u}:`,l,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:h}=new URL(l),p=fl(h);return this.Jo(e,l,f,r,p).then((v=>(le(fg,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw Rs(fg,`RPC '${e}' ${u} failed with error: `,v,"url: ",l,"request:",r),v}))}Ho(e,t,r,i,a,u){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=vR[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class yR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Bn="WebChannelConnection";class _R extends mR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const u=$g();return new Promise(((l,f)=>{const h=new Sw;h.setWithCredentials(!0),h.listenOnce(Iw.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Sd.NO_ERROR:const v=h.getResponseJson();le(Bn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),l(v);break;case Sd.TIMEOUT:le(Bn,`RPC '${e}' ${u} timed out`),f(new de(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Sd.HTTP_ERROR:const _=h.getStatus();if(le(Bn,`RPC '${e}' ${u} failed with status:`,_,"response text:",h.getResponseText()),_>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const A=x?.error;if(A&&A.status&&A.message){const S=(function(L){const M=L.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(M)>=0?M:ae.UNKNOWN})(A.status);f(new de(S,A.message))}else f(new de(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new de(ae.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{le(Bn,`RPC '${e}' ${u} completed.`)}}));const p=JSON.stringify(i);le(Bn,`RPC '${e}' ${u} sending request:`,i),h.send(t,"POST",p,r,15)}))}T_(e,t,r){const i=$g(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Rw(),l=bw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const p=a.join("");le(Bn,`Creating RPC '${e}' stream ${i}: ${p}`,f);const v=u.createWebChannel(p,f);this.I_(v);let _=!1,x=!1;const A=new yR({Yo:R=>{x?le(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(_||(le(Bn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),_=!0),le(Bn,`RPC '${e}' stream ${i} sending:`,R),v.send(R))},Zo:()=>v.close()}),S=(R,L,M)=>{R.listen(L,(B=>{try{M(B)}catch(G){setTimeout((()=>{throw G}),0)}}))};return S(v,Lc.EventType.OPEN,(()=>{x||(le(Bn,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),S(v,Lc.EventType.CLOSE,(()=>{x||(x=!0,le(Bn,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(v))})),S(v,Lc.EventType.ERROR,(R=>{x||(x=!0,Rs(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),A.a_(new de(ae.UNAVAILABLE,"The operation could not be completed")))})),S(v,Lc.EventType.MESSAGE,(R=>{if(!x){const L=R.data[0];Ae(!!L,16349);const M=L,B=M?.error||M[0]?.error;if(B){le(Bn,`RPC '${e}' stream ${i} received error:`,B);const G=B.status;let $=(function(b){const N=tn[b];if(N!==void 0)return IT(N)})(G),J=B.message;$===void 0&&($=ae.INTERNAL,J="Unknown error status: "+G+" with message "+B.message),x=!0,A.a_(new de($,J)),v.close()}else le(Bn,`RPC '${e}' stream ${i} received:`,L),A.u_(L)}})),S(l,Cw.STAT_EVENT,(R=>{R.stat===Rg.PROXY?le(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Rg.NOPROXY&&le(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function xR(){return typeof window<"u"?window:null}function Ld(){return typeof document<"u"?document:null}function B0(n){return new E6(n,!0)}class a3{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const DE="PersistentStream";class o3{constructor(e,t,r,i,a,u,l,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Qn(t.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new de(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(DE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(DE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ER extends o3{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=T6(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Se.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Se.min():u.readTime?$n(u.readTime):Se.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=qg(this.serializer),t.addTarget=(function(a,u){let l;const f=u.target;if(l=Jd(f)?{documents:PT(a,f)}:{query:LT(a,f).ft},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=RT(a,u.resumeToken);const h=Hg(a,u.expectedCount);h!==null&&(l.expectedCount=h)}else if(u.snapshotVersion.compareTo(Se.min())>0){l.readTime=ul(a,u.snapshotVersion.toTimestamp());const h=Hg(a,u.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const r=I6(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=qg(this.serializer),t.removeTarget=e,this.q_(t)}}class AR extends o3{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=S6(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=qg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>n0(this.serializer,r)))};this.q_(t)}}class wR{}class TR extends wR{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Gg(t,r),i,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(ae.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,l])=>this.connection.Ho(e,Gg(t,r),i,u,l,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ae.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class SR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ls="RemoteStore";class IR{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Fs(this)&&(le(Ls,"Restarting streams for network reachability change."),await(async function(f){const h=Ne(f);h.Ea.add(4),await If(h),h.Ra.set("Unknown"),h.Ea.delete(4),await V0(h)})(this))}))})),this.Ra=new SR(r,i)}}async function V0(n){if(Fs(n))for(const e of n.da)await e(!0)}async function If(n){for(const e of n.da)await e(!1)}function s3(n,e){const t=Ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jv(t)?Zv(t):gl(t).O_()&&$v(t,e))}function Qv(n,e){const t=Ne(n),r=gl(t);t.Ia.delete(e),r.O_()&&u3(t,e),t.Ia.size===0&&(r.O_()?r.L_():Fs(t)&&t.Ra.set("Unknown"))}function $v(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gl(n).Y_(e)}function u3(n,e){n.Va.Ue(e),gl(n).Z_(e)}function Zv(n){n.Va=new m6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),gl(n).start(),n.Ra.ua()}function Jv(n){return Fs(n)&&!gl(n).x_()&&n.Ia.size>0}function Fs(n){return Ne(n).Ea.size===0}function l3(n){n.Va=void 0}async function CR(n){n.Ra.set("Online")}async function bR(n){n.Ia.forEach(((e,t)=>{$v(n,e)}))}async function RR(n,e){l3(n),Jv(n)?(n.Ra.ha(e),Zv(n)):n.Ra.set("Unknown")}async function DR(n,e,t){if(n.Ra.set("Online"),e instanceof bT&&e.state===2&&e.cause)try{await(async function(i,a){const u=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,u),i.Ia.delete(l),i.Va.removeTarget(l))})(n,e)}catch(r){le(Ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await s0(n,r)}else if(e instanceof Md?n.Va.Ze(e):e instanceof CT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Se.min()))try{const r=await r3(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const l=a.Va.Tt(u);return l.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(f.resumeToken,u))}})),l.targetMismatches.forEach(((f,h)=>{const p=a.Ia.get(f);if(!p)return;a.Ia.set(f,p.withResumeToken(rn.EMPTY_BYTE_STRING,p.snapshotVersion)),u3(a,f);const v=new sa(p.target,f,h,p.sequenceNumber);$v(a,v)})),a.remoteSyncer.applyRemoteEvent(l)})(n,t)}catch(r){le(Ls,"Failed to raise snapshot:",r),await s0(n,r)}}async function s0(n,e,t){if(!bo(e))throw e;n.Ea.add(1),await If(n),n.Ra.set("Offline"),t||(t=()=>r3(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(Ls,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await V0(n)}))}function c3(n,e){return e().catch((t=>s0(n,t,e)))}async function Cf(n){const e=Ne(n),t=So(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Es;for(;OR(e);)try{const i=await hR(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,NR(e,i)}catch(i){await s0(e,i)}f3(e)&&h3(e)}function OR(n){return Fs(n)&&n.Ta.length<10}function NR(n,e){n.Ta.push(e);const t=So(n);t.O_()&&t.X_&&t.ea(e.mutations)}function f3(n){return Fs(n)&&!So(n).x_()&&n.Ta.length>0}function h3(n){So(n).start()}async function MR(n){So(n).ra()}async function PR(n){const e=So(n);for(const t of n.Ta)e.ea(t.mutations)}async function LR(n,e,t){const r=n.Ta.shift(),i=Fv.from(r,e,t);await c3(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Cf(n)}async function kR(n,e){e&&So(n).X_&&await(async function(r,i){if((function(u){return p6(u)&&u!==ae.ABORTED})(i.code)){const a=r.Ta.shift();So(r).B_(),await c3(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Cf(r)}})(n,e),f3(n)&&h3(n)}async function OE(n,e){const t=Ne(n);t.asyncQueue.verifyOperationInProgress(),le(Ls,"RemoteStore received new credentials");const r=Fs(t);t.Ea.add(3),await If(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await V0(t)}async function BR(n,e){const t=Ne(n);e?(t.Ea.delete(2),await V0(t)):e||(t.Ea.add(2),await If(t),t.Ra.set("Unknown"))}function gl(n){return n.ma||(n.ma=(function(t,r,i){const a=Ne(t);return a.sa(),new ER(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:CR.bind(null,n),t_:bR.bind(null,n),r_:RR.bind(null,n),H_:DR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Jv(n)?Zv(n):n.Ra.set("Unknown")):(await n.ma.stop(),l3(n))}))),n.ma}function So(n){return n.fa||(n.fa=(function(t,r,i){const a=Ne(t);return a.sa(),new AR(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:MR.bind(null,n),r_:kR.bind(null,n),ta:PR.bind(null,n),na:LR.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Cf(n)):(await n.fa.stop(),n.Ta.length>0&&(le(Ls,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class em{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,l=new em(e,t,u,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tm(n,e){if(Qn("AsyncQueue",`${e}: ${n}`),bo(n))return new de(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class qu{static emptySet(e){return new qu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=kc(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new qu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class NE{constructor(){this.ga=new Pt(pe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ll{constructor(e,t,r,i,a,u,l,f,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,a){const u=[];return t.forEach((l=>{u.push({type:0,doc:l})})),new ll(e,t,qu.emptySet(t),u,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class VR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FR{constructor(){this.queries=ME(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Ne(t),a=i.queries;i.queries=ME(),a.forEach(((u,l)=>{for(const f of l.Sa)f.onError(r)}))})(this,new de(ae.ABORTED,"Firestore shutting down"))}}function ME(){return new va((n=>dT(n)),R0)}async function UR(n,e){const t=Ne(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new VR,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const l=tm(u,`Initialization of query '${Vu(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&nm(t)}async function zR(n,e){const t=Ne(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function jR(n,e){const t=Ne(n);let r=!1;for(const i of e){const a=i.query,u=t.queries.get(a);if(u){for(const l of u.Sa)l.Fa(i)&&(r=!0);u.wa=i}}r&&nm(t)}function HR(n,e,t){const r=Ne(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function nm(n){n.Ca.forEach((e=>{e.next()}))}var Zg,PE;(PE=Zg||(Zg={})).Ma="default",PE.Cache="cache";class GR{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zg.Cache}}class d3{constructor(e){this.key=e}}class p3{constructor(e){this.key=e}}class qR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=pT(e),this.tu=new qu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new NE,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,l=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,v)=>{const _=i.get(p),x=Tf(this.query,v)?v:null,A=!!_&&this.mutatedKeys.has(_.key),S=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;_&&x?_.data.isEqual(x.data)?A!==S&&(r.track({type:3,doc:x}),R=!0):this.su(_,x)||(r.track({type:2,doc:x}),R=!0,(f&&this.eu(x,f)>0||h&&this.eu(x,h)<0)&&(l=!0)):!_&&x?(r.track({type:0,doc:x}),R=!0):_&&!x&&(r.track({type:1,doc:_}),R=!0,(f||h)&&(l=!0)),R&&(x?(u=u.add(x),a=S?a.add(p):a.delete(p)):(u=u.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const p=this.query.limitType==="F"?u.last():u.first();u=u.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:u,iu:r,Cs:l,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((p,v)=>(function(x,A){const S=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:R})}};return S(x)-S(A)})(p.type,v.type)||this.eu(p.doc,v.doc))),this.ou(r),i=i??!1;const l=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,h=f!==this.Za;return this.Za=f,u.length!==0||h?{snapshot:new ll(this.query,e.tu,a,u,e.mutatedKeys,f===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new p3(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new d3(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rm="SyncEngine";class XR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KR{constructor(e){this.key=e,this.hu=!1}}class YR{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new va((l=>dT(l)),R0),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(pe.comparator),this.Au=new Map,this.Ru=new qv,this.Vu={},this.mu=new Map,this.fu=Ps.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WR(n,e,t=!0){const r=x3(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await g3(r,e,t,!0),i}async function QR(n,e){const t=x3(n);await g3(t,e,!0,!1)}async function g3(n,e,t,r){const i=await dR(n.localStore,zr(e)),a=i.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let l;return r&&(l=await $R(n,e,a,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&s3(n.remoteStore,i),l}async function $R(n,e,t,r,i){n.pu=(v,_,x)=>(async function(S,R,L,M){let B=R.view.ru(L);B.Cs&&(B=await IE(S.localStore,R.query,!1).then((({documents:C})=>R.view.ru(C,B))));const G=M&&M.targetChanges.get(R.targetId),$=M&&M.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(B,S.isPrimaryClient,G,$);return kE(S,R.targetId,J.au),J.snapshot})(n,v,_,x);const a=await IE(n.localStore,e,!0),u=new qR(e,a.Qs),l=u.ru(a.documents),f=Sf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=u.applyChanges(l,n.isPrimaryClient,f);kE(n,t,h.au);const p=new XR(e,t,u);return n.Tu.set(e,p),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function ZR(n,e,t){const r=Ne(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((u=>!R0(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Qv(r.remoteStore,i.targetId),Jg(r,i.targetId)})).catch(Vs)):(Jg(r,i.targetId),await Qg(r.localStore,i.targetId,!0))}async function JR(n,e){const t=Ne(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qv(t.remoteStore,r.targetId))}async function eD(n,e,t){const r=E3(n);try{const i=await(function(u,l){const f=Ne(u),h=gt.now(),p=l.reduce(((x,A)=>x.add(A.key)),Fe());let v,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let A=xr(),S=Fe();return f.Ns.getEntries(x,p).next((R=>{A=R,A.forEach(((L,M)=>{M.isValidDocument()||(S=S.add(L))}))})).next((()=>f.localDocuments.getOverlayedDocuments(x,A))).next((R=>{v=R;const L=[];for(const M of l){const B=h6(M,v.get(M.key).overlayedDocument);B!=null&&L.push(new ma(M.key,B,iT(B.value.mapValue),zn.exists(!0)))}return f.mutationQueue.addMutationBatch(x,h,L,l)})).next((R=>{_=R;const L=R.applyToLocalDocumentSet(v,S);return f.documentOverlayCache.saveOverlays(x,R.batchId,L)}))})).then((()=>({batchId:_.batchId,changes:vT(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,l,f){let h=u.Vu[u.currentUser.toKey()];h||(h=new Pt(Oe)),h=h.insert(l,f),u.Vu[u.currentUser.toKey()]=h})(r,i.batchId,t),await bf(r,i.changes),await Cf(r.remoteStore)}catch(i){const a=tm(i,"Failed to persist write");t.reject(a)}}async function v3(n,e){const t=Ne(n);try{const r=await cR(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const u=t.Au.get(a);u&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Ae(u.hu,14607):i.removedDocuments.size>0&&(Ae(u.hu,42227),u.hu=!1))})),await bf(t,r,e)}catch(r){await Vs(r)}}function LE(n,e,t){const r=Ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,u)=>{const l=u.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(u,l){const f=Ne(u);f.onlineState=l;let h=!1;f.queries.forEach(((p,v)=>{for(const _ of v.Sa)_.va(l)&&(h=!0)})),h&&nm(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tD(n,e,t){const r=Ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let u=new Pt(pe.comparator);u=u.insert(a,Ut.newNoDocument(a,Se.min()));const l=Fe().add(a),f=new M0(Se.min(),new Map,new Pt(Oe),u,l);await v3(r,f),r.du=r.du.remove(a),r.Au.delete(e),im(r)}else await Qg(r.localStore,e,!1).then((()=>Jg(r,e,t))).catch(Vs)}async function nD(n,e){const t=Ne(n),r=e.batch.batchId;try{const i=await lR(t.localStore,e);y3(t,r,null),m3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bf(t,i)}catch(i){await Vs(i)}}async function rD(n,e,t){const r=Ne(n);try{const i=await(function(u,l){const f=Ne(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,l).next((v=>(Ae(v!==null,37113),p=v.keys(),f.mutationQueue.removeMutationBatch(h,v)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);y3(r,e,t),m3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bf(r,i)}catch(i){await Vs(i)}}function m3(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function y3(n,e,t){const r=Ne(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Jg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||_3(n,r)}))}function _3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Qv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),im(n))}function kE(n,e,t){for(const r of t)r instanceof d3?(n.Ru.addReference(r.key,e),iD(n,r)):r instanceof p3?(le(rm,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||_3(n,r.key)):_e(19791,{wu:r})}function iD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(le(rm,"New document in limbo: "+t),n.Eu.add(r),im(n))}function im(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new pe(st.fromString(e)),r=n.fu.next();n.Au.set(r,new KR(t)),n.du=n.du.insert(t,r),s3(n.remoteStore,new sa(zr(b0(t.path)),r,"TargetPurposeLimboResolution",Vr.ce))}}async function bf(n,e,t){const r=Ne(n),i=[],a=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,f)=>{u.push(r.pu(f,e,t).then((h=>{if((h||t)&&r.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Yv.As(f.targetId,h);a.push(p)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(f,h){const p=Ne(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>X.forEach(h,(_=>X.forEach(_.Es,(x=>p.persistence.referenceDelegate.addReference(v,_.targetId,x))).next((()=>X.forEach(_.ds,(x=>p.persistence.referenceDelegate.removeReference(v,_.targetId,x)))))))))}catch(v){if(!bo(v))throw v;le(Wv,"Failed to update sequence numbers: "+v)}for(const v of h){const _=v.targetId;if(!v.fromCache){const x=p.Ms.get(_),A=x.snapshotVersion,S=x.withLastLimboFreeSnapshotVersion(A);p.Ms=p.Ms.insert(_,S)}}})(r.localStore,a))}async function aD(n,e){const t=Ne(n);if(!t.currentUser.isEqual(e)){le(rm,"User change. New user:",e.toKey());const r=await n3(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((l=>{l.forEach((f=>{f.reject(new de(ae.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bf(t,r.Ls)}}function oD(n,e){const t=Ne(n),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let i=Fe();const a=t.Iu.get(e);if(!a)return i;for(const u of a){const l=t.Tu.get(u);i=i.unionWith(l.view.nu)}return i}}function x3(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tD.bind(null,e),e.Pu.H_=jR.bind(null,e.eventManager),e.Pu.yu=HR.bind(null,e.eventManager),e}function E3(n){const e=Ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rD.bind(null,e),e}class gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=B0(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return t3(this.persistence,new e3,e.initialUser,this.serializer)}Cu(e){return new Xv(k0.mi,this.serializer)}Du(e){return new i3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gf.provider={build:()=>new gf};class sD extends gf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof o0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new WT(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new Xv((r=>o0.mi(r,t)),this.serializer)}}class uD extends gf{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await E3(this.xu.syncEngine),await Cf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return t3(this.persistence,new e3,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new WT(r,e.asyncQueue,t)}Mu(e,t){const r=new c8(t,this.persistence);return new l8(e.asyncQueue,r)}Cu(e){const t=aR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new Kv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,xR(),Ld(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new i3}}class u0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>LE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aD.bind(null,this.syncEngine),await BR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FR})()}createDatastore(e){const t=B0(e.databaseInfo.databaseId),r=(function(a){return new _R(a)})(e.databaseInfo);return(function(a,u,l,f){return new TR(a,u,l,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,u,l){return new IR(r,i,a,u,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>LE(this.syncEngine,t,0)),(function(){return RE.v()?new RE:new gR})())}createSyncEngine(e,t){return(function(i,a,u,l,f,h,p){const v=new YR(i,a,u,l,f,h);return p&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ne(t);le(Ls,"RemoteStore shutting down."),r.Ea.add(5),await If(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}u0.provider={build:()=>new u0};class lD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Io="FirestoreClient";class cD{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=Iv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{le(Io,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(le(Io,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=tm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function hg(n,e){n.asyncQueue.verifyOperationInProgress(),le(Io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await n3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function BE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fD(n);le(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>OE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>OE(e.remoteStore,i))),n._onlineComponents=e}async function fD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Io,"Using user provided OfflineComponentProvider");try{await hg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Rs("Error using user provided cache. Falling back to memory cache: "+t),await hg(n,new gf)}}else le(Io,"Using default OfflineComponentProvider"),await hg(n,new sD(void 0));return n._offlineComponents}async function A3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Io,"Using user provided OnlineComponentProvider"),await BE(n,n._uninitializedComponentsProvider._online)):(le(Io,"Using default OnlineComponentProvider"),await BE(n,new u0))),n._onlineComponents}function hD(n){return A3(n).then((e=>e.syncEngine))}async function VE(n){const e=await A3(n),t=e.eventManager;return t.onListen=WR.bind(null,e.syncEngine),t.onUnlisten=ZR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=QR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JR.bind(null,e.syncEngine),t}function w3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const FE=new Map;const T3="firestore.googleapis.com",UE=!0;class zE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=T3,this.ssl=UE}else this.host=e.host,this.ssl=e.ssl??UE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<j6)throw new de(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w3(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Wb;switch(r.type){case"firstParty":return new Jb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=FE.get(t);r&&(le("ComponentProvider","Removing Datastore"),FE.delete(t),r.terminate())})(this),Promise.resolve()}}function dD(n,e,t,r={}){n=si(n,F0);const i=fl(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},l=`${e}:${t}`;i&&(hw(`https://${l}`),dw("Firestore",!0)),a.host!==T3&&a.host!==l&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:l,ssl:i,emulatorOptions:r};if(!Is(f,u)&&(n._setSettings(f),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Mn.MOCK_USER;else{h=w4(r.mockUserToken,n._app?.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new de(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mn(v)}n._authCredentials=new Qb(new Ow(h,p))}}class vl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vl(this.firestore,e,this._query)}}class qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}toJSON(){return{type:qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xf(t,qt._jsonSchema))return new qt(e,r||null,new pe(st.fromString(t.referencePath)))}}qt._jsonSchemaVersion="firestore/documentReference/1.0",qt._jsonSchema={type:nn("string",qt._jsonSchemaVersion),referencePath:nn("string")};class xo extends vl{constructor(e,t,r){super(e,t,b0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new pe(e))}withConverter(e){return new xo(this.firestore,e,this._path)}}function Jc(n,e,...t){if(n=Tn(n),Mw("collection","path",e),n instanceof F0){const r=st.fromString(e,...t);return Dx(r),new xo(n,null,r)}{if(!(n instanceof qt||n instanceof xo))throw new de(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return Dx(r),new xo(n.firestore,null,r)}}function ks(n,e,...t){if(n=Tn(n),arguments.length===1&&(e=Iv.newId()),Mw("doc","path",e),n instanceof F0){const r=st.fromString(e,...t);return Rx(r),new qt(n,null,new pe(r))}{if(!(n instanceof qt||n instanceof xo))throw new de(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(st.fromString(e,...t));return Rx(r),new qt(n.firestore,n instanceof xo?n.converter:null,new pe(r))}}const jE="AsyncQueue";class HE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a3(this,"async_queue_retry"),this._c=()=>{const r=Ld();r&&le(jE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ld();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ld();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;le(jE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",GE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=em.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&_e(47125,{Pc:GE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function GE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function qE(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Co extends F0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new HE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HE(e),this._firestoreClient=void 0,await e}}}function pD(n,e){const t=typeof n=="object"?n:Ew(),r=typeof n=="string"?n:$d,i=Tv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=E4("firestore");a&&dD(i,...a)}return i}function S3(n){if(n._terminated)throw new de(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||I3(n),n._firestoreClient}function I3(n){const e=n._freezeSettings(),t=(function(i,a,u,l){return new F8(i,a,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,w3(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(n._componentsProvider))}function gD(n,e){Rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return vD(n,u0.provider,{build:r=>new uD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function vD(n,e,t){if((n=si(n,Co))._firestoreClient||n._terminated)throw new de(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(ae.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},I3(n)}class kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kr(rn.fromBase64String(e))}catch(t){throw new de(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xf(e,kr._jsonSchema))return kr.fromBase64String(e.bytes)}}kr._jsonSchemaVersion="firestore/bytes/1.0",kr._jsonSchema={type:nn("string",kr._jsonSchemaVersion),bytes:nn("string")};class U0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class am{constructor(e){this._methodName=e}}class Li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Li._jsonSchemaVersion}}static fromJSON(e){if(xf(e,Li._jsonSchema))return new Li(e.latitude,e.longitude)}}Li._jsonSchemaVersion="firestore/geoPoint/1.0",Li._jsonSchema={type:nn("string",Li._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};class ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xf(e,ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ki(e.vectorValues);throw new de(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ki._jsonSchemaVersion="firestore/vectorValue/1.0",ki._jsonSchema={type:nn("string",ki._jsonSchemaVersion),vectorValues:nn("object")};const mD=/^__.*__$/;class yD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new pl(e,this.data,t,this.fieldTransforms)}}class C3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function b3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:n})}}class om{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new om({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return l0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(b3(this.Ac)&&mD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _D{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||B0(e)}Cc(e,t,r,i=!1){return new om({Ac:e,methodName:t,Dc:r,path:Lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z0(n){const e=n._freezeSettings(),t=B0(n._databaseId);return new _D(n._databaseId,!!e.ignoreUndefinedProperties,t)}function R3(n,e,t,r,i,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);sm("Data must be an object, but it was:",u,r);const l=D3(r,u);let f,h;if(a.merge)f=new sr(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const p=[];for(const v of a.mergeFields){const _=ev(e,v,t);if(!u.contains(_))throw new de(ae.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);N3(p,_)||p.push(_)}f=new sr(p),h=u.fieldTransforms.filter((v=>f.covers(v.field)))}else f=null,h=u.fieldTransforms;return new yD(new Un(l),f,h)}class j0 extends am{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof j0}}function xD(n,e,t,r){const i=n.Cc(1,e,t);sm("Data must be an object, but it was:",i,r);const a=[],u=Un.empty();Ro(r,((f,h)=>{const p=um(e,f,t);h=Tn(h);const v=i.yc(p);if(h instanceof j0)a.push(p);else{const _=Rf(h,v);_!=null&&(a.push(p),u.set(p,_))}}));const l=new sr(a);return new C3(u,l,i.fieldTransforms)}function ED(n,e,t,r,i,a){const u=n.Cc(1,e,t),l=[ev(e,r,t)],f=[i];if(a.length%2!=0)throw new de(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)l.push(ev(e,a[_])),f.push(a[_+1]);const h=[],p=Un.empty();for(let _=l.length-1;_>=0;--_)if(!N3(h,l[_])){const x=l[_];let A=f[_];A=Tn(A);const S=u.yc(x);if(A instanceof j0)h.push(x);else{const R=Rf(A,S);R!=null&&(h.push(x),p.set(x,R))}}const v=new sr(h);return new C3(p,v,u.fieldTransforms)}function AD(n,e,t,r=!1){return Rf(t,n.Cc(r?4:3,e))}function Rf(n,e){if(O3(n=Tn(n)))return sm("Unsupported field value:",e,n),D3(n,e);if(n instanceof am)return(function(r,i){if(!b3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let u=0;for(const l of r){let f=Rf(l,i.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=Tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=gt.fromDate(r);return{timestampValue:ul(i.serializer,a)}}if(r instanceof gt){const a=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ul(i.serializer,a)}}if(r instanceof Li)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kr)return{bytesValue:RT(i.serializer,r._byteString)};if(r instanceof qt){const a=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ki)return(function(u,l){return{mapValue:{fields:{[Pv]:{stringValue:Lv},[nl]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Bv(l.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${x0(r)}`)})(n,e)}function D3(n,e){const t={};return Ww(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(n,((r,i)=>{const a=Rf(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function O3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Li||n instanceof kr||n instanceof qt||n instanceof am||n instanceof ki)}function sm(n,e,t){if(!O3(t)||!Pw(t)){const r=x0(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ev(n,e,t){if((e=Tn(e))instanceof U0)return e._internalPath;if(typeof e=="string")return um(n,e);throw l0("Field path arguments must be of type string or ",n,!1,void 0,t)}const wD=new RegExp("[~\\*/\\[\\]]");function um(n,e,t){if(e.search(wD)>=0)throw l0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new U0(...e.split("."))._internalPath}catch{throw l0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function l0(n,e,t,r,i){const a=r&&!r.isEmpty(),u=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${i}`),f+=")"),new de(ae.INVALID_ARGUMENT,l+n+f)}function N3(n,e){return n.some((t=>t.isEqual(e)))}class M3{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TD extends M3{data(){return super.data()}}function lm(n,e){return typeof e=="string"?um(n,e):e instanceof U0?e._internalPath:e._delegate._internalPath}function SD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cm{}class ID extends cm{}function P3(n,e,...t){let r=[];e instanceof cm&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof fm)).length,l=a.filter((f=>f instanceof H0)).length;if(u>1||u>0&&l>0)throw new de(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class H0 extends ID{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new H0(e,t,r)}_apply(e){const t=this._parse(e);return k3(e._query,t),new vl(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=z0(e.firestore);return(function(a,u,l,f,h,p,v){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new de(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){KE(v,p);const A=[];for(const S of v)A.push(XE(f,a,S));_={arrayValue:{values:A}}}else _=XE(f,a,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||KE(v,p),_=AD(l,u,v,p==="in"||p==="not-in");return Ke.create(h,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function L3(n,e,t){const r=e,i=lm("where",n);return H0._create(i,r,t)}class fm extends cm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fm(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let u=i;const l=a.getFlattenedFilters();for(const f of l)k3(u,f),u=zg(u,f)})(e._query,t),new vl(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function XE(n,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new de(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hT(e)&&t.indexOf("/")!==-1)throw new de(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(st.fromString(t));if(!pe.isDocumentKey(r))throw new de(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ff(n,new pe(r))}if(t instanceof qt)return ff(n,t._key);throw new de(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${x0(t)}.`)}function KE(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k3(n,e){const t=(function(i,a){for(const u of i)for(const l of u.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CD{convertValue(e,t="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ro(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){const t=e.fields?.[nl].arrayValue?.values?.map((r=>Mt(r.doubleValue)));return new ki(t)}convertGeoPoint(e){return new Li(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=I0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lf(e));default:return null}}convertTimestamp(e){const t=fa(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=st.fromString(e);Ae(FT(r),9688,{name:e});const i=new Ds(r.get(1),r.get(3)),a=new pe(r.popFirst(5));return i.isEqual(t)||Qn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function B3(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends M3{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(lm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ts._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ts._jsonSchema={type:nn("string",Ts._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class kd extends Ts{data(e={}){return super.data(e)}}class Xu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new kd(this._firestore,this._userDataWriter,r.key,r,new Fc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((l=>{const f=new kd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Fc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const f=new kd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Fc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),l.type!==1&&(u=u.add(l.doc),p=u.indexOf(l.doc.key)),{type:bD(l.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Iv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}Xu._jsonSchemaVersion="firestore/querySnapshot/1.0",Xu._jsonSchema={type:nn("string",Xu._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};class V3 extends CD{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function YE(n,e,t){n=si(n,qt);const r=si(n.firestore,Co),i=B3(n.converter,e,t);return G0(r,[R3(z0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,zn.none())])}function F3(n,e,t,...r){n=si(n,qt);const i=si(n.firestore,Co),a=z0(i);let u;return u=typeof(e=Tn(e))=="string"||e instanceof U0?ED(a,"updateDoc",n._key,e,t,r):xD(a,"updateDoc",n._key,e),G0(i,[u.toMutation(n._key,zn.exists(!0))])}function U3(n){return G0(si(n.firestore,Co),[new N0(n._key,zn.none())])}function tv(n,e){const t=si(n.firestore,Co),r=ks(n),i=B3(n.converter,e);return G0(t,[R3(z0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,zn.exists(!1))]).then((()=>r))}function hm(n,...e){n=Tn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||qE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(qE(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let a,u,l;if(n instanceof qt)u=si(n.firestore,Co),l=b0(n._key.path),a={next:f=>{e[r]&&e[r](RD(u,n,f))},error:e[r+1],complete:e[r+2]};else{const f=si(n,vl);u=si(f.firestore,Co),l=f._query;const h=new V3(u);a={next:p=>{e[r]&&e[r](new Xu(u,h,f,p))},error:e[r+1],complete:e[r+2]},SD(n._query)}return(function(h,p,v,_){const x=new lD(_),A=new GR(p,x,v);return h.asyncQueue.enqueueAndForget((async()=>UR(await VE(h),A))),()=>{x.Nu(),h.asyncQueue.enqueueAndForget((async()=>zR(await VE(h),A)))}})(S3(u),l,i,a)}function G0(n,e){return(function(r,i){const a=new yo;return r.asyncQueue.enqueueAndForget((async()=>eD(await hD(r),i,a))),a.promise})(S3(n),e)}function RD(n,e,t){const r=t.docs.get(e._key),i=new V3(n);return new Ts(n,i,e._key,r,new Fc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){dl=i})(hl),Qu(new Cs("firestore",((r,{instanceIdentifier:i,options:a})=>{const u=r.getProvider("app").getImmediate(),l=new Co(new $b(r.getProvider("auth-internal")),new e8(u,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new de(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(h.options.projectId,p)})(u,i),u);return a={useFetchStreams:t,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),vo(Sx,Ix,e),vo(Sx,Ix,"esm2020")})();function z3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DD=z3,j3=new yf("auth","Firebase",z3());const c0=new Av("@firebase/auth");function OD(n,...e){c0.logLevel<=Xe.WARN&&c0.warn(`Auth (${hl}): ${n}`,...e)}function Bd(n,...e){c0.logLevel<=Xe.ERROR&&c0.error(`Auth (${hl}): ${n}`,...e)}function ui(n,...e){throw dm(n,...e)}function Bi(n,...e){return dm(n,...e)}function H3(n,e,t){const r={...DD(),[e]:t};return new yf("auth","Firebase",r).create(e,{appName:n.name})}function Vi(n){return H3(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return j3.create(n,...e)}function Re(n,e,...t){if(!n)throw dm(e,...t)}function ua(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bd(e),new Error(e)}function da(n,e){n||ua(e)}function nv(){return typeof self<"u"&&self.location?.href||""}function ND(){return WE()==="http:"||WE()==="https:"}function WE(){return typeof self<"u"&&self.location?.protocol||null}function MD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ND()||b4()||"connection"in navigator)?navigator.onLine:!0}function PD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Df{constructor(e,t){this.shortDelay=e,this.longDelay=t,da(t>e,"Short delay should be less than long delay!"),this.isMobile=I4()||R4()}get(){return MD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pm(n,e){da(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class G3{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const LD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const kD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BD=new Df(3e4,6e4);function ya(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function _a(n,e,t,r,i={}){return q3(n,i,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const l=_f({key:n.config.apiKey,...u}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return C4()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&fl(n.emulatorConfig.host)&&(h.credentials="include"),G3.fetch()(await X3(n,n.config.apiHost,t,l),h)})}async function q3(n,e,t){n._canInitEmulator=!1;const r={...LD,...e};try{const i=new FD(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw yd(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const l=a.ok?u.errorMessage:u.error.message,[f,h]=l.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw yd(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw yd(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw yd(n,"user-disabled",u);const p=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw H3(n,p,h);ui(n,p)}}catch(i){if(i instanceof ga)throw i;ui(n,"network-request-failed",{message:String(i)})}}async function Of(n,e,t,r,i={}){const a=await _a(n,e,t,r,i);return"mfaPendingCredential"in a&&ui(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function X3(n,e,t,r){const i=`${e}${t}?${r}`,a=n,u=a.config.emulator?pm(n.config,i):`${n.config.apiScheme}://${i}`;return kD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function VD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),BD.get())})}}function yd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Bi(n,e,r);return i.customData._tokenResponse=t,i}function QE(n){return n!==void 0&&n.enterprise!==void 0}class UD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zD(n,e){return _a(n,"GET","/v2/recaptchaConfig",ya(n,e))}async function jD(n,e){return _a(n,"POST","/v1/accounts:delete",e)}async function f0(n,e){return _a(n,"POST","/v1/accounts:lookup",e)}function ef(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HD(n,e=!1){const t=Tn(n),r=await t.getIdToken(e),i=gm(r);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,u=a?.sign_in_provider;return{claims:i,token:r,authTime:ef(dg(i.auth_time)),issuedAtTime:ef(dg(i.iat)),expirationTime:ef(dg(i.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function dg(n){return Number(n)*1e3}function gm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bd("JWT malformed, contained fewer than 3 sections"),null;try{const i=sw(t);return i?JSON.parse(i):(Bd("Failed to decode base64 JWT payload"),null)}catch(i){return Bd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $E(n){const e=gm(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vf(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ga&&GD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function GD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class qD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ef(this.lastLoginAt),this.creationTime=ef(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function h0(n){const e=n.auth,t=await n.getIdToken(),r=await vf(n,f0(e,{idToken:t}));Re(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=i.providerUserInfo?.length?K3(i.providerUserInfo):[],u=KD(n.providerData,a),l=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!u?.length,h=l?f:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new rv(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function XD(n){const e=Tn(n);await h0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KD(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function K3(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function YD(n,e){const t=await q3(n,{},async()=>{const r=_f({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,u=await X3(n,i,"/v1/token",`key=${a}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:l,body:r};return n.emulatorConfig&&fl(n.emulatorConfig.host)&&(f.credentials="include"),G3.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WD(n,e){return _a(n,"POST","/v2/accounts:revokeToken",ya(n,e))}class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=$E(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await YD(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,u=new Ku;return r&&(Re(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),a&&(Re(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return ua("not implemented")}}function ro(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new qD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rv(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vf(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return HD(this,e)}reload(){return XD(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await h0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await vf(this,jD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,l=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:v,emailVerified:_,isAnonymous:x,providerData:A,stsTokenManager:S}=t;Re(v&&S,e,"internal-error");const R=Ku.fromJSON(this.name,S);Re(typeof v=="string",e,"internal-error"),ro(r,e.name),ro(i,e.name),Re(typeof _=="boolean",e,"internal-error"),Re(typeof x=="boolean",e,"internal-error"),ro(a,e.name),ro(u,e.name),ro(l,e.name),ro(f,e.name),ro(h,e.name),ro(p,e.name);const L=new oi({uid:v,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:x,photoURL:u,phoneNumber:a,tenantId:l,stsTokenManager:R,createdAt:h,lastLoginAt:p});return A&&Array.isArray(A)&&(L.providerData=A.map(M=>({...M}))),f&&(L._redirectEventId=f),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ku;i.updateFromServerResponse(t);const a=new oi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await h0(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?K3(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!a?.length,l=new Ku;l.updateFromIdToken(r);const f=new oi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:u}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new rv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,h),f}}const ZE=new Map;function la(n){da(n instanceof Function,"Expected a class definition");let e=ZE.get(n);return e?(da(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ZE.set(n,e),e)}class Y3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y3.type="NONE";const JE=Y3;function Vd(n,e,t){return`firebase:${n}:${e}:${t}`}class Yu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Vd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Vd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await f0(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Yu(la(JE),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||la(JE);const u=Vd(r,e.config.apiKey,e.name);let l=null;for(const h of t)try{const p=await h._get(u);if(p){let v;if(typeof p=="string"){const _=await f0(e,{idToken:p}).catch(()=>{});if(!_)break;v=await oi._fromGetAccountInfoResponse(e,_,p)}else v=oi._fromJSON(e,p);h!==a&&(l=v),a=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Yu(a,e,r):(a=f[0],l&&await a._set(u,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Yu(a,e,r))}}function eA(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(W3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eS(e))return"Blackberry";if(tS(e))return"Webos";if(Q3(e))return"Safari";if((e.includes("chrome/")||$3(e))&&!e.includes("edge/"))return"Chrome";if(J3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function W3(n=pn()){return/firefox\//i.test(n)}function Q3(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $3(n=pn()){return/crios\//i.test(n)}function Z3(n=pn()){return/iemobile/i.test(n)}function J3(n=pn()){return/android/i.test(n)}function eS(n=pn()){return/blackberry/i.test(n)}function tS(n=pn()){return/webos/i.test(n)}function vm(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function QD(n=pn()){return vm(n)&&!!window.navigator?.standalone}function $D(){return D4()&&document.documentMode===10}function nS(n=pn()){return vm(n)||J3(n)||tS(n)||eS(n)||/windows phone/i.test(n)||Z3(n)}function rS(n,e=[]){let t;switch(n){case"Browser":t=eA(pn());break;case"Worker":t=`${eA(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hl}/${r}`}class ZD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,l)=>{try{const f=e(a);u(f)}catch(f){l(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JD(n,e={}){return _a(n,"GET","/v2/passwordPolicy",ya(n,e))}const eO=6;class tO{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class nO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tA(this),this.idTokenSubscription=new tA(this),this.beforeStateQueue=new ZD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=la(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await f0(this,{idToken:e}),r=await oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_r(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,u=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await h0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(Vi(this));const t=e?Tn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JD(this),t=new tO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await WD(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&la(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Yu.create(this,[la(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(l,this,"internal-error"),l.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&OD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function xa(n){return Tn(n)}class tA{constructor(e){this.auth=e,this.observer=null,this.addObserver=k4(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let q0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rO(n){q0=n}function iS(n){return q0.loadJS(n)}function iO(){return q0.recaptchaEnterpriseScript}function aO(){return q0.gapiScript}function oO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sO{constructor(){this.enterprise=new uO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const lO="recaptcha-enterprise",aS="NO_RECAPTCHA";class cO{constructor(e){this.type=lO,this.auth=xa(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,l)=>{zD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new UD(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(f=>{l(f)})})}function i(a,u,l){const f=window.grecaptcha;QE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(aS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sO().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{r(this.auth).then(l=>{if(!t&&QE(window.grecaptcha))i(l,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=iO();f.length!==0&&(f+=l),iS(f).then(()=>{i(l,a,u)}).catch(h=>{u(h)})}}).catch(l=>{u(l)})})}}async function nA(n,e,t,r=!1,i=!1){const a=new cO(n);let u;if(i)u=aS;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const f=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const f=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:u}):Object.assign(l,{captchaResponse:u}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function d0(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await nA(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await nA(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)})}function fO(n,e){const t=Tv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Is(a,e??{}))return i;ui(i,"already-initialized")}return t.initialize({options:e})}function hO(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(la);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function dO(n,e,t){const r=xa(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=oS(e),{host:u,port:l}=pO(e),f=l===null?"":`:${l}`,h={url:`${a}//${u}${f}/`},p=Object.freeze({host:u,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Is(h,r.config.emulator)&&Is(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,fl(u)?(hw(`${a}//${u}${f}`),dw("Auth",!0)):gO()}function oS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pO(n){const e=oS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:rA(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:rA(u)}}}function rA(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class mm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ua("not implemented")}_getIdTokenResponse(e){return ua("not implemented")}_linkToIdToken(e,t){return ua("not implemented")}_getReauthenticationResolver(e){return ua("not implemented")}}async function vO(n,e){return _a(n,"POST","/v1/accounts:signUp",e)}async function mO(n,e){return Of(n,"POST","/v1/accounts:signInWithPassword",ya(n,e))}async function yO(n,e){return _a(n,"POST","/v1/accounts:sendOobCode",ya(n,e))}async function _O(n,e){return yO(n,e)}async function xO(n,e){return Of(n,"POST","/v1/accounts:signInWithEmailLink",ya(n,e))}async function EO(n,e){return Of(n,"POST","/v1/accounts:signInWithEmailLink",ya(n,e))}class mf extends mm{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new mf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d0(e,t,"signInWithPassword",mO);case"emailLink":return xO(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return d0(e,r,"signUpPassword",vO);case"emailLink":return EO(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Wu(n,e){return Of(n,"POST","/v1/accounts:signInWithIdp",ya(n,e))}const AO="http://localhost";class Bs extends mm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const u=new Bs(r,i);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Wu(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Wu(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wu(e,t)}buildRequest(){const e={requestUri:AO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_f(t)}return e}}function wO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TO(n){const e=Mc(Pc(n)).link,t=e?Mc(Pc(e)).deep_link_id:null,r=Mc(Pc(n)).deep_link_id;return(r?Mc(Pc(r)).link:null)||r||t||e||n}class ym{constructor(e){const t=Mc(Pc(e)),r=t.apiKey??null,i=t.oobCode??null,a=wO(t.mode??null);Re(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=TO(e);try{return new ym(t)}catch{return null}}}class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ym.parseLink(t);return Re(r,"argument-error"),mf._fromEmailAndCode(e,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nf extends sS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uo extends Nf{constructor(){super("facebook.com")}static credential(e){return Bs._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return uo.credential(e.oauthAccessToken)}catch{return null}}}uo.FACEBOOK_SIGN_IN_METHOD="facebook.com";uo.PROVIDER_ID="facebook.com";class lo extends Nf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bs._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return lo.credential(t,r)}catch{return null}}}lo.GOOGLE_SIGN_IN_METHOD="google.com";lo.PROVIDER_ID="google.com";class co extends Nf{constructor(){super("github.com")}static credential(e){return Bs._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return co.credential(e.oauthAccessToken)}catch{return null}}}co.GITHUB_SIGN_IN_METHOD="github.com";co.PROVIDER_ID="github.com";class fo extends Nf{constructor(){super("twitter.com")}static credential(e,t){return Bs._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fo.credential(t,r)}catch{return null}}}fo.TWITTER_SIGN_IN_METHOD="twitter.com";fo.PROVIDER_ID="twitter.com";async function uS(n,e){return Of(n,"POST","/v1/accounts:signUp",ya(n,e))}class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await oi._fromIdTokenResponse(e,r,i),u=iA(r);return new pa({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=iA(r);return new pa({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function iA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function SO(n){if(_r(n.app))return Promise.reject(Vi(n));const e=xa(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new pa({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await uS(e,{returnSecureToken:!0}),r=await pa._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class p0 extends ga{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,p0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new p0(e,t,r,i)}}function lS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?p0._fromErrorAndOperation(n,a,e,r):a})}async function IO(n,e,t=!1){const r=await vf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return pa._forOperation(n,"link",r)}async function CO(n,e,t=!1){const{auth:r}=n;if(_r(r.app))return Promise.reject(Vi(r));const i="reauthenticate";try{const a=await vf(n,lS(r,i,e,n),t);Re(a.idToken,r,"internal-error");const u=gm(a.idToken);Re(u,r,"internal-error");const{sub:l}=u;return Re(n.uid===l,r,"user-mismatch"),pa._forOperation(n,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ui(r,"user-mismatch"),a}}async function cS(n,e,t=!1){if(_r(n.app))return Promise.reject(Vi(n));const r="signIn",i=await lS(n,r,e),a=await pa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function bO(n,e){return cS(xa(n),e)}async function fS(n){const e=xa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RO(n,e,t){const r=xa(n);await d0(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_O)}async function DO(n,e,t){if(_r(n.app))return Promise.reject(Vi(n));const r=xa(n),u=await d0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uS).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&fS(n),f}),l=await pa._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(l.user),l}function OO(n,e,t){return _r(n.app)?Promise.reject(Vi(n)):bO(Tn(n),ml.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&fS(n),r})}function NO(n,e,t,r){return Tn(n).onIdTokenChanged(e,t,r)}function MO(n,e,t){return Tn(n).beforeAuthStateChanged(e,t)}function PO(n,e,t,r){return Tn(n).onAuthStateChanged(e,t,r)}const g0="__sak";class hS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(g0,"1"),this.storage.removeItem(g0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LO=1e3,kO=10;class dS extends hS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,l,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);$D()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},LO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dS.type="LOCAL";const BO=dS;class pS extends hS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pS.type="SESSION";const gS=pS;function VO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class X0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new X0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(u).map(async h=>h(t.origin,a)),f=await VO(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}X0.receivers=[];function _m(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class FO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,u;return new Promise((l,f)=>{const h=_m("",20);i.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(v){const _=v;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(_.data.response);break;default:clearTimeout(p),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function Fi(){return window}function UO(n){Fi().location.href=n}function vS(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function zO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jO(){return navigator?.serviceWorker?.controller||null}function HO(){return vS()?self:null}const mS="firebaseLocalStorageDb",GO=1,v0="firebaseLocalStorage",yS="fbase_key";class Mf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function K0(n,e){return n.transaction([v0],e?"readwrite":"readonly").objectStore(v0)}function qO(){const n=indexedDB.deleteDatabase(mS);return new Mf(n).toPromise()}function iv(){const n=indexedDB.open(mS,GO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(v0,{keyPath:yS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(v0)?e(r):(r.close(),await qO(),e(await iv()))})})}async function aA(n,e,t){const r=K0(n,!0).put({[yS]:e,value:t});return new Mf(r).toPromise()}async function XO(n,e){const t=K0(n,!1).get(e),r=await new Mf(t).toPromise();return r===void 0?null:r.value}function oA(n,e){const t=K0(n,!0).delete(e);return new Mf(t).toPromise()}const KO=800,YO=3;class _S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>YO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=X0._getInstance(HO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zO(),!this.activeServiceWorker)return;this.sender=new FO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await iv();return await aA(e,g0,"1"),await oA(e,g0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>aA(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>XO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=K0(i,!1).getAll();return new Mf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_S.type="LOCAL";const WO=_S;new Df(3e4,6e4);function QO(n,e){return e?la(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class xm extends mm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $O(n){return cS(n.auth,new xm(n),n.bypassAuthState)}function ZO(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),CO(t,new xm(n),n.bypassAuthState)}async function JO(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),IO(t,new xm(n),n.bypassAuthState)}class xS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:u,type:l}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $O;case"linkViaPopup":case"linkViaRedirect":return JO;case"reauthViaPopup":case"reauthViaRedirect":return ZO;default:ui(this.auth,"internal-error")}}resolve(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const e5=new Df(2e3,1e4);class ju extends xS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ju.currentPopupAction&&ju.currentPopupAction.cancel(),ju.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){da(this.filter.length===1,"Popup operations only handle one event");const e=_m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ju.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e5.get())};e()}}ju.currentPopupAction=null;const t5="pendingRedirect",Fd=new Map;class n5 extends xS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fd.get(this.auth._key());if(!e){try{const r=await r5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fd.set(this.auth._key(),e)}return this.bypassAuthState||Fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function r5(n,e){const t=o5(e),r=a5(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function i5(n,e){Fd.set(n._key(),e)}function a5(n){return la(n._redirectPersistence)}function o5(n){return Vd(t5,n.config.apiKey,n.name)}async function s5(n,e,t=!1){if(_r(n.app))return Promise.reject(Vi(n));const r=xa(n),i=QO(r,e),u=await new n5(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const u5=600*1e3;class l5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!c5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ES(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Bi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sA(e))}saveEventToCache(e){this.cachedEventUids.add(sA(e)),this.lastProcessedEventTime=Date.now()}}function sA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ES({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function c5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ES(n);default:return!1}}async function f5(n,e={}){return _a(n,"GET","/v1/projects",e)}const h5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d5=/^https?/;async function p5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await f5(n);for(const t of e)try{if(g5(t))return}catch{}ui(n,"unauthorized-domain")}function g5(n){const e=nv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!d5.test(t))return!1;if(h5.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const v5=new Df(3e4,6e4);function uA(){const n=Fi().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function m5(n){return new Promise((e,t)=>{function r(){uA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uA(),t(Bi(n,"network-request-failed"))},timeout:v5.get()})}if(Fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Fi().gapi?.load)r();else{const i=oO("iframefcb");return Fi()[i]=()=>{gapi.load?r():t(Bi(n,"network-request-failed"))},iS(`${aO()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw Ud=null,e})}let Ud=null;function y5(n){return Ud=Ud||m5(n),Ud}const _5=new Df(5e3,15e3),x5="__/auth/iframe",E5="emulator/auth/iframe",A5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T5(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pm(e,E5):`https://${n.config.authDomain}/${x5}`,r={apiKey:e.apiKey,appName:n.name,v:hl},i=w5.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${_f(r).slice(1)}`}async function S5(n){const e=await y5(n),t=Fi().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:T5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A5,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const u=Bi(n,"network-request-failed"),l=Fi().setTimeout(()=>{a(u)},_5.get());function f(){Fi().clearTimeout(l),i(r)}r.ping(f).then(f,()=>{a(u)})}))}const I5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C5=500,b5=600,R5="_blank",D5="http://localhost";class lA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O5(n,e,t,r=C5,i=b5){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const f={...I5,width:r.toString(),height:i.toString(),top:a,left:u},h=pn().toLowerCase();t&&(l=$3(h)?R5:t),W3(h)&&(e=e||D5,f.scrollbars="yes");const p=Object.entries(f).reduce((_,[x,A])=>`${_}${x}=${A},`,"");if(QD(h)&&l!=="_self")return N5(e||"",l),new lA(null);const v=window.open(e||"",l,p);Re(v,n,"popup-blocked");try{v.focus()}catch{}return new lA(v)}function N5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const M5="__/auth/handler",P5="emulator/auth/handler",L5=encodeURIComponent("fac");async function cA(n,e,t,r,i,a){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:hl,eventId:i};if(e instanceof sS){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",L4(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,v]of Object.entries({}))u[p]=v}if(e instanceof Nf){const p=e.getScopes().filter(v=>v!=="");p.length>0&&(u.scopes=p.join(","))}n.tenantId&&(u.tid=n.tenantId);const l=u;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const f=await n._getAppCheckToken(),h=f?`#${L5}=${encodeURIComponent(f)}`:"";return`${k5(n)}?${_f(l).slice(1)}${h}`}function k5({config:n}){return n.emulator?pm(n,P5):`https://${n.authDomain}/${M5}`}const pg="webStorageSupport";class B5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gS,this._completeRedirectFn=s5,this._overrideRedirectResult=i5}async _openPopup(e,t,r,i){da(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await cA(e,t,r,nv(),i);return O5(e,a,_m())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await cA(e,t,r,nv(),i);return UO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(da(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await S5(e),r=new l5(e);return t.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pg,{type:pg},i=>{const a=i?.[0]?.[pg];a!==void 0&&t(!!a),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=p5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nS()||Q3()||vm()}}const V5=B5;var fA="@firebase/auth",hA="1.12.0";class F5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function U5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z5(n){Qu(new Cs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:l}=r.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rS(n)},h=new nO(r,i,a,f);return hO(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qu(new Cs("auth-internal",e=>{const t=xa(e.getProvider("auth").getImmediate());return(r=>new F5(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vo(fA,hA,U5(n)),vo(fA,hA,"esm2020")}const j5=300,H5=fw("authIdTokenMaxAge")||j5;let dA=null;const G5=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>H5)return;const i=t?.token;dA!==i&&(dA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function q5(n=Ew()){const e=Tv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fO(n,{popupRedirectResolver:V5,persistence:[WO,BO,gS]}),r=fw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=G5(a.toString());MO(t,u,()=>u(t.currentUser)),NO(t,l=>u(l))}}const i=lw("auth");return i&&dO(t,`http://${i}`),t}function X5(){return document.getElementsByTagName("head")?.[0]??document}rO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Bi("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",X5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z5("Browser");const K5={apiKey:"AIzaSyDFJKoHEhMnpjt2bqTPpzru1qdA_rUOEdk",authDomain:"bitlkhzin-8d5c8.firebaseapp.com",projectId:"bitlkhzin-8d5c8",storageBucket:"bitlkhzin-8d5c8.firebasestorage.app",messagingSenderId:"862517672946",appId:"1:862517672946:web:66efa0f33cd67f0751896b"},AS=xw(K5),Br=pD(AS),_s=q5(AS);gD(Br).catch(n=>{n.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):n.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const Y5=({children:n,currentView:e="inventory",onNavigate:t})=>U.jsxs("div",{className:"layout-container",style:{display:"flex",minHeight:"100vh"},children:[U.jsxs("aside",{className:"glass-panel sidebar desktop-only",style:{width:"280px",margin:"20px",height:"calc(100vh - 40px)",position:"sticky",top:"20px",display:"flex",flexDirection:"column",padding:"24px"},children:[U.jsxs("div",{style:{marginBottom:"40px",display:"flex",alignItems:"center",gap:"12px"},children:[U.jsx("div",{style:{width:"40px",height:"40px",background:"hsl(var(--color-primary))",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:U.jsx(LC,{size:24,strokeWidth:2.5})}),U.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"800"},children:"Bit Khzin"})]}),U.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:"8px",flex:1},children:[U.jsx(_d,{icon:U.jsx(lx,{size:20}),label:"Inventory",active:e==="inventory",onClick:()=>t?.("inventory")}),U.jsx(_d,{icon:U.jsx(hx,{size:20}),label:"Shopping List",active:e==="todo",onClick:()=>t?.("todo")}),U.jsx(_d,{icon:U.jsx(fx,{size:20}),label:"Settings",active:e==="settings",onClick:()=>t?.("settings")})]}),U.jsx("div",{style:{paddingTop:"20px",borderTop:"1px solid var(--glass-border)"},children:U.jsx(_d,{icon:U.jsx(nw,{size:20}),label:"Sign Out",onClick:()=>_s.signOut(),active:!1})})]}),U.jsx("main",{className:"animate-fade-in",style:{flex:1,padding:"20px",maxWidth:"100%",paddingBottom:"90px"},children:n},e),U.jsx("div",{className:"mobile-nav-container mobile-only",style:{position:"fixed",bottom:0,zIndex:50},children:U.jsxs("ul",{className:"nav-list",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",width:"100%"},children:[U.jsx("li",{className:`nav-item ${e==="inventory"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:U.jsxs("button",{className:`nav-link ${e==="inventory"?"active":""}`,onClick:()=>t?.("inventory"),children:[U.jsx("span",{className:"icon",children:U.jsx(lx,{size:24})}),U.jsx("span",{className:"text",children:"Pantry"})]})}),U.jsx("li",{className:`nav-item ${e==="todo"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:U.jsxs("button",{className:`nav-link ${e==="todo"?"active":""}`,onClick:()=>t?.("todo"),children:[U.jsx("span",{className:"icon",children:U.jsx(hx,{size:24})}),U.jsx("span",{className:"text",children:"Shop"})]})}),U.jsx("li",{className:`nav-item ${e==="settings"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:U.jsxs("button",{className:`nav-link ${e==="settings"?"active":""}`,onClick:()=>t?.("settings"),children:[U.jsx("span",{className:"icon",children:U.jsx(fx,{size:24})}),U.jsx("span",{className:"text",children:"Settings"})]})}),U.jsx("div",{className:"indicator",style:{left:`calc(100% / 3 * ${e==="inventory"?0:e==="todo"?1:2} + 100% / 6 - 35px)`}})]})}),U.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-only { display: none !important; }
        }
        @media (min-width: 769px) {
          .mobile-only { display: none !important; }
        }
      `})]}),_d=({icon:n,label:e,active:t=!1,onClick:r,vertical:i=!1})=>U.jsxs("button",{onClick:r,style:{display:"flex",flexDirection:i?"column":"row",alignItems:"center",gap:i?"4px":"12px",padding:"12px 16px",width:i?"auto":"100%",borderRadius:"var(--radius-sm)",border:"none",background:!i&&t?"rgba(59, 130, 246, 0.1)":"transparent",color:t?"hsl(var(--color-primary))":"inherit",cursor:"pointer",fontWeight:600,transition:"all 0.2s",textAlign:i?"center":"left",fontSize:i?"0.75rem":"1rem",opacity:!t&&i?.6:1},children:[n,e&&U.jsx("span",{children:e})]}),Pf=({children:n,className:e="",hoverEffect:t=!1,style:r,...i})=>U.jsx("div",{className:`glass-panel ${t?"hover-lift":""} ${e}`,style:{padding:"24px",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:t?"pointer":"default",...r},...i,children:n}),Fr=({children:n,variant:e="primary",size:t="md",isLoading:r,className:i="",disabled:a,...u})=>{const l=()=>{switch(e){case"primary":return"btn-primary";case"secondary":return"btn-secondary";case"danger":return"btn-primary";case"ghost":return"btn-ghost";default:return"btn-primary"}},f=()=>{switch(t){case"sm":return{padding:"8px 16px",fontSize:"0.875rem"};case"lg":return{padding:"16px 32px",fontSize:"1.25rem"};default:return{}}},h=l();return U.jsxs("button",{className:`${h} tap-scale ${i}`,disabled:r||a,style:{...f(),opacity:r||a?.7:1,cursor:r||a?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",...u.style},...u,children:[r&&U.jsx("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:U.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"30 60"})}),n]})},wS=ye.createContext({user:null,userProfile:null,loading:!0,updateHousehold:async()=>{}}),Em=()=>ye.useContext(wS),W5=({children:n})=>{const[e,t]=ye.useState(null),[r,i]=ye.useState(null),[a,u]=ye.useState(!0);ye.useEffect(()=>{const f=PO(_s,async h=>{if(t(h),h){const p=ks(Br,"users",h.uid),v=hm(p,async _=>{if(_.exists())i(_.data());else{const x={uid:h.uid,email:h.email||"",householdId:h.uid};try{await YE(p,x),i(x)}catch(A){console.error("Error creating profile:",A)}}u(!1)});return()=>v()}else i(null),u(!1)});return()=>f()},[]);const l=async f=>{if(!e)return;const h=ks(Br,"users",e.uid);await YE(h,{householdId:f},{merge:!0})};return U.jsx(wS.Provider,{value:{user:e,userProfile:r,loading:a,updateHousehold:l},children:n})},TS=()=>{const[n,e]=ye.useState([]),{user:t,userProfile:r}=Em();return ye.useEffect(()=>{if(!t||!r?.householdId){e([]);return}const l=P3(Jc(Br,"shopping-list"),L3("householdId","==",r.householdId)),f=hm(l,h=>{const p=h.docs.map(v=>({id:v.id,...v.data()}));p.sort((v,_)=>_.createdAt-v.createdAt),e(p)},h=>{console.error("Error fetching shopping list:",h)});return()=>f()},[t,r?.householdId]),{todos:n,addTodo:async(l,f=1,h="Other")=>{if(!l.trim()||!t||!r?.householdId)return;const p=Date.now().toString(),v={id:p,text:l,completed:!1,quantity:f,category:h,createdAt:Date.now()};e(_=>[v,..._]);try{await tv(Jc(Br,"shopping-list"),{text:l,userId:t.uid,householdId:r.householdId,completed:!1,quantity:f,category:h,createdAt:Date.now()})}catch(_){console.error("Error adding item:",_),e(x=>x.filter(A=>A.id!==p)),alert("Failed to add item. Please check your connection.")}},toggleTodo:async l=>{const f=n.find(h=>h.id===l);if(f){e(h=>h.map(p=>p.id===l?{...p,completed:!p.completed}:p));try{await F3(ks(Br,"shopping-list",l),{completed:!f.completed})}catch(h){console.error("Error toggling item:",h),e(p=>p.map(v=>v.id===l?{...v,completed:f.completed}:v))}}},deleteTodo:async l=>{const f=n.find(h=>h.id===l);if(f){e(h=>h.filter(p=>p.id!==l));try{await U3(ks(Br,"shopping-list",l))}catch(h){console.error("Error deleting item:",h),e(p=>{const v=[...p,f];return v.sort((_,x)=>x.createdAt-_.createdAt),v}),alert("Failed to delete item. Check console for details.")}}}}},av=["Produce","Dairy","Bakery","Meat","Frozen","Pantry","Beverages","Snacks","Household","Other"],zd={milk:"Dairy",cheese:"Dairy",yogurt:"Dairy",butter:"Dairy",egg:"Dairy","7lib":"Dairy",lben:"Dairy",bayd:"Dairy",fermaj:"Dairy",danon:"Dairy",bread:"Bakery",bagel:"Bakery",sugar:"Bakery",flour:"Bakery",khobz:"Bakery",apple:"Produce",banana:"Produce",lettuce:"Produce",tomato:"Produce",onion:"Produce",potato:"Produce",maticha:"Produce",batata:"Produce",khei:"Produce",carrot:"Produce",khodra:"Produce",fakiya:"Produce",bsla:"Produce",touma:"Produce",na3na3:"Produce",rbi3:"Produce",chicken:"Meat",beef:"Meat",steak:"Meat",djaj:"Meat",l7em:"Meat",kefta:"Meat",saucisse:"Meat",hout:"Meat",water:"Beverages",juice:"Beverages",soda:"Beverages",coffee:"Beverages",tea:"Beverages",atay:"Beverages","9ahwa":"Beverages",monada:"Beverages",rice:"Pantry",pasta:"Pantry",oil:"Pantry",salt:"Pantry",pepper:"Pantry",zit:"Pantry","olive oil":"Pantry",skar:"Pantry",smida:"Pantry",semolina:"Pantry",laadas:"Pantry",lentils:"Pantry",homs:"Pantry",chickpeas:"Pantry",lubia:"Pantry",couscous:"Pantry"},Am=()=>{const[n,e]=ye.useState([]),[t,r]=ye.useState(!0),{user:i,userProfile:a}=Em();return ye.useEffect(()=>{if(!i||!a?.householdId){e([]),r(!1);return}const p=P3(Jc(Br,"inventory"),L3("householdId","==",a.householdId)),v=hm(p,_=>{const x=_.docs.map(A=>({id:A.id,...A.data()}));x.sort((A,S)=>S.createdAt-A.createdAt),e(x),r(!1)},_=>{console.error("Error fetching inventory:",_),r(!1)});return()=>v()},[i,a?.householdId]),{items:n,loading:t,addItem:async p=>{if(!i||!a?.householdId)return;let v=p.category;if(!v||v==="Other"){const A=p.name.toLowerCase();for(const[S,R]of Object.entries(zd))if(A.includes(S)){v=R;break}}const _=Date.now().toString(),x={...p,category:v,stockLevel:p.stockLevel||"full",id:_,userId:i.uid,householdId:a.householdId,createdAt:Date.now(),updatedAt:Date.now()};e(A=>[x,...A]);try{await tv(Jc(Br,"inventory"),{...p,category:v,stockLevel:p.stockLevel||"full",userId:i.uid,householdId:a.householdId,createdAt:Date.now(),updatedAt:Date.now()})}catch(A){throw console.error("Error adding item:",A),e(S=>S.filter(R=>R.id!==_)),A}},updateItem:async(p,v)=>{e(_=>_.map(x=>x.id===p?{...x,...v,updatedAt:Date.now()}:x));try{await F3(ks(Br,"inventory",p),{...v,updatedAt:Date.now()})}catch(_){console.error("Error updating item:",_)}},deleteItem:async p=>{const v=n.find(_=>_.id===p);if(v){e(_=>_.filter(x=>x.id!==p));try{await U3(ks(Br,"inventory",p))}catch(_){console.error("Error deleting item:",_),v&&e(x=>[...x,v].sort((A,S)=>S.createdAt-A.createdAt))}}},seedData:async()=>{if(!i||!a?.householdId)return;const p=[{name:"Khobz (Bread)",category:"Bakery",stockLevel:"full"},{name:"Atay (Tea)",category:"Beverages",stockLevel:"full"},{name:"Skar (Sugar)",category:"Pantry",stockLevel:"full"},{name:"Zit Zitoune",category:"Pantry",stockLevel:"full"},{name:"Farine & Smida",category:"Pantry",stockLevel:"full"},{name:"Laadas/Homs",category:"Pantry",stockLevel:"low"},{name:"Maticha (Tomato)",category:"Produce",stockLevel:"full"},{name:"Batata (Potato)",category:"Produce",stockLevel:"full"},{name:"Milk",category:"Dairy",stockLevel:"full"},{name:"Eggs",category:"Dairy",stockLevel:"low"}];try{const v=p.map(_=>tv(Jc(Br,"inventory"),{..._,location:"kitchen",quantity:1,value:0,userId:i.uid,householdId:a.householdId,createdAt:Date.now(),updatedAt:Date.now()}));await Promise.all(v)}catch(v){console.error("Error seeding data:",v)}}}},wm=({message:n,type:e="info",isVisible:t,onClose:r,duration:i=3e3})=>{if(ye.useEffect(()=>{if(t&&i>0){const l=setTimeout(()=>{r()},i);return()=>clearTimeout(l)}},[t,i,r]),!t)return null;const a=()=>{switch(e){case"success":return U.jsx(tw,{size:20,color:"#4ade80"});case"error":return U.jsx(ew,{size:20,color:"#f87171"});default:return U.jsx(KC,{size:20,color:"#60a5fa"})}},u=()=>{switch(e){case"success":return"rgba(74, 222, 128, 0.5)";case"error":return"rgba(248, 113, 113, 0.5)";default:return"rgba(96, 165, 250, 0.5)"}};return U.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:2e3,display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",background:"rgba(20, 20, 30, 0.95)",backdropFilter:"blur(12px)",border:`1px solid ${u()}`,borderRadius:"99px",color:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",maxWidth:"90%",width:"max-content",animation:"slideDownFade 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[a(),U.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:n}),U.jsx("button",{onClick:r,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"rgba(255,255,255,0.6)",display:"flex"},children:U.jsx(iw,{size:16})}),U.jsx("style",{children:`
                @keyframes slideDownFade {
                    from { opacity: 0; transform: translate(-50%, -20px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
            `})]})},Q5=({items:n,onAddItem:e,onDeleteItem:t})=>{const{addTodo:r}=TS(),{updateItem:i,seedData:a}=Am(),[u,l]=_C.useState({show:!1,msg:""}),f=v=>{r(v.name,1,v.category),l({show:!0,msg:`Added ${v.name} to Shopping List`}),setTimeout(()=>l({show:!1,msg:""}),3e3)},h=(v,_)=>{i(v.id,{stockLevel:_})},p=n.reduce((v,_)=>{const x=_.category||"Other";return v[x]||(v[x]=[]),v[x].push(_),v},{});return U.jsxs("div",{className:"animate-fade-in",style:{paddingBottom:"80px"},children:[U.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"16px"},children:U.jsxs(Fr,{onClick:e,className:"tap-scale",children:[U.jsx(rw,{size:18})," Add Item"]})}),n.length===0?U.jsxs("div",{style:{textAlign:"center",padding:"48px",opacity:.8},children:[U.jsx("p",{style:{marginBottom:"16px"},children:"Your pantry is empty."}),U.jsx(Fr,{onClick:()=>a&&a(),children:"Preload Essentials"})]}):U.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(p).map(([v,_],x)=>U.jsxs("div",{className:"animate-slide-up",style:{animationDelay:`${x*50}ms`},children:[U.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",paddingLeft:"8px",borderLeft:"4px solid hsl(var(--color-primary))"},children:U.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"hsl(var(--color-primary))",textTransform:"uppercase",letterSpacing:"0.05em"},children:v})}),U.jsx(Pf,{style:{padding:"0",overflow:"hidden"},children:_.map((A,S)=>U.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"16px",borderBottom:S!==_.length-1?"1px solid var(--glass-border)":"none",background:A.stockLevel==="low"?"rgba(239, 68, 68, 0.05)":"transparent"},children:[U.jsx("div",{style:{width:"20px",height:"20px",border:"2px solid var(--text-muted)",borderRadius:"4px",marginRight:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>f(A),title:"Add to Shopping List"}),U.jsx("div",{style:{flex:1},children:U.jsx("span",{style:{fontWeight:500,fontSize:"1rem"},children:A.name})}),U.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[U.jsx("button",{onClick:()=>h(A,"low"),className:"tap-scale",style:{background:"none",border:"none",fontSize:"0.8rem",fontWeight:"600",color:A.stockLevel==="low"?"#ef4444":"var(--text-muted)",cursor:"pointer",opacity:A.stockLevel==="low"?1:.5,transition:"all 0.2s"},children:"Low"}),U.jsx("div",{style:{width:"1px",height:"12px",background:"var(--text-muted)",opacity:.3}}),U.jsx("button",{onClick:()=>h(A,"full"),className:"tap-scale",style:{background:"none",border:"none",fontSize:"0.8rem",fontWeight:"600",color:A.stockLevel==="full"?"#10b981":"var(--text-muted)",cursor:"pointer",opacity:A.stockLevel==="full"?1:.5,transition:"all 0.2s"},children:"Full"}),U.jsx("button",{onClick:()=>t(A.id),style:{marginLeft:"12px",opacity:.3,background:"none",border:"none",cursor:"pointer"},children:U.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"currentColor",boxShadow:"0 6px 0 currentColor, 0 -6px 0 currentColor"}})})]})]},A.id))})]},v))}),U.jsx(wm,{isVisible:u.show,message:u.msg,type:"success",onClose:()=>l({show:!1,msg:""})})]})};function $5(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function Z5(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var J5=(function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),eN=(function(n){J5(e,n);function e(t,r){var i=this.constructor,a=n.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),$5(a,i.prototype),Z5(a),a}return e})(Error),tN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ur=(function(n){tN(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(eN),nN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ni=(function(n){nN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e})(ur),rN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ce=(function(n){rN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(ur),iN=(function(){function n(e){if(this.binarizer=e,e===null)throw new Ce("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var a=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(a))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n})(),aN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),An=(function(n){aN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(ur),oN=(function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n})(),St=(function(){function n(){}return n.arraycopy=function(e,t,r,i,a){for(;a--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n})(),sN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Tm=(function(n){sN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(ur),uN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pA=(function(n){uN(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Tm),lN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hn=(function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var a=t;a<r;a++)e[a]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ce("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new pA(t);if(r>e)throw new pA(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var a=lN(e),u=a.next();!u.done;u=a.next()){var l=u.value;i=31*i+l}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,a=new Int32Array(i);return St.arraycopy(e,t,a,0,i),a},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,a=e.length-1;i<=a;){var u=a+i>>1,l=r(t,e[u]);if(l>0)i=u+1;else if(l<0)a=u-1;else return u}return-i-1},n.numberComparator=function(e,t){return e-t},n})(),Ue=(function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),wn=(function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);St.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);for(var u=r.length;a===0;){if(++i===u)return t;a=r[i]}var l=i*32+Ue.numberOfTrailingZeros(a);return l>t?t:l},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);for(var u=r.length;a===0;){if(++i===u)return t;a=~r[i]}var l=i*32+Ue.numberOfTrailingZeros(a);return l>t?t:l},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ce;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,u=r;u<=i;u++){var l=u>r?0:e&31,f=u<i?31:t&31,h=(2<<f)-(1<<l);a[u]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ce;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),u=this.bits,l=i;l<=a;l++){var f=l>i?0:e&31,h=l<a?31:t&31,p=(2<<h)-(1<<f)&4294967295;if((u[l]&p)!==(r?p:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ce("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var a=0;a<i;a++){for(var u=0,l=0;l<8;l++)this.get(e)&&(u|=1<<7-l),e++;t[r+a]=u}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,a=0;a<r;a++){var u=i[a];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[t-a]=u}if(this.size!==r*32){for(var l=r*32-this.size,f=e[0]>>>l,a=1;a<r;a++){var h=e[a];f|=h<<32-l,e[a-1]=f,f=h>>>l}e[r-1]=f}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&hn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+hn.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n})(),ov;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ASSUME_GS1=7]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ov||(ov={}));const kt=ov;var cN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),fe=(function(n){cN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(ur),fN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(dt||(dt={}));var fn=(function(){function n(e,t,r){for(var i,a,u=[],l=3;l<arguments.length;l++)u[l-3]=arguments[l];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=u,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var f=this.values,h=0,p=f.length;h!==p;h++){var v=f[h];n.VALUES_TO_ECI.set(v,this)}try{for(var _=fN(u),x=_.next();!x.done;x=_.next()){var A=x.value;n.NAME_TO_ECI.set(A,this)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new fe("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new fe("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new fe("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(dt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(dt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(dt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(dt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(dt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(dt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(dt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(dt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(dt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(dt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(dt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(dt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(dt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(dt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(dt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(dt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(dt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(dt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(dt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(dt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(dt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(dt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(dt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(dt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(dt.Big5,28,"Big5"),n.GB18030=new n(dt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(dt.EUC_KR,30,"EUC_KR","EUC-KR"),n})(),hN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),jd=(function(n){hN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(ur),jr=(function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof fn?e:fn.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",a=0,u=e.length;a<u;a++){var l=e[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(fn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new jd("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(fn.UTF8)||e.equals(fn.ISO8859_1)||e.equals(fn.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)},n})(),$e=(function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return jr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(kt.CHARACTER_SET)!==void 0)return t.get(kt.CHARACTER_SET).toString();for(var r=e.length,i=!0,a=!0,u=!0,l=0,f=0,h=0,p=0,v=0,_=0,x=0,A=0,S=0,R=0,L=0,M=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,B=0;B<r&&(i||a||u);B++){var G=e[B]&255;u&&(l>0?(G&128)===0?u=!1:l--:(G&128)!==0&&((G&64)===0?u=!1:(l++,(G&32)===0?f++:(l++,(G&16)===0?h++:(l++,(G&8)===0?p++:u=!1))))),i&&(G>127&&G<160?i=!1:G>159&&(G<192||G===215||G===247)&&L++),a&&(v>0?G<64||G===127||G>252?a=!1:v--:G===128||G===160||G>239?a=!1:G>160&&G<224?(_++,A=0,x++,x>S&&(S=x)):G>127?(v++,x=0,A++,A>R&&(R=A)):(x=0,A=0))}return u&&l>0&&(u=!1),a&&v>0&&(a=!1),u&&(M||f+h+p>0)?n.UTF8:a&&(n.ASSUME_SHIFT_JIS||S>=3||R>=3)?n.SHIFT_JIS:i&&a?S===2&&_===2||L*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:a?n.SHIFT_JIS:u?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function a(l,f,h,p,v,_){if(l==="%%")return"%";if(t[++i]!==void 0){l=p?parseInt(p.substr(1)):void 0;var x=v?parseInt(v.substr(1)):void 0,A;switch(_){case"s":A=t[i];break;case"c":A=t[i][0];break;case"f":A=parseFloat(t[i]).toFixed(l);break;case"p":A=parseFloat(t[i]).toPrecision(l);break;case"e":A=parseFloat(t[i]).toExponential(l);break;case"x":A=parseInt(t[i]).toString(x||16);break;case"d":A=parseFloat(parseInt(t[i],x||10).toPrecision(l)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(x);for(var S=parseInt(h),R=h&&h[0]+""=="0"?"0":" ";A.length<S;)A=f!==void 0?A+R:R+A;return A}}var u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,a)},n.getBytes=function(e,t){return jr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=fn.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=fn.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=fn.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n})(),Ve=(function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=$e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n})(),zi=(function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ce("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),a=0;a<t;a++)for(var u=e[a],l=0;l<r;l++)u[l]&&i.set(l,a);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ce("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,u=0,l=-1,f=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>u){if(l===-1)l=a-u;else if(a-u!==l)throw new Ce("row lengths do not match");u=a,f++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[a]=!1,a++;else throw new Ce("illegal character encountered: "+e.substring(h));if(a>u){if(l===-1)l=a-u;else if(a-u!==l)throw new Ce("row lengths do not match");f++}for(var p=new n(l,f),v=0;v<a;v++)i[v]&&p.set(Math.floor(v%l),Math.floor(v/l));return p},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ce("input matrix dimensions do not match");for(var t=new wn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,a=0,u=this.height;a<u;a++)for(var l=a*r,f=e.getRow(a,t).getBitArray(),h=0;h<r;h++)i[l+h]^=f[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ce("Left and top must be nonnegative");if(i<1||r<1)throw new Ce("Height and width must be at least 1");var a=e+r,u=t+i;if(u>this.height||a>this.width)throw new Ce("The region must fit inside the matrix");for(var l=this.rowSize,f=this.bits,h=t;h<u;h++)for(var p=h*l,v=e;v<a;v++)f[p+Math.floor(v/32)]|=1<<(v&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new wn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,a=e*r,u=0;u<r;u++)t.setBulk(u*32,i[a+u]);return t},n.prototype.setRow=function(e,t){St.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new wn(e),i=new wn(e),a=0,u=Math.floor((t+1)/2);a<u;a++)r=this.getRow(a,r),i=this.getRow(t-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,a=e,u=t,l=-1,f=-1,h=0;h<t;h++)for(var p=0;p<r;p++){var v=i[h*r+p];if(v!==0){if(h<u&&(u=h),h>f&&(f=h),p*32<a){for(var _=0;(v<<31-_&4294967295)===0;)_++;p*32+_<a&&(a=p*32+_)}if(p*32+31>l){for(var _=31;!(v>>>_);)_--;p*32+_>l&&(l=p*32+_)}}}return l<a||f<u?null:Int32Array.from([a,u,l-a+1,f-u+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,a=r%e*32,u=t[r],l=0;(u<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),a=Math.floor(r%e)*32,u=t[r],l=31;!(u>>>l);)l--;return a+=l,Int32Array.from([a,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&hn.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+hn.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new Ve,a=0,u=this.height;a<u;a++){for(var l=0,f=this.width;l<f;l++)i.append(this.get(l,a)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n})(),dN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),re=(function(n){dN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(ur),pN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gN=(function(n){pN(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new wn(a):r.clear(),this.initArrays(a);for(var u=i.getRow(t,this.luminances),l=this.buckets,f=0;f<a;f++)l[(u[f]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(l);if(a<3)for(var f=0;f<a;f++)(u[f]&255)<h&&r.set(f);else for(var p=u[0]&255,v=u[1]&255,f=1;f<a-1;f++){var _=u[f+1]&255;(v*4-p-_)/2<h&&r.set(f),p=v,v=_}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),a=new zi(r,i);this.initArrays(r);for(var u=this.buckets,l=1;l<5;l++)for(var f=Math.floor(i*l/5),h=t.getRow(f,this.luminances),p=Math.floor(r*4/5),v=Math.floor(r/5);v<p;v++){var _=h[v]&255;u[_>>e.LUMINANCE_SHIFT]++}for(var x=e.estimateBlackPoint(u),A=t.getMatrix(),l=0;l<i;l++)for(var S=l*r,v=0;v<r;v++){var _=A[S+v]&255;_<x&&a.set(v,l)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,a=0,u=0,l=0;l<r;l++)t[l]>u&&(a=l,u=t[l]),t[l]>i&&(i=t[l]);for(var f=0,h=0,l=0;l<r;l++){var p=l-a,v=t[l]*p*p;v>h&&(f=l,h=v)}if(a>f){var _=a;a=f,f=_}if(f-a<=r/16)throw new re;for(var x=f-1,A=-1,l=f-1;l>a;l--){var S=l-a,v=S*S*(f-l)*(i-t[l]);v>A&&(x=l,A=v)}return x<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(oN),vN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mN=(function(n){vN(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),u=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&u++;var l=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&l++;var f=e.calculateBlackPoints(a,u,l,r,i),h=new zi(r,i);e.calculateThresholdForBlock(a,u,l,r,i,f,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,a,u,l,f){for(var h=u-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,v=0;v<i;v++){var _=v<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var x=e.cap(v,2,i-3),A=0;A<r;A++){var S=A<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var R=e.cap(A,2,r-3),L=0,M=-2;M<=2;M++){var B=l[x+M];L+=B[R-2]+B[R-1]+B[R]+B[R+1]+B[R+2]}var G=L/25;e.thresholdBlock(t,S,_,G,a,f)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,a,u,l){for(var f=0,h=i*u+r;f<e.BLOCK_SIZE;f++,h+=u)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&l.set(r+p,i+f)},e.calculateBlackPoints=function(t,r,i,a,u){for(var l=u-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(r);var v=p<<e.BLOCK_SIZE_POWER;v>l&&(v=l);for(var _=0;_<r;_++){var x=_<<e.BLOCK_SIZE_POWER;x>f&&(x=f);for(var A=0,S=255,R=0,L=0,M=v*a+x;L<e.BLOCK_SIZE;L++,M+=a){for(var B=0;B<e.BLOCK_SIZE;B++){var G=t[M+B]&255;A+=G,G<S&&(S=G),G>R&&(R=G)}if(R-S>e.MIN_DYNAMIC_RANGE)for(L++,M+=a;L<e.BLOCK_SIZE;L++,M+=a)for(var B=0;B<e.BLOCK_SIZE;B++)A+=t[M+B]&255}var $=A>>e.BLOCK_SIZE_POWER*2;if(R-S<=e.MIN_DYNAMIC_RANGE&&($=S/2,p>0&&_>0)){var J=(h[p-1][_]+2*h[p][_-1]+h[p-1][_-1])/4;S<J&&($=J)}h[p][_]=$}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(gN),Y0=(function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new jd("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new jd("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new jd("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ve,r=0;r<this.height;r++){for(var i=this.getRow(r,e),a=0;a<this.width;a++){var u=i[a]&255,l=void 0;u<64?l="#":u<128?l="+":u<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()},n})(),yN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Sm=(function(n){yN(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),a=this.getWidth(),u=0;u<a;u++)i[u]=255-(i[u]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),a=0;a<r;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,a){return new e(this.delegate.crop(t,r,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Y0),_N=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xN=(function(n){_N(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(r.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){var a=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var u=0,l=0,f=t.length;u<f;u+=4,l++){var h=void 0,p=t[u+3];if(p===0)h=255;else{var v=t[u],_=t[u+1],x=t[u+2];h=306*v+601*_+117*x+512>>10}a[l]=h}else for(var u=0,l=0,A=t.length;u<A;u+=4,l++){var h=void 0,p=t[u+3];if(p===0)h=255;else{var v=t[u],_=t[u+1],x=t[u+2];h=306*v+601*_+117*x+512>>10}a[l]=255-h}return a},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return n.prototype.crop.call(this,t,r,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,u=this.canvas.width,l=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*l),h=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*l);return r.width=f,r.height=h,i.translate(f/2,h/2),i.rotate(a),i.drawImage(this.canvas,u/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Sm(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Y0),EN=(function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n})(),Kn=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function l(p){try{h(r.next(p))}catch(v){u(v)}}function f(p){try{h(r.throw(p))}catch(v){u(v)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})},Yn=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},AN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yl=(function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Kn(this,void 0,void 0,function(){var e,t,r,i,a,u,l,f,h,p,v,_;return Yn(this,function(x){switch(x.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=x.sent(),t=[];try{for(r=AN(e),i=r.next();!i.done;i=r.next())a=i.value,u=a.kind==="video"?"videoinput":a.kind,u==="videoinput"&&(l=a.deviceId||a.id,f=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:l,label:f,kind:u,groupId:h},t.push(p))}catch(A){v={error:A}}finally{try{i&&!i.done&&(_=r.return)&&_.call(r)}finally{if(v)throw v.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Kn(this,void 0,void 0,function(){var e;return Yn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new EN(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Kn(this,void 0,void 0,function(){var t;return Yn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Kn(this,void 0,void 0,function(){return Yn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Kn(this,void 0,void 0,function(){var r,i;return Yn(this,function(a){switch(a.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Kn(this,void 0,void 0,function(){var r;return Yn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Kn(this,void 0,void 0,function(){var r,i;return Yn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=a.sent(),[4,this.decodeOnce(r)];case 2:return i=a.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Kn(this,void 0,void 0,function(){return Yn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Kn(this,void 0,void 0,function(){var i,a;return Yn(this,function(u){switch(u.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,r)];case 1:return[2,u.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Kn(this,void 0,void 0,function(){var i;return Yn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,a.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Kn(this,void 0,void 0,function(){var i;return Yn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,a.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Kn(this,void 0,void 0,function(){var r;return Yn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Kn(this,void 0,void 0,function(){return Yn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new ni("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new ni("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ni("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ni("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new ni("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new ni("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ni("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ni("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ni("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Kn(this,void 0,void 0,function(){return Yn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Kn(this,void 0,void 0,function(){return Yn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var a=function(u,l){if(i._stopAsyncDecode){l(new re("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(e);u(f)}catch(_){var h=t&&_ instanceof re,p=_ instanceof An||_ instanceof fe,v=p&&r;if(h||v)return setTimeout(a,i._timeBetweenDecodingAttempts,u,l);l(_)}};return new Promise(function(u,l){return a(u,l)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var a=r.decode(e);t(a,null),setTimeout(i,r.timeBetweenScansMillis)}catch(f){t(null,f);var u=f instanceof An||f instanceof fe,l=f instanceof re;(u||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),r=new xN(t),i=new mN(r);return new iN(i)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n})(),Hn=(function(){function n(e,t,r,i,a,u){r===void 0&&(r=t==null?0:8*t.length),u===void 0&&(u=St.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=u,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,u==null?this.timestamp=St.currentTimeMillis():this.timestamp=u}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);St.arraycopy(t,0,r,0,t.length),St.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n})(),sv;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(sv||(sv={}));const Ie=sv;var uv;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(uv||(uv={}));const Ln=uv;var W0=(function(){function n(e,t,r,i,a,u){a===void 0&&(a=-1),u===void 0&&(u=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n})(),Uc=(function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n})(),Eo=(function(){function n(e,t){if(t.length===0)throw new Ce;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,a=t.length;i!==a;i++){var u=t[i];r=Uc.addOrSubtract(r,u)}return r}r=t[0];for(var l=t.length,f=this.field,i=1;i<l;i++)r=Uc.addOrSubtract(f.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),u=r.length-t.length;St.arraycopy(r,0,a,0,u);for(var l=u;l<r.length;l++)a[l]=Uc.addOrSubtract(t[l-u],r[l]);return new n(this.field,a)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,u=new Int32Array(r+a-1),l=this.field,f=0;f<r;f++)for(var h=t[f],p=0;p<a;p++)u[f+p]=Uc.addOrSubtract(u[f+p],l.multiply(h,i[p]));return new n(l,u)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),a=this.coefficients,u=0;u<t;u++)i[u]=r.multiply(a[u],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,a=new Int32Array(i+e),u=this.field,l=0;l<i;l++)a[l]=u.multiply(r[l],t);return new n(u,a)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ce("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),u=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var l=i.getDegree()-e.getDegree(),f=t.multiply(i.getCoefficient(i.getDegree()),u),h=e.multiplyByMonomial(l,f),p=t.buildMonomial(l,f);r=r.addOrSubtract(p),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n})(),wN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),SS=(function(n){wN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(ur),TN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),or=(function(n){TN(e,n);function e(t,r,i){var a=n.call(this)||this;a.primitive=t,a.size=r,a.generatorBase=i;for(var u=new Int32Array(r),l=1,f=0;f<r;f++)u[f]=l,l*=2,l>=r&&(l^=t,l&=r-1);a.expTable=u;for(var h=new Int32Array(r),f=0;f<r-1;f++)h[u[f]]=f;return a.logTable=h,a.zero=new Eo(a,Int32Array.from([0])),a.one=new Eo(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ce;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Eo(this,i)},e.prototype.inverse=function(t){if(t===0)throw new SS;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Ue.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Uc),SN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),xd=(function(n){SN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(ur),IN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Lf=(function(n){IN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(ur),Q0=(function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Eo(r,e),a=new Int32Array(t),u=!0,l=0;l<t;l++){var f=i.evaluateAt(r.exp(l+r.getGeneratorBase()));a[a.length-1-l]=f,f!==0&&(u=!1)}if(!u)for(var h=new Eo(r,a),p=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),v=p[0],_=p[1],x=this.findErrorLocations(v),A=this.findErrorMagnitudes(_,x),l=0;l<x.length;l++){var S=e.length-1-r.log(x[l]);if(S<0)throw new xd("Bad error location");e[S]=or.addOrSubtract(e[S],A[l])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,u=e,l=t,f=a.getZero(),h=a.getOne();l.getDegree()>=(r/2|0);){var p=u,v=f;if(u=l,f=h,u.isZero())throw new xd("r_{i-1} was zero");l=p;for(var _=a.getZero(),x=u.getCoefficient(u.getDegree()),A=a.inverse(x);l.getDegree()>=u.getDegree()&&!l.isZero();){var S=l.getDegree()-u.getDegree(),R=a.multiply(l.getCoefficient(l.getDegree()),A);_=_.addOrSubtract(a.buildMonomial(S,R)),l=l.addOrSubtract(u.multiplyByMonomial(S,R))}if(h=_.multiply(f).addOrSubtract(v),l.getDegree()>=u.getDegree())throw new Lf("Division algorithm failed to reduce polynomial?")}var L=h.getCoefficient(0);if(L===0)throw new xd("sigmaTilde(0) was zero");var M=a.inverse(L),B=h.multiplyScalar(M),G=l.multiplyScalar(M);return[B,G]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,a=this.field,u=1;u<a.getSize()&&i<t;u++)e.evaluateAt(u)===0&&(r[i]=a.inverse(u),i++);if(i!==t)throw new xd("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),a=this.field,u=0;u<r;u++){for(var l=a.inverse(t[u]),f=1,h=0;h<r;h++)if(u!==h){var p=a.multiply(t[h],l),v=(p&1)===0?p|1:p&-2;f=a.multiply(f,v)}i[u]=a.multiply(e.evaluateAt(l),a.inverse(f)),a.getGeneratorBase()!==0&&(i[u]=a.multiply(i[u],l))}return i},n})(),On;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(On||(On={}));var gA=(function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),a=n.convertBoolArrayToByteArray(i),u=n.getEncodedData(i),l=new W0(a,u,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=On.UPPER,i=On.UPPER,a="",u=0;u<t;)if(i===On.BINARY){if(t-u<5)break;var l=n.readCode(e,u,5);if(u+=5,l===0){if(t-u<11)break;l=n.readCode(e,u,11)+31,u+=11}for(var f=0;f<l;f++){if(t-u<8){u=t;break}var h=n.readCode(e,u,8);a+=$e.castAsNonUtf8Char(h),u+=8}i=r}else{var p=i===On.DIGIT?4:5;if(t-u<p)break;var h=n.readCode(e,u,p);u+=p;var v=n.getCharacter(i,h);v.startsWith("CTRL_")?(r=i,i=n.getTable(v.charAt(5)),v.charAt(6)==="L"&&(r=i)):(a+=v,i=r)}return a},n.getTable=function(e){switch(e){case"L":return On.LOWER;case"P":return On.PUNCT;case"M":return On.MIXED;case"D":return On.DIGIT;case"B":return On.BINARY;default:return On.UPPER}},n.getCharacter=function(e,t){switch(e){case On.UPPER:return n.UPPER_TABLE[t];case On.LOWER:return n.LOWER_TABLE[t];case On.MIXED:return n.MIXED_TABLE[t];case On.PUNCT:return n.PUNCT_TABLE[t];case On.DIGIT:return n.DIGIT_TABLE[t];default:throw new Lf("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=or.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=or.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=or.AZTEC_DATA_10):(r=12,t=or.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new fe;for(var u=e.length%r,l=new Int32Array(a),f=0;f<a;f++,u+=r)l[f]=n.readCode(e,u,r);try{var h=new Q0(t);h.decode(l,a-i)}catch(R){throw new fe(R)}for(var p=(1<<r)-1,v=0,f=0;f<i;f++){var _=l[f];if(_===0||_===p)throw new fe;(_===1||_===p-1)&&v++}for(var x=new Array(i*r-v),A=0,f=0;f<i;f++){var _=l[f];if(_===1||_===p-1)x.fill(_>1,A,A+r-1),A+=r-1;else for(var S=r-1;S>=0;--S)x[A++]=(_&1<<S)!==0}return x},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,a=new Int32Array(i),u=new Array(this.totalBitsInLayer(r,t));if(t)for(var l=0;l<a.length;l++)a[l]=l;else for(var f=i+1+2*Ue.truncDivision(Ue.truncDivision(i,2)-1,15),h=i/2,p=Ue.truncDivision(f,2),l=0;l<h;l++){var v=l+Ue.truncDivision(l,15);a[h-l-1]=p-v-1,a[h+l]=p+v+1}for(var l=0,_=0;l<r;l++){for(var x=(r-l)*4+(t?9:12),A=l*2,S=i-1-A,R=0;R<x;R++)for(var L=R*2,M=0;M<2;M++)u[_+L+M]=e.get(a[A+M],a[A+R]),u[_+2*x+L+M]=e.get(a[A+R],a[S-M]),u[_+4*x+L+M]=e.get(a[S-M],a[S-R]),u[_+6*x+L+M]=e.get(a[S-R],a[A+M]);_+=x*8}return u},n.readCode=function(e,t,r){for(var i=0,a=t;a<t+r;a++)i<<=1,e[a]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n})(),nt=(function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var a=e-r,u=t-i;return Math.sqrt(a*a+u*u)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var a=e[r];t+=a}return t},n})(),lv=(function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n})(),xe=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*lv.floatToIntBits(this.x)+lv.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,u,l;if(r>=t&&r>=i?(u=e[0],a=e[1],l=e[2]):i>=r&&i>=t?(u=e[1],a=e[0],l=e[2]):(u=e[2],a=e[0],l=e[1]),this.crossProductZ(a,u,l)<0){var f=a;a=l,l=f}e[0]=a,e[1]=u,e[2]=l},n.distance=function(e,t){return nt.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,a=t.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)},n})(),Im=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),CN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bN=(function(n){CN(e,n);function e(t,r,i,a,u){var l=n.call(this,t,r)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=u,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Im),cv=(function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,a=!1,u=!0,l=!1,f=!1,h=!1,p=!1,v=!1,_=this.width,x=this.height;u;){u=!1;for(var A=!0;(A||!f)&&t<_;)A=this.containsBlackPoint(r,i,t,!1),A?(t++,u=!0,f=!0):f||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!h)&&i<x;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,u=!0,h=!0):h||i++;if(i>=x){a=!0;break}for(var R=!0;(R||!p)&&e>=0;)R=this.containsBlackPoint(r,i,e,!1),R?(e--,u=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var L=!0;(L||!v)&&r>=0;)L=this.containsBlackPoint(e,t,r,!0),L?(r--,u=!0,v=!0):v||r--;if(r<0){a=!0;break}u&&(l=!0)}if(!a&&l){for(var M=t-e,B=null,G=1;B===null&&G<M;G++)B=this.getBlackPointOnSegment(e,i-G,e+G,i);if(B==null)throw new re;for(var $=null,G=1;$===null&&G<M;G++)$=this.getBlackPointOnSegment(e,r+G,e+G,r);if($==null)throw new re;for(var J=null,G=1;J===null&&G<M;G++)J=this.getBlackPointOnSegment(t,r+G,t-G,r);if(J==null)throw new re;for(var C=null,G=1;C===null&&G<M;G++)C=this.getBlackPointOnSegment(t,i-G,t-G,i);if(C==null)throw new re;return this.centerEdges(C,B,J,$)}else throw new re},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var a=nt.round(nt.distance(e,t,r,i)),u=(r-e)/a,l=(i-t)/a,f=this.image,h=0;h<a;h++){var p=nt.round(e+h*u),v=nt.round(t+h*l);if(f.get(p,v))return new xe(p,v)}return null},n.prototype.centerEdges=function(e,t,r,i){var a=e.getX(),u=e.getY(),l=t.getX(),f=t.getY(),h=r.getX(),p=r.getY(),v=i.getX(),_=i.getY(),x=n.CORR;return a<this.width/2?[new xe(v-x,_+x),new xe(l+x,f+x),new xe(h-x,p-x),new xe(a+x,u-x)]:[new xe(v+x,_+x),new xe(l+x,f-x),new xe(h-x,p+x),new xe(a-x,u-x)]},n.prototype.containsBlackPoint=function(e,t,r,i){var a=this.image;if(i){for(var u=e;u<=t;u++)if(a.get(u,r))return!0}else for(var l=e;l<=t;l++)if(a.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n})(),vA=(function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),a=!0,u=0;u<t.length&&a;u+=2){var l=Math.floor(t[u]),f=Math.floor(t[u+1]);if(l<-1||l>r||f<-1||f>i)throw new re;a=!1,l===-1?(t[u]=0,a=!0):l===r&&(t[u]=r-1,a=!0),f===-1?(t[u+1]=0,a=!0):f===i&&(t[u+1]=i-1,a=!0)}a=!0;for(var u=t.length-2;u>=0&&a;u-=2){var l=Math.floor(t[u]),f=Math.floor(t[u+1]);if(l<-1||l>r||f<-1||f>i)throw new re;a=!1,l===-1?(t[u]=0,a=!0):l===r&&(t[u]=r-1,a=!0),f===-1?(t[u+1]=0,a=!0):f===i&&(t[u+1]=i-1,a=!0)}},n})(),IS=(function(){function n(e,t,r,i,a,u,l,f,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=a,this.a32=u,this.a13=l,this.a23=f,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,a,u,l,f,h,p,v,_,x,A,S,R){var L=n.quadrilateralToSquare(e,t,r,i,a,u,l,f),M=n.squareToQuadrilateral(h,p,v,_,x,A,S,R);return M.times(L)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,a=this.a13,u=this.a21,l=this.a22,f=this.a23,h=this.a31,p=this.a32,v=this.a33,_=0;_<t;_+=2){var x=e[_],A=e[_+1],S=a*x+f*A+v;e[_]=(r*x+u*A+h)/S,e[_+1]=(i*x+l*A+p)/S}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,a=this.a13,u=this.a21,l=this.a22,f=this.a23,h=this.a31,p=this.a32,v=this.a33,_=e.length,x=0;x<_;x++){var A=e[x],S=t[x],R=a*A+f*S+v;e[x]=(r*A+u*S+h)/R,t[x]=(i*A+l*S+p)/R}},n.squareToQuadrilateral=function(e,t,r,i,a,u,l,f){var h=e-r+a-l,p=t-i+u-f;if(h===0&&p===0)return new n(r-e,a-r,e,i-t,u-i,t,0,0,1);var v=r-a,_=l-a,x=i-u,A=f-u,S=v*A-_*x,R=(h*A-_*p)/S,L=(v*p-h*x)/S;return new n(r-e+R*r,l-e+L*l,e,i-t+R*i,f-t+L*f,t,R,L,1)},n.quadrilateralToSquare=function(e,t,r,i,a,u,l,f){return n.squareToQuadrilateral(e,t,r,i,a,u,l,f).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n})(),RN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),DN=(function(n){RN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,a,u,l,f,h,p,v,_,x,A,S,R,L,M,B,G){var $=IS.quadrilateralToQuadrilateral(a,u,l,f,h,p,v,_,x,A,S,R,L,M,B,G);return this.sampleGridWithTransform(t,r,i,$)},e.prototype.sampleGridWithTransform=function(t,r,i,a){if(r<=0||i<=0)throw new re;for(var u=new zi(r,i),l=new Float32Array(2*r),f=0;f<i;f++){for(var h=l.length,p=f+.5,v=0;v<h;v+=2)l[v]=v/2+.5,l[v+1]=p;a.transformPoints(l),vA.checkAndNudgePoints(t,l);try{for(var v=0;v<h;v+=2)t.get(Math.floor(l[v]),Math.floor(l[v+1]))&&u.set(v/2,f)}catch{throw new re}}return u},e})(vA),Cm=(function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new DN,n})(),ar=(function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new xe(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n})(),ON=(function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),u=this.getMatrixCornerPoints(r);return new bN(a,u,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new re;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,a=0;a<4;a++){var u=r[(this.shift+a)%4];this.compact?(i<<=7,i+=u>>1&127):(i<<=10,i+=(u>>2&992)+(u>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(a,u,l){var f=(a>>t-2<<1)+(a&1);r=(r<<3)+f}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(Ue.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new re},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var a=r-i,u=new Int32Array(r),l=r-1;l>=0;--l)u[l]=e&15,e>>=4;try{var f=new Q0(or.AZTEC_PARAM);f.decode(u,a)}catch{throw new re}for(var h=0,l=0;l<i;l++)h=(h<<4)+u[l];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,a=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(t,u,1,-1),f=this.getFirstDifferent(r,u,1,1),h=this.getFirstDifferent(i,u,-1,1),p=this.getFirstDifferent(a,u,-1,-1);if(this.nbCenterLayers>2){var v=this.distancePoint(p,l)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(v<.75||v>1.25||!this.isWhiteOrBlackRectangle(l,f,h,p))break}t=l,r=f,i=h,a=p,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;var _=new xe(t.getX()+.5,t.getY()-.5),x=new xe(r.getX()+.5,r.getY()+.5),A=new xe(i.getX()-.5,i.getY()+.5),S=new xe(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,x,A,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var a=new cv(this.image).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{var u=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new ar(u+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ar(u+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ar(u-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ar(u-7,l-7),!1,-1,-1).toResultPoint()}var f=nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var a=new cv(this.image,15,f,h).detect();e=a[0],t=a[1],r=a[2],i=a[3]}catch{e=this.getFirstDifferent(new ar(f+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ar(f+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new ar(f-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ar(f-7,h-7),!1,-1,-1).toResultPoint()}return f=nt.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=nt.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new ar(f,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,a){var u=Cm.getInstance(),l=this.getDimension(),f=l/2-this.nbCenterLayers,h=l/2+this.nbCenterLayers;return u.sampleGrid(e,l,l,f,f,h,f,h,h,f,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,a=this.distanceResultPoint(e,t),u=a/r,l=e.getX(),f=e.getY(),h=u*(t.getX()-e.getX())/a,p=u*(t.getY()-e.getY())/a,v=0;v<r;v++)this.image.get(nt.round(l+v*h),nt.round(f+v*p))&&(i|=1<<r-v-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var a=3;e=new ar(e.getX()-a,e.getY()+a),t=new ar(t.getX()-a,t.getY()-a),r=new ar(r.getX()+a,r.getY()-a),i=new ar(i.getX()+a,i.getY()+a);var u=this.getColor(i,e);if(u===0)return!1;var l=this.getColor(e,t);return l!==u||(l=this.getColor(t,r),l!==u)?!1:(l=this.getColor(r,i),l===u)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,a=(t.getY()-e.getY())/r,u=0,l=e.getX(),f=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(r),v=0;v<p;v++)l+=i,f+=a,this.image.get(nt.round(l),nt.round(f))!==h&&u++;var _=u/r;return _>.1&&_<.9?0:_<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var a=e.getX()+r,u=e.getY()+i;this.isValid(a,u)&&this.image.get(a,u)===t;)a+=r,u+=i;for(a-=r,u-=i;this.isValid(a,u)&&this.image.get(a,u)===t;)a+=r;for(a-=r;this.isValid(a,u)&&this.image.get(a,u)===t;)u+=i;return u-=i,new ar(a,u)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),a=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,h=new xe(l+i*a,f+i*u),p=new xe(l-i*a,f-i*u);a=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;var v=new xe(l+i*a,f+i*u),_=new xe(l-i*a,f-i*u),x=[h,v,p,_];return x},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=nt.round(e.getX()),r=nt.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ue.truncDivision(this.nbLayers-4,8)+1)+15},n})(),fv=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new ON(e.getBlackMatrix()),a=null,u=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(t,a),u=new gA().decode(l)}catch(v){r=v}if(u==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(t,a),u=new gA().decode(l)}catch(v){throw r??v}var f=new Hn(u.getText(),u.getRawBytes(),u.getNumBits(),a,Ie.AZTEC,St.currentTimeMillis()),h=u.getByteSegments();h!=null&&f.putMetadata(Ln.BYTE_SEGMENTS,h);var p=u.getECLevel();return p!=null&&f.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(kt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,a,u){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n})(),NN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){NN(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new fv,t)||this}return e})(yl);var dn=(function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(kt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),u=a.getResultMetadata(),l=270;u!==null&&u.get(Ln.ORIENTATION)===!0&&(l=l+u.get(Ln.ORIENTATION)%360),a.putMetadata(Ln.ORIENTATION,l);var f=a.getResultPoints();if(f!==null)for(var h=i.getHeight(),p=0;p<f.length;p++)f[p]=new xe(h-f[p].getY()-1,f[p].getX());return a}else throw new re}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),a=new wn(r),u=t&&t.get(kt.TRY_HARDER)===!0,l=Math.max(1,i>>(u?8:5)),f;u?f=i:f=15;for(var h=Math.trunc(i/2),p=0;p<f;p++){var v=Math.trunc((p+1)/2),_=(p&1)===0,x=h+l*(_?v:-v);if(x<0||x>=i)break;try{a=e.getBlackRow(x,a)}catch{continue}for(var A=function(M){if(M===1&&(a.reverse(),t&&t.get(kt.NEED_RESULT_POINT_CALLBACK)===!0)){var B=new Map;t.forEach(function(J,C){return B.set(C,J)}),B.delete(kt.NEED_RESULT_POINT_CALLBACK),t=B}try{var G=S.decodeRow(x,a,t);if(M===1){G.putMetadata(Ln.ORIENTATION,180);var $=G.getResultPoints();$!==null&&($[0]=new xe(r-$[0].getX()-1,$[0].getY()),$[1]=new xe(r-$[1].getX()-1,$[1].getY()))}return{value:G}}catch{}},S=this,R=0;R<2;R++){var L=A(R);if(typeof L=="object")return L.value}}throw new re},n.recordPattern=function(e,t,r){for(var i=r.length,a=0;a<i;a++)r[a]=0;var u=e.getSize();if(t>=u)throw new re;for(var l=!e.get(t),f=0,h=t;h<u;){if(e.get(h)!==l)r[f]++;else{if(++f===i)break;r[f]=1,l=!l}h++}if(!(f===i||f===i-1&&h===u))throw new re},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new re;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,u=0,l=0;l<i;l++)a+=e[l],u+=t[l];if(a<u)return Number.POSITIVE_INFINITY;var f=a/u;r*=f;for(var h=0,p=0;p<i;p++){var v=e[p],_=t[p]*f,x=v>_?v-_:_-v;if(x>r)return Number.POSITIVE_INFINITY;h+=x}return h/a},n})(),MN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),mA=(function(n){MN(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),a=0,u=Int32Array.from([0,0,0,0,0,0]),l=i,f=!1,h=6,p=i;p<r;p++)if(t.get(p)!==f)u[a]++;else{if(a===h-1){for(var v=e.MAX_AVG_VARIANCE,_=-1,x=e.CODE_START_A;x<=e.CODE_START_C;x++){var A=dn.patternMatchVariance(u,e.CODE_PATTERNS[x],e.MAX_INDIVIDUAL_VARIANCE);A<v&&(v=A,_=x)}if(_>=0&&t.isRange(Math.max(0,l-(p-l)/2),l,!1))return Int32Array.from([l,p,_]);l+=u[0]+u[1],u=u.slice(2,u.length-1),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,f=!f}throw new re},e.decodeCode=function(t,r,i){dn.recordPattern(t,i,r);for(var a=e.MAX_AVG_VARIANCE,u=-1,l=0;l<e.CODE_PATTERNS.length;l++){var f=e.CODE_PATTERNS[l],h=this.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,u=l)}if(u>=0)return u;throw new re},e.prototype.decodeRow=function(t,r,i){var a=i&&i.get(kt.ASSUME_GS1)===!0,u=e.findStartPattern(r),l=u[2],f=0,h=new Uint8Array(20);h[f++]=l;var p;switch(l){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new fe}for(var v=!1,_=!1,x="",A=u[0],S=u[1],R=Int32Array.from([0,0,0,0,0,0]),L=0,M=0,B=l,G=0,$=!0,J=!1,C=!1;!v;){var b=_;switch(_=!1,L=M,M=e.decodeCode(r,R,S),h[f++]=M,M!==e.CODE_STOP&&($=!0),M!==e.CODE_STOP&&(G++,B+=G*M),A=S,S+=R.reduce(function(he,we){return he+we},0),M){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new fe}switch(p){case e.CODE_CODE_A:if(M<64)C===J?x+=String.fromCharCode(32+M):x+=String.fromCharCode(32+M+128),C=!1;else if(M<96)C===J?x+=String.fromCharCode(M-64):x+=String.fromCharCode(M+64),C=!1;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!J&&C?(J=!0,C=!1):J&&C?(J=!1,C=!1):C=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_B:if(M<96)C===J?x+=String.fromCharCode(32+M):x+=String.fromCharCode(32+M+128),C=!1;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!J&&C?(J=!0,C=!1):J&&C?(J=!1,C=!1):C=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_C:if(M<100)M<10&&(x+="0"),x+=M;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(x.length===0?x+="]C1":x+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:v=!0;break}break}b&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=S-A;if(S=r.getNextUnset(S),!r.isRange(S,Math.min(r.getSize(),S+(S-A)/2),!1))throw new re;if(B-=G*L,B%103!==L)throw new An;var k=x.length;if(k===0)throw new re;k>0&&$&&(p===e.CODE_CODE_C?x=x.substring(0,k-2):x=x.substring(0,k-1));for(var V=(u[1]+u[0])/2,z=A+N/2,P=h.length,ze=new Uint8Array(P),yt=0;yt<P;yt++)ze[yt]=h[yt];var ne=[new xe(V,t),new xe(z,t)];return new Hn(x,ze,0,ne,Ie.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(dn),PN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),gg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yA=(function(n){PN(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var a,u,l,f,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(r,h),v=r.getNextSet(p[1]),_=r.getSize(),x,A;do{e.recordPattern(r,v,h);var S=e.toNarrowWidePattern(h);if(S<0)throw new re;x=e.patternToChar(S),this.decodeRowResult+=x,A=v;try{for(var R=(a=void 0,gg(h)),L=R.next();!L.done;L=R.next()){var M=L.value;v+=M}}catch(P){a={error:P}}finally{try{L&&!L.done&&(u=R.return)&&u.call(R)}finally{if(a)throw a.error}}v=r.getNextSet(v)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var G=gg(h),$=G.next();!$.done;$=G.next()){var M=$.value;B+=M}}catch(P){l={error:P}}finally{try{$&&!$.done&&(f=G.return)&&f.call(G)}finally{if(l)throw l.error}}var J=v-A-B;if(v!==_&&J*2<B)throw new re;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,b=0,N=0;N<C;N++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(b%43))throw new An;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new re;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var V=(p[1]+p[0])/2,z=A+B/2;return new Hn(k,null,0,[new xe(V,t),new xe(z,t)],Ie.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),a=t.getNextSet(0),u=0,l=a,f=!1,h=r.length,p=a;p<i;p++)if(t.get(p)!==f)r[u]++;else{if(u===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,l-Math.floor((p-l)/2)),l,!1))return[l,p];l+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,f=!f}throw new re},e.toNarrowWidePattern=function(t){var r,i,a=t.length,u=0,l;do{var f=2147483647;try{for(var h=(r=void 0,gg(t)),p=h.next();!p.done;p=h.next()){var v=p.value;v<f&&v>u&&(f=v)}}catch(S){r={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}u=f,l=0;for(var _=0,x=0,A=0;A<a;A++){var v=t[A];v>u&&(x|=1<<a-1-A,l++,_+=v)}if(l===3){for(var A=0;A<a&&l>0;A++){var v=t[A];if(v>u&&(l--,v*2>=_))return-1}return x}}while(l>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new re},e.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var u=t.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){var l=t.charAt(a+1),f="\0";switch(u){case"+":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new fe;break;case"$":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new fe;break;case"%":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l==="X"||l==="Y"||l==="Z")f="";else throw new fe;break;case"/":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new fe;break}i+=f,a++}else i+=u}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(dn),LN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_A=(function(n){LN(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var a,u,l,f,h=this.findAsteriskPattern(r),p=r.getNextSet(h[1]),v=r.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var x,A;do{e.recordPattern(r,p,_);var S=this.toPattern(_);if(S<0)throw new re;x=this.patternToChar(S),this.decodeRowResult+=x,A=p;try{for(var R=(a=void 0,vg(_)),L=R.next();!L.done;L=R.next()){var M=L.value;p+=M}}catch(N){a={error:N}}finally{try{L&&!L.done&&(u=R.return)&&u.call(R)}finally{if(a)throw a.error}}p=r.getNextSet(p)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var G=vg(_),$=G.next();!$.done;$=G.next()){var M=$.value;B+=M}}catch(N){l={error:N}}finally{try{$&&!$.done&&(f=G.return)&&f.call(G)}finally{if(l)throw l.error}}if(p===v||!r.get(p))throw new re;if(this.decodeRowResult.length<2)throw new re;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var J=this.decodeExtended(this.decodeRowResult),C=(h[1]+h[0])/2,b=A+B/2;return new Hn(J,null,0,[new xe(C,t),new xe(b,t)],Ie.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,u=i,l=!1,f=a.length,h=0,p=i;p<r;p++)if(t.get(p)!==l)a[h]++;else{if(h===f-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([u,p]);u+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new re},e.prototype.toPattern=function(t){var r,i,a=0;try{for(var u=vg(t),l=u.next();!l.done;l=u.next()){var f=l.value;a+=f}}catch(A){r={error:A}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}for(var h=0,p=t.length,v=0;v<p;v++){var _=Math.round(t[v]*9/a);if(_<1||_>4)return-1;if((v&1)===0)for(var x=0;x<_;x++)h=h<<1|1;else h<<=_}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new re},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",a=0;a<r;a++){var u=t.charAt(a);if(u>="a"&&u<="d"){if(a>=r-1)throw new fe;var l=t.charAt(a+1),f="\0";switch(u){case"d":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new fe;break;case"a":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new fe;break;case"b":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l>="X"&&l<="Z")f="";else throw new fe;break;case"c":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new fe;break}i+=f,a++}else i+=u}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var a=1,u=0,l=r-1;l>=0;l--)u+=a*e.ALPHABET_STRING.indexOf(t.charAt(l)),++a>i&&(a=1);if(t.charAt(r)!==e.ALPHABET_STRING[u%47])throw new An},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(dn),kN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),BN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xA=(function(n){kN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var a,u,l=this.decodeStart(r),f=this.decodeEnd(r),h=new Ve;e.decodeMiddle(r,l[1],f[0],h);var p=h.toString(),v=null;i!=null&&(v=i.get(kt.ALLOWED_LENGTHS)),v==null&&(v=e.DEFAULT_ALLOWED_LENGTHS);var _=p.length,x=!1,A=0;try{for(var S=BN(v),R=S.next();!R.done;R=S.next()){var L=R.value;if(_===L){x=!0;break}L>A&&(A=L)}}catch(G){a={error:G}}finally{try{R&&!R.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}if(!x&&_>A&&(x=!0),!x)throw new fe;var M=[new xe(l[1],t),new xe(f[0],t)],B=new Hn(p,null,0,M,Ie.ITF,new Date().getTime());return B},e.decodeMiddle=function(t,r,i,a){var u=new Int32Array(10),l=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),l.fill(0),f.fill(0);r<i;){dn.recordPattern(t,r,u);for(var h=0;h<5;h++){var p=2*h;l[h]=u[p],f[h]=u[p+1]}var v=e.decodeDigit(l);a.append(v.toString()),v=this.decodeDigit(f),a.append(v.toString()),u.forEach(function(_){r+=_})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var a=r-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new re},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new re;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(u){u instanceof re&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var a=i.length,u=new Int32Array(a),l=t.getSize(),f=!1,h=0,p=r;u.fill(0);for(var v=r;v<l;v++)if(t.get(v)!==f)u[h]++;else{if(h===a-1){if(dn.patternMatchVariance(u,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,v];p+=u[0]+u[1],St.arraycopy(u,2,u,0,h-1),u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,f=!f}throw new re},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,u=0;u<a;u++){var l=e.PATTERNS[u],f=dn.patternMatchVariance(t,l,e.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,i=u):f===r&&(i=-1)}if(i>=0)return i%10;throw new re},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(dn),VN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cl=(function(n){VN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,a=0,u=Int32Array.from([0,0,0]);!r;){u=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,u);var l=i[0];a=i[1];var f=l-(a-l);f>=0&&(r=t.isRange(f,l,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new fe;i+=u}i*=3;for(var a=r-2;a>=0;a-=2){var u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new fe;i+=u}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,a){return this.findGuardPattern(t,r,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,r,i,a,u){var l=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var f=0,h=r,p=a.length,v=i,_=r;_<l;_++)if(t.get(_)!==v)u[f]++;else{if(f===p-1){if(dn.patternMatchVariance(u,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=u[0]+u[1];for(var x=u.slice(2,u.length),A=0;A<f-1;A++)u[A]=x[A];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,v=!v}throw new re},e.decodeDigit=function(t,r,i,a){this.recordPattern(t,i,r);for(var u=this.MAX_AVG_VARIANCE,l=-1,f=a.length,h=0;h<f;h++){var p=a[h],v=dn.patternMatchVariance(r,p,e.MAX_INDIVIDUAL_VARIANCE);v<u&&(u=v,l=h)}if(l>=0)return l;throw new re},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(dn),FN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UN=(function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),u=i.toString(),l=n.parseExtensionString(u),f=[new xe((r[0]+r[1])/2,e),new xe(a,e)],h=new Hn(u,null,0,f,Ie.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=e.getSize(),f=t[1],h=0,p=0;p<5&&f<l;p++){var v=cl.decodeDigit(e,u,f,cl.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);try{for(var _=(i=void 0,FN(u)),x=_.next();!x.done;x=_.next()){var A=x.value;f+=A}}catch(R){i={error:R}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}v>=10&&(h|=1<<4-p),p!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==5)throw new re;var S=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==S)throw new re;return f},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new re},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Ln.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,u=a<10?"0"+a:a.toString();return t+i+"."+u},n})(),zN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jN=(function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,r,i),u=i.toString(),l=n.parseExtensionString(u),f=[new xe((r[0]+r[1])/2,e),new xe(a,e)],h=new Hn(u,null,0,f,Ie.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(e,t,r){var i,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=e.getSize(),f=t[1],h=0,p=0;p<2&&f<l;p++){var v=cl.decodeDigit(e,u,f,cl.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);try{for(var _=(i=void 0,zN(u)),x=_.next();!x.done;x=_.next()){var A=x.value;f+=A}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}v>=10&&(h|=1<<1-p),p!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(r.length!==2)throw new re;if(parseInt(r.toString())%4!==h)throw new re;return f},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ln.ISSUE_NUMBER,parseInt(e)]])},n})(),HN=(function(){function n(){}return n.decodeRow=function(e,t,r){var i=cl.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new UN;return a.decodeRow(e,t,i)}catch{var u=new jN;return u.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n})(),GN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),cn=(function(n){GN(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],a=new Int32Array(i.length),u=0;u<i.length;u++)a[u]=i[i.length-u-1];e.L_AND_G_PATTERNS[r]=a}return t}return e.prototype.decodeRow=function(t,r,i){var a=e.findStartGuardPattern(r),u=i==null?null:i.get(kt.NEED_RESULT_POINT_CALLBACK);if(u!=null){var l=new xe((a[0]+a[1])/2,t);u.foundPossibleResultPoint(l)}var f=this.decodeMiddle(r,a,this.decodeRowStringBuffer),h=f.rowOffset,p=f.resultString;if(u!=null){var v=new xe(h,t);u.foundPossibleResultPoint(v)}var _=e.decodeEnd(r,h);if(u!=null){var x=new xe((_[0]+_[1])/2,t);u.foundPossibleResultPoint(x)}var A=_[1],S=A+(A-_[0]);if(S>=r.getSize()||!r.isRange(A,S,!1))throw new re;var R=p.toString();if(R.length<8)throw new fe;if(!e.checkChecksum(R))throw new An;var L=(a[1]+a[0])/2,M=(_[1]+_[0])/2,B=this.getBarcodeFormat(),G=[new xe(L,t),new xe(M,t)],$=new Hn(R,null,0,G,B,new Date().getTime()),J=0;try{var C=HN.decodeRow(t,r,_[1]);$.putMetadata(Ln.UPC_EAN_EXTENSION,C.getText()),$.putAllMetadata(C.getResultMetadata()),$.addResultPoints(C.getResultPoints()),J=C.getText().length}catch{}var b=i==null?null:i.get(kt.ALLOWED_EAN_EXTENSIONS);if(b!=null){var N=!1;for(var k in b)if(J.toString()===k){N=!0;break}if(!N)throw new re}return B===Ie.EAN_13||Ie.UPC_A,$},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,a=r-1;a>=0;a-=2){var u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new fe;i+=u}i*=3;for(var a=r-2;a>=0;a-=2){var u=t.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new fe;i+=u}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(cl),qN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),EA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hv=(function(n){qN(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,u,l,f,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),v=r[1],_=0,x=0;x<6&&v<p;x++){var A=cn.decodeDigit(t,h,v,cn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var S=(a=void 0,EA(h)),R=S.next();!R.done;R=S.next()){var L=R.value;v+=L}}catch($){a={error:$}}finally{try{R&&!R.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}A>=10&&(_|=1<<5-x)}i=e.determineFirstDigit(i,_);var M=cn.findGuardPattern(t,v,!0,cn.MIDDLE_PATTERN,new Int32Array(cn.MIDDLE_PATTERN.length).fill(0));v=M[1];for(var x=0;x<6&&v<p;x++){var A=cn.decodeDigit(t,h,v,cn.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var B=(l=void 0,EA(h)),G=B.next();!G.done;G=B.next()){var L=G.value;v+=L}}catch(C){l={error:C}}finally{try{G&&!G.done&&(f=B.return)&&f.call(B)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ie.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new re},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(cn),XN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),AA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wA=(function(n){XN(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var a,u,l,f,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),v=r[1],_=0;_<4&&v<p;_++){var x=cn.decodeDigit(t,h,v,cn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var A=(a=void 0,AA(h)),S=A.next();!S.done;S=A.next()){var R=S.value;v+=R}}catch(G){a={error:G}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(a)throw a.error}}}var L=cn.findGuardPattern(t,v,!0,cn.MIDDLE_PATTERN,new Int32Array(cn.MIDDLE_PATTERN.length).fill(0));v=L[1];for(var _=0;_<4&&v<p;_++){var x=cn.decodeDigit(t,h,v,cn.L_PATTERNS);i+=String.fromCharCode(48+x);try{for(var M=(l=void 0,AA(h)),B=M.next();!B.done;B=M.next()){var R=B.value;v+=R}}catch(J){l={error:J}}finally{try{B&&!B.done&&(f=M.return)&&f.call(M)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ie.EAN_8},e})(cn),KN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),TA=(function(n){KN(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new hv,t}return e.prototype.getBarcodeFormat=function(){return Ie.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new Hn(r.substring(1),null,null,t.getResultPoints(),Ie.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new re},e.prototype.reset=function(){this.ean13Reader.reset()},e})(cn),YN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),WN=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SA=(function(n){YN(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var a,u,l=this.decodeMiddleCounters.map(function(R){return R});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var f=t.getSize(),h=r[1],p=0,v=0;v<6&&h<f;v++){var _=e.decodeDigit(t,l,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var x=(a=void 0,WN(l)),A=x.next();!A.done;A=x.next()){var S=A.value;h+=S}}catch(R){a={error:R}}finally{try{A&&!A.done&&(u=x.return)&&u.call(x)}finally{if(a)throw a.error}}_>=10&&(p|=1<<5-v)}return e.determineNumSysAndCheckDigit(new Ve(i),p),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return cn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw re.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ie.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(u){return u.charCodeAt(0)}),i=new Ve;i.append(t.charAt(0));var a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(cn),QN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),IA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mg=(function(n){QN(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(kt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Ie.EAN_13)>-1&&a.push(new hv),i.indexOf(Ie.UPC_A)>-1&&a.push(new TA),i.indexOf(Ie.EAN_8)>-1&&a.push(new wA),i.indexOf(Ie.UPC_E)>-1&&a.push(new SA)),a.length===0&&(a.push(new hv),a.push(new TA),a.push(new wA),a.push(new SA)),r.readers=a,r}return e.prototype.decodeRow=function(t,r,i){var a,u;try{for(var l=IA(this.readers),f=l.next();!f.done;f=l.next()){var h=f.value;try{var p=h.decodeRow(t,r,i),v=p.getBarcodeFormat()===Ie.EAN_13&&p.getText().charAt(0)==="0",_=i==null?null:i.get(kt.POSSIBLE_FORMATS),x=_==null||_.includes(Ie.UPC_A);if(v&&x){var A=p.getRawBytes(),S=new Hn(p.getText().substring(1),A,A?A.length:null,p.getResultPoints(),Ie.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(R){a={error:R}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(a)throw a.error}}throw new re},e.prototype.reset=function(){var t,r;try{for(var i=IA(this.readers),a=i.next();!a.done;a=i.next()){var u=a.value;u.reset()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e})(dn),$N=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ZN=(function(n){$N(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var a=this.getValidRowData(r);if(!a)throw new re;var u=this.codaBarDecodeRow(a.row);if(!u)throw new re;return new Hn(u,null,0,[new xe(a.left,t),new xe(a.right,t)],Ie.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var a=r.lastIndexOf(!0);if(a<=i)return null;r=r.slice(i,a+1);for(var u=[],l=r[0],f=1,h=1;h<r.length;h++)r[h]===l?f++:(l=r[h],u.push(f),f=1);return u.push(f),u.length<23&&(u.length+1)%8!==0?null:{row:u,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(f,h){return(f+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),u=a.map(function(f){return f<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[u]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[u])}var l=r.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e})(dn),JN=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),e9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ds=(function(n){JN(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(dn.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new re},e.count=function(t){return nt.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,a=r[0],u=1;u<t.length;u++)r[u]>a&&(a=r[u],i=u);t[i]++},e.decrement=function(t,r){for(var i=0,a=r[0],u=1;u<t.length;u++)r[u]<a&&(a=r[u],i=u);t[i]--},e.isFinderPattern=function(t){var r,i,a=t[0]+t[1],u=a+t[2]+t[3],l=a/u;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=e9(t),v=p.next();!v.done;v=p.next()){var _=v.value;_>h&&(h=_),_<f&&(f=_)}}catch(x){r={error:x}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return h<10*f}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(dn),m0=(function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n})(),CS=(function(){function n(e,t,r,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new xe(r,a)),this.resultPoints.push(new xe(i,a))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n})(),t9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hu=(function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,a,u=0;try{for(var l=t9(e),f=l.next();!f.done;f=l.next()){var h=f.value;u+=h}}catch(M){i={error:M}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var p=0,v=0,_=e.length,x=0;x<_-1;x++){var A=void 0;for(A=1,v|=1<<x;A<e[x];A++,v&=~(1<<x)){var S=n.combins(u-A-1,_-x-2);if(r&&v===0&&u-A-(_-x-1)>=_-x-1&&(S-=n.combins(u-A-(_-x),_-x-2)),_-x-1>1){for(var R=0,L=u-A-(_-x-2);L>t;L--)R+=n.combins(u-A-L-1,_-x-3);S-=R*(_-1-x)}else u-A>t&&S--;p+=S}u-=A}return p},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var a=1,u=1,l=e;l>r;l--)a*=l,u<=i&&(a/=u,u++);for(;u<=i;)a/=u,u++;return a},n})(),n9=(function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new wn(r),a=0,u=e[0],l=u.getRightChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(a),a++;for(var f=1;f<e.length;++f){for(var h=e[f],p=h.getLeftChar().getValue(),v=11;v>=0;--v)(p&1<<v)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var _=h.getRightChar().getValue(),v=11;v>=0;--v)(_&1<<v)!==0&&i.set(a),a++}return i},n})(),us=(function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n})(),bm=(function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n})(),r9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ti=(function(n){r9(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(bm),i9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ls=(function(n){i9(e,n);function e(t,r,i){var a=n.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=r,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(bm),a9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ku=(function(n){a9(e,n);function e(t,r,i){var a=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new fe;return a.firstDigit=r,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(bm),Ed=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o9=(function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,a,u,l,f,h;if(!e)return null;if(e.length<2)throw new re;var p=e.substring(0,2);try{for(var v=Ed(n.TWO_DIGIT_DATA_LENGTH),_=v.next();!_.done;_=v.next()){var x=_.value;if(x[0]===p)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,x[2],e):n.processFixedAI(2,x[1],e)}}catch(J){t={error:J}}finally{try{_&&!_.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}if(e.length<3)throw new re;var A=e.substring(0,3);try{for(var S=Ed(n.THREE_DIGIT_DATA_LENGTH),R=S.next();!R.done;R=S.next()){var x=R.value;if(x[0]===A)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,x[2],e):n.processFixedAI(3,x[1],e)}}catch(J){i={error:J}}finally{try{R&&!R.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var L=Ed(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),M=L.next();!M.done;M=L.next()){var x=M.value;if(x[0]===A)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(J){u={error:J}}finally{try{M&&!M.done&&(l=L.return)&&l.call(L)}finally{if(u)throw u.error}}if(e.length<4)throw new re;var B=e.substring(0,4);try{for(var G=Ed(n.FOUR_DIGIT_DATA_LENGTH),$=G.next();!$.done;$=G.next()){var x=$.value;if(x[0]===B)return x[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,x[2],e):n.processFixedAI(4,x[1],e)}}catch(J){f={error:J}}finally{try{$&&!$.done&&(h=G.return)&&h.call(G)}finally{if(f)throw f.error}}throw new re},n.processFixedAI=function(e,t,r){if(r.length<e)throw new re;var i=r.substring(0,e);if(r.length<e+t)throw new re;var a=r.substring(e,e+t),u=r.substring(e+t),l="("+i+")"+a,f=n.parseFieldsInGeneralPurpose(u);return f==null?l:l+f},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),a;r.length<e+t?a=r.length:a=e+t;var u=r.substring(e,a),l=r.substring(a),f="("+i+")"+u,h=n.parseFieldsInGeneralPurpose(l);return h==null?f:f+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n})(),Hd=(function(){function n(e){this.buffer=new Ve,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var a=this.decodeGeneralPurposeField(r,i),u=o9.parseFieldsInGeneralPurpose(a.getNewString());if(u!=null&&e.append(u),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new ku(this.information.getSize(),ku.FNC1,ku.FNC1):new ku(this.information.getSize(),t-1,ku.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new ku(e+7,i,a)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,a=0;a<r;++a)e.get(t+a)&&(i|=1<<r-a-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new ls(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ls(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new ls(this.current.getPosition(),this.buffer.toString()):t=new ls(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new us(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new ls(this.current.getPosition(),this.buffer.toString());return new us(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new us(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ls(this.current.getPosition(),this.buffer.toString());return new us(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new us(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ls(this.current.getPosition(),this.buffer.toString());return new us(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new us(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ti(e+5,ti.FNC1);if(t>=5&&t<15)return new ti(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new ti(e+7,""+(r+1));if(r>=90&&r<116)return new ti(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new fe}return new ti(e+8,a)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ti(e+5,ti.FNC1);if(t>=5&&t<15)return new ti(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new ti(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Lf("Decoding invalid alphanumeric value: "+r)}return new ti(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n})(),bS=(function(){function n(e){this.information=e,this.generalDecoder=new Hd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n})(),s9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ii=(function(n){s9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var a=0;a<4;++a){var u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,a=0;a<13;a++){var u=t.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*u:u}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(bS),u9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),l9=(function(n){u9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ve;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ii),c9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),f9=(function(n){c9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ve;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(bS),h9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Gd=(function(n){h9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,a);for(var u=this.checkWeight(a),l=1e5,f=0;f<5;++f)u/l===0&&t.append("0"),l/=10;t.append(u)},e})(ii),d9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),RS=(function(n){d9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Gd.GTIN_SIZE+e.WEIGHT_SIZE)throw new re;var t=new Ve;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Gd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Gd),p9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),g9=(function(n){p9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(RS),v9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),m9=(function(n){v9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(RS),y9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_9=(function(n){y9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ii.GTIN_SIZE)throw new re;var t=new Ve;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ii),x9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),E9=(function(n){x9(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ii.GTIN_SIZE)throw new re;var t=new Ve;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ii.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ii),A9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),io=(function(n){A9(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=r,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new re;var t=new Ve;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var u=i%12+1;i/=12;var l=i;l/10===0&&t.append("0"),t.append(l),u/10===0&&t.append("0"),t.append(u),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Gd);function w9(n){try{if(n.get(1))return new l9(n);if(!n.get(2))return new f9(n);var e=Hd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new g9(n);case 5:return new m9(n)}var t=Hd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new _9(n);case 13:return new E9(n)}var r=Hd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new io(n,"310","11");case 57:return new io(n,"320","11");case 58:return new io(n,"310","13");case 59:return new io(n,"320","13");case 60:return new io(n,"310","15");case 61:return new io(n,"320","15");case 62:return new io(n,"310","17");case 63:return new io(n,"320","17")}}catch(i){throw console.log(i),new Lf("unknown decoder: "+n)}}var CA=(function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n})(),T9=(function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,a){t.forEach(function(u){i.getLeftChar().getValue()===u.getLeftChar().getValue()&&i.getRightChar().getValue()===u.getRightChar().getValue()&&i.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(r=!0)})}),r}},n})(),S9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),ao=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I9=(function(n){S9(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof re){if(!this.pairs.length)throw new re;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new re},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,a,u=r;u<this.rows.length;u++){var l=this.rows[u];this.pairs.length=0;try{for(var f=(i=void 0,ao(t)),h=f.next();!h.done;h=f.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(_){i={error:_}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var v=new Array(t);v.push(l);try{return this.checkRows(v,u+1)}catch(_){console.log(_)}}}throw new re},e.isValidSequence=function(t){var r,i;try{for(var a=ao(e.FINDER_PATTERN_SEQUENCES),u=a.next();!u.done;u=a.next()){var l=u.value;if(!(t.length>l.length)){for(var f=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==l[h]){f=!1;break}if(f)return!0}}}catch(p){r={error:p}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,a=!1,u=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>t){u=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}u||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new T9(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,a,u,l,f,h;try{for(var p=ao(r),v=p.next();!v.done;v=p.next()){var _=v.value;if(_.getPairs().length!==t.length){var x=!0;try{for(var A=(u=void 0,ao(_.getPairs())),S=A.next();!S.done;S=A.next()){var R=S.value,L=!1;try{for(var M=(f=void 0,ao(t)),B=M.next();!B.done;B=M.next()){var G=B.value;if(CA.equals(R,G)){L=!0;break}}}catch($){f={error:$}}finally{try{B&&!B.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}L||(x=!1)}}catch($){u={error:$}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(u)throw u.error}}}}}catch($){i={error:$}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,a,u,l,f,h;try{for(var p=ao(r),v=p.next();!v.done;v=p.next()){var _=v.value,x=!0;try{for(var A=(u=void 0,ao(t)),S=A.next();!S.done;S=A.next()){var R=S.value,L=!1;try{for(var M=(f=void 0,ao(_.getPairs())),B=M.next();!B.done;B=M.next()){var G=B.value;if(R.equals(G)){L=!0;break}}}catch($){f={error:$}}finally{try{B&&!B.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}if(!L){x=!1;break}}}catch($){u={error:$}}finally{try{S&&!S.done&&(l=A.return)&&l.call(A)}finally{if(u)throw u.error}}if(x)return!0}}catch($){i={error:$}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=n9.buildBitArray(t),i=w9(r),a=i.parseInformation(),u=t[0].getFinderPattern().getResultPoints(),l=t[t.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],l[0],l[1]];return new Hn(a,null,null,f,Ie.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),u=2,l=1;l<this.pairs.size();++l){var f=this.pairs.get(l);a+=f.getLeftChar().getChecksumPortion(),u++;var h=f.getRightChar();h!=null&&(a+=h.getChecksumPortion(),u++)}a%=211;var p=211*(u-4)+a;return p===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var a=r.length%2===0;this.startFromEven&&(a=!a);var u,l=!0,f=-1;do this.findNextPair(t,r,f),u=this.parseFoundFinderPattern(t,i,a),u===null?f=e.getNextSecondBar(t,this.startEnd[0]):l=!1;while(l);var h=this.decodeDataCharacter(t,u,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new re;var p;try{p=this.decodeDataCharacter(t,u,a,!1)}catch(v){p=null,console.log(v)}return new CA(h,p,u,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var u=t.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var f=r[r.length-1];l=f.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;l<u&&(p=!t.get(l),!!p);)l++;for(var v=0,_=l,x=l;x<u;x++)if(t.get(x)!==p)a[v]++;else{if(v===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=x;return}h&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,v--}else v++;a[v]=1,p=!p}throw new re},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var a=t[i];t[i]=t[r-i-1],t[r-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,r,i){var a,u,l;if(i){for(var f=this.startEnd[0]-1;f>=0&&!t.get(f);)f--;f++,a=this.startEnd[0]-f,u=f,l=this.startEnd[1]}else u=this.startEnd[0],l=t.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var h=this.getDecodeFinderCounters();St.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new CS(p,[u,l],u,l,r)},e.prototype.decodeDataCharacter=function(t,r,i,a){for(var u=this.getDataCharacterCounters(),l=0;l<u.length;l++)u[l]=0;if(a)e.recordPatternInReverse(t,r.getStartEnd()[0],u);else{e.recordPattern(t,r.getStartEnd()[1],u);for(var f=0,h=u.length-1;f<h;f++,h--){var p=u[f];u[f]=u[h],u[h]=p}}var v=17,_=nt.sum(new Int32Array(u))/v,x=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(_-x)/x>.3)throw new re;for(var A=this.getOddCounts(),S=this.getEvenCounts(),R=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors(),f=0;f<u.length;f++){var M=1*u[f]/_,B=M+.5;if(B<1){if(M<.3)throw new re;B=1}else if(B>8){if(M>8.7)throw new re;B=8}var G=f/2;(f&1)===0?(A[G]=B,R[G]=M-B):(S[G]=B,L[G]=M-B)}this.adjustOddEvenCounts(v);for(var $=4*r.getValue()+(i?0:2)+(a?0:1)-1,J=0,C=0,f=A.length-1;f>=0;f--){if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[$][2*f];C+=A[f]*b}J+=A[f]}for(var N=0,f=S.length-1;f>=0;f--)if(e.isNotA1left(r,i,a)){var b=e.WEIGHTS[$][2*f+1];N+=S[f]*b}var k=C+N;if((J&1)!==0||J>13||J<4)throw new re;var V=(13-J)/2,z=e.SYMBOL_WIDEST[V],P=9-z,ze=Hu.getRSSvalue(A,z,!0),yt=Hu.getRSSvalue(S,P,!1),ne=e.EVEN_TOTAL_SUBSET[V],he=e.GSUM[V],we=ze*ne+yt+he;return new m0(we,k)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;r>13?u=!0:r<4&&(a=!0);var l=!1,f=!1;i>13?f=!0:i<4&&(l=!0);var h=r+i-t,p=(r&1)===1,v=(i&1)===0;if(h===1)if(p){if(v)throw new re;u=!0}else{if(!v)throw new re;f=!0}else if(h===-1)if(p){if(v)throw new re;a=!0}else{if(!v)throw new re;l=!0}else if(h===0){if(p){if(!v)throw new re;r<i?(a=!0,f=!0):(u=!0,l=!0)}else if(v)throw new re}else throw new re;if(a){if(u)throw new re;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(f)throw new re;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(ds),C9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),b9=(function(n){C9(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(m0),R9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),yg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bA=(function(n){R9(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var a,u,l,f,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var p=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,p),r.reverse();try{for(var v=yg(this.possibleLeftPairs),_=v.next();!_.done;_=v.next()){var x=_.value;if(x.getCount()>1)try{for(var A=(l=void 0,yg(this.possibleRightPairs)),S=A.next();!S.done;S=A.next()){var R=S.value;if(R.getCount()>1&&e.checkChecksum(x,R))return e.constructResult(x,R)}}catch(L){l={error:L}}finally{try{S&&!S.done&&(f=A.return)&&f.call(A)}finally{if(l)throw l.error}}}}catch(L){a={error:L}}finally{try{_&&!_.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}throw new re},e.addOrTally=function(t,r){var i,a;if(r!=null){var u=!1;try{for(var l=yg(t),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getValue()===r.getValue()){h.incrementCount(),u=!0;break}}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}u||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),a=new String(i).toString(),u=new Ve,l=13-a.length;l>0;l--)u.append("0");u.append(a);for(var f=0,l=0;l<13;l++){var h=u.charAt(l).charCodeAt(0)-48;f+=(l&1)===0?3*h:h}f=10-f%10,f===10&&(f=0),u.append(f.toString());var p=t.getFinderPattern().getResultPoints(),v=r.getFinderPattern().getResultPoints();return new Hn(u.toString(),null,0,[p[0],p[1],v[0],v[1]],Ie.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,r,i,a){try{var u=this.findFinderPattern(t,r),l=this.parseFoundFinderPattern(t,i,r,u),f=a==null?null:a.get(kt.NEED_RESULT_POINT_CALLBACK);if(f!=null){var h=(u[0]+u[1])/2;r&&(h=t.getSize()-1-h),f.foundPossibleResultPoint(new xe(h,i))}var p=this.decodeDataCharacter(t,l,!0),v=this.decodeDataCharacter(t,l,!1);return new b9(1597*p.getValue()+v.getValue(),p.getChecksumPortion()+4*v.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var a=this.getDataCharacterCounters(),u=0;u<a.length;u++)a[u]=0;if(i)dn.recordPatternInReverse(t,r.getStartEnd()[0],a);else{dn.recordPattern(t,r.getStartEnd()[1]+1,a);for(var l=0,f=a.length-1;l<f;l++,f--){var h=a[l];a[l]=a[f],a[f]=h}}for(var p=i?16:15,v=nt.sum(new Int32Array(a))/p,_=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var R=a[l]/v,L=Math.floor(R+.5);L<1?L=1:L>8&&(L=8);var M=Math.floor(l/2);(l&1)===0?(_[M]=L,A[M]=R-L):(x[M]=L,S[M]=R-L)}this.adjustOddEvenCounts(i,p);for(var B=0,G=0,l=_.length-1;l>=0;l--)G*=9,G+=_[l],B+=_[l];for(var $=0,J=0,l=x.length-1;l>=0;l--)$*=9,$+=x[l],J+=x[l];var C=G+3*$;if(i){if((B&1)!==0||B>12||B<4)throw new re;var b=(12-B)/2,N=e.OUTSIDE_ODD_WIDEST[b],k=9-N,V=Hu.getRSSvalue(_,N,!1),z=Hu.getRSSvalue(x,k,!0),P=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],ze=e.OUTSIDE_GSUM[b];return new m0(V*P+z+ze,C)}else{if((J&1)!==0||J>10||J<4)throw new re;var b=(10-J)/2,N=e.INSIDE_ODD_WIDEST[b],k=9-N,V=Hu.getRSSvalue(_,N,!0),z=Hu.getRSSvalue(x,k,!1),yt=e.INSIDE_ODD_TOTAL_SUBSET[b],ze=e.INSIDE_GSUM[b];return new m0(z*yt+V+ze,C)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),u=!1,l=0;l<a&&(u=!t.get(l),r!==u);)l++;for(var f=0,h=l,p=l;p<a;p++)if(t.get(p)!==u)i[f]++;else{if(f===3){if(ds.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,u=!u}throw new re},e.prototype.parseFoundFinderPattern=function(t,r,i,a){for(var u=t.get(a[0]),l=a[0]-1;l>=0&&u!==t.get(l);)l--;l++;var f=a[0]-l,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);St.arraycopy(h,0,p,1,h.length-1),p[0]=f;var v=this.parseFinderValue(p,e.FINDER_PATTERNS),_=l,x=a[1];return i&&(_=t.getSize()-1-_,x=t.getSize()-1-x),new CS(v,[l,a[1]],_,x,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=nt.sum(new Int32Array(this.getOddCounts())),a=nt.sum(new Int32Array(this.getEvenCounts())),u=!1,l=!1,f=!1,h=!1;t?(i>12?l=!0:i<4&&(u=!0),a>12?h=!0:a<4&&(f=!0)):(i>11?l=!0:i<5&&(u=!0),a>10?h=!0:a<4&&(f=!0));var p=i+a-r,v=(i&1)===(t?1:0),_=(a&1)===1;if(p===1)if(v){if(_)throw new re;l=!0}else{if(!_)throw new re;h=!0}else if(p===-1)if(v){if(_)throw new re;u=!0}else{if(!_)throw new re;f=!0}else if(p===0){if(v){if(!_)throw new re;i<a?(u=!0,h=!0):(l=!0,f=!0)}else if(_)throw new re}else throw new re;if(u){if(l)throw new re;ds.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ds.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new re;ds.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ds.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(ds),D9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),zc=(function(n){D9(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(kt.POSSIBLE_FORMATS):null,a=t&&t.get(kt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Ie.EAN_13)||i.includes(Ie.UPC_A)||i.includes(Ie.EAN_8)||i.includes(Ie.UPC_E))&&r.readers.push(new mg(t)),i.includes(Ie.CODE_39)&&r.readers.push(new yA(a)),i.includes(Ie.CODE_93)&&r.readers.push(new _A),i.includes(Ie.CODE_128)&&r.readers.push(new mA),i.includes(Ie.ITF)&&r.readers.push(new xA),i.includes(Ie.CODABAR)&&r.readers.push(new ZN),i.includes(Ie.RSS_14)&&r.readers.push(new bA),i.includes(Ie.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new I9))),r.readers.length===0&&(r.readers.push(new mg(t)),r.readers.push(new yA),r.readers.push(new _A),r.readers.push(new mg(t)),r.readers.push(new mA),r.readers.push(new xA),r.readers.push(new bA)),r}return e.prototype.decodeRow=function(t,r,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,r,i)}catch{}throw new re},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(dn),O9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){O9(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new zc(r),t,r)||this}return e})(yl);var RA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=(function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),at=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),N9=(function(){function n(e,t,r,i,a,u){var l,f;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=u;var h=0,p=u.getECCodewords(),v=u.getECBlocks();try{for(var _=RA(v),x=_.next();!x.done;x=_.next()){var A=x.value;h+=A.getCount()*(A.getDataCodewords()+p)}}catch(S){l={error:S}}finally{try{x&&!x.done&&(f=_.return)&&f.call(_)}finally{if(l)throw l.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new fe;try{for(var a=RA(n.VERSIONS),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===t)return l}}catch(f){r={error:f}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}throw new fe},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new ut(5,new at(1,3))),new n(2,12,12,10,10,new ut(7,new at(1,5))),new n(3,14,14,12,12,new ut(10,new at(1,8))),new n(4,16,16,14,14,new ut(12,new at(1,12))),new n(5,18,18,16,16,new ut(14,new at(1,18))),new n(6,20,20,18,18,new ut(18,new at(1,22))),new n(7,22,22,20,20,new ut(20,new at(1,30))),new n(8,24,24,22,22,new ut(24,new at(1,36))),new n(9,26,26,24,24,new ut(28,new at(1,44))),new n(10,32,32,14,14,new ut(36,new at(1,62))),new n(11,36,36,16,16,new ut(42,new at(1,86))),new n(12,40,40,18,18,new ut(48,new at(1,114))),new n(13,44,44,20,20,new ut(56,new at(1,144))),new n(14,48,48,22,22,new ut(68,new at(1,174))),new n(15,52,52,24,24,new ut(42,new at(2,102))),new n(16,64,64,14,14,new ut(56,new at(2,140))),new n(17,72,72,16,16,new ut(36,new at(4,92))),new n(18,80,80,18,18,new ut(48,new at(4,114))),new n(19,88,88,20,20,new ut(56,new at(4,144))),new n(20,96,96,22,22,new ut(68,new at(4,174))),new n(21,104,104,24,24,new ut(56,new at(6,136))),new n(22,120,120,18,18,new ut(68,new at(6,175))),new n(23,132,132,20,20,new ut(62,new at(8,163))),new n(24,144,144,22,22,new ut(62,new at(8,156),new at(2,155))),new n(25,8,18,6,16,new ut(7,new at(1,5))),new n(26,8,32,6,14,new ut(11,new at(1,10))),new n(27,12,26,10,24,new ut(14,new at(1,16))),new n(28,12,36,10,16,new ut(18,new at(1,22))),new n(29,16,36,14,16,new ut(24,new at(1,32))),new n(30,16,48,14,22,new ut(28,new at(1,49)))]},n.VERSIONS=n.buildVersions(),n})(),M9=(function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new fe;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new zi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return N9.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,a=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth(),l=!1,f=!1,h=!1,p=!1;do if(r===a&&i===0&&!l)e[t++]=this.readCorner1(a,u)&255,r-=2,i+=2,l=!0;else if(r===a-2&&i===0&&(u&3)!==0&&!f)e[t++]=this.readCorner2(a,u)&255,r-=2,i+=2,f=!0;else if(r===a+4&&i===2&&(u&7)===0&&!h)e[t++]=this.readCorner3(a,u)&255,r-=2,i+=2,h=!0;else if(r===a-2&&i===0&&(u&7)===4&&!p)e[t++]=this.readCorner4(a,u)&255,r-=2,i+=2,p=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,u)&255),r-=2,i+=2;while(r>=0&&i<u);r+=1,i+=3;do r>=0&&i<u&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,a,u)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<u);if(t!==this.version.getTotalCodewords())throw new fe;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var a=0;return this.readModule(e-2,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,t,r,i)&&(a|=1),a<<=1,this.readModule(e,t-2,r,i)&&(a|=1),a<<=1,this.readModule(e,t-1,r,i)&&(a|=1),a<<=1,this.readModule(e,t,r,i)&&(a|=1),a},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),u=t/i|0,l=r/a|0,f=u*i,h=l*a,p=new zi(h,f),v=0;v<u;++v)for(var _=v*i,x=0;x<l;++x)for(var A=x*a,S=0;S<i;++S)for(var R=v*(i+2)+1+S,L=_+S,M=0;M<a;++M){var B=x*(a+2)+1+M;if(e.get(B,R)){var G=A+M;p.set(G,L)}}return p},n})(),DA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P9=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,a,u,l=t.getECBlocks(),f=0,h=l.getECBlocks();try{for(var p=DA(h),v=p.next();!v.done;v=p.next()){var _=v.value;f+=_.getCount()}}catch(ze){r={error:ze}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}var x=new Array(f),A=0;try{for(var S=DA(h),R=S.next();!R.done;R=S.next())for(var _=R.value,L=0;L<_.getCount();L++){var M=_.getDataCodewords(),B=l.getECCodewords()+M;x[A++]=new n(M,new Uint8Array(B))}}catch(ze){a={error:ze}}finally{try{R&&!R.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}for(var G=x[0].codewords.length,$=G-l.getECCodewords(),J=$-1,C=0,L=0;L<J;L++)for(var b=0;b<A;b++)x[b].codewords[L]=e[C++];for(var N=t.getVersionNumber()===24,k=N?8:A,b=0;b<k;b++)x[b].codewords[$-1]=e[C++];for(var V=x[0].codewords.length,L=$;L<V;L++)for(var b=0;b<A;b++){var z=N?(b+8)%A:b,P=N&&z>7?L-1:L;x[z].codewords[P]=e[C++]}if(C!==e.length)throw new Ce;return x},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),DS=(function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ce(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,a=this.bytes;if(r>0){var u=8-r,l=e<u?e:u,f=u-l,h=255>>8-l<<f;t=(a[i]&h)>>f,e-=l,r+=l,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var f=8-e,h=255>>f<<f;t=t<<e|(a[i]&h)>>f,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n})(),un;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(un||(un={}));var L9=(function(){function n(){}return n.decode=function(e){var t=new DS(e),r=new Ve,i=new Ve,a=new Array,u=un.ASCII_ENCODE;do if(u===un.ASCII_ENCODE)u=this.decodeAsciiSegment(t,r,i);else{switch(u){case un.C40_ENCODE:this.decodeC40Segment(t,r);break;case un.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case un.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case un.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case un.BASE256_ENCODE:this.decodeBase256Segment(t,r,a);break;default:throw new fe}u=un.ASCII_ENCODE}while(u!==un.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new W0(e,r.toString(),a.length===0?null:a,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var a=e.readBits(8);if(a===0)throw new fe;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),un.ASCII_ENCODE;if(a===129)return un.PAD_ENCODE;if(a<=229){var u=a-130;u<10&&t.append("0"),t.append(""+u)}else switch(a){case 230:return un.C40_ENCODE;case 231:return un.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return un.ANSIX12_ENCODE;case 239:return un.TEXT_ENCODE;case 240:return un.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new fe;break}}while(e.available()>0);return un.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new fe;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new fe}a=0;break;case 3:r?(t.append(String.fromCharCode(f+224)),r=!1):t.append(String.fromCharCode(f+96)),a=0;break;default:throw new fe}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],a=0;do{if(e.available()===8)return;var u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new fe;break;case 1:r?(t.append(String.fromCharCode(f+128)),r=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(f){case 27:t.append("");break;case 30:r=!0;break;default:throw new fe}a=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[f];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),a=0}else throw new fe;break;default:throw new fe}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var a=0;a<3;a++){var u=r[a];switch(u){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(u<14)t.append(String.fromCharCode(u+44));else if(u<40)t.append(String.fromCharCode(u+51));else throw new fe;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),u;if(a===0?u=e.available()/8|0:a<250?u=a:u=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),u<0)throw new fe;for(var l=new Uint8Array(u),f=0;f<u;f++){if(e.available()<8)throw new fe;l[f]=this.unrandomize255State(e.readBits(8),i++)}r.push(l);try{t.append(jr.decode(l,$e.ISO88591))}catch(h){throw new Lf("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n})(),k9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B9=(function(){function n(){this.rsDecoder=new Q0(or.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new M9(e),a=i.getVersion(),u=i.readCodewords(),l=P9.getDataBlocks(u,a),f=0;try{for(var h=k9(l),p=h.next();!p.done;p=h.next()){var v=p.value;f+=v.getNumDataCodewords()}}catch(B){t={error:B}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var _=new Uint8Array(f),x=l.length,A=0;A<x;A++){var S=l[A],R=S.getCodewords(),L=S.getNumDataCodewords();this.correctErrors(R,L);for(var M=0;M<L;M++)_[M*x+A]=R[M]}return L9.decode(_)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),V9=(function(){function n(e){this.image=e,this.rectangleDetector=new cv(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new re;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],a=t[2],u=t[3],l=this.transitionsBetween(r,u)+1,f=this.transitionsBetween(a,u)+1;(l&1)===1&&(l+=1),(f&1)===1&&(f+=1),4*l<7*f&&4*f<7*l&&(l=f=Math.max(l,f));var h=n.sampleGrid(this.image,r,i,a,u,l,f);return new Im(h,[r,i,a,u])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),a=(t.getY()-e.getY())/(r+1);return new xe(e.getX()+i,e.getY()+a)},n.moveAway=function(e,t,r){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<r?a-=1:a+=1,new xe(i,a)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],a=e[2],u=this.transitionsBetween(t,r),l=this.transitionsBetween(r,i),f=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=u,v=[a,t,r,i];return p>l&&(p=l,v[0]=t,v[1]=r,v[2]=i,v[3]=a),p>f&&(p=f,v[0]=r,v[1]=i,v[2]=a,v[3]=t),p>h&&(v[0]=i,v[1]=a,v[2]=t,v[3]=r),v},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],u=this.transitionsBetween(t,a),l=n.shiftPoint(r,i,(u+1)*4),f=n.shiftPoint(i,r,(u+1)*4),h=this.transitionsBetween(l,t),p=this.transitionsBetween(f,a);return h<p?(e[0]=t,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],u=this.transitionsBetween(t,a),l=this.transitionsBetween(r,a),f=n.shiftPoint(t,r,(l+1)*4),h=n.shiftPoint(i,r,(u+1)*4);u=this.transitionsBetween(f,a),l=this.transitionsBetween(h,a);var p=new xe(a.getX()+(i.getX()-r.getX())/(u+1),a.getY()+(i.getY()-r.getY())/(u+1)),v=new xe(a.getX()+(t.getX()-r.getX())/(l+1),a.getY()+(t.getY()-r.getY())/(l+1));if(!this.isValid(p))return this.isValid(v)?v:null;if(!this.isValid(v))return p;var _=this.transitionsBetween(f,p)+this.transitionsBetween(h,p),x=this.transitionsBetween(f,v)+this.transitionsBetween(h,v);return _>x?p:v},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],a=e[3],u=this.transitionsBetween(t,a)+1,l=this.transitionsBetween(i,a)+1,f=n.shiftPoint(t,r,l*4),h=n.shiftPoint(i,r,u*4);u=this.transitionsBetween(f,a)+1,l=this.transitionsBetween(h,a)+1,(u&1)===1&&(u+=1),(l&1)===1&&(l+=1);var p=(t.getX()+r.getX()+i.getX()+a.getX())/4,v=(t.getY()+r.getY()+i.getY()+a.getY())/4;t=n.moveAway(t,p,v),r=n.moveAway(r,p,v),i=n.moveAway(i,p,v),a=n.moveAway(a,p,v);var _,x;return f=n.shiftPoint(t,r,l*4),f=n.shiftPoint(f,a,u*4),_=n.shiftPoint(r,t,l*4),_=n.shiftPoint(_,i,u*4),h=n.shiftPoint(i,a,l*4),h=n.shiftPoint(h,r,u*4),x=n.shiftPoint(a,i,l*4),x=n.shiftPoint(x,t,u*4),[f,_,h,x]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,a,u,l){var f=Cm.getInstance();return f.sampleGrid(e,u,l,.5,.5,u-.5,.5,u-.5,l-.5,.5,l-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),u=Math.trunc(t.getY()),l=Math.abs(u-i)>Math.abs(a-r);if(l){var f=r;r=i,i=f,f=a,a=u,u=f}for(var h=Math.abs(a-r),p=Math.abs(u-i),v=-h/2,_=i<u?1:-1,x=r<a?1:-1,A=0,S=this.image.get(l?i:r,l?r:i),R=r,L=i;R!==a;R+=x){var M=this.image.get(l?L:R,l?R:L);if(M!==S&&(A++,S=M),v+=p,v>0){if(L===u)break;L+=_,v-=h}}return A},n})(),dv=(function(){function n(){this.decoder=new B9}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(kt.PURE_BARCODE)){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(a),i=n.NO_POINTS}else{var u=new V9(e.getBlackMatrix()).detect();r=this.decoder.decode(u.getBits()),i=u.getPoints()}var l=r.getRawBytes(),f=new Hn(r.getText(),l,8*l.length,i,Ie.DATA_MATRIX,St.currentTimeMillis()),h=r.getByteSegments();h!=null&&f.putMetadata(Ln.BYTE_SEGMENTS,h);var p=r.getECLevel();return p!=null&&f.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p),f},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new re;var i=this.moduleSize(t,e),a=t[1],u=r[1],l=t[0],f=r[0],h=(f-l+1)/i,p=(u-a+1)/i;if(h<=0||p<=0)throw new re;var v=i/2;a+=v,l+=v;for(var _=new zi(h,p),x=0;x<p;x++)for(var A=a+x*i,S=0;S<h;S++)e.get(l+S*i,A)&&_.set(S,x);return _},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],a=e[1];i<r&&t.get(i,a);)i++;if(i===r)throw new re;var u=i-e[0];if(u===0)throw new re;return u},n.NO_POINTS=[],n})(),F9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){F9(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new dv,t)||this}return e})(yl);var Gu;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Gu||(Gu={}));var U9=(function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new ni(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ce;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Gu.L,"L",1),n.M=new n(Gu.M,"M",0),n.Q=new n(Gu.Q,"Q",3),n.H=new n(Gu.H,"H",2),n})(),z9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OS=(function(){function n(e){this.errorCorrectionLevel=U9.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return Ue.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,a=Number.MAX_SAFE_INTEGER,u=0;try{for(var l=z9(n.FORMAT_INFO_DECODE_LOOKUP),f=l.next();!f.done;f=l.next()){var h=f.value,p=h[0];if(p===e||p===t)return new n(h[1]);var v=n.numBitsDiffering(e,p);v<a&&(u=h[1],a=v),e!==t&&(v=n.numBitsDiffering(t,p),v<a&&(u=h[1],a=v))}}catch(_){r={error:_}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return a<=3?new n(u):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n})(),j9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var a=j9(i),u=a.next();!u.done;u=a.next()){var l=u.value;r+=l.getCount()}}catch(f){e={error:f}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n})(),O=(function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n})(),H9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ss=(function(){function n(e,t){for(var r,i,a=[],u=2;u<arguments.length;u++)a[u-2]=arguments[u];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var l=0,f=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=H9(h),v=p.next();!v.done;v=p.next()){var _=v.value;l+=_.getCount()*(_.getDataCodewords()+f)}}catch(x){r={error:x}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new fe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new fe}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ce;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var a=n.VERSION_DECODE_INFO[i];if(a===e)return n.getVersionForNumber(i+7);var u=OS.numBitsDiffering(e,a);u<t&&(r=i+7,t=u)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new zi(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var a=this.alignmentPatternCenters[i]-2,u=0;u<r;u++)i===0&&(u===0||u===r-1)||i===r-1&&u===0||t.setRegion(this.alignmentPatternCenters[u]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new Y(7,new O(1,19)),new Y(10,new O(1,16)),new Y(13,new O(1,13)),new Y(17,new O(1,9))),new n(2,Int32Array.from([6,18]),new Y(10,new O(1,34)),new Y(16,new O(1,28)),new Y(22,new O(1,22)),new Y(28,new O(1,16))),new n(3,Int32Array.from([6,22]),new Y(15,new O(1,55)),new Y(26,new O(1,44)),new Y(18,new O(2,17)),new Y(22,new O(2,13))),new n(4,Int32Array.from([6,26]),new Y(20,new O(1,80)),new Y(18,new O(2,32)),new Y(26,new O(2,24)),new Y(16,new O(4,9))),new n(5,Int32Array.from([6,30]),new Y(26,new O(1,108)),new Y(24,new O(2,43)),new Y(18,new O(2,15),new O(2,16)),new Y(22,new O(2,11),new O(2,12))),new n(6,Int32Array.from([6,34]),new Y(18,new O(2,68)),new Y(16,new O(4,27)),new Y(24,new O(4,19)),new Y(28,new O(4,15))),new n(7,Int32Array.from([6,22,38]),new Y(20,new O(2,78)),new Y(18,new O(4,31)),new Y(18,new O(2,14),new O(4,15)),new Y(26,new O(4,13),new O(1,14))),new n(8,Int32Array.from([6,24,42]),new Y(24,new O(2,97)),new Y(22,new O(2,38),new O(2,39)),new Y(22,new O(4,18),new O(2,19)),new Y(26,new O(4,14),new O(2,15))),new n(9,Int32Array.from([6,26,46]),new Y(30,new O(2,116)),new Y(22,new O(3,36),new O(2,37)),new Y(20,new O(4,16),new O(4,17)),new Y(24,new O(4,12),new O(4,13))),new n(10,Int32Array.from([6,28,50]),new Y(18,new O(2,68),new O(2,69)),new Y(26,new O(4,43),new O(1,44)),new Y(24,new O(6,19),new O(2,20)),new Y(28,new O(6,15),new O(2,16))),new n(11,Int32Array.from([6,30,54]),new Y(20,new O(4,81)),new Y(30,new O(1,50),new O(4,51)),new Y(28,new O(4,22),new O(4,23)),new Y(24,new O(3,12),new O(8,13))),new n(12,Int32Array.from([6,32,58]),new Y(24,new O(2,92),new O(2,93)),new Y(22,new O(6,36),new O(2,37)),new Y(26,new O(4,20),new O(6,21)),new Y(28,new O(7,14),new O(4,15))),new n(13,Int32Array.from([6,34,62]),new Y(26,new O(4,107)),new Y(22,new O(8,37),new O(1,38)),new Y(24,new O(8,20),new O(4,21)),new Y(22,new O(12,11),new O(4,12))),new n(14,Int32Array.from([6,26,46,66]),new Y(30,new O(3,115),new O(1,116)),new Y(24,new O(4,40),new O(5,41)),new Y(20,new O(11,16),new O(5,17)),new Y(24,new O(11,12),new O(5,13))),new n(15,Int32Array.from([6,26,48,70]),new Y(22,new O(5,87),new O(1,88)),new Y(24,new O(5,41),new O(5,42)),new Y(30,new O(5,24),new O(7,25)),new Y(24,new O(11,12),new O(7,13))),new n(16,Int32Array.from([6,26,50,74]),new Y(24,new O(5,98),new O(1,99)),new Y(28,new O(7,45),new O(3,46)),new Y(24,new O(15,19),new O(2,20)),new Y(30,new O(3,15),new O(13,16))),new n(17,Int32Array.from([6,30,54,78]),new Y(28,new O(1,107),new O(5,108)),new Y(28,new O(10,46),new O(1,47)),new Y(28,new O(1,22),new O(15,23)),new Y(28,new O(2,14),new O(17,15))),new n(18,Int32Array.from([6,30,56,82]),new Y(30,new O(5,120),new O(1,121)),new Y(26,new O(9,43),new O(4,44)),new Y(28,new O(17,22),new O(1,23)),new Y(28,new O(2,14),new O(19,15))),new n(19,Int32Array.from([6,30,58,86]),new Y(28,new O(3,113),new O(4,114)),new Y(26,new O(3,44),new O(11,45)),new Y(26,new O(17,21),new O(4,22)),new Y(26,new O(9,13),new O(16,14))),new n(20,Int32Array.from([6,34,62,90]),new Y(28,new O(3,107),new O(5,108)),new Y(26,new O(3,41),new O(13,42)),new Y(30,new O(15,24),new O(5,25)),new Y(28,new O(15,15),new O(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new Y(28,new O(4,116),new O(4,117)),new Y(26,new O(17,42)),new Y(28,new O(17,22),new O(6,23)),new Y(30,new O(19,16),new O(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new Y(28,new O(2,111),new O(7,112)),new Y(28,new O(17,46)),new Y(30,new O(7,24),new O(16,25)),new Y(24,new O(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new Y(30,new O(4,121),new O(5,122)),new Y(28,new O(4,47),new O(14,48)),new Y(30,new O(11,24),new O(14,25)),new Y(30,new O(16,15),new O(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new Y(30,new O(6,117),new O(4,118)),new Y(28,new O(6,45),new O(14,46)),new Y(30,new O(11,24),new O(16,25)),new Y(30,new O(30,16),new O(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new Y(26,new O(8,106),new O(4,107)),new Y(28,new O(8,47),new O(13,48)),new Y(30,new O(7,24),new O(22,25)),new Y(30,new O(22,15),new O(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new Y(28,new O(10,114),new O(2,115)),new Y(28,new O(19,46),new O(4,47)),new Y(28,new O(28,22),new O(6,23)),new Y(30,new O(33,16),new O(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new Y(30,new O(8,122),new O(4,123)),new Y(28,new O(22,45),new O(3,46)),new Y(30,new O(8,23),new O(26,24)),new Y(30,new O(12,15),new O(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new O(3,117),new O(10,118)),new Y(28,new O(3,45),new O(23,46)),new Y(30,new O(4,24),new O(31,25)),new Y(30,new O(11,15),new O(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new O(7,116),new O(7,117)),new Y(28,new O(21,45),new O(7,46)),new Y(30,new O(1,23),new O(37,24)),new Y(30,new O(19,15),new O(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new O(5,115),new O(10,116)),new Y(28,new O(19,47),new O(10,48)),new Y(30,new O(15,24),new O(25,25)),new Y(30,new O(23,15),new O(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new O(13,115),new O(3,116)),new Y(28,new O(2,46),new O(29,47)),new Y(30,new O(42,24),new O(1,25)),new Y(30,new O(23,15),new O(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new O(17,115)),new Y(28,new O(10,46),new O(23,47)),new Y(30,new O(10,24),new O(35,25)),new Y(30,new O(19,15),new O(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new O(17,115),new O(1,116)),new Y(28,new O(14,46),new O(21,47)),new Y(30,new O(29,24),new O(19,25)),new Y(30,new O(11,15),new O(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new O(13,115),new O(6,116)),new Y(28,new O(14,46),new O(23,47)),new Y(30,new O(44,24),new O(7,25)),new Y(30,new O(59,16),new O(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new O(12,121),new O(7,122)),new Y(28,new O(12,47),new O(26,48)),new Y(30,new O(39,24),new O(14,25)),new Y(30,new O(22,15),new O(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new O(6,121),new O(14,122)),new Y(28,new O(6,47),new O(34,48)),new Y(30,new O(46,24),new O(10,25)),new Y(30,new O(2,15),new O(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new O(17,122),new O(4,123)),new Y(28,new O(29,46),new O(14,47)),new Y(30,new O(49,24),new O(10,25)),new Y(30,new O(24,15),new O(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new O(4,122),new O(18,123)),new Y(28,new O(13,46),new O(32,47)),new Y(30,new O(48,24),new O(14,25)),new Y(30,new O(42,15),new O(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new O(20,117),new O(4,118)),new Y(28,new O(40,47),new O(7,48)),new Y(30,new O(43,24),new O(22,25)),new Y(30,new O(10,15),new O(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new O(19,118),new O(6,119)),new Y(28,new O(18,47),new O(31,48)),new Y(30,new O(34,24),new O(34,25)),new Y(30,new O(20,15),new O(61,16)))],n})(),_n;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(_n||(_n={}));var OA=(function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[_n.DATA_MASK_000,new n(_n.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[_n.DATA_MASK_001,new n(_n.DATA_MASK_001,function(e,t){return(e&1)===0})],[_n.DATA_MASK_010,new n(_n.DATA_MASK_010,function(e,t){return t%3===0})],[_n.DATA_MASK_011,new n(_n.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[_n.DATA_MASK_100,new n(_n.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[_n.DATA_MASK_101,new n(_n.DATA_MASK_101,function(e,t){return e*t%6===0})],[_n.DATA_MASK_110,new n(_n.DATA_MASK_110,function(e,t){return e*t%6<3})],[_n.DATA_MASK_111,new n(_n.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n})(),G9=(function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new fe;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),a=0,u=i-7,r=i-1;r>=u;r--)a=this.copyBit(8,r,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=OS.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new fe},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ss.getVersionForNumber(t);for(var r=0,i=e-11,a=5;a>=0;a--)for(var u=e-9;u>=i;u--)r=this.copyBit(u,a,r);var l=Ss.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;r=0;for(var u=5;u>=0;u--)for(var a=e-9;a>=i;a--)r=this.copyBit(u,a,r);if(l=Ss.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new fe},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=OA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),u=!0,l=new Uint8Array(t.getTotalCodewords()),f=0,h=0,p=0,v=i-1;v>0;v-=2){v===6&&v--;for(var _=0;_<i;_++)for(var x=u?i-1-_:_,A=0;A<2;A++)a.get(v-A,x)||(p++,h<<=1,this.bitMatrix.get(v-A,x)&&(h|=1),p===8&&(l[f++]=h,p=0,h=0));u=!u}if(f!==t.getTotalCodewords())throw new fe;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=OA.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n})(),NA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q9=(function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,a,u,l;if(e.length!==t.getTotalCodewords())throw new Ce;var f=t.getECBlocksForLevel(r),h=0,p=f.getECBlocks();try{for(var v=NA(p),_=v.next();!_.done;_=v.next()){var x=_.value;h+=x.getCount()}}catch(P){i={error:P}}finally{try{_&&!_.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}var A=new Array(h),S=0;try{for(var R=NA(p),L=R.next();!L.done;L=R.next())for(var x=L.value,M=0;M<x.getCount();M++){var B=x.getDataCodewords(),G=f.getECCodewordsPerBlock()+B;A[S++]=new n(B,new Uint8Array(G))}}catch(P){u={error:P}}finally{try{L&&!L.done&&(l=R.return)&&l.call(R)}finally{if(u)throw u.error}}for(var $=A[0].codewords.length,J=A.length-1;J>=0;){var C=A[J].codewords.length;if(C===$)break;J--}J++;for(var b=$-f.getECCodewordsPerBlock(),N=0,M=0;M<b;M++)for(var k=0;k<S;k++)A[k].codewords[M]=e[N++];for(var k=J;k<S;k++)A[k].codewords[b]=e[N++];for(var V=A[0].codewords.length,M=b;M<V;M++)for(var k=0;k<S;k++){var z=k<J?M:M+1;A[k].codewords[z]=e[N++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n})(),Lr;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(Lr||(Lr={}));var Rt=(function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ce;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(Lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(Lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(Lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(Lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(Lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(Lr.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(Lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(Lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(Lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(Lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n})(),X9=(function(){function n(){}return n.decode=function(e,t,r,i){var a=new DS(e),u=new Ve,l=new Array,f=-1,h=-1;try{var p=null,v=!1,_=void 0;do{if(a.available()<4)_=Rt.TERMINATOR;else{var x=a.readBits(4);_=Rt.forBits(x)}switch(_){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:v=!0;break;case Rt.STRUCTURED_APPEND:if(a.available()<16)throw new fe;f=a.readBits(8),h=a.readBits(8);break;case Rt.ECI:var A=n.parseECIValue(a);if(p=fn.getCharacterSetECIByValue(A),p===null)throw new fe;break;case Rt.HANZI:var S=a.readBits(4),R=a.readBits(_.getCharacterCountBits(t));S===n.GB2312_SUBSET&&n.decodeHanziSegment(a,u,R);break;default:var L=a.readBits(_.getCharacterCountBits(t));switch(_){case Rt.NUMERIC:n.decodeNumericSegment(a,u,L);break;case Rt.ALPHANUMERIC:n.decodeAlphanumericSegment(a,u,L,v);break;case Rt.BYTE:n.decodeByteSegment(a,u,L,p,l,i);break;case Rt.KANJI:n.decodeKanjiSegment(a,u,L);break;default:throw new fe}break}}while(_!==Rt.TERMINATOR)}catch{throw new fe}return new W0(e,u.toString(),l.length===0?null:l,r===null?null:r.toString(),f,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new fe;for(var i=new Uint8Array(2*r),a=0;r>0;){var u=e.readBits(13),l=u/96<<8&4294967295|u%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,r--}try{t.append(jr.decode(i,$e.GB2312))}catch(f){throw new fe(f)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new fe;for(var i=new Uint8Array(2*r),a=0;r>0;){var u=e.readBits(13),l=u/192<<8&4294967295|u%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,r--}try{t.append(jr.decode(i,$e.SHIFT_JIS))}catch(f){throw new fe(f)}},n.decodeByteSegment=function(e,t,r,i,a,u){if(8*r>e.available())throw new fe;for(var l=new Uint8Array(r),f=0;f<r;f++)l[f]=e.readBits(8);var h;i===null?h=$e.guessEncoding(l,u):h=i.getName();try{t.append(jr.decode(l,h))}catch(p){throw new fe(p)}a.push(l)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new fe;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var a=t.length();r>1;){if(e.available()<11)throw new fe;var u=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(u/45))),t.append(n.toAlphaNumericChar(u%45)),r-=2}if(r===1){if(e.available()<6)throw new fe;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var l=a;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new fe;var i=e.readBits(10);if(i>=1e3)throw new fe;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new fe;var a=e.readBits(7);if(a>=100)throw new fe;t.append(n.toAlphaNumericChar(Math.floor(a/10))),t.append(n.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new fe;var u=e.readBits(4);if(u>=10)throw new fe;t.append(n.toAlphaNumericChar(u))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new fe},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n})(),NS=(function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n})(),MA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K9=(function(){function n(){this.rsDecoder=new Q0(or.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(zi.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new G9(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(u){i=u}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var a=this.decodeBitMatrixParser(r,t);return a.setOther(new NS(!0)),a}catch(u){throw i!==null?i:u}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,a,u,l=e.readVersion(),f=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=q9.getDataBlocks(h,l,f),v=0;try{for(var _=MA(p),x=_.next();!x.done;x=_.next()){var A=x.value;v+=A.getNumDataCodewords()}}catch(J){r={error:J}}finally{try{x&&!x.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}var S=new Uint8Array(v),R=0;try{for(var L=MA(p),M=L.next();!M.done;M=L.next()){var A=M.value,B=A.getCodewords(),G=A.getNumDataCodewords();this.correctErrors(B,G);for(var $=0;$<G;$++)S[R++]=B[$]}}catch(J){a={error:J}}finally{try{M&&!M.done&&(u=L.return)&&u.call(L)}finally{if(a)throw a.error}}return X9.decode(S,l,f,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=r[i]},n})(),Y9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),W9=(function(n){Y9(e,n);function e(t,r,i){var a=n.call(this,t,r)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=(this.getX()+r)/2,u=(this.getY()+t)/2,l=(this.estimatedModuleSize+i)/2;return new e(a,u,l)},e})(xe),Q9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$9=(function(){function n(e,t,r,i,a,u,l){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=a,this.moduleSize=u,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,a=this.startY+t/2,u=new Int32Array(3),l=this.image,f=0;f<t;f++){var h=a+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));u[0]=0,u[1]=0,u[2]=0;for(var p=e;p<i&&!l.get(p,h);)p++;for(var v=0;p<i;){if(l.get(p,h))if(v===1)u[1]++;else if(v===2){if(this.foundPatternCross(u)){var _=this.handlePossibleCenter(u,h,p);if(_!==null)return _}u[0]=u[2],u[1]=1,u[2]=0,v=1}else u[++v]++;else v===1&&v++,u[v]++;p++}if(this.foundPatternCross(u)){var _=this.handlePossibleCenter(u,h,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var a=this.image,u=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var f=e;f>=0&&a.get(t,f)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&!a.get(t,f)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=e+1;f<u&&a.get(t,f)&&l[1]<=r;)l[1]++,f++;if(f===u||l[1]>r)return NaN;for(;f<u&&!a.get(t,f)&&l[2]<=r;)l[2]++,f++;if(l[2]>r)return NaN;var h=l[0]+l[1]+l[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,a,u=e[0]+e[1]+e[2],l=n.centerFromEnd(e,r),f=this.crossCheckVertical(t,l,2*e[1],u);if(!isNaN(f)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=Q9(this.possibleCenters),v=p.next();!v.done;v=p.next()){var _=v.value;if(_.aboutEquals(h,f,l))return _.combineEstimate(f,l,h)}}catch(A){i={error:A}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var x=new W9(l,f,h);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null},n})(),Z9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),J9=(function(n){Z9(e,n);function e(t,r,i,a){var u=n.call(this,t,r)||this;return u.estimatedModuleSize=i,u.count=a,a===void 0&&(u.count=1),u}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var a=this.count+1,u=(this.count*this.getX()+r)/a,l=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+i)/a;return new e(u,l,f,a)},e})(xe),e7=(function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n})(),Dc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t7=(function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e!=null&&e.get(kt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),u=i.getWidth(),l=Math.floor(3*a/(4*n.MAX_MODULES));(l<n.MIN_SKIP||t)&&(l=n.MIN_SKIP);for(var f=!1,h=new Int32Array(5),p=l-1;p<a&&!f;p+=l){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var v=0,_=0;_<u;_++)if(i.get(_,p))(v&1)===1&&v++,h[v]++;else if((v&1)===0)if(v===4)if(n.foundPatternCross(h)){var x=this.handlePossibleCenter(h,p,_,r);if(x===!0)if(l=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>h[2]&&(p+=A-h[2]-l,_=u-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;continue}v=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;else h[++v]++;else h[v]++;if(n.foundPatternCross(h)){var x=this.handlePossibleCenter(h,p,u,r);x===!0&&(l=h[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return xe.orderBestPatterns(S),new e7(S)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,u=a/2;return Math.abs(a-e[0])<u&&Math.abs(a-e[1])<u&&Math.abs(3*a-e[2])<3*u&&Math.abs(a-e[3])<u&&Math.abs(a-e[4])<u},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var a=this.getCrossCheckStateCount(),u=0,l=this.image;e>=u&&t>=u&&l.get(t-u,e-u);)a[2]++,u++;if(e<u||t<u)return!1;for(;e>=u&&t>=u&&!l.get(t-u,e-u)&&a[1]<=r;)a[1]++,u++;if(e<u||t<u||a[1]>r)return!1;for(;e>=u&&t>=u&&l.get(t-u,e-u)&&a[0]<=r;)a[0]++,u++;if(a[0]>r)return!1;var f=l.getHeight(),h=l.getWidth();for(u=1;e+u<f&&t+u<h&&l.get(t+u,e+u);)a[2]++,u++;if(e+u>=f||t+u>=h)return!1;for(;e+u<f&&t+u<h&&!l.get(t+u,e+u)&&a[3]<r;)a[3]++,u++;if(e+u>=f||t+u>=h||a[3]>=r)return!1;for(;e+u<f&&t+u<h&&l.get(t+u,e+u)&&a[4]<r;)a[4]++,u++;if(a[4]>=r)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&n.foundPatternCross(a)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var a=this.image,u=a.getHeight(),l=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(t,f);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(t,f)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&a.get(t,f)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=e+1;f<u&&a.get(t,f);)l[2]++,f++;if(f===u)return NaN;for(;f<u&&!a.get(t,f)&&l[3]<r;)l[3]++,f++;if(f===u||l[3]>=r)return NaN;for(;f<u&&a.get(t,f)&&l[4]<r;)l[4]++,f++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var a=this.image,u=a.getWidth(),l=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(f,t);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(f,t)&&l[1]<=r;)l[1]++,f--;if(f<0||l[1]>r)return NaN;for(;f>=0&&a.get(f,t)&&l[0]<=r;)l[0]++,f--;if(l[0]>r)return NaN;for(f=e+1;f<u&&a.get(f,t);)l[2]++,f++;if(f===u)return NaN;for(;f<u&&!a.get(f,t)&&l[3]<r;)l[3]++,f++;if(f===u||l[3]>=r)return NaN;for(;f<u&&a.get(f,t)&&l[4]<r;)l[4]++,f++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,f):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],u=n.centerFromEnd(e,r),l=this.crossCheckVertical(t,Math.floor(u),e[2],a);if(!isNaN(l)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(l),e[2],a),!isNaN(u)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(u),e[2],a)))){for(var f=a/7,h=!1,p=this.possibleCenters,v=0,_=p.length;v<_;v++){var x=p[v];if(x.aboutEquals(f,l,u)){p[v]=x.combineEstimate(l,u,f),h=!0;break}}if(!h){var A=new J9(u,l,f);p.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var a=Dc(this.possibleCenters),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,a=0,u=0,l=this.possibleCenters.length;try{for(var f=Dc(this.possibleCenters),h=f.next();!h.done;h=f.next()){var p=h.value;p.getCount()>=n.CENTER_QUORUM&&(a++,u+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{h&&!h.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}if(a<3)return!1;var v=u/l,_=0;try{for(var x=Dc(this.possibleCenters),A=x.next();!A.done;A=x.next()){var p=A.value;_+=Math.abs(p.getEstimatedModuleSize()-v)}}catch(S){r={error:S}}finally{try{A&&!A.done&&(i=x.return)&&i.call(x)}finally{if(r)throw r.error}}return _<=.05*u},n.prototype.selectBestPatterns=function(){var e,t,r,i,a=this.possibleCenters.length;if(a<3)throw new re;var u=this.possibleCenters,l;if(a>3){var f=0,h=0;try{for(var p=Dc(this.possibleCenters),v=p.next();!v.done;v=p.next()){var _=v.value,x=_.getEstimatedModuleSize();f+=x,h+=x*x}}catch($){e={error:$}}finally{try{v&&!v.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}l=f/a;var A=Math.sqrt(h/a-l*l);u.sort(function($,J){var C=Math.abs(J.getEstimatedModuleSize()-l),b=Math.abs($.getEstimatedModuleSize()-l);return C<b?-1:C>b?1:0});for(var S=Math.max(.2*l,A),R=0;R<u.length&&u.length>3;R++){var L=u[R];Math.abs(L.getEstimatedModuleSize()-l)>S&&(u.splice(R,1),R--)}}if(u.length>3){var f=0;try{for(var M=Dc(u),B=M.next();!B.done;B=M.next()){var G=B.value;f+=G.getEstimatedModuleSize()}}catch(J){r={error:J}}finally{try{B&&!B.done&&(i=M.return)&&i.call(M)}finally{if(r)throw r.error}}l=f/u.length,u.sort(function(J,C){if(C.getCount()===J.getCount()){var b=Math.abs(C.getEstimatedModuleSize()-l),N=Math.abs(J.getEstimatedModuleSize()-l);return b<N?1:b>N?-1:0}else return C.getCount()-J.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n})(),n7=(function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(kt.NEED_RESULT_POINT_CALLBACK);var t=new t7(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,r,i);if(a<1)throw new re("No pattern found in proccess finder.");var u=n.computeDimension(t,r,i,a),l=Ss.getProvisionalVersionForDimension(u),f=l.getDimensionForVersion()-7,h=null;if(l.getAlignmentPatternCenters().length>0)for(var p=r.getX()-t.getX()+i.getX(),v=r.getY()-t.getY()+i.getY(),_=1-3/f,x=Math.floor(t.getX()+_*(p-t.getX())),A=Math.floor(t.getY()+_*(v-t.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,x,A,S);break}catch(B){if(!(B instanceof re))throw B}var R=n.createTransform(t,r,i,h,u),L=n.sampleGrid(this.image,R,u),M;return h===null?M=[i,t,r]:M=[i,t,r,h],new Im(L,M)},n.createTransform=function(e,t,r,i,a){var u=a-3.5,l,f,h,p;return i!==null?(l=i.getX(),f=i.getY(),h=u-3,p=h):(l=t.getX()-e.getX()+r.getX(),f=t.getY()-e.getY()+r.getY(),h=u,p=u),IS.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,h,p,3.5,u,e.getX(),e.getY(),t.getX(),t.getY(),l,f,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Cm.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var a=nt.round(xe.distance(e,t)/i),u=nt.round(xe.distance(e,r)/i),l=Math.floor((a+u)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new re("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,r,i),u=1,l=e-(r-e);l<0?(u=e/(e-l),l=0):l>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var f=Math.floor(t-(i-t)*u);return u=1,f<0?(u=t/(t-f),f=0):f>=this.image.getHeight()&&(u=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),l=Math.floor(e+(l-e)*u),a+=this.sizeOfBlackWhiteBlackRun(e,t,l,f),a-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var a=Math.abs(i-t)>Math.abs(r-e);if(a){var u=e;e=t,t=u,u=r,r=i,i=u}for(var l=Math.abs(r-e),f=Math.abs(i-t),h=-l/2,p=e<r?1:-1,v=t<i?1:-1,_=0,x=r+p,A=e,S=t;A!==x;A+=p){var R=a?S:A,L=a?A:S;if(_===1===this.image.get(R,L)){if(_===2)return nt.distance(A,S,e,t);_++}if(h+=f,h>0){if(S===i)break;S+=v,h-=l}}return _===2?nt.distance(r+p,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var a=Math.floor(i*e),u=Math.max(0,t-a),l=Math.min(this.image.getWidth()-1,t+a);if(l-u<e*3)throw new re("Alignment top exceeds estimated module size.");var f=Math.max(0,r-a),h=Math.min(this.image.getHeight()-1,r+a);if(h-f<e*3)throw new re("Alignment bottom exceeds estimated module size.");var p=new $9(this.image,u,f,l-u,h-f,e,this.resultPointCallback);return p.find()},n})(),pv=(function(){function n(){this.decoder=new K9}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(kt.PURE_BARCODE)!==void 0){var a=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(a,t),i=n.NO_POINTS}else{var u=new n7(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(u.getBits(),t),i=u.getPoints()}r.getOther()instanceof NS&&r.getOther().applyMirroredCorrection(i);var l=new Hn(r.getText(),r.getRawBytes(),void 0,i,Ie.QR_CODE,void 0),f=r.getByteSegments();f!==null&&l.putMetadata(Ln.BYTE_SEGMENTS,f);var h=r.getECLevel();return h!==null&&l.putMetadata(Ln.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(l.putMetadata(Ln.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(Ln.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new re;var i=this.moduleSize(t,e),a=t[1],u=r[1],l=t[0],f=r[0];if(l>=f||a>=u)throw new re;if(u-a!==f-l&&(f=l+(u-a),f>=e.getWidth()))throw new re;var h=Math.round((f-l+1)/i),p=Math.round((u-a+1)/i);if(h<=0||p<=0)throw new re;if(p!==h)throw new re;var v=Math.floor(i/2);a+=v,l+=v;var _=l+Math.floor((h-1)*i)-f;if(_>0){if(_>v)throw new re;l-=_}var x=a+Math.floor((p-1)*i)-u;if(x>0){if(x>v)throw new re;a-=x}for(var A=new zi(h,p),S=0;S<p;S++)for(var R=a+Math.floor(S*i),L=0;L<h;L++)e.get(l+Math.floor(L*i),R)&&A.set(L,S);return A},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),a=e[0],u=e[1],l=!0,f=0;a<i&&u<r;){if(l!==t.get(a,u)){if(++f===5)break;l=!l}a++,u++}if(a===i||u===r)throw new re;return(a-e[0])/7},n.NO_POINTS=new Array,n})(),r7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=(function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return nt.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var u=r7(e),l=u.next();!l.done;l=u.next()){var f=l.value;i[a++]=f}}catch(h){t={error:h}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=hn.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n})(),i7=(function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n})(),a7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o7=(function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),a=n.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=n.detect(r,i)),new i7(i,a)},n.detect=function(e,t){for(var r,i,a=new Array,u=0,l=0,f=!1;u<t.getHeight();){var h=n.findVertices(t,u,l);if(h[0]==null&&h[3]==null){if(!f)break;f=!1,l=0;try{for(var p=(r=void 0,a7(a)),v=p.next();!v.done;v=p.next()){var _=v.value;_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())))}}catch(x){r={error:x}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}u+=n.ROW_STEP;continue}if(f=!0,a.push(h),!e)break;h[2]!=null?(l=Math.trunc(h[2].getX()),u=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),u=Math.trunc(h[4].getY()))}return a},n.findVertices=function(e,t,r){var i=e.getHeight(),a=e.getWidth(),u=new Array(8);return n.copyToResult(u,n.findRowsWithPattern(e,i,a,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),u[4]!=null&&(r=Math.trunc(u[4].getX()),t=Math.trunc(u[4].getY())),n.copyToResult(u,n.findRowsWithPattern(e,i,a,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),u},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,a,u){for(var l=new Array(4),f=!1,h=new Int32Array(u.length);i<t;i+=n.ROW_STEP){var p=n.findGuardPattern(e,a,i,r,!1,u,h);if(p!=null){for(;i>0;){var v=n.findGuardPattern(e,a,--i,r,!1,u,h);if(v!=null)p=v;else{i++;break}}l[0]=new xe(p[0],i),l[1]=new xe(p[1],i),f=!0;break}}var _=i+1;if(f){for(var x=0,v=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);_<t;_++){var p=n.findGuardPattern(e,v[0],_,r,!1,u,h);if(p!=null&&Math.abs(v[0]-p[0])<n.MAX_PATTERN_DRIFT&&Math.abs(v[1]-p[1])<n.MAX_PATTERN_DRIFT)v=p,x=0;else{if(x>n.SKIPPED_ROW_COUNT_MAX)break;x++}}_-=x+1,l[2]=new xe(v[0],_),l[3]=new xe(v[1],_)}return _-i<n.BARCODE_MIN_HEIGHT&&hn.fill(l,null),l},n.findGuardPattern=function(e,t,r,i,a,u,l){hn.fillWithin(l,0,l.length,0);for(var f=t,h=0;e.get(f,r)&&f>0&&h++<n.MAX_PIXEL_DRIFT;)f--;for(var p=f,v=0,_=u.length,x=a;p<i;p++){var A=e.get(p,r);if(A!==x)l[v]++;else{if(v===_-1){if(n.patternMatchVariance(l,u,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([f,p]);f+=l[0]+l[1],St.arraycopy(l,2,l,0,v-1),l[v-1]=0,l[v]=0,v--}else v++;l[v]=1,x=!x}}return v===_-1&&n.patternMatchVariance(l,u,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([f,p-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,a=0,u=0,l=0;l<i;l++)a+=e[l],u+=t[l];if(a<u)return 1/0;var f=a/u;r*=f;for(var h=0,p=0;p<i;p++){var v=e[p],_=t[p]*f,x=v>_?v-_:_-v;if(x>r)return 1/0;h+=x}return h/a},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n})(),s7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xs=(function(){function n(e,t){if(t.length===0)throw new Ce;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=s7(this.coefficients),u=a.next();!u.done;u=a.next()){var l=u.value;i=this.field.add(i,l)}}catch(v){t={error:v}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i}for(var f=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)f=this.field.add(this.field.multiply(e,f),this.coefficients[p]);return f},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var a=new Int32Array(r.length),u=r.length-t.length;St.arraycopy(r,0,a,0,u);for(var l=u;l<r.length;l++)a[l]=this.field.add(t[l-u],r[l]);return new n(this.field,a)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,a=i.length,u=new Int32Array(r+a-1),l=0;l<r;l++)for(var f=t[l],h=0;h<a;h++)u[l+h]=this.field.add(u[l+h],this.field.multiply(f,i[h]));return new n(this.field,u)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new Ve,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n})(),u7=(function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new SS;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n})(),l7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),c7=(function(n){l7(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,u=0;u<t;u++)i.expTable[u]=a,a=a*r%t;for(var u=0;u<t-1;u++)i.logTable[i.expTable[u]]=u;return i.zero=new xs(i,new Int32Array([0])),i.one=new xs(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ce;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new xs(this,i)},e.PDF417_GF=new e(Je.NUMBER_OF_CODEWORDS,3),e})(u7),f7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h7=(function(){function n(){this.field=c7.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,a,u=new xs(this.field,e),l=new Int32Array(t),f=!1,h=t;h>0;h--){var p=u.evaluateAt(this.field.exp(h));l[t-h]=p,p!==0&&(f=!0)}if(!f)return 0;var v=this.field.getOne();if(r!=null)try{for(var _=f7(r),x=_.next();!x.done;x=_.next()){var A=x.value,S=this.field.exp(e.length-1-A),R=new xs(this.field,new Int32Array([this.field.subtract(0,S),1]));v=v.multiply(R)}}catch(b){i={error:b}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var L=new xs(this.field,l),M=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),L,t),B=M[0],G=M[1],$=this.findErrorLocations(B),J=this.findErrorMagnitudes(G,B,$),h=0;h<$.length;h++){var C=e.length-1-this.field.log($[h]);if(C<0)throw An.getChecksumInstance();e[C]=this.field.subtract(e[C],J[h])}return $.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,u=t,l=this.field.getZero(),f=this.field.getOne();u.getDegree()>=Math.round(r/2);){var h=a,p=l;if(a=u,l=f,a.isZero())throw An.getChecksumInstance();u=h;for(var v=this.field.getZero(),_=a.getCoefficient(a.getDegree()),x=this.field.inverse(_);u.getDegree()>=a.getDegree()&&!u.isZero();){var A=u.getDegree()-a.getDegree(),S=this.field.multiply(u.getCoefficient(u.getDegree()),x);v=v.add(this.field.buildMonomial(A,S)),u=u.subtract(a.multiplyByMonomial(A,S))}f=v.multiply(l).subtract(p).negative()}var R=f.getCoefficient(0);if(R===0)throw An.getChecksumInstance();var L=this.field.inverse(R),M=f.multiply(L),B=u.multiply(L);return[M,B]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==t)throw An.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),a=new Int32Array(i),u=1;u<=i;u++)a[i-u]=this.field.multiply(u,t.getCoefficient(u));for(var l=new xs(this.field,a),f=r.length,h=new Int32Array(f),u=0;u<f;u++){var p=this.field.inverse(r[u]),v=this.field.subtract(0,e.evaluateAt(p)),_=this.field.inverse(l.evaluateAt(p));h[u]=this.field.multiply(v,_)}return h},n})(),gv=(function(){function n(e,t,r,i,a){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,a)}return n.prototype.constructor_1=function(e,t,r,i,a){var u=t==null||r==null,l=i==null||a==null;if(u&&l)throw new re;u?(t=new xe(0,i.getY()),r=new xe(0,a.getY())):l&&(i=new xe(e.getWidth()-1,t.getY()),a=new xe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,a=this.bottomLeft,u=this.topRight,l=this.bottomRight;if(e>0){var f=r?this.topLeft:this.topRight,h=Math.trunc(f.getY()-e);h<0&&(h=0);var p=new xe(f.getX(),h);r?i=p:u=p}if(t>0){var v=r?this.bottomLeft:this.bottomRight,_=Math.trunc(v.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var x=new xe(v.getX(),_);r?a=x:l=x}return new n(this.image,i,a,u,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n})(),d7=(function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n})(),Rm=(function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(u,l,f,h,p,v){if(u==="%%")return"%";if(t[++r]!==void 0){u=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,x;switch(v){case"s":x=t[r];break;case"c":x=t[r][0];break;case"f":x=parseFloat(t[r]).toFixed(u);break;case"p":x=parseFloat(t[r]).toPrecision(u);break;case"e":x=parseFloat(t[r]).toExponential(u);break;case"x":x=parseInt(t[r]).toString(_||16);break;case"d":x=parseFloat(parseInt(t[r],_||10).toPrecision(u)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(_);for(var A=parseInt(f),S=f&&f[0]+""=="0"?"0":" ";x.length<A;)x=l!==void 0?x+S:S+x;return x}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n})(),p7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MS=(function(){function n(e){this.boundingBox=new gv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Rm,i=0;try{for(var a=p7(this.codewords),u=a.next();!u.done;u=a.next()){var l=u.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(f){e={error:f}}finally{try{u&&!u.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n})(),g7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v7=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(l){u={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(u)throw u.error}}return a},jc=(function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,a=function(v,_){var x={getKey:function(){return v},getValue:function(){return _}};x.getValue()>r?(r=x.getValue(),i=[],i.push(x.getKey())):x.getValue()===r&&i.push(x.getKey())};try{for(var u=g7(this.values.entries()),l=u.next();!l.done;l=u.next()){var f=v7(l.value,2),h=f[0],p=f[1];a(h,p)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}return Je.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n})(),m7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),_g=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PA=(function(n){m7(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=_g(this.getCodewords()),a=i.next();!a.done;a=i.next()){var u=a.value;u?.setRowNumberAsRowIndicatorColumn()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),h=-1,p=1,v=0,_=l;_<f;_++)if(r[_]!=null){var x=r[_],A=x.getRowNumber()-h;if(A===0)v++;else if(A===1)p=Math.max(p,v),v=1,h=x.getRowNumber();else if(A<0||x.getRowNumber()>=t.getRowCount()||A>_)r[_]=null;else{var S=void 0;p>2?S=(p-2)*A:S=A;for(var R=S>=_,L=1;L<=S&&!R;L++)R=r[_-L]!=null;R?r[_]=null:(h=x.getRowNumber(),v=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var u=_g(this.getCodewords()),l=u.next();!l.done;l=u.next()){var f=l.value;if(f!=null){var h=f.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),h=-1,p=u;p<l;p++)if(f[p]!=null){var v=f[p];v.setRowNumberAsRowIndicatorColumn();var _=v.getRowNumber()-h;_===0||(_===1?h=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?f[p]=null:h=v.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),a=new jc,u=new jc,l=new jc,f=new jc;try{for(var h=_g(i),p=h.next();!p.done;p=h.next()){var v=p.value;if(v!=null){v.setRowNumberAsRowIndicatorColumn();var _=v.getValue()%30,x=v.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:u.setValue(_*3+1);break;case 1:f.setValue(_/3),l.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||u.getValue().length===0||l.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||u.getValue()[0]+l.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||u.getValue()[0]+l.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;var A=new d7(a.getValue()[0],u.getValue()[0],l.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var u=a.getValue()%30,l=a.getRowNumber();if(l>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:u+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e})(MS),y7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_7=(function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Je.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,u=this.barcodeColumnCount+1;u>0&&a<this.ADJUST_ROW_NUMBER_SKIP;u--){var l=this.detectionResultColumns[u].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),a=0,u=1;u<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;u++){var l=this.detectionResultColumns[u].getCodewords()[r];l!=null&&(a=n.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,a;if(this.detectionResultColumns[e-1]!=null){var u=r[t],l=this.detectionResultColumns[e-1].getCodewords(),f=l;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=l[t],h[3]=f[t],t>0&&(h[0]=r[t-1],h[4]=l[t-1],h[5]=f[t-1]),t>1&&(h[8]=r[t-2],h[10]=l[t-2],h[11]=f[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=l[t+1],h[7]=f[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=l[t+2],h[13]=f[t+2]);try{for(var p=y7(h),v=p.next();!v.done;v=p.next()){var _=v.value;if(n.adjustRowNumber(u,_))return}}catch(x){i={error:x}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Rm,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},n})(),x7=(function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n})(),E7=(function(){function n(){}return n.initialize=function(){for(var e=0;e<Je.SYMBOL_TABLE.length;e++)for(var t=Je.SYMBOL_TABLE[e],r=t&1,i=0;i<Je.BARS_IN_MODULE;i++){for(var a=0;(t&1)===r;)a+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Je.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Je.BARS_IN_MODULE-i-1]=Math.fround(a/Je.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=nt.sum(e),r=new Int32Array(Je.BARS_IN_MODULE),i=0,a=0,u=0;u<Je.MODULES_IN_CODEWORD;u++){var l=t/(2*Je.MODULES_IN_CODEWORD)+u*t/Je.MODULES_IN_CODEWORD;a+e[i]<=l&&(a+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Je.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=nt.sum(e),r=new Array(Je.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var a=lv.MAX_VALUE,u=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var f=0,h=n.RATIOS_TABLE[l],p=0;p<Je.BARS_IN_MODULE;p++){var v=Math.fround(h[p]-r[p]);if(f+=Math.fround(v*v),f>=a)break}f<a&&(a=f,u=Je.SYMBOL_TABLE[l])}return u},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(function(e){return new Array(Je.BARS_IN_MODULE)}),n})(),A7=(function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n})(),LA=(function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n})(),w7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),T7=(function(n){w7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e})(ur),S7=(function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new T7;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new Tm;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n})(),I7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),C7=(function(n){I7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(ur),b7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),R7=(function(n){b7(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ce("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new C7;i=Ue.MAX_VALUE}this.buf=hn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new Tm;this.ensureCapacity(this.count+i),St.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return hn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(S7),wt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wt||(wt={}));function PS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Ad;function oo(n){if(typeof Ad>"u"&&(Ad=PS()),Ad===null)throw new Error("BigInt is not supported!");return Ad(n)}function D7(){var n=[];n[0]=oo(1);var e=oo(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var O7=(function(){function n(){}return n.decode=function(e,t){var r=new Ve(""),i=fn.ISO8859_1;r.enableDecoding(i);for(var a=1,u=e[a++],l=new A7;a<e[0];){switch(u){case n.TEXT_COMPACTION_MODE_LATCH:a=n.textCompaction(e,a,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:a=n.byteCompaction(u,e,i,a,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:a=n.numericCompaction(e,a,r);break;case n.ECI_CHARSET:fn.getCharacterSetECIByValue(e[a++]);break;case n.ECI_GENERAL_PURPOSE:a+=2;break;case n.ECI_USER_DEFINED:a++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=n.decodeMacroBlock(e,a,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new fe;default:a--,a=n.textCompaction(e,a,r);break}if(a<e.length)u=e[a++];else throw fe.getFormatInstance()}if(r.length()===0)throw fe.getFormatInstance();var f=new W0(null,r.toString(),null,t);return f.setOther(l),f},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw fe.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<n.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];r.setSegmentIndex(Ue.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var u=new Ve;t=n.textCompaction(e,t,u),r.setFileId(u.toString());var l=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new Ve;t=n.textCompaction(e,t+1,f),r.setFileName(f.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new Ve;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Ve;t=n.textCompaction(e,t+1,p),r.setAddressee(p.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var v=new Ve;t=n.numericCompaction(e,t+1,v),r.setSegmentCount(Ue.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new Ve;t=n.numericCompaction(e,t+1,_),r.setTimestamp(LA.parseLong(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var x=new Ve;t=n.numericCompaction(e,t+1,x),r.setChecksum(Ue.parseInt(x.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new Ve;t=n.numericCompaction(e,t+1,A),r.setFileSize(LA.parseLong(A.toString()));break;default:throw fe.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw fe.getFormatInstance()}if(l!==-1){var S=t-l;r.isLastSegment()&&S--,r.setOptionalData(hn.copyOfRange(e,l,l+S))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),u=0,l=!1;t<e[0]&&!l;){var f=e[t++];if(f<n.TEXT_COMPACTION_MODE_LATCH)i[u]=f/30,i[u+1]=f%30,u+=2;else switch(f){case n.TEXT_COMPACTION_MODE_LATCH:i[u++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[u]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],a[u]=f,u++;break}}return n.decodeTextCompaction(i,a,u,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var a=wt.ALPHA,u=wt.ALPHA,l=0;l<r;){var f=e[l],h="";switch(a){case wt.ALPHA:if(f<26)h=String.fromCharCode(65+f);else switch(f){case 26:h=" ";break;case n.LL:a=wt.LOWER;break;case n.ML:a=wt.MIXED;break;case n.PS:u=a,a=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.LOWER:if(f<26)h=String.fromCharCode(97+f);else switch(f){case 26:h=" ";break;case n.AS:u=a,a=wt.ALPHA_SHIFT;break;case n.ML:a=wt.MIXED;break;case n.PS:u=a,a=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.MIXED:if(f<n.PL)h=n.MIXED_CHARS[f];else switch(f){case n.PL:a=wt.PUNCT;break;case 26:h=" ";break;case n.LL:a=wt.LOWER;break;case n.AL:a=wt.ALPHA;break;case n.PS:u=a,a=wt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.PUNCT:if(f<n.PAL)h=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=wt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(a=u,f<26)h=String.fromCharCode(65+f);else switch(f){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(a=u,f<n.PAL)h=n.PUNCT_CHARS[f];else switch(f){case n.PAL:a=wt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break}h!==""&&i.append(h),l++}},n.byteCompaction=function(e,t,r,i,a){var u=new R7,l=0,f=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),v=t[i++];i<t[0]&&!h;)switch(p[l++]=v,f=900*f+v,v=t[i++],v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(l%5===0&&l>0){for(var _=0;_<6;++_)u.write(Number(oo(f)>>oo(8*(5-_))));f=0,l=0}break}i===t[0]&&v<n.TEXT_COMPACTION_MODE_LATCH&&(p[l++]=v);for(var x=0;x<l;x++)u.write(p[x]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var A=t[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)l++,f=900*f+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(l%5===0&&l>0){for(var _=0;_<6;++_)u.write(Number(oo(f)>>oo(8*(5-_))));f=0,l=0}}break}return a.append(jr.decode(u.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,a=!1,u=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var l=e[t++];if(t===e[0]&&(a=!0),l<n.TEXT_COMPACTION_MODE_LATCH)u[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(n.decodeBase900toBase10(u,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=oo(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*oo(e[i]);var a=r.toString();if(a.charAt(0)!=="1")throw new fe;return a.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=PS()?D7():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n})(),Oc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N7=(function(){function n(){}return n.decode=function(e,t,r,i,a,u,l){for(var f=new gv(e,t,r,i,a),h=null,p=null,v,_=!0;;_=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,f,t,!0,u,l)),i!=null&&(p=n.getRowIndicatorColumn(e,f,i,!1,u,l)),v=n.merge(h,p),v==null)throw re.getNotFoundInstance();var x=v.getBoundingBox();if(_&&x!=null&&(x.getMinY()<f.getMinY()||x.getMaxY()>f.getMaxY()))f=x;else break}v.setBoundingBox(f);var A=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,h),v.setDetectionResultColumn(A,p);for(var S=h!=null,R=1;R<=A;R++){var L=S?R:A-R;if(v.getDetectionResultColumn(L)===void 0){var M=void 0;L===0||L===A?M=new PA(f,L===0):M=new MS(f),v.setDetectionResultColumn(L,M);for(var B=-1,G=B,$=f.getMinY();$<=f.getMaxY();$++){if(B=n.getStartColumn(v,L,$,S),B<0||B>f.getMaxX()){if(G===-1)continue;B=G}var J=n.detectCodeword(e,f.getMinX(),f.getMaxX(),S,B,$,u,l);J!=null&&(M.setCodeword($,J),G=B,u=Math.min(u,J.getWidth()),l=Math.max(l,J.getWidth()))}}}return n.createDecoderResult(v)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=gv.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new _7(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=n.getMax(i),u=0;try{for(var l=Oc(i),f=l.next();!f.done;f=l.next()){var h=f.value;if(u+=a-h,h>0)break}}catch(x){t={error:x}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),v=0;u>0&&p[v]==null;v++)u--;for(var _=0,v=i.length-1;v>=0&&(_+=a-i[v],!(i[v]>0));v--);for(var v=p.length-1;_>0&&p[v]==null;v--)_--;return e.getBoundingBox().addMissingRows(u,_,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var a=Oc(e),u=a.next();!u.done;u=a.next()){var l=u.value;i=Math.max(i,l)}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,a,u){for(var l=new PA(t,i),f=0;f<2;f++)for(var h=f===0?1:-1,p=Math.trunc(Math.trunc(r.getX())),v=Math.trunc(Math.trunc(r.getY()));v<=t.getMaxY()&&v>=t.getMinY();v+=h){var _=n.detectCodeword(e,0,e.getWidth(),i,p,v,a,u);_!=null&&(l.setCodeword(v,_),i?p=_.getStartX():p=_.getEndX())}return l},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Je.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],u=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var f=0;f<e.getBarcodeColumnCount();f++){var h=t[l][f+1].getValue(),p=l*e.getBarcodeColumnCount()+f;h.length===0?r.push(p):h.length===1?i[p]=h[0]:(u.push(p),a.push(h))}for(var v=new Array(a.length),_=0;_<v.length;_++)v[_]=a[_];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Je.toIntArray(r),Je.toIntArray(u),v)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,a){for(var u=new Int32Array(i.length),l=100;l-- >0;){for(var f=0;f<u.length;f++)t[i[f]]=a[f][u[f]];try{return n.decodeCodewords(t,e,r)}catch(p){var h=p instanceof An;if(!h)throw p}if(u.length===0)throw An.getChecksumInstance();for(var f=0;f<u.length;f++)if(u[f]<a[f].length-1){u[f]++;break}else if(u[f]=0,f===u.length-1)throw An.getChecksumInstance()}throw An.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,a,u=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<u.length;l++)for(var f=0;f<u[l].length;f++)u[l][f]=new jc;var h=0;try{for(var p=Oc(e.getDetectionResultColumns()),v=p.next();!v.done;v=p.next()){var _=v.value;if(_!=null)try{for(var x=(i=void 0,Oc(_.getCodewords())),A=x.next();!A.done;A=x.next()){var S=A.value;if(S!=null){var R=S.getRowNumber();if(R>=0){if(R>=u.length)continue;u[R][h].setValue(S.getValue())}}}}catch(L){i={error:L}}finally{try{A&&!A.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}h++}}catch(L){t={error:L}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return u},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var a,u,l=i?1:-1,f=null;if(n.isValidBarcodeColumn(e,t-l)&&(f=e.getDetectionResultColumn(t-l).getCodeword(r)),f!=null)return i?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(t).getCodewordNearby(r),f!=null)return i?f.getStartX():f.getEndX();if(n.isValidBarcodeColumn(e,t-l)&&(f=e.getDetectionResultColumn(t-l).getCodewordNearby(r)),f!=null)return i?f.getEndX():f.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-l);){t-=l;try{for(var p=(a=void 0,Oc(e.getDetectionResultColumn(t).getCodewords())),v=p.next();!v.done;v=p.next()){var _=v.value;if(_!=null)return(i?_.getEndX():_.getStartX())+l*h*(_.getEndX()-_.getStartX())}}catch(x){a={error:x}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,a,u,l,f){a=n.adjustCodewordStartColumn(e,t,r,i,a,u);var h=n.getModuleBitCount(e,t,r,i,a,u);if(h==null)return null;var p,v=nt.sum(h);if(i)p=a+v;else{for(var _=0;_<h.length/2;_++){var x=h[_];h[_]=h[h.length-1-_],h[h.length-1-_]=x}p=a,a=p-v}if(!n.checkCodewordSkew(v,l,f))return null;var A=E7.getDecodedValue(h),S=Je.getCodeword(A);return S===-1?null:new x7(a,p,n.getCodewordBucketNumber(A),S)},n.getModuleBitCount=function(e,t,r,i,a,u){for(var l=a,f=new Int32Array(8),h=0,p=i?1:-1,v=i;(i?l<r:l>=t)&&h<f.length;)e.get(l,u)===v?(f[h]++,l+=p):(h++,v=!v);return h===f.length||l===(i?r:t)&&h===f.length-1?f:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,a,u){for(var l=a,f=i?-1:1,h=0;h<2;h++){for(;(i?l>=t:l<r)&&i===e.get(l,u);){if(Math.abs(a-l)>n.CODEWORD_SKEW_SIZE)return a;l+=f}f=-f,i=!i}return l},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw fe.getFormatInstance();var i=1<<t+1,a=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var u=O7.decode(e,""+t);return u.setErrorsCorrected(a),u.setErasures(r.length),u},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw An.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw fe.getFormatInstance();var r=e[0];if(r>e.length)throw fe.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw fe.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Rm,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var a=e[r][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new h7,n})(),M7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vv=(function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw re.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof fe||r instanceof An?re.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,a,u=new Array,l=o7.detectMultiple(e,t,r);try{for(var f=M7(l.getPoints()),h=f.next();!h.done;h=f.next()){var p=h.value,v=N7.decode(l.getBits(),p[4],p[5],p[6],p[7],n.getMinCodewordWidth(p),n.getMaxCodewordWidth(p)),_=new Hn(v.getText(),v.getRawBytes(),void 0,p,Ie.PDF_417);_.putMetadata(Ln.ERROR_CORRECTION_LEVEL,v.getECLevel());var x=v.getOther();x!=null&&_.putMetadata(Ln.PDF417_EXTRA_METADATA,x),u.push(_)}}catch(A){i={error:A}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return u.map(function(A){return A})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?Ue.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n})(),P7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),kA=(function(n){P7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e})(ur),BA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L7=(function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(kt.TRY_HARDER)!==void 0,r=e==null?null:e.get(kt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var a=r.some(function(u){return u===Ie.UPC_A||u===Ie.UPC_E||u===Ie.EAN_13||u===Ie.EAN_8||u===Ie.CODABAR||u===Ie.CODE_39||u===Ie.CODE_93||u===Ie.CODE_128||u===Ie.ITF||u===Ie.RSS_14||u===Ie.RSS_EXPANDED});a&&!t&&i.push(new zc(e)),r.includes(Ie.QR_CODE)&&i.push(new pv),r.includes(Ie.DATA_MATRIX)&&i.push(new dv),r.includes(Ie.AZTEC)&&i.push(new fv),r.includes(Ie.PDF_417)&&i.push(new vv),a&&t&&i.push(new zc(e))}i.length===0&&(t||i.push(new zc(e)),i.push(new pv),i.push(new dv),i.push(new fv),i.push(new vv),t&&i.push(new zc(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=BA(this.readers),i=r.next();!i.done;i=r.next()){var a=i.value;a.reset()}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new kA("No readers where selected, nothing can be read.");try{for(var i=BA(this.readers),a=i.next();!a.done;a=i.next()){var u=a.value;try{return u.decode(e,this.hints)}catch(l){if(l instanceof kA)continue}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new re("No MultiFormat Readers were able to detect the code.")},n})(),k7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),B7=(function(n){k7(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,a=new L7;return a.setHints(t),i=n.call(this,a,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(yl),V7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){V7(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new vv,t)||this}return e})(yl);var F7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){F7(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new pv,t)||this}return e})(yl);var mv;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(mv||(mv={}));const wd=mv;var LS=(function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Eo(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var u=r.multiply(new Eo(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(u),r=u}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ce("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ce("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(r);St.arraycopy(e,0,a,0,r);var u=new Eo(this.field,a);u=u.multiplyByMonomial(t,1);for(var l=u.divide(i)[1],f=l.getCoefficients(),h=t-f.length,p=0;p<h;p++)e[r+p]=0;St.arraycopy(f,0,e,r+h,f.length)},n})(),Hc=(function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),u=0;u<a-1;u++)for(var l=r[u],f=0;f<i-1;f++){var h=l[f];h===l[f+1]&&h===r[u+1][f]&&h===r[u+1][f+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),u=0;u<a;u++)for(var l=0;l<i;l++){var f=r[u];l+6<i&&f[l]===1&&f[l+1]===0&&f[l+2]===1&&f[l+3]===1&&f[l+4]===1&&f[l+5]===0&&f[l+6]===1&&(n.isWhiteHorizontal(f,l-4,l)||n.isWhiteHorizontal(f,l+7,l+11))&&t++,u+6<a&&r[u][l]===1&&r[u+1][l]===0&&r[u+2][l]===1&&r[u+3][l]===1&&r[u+4][l]===1&&r[u+5][l]===0&&r[u+6][l]===1&&(n.isWhiteVertical(r,l,u-4,u)||n.isWhiteVertical(r,l,u+7,u+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var a=r;a<i;a++)if(e[a][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),a=e.getHeight(),u=0;u<a;u++)for(var l=r[u],f=0;f<i;f++)l[f]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*n.N4},n.getDataMaskBit=function(e,t,r){var i,a;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:a=r*t,i=(a&1)+a%3;break;case 6:a=r*t,i=(a&1)+a%3&1;break;case 7:a=r*t,i=a%3+(r+t&1)&1;break;default:throw new Ce("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),u=e.getArray(),l=0;l<i;l++){for(var f=0,h=-1,p=0;p<a;p++){var v=t?u[l][p]:u[p][l];v===h?f++:(f>=5&&(r+=n.N1+(f-5)),f=1,h=v)}f>=5&&(r+=n.N1+(f-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n})(),U7=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z7=(function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=U7(this.bytes),a=i.next();!a.done;a=i.next()){var u=a.value;hn.fill(u,e)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var a=this.bytes[r],u=t.bytes[r],l=0,f=this.width;l<f;++l)if(a[l]!==u[l])return!1;return!0},n.prototype.toString=function(){for(var e=new Ve,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],a=0,u=this.width;a<u;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n})(),yv=(function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new Ve;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n})(),j7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),bt=(function(n){j7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e})(ur),VA=(function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,a){n.clearMatrix(a),n.embedBasicPatterns(r,a),n.embedTypeInfo(t,i,a),n.maybeEmbedVersionInfo(r,a),n.embedDataBits(e,i,a)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new wn;n.makeTypeInfoBits(e,t,i);for(var a=0,u=i.getSize();a<u;++a){var l=i.get(i.getSize()-1-a),f=n.TYPE_INFO_COORDINATES[a],h=f[0],p=f[1];if(r.setBoolean(h,p,l),a<8){var v=r.getWidth()-a-1,_=8;r.setBoolean(v,_,l)}else{var v=8,_=r.getHeight()-7+(a-8);r.setBoolean(v,_,l)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new wn;n.makeVersionInfoBits(e,r);for(var i=17,a=0;a<6;++a)for(var u=0;u<3;++u){var l=r.get(i);i--,t.setBoolean(a,t.getHeight()-11+u,l),t.setBoolean(t.getHeight()-11+u,a,l)}}},n.embedDataBits=function(e,t,r){for(var i=0,a=-1,u=r.getWidth()-1,l=r.getHeight()-1;u>0;){for(u===6&&(u-=1);l>=0&&l<r.getHeight();){for(var f=0;f<2;++f){var h=u-f;if(n.isEmpty(r.get(h,l))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&Hc.getDataMaskBit(t,h,l)&&(p=!p),r.setBoolean(h,l,p)}}l+=a}a=-a,l+=a,u-=2}if(i!==e.getSize())throw new bt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-Ue.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ce("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!yv.isValidMaskPattern(t))throw new bt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var a=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(a,10);var u=new wn;if(u.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(u),r.getSize()!==15)throw new bt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new bt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new bt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new bt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new bt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var a=n.POSITION_ADJUSTMENT_PATTERN[i],u=0;u<5;++u)r.setNumber(e+u,t+i,a[u])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var a=n.POSITION_DETECTION_PATTERN[i],u=0;u<7;++u)r.setNumber(e+u,t+i,a[u])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],a=0,u=i.length;a!==u;a++){var l=i[a];if(l>=0)for(var f=0;f!==u;f++){var h=i[f];h>=0&&n.isEmpty(t.get(h,l))&&n.embedPositionAdjustmentPattern(h-2,l-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n})(),H7=(function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n})(),FA=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return Hc.applyMaskPenaltyRule1(e)+Hc.applyMaskPenaltyRule2(e)+Hc.applyMaskPenaltyRule3(e)+Hc.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,a=r!==null&&r.get(wd.CHARACTER_SET)!==void 0;a&&(i=r.get(wd.CHARACTER_SET).toString());var u=this.chooseMode(e,i),l=new wn;if(u===Rt.BYTE&&(a||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=fn.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,l)}this.appendModeInfo(u,l);var h=new wn;this.appendBytes(e,u,h,i);var p;if(r!==null&&r.get(wd.QR_VERSION)!==void 0){var v=Number.parseInt(r.get(wd.QR_VERSION).toString(),10);p=Ss.getVersionForNumber(v);var _=this.calculateBitsNeeded(u,l,h,p);if(!this.willFit(_,p,t))throw new bt("Data too big for requested version")}else p=this.recommendVersion(t,u,l,h);var x=new wn;x.appendBitArray(l);var A=u===Rt.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(A,p,u,x),x.appendBitArray(h);var S=p.getECBlocksForLevel(t),R=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(R,x);var L=this.interleaveWithECBytes(x,p.getTotalCodewords(),R,S.getNumBlocks()),M=new yv;M.setECLevel(t),M.setMode(u),M.setVersion(p);var B=p.getDimensionForVersion(),G=new z7(B,B),$=this.chooseMaskPattern(L,t,p,G);return M.setMaskPattern($),VA.buildMatrix(L,t,p,$,G),M.setMatrix(G),M},n.recommendVersion=function(e,t,r,i){var a=this.calculateBitsNeeded(t,r,i,Ss.getVersionForNumber(1)),u=this.chooseVersion(a,e),l=this.calculateBitsNeeded(t,r,i,u);return this.chooseVersion(l,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),fn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Rt.KANJI;for(var r=!1,i=!1,a=0,u=e.length;a<u;++a){var l=e.charAt(a);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return Rt.BYTE}return i?Rt.ALPHANUMERIC:r?Rt.NUMERIC:Rt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=jr.encode(e,fn.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var a=Number.MAX_SAFE_INTEGER,u=-1,l=0;l<yv.NUM_MASK_PATTERNS;l++){VA.buildMatrix(e,t,r,l,i);var f=this.calculateMaskPenalty(i);f<a&&(a=f,u=l)}return u},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Ss.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new bt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(r),u=a.getTotalECCodewords(),l=i-u,f=(e+7)/8;return l>=f},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new bt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var u=e-t.getSizeInBytes(),i=0;i<u;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new bt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,a,u){if(i>=r)throw new bt("Block ID too large");var l=e%r,f=r-l,h=Math.floor(e/r),p=h+1,v=Math.floor(t/r),_=v+1,x=h-v,A=p-_;if(x!==A)throw new bt("EC bytes mismatch");if(r!==f+l)throw new bt("RS blocks mismatch");if(e!==(v+x)*f+(_+A)*l)throw new bt("Total bytes mismatch");i<f?(a[0]=v,u[0]=x):(a[0]=_,u[0]=A)},n.interleaveWithECBytes=function(e,t,r,i){var a,u,l,f;if(e.getSizeInBytes()!==r)throw new bt("Number of bits and data bytes does not match");for(var h=0,p=0,v=0,_=new Array,x=0;x<i;++x){var A=new Int32Array(1),S=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,x,A,S);var R=A[0],L=new Uint8Array(R);e.toBytes(8*h,L,0,R);var M=n.generateECBytes(L,S[0]);_.push(new H7(L,M)),p=Math.max(p,R),v=Math.max(v,M.length),h+=A[0]}if(r!==h)throw new bt("Data bytes does not match offset");for(var B=new wn,x=0;x<p;++x)try{for(var G=(a=void 0,FA(_)),$=G.next();!$.done;$=G.next()){var J=$.value,L=J.getDataBytes();x<L.length&&B.appendBits(L[x],8)}}catch(k){a={error:k}}finally{try{$&&!$.done&&(u=G.return)&&u.call(G)}finally{if(a)throw a.error}}for(var x=0;x<v;++x)try{for(var C=(l=void 0,FA(_)),b=C.next();!b.done;b=C.next()){var J=b.value,M=J.getErrorCorrectionBytes();x<M.length&&B.appendBits(M[x],8)}}catch(k){l={error:k}}finally{try{b&&!b.done&&(f=C.return)&&f.call(C)}finally{if(l)throw l.error}}if(t!==B.getSizeInBytes())throw new bt("Interleaving error: "+t+" and "+B.getSizeInBytes()+" differ.");return B},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),a=0;a<r;a++)i[a]=e[a]&255;new LS(or.QR_CODE_FIELD_256).encode(i,t);for(var u=new Uint8Array(t),a=0;a<t;a++)u[a]=i[r+a];return u},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var a=r.getCharacterCountBits(t);if(e>=1<<a)throw new bt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},n.appendBytes=function(e,t,r,i){switch(t){case Rt.NUMERIC:n.appendNumericBytes(e,r);break;case Rt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case Rt.BYTE:n.append8BitBytes(e,r,i);break;case Rt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new bt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getDigit(e.charAt(i));if(i+2<r){var u=n.getDigit(e.charAt(i+1)),l=n.getDigit(e.charAt(i+2));t.appendBits(a*100+u*10+l,10),i+=3}else if(i+1<r){var u=n.getDigit(e.charAt(i+1));t.appendBits(a*10+u,7),i+=2}else t.appendBits(a,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var a=n.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new bt;if(i+1<r){var u=n.getAlphanumericCode(e.charCodeAt(i+1));if(u===-1)throw new bt;t.appendBits(a*45+u,11),i+=2}else t.appendBits(a,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=jr.encode(e,r)}catch(f){throw new bt(f)}for(var a=0,u=i.length;a!==u;a++){var l=i[a];t.appendBits(l,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=jr.encode(e,fn.SJIS)}catch(v){throw new bt(v)}for(var i=r.length,a=0;a<i;a+=2){var u=r[a]&255,l=r[a+1]&255,f=u<<8&4294967295|l,h=-1;if(f>=33088&&f<=40956?h=f-33088:f>=57408&&f<=60351&&(h=f-49472),h===-1)throw new bt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},n.appendECI=function(e,t){t.appendBits(Rt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=fn.UTF8.getName(),n})();var G7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){G7(e,n);function e(t,r,i,a,u,l,f,h){var p=n.call(this,l,f)||this;if(p.yuvData=t,p.dataWidth=r,p.dataHeight=i,p.left=a,p.top=u,a+l>r||u+f>i)throw new Ce("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(l,f),p}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.yuvData,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,a=new Uint8ClampedArray(i),u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.yuvData,u,a,0,i),a;for(var l=0;l<r;l++){var f=l*t;St.arraycopy(this.yuvData,u,a,f,t),u+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),a=this.yuvData,u=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var f=l*t,h=0;h<t;h++){var p=a[u+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[f+h]=4278190080|p*65793}u+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,a=0,u=this.top*this.dataWidth+this.left;a<r;a++,u+=this.dataWidth)for(var l=u+t/2,f=u,h=u+t-1;f<l;f++,h--){var p=i[f];i[f]=i[h],i[h]=p}},e.prototype.invert=function(){return new Sm(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Y0);var q7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();(function(n){q7(e,n);function e(t,r,i,a,u,l,f){var h=n.call(this,r,i)||this;if(h.dataWidth=a,h.dataHeight=u,h.left=l,h.top=f,t.BYTES_PER_ELEMENT===4){for(var p=r*i,v=new Uint8ClampedArray(p),_=0;_<p;_++){var x=t[_],A=x>>16&255,S=x>>7&510,R=x&255;v[_]=(A+S+R)/4&255}h.luminances=v}else h.luminances=t;if(a===void 0&&(h.dataWidth=r),u===void 0&&(h.dataHeight=i),l===void 0&&(h.left=0),f===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Ce("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.luminances,a,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,a=new Uint8ClampedArray(i),u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.luminances,u,a,0,i),a;for(var l=0;l<r;l++){var f=l*t;St.arraycopy(this.luminances,u,a,f,t),u+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new Sm(this)},e})(Y0);var X7=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),K7=(function(n){X7(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(fn),Y7=(function(){function n(){}return n.ISO_8859_1=fn.ISO8859_1,n})(),_v,W7=301,Q7=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=W7);return{LOG:n,ALOG:e}};_v=Q7([],[]),_v.LOG;_v.ALOG;var UA;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(UA||(UA={}));var zA=129,kS=230,$7=231,Z7=235,J7=236,eM=237,tM=238,nM=239,rM=240,xg=254,iM=254,jA="[)>05",HA="[)>06",GA="",pt=0,Nn=1,Wn=2,ln=3,xn=4,Vn=5,aM=(function(){function n(){}return n.prototype.getEncodingMode=function(){return pt},n.prototype.encode=function(e){var t=ai.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=ai.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Vn:e.writeCodeword($7),e.signalEncoderChange(Vn);return;case Nn:e.writeCodeword(kS),e.signalEncoderChange(Nn);return;case ln:e.writeCodeword(tM),e.signalEncoderChange(ln);break;case Wn:e.writeCodeword(nM),e.signalEncoderChange(Wn);break;case xn:e.writeCodeword(rM),e.signalEncoderChange(xn);break;default:throw new Error("Illegal mode: "+i)}else ai.isExtendedASCII(r)?(e.writeCodeword(Z7),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(ai.isDigit(e)&&ai.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n})(),oM=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Vn},n.prototype.encode=function(e){var t=new Ve;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=ai.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}var a=t.length()-1,u=1,l=e.getCodewordCount()+a+u;e.updateSymbolInfo(l);var f=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||f)if(a<=249)t.setCharAt(0,$e.getCharAt(a));else if(a<=1555)t.setCharAt(0,$e.getCharAt(Math.floor(a/250)+249)),t.insert(1,$e.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n})(),Dm=(function(){function n(){}return n.prototype.getEncodingMode=function(){return Nn},n.prototype.encodeMaximal=function(e){for(var t=new Ve,r=0,i=e.pos,a=0;e.hasMoreCharacters();){var u=e.getCurrentChar();e.pos++,r=this.encodeChar(u,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var l=Math.floor(t.length()/3*2),f=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(f);var h=e.getSymbolInfo().getDataCapacity()-f,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(kS),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new Ve;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),a=Math.floor(t.length()/3)*2,u=e.getCodewordCount()+a;e.updateSymbolInfo(u);var l=e.getSymbolInfo().getDataCapacity()-u;if(!e.hasMoreCharacters()){var f=new Ve;for(t.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(e,t,f,i));t.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(e,t,f,i);break}var h=t.length();if(h%3===0){var p=ai.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var a=t.length(),u=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(u),e.pos--;var l=e.getCurrentChar();return i=this.encodeChar(l,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+r;e.updateSymbolInfo(a);var u=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(xg)}else if(u===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(xg),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(u>0||e.hasMoreCharacters())&&e.writeCodeword(xg)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(pt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,a=new Ve;return a.append(r),a.append(i),a.toString()},n})(),sM=(function(){function n(){}return n.prototype.getEncodingMode=function(){return xn},n.prototype.encode=function(e){for(var t=new Ve;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var u=ai.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}}t.append($e.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var u=r-1,l=this.encodeToCodewords(t.toString()),f=!e.hasMoreCharacters(),h=f&&u<=2;if(u<=2){e.updateSymbolInfo(e.getCodewordCount()+u);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}h?(e.resetSymbolInfo(),e.pos-=u):e.writeCodewords(l)}finally{e.signalEncoderChange(pt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append($e.getCharAt(e-64)):ai.illegalCharacter($e.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,u=t>=4?e.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(a<<6)+u,f=l>>16&255,h=l>>8&255,p=l&255,v=new Ve;return v.append(f),t>=2&&v.append(h),t>=3&&v.append(p),v.toString()},n})(),uM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),lM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ot=(function(){function n(e,t,r,i,a,u,l,f){l===void 0&&(l=0),f===void 0&&(f=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=u,this.rsBlockData=l,this.rsBlockError=f}return n.lookup=function(e,t,r,i,a){var u,l;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var f=lM(fM),h=f.next();!h.done;h=f.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(r!=null&&(p.getSymbolWidth()<r.getWidth()||p.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(v){u={error:v}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(u)throw u.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n})(),cM=(function(n){uM(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ot),fM=[new ot(!1,3,5,8,8,1),new ot(!1,5,7,10,10,1),new ot(!0,5,7,16,6,1),new ot(!1,8,10,12,12,1),new ot(!0,10,11,14,6,2),new ot(!1,12,12,14,14,1),new ot(!0,16,14,24,10,1),new ot(!1,18,14,16,16,1),new ot(!1,22,18,18,18,1),new ot(!0,22,18,16,10,2),new ot(!1,30,20,20,20,1),new ot(!0,32,24,16,14,2),new ot(!1,36,24,22,22,1),new ot(!1,44,28,24,24,1),new ot(!0,49,28,22,14,2),new ot(!1,62,36,14,14,4),new ot(!1,86,42,16,16,4),new ot(!1,114,48,18,18,4),new ot(!1,144,56,20,20,4),new ot(!1,174,68,22,22,4),new ot(!1,204,84,24,24,4,102,42),new ot(!1,280,112,14,14,16,140,56),new ot(!1,368,144,16,16,16,92,36),new ot(!1,456,192,18,18,16,114,48),new ot(!1,576,224,20,20,16,144,56),new ot(!1,696,272,22,22,16,174,68),new ot(!1,816,336,24,24,16,136,56),new ot(!1,1050,408,18,18,36,175,68),new ot(!1,1304,496,20,20,36,163,62),new cM],hM=(function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(l){return l.charCodeAt(0)}),r=new Ve,i=0,a=t.length;i<a;i++){var u=String.fromCharCode(t[i]&255);if(u==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(u)}this.msg=r.toString(),this.shape=0,this.codewords=new Ve,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ot.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n})(),dM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),pM=(function(n){dM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ln},e.prototype.encode=function(t){for(var r=new Ve;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var a=r.length();if(a%3===0){this.writeNextTriplet(t,r);var u=ai.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){t.signalEncoderChange(pt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):ai.illegalCharacter($e.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=r.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(iM),t.getNewEncoding()<0&&t.signalEncoderChange(pt)},e})(Dm),gM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),vM=(function(n){gM(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Wn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e})(Dm),ai=(function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=zA+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,a){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),a===void 0&&(a=!1);var u=new Dm,l=[new aM,u,new vM,new pM,new sM,new oM],f=new hM(e);f.setSymbolShape(t),f.setSizeConstraints(r,i),e.startsWith(jA)&&e.endsWith(GA)?(f.writeCodeword(J7),f.setSkipAtEnd(2),f.pos+=jA.length):e.startsWith(HA)&&e.endsWith(GA)&&(f.writeCodeword(eM),f.setSkipAtEnd(2),f.pos+=HA.length);var h=pt;for(a&&(u.encodeMaximal(f),h=f.getNewEncoding(),f.resetEncoderSignal());f.hasMoreCharacters();)l[h].encode(f),f.getNewEncoding()>=0&&(h=f.getNewEncoding(),f.resetEncoderSignal());var p=f.getCodewordCount();f.updateSymbolInfo();var v=f.getSymbolInfo().getDataCapacity();p<v&&h!==pt&&h!==Vn&&h!==xn&&f.writeCodeword("");var _=f.getCodewords();for(_.length()<v&&_.append(zA);_.length()<v;)_.append(this.randomize253State(_.length()+1));return f.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===ln&&i===ln){for(var a=Math.min(t+3,e.length),u=t;u<a;u++)if(!this.isNativeX12(e.charCodeAt(u)))return pt}else if(r===xn&&i===xn){for(var a=Math.min(t+4,e.length),u=t;u<a;u++)if(!this.isNativeEDIFACT(e.charCodeAt(u)))return pt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===pt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var a=0,u=new Uint8Array(6),l=[];;){if(t+a===e.length){hn.fill(u,0),hn.fill(l,0);var f=this.findMinimums(i,l,Ue.MAX_VALUE,u),h=this.getMinimumCount(u);if(l[pt]===f)return pt;if(h===1){if(u[Vn]>0)return Vn;if(u[xn]>0)return xn;if(u[Wn]>0)return Wn;if(u[ln]>0)return ln}return Nn}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[pt]+=.5:this.isExtendedASCII(p)?(i[pt]=Math.ceil(i[pt]),i[pt]+=2):(i[pt]=Math.ceil(i[pt]),i[pt]++),this.isNativeC40(p)?i[Nn]+=2/3:this.isExtendedASCII(p)?i[Nn]+=8/3:i[Nn]+=4/3,this.isNativeText(p)?i[Wn]+=2/3:this.isExtendedASCII(p)?i[Wn]+=8/3:i[Wn]+=4/3,this.isNativeX12(p)?i[ln]+=2/3:this.isExtendedASCII(p)?i[ln]+=13/3:i[ln]+=10/3,this.isNativeEDIFACT(p)?i[xn]+=3/4:this.isExtendedASCII(p)?i[xn]+=17/4:i[xn]+=13/4,this.isSpecialB256(p)?i[Vn]+=4:i[Vn]++,a>=4){if(hn.fill(u,0),hn.fill(l,0),this.findMinimums(i,l,Ue.MAX_VALUE,u),l[pt]<this.min(l[Vn],l[Nn],l[Wn],l[ln],l[xn]))return pt;if(l[Vn]<l[pt]||l[Vn]+1<this.min(l[Nn],l[Wn],l[ln],l[xn]))return Vn;if(l[xn]+1<this.min(l[Vn],l[Nn],l[Wn],l[ln],l[pt]))return xn;if(l[Wn]+1<this.min(l[Vn],l[Nn],l[xn],l[ln],l[pt]))return Wn;if(l[ln]+1<this.min(l[Vn],l[Nn],l[xn],l[Wn],l[pt]))return ln;if(l[Nn]+1<this.min(l[pt],l[Vn],l[xn],l[Wn])){if(l[Nn]<l[ln])return Nn;if(l[Nn]===l[ln]){for(var v=t+a+1;v<e.length;){var _=e.charCodeAt(v);if(this.isX12TermSep(_))return ln;if(!this.isNativeX12(_))break;v++}return Nn}}}}},n.min=function(e,t,r,i,a){var u=Math.min(e,Math.min(t,Math.min(r,i)));return a===void 0?u:Math.min(u,a)},n.findMinimums=function(e,t,r,i){for(var a=0;a<6;a++){var u=t[a]=Math.ceil(e[a]);r>u&&(r=u,hn.fill(i,0)),r===u&&(i[a]=i[a]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=Ue.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n})(),Eg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qA=(function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return jr.encode(e,this.charset)!=null}catch{return!1}},n})(),mM=(function(){function n(e,t,r){var i,a,u,l,f,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new qA(K7.forName(N))}),this.encoders=[];var p=[];p.push(new qA(Y7.ISO_8859_1));for(var v=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var x=!1;try{for(var A=(i=void 0,Eg(p)),S=A.next();!S.done;S=A.next()){var R=S.value,L=e.charAt(_),M=L.charCodeAt(0);if(M===r||R.canEncode(L)){x=!0;break}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(a=A.return)&&a.call(A)}finally{if(i)throw i.error}}if(!x)try{for(var B=(u=void 0,Eg(this.ENCODERS)),G=B.next();!G.done;G=B.next()){var R=G.value;if(R.canEncode(e.charAt(_))){p.push(R),x=!0;break}}}catch(N){u={error:N}}finally{try{G&&!G.done&&(l=B.return)&&l.call(B)}finally{if(u)throw u.error}}x||(v=!0)}if(p.length===1&&!v)this.encoders=[p[0]];else{this.encoders=[];var $=0;try{for(var J=Eg(p),C=J.next();!C.done;C=J.next()){var R=C.value;this.encoders[$++]=R}}catch(N){f={error:N}}finally{try{C&&!C.done&&(h=J.return)&&h.call(J)}finally{if(f)throw f.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return jr.encode($e.getCharAt(e),this.encoders[t].name)},n})(),yM=3,_M=(function(){function n(e,t,r){this.fnc1=r;var i=new mM(e,t,r);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var u=e.charAt(a).charCodeAt(0);this.bytes[a]=u===r?1e3:u}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new Ve,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,a,u){var l=e.charAt(i).charCodeAt(0),f=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(l===u||t.canEncode(l,t.getPriorityEncoderIndex()))&&(f=t.getPriorityEncoderIndex(),h=f+1);for(var p=f;p<h;p++)(l===u||t.canEncode(l,p))&&this.addEdge(r,i+1,new XA(l,t,p,a,u))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,a=new XA[i+1][t.length()];this.addEdges(e,t,a,0,null,r);for(var u=1;u<=i;u++){for(var l=0;l<t.length();l++)a[u][l]!=null&&u<i&&this.addEdges(e,t,a,u,a[u][l],r);for(var l=0;l<t.length();l++)a[u-1][l]=null}for(var f=-1,h=Ue.MAX_VALUE,l=0;l<t.length();l++)if(a[i][l]!=null){var p=a[i][l];p.cachedTotalSize<h&&(h=p.cachedTotalSize,f=l)}if(f<0)throw new Error('Failed to encode "'+e+'"');for(var v=[],_=a[i][f];_!=null;){if(_.isFNC1())v.unshift(1e3);else for(var x=t.encode(_.c,_.encoderIndex),u=x.length-1;u>=0;u--)v.unshift(x[u]&255);var A=_.previous===null?0:_.previous.encoderIndex;A!==_.encoderIndex&&v.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],u=0;u<S.length;u++)S[u]=v[u];return S},n})(),XA=(function(){function n(e,t,r,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var u=this.isFNC1()?1:t.encode(e,r).length,l=i===null?0:i.encoderIndex;l!==r&&(u+=yM),i!=null&&(u+=i.cachedTotalSize),this.cachedTotalSize=u}return n.prototype.isFNC1=function(){return this.c===1e3},n})(),xM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})();var KA;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(KA||(KA={}));(function(n){xM(e,n);function e(t,r,i,a,u){var l=n.call(this,t,r,i)||this;return l.shape=a,l.macroId=u,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(_M);var EM=(function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n})(),YA=(function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n})(),AM=(function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n})(),wM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Om=(function(n){wM(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.value=r,a.bitCount=i,a}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Ue.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(AM),TM=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),SM=(function(n){TM(e,n);function e(t,r,i){var a=n.call(this,t,0,0)||this;return a.binaryShiftStart=r,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Om);function IM(n,e,t){return new SM(n,e,t)}function Nc(n,e,t){return new Om(n,e,t)}var CM=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ao=0,y0=1,Ur=2,BS=3,Pi=4,bM=new Om(null,0,0),Ag=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],RM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function DM(n){var e,t;try{for(var r=RM(n),i=r.next();!i.done;i=r.next()){var a=i.value;hn.fill(a,-1)}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[Ao][Pi]=0,n[y0][Pi]=0,n[y0][Ao]=28,n[BS][Pi]=0,n[Ur][Pi]=0,n[Ur][Ao]=15,n}var VS=DM(hn.createInt32Array(6,6)),OM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NM=(function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var a=Ag[this.mode][e];i=Nc(i,a&65535,a>>16),r+=a>>16}var u=e===Ur?4:5;return i=Nc(i,t,u),new n(i,e,0,r+u)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===Ur?4:5;return r=Nc(r,VS[this.mode][e],i),r=Nc(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Pi||this.mode===Ur){var a=Ag[r][Ao];t=Nc(t,a&65535,a>>16),i+=a>>16,r=Ao}var u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(t,r,this.binaryShiftByteCount+1,i+u);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=IM(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Ag[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var u=new wn;try{for(var l=OM(i),f=l.next();!f.done;f=l.next()){var h=f.value;h.appendTo(u,e)}}catch(p){t={error:p}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return u},n.prototype.toString=function(){return $e.format("%s bits=%d bytes=%d",CM[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(bM,Ao,0,0),n})();function MM(n){var e=$e.getCharCode(" "),t=$e.getCharCode("."),r=$e.getCharCode(",");n[Ao][e]=1;for(var i=$e.getCharCode("Z"),a=$e.getCharCode("A"),u=a;u<=i;u++)n[Ao][u]=u-a+2;n[y0][e]=1;for(var l=$e.getCharCode("z"),f=$e.getCharCode("a"),u=f;u<=l;u++)n[y0][u]=u-f+2;n[Ur][e]=1;for(var h=$e.getCharCode("9"),p=$e.getCharCode("0"),u=p;u<=h;u++)n[Ur][u]=u-p+2;n[Ur][r]=12,n[Ur][t]=13;for(var v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<v.length;_++)n[BS][$e.getCharCode(v[_])]=_;for(var x=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<x.length;_++)$e.getCharCode(x[_])>0&&(n[Pi][$e.getCharCode(x[_])]=_);return n}var wg=MM(hn.createInt32Array(5,256)),Td=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PM=(function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=$e.getCharCode(" "),t=$e.getCharCode(`
`),r=YA.singletonList(NM.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,u=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case $e.getCharCode("\r"):a=u===t?2:0;break;case $e.getCharCode("."):a=u===e?3:0;break;case $e.getCharCode(","):a=u===e?4:0;break;case $e.getCharCode(":"):a=u===e?5:0;break;default:a=0}a>0?(r=n.updateStateListForPair(r,i,a),i++):r=this.updateStateListForChar(r,i)}var l=YA.min(r,function(f,h){return f.getBitCount()-h.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,a=[];try{for(var u=Td(e),l=u.next();!l.done;l=u.next()){var f=l.value;this.updateStateForChar(f,t,a)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return n.simplifyStates(a)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,a=wg[e.getMode()][i]>0,u=null,l=0;l<=Pi;l++){var f=wg[l][i];if(f>0){if(u==null&&(u=e.endBinaryShift(t)),!a||l===e.getMode()||l===Ur){var h=u.latchAndAppend(l,f);r.push(h)}if(!a&&VS[e.getMode()][l]>=0){var p=u.shiftAndAppend(l,f);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||wg[e.getMode()][i]===0){var v=e.addBinaryShiftChar(t);r.push(v)}},n.updateStateListForPair=function(e,t,r){var i,a,u=[];try{for(var l=Td(e),f=l.next();!f.done;f=l.next()){var h=f.value;this.updateStateForPair(h,t,r,u)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(u)},n.updateStateForPair=function(e,t,r,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Pi,r)),e.getMode()!==Pi&&i.push(a.shiftAndAppend(Pi,r)),r===3||r===4){var u=a.latchAndAppend(Ur,16-r).latchAndAppend(Ur,1);i.push(u)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(l)}},n.simplifyStates=function(e){var t,r,i,a,u=[];try{for(var l=Td(e),f=l.next();!f.done;f=l.next()){var h=f.value,p=!0,v=function(R){if(R.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(R)&&(u=u.filter(function(L){return L!==R}))};try{for(var _=(i=void 0,Td(u)),x=_.next();!x.done;x=_.next()){var A=x.value,S=v(A);if(S==="break")break}}catch(R){i={error:R}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}p&&u.push(h)}}catch(R){t={error:R}}finally{try{f&&!f.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return u},n})(),LM=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new PM(e).encode(),a=Ue.truncDivision(i.getSize()*t,100)+11,u=i.getSize()+a,l,f,h,p,v;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,f=Math.abs(r),f>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ce($e.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(f,l),p=n.WORD_SIZE[f];var _=h-h%p;if(v=n.stuffBits(i,p),v.getSize()+a>_)throw new Ce("Data to large for user specified layer");if(l&&v.getSize()>p*64)throw new Ce("Data to large for user specified layer")}else{p=0,v=null;for(var x=0;;x++){if(x>n.MAX_NB_BITS)throw new Ce("Data too large for an Aztec code");if(l=x<=3,f=l?x+1:x,h=n.totalBitsInLayer(f,l),!(u>h)){(v==null||p!==n.WORD_SIZE[f])&&(p=n.WORD_SIZE[f],v=n.stuffBits(i,p));var _=h-h%p;if(!(l&&v.getSize()>p*64)&&v.getSize()+a<=_)break}}}var A=n.generateCheckWords(v,h,p),S=v.getSize()/p,R=n.generateModeMessage(l,f,S),L=(l?11:14)+f*4,M=new Int32Array(L),B;if(l){B=L;for(var x=0;x<M.length;x++)M[x]=x}else{B=L+1+2*Ue.truncDivision(Ue.truncDivision(L,2)-1,15);for(var G=Ue.truncDivision(L,2),$=Ue.truncDivision(B,2),x=0;x<G;x++){var J=x+Ue.truncDivision(x,15);M[G-x-1]=$-J-1,M[G+x]=$+J+1}}for(var C=new zi(B),x=0,b=0;x<f;x++){for(var N=(f-x)*4+(l?9:12),k=0;k<N;k++)for(var V=k*2,z=0;z<2;z++)A.get(b+V+z)&&C.set(M[x*2+z],M[x*2+k]),A.get(b+N*2+V+z)&&C.set(M[x*2+k],M[L-1-x*2-z]),A.get(b+N*4+V+z)&&C.set(M[L-1-x*2-z],M[L-1-x*2-k]),A.get(b+N*6+V+z)&&C.set(M[L-1-x*2-k],M[x*2+z]);b+=N*8}if(n.drawModeMessage(C,l,B,R),l)n.drawBullsEye(C,Ue.truncDivision(B,2),5);else{n.drawBullsEye(C,Ue.truncDivision(B,2),7);for(var x=0,k=0;x<Ue.truncDivision(L,2)-1;x+=15,k+=16)for(var z=Ue.truncDivision(B,2)&1;z<B;z+=2)C.set(Ue.truncDivision(B,2)-k,z),C.set(Ue.truncDivision(B,2)+k,z),C.set(z,Ue.truncDivision(B,2)-k),C.set(z,Ue.truncDivision(B,2)+k)}var P=new EM;return P.setCompact(l),P.setSize(B),P.setLayers(f),P.setCodeWords(S),P.setMatrix(C),P},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new wn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var a=Ue.truncDivision(r,2);if(t)for(var u=0;u<7;u++){var l=a-3+u;i.get(u)&&e.set(l,a-5),i.get(u+7)&&e.set(a+5,l),i.get(20-u)&&e.set(l,a+5),i.get(27-u)&&e.set(a-5,l)}else for(var u=0;u<10;u++){var l=a-5+u+Ue.truncDivision(u,5);i.get(u)&&e.set(l,a-7),i.get(u+10)&&e.set(a+7,l),i.get(29-u)&&e.set(l,a+7),i.get(39-u)&&e.set(a-7,l)}},n.generateCheckWords=function(e,t,r){var i,a,u=e.getSize()/r,l=new LS(n.getGF(r)),f=Ue.truncDivision(t,r),h=n.bitsToWords(e,r,f);l.encode(h,f-u);var p=t%r,v=new wn;v.appendBits(0,p);try{for(var _=LM(Array.from(h)),x=_.next();!x.done;x=_.next()){var A=x.value;v.appendBits(A,r)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return v},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),a,u;for(a=0,u=e.getSize()/t;a<u;a++){for(var l=0,f=0;f<t;f++)l|=e.get(a*t+f)?1<<t-f-1:0;i[a]=l}return i},n.getGF=function(e){switch(e){case 4:return or.AZTEC_PARAM;case 6:return or.AZTEC_DATA_6;case 8:return or.AZTEC_DATA_8;case 10:return or.AZTEC_DATA_10;case 12:return or.AZTEC_DATA_12;default:throw new Ce("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new wn,i=e.getSize(),a=(1<<t)-2,u=0;u<i;u+=t){for(var l=0,f=0;f<t;f++)(u+f>=i||e.get(u+f))&&(l|=1<<t-1-f);(l&a)===a?(r.appendBits(l&a,t),u--):(l&a)===0?(r.appendBits(l|1,t),u--):r.appendBits(l,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();var kM={audio:!1,video:{facingMode:"environment"}},BM=300,VM=function(n){var e=n===void 0?{}:n,t=e.timeBetweenDecodingAttempts,r=t===void 0?BM:t,i=e.hints;return ye.useMemo(function(){var a=new B7(i);return a.timeBetweenDecodingAttempts=r,a},[i,r])},WA=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function l(p){try{h(r.next(p))}catch(v){u(v)}}function f(p){try{h(r.throw(p))}catch(v){u(v)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})},QA=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},FM=function(n){var e=n.resetStream,t=ye.useState(!1),r=t[0],i=t[1],a=ye.useState(null),u=a[0],l=a[1],f=ye.useRef(null),h=ye.useRef(e),p=ye.useCallback(function(x){f.current=x,l(typeof x.getCapabilities=="function"?x.getCapabilities().torch!==void 0:!1)},[]),v=ye.useCallback(function(){return WA(void 0,void 0,void 0,function(){return QA(this,function(x){switch(x.label){case 0:return!f.current||!u?[2]:[4,f.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return x.sent(),i(!0),[2]}})})},[u]),_=ye.useCallback(function(){return WA(void 0,void 0,void 0,function(){return QA(this,function(x){switch(x.label){case 0:return!f.current||!u?[2]:(f.current=null,l(null),i(!1),[4,h.current()]);case 1:return x.sent(),[2]}})})},[u]);return ye.useEffect(function(){h.current=e},[e]),{init:p,isOn:r,isAvailable:u,on:v,off:_}},UM=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},$A=function(n,e,t,r){function i(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function l(p){try{h(r.next(p))}catch(v){u(v)}}function f(p){try{h(r.throw(p))}catch(v){u(v)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((r=r.apply(n,e||[])).next())})},ZA=function(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(h){return function(p){return f([h,p])}}function f(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(p){h=[6,p],i=0}finally{r=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},zM=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},jM=function(n){n===void 0&&(n={});var e=n.paused,t=e===void 0?!1:e,r=n.hints,i=n.timeBetweenDecodingAttempts,a=n.onDecodeResult,u=a===void 0?function(){}:a,l=n.onDecodeError,f=l===void 0?function(){}:l,h=n.onError,p=h===void 0?function(){}:h,v="deviceId"in n?n.deviceId:void 0,_=ye.useState("constraints"in n?n.constraints:void 0),x=_[0],A=_[1],S=ye.useRef(u),R=ye.useRef(f),L=ye.useRef(p),M=ye.useRef(null),B=VM({hints:r,timeBetweenDecodingAttempts:i}),G=FM({resetStream:function(){return $A(void 0,void 0,void 0,function(){return ZA(this,function(k){switch(k.label){case 0:return N(),[4,b()];case 1:return k.sent(),[2]}})})}}),$=G.init,J=zM(G,["init"]),C=ye.useCallback(function(k,V){k&&S.current(k),V&&R.current(V)},[]),b=ye.useCallback(function(){return $A(void 0,void 0,void 0,function(){var k,V,z;return ZA(this,function(P){switch(P.label){case 0:if(!M.current)return[2];if(t)return[2];P.label=1;case 1:return P.trys.push([1,6,,7]),v?[4,B.decodeFromVideoDevice(v,M.current,C)]:[3,3];case 2:return P.sent(),[3,5];case 3:return[4,B.decodeFromConstraints(x??kM,M.current,C)];case 4:P.sent(),P.label=5;case 5:return[3,7];case 6:return k=P.sent(),L.current(k),[2];case 7:return M.current?(V=M.current.srcObject,z=V.getVideoTracks()[0],z&&$(z),[2]):[2]}})})},[B,v,x,t,C,$]),N=ye.useCallback(function(){B.reset()},[B]);return ye.useEffect(function(){S.current=u},[u]),ye.useEffect(function(){R.current=f},[f]),ye.useEffect(function(){L.current=p},[p]),ye.useEffect(function(){var k=UM(x,n.constraints);k||A(n.constraints)},[x,n]),ye.useEffect(function(){return b(),function(){N()}},[b,N]),{ref:M,torch:J}};const HM=({onResult:n,onClose:e})=>{const[t,r]=ye.useState(null),{ref:i}=jM({onDecodeResult(a){n(a.getText())},onError(a){a instanceof DOMException&&a.name==="NotAllowedError"&&r("Camera access denied. Please allow camera permissions.")}});return U.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:[U.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"400px",background:"#000",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:[U.jsx("button",{onClick:e,style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.5)",border:"none",color:"white",borderRadius:"50%",padding:"8px",cursor:"pointer",zIndex:10},children:U.jsx(iw,{size:24})}),U.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:"50%",border:"2px solid rgba(255, 255, 255, 0.6)",borderRadius:"12px",pointerEvents:"none",zIndex:5}}),t?U.jsxs("div",{style:{padding:"40px",color:"white",textAlign:"center"},children:[U.jsx(ew,{size:48,style:{marginBottom:"16px",color:"#ff4444"}}),U.jsx("p",{children:t})]}):U.jsx("video",{ref:i,style:{width:"100%",display:"block"}})]}),U.jsx("p",{style:{color:"white",marginTop:"20px",textAlign:"center"},children:"Point your camera at a barcode to scan."})]})},GM=({onSubmit:n,onCancel:e})=>{const[t,r]=ye.useState(""),[i,a]=ye.useState([]),[u,l]=ye.useState(""),[f,h]=ye.useState(""),[p,v]=ye.useState(!1),[_,x]=ye.useState(!1),[A,S]=ye.useState({show:!1,msg:"",type:"success"}),R=(C,b="success")=>{S({show:!0,msg:C,type:b}),setTimeout(()=>S(N=>({...N,show:!1})),3e3)},L=C=>{h(C),v(!1),R("Barcode scanned successfully!")},M=C=>{const b=C.target.value;if(r(b),b.length>1){const N=Object.keys(zd).filter(k=>k.toLowerCase().includes(b.toLowerCase())).slice(0,5);a(N)}else a([])},B=C=>{r(C),a([]);const b=zd[C];b&&l(b)},G=async C=>{C.preventDefault(),x(!0);try{n({name:t,category:u,location:"kichen",quantity:1,stockLevel:"full",value:0,barcode:f})}catch(b){console.error("Error preparing submission:",b),R("Error saving item","error"),x(!1)}},$={display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},J={fontWeight:600,fontSize:"0.875rem"};return U.jsxs("div",{className:"animate-slide-up",children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[U.jsx("h2",{className:"text-title",style:{margin:0},children:"Add New Item"}),U.jsxs(Fr,{variant:"secondary",onClick:()=>v(!0),children:[U.jsx(cx,{size:18}),U.jsx("span",{style:{marginLeft:"8px"},children:"Scan Barcode"})]})]}),p&&U.jsx(HM,{onResult:L,onClose:()=>v(!1)}),U.jsx(Pf,{children:U.jsxs("form",{onSubmit:G,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[U.jsxs("div",{style:$,children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[U.jsx("label",{style:J,children:"Item Name"}),f&&U.jsxs("span",{style:{fontSize:"0.75rem",color:"hsl(var(--color-primary))",display:"flex",alignItems:"center",gap:"4px"},children:[U.jsx(cx,{size:12})," ",f]})]}),U.jsxs("div",{style:{position:"relative"},children:[U.jsx("input",{required:!0,type:"text",value:t,onChange:M,className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"e.g. Milk, Bread, Eggs...",autoFocus:!0,onBlur:()=>setTimeout(()=>a([]),200)}),i.length>0&&U.jsx("ul",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:50,background:"var(--bg-card)",borderRadius:"0 0 var(--radius-md) var(--radius-md)",boxShadow:"var(--shadow-lg)",border:"1px solid var(--glass-border)",marginTop:"4px",padding:"4px 0",listStyle:"none"},children:i.map(C=>U.jsx("li",{onClick:()=>B(C),className:"hover-lift",style:{padding:"8px 12px",cursor:"pointer",fontSize:"0.9rem",textTransform:"capitalize",borderBottom:"1px solid rgba(0,0,0,0.05)"},children:U.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[U.jsx("span",{children:C}),U.jsx("span",{style:{fontSize:"0.8rem",opacity:.6,fontStyle:"italic"},children:zd[C]})]})},C))})]})]}),U.jsxs("div",{style:$,children:[U.jsx("label",{style:J,children:"Category (Optional - Auto-detected)"}),U.jsxs("select",{value:u,onChange:C=>l(C.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:[U.jsx("option",{value:"",children:"Auto-Detect"}),av.map(C=>U.jsx("option",{value:C,children:C},C))]})]}),U.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"12px",justifyContent:"flex-end"},children:[U.jsx(Fr,{type:"button",variant:"ghost",onClick:e,style:{color:"var(--text-muted)"},children:"Cancel"}),U.jsx(Fr,{type:"submit",disabled:_,children:_?U.jsx(Ev,{className:"animate-spin",size:18}):"Add to Pantry"})]})]})}),U.jsx(wm,{message:A.msg,type:A.type,isVisible:A.show,onClose:()=>S({...A,show:!1})})]})},qM=()=>{const{todos:n,addTodo:e,toggleTodo:t,deleteTodo:r}=TS(),{addItem:i}=Am(),[a,u]=ye.useState(""),[l,f]=ye.useState(1),[h,p]=ye.useState(av[0]),v=A=>{A?.preventDefault(),a.trim()&&(e(a,l,h),u(""),f(1))},_=A=>{confirm(`Move "${A.text}" to your inventory?`)&&(i({name:A.text,category:A.category,quantity:A.quantity,location:"Kitchen",stockLevel:"full",value:0}),r(A.id))},x=n.reduce((A,S)=>(A[S.category]||(A[S.category]=[]),A[S.category].push(S),A),{});return U.jsxs("div",{className:"animate-slide-up",children:[U.jsx("h2",{className:"text-title",children:"Shopping List"}),U.jsx(Pf,{className:"mb-6",children:U.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[U.jsxs("div",{style:{display:"flex",gap:"12px"},children:[U.jsx("input",{type:"number",min:"1",value:l,onChange:A=>f(parseInt(A.target.value)||1),className:"glass-panel",style:{width:"60px",padding:"12px",background:"rgba(255,255,255,0.5)",outline:"none",textAlign:"center"},placeholder:"Qty"}),U.jsx("input",{type:"text",value:a,onChange:A=>u(A.target.value),placeholder:"What do you need?",className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.5)",outline:"none"}})]}),U.jsxs("div",{style:{display:"flex",gap:"12px"},children:[U.jsx("select",{value:h,onChange:A=>p(A.target.value),className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.5)",outline:"none",cursor:"pointer"},children:av.map(A=>U.jsx("option",{value:A,children:A},A))}),U.jsx(Fr,{type:"submit",disabled:!a.trim(),style:{width:"60px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:U.jsx(rw,{size:24})})]})]})}),U.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[n.length===0&&U.jsx("div",{style:{textAlign:"center",padding:"40px",opacity:.5},children:U.jsx("p",{children:"Your shopping list is empty."})}),Object.entries(x).map(([A,S])=>U.jsxs("div",{className:"animate-fade-in",children:[U.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"hsl(var(--color-primary))",marginBottom:"8px",marginLeft:"4px",textTransform:"uppercase",letterSpacing:"0.05em"},children:A}),U.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:S.map((R,L)=>U.jsxs("div",{className:"glass-panel list-item-enter tap-scale",style:{display:"flex",alignItems:"center",padding:"12px 16px",gap:"12px",transition:"all 0.2s",opacity:0,animationDelay:`${L*50}ms`,background:R.completed?"rgba(0,0,0,0.02)":"var(--glass-bg)"},children:[U.jsx("button",{onClick:()=>t(R.id),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:R.completed?"hsl(var(--color-primary))":"var(--text-muted)"},children:R.completed?U.jsx(tw,{size:22,fill:"currentColor",className:"text-primary"}):U.jsx(FC,{size:22})}),U.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[U.jsx("span",{style:{fontSize:"1rem",textDecoration:R.completed?"line-through":"none",fontWeight:500},children:R.text}),R.quantity>1&&U.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["Qty: ",R.quantity]})]}),R.completed&&U.jsx("button",{onClick:()=>_(R),style:{background:"none",border:"none",cursor:"pointer",color:"hsl(var(--color-primary))",padding:"4px",marginRight:"4px"},title:"Move to Inventory",children:U.jsx(MC,{size:18})}),U.jsx("button",{onClick:()=>r(R.id),style:{background:"none",border:"none",opacity:.3,cursor:"pointer",color:"#ef4444",padding:"4px"},className:"hover:opacity-100",children:U.jsx(c4,{size:18})})]},R.id))})]},A))]})]})},XM=()=>{const[n,e]=ye.useState(null),[t,r]=ye.useState(!1);return ye.useEffect(()=>{const a=u=>{u.preventDefault(),e(u),r(!0)};return window.addEventListener("beforeinstallprompt",a),()=>{window.removeEventListener("beforeinstallprompt",a)}},[]),{isInstallable:t,promptToInstall:async()=>{if(!n)return;await n.prompt();const{outcome:a}=await n.userChoice;console.log(a==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null),r(!1)}}},KM=()=>{const[n,e]=ye.useState(!0),[t,r]=ye.useState(!1),[i,a]=ye.useState(""),[u,l]=ye.useState(""),[f,h]=ye.useState(!1),[p,v]=ye.useState(!1),[_,x]=ye.useState({msg:"",type:"info",show:!1}),A=(M,B)=>{x({msg:M,type:B,show:!0})},S=async M=>{M.preventDefault(),v(!0);try{n?await OO(_s,i,u):await DO(_s,i,u)}catch(B){console.error(B);let G="Authentication failed";B.code==="auth/invalid-credential"&&(G="Invalid email or password."),B.code==="auth/email-already-in-use"&&(G="Email already in use."),B.code==="auth/weak-password"&&(G="Password should be at least 6 characters."),B.code==="auth/operation-not-allowed"&&(G="Enable Email/Password in Firebase Console!"),A(G,"error"),v(!1)}},R=async()=>{v(!0);try{await SO(_s)}catch(M){console.error(M),A("Failed to sign in anonymously.","error"),v(!1)}},L=async M=>{if(M.preventDefault(),!i){A("Please enter your email address.","info");return}v(!0);try{await RO(_s,i),A("Password reset email sent! Check your inbox.","success"),r(!1)}catch(B){console.error(B);let G="Failed to send reset email.";B.code==="auth/user-not-found"&&(G="No account found with this email."),B.code==="auth/invalid-email"&&(G="Invalid email address."),A(G,"error")}finally{v(!1)}};return U.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",background:"radial-gradient(circle at 50% 10%, rgba(37, 99, 235, 0.1) 0%, transparent 50%)"},children:[U.jsxs("div",{className:"animate-fade-in",style:{width:"100%",maxWidth:"400px"},children:[U.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[U.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:800,marginBottom:"8px",background:"linear-gradient(135deg, hsl(var(--color-primary)) 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Bitlkhzin"}),U.jsx("p",{className:"text-muted",children:"Your smart inventory companion."})]}),U.jsx(Pf,{children:U.jsxs("form",{onSubmit:t?L:S,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[U.jsx("h2",{className:"text-title",style:{fontSize:"1.5rem",textAlign:"center"},children:t?"Reset Password":n?"Welcome Back":"Create Account"}),U.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[U.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem",marginBottom:"8px"},children:"Email"}),U.jsx("input",{type:"email",required:!0,value:i,onChange:M=>a(M.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"you@example.com"})]}),!t&&U.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[U.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem"},children:"Password"}),n&&U.jsx("button",{type:"button",onClick:()=>r(!0),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontSize:"0.75rem",cursor:"pointer",fontWeight:500},children:"Forgot Password?"})]}),U.jsxs("div",{style:{position:"relative"},children:[U.jsx("input",{type:f?"text":"password",required:!0,minLength:6,value:u,onChange:M=>l(M.target.value),className:"glass-panel",style:{padding:"12px",paddingRight:"40px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:""}),U.jsx("button",{type:"button",onClick:()=>h(!f),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-light)",opacity:.6,display:"flex",alignItems:"center"},children:f?U.jsx(HC,{size:18}):U.jsx(qC,{size:18})})]})]}),U.jsxs(Fr,{type:"submit",style:{marginTop:"8px",display:"flex",justifyContent:"center",gap:"8px"},disabled:p,children:[p?U.jsx(Ev,{className:"animate-spin"}):t?U.jsx(JC,{size:18}):n?U.jsx(QC,{size:18}):U.jsx(h4,{size:18}),t?"Send Reset Link":n?"Sign In":"Create Account"]}),U.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:U.jsx("p",{className:"text-muted",style:{fontSize:"0.9rem"},children:t?U.jsx("button",{type:"button",onClick:()=>r(!1),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer"},children:"Back to Login"}):U.jsxs(U.Fragment,{children:[n?"Don't have an account? ":"Already have an account? ",U.jsx("button",{type:"button",onClick:()=>{e(!n),a(""),l("")},style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer",textDecoration:"underline"},children:n?"Sign Up":"Log In"})]})})}),!t&&U.jsxs(U.Fragment,{children:[U.jsxs("div",{style:{position:"relative",margin:"20px 0",textAlign:"center"},children:[U.jsx("hr",{style:{borderColor:"var(--glass-border)",opacity:.5}}),U.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--color-surface-light)",padding:"0 10px",fontSize:"0.8rem",color:"var(--color-text-light)",opacity:.6},children:"OR"})]}),U.jsx(Fr,{type:"button",variant:"secondary",onClick:R,disabled:p,style:{width:"100%"},children:"Continue as Guest"})]})]})})]}),U.jsx(wm,{message:_.msg,type:_.type,isVisible:_.show,onClose:()=>x({..._,show:!1})})]})};function YM(){const[n,e]=ye.useState("inventory"),[t,r]=ye.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{items:i,addItem:a,deleteItem:u}=Am(),{isInstallable:l,promptToInstall:f}=XM(),{user:h,loading:p,userProfile:v,updateHousehold:_}=Em();if(ye.useEffect(()=>{const A=document.querySelector('meta[name="theme-color"]');t?(document.documentElement.classList.add("dark"),A&&A.setAttribute("content","#14171f")):(document.documentElement.classList.remove("dark"),A&&A.setAttribute("content","#f9fafb"))},[t]),p)return U.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:U.jsx(Ev,{className:"animate-spin",size:48,color:"hsl(var(--color-primary))"})});if(!h)return U.jsx(KM,{});const x=()=>{switch(n){case"add":return U.jsx(GM,{onSubmit:A=>{a(A),e("inventory")},onCancel:()=>e("inventory")});case"settings":return U.jsxs("div",{className:"animate-fade-in",children:[U.jsx("h2",{className:"text-title",children:"Settings"}),U.jsxs(Pf,{children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[U.jsx("h3",{style:{margin:0},children:"Appearance"}),U.jsxs(Fr,{variant:"secondary",onClick:()=>r(!t),style:{display:"flex",alignItems:"center",gap:"8px"},children:[t?U.jsx(u4,{size:18}):U.jsx(t4,{size:18}),t?"Light Mode":"Dark Mode"]})]}),U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs("div",{style:{opacity:.6},children:[U.jsx("p",{children:"App Version: 1.1.0"}),U.jsxs("p",{children:["Account: ",h.email]}),U.jsx("p",{children:"Sync Status: Cloud (Firebase)"})]}),U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs("div",{children:[U.jsx("h3",{children:"Family Sharing"}),U.jsx("p",{style:{fontSize:"0.9rem",opacity:.7,marginBottom:"8px"},children:"Share this code with your family to sync your list:"}),U.jsx("div",{style:{display:"flex",gap:"8px",background:"rgba(0,0,0,0.05)",padding:"12px",borderRadius:"8px",fontFamily:"monospace",fontWeight:"bold",justifyContent:"center",marginBottom:"16px"},onClick:()=>{navigator.clipboard.writeText(v?.householdId||""),alert("Code copied!")},children:v?.householdId||"Loading..."}),U.jsxs("details",{children:[U.jsx("summary",{style:{cursor:"pointer",fontSize:"0.9rem",color:"hsl(var(--color-primary))"},children:"Join a Family"}),U.jsxs("form",{onSubmit:async A=>{A.preventDefault();const S=A.target.code.value;S&&confirm("Joining a new family will switch your view. Continue?")&&(await _(S),alert("You have joined the family!"),window.location.reload())},style:{marginTop:"12px",display:"flex",gap:"8px"},children:[U.jsx("input",{name:"code",placeholder:"Enter family code",className:"glass-panel",style:{padding:"8px",flex:1}}),U.jsx(Fr,{size:"sm",type:"submit",children:"Join"})]})]})]}),U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs(Fr,{variant:"secondary",onClick:()=>_s.signOut(),style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px",color:"#f87171",borderColor:"rgba(248, 113, 113, 0.3)"},children:[U.jsx(nw,{size:18}),"Log Out"]}),l&&U.jsxs(U.Fragment,{children:[U.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),U.jsxs(Fr,{onClick:f,style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px"},children:[U.jsx(zC,{size:18}),"Install App"]})]})]})]});case"todo":return U.jsx(qM,{});default:return U.jsx("div",{className:"animate-fade-in",children:U.jsx(Q5,{items:i,onAddItem:()=>e("add"),onDeleteItem:u})})}};return U.jsx(Y5,{currentView:n,onNavigate:A=>e(A),children:x()})}IC.createRoot(document.getElementById("root")).render(U.jsx(ye.StrictMode,{children:U.jsx(W5,{children:U.jsx(YM,{})})}));
