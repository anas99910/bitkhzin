const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./InventoryList-CMJ7WzWO.js","./SwipeableItem-CJQZ9PtE.js","./TodoView-D8tA0G3H.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();function Ow(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wg={exports:{}},vu={};var uT;function Mw(){if(uT)return vu;uT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return vu.Fragment=t,vu.jsx=e,vu.jsxs=e,vu}var cT;function Pw(){return cT||(cT=1,wg.exports=Mw()),wg.exports}var j=Pw(),Rg={exports:{}},bt={};var hT;function kw(){if(hT)return bt;hT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function M(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Z={};function st(V,J,ot){this.props=V,this.context=J,this.refs=Z,this.updater=ot||G}st.prototype.isReactComponent={},st.prototype.setState=function(V,J){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,J,"setState")},st.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function lt(){}lt.prototype=st.prototype;function nt(V,J,ot){this.props=V,this.context=J,this.refs=Z,this.updater=ot||G}var _t=nt.prototype=new lt;_t.constructor=nt,W(_t,st.prototype),_t.isPureReactComponent=!0;var It=Array.isArray;function Et(){}var w={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function D(V,J,ot){var ut=ot.ref;return{$$typeof:s,type:V,key:J,ref:ut!==void 0?ut:null,props:ot}}function O(V,J){return D(V.type,J,V.props)}function N(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var J={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ot){return J[ot]})}var R=/\/+/g;function le(V,J){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):J.toString(36)}function ke(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Et,Et):(V.status="pending",V.then(function(J){V.status==="pending"&&(V.status="fulfilled",V.value=J)},function(J){V.status==="pending"&&(V.status="rejected",V.reason=J)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,J,ot,ut,At){var Dt=typeof V;(Dt==="undefined"||Dt==="boolean")&&(V=null);var zt=!1;if(V===null)zt=!0;else switch(Dt){case"bigint":case"string":case"number":zt=!0;break;case"object":switch(V.$$typeof){case s:case t:zt=!0;break;case E:return zt=V._init,Y(zt(V._payload),J,ot,ut,At)}}if(zt)return At=At(V),zt=ut===""?"."+le(V,0):ut,It(At)?(ot="",zt!=null&&(ot=zt.replace(R,"$&/")+"/"),Y(At,J,ot,"",function(xs){return xs})):At!=null&&(N(At)&&(At=O(At,ot+(At.key==null||V&&V.key===At.key?"":(""+At.key).replace(R,"$&/")+"/")+zt)),J.push(At)),1;zt=0;var Le=ut===""?".":ut+":";if(It(V))for(var ue=0;ue<V.length;ue++)ut=V[ue],Dt=Le+le(ut,ue),zt+=Y(ut,J,ot,Dt,At);else if(ue=M(V),typeof ue=="function")for(V=ue.call(V),ue=0;!(ut=V.next()).done;)ut=ut.value,Dt=Le+le(ut,ue++),zt+=Y(ut,J,ot,Dt,At);else if(Dt==="object"){if(typeof V.then=="function")return Y(ke(V),J,ot,ut,At);throw J=String(V),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return zt}function at(V,J,ot){if(V==null)return V;var ut=[],At=0;return Y(V,ut,"","",function(Dt){return J.call(ot,Dt,At++)}),ut}function yt(V){if(V._status===-1){var J=V._result;J=J(),J.then(function(ot){(V._status===0||V._status===-1)&&(V._status=1,V._result=ot)},function(ot){(V._status===0||V._status===-1)&&(V._status=2,V._result=ot)}),V._status===-1&&(V._status=0,V._result=J)}if(V._status===1)return V._result.default;throw V._result}var jt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Qt={map:at,forEach:function(V,J,ot){at(V,function(){J.apply(this,arguments)},ot)},count:function(V){var J=0;return at(V,function(){J++}),J},toArray:function(V){return at(V,function(J){return J})||[]},only:function(V){if(!N(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return bt.Activity=T,bt.Children=Qt,bt.Component=st,bt.Fragment=e,bt.Profiler=o,bt.PureComponent=nt,bt.StrictMode=r,bt.Suspense=g,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,bt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return w.H.useMemoCache(V)}},bt.cache=function(V){return function(){return V.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(V,J,ot){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ut=W({},V.props),At=V.key;if(J!=null)for(Dt in J.key!==void 0&&(At=""+J.key),J)!I.call(J,Dt)||Dt==="key"||Dt==="__self"||Dt==="__source"||Dt==="ref"&&J.ref===void 0||(ut[Dt]=J[Dt]);var Dt=arguments.length-2;if(Dt===1)ut.children=ot;else if(1<Dt){for(var zt=Array(Dt),Le=0;Le<Dt;Le++)zt[Le]=arguments[Le+2];ut.children=zt}return D(V.type,At,ut)},bt.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},bt.createElement=function(V,J,ot){var ut,At={},Dt=null;if(J!=null)for(ut in J.key!==void 0&&(Dt=""+J.key),J)I.call(J,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(At[ut]=J[ut]);var zt=arguments.length-2;if(zt===1)At.children=ot;else if(1<zt){for(var Le=Array(zt),ue=0;ue<zt;ue++)Le[ue]=arguments[ue+2];At.children=Le}if(V&&V.defaultProps)for(ut in zt=V.defaultProps,zt)At[ut]===void 0&&(At[ut]=zt[ut]);return D(V,Dt,At)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(V){return{$$typeof:m,render:V}},bt.isValidElement=N,bt.lazy=function(V){return{$$typeof:E,_payload:{_status:-1,_result:V},_init:yt}},bt.memo=function(V,J){return{$$typeof:p,type:V,compare:J===void 0?null:J}},bt.startTransition=function(V){var J=w.T,ot={};w.T=ot;try{var ut=V(),At=w.S;At!==null&&At(ot,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(Et,jt)}catch(Dt){jt(Dt)}finally{J!==null&&ot.types!==null&&(J.types=ot.types),w.T=J}},bt.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},bt.use=function(V){return w.H.use(V)},bt.useActionState=function(V,J,ot){return w.H.useActionState(V,J,ot)},bt.useCallback=function(V,J){return w.H.useCallback(V,J)},bt.useContext=function(V){return w.H.useContext(V)},bt.useDebugValue=function(){},bt.useDeferredValue=function(V,J){return w.H.useDeferredValue(V,J)},bt.useEffect=function(V,J){return w.H.useEffect(V,J)},bt.useEffectEvent=function(V){return w.H.useEffectEvent(V)},bt.useId=function(){return w.H.useId()},bt.useImperativeHandle=function(V,J,ot){return w.H.useImperativeHandle(V,J,ot)},bt.useInsertionEffect=function(V,J){return w.H.useInsertionEffect(V,J)},bt.useLayoutEffect=function(V,J){return w.H.useLayoutEffect(V,J)},bt.useMemo=function(V,J){return w.H.useMemo(V,J)},bt.useOptimistic=function(V,J){return w.H.useOptimistic(V,J)},bt.useReducer=function(V,J,ot){return w.H.useReducer(V,J,ot)},bt.useRef=function(V){return w.H.useRef(V)},bt.useState=function(V){return w.H.useState(V)},bt.useSyncExternalStore=function(V,J,ot){return w.H.useSyncExternalStore(V,J,ot)},bt.useTransition=function(){return w.H.useTransition()},bt.version="19.2.3",bt}var fT;function Vp(){return fT||(fT=1,Rg.exports=kw()),Rg.exports}var Ct=Vp();const AM=Ow(Ct);var Cg={exports:{}},Eu={},Dg={exports:{}},xg={};var dT;function Lw(){return dT||(dT=1,(function(s){function t(Y,at){var yt=Y.length;Y.push(at);t:for(;0<yt;){var jt=yt-1>>>1,Qt=Y[jt];if(0<o(Qt,at))Y[jt]=at,Y[yt]=Qt,yt=jt;else break t}}function e(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var at=Y[0],yt=Y.pop();if(yt!==at){Y[0]=yt;t:for(var jt=0,Qt=Y.length,V=Qt>>>1;jt<V;){var J=2*(jt+1)-1,ot=Y[J],ut=J+1,At=Y[ut];if(0>o(ot,yt))ut<Qt&&0>o(At,ot)?(Y[jt]=At,Y[ut]=yt,jt=ut):(Y[jt]=ot,Y[J]=yt,jt=J);else if(ut<Qt&&0>o(At,yt))Y[jt]=At,Y[ut]=yt,jt=ut;else break t}}return at}function o(Y,at){var yt=Y.sortIndex-at.sortIndex;return yt!==0?yt:Y.id-at.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],E=1,T=null,b=3,M=!1,G=!1,W=!1,Z=!1,st=typeof setTimeout=="function"?setTimeout:null,lt=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function _t(Y){for(var at=e(p);at!==null;){if(at.callback===null)r(p);else if(at.startTime<=Y)r(p),at.sortIndex=at.expirationTime,t(g,at);else break;at=e(p)}}function It(Y){if(W=!1,_t(Y),!G)if(e(g)!==null)G=!0,Et||(Et=!0,k());else{var at=e(p);at!==null&&ke(It,at.startTime-Y)}}var Et=!1,w=-1,I=5,D=-1;function O(){return Z?!0:!(s.unstable_now()-D<I)}function N(){if(Z=!1,Et){var Y=s.unstable_now();D=Y;var at=!0;try{t:{G=!1,W&&(W=!1,lt(w),w=-1),M=!0;var yt=b;try{e:{for(_t(Y),T=e(g);T!==null&&!(T.expirationTime>Y&&O());){var jt=T.callback;if(typeof jt=="function"){T.callback=null,b=T.priorityLevel;var Qt=jt(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof Qt=="function"){T.callback=Qt,_t(Y),at=!0;break e}T===e(g)&&r(g),_t(Y)}else r(g);T=e(g)}if(T!==null)at=!0;else{var V=e(p);V!==null&&ke(It,V.startTime-Y),at=!1}}break t}finally{T=null,b=yt,M=!1}at=void 0}}finally{at?k():Et=!1}}}var k;if(typeof nt=="function")k=function(){nt(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,le=R.port2;R.port1.onmessage=N,k=function(){le.postMessage(null)}}else k=function(){st(N,0)};function ke(Y,at){w=st(function(){Y(s.unstable_now())},at)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var at=3;break;default:at=b}var yt=b;b=at;try{return Y()}finally{b=yt}},s.unstable_requestPaint=function(){Z=!0},s.unstable_runWithPriority=function(Y,at){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var yt=b;b=Y;try{return at()}finally{b=yt}},s.unstable_scheduleCallback=function(Y,at,yt){var jt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?jt+yt:jt):yt=jt,Y){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=yt+Qt,Y={id:E++,callback:at,priorityLevel:Y,startTime:yt,expirationTime:Qt,sortIndex:-1},yt>jt?(Y.sortIndex=yt,t(p,Y),e(g)===null&&Y===e(p)&&(W?(lt(w),w=-1):W=!0,ke(It,yt-jt))):(Y.sortIndex=Qt,t(g,Y),G||M||(G=!0,Et||(Et=!0,k()))),Y},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(Y){var at=b;return function(){var yt=b;b=at;try{return Y.apply(this,arguments)}finally{b=yt}}}})(xg)),xg}var mT;function Uw(){return mT||(mT=1,Dg.exports=Lw()),Dg.exports}var Ng={exports:{}},tn={};var gT;function zw(){if(gT)return tn;gT=1;var s=Vp();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,p,E){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:p,implementation:E}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,tn.createPortal=function(g,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,E)},tn.flushSync=function(g){var p=c.T,E=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=E,r.d.f()}},tn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},tn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},tn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,M=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:M}):E==="script"&&r.d.X(g,{crossOrigin:T,integrity:b,fetchPriority:M,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},tn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,T=m(E,p.crossOrigin);r.d.L(g,E,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(g,p){if(typeof g=="string")if(p){var E=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},tn.requestFormReset=function(g){r.d.r(g)},tn.unstable_batchedUpdates=function(g,p){return g(p)},tn.useFormState=function(g,p,E){return c.H.useFormState(g,p,E)},tn.useFormStatus=function(){return c.H.useHostTransitionStatus()},tn.version="19.2.3",tn}var pT;function Bw(){if(pT)return Ng.exports;pT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Ng.exports=zw(),Ng.exports}var yT;function jw(){if(yT)return Eu;yT=1;var s=Uw(),t=Vp(),e=Bw();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,A=f.child;A;){if(A===a){_=!0,a=f,l=d;break}if(A===l){_=!0,l=f,a=d;break}A=A.sibling}if(!_){for(A=d.child;A;){if(A===a){_=!0,a=d,l=f;break}if(A===l){_=!0,l=d,a=f;break}A=A.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function E(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=E(n),i!==null)return i;n=n.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),st=Symbol.for("react.profiler"),lt=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),It=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(n){return n===null||typeof n!="object"?null:(n=N&&n[N]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case W:return"Fragment";case st:return"Profiler";case Z:return"StrictMode";case It:return"Suspense";case Et:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case G:return"Portal";case nt:return n.displayName||"Context";case lt:return(n._context.displayName||"Context")+".Consumer";case _t:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return i=n.displayName||null,i!==null?i:le(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return le(n(i))}catch{}}return null}var ke=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},jt=[],Qt=-1;function V(n){return{current:n}}function J(n){0>Qt||(n.current=jt[Qt],jt[Qt]=null,Qt--)}function ot(n,i){Qt++,jt[Qt]=n.current,n.current=i}var ut=V(null),At=V(null),Dt=V(null),zt=V(null);function Le(n,i){switch(ot(Dt,i),ot(At,n),ot(ut,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?VE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=VE(i),n=OE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(ut),ot(ut,n)}function ue(){J(ut),J(At),J(Dt)}function xs(n){n.memoizedState!==null&&ot(zt,n);var i=ut.current,a=OE(i,n.type);i!==a&&(ot(At,n),ot(ut,a))}function Oa(n){At.current===n&&(J(ut),J(At)),zt.current===n&&(J(zt),gu._currentValue=yt)}var Ma,Pa;function hi(n){if(Ma===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ma=i&&i[1]||"",Pa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ma+n+Pa}var gl=!1;function Ns(n,i){if(!n||gl)return"";gl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var q=H}Reflect.construct(n,[],$)}else{try{$.call()}catch(H){q=H}n.call($.prototype)}}else{try{throw Error()}catch(H){q=H}($=n())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],A=d[1];if(_&&A){var C=_.split(`
`),B=A.split(`
`);for(f=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===C.length||f===B.length)for(l=C.length-1,f=B.length-1;1<=l&&0<=f&&C[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(C[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||C[l]!==B[f]){var K=`
`+C[l].replace(" at new "," at ");return n.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",n.displayName)),K}while(1<=l&&0<=f);break}}}finally{gl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?hi(a):""}function pl(n,i){switch(n.tag){case 26:case 27:case 5:return hi(n.type);case 16:return hi("Lazy");case 13:return n.child!==i&&i!==null?hi("Suspense Fallback"):hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return Ns(n.type,!1);case 11:return Ns(n.type.render,!1);case 1:return Ns(n.type,!0);case 31:return hi("Activity");default:return""}}function yl(n){try{var i="",a=null;do i+=pl(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ie=Object.prototype.hasOwnProperty,Ue=s.unstable_scheduleCallback,Ir=s.unstable_cancelCallback,Cd=s.unstable_shouldYield,Ac=s.unstable_requestPaint,ln=s.unstable_now,Vs=s.unstable_getCurrentPriorityLevel,_l=s.unstable_ImmediatePriority,vl=s.unstable_UserBlockingPriority,wr=s.unstable_NormalPriority,Dd=s.unstable_LowPriority,Sc=s.unstable_IdlePriority,bc=s.log,Ic=s.unstable_setDisableYieldValue,Xn=null,Qe=null;function Pn(n){if(typeof bc=="function"&&Ic(n),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(Xn,n)}catch{}}var ye=Math.clz32?Math.clz32:Rc,wc=Math.log,ka=Math.LN2;function Rc(n){return n>>>=0,n===0?32:31-(wc(n)/ka|0)|0}var fi=256,Os=262144,we=4194304;function di(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function mi(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var A=l&134217727;return A!==0?(l=A&~d,l!==0?f=di(l):(_&=A,_!==0?f=di(_):a||(a=A&~n,a!==0&&(f=di(a))))):(A=l&~d,A!==0?f=di(A):_!==0?f=di(_):a||(a=l&~n,a!==0&&(f=di(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function $n(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function xd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var n=we;return we<<=1,(we&62914560)===0&&(we=4194304),n}function gi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ms(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Nd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var A=n.entanglements,C=n.expirationTimes,B=n.hiddenUpdates;for(a=_&~a;0<a;){var K=31-ye(a),$=1<<K;A[K]=0,C[K]=-1;var q=B[K];if(q!==null)for(B[K]=null,K=0;K<q.length;K++){var H=q[K];H!==null&&(H.lane&=-536870913)}a&=~$}l!==0&&Ps(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function Ps(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-ye(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function El(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-ye(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function Tl(n,i){var a=i&-i;return a=(a&42)!==0?1:ks(a),(a&(n.suspendedLanes|i))!==0?0:a}function ks(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Hi(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Dc(){var n=at.p;return n!==0?n:(n=window.event,n===void 0?32:nT(n.type))}function Jn(n,i){var a=at.p;try{return at.p=n,i()}finally{at.p=a}}var Wn=Math.random().toString(36).slice(2),Re="__reactFiber$"+Wn,qe="__reactProps$"+Wn,pi="__reactContainer$"+Wn,La="__reactEvents$"+Wn,Vd="__reactListeners$"+Wn,xc="__reactHandles$"+Wn,Nc="__reactResources$"+Wn,yi="__reactMarker$"+Wn;function Ua(n){delete n[Re],delete n[qe],delete n[La],delete n[Vd],delete n[xc]}function _i(n){var i=n[Re];if(i)return i;for(var a=n.parentNode;a;){if(i=a[pi]||a[Re]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=BE(n);n!==null;){if(a=n[Re])return a;n=BE(n)}return i}n=a,a=n.parentNode}return null}function kn(n){if(n=n[Re]||n[pi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Tn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function vi(n){var i=n[Nc];return i||(i=n[Nc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ce(n){n[yi]=!0}var Al=new Set,Sl={};function Ei(n,i){Ti(n,i),Ti(n+"Capture",i)}function Ti(n,i){for(Sl[n]=i,n=0;n<i.length;n++)Al.add(i[n])}var bl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Il={},wl={};function Vc(n){return Ie.call(wl,n)?!0:Ie.call(Il,n)?!1:bl.test(n)?wl[n]=!0:(Il[n]=!0,!1)}function za(n,i,a){if(Vc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function An(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function De(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function Fe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Rr(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rl(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Yt(n){if(!n._valueTracker){var i=Rr(n)?"checked":"value";n._valueTracker=Rl(n,i,""+n[i])}}function Ls(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=Rr(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Ai(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Us=/[\n"\\]/g;function fn(n){return n.replace(Us,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ba(n,i,a,l,f,d,_,A){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Fe(i)):n.value!==""+Fe(i)&&(n.value=""+Fe(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?Cl(n,_,Fe(i)):a!=null?Cl(n,_,Fe(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+Fe(A):n.removeAttribute("name")}function Oc(n,i,a,l,f,d,_,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Yt(n);return}a=a!=null?""+Fe(a):"",i=i!=null?""+Fe(i):a,A||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=A?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Yt(n)}function Cl(n,i,a){i==="number"&&Ai(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Cr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Mc(n,i,a){if(i!=null&&(i=""+Fe(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+Fe(a):""}function Dr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(ke(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Fe(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Yt(n)}function dn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Pc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Pc.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function xl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Dl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Dl(n,d,i[d])}function ja(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(n){return xr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zn(){}var Nl=null;function Ln(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Nr=null,Si=null;function zs(n){var i=kn(n);if(i&&(n=i.stateNode)){var a=n[qe]||null;t:switch(n=i.stateNode,i.type){case"input":if(Ba(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[qe]||null;if(!f)throw Error(r(90));Ba(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&Ls(l)}break t;case"textarea":Mc(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Cr(n,!!a.multiple,i,!1)}}}var Fa=!1;function Vr(n,i,a){if(Fa)return n(i,a);Fa=!0;try{var l=n(i);return l}finally{if(Fa=!1,(Nr!==null||Si!==null)&&(Dh(),Nr&&(i=Nr,n=Si,Si=Nr=null,zs(i),n)))for(i=0;i<n.length;i++)zs(n[i])}}function ti(n,i){var a=n.stateNode;if(a===null)return null;var l=a[qe]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bs=!1;if(Un)try{var te={};Object.defineProperty(te,"passive",{get:function(){Bs=!0}}),window.addEventListener("test",te,te),window.removeEventListener("test",te,te)}catch{Bs=!1}var bi=null,Vl=null,js=null;function Ol(){if(js)return js;var n,i=Vl,a=i.length,l,f="value"in bi?bi.value:bi.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return js=f.slice(n,1<l?1-l:void 0)}function qs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Gi(){return!0}function ei(){return!1}function Ye(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Gi:ei,this.isPropagationStopped=ei,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),i}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=Ye(Ki),Or=T({},Ki,{view:0,detail:0}),Ml=Ye(Or),Mr,Ha,wi,Ga=T({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(Mr=n.screenX-wi.screenX,Ha=n.screenY-wi.screenY):Ha=Mr=0,wi=n),Mr)},movementY:function(n){return"movementY"in n?n.movementY:Ha}}),Pl=Ye(Ga),Fs=T({},Ga,{dataTransfer:0}),Lc=Ye(Fs),Uc=T({},Or,{relatedTarget:0}),Hs=Ye(Uc),kl=T({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=Ye(kl),Ka=T({},Ki,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Bc=Ye(Ka),jc=T({},Ki,{data:0}),Ri=Ye(jc),qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Hc[n])?!!i[n]:!1}function Pr(){return Gc}var un=T({},Or,{key:function(n){if(n.key){var i=qc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=qs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(n){return n.type==="keypress"?qs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Kc=Ye(un),Qc=T({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Ye(Qc),h=T({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),y=Ye(h),v=T({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Ye(v),U=T({},Ga,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Ye(U),it=T({},Ki,{newState:0,oldState:0}),wt=Ye(it),_e=[9,13,27,32],Ht=Un&&"CompositionEvent"in window,ce=null;Un&&"documentMode"in document&&(ce=document.documentMode);var zn=Un&&"TextEvent"in window&&!ce,Ci=Un&&(!Ht||ce&&8<ce&&11>=ce),ni=" ",ii=!1;function Gs(n,i){switch(n){case"keyup":return _e.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ya=!1;function iI(n,i){switch(n){case"compositionend":return Qa(i);case"keypress":return i.which!==32?null:(ii=!0,ni);case"textInput":return n=i.data,n===ni&&ii?null:n;default:return null}}function rI(n,i){if(Ya)return n==="compositionend"||!Ht&&Gs(n,i)?(n=Ol(),js=Vl=bi=null,Ya=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ci&&i.locale!=="ko"?null:i.data;default:return null}}var sI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!sI[n.type]:i==="textarea"}function Hy(n,i,a,l){Nr?Si?Si.push(l):Si=[l]:Nr=l,i=kh(i,"onChange"),0<i.length&&(a=new Ii("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Ll=null,Ul=null;function aI(n){wE(n,0)}function Yc(n){var i=Tn(n);if(Ls(i))return n}function Gy(n,i){if(n==="change")return i}var Ky=!1;if(Un){var Od;if(Un){var Md="oninput"in document;if(!Md){var Qy=document.createElement("div");Qy.setAttribute("oninput","return;"),Md=typeof Qy.oninput=="function"}Od=Md}else Od=!1;Ky=Od&&(!document.documentMode||9<document.documentMode)}function Yy(){Ll&&(Ll.detachEvent("onpropertychange",Xy),Ul=Ll=null)}function Xy(n){if(n.propertyName==="value"&&Yc(Ul)){var i=[];Hy(i,Ul,n,Ln(n)),Vr(aI,i)}}function oI(n,i,a){n==="focusin"?(Yy(),Ll=i,Ul=a,Ll.attachEvent("onpropertychange",Xy)):n==="focusout"&&Yy()}function lI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Yc(Ul)}function uI(n,i){if(n==="click")return Yc(i)}function cI(n,i){if(n==="input"||n==="change")return Yc(i)}function hI(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:hI;function zl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Ie.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function $y(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Jy(n,i){var a=$y(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=$y(a)}}function Wy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Wy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Zy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ai(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ai(n.document)}return i}function Pd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var fI=Un&&"documentMode"in document&&11>=document.documentMode,Xa=null,kd=null,Bl=null,Ld=!1;function t_(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ld||Xa==null||Xa!==Ai(l)||(l=Xa,"selectionStart"in l&&Pd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Bl&&zl(Bl,l)||(Bl=l,l=kh(kd,"onSelect"),0<l.length&&(i=new Ii("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Xa)))}function Ks(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var $a={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Ud={},e_={};Un&&(e_=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Qs(n){if(Ud[n])return Ud[n];if(!$a[n])return n;var i=$a[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in e_)return Ud[n]=i[a];return n}var n_=Qs("animationend"),i_=Qs("animationiteration"),r_=Qs("animationstart"),dI=Qs("transitionrun"),mI=Qs("transitionstart"),gI=Qs("transitioncancel"),s_=Qs("transitionend"),a_=new Map,zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zd.push("scrollEnd");function ri(n,i){a_.set(n,i),Ei(i,[n])}var Xc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Bn=[],Ja=0,Bd=0;function $c(){for(var n=Ja,i=Bd=Ja=0;i<n;){var a=Bn[i];Bn[i++]=null;var l=Bn[i];Bn[i++]=null;var f=Bn[i];Bn[i++]=null;var d=Bn[i];if(Bn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&o_(a,f,d)}}function Jc(n,i,a,l){Bn[Ja++]=n,Bn[Ja++]=i,Bn[Ja++]=a,Bn[Ja++]=l,Bd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function jd(n,i,a,l){return Jc(n,i,a,l),Wc(n)}function Ys(n,i){return Jc(n,null,null,i),Wc(n)}function o_(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-ye(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Wc(n){if(50<lu)throw lu=0,$m=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Wa={};function pI(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(n,i,a,l){return new pI(n,i,a,l)}function qd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yi(n,i){var a=n.alternate;return a===null?(a=bn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function l_(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Zc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")qd(n)&&(_=1);else if(typeof n=="string")_=Tw(n,a,ut.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case D:return n=bn(31,a,i,f),n.elementType=D,n.lanes=d,n;case W:return Xs(a.children,f,d,i);case Z:_=8,f|=24;break;case st:return n=bn(12,a,i,f|2),n.elementType=st,n.lanes=d,n;case It:return n=bn(13,a,i,f),n.elementType=It,n.lanes=d,n;case Et:return n=bn(19,a,i,f),n.elementType=Et,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case nt:_=10;break t;case lt:_=9;break t;case _t:_=11;break t;case w:_=14;break t;case I:_=16,l=null;break t}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=bn(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Xs(n,i,a,l){return n=bn(7,n,l,i),n.lanes=a,n}function Fd(n,i,a){return n=bn(6,n,null,i),n.lanes=a,n}function u_(n){var i=bn(18,null,null,0);return i.stateNode=n,i}function Hd(n,i,a){return i=bn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var c_=new WeakMap;function jn(n,i){if(typeof n=="object"&&n!==null){var a=c_.get(n);return a!==void 0?a:(i={value:n,source:i,stack:yl(i)},c_.set(n,i),i)}return{value:n,source:i,stack:yl(i)}}var Za=[],to=0,th=null,jl=0,qn=[],Fn=0,kr=null,Di=1,xi="";function Xi(n,i){Za[to++]=jl,Za[to++]=th,th=n,jl=i}function h_(n,i,a){qn[Fn++]=Di,qn[Fn++]=xi,qn[Fn++]=kr,kr=n;var l=Di;n=xi;var f=32-ye(l)-1;l&=~(1<<f),a+=1;var d=32-ye(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Di=1<<32-ye(i)+f|a<<f|l,xi=d+n}else Di=1<<d|a<<f|l,xi=n}function Gd(n){n.return!==null&&(Xi(n,1),h_(n,1,0))}function Kd(n){for(;n===th;)th=Za[--to],Za[to]=null,jl=Za[--to],Za[to]=null;for(;n===kr;)kr=qn[--Fn],qn[Fn]=null,xi=qn[--Fn],qn[Fn]=null,Di=qn[--Fn],qn[Fn]=null}function f_(n,i){qn[Fn++]=Di,qn[Fn++]=xi,qn[Fn++]=kr,Di=i.id,xi=i.overflow,kr=n}var Xe=null,ae=null,Ut=!1,Lr=null,Hn=!1,Qd=Error(r(519));function Ur(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ql(jn(i,n)),Qd}function d_(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Re]=n,i[qe]=l,a){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(a=0;a<cu.length;a++)Ot(cu[a],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),Oc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),Dr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||xE(i.textContent,a)?(l.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),l.onScroll!=null&&Ot("scroll",i),l.onScrollEnd!=null&&Ot("scrollend",i),l.onClick!=null&&(i.onclick=Zn),i=!0):i=!1,i||Ur(n,!0)}function m_(n){for(Xe=n.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Xe=Xe.return}}function eo(n){if(n!==Xe)return!1;if(!Ut)return m_(n),Ut=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||hg(n.type,n.memoizedProps)),a=!a),a&&ae&&Ur(n),m_(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ae=zE(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ae=zE(n)}else i===27?(i=ae,Wr(n.type)?(n=pg,pg=null,ae=n):ae=i):ae=Xe?Kn(n.stateNode.nextSibling):null;return!0}function $s(){ae=Xe=null,Ut=!1}function Yd(){var n=Lr;return n!==null&&(yn===null?yn=n:yn.push.apply(yn,n),Lr=null),n}function ql(n){Lr===null?Lr=[n]:Lr.push(n)}var Xd=V(null),Js=null,$i=null;function zr(n,i,a){ot(Xd,i._currentValue),i._currentValue=a}function Ji(n){n._currentValue=Xd.current,J(Xd)}function $d(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Jd(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var A=d;d=f;for(var C=0;C<i.length;C++)if(A.context===i[C]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),$d(d.return,a,n),l||(_=null);break t}d=A.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),$d(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function no(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var A=f.type;Sn(f.pendingProps.value,_.value)||(n!==null?n.push(A):n=[A])}}else if(f===zt.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(gu):n=[gu])}f=f.return}n!==null&&Jd(i,n,a,l),i.flags|=262144}function eh(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ws(n){Js=n,$i=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function $e(n){return g_(Js,n)}function nh(n,i){return Js===null&&Ws(n),g_(n,i)}function g_(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},$i===null){if(n===null)throw Error(r(308));$i=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else $i=$i.next=i;return a}var yI=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},_I=s.unstable_scheduleCallback,vI=s.unstable_NormalPriority,xe={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new yI,data:new Map,refCount:0}}function Fl(n){n.refCount--,n.refCount===0&&_I(vI,function(){n.controller.abort()})}var Hl=null,Zd=0,io=0,ro=null;function EI(n,i){if(Hl===null){var a=Hl=[];Zd=0,io=ng(),ro={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zd++,i.then(p_,p_),i}function p_(){if(--Zd===0&&Hl!==null){ro!==null&&(ro.status="fulfilled");var n=Hl;Hl=null,io=0,ro=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function TI(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var y_=Y.S;Y.S=function(n,i){tE=ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&EI(n,i),y_!==null&&y_(n,i)};var Zs=V(null);function tm(){var n=Zs.current;return n!==null?n:re.pooledCache}function ih(n,i){i===null?ot(Zs,Zs.current):ot(Zs,i.pool)}function __(){var n=tm();return n===null?null:{parent:xe._currentValue,pool:n}}var so=Error(r(460)),em=Error(r(474)),rh=Error(r(542)),sh={then:function(){}};function v_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function E_(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Zn,Zn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,A_(n),n;default:if(typeof i.status=="string")i.then(Zn,Zn);else{if(n=re,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,A_(n),n}throw ea=i,so}}function ta(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ea=a,so):a}}var ea=null;function T_(){if(ea===null)throw Error(r(459));var n=ea;return ea=null,n}function A_(n){if(n===so||n===rh)throw Error(r(483))}var ao=null,Gl=0;function ah(n){var i=Gl;return Gl+=1,ao===null&&(ao=[]),E_(ao,n,i)}function Kl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function oh(n,i){throw i.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function S_(n){function i(P,x){if(n){var z=P.deletions;z===null?(P.deletions=[x],P.flags|=16):z.push(x)}}function a(P,x){if(!n)return null;for(;x!==null;)i(P,x),x=x.sibling;return null}function l(P){for(var x=new Map;P!==null;)P.key!==null?x.set(P.key,P):x.set(P.index,P),P=P.sibling;return x}function f(P,x){return P=Yi(P,x),P.index=0,P.sibling=null,P}function d(P,x,z){return P.index=z,n?(z=P.alternate,z!==null?(z=z.index,z<x?(P.flags|=67108866,x):z):(P.flags|=67108866,x)):(P.flags|=1048576,x)}function _(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function A(P,x,z,X){return x===null||x.tag!==6?(x=Fd(z,P.mode,X),x.return=P,x):(x=f(x,z),x.return=P,x)}function C(P,x,z,X){var gt=z.type;return gt===W?K(P,x,z.props.children,X,z.key):x!==null&&(x.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===I&&ta(gt)===x.type)?(x=f(x,z.props),Kl(x,z),x.return=P,x):(x=Zc(z.type,z.key,z.props,null,P.mode,X),Kl(x,z),x.return=P,x)}function B(P,x,z,X){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=Hd(z,P.mode,X),x.return=P,x):(x=f(x,z.children||[]),x.return=P,x)}function K(P,x,z,X,gt){return x===null||x.tag!==7?(x=Xs(z,P.mode,X,gt),x.return=P,x):(x=f(x,z),x.return=P,x)}function $(P,x,z){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=Fd(""+x,P.mode,z),x.return=P,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case M:return z=Zc(x.type,x.key,x.props,null,P.mode,z),Kl(z,x),z.return=P,z;case G:return x=Hd(x,P.mode,z),x.return=P,x;case I:return x=ta(x),$(P,x,z)}if(ke(x)||k(x))return x=Xs(x,P.mode,z,null),x.return=P,x;if(typeof x.then=="function")return $(P,ah(x),z);if(x.$$typeof===nt)return $(P,nh(P,x),z);oh(P,x)}return null}function q(P,x,z,X){var gt=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return gt!==null?null:A(P,x,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case M:return z.key===gt?C(P,x,z,X):null;case G:return z.key===gt?B(P,x,z,X):null;case I:return z=ta(z),q(P,x,z,X)}if(ke(z)||k(z))return gt!==null?null:K(P,x,z,X,null);if(typeof z.then=="function")return q(P,x,ah(z),X);if(z.$$typeof===nt)return q(P,x,nh(P,z),X);oh(P,z)}return null}function H(P,x,z,X,gt){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(z)||null,A(x,P,""+X,gt);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case M:return P=P.get(X.key===null?z:X.key)||null,C(x,P,X,gt);case G:return P=P.get(X.key===null?z:X.key)||null,B(x,P,X,gt);case I:return X=ta(X),H(P,x,z,X,gt)}if(ke(X)||k(X))return P=P.get(z)||null,K(x,P,X,gt,null);if(typeof X.then=="function")return H(P,x,z,ah(X),gt);if(X.$$typeof===nt)return H(P,x,z,nh(x,X),gt);oh(x,X)}return null}function ht(P,x,z,X){for(var gt=null,qt=null,dt=x,xt=x=0,Pt=null;dt!==null&&xt<z.length;xt++){dt.index>xt?(Pt=dt,dt=null):Pt=dt.sibling;var Ft=q(P,dt,z[xt],X);if(Ft===null){dt===null&&(dt=Pt);break}n&&dt&&Ft.alternate===null&&i(P,dt),x=d(Ft,x,xt),qt===null?gt=Ft:qt.sibling=Ft,qt=Ft,dt=Pt}if(xt===z.length)return a(P,dt),Ut&&Xi(P,xt),gt;if(dt===null){for(;xt<z.length;xt++)dt=$(P,z[xt],X),dt!==null&&(x=d(dt,x,xt),qt===null?gt=dt:qt.sibling=dt,qt=dt);return Ut&&Xi(P,xt),gt}for(dt=l(dt);xt<z.length;xt++)Pt=H(dt,P,xt,z[xt],X),Pt!==null&&(n&&Pt.alternate!==null&&dt.delete(Pt.key===null?xt:Pt.key),x=d(Pt,x,xt),qt===null?gt=Pt:qt.sibling=Pt,qt=Pt);return n&&dt.forEach(function(is){return i(P,is)}),Ut&&Xi(P,xt),gt}function vt(P,x,z,X){if(z==null)throw Error(r(151));for(var gt=null,qt=null,dt=x,xt=x=0,Pt=null,Ft=z.next();dt!==null&&!Ft.done;xt++,Ft=z.next()){dt.index>xt?(Pt=dt,dt=null):Pt=dt.sibling;var is=q(P,dt,Ft.value,X);if(is===null){dt===null&&(dt=Pt);break}n&&dt&&is.alternate===null&&i(P,dt),x=d(is,x,xt),qt===null?gt=is:qt.sibling=is,qt=is,dt=Pt}if(Ft.done)return a(P,dt),Ut&&Xi(P,xt),gt;if(dt===null){for(;!Ft.done;xt++,Ft=z.next())Ft=$(P,Ft.value,X),Ft!==null&&(x=d(Ft,x,xt),qt===null?gt=Ft:qt.sibling=Ft,qt=Ft);return Ut&&Xi(P,xt),gt}for(dt=l(dt);!Ft.done;xt++,Ft=z.next())Ft=H(dt,P,xt,Ft.value,X),Ft!==null&&(n&&Ft.alternate!==null&&dt.delete(Ft.key===null?xt:Ft.key),x=d(Ft,x,xt),qt===null?gt=Ft:qt.sibling=Ft,qt=Ft);return n&&dt.forEach(function(Vw){return i(P,Vw)}),Ut&&Xi(P,xt),gt}function ie(P,x,z,X){if(typeof z=="object"&&z!==null&&z.type===W&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case M:t:{for(var gt=z.key;x!==null;){if(x.key===gt){if(gt=z.type,gt===W){if(x.tag===7){a(P,x.sibling),X=f(x,z.props.children),X.return=P,P=X;break t}}else if(x.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===I&&ta(gt)===x.type){a(P,x.sibling),X=f(x,z.props),Kl(X,z),X.return=P,P=X;break t}a(P,x);break}else i(P,x);x=x.sibling}z.type===W?(X=Xs(z.props.children,P.mode,X,z.key),X.return=P,P=X):(X=Zc(z.type,z.key,z.props,null,P.mode,X),Kl(X,z),X.return=P,P=X)}return _(P);case G:t:{for(gt=z.key;x!==null;){if(x.key===gt)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){a(P,x.sibling),X=f(x,z.children||[]),X.return=P,P=X;break t}else{a(P,x);break}else i(P,x);x=x.sibling}X=Hd(z,P.mode,X),X.return=P,P=X}return _(P);case I:return z=ta(z),ie(P,x,z,X)}if(ke(z))return ht(P,x,z,X);if(k(z)){if(gt=k(z),typeof gt!="function")throw Error(r(150));return z=gt.call(z),vt(P,x,z,X)}if(typeof z.then=="function")return ie(P,x,ah(z),X);if(z.$$typeof===nt)return ie(P,x,nh(P,z),X);oh(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,x!==null&&x.tag===6?(a(P,x.sibling),X=f(x,z),X.return=P,P=X):(a(P,x),X=Fd(z,P.mode,X),X.return=P,P=X),_(P)):a(P,x)}return function(P,x,z,X){try{Gl=0;var gt=ie(P,x,z,X);return ao=null,gt}catch(dt){if(dt===so||dt===rh)throw dt;var qt=bn(29,dt,null,P.mode);return qt.lanes=X,qt.return=P,qt}}}var na=S_(!0),b_=S_(!1),Br=!1;function nm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function jr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function qr(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Gt&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Wc(n),o_(n,null,a),i}return Jc(n,l,i,a),Wc(n)}function Ql(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,El(n,a)}}function rm(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var sm=!1;function Yl(){if(sm){var n=ro;if(n!==null)throw n}}function Xl(n,i,a,l){sm=!1;var f=n.updateQueue;Br=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var C=A,B=C.next;C.next=null,_===null?d=B:_.next=B,_=C;var K=n.alternate;K!==null&&(K=K.updateQueue,A=K.lastBaseUpdate,A!==_&&(A===null?K.firstBaseUpdate=B:A.next=B,K.lastBaseUpdate=C))}if(d!==null){var $=f.baseState;_=0,K=B=C=null,A=d;do{var q=A.lane&-536870913,H=q!==A.lane;if(H?(Mt&q)===q:(l&q)===q){q!==0&&q===io&&(sm=!0),K!==null&&(K=K.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var ht=n,vt=A;q=i;var ie=a;switch(vt.tag){case 1:if(ht=vt.payload,typeof ht=="function"){$=ht.call(ie,$,q);break t}$=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=vt.payload,q=typeof ht=="function"?ht.call(ie,$,q):ht,q==null)break t;$=T({},$,q);break t;case 2:Br=!0}}q=A.callback,q!==null&&(n.flags|=64,H&&(n.flags|=8192),H=f.callbacks,H===null?f.callbacks=[q]:H.push(q))}else H={lane:q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},K===null?(B=K=H,C=$):K=K.next=H,_|=q;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;H=A,A=H.next,H.next=null,f.lastBaseUpdate=H,f.shared.pending=null}}while(!0);K===null&&(C=$),f.baseState=C,f.firstBaseUpdate=B,f.lastBaseUpdate=K,d===null&&(f.shared.lanes=0),Qr|=_,n.lanes=_,n.memoizedState=$}}function I_(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function w_(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)I_(a[n],i)}var oo=V(null),lh=V(0);function R_(n,i){n=ar,ot(lh,n),ot(oo,i),ar=n|i.baseLanes}function am(){ot(lh,ar),ot(oo,oo.current)}function om(){ar=lh.current,J(oo),J(lh)}var In=V(null),Gn=null;function Fr(n){var i=n.alternate;ot(ve,ve.current&1),ot(In,n),Gn===null&&(i===null||oo.current!==null||i.memoizedState!==null)&&(Gn=n)}function lm(n){ot(ve,ve.current),ot(In,n),Gn===null&&(Gn=n)}function C_(n){n.tag===22?(ot(ve,ve.current),ot(In,n),Gn===null&&(Gn=n)):Hr()}function Hr(){ot(ve,ve.current),ot(In,In.current)}function wn(n){J(In),Gn===n&&(Gn=null),J(ve)}var ve=V(0);function uh(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||mg(a)||gg(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Wi=0,Rt=null,ee=null,Ne=null,ch=!1,lo=!1,ia=!1,hh=0,$l=0,uo=null,AI=0;function me(){throw Error(r(321))}function um(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function cm(n,i,a,l,f,d){return Wi=d,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=n===null||n.memoizedState===null?hv:Im,ia=!1,d=a(l,f),ia=!1,lo&&(d=x_(i,a,l,f)),D_(n),d}function D_(n){Y.H=Zl;var i=ee!==null&&ee.next!==null;if(Wi=0,Ne=ee=Rt=null,ch=!1,$l=0,uo=null,i)throw Error(r(300));n===null||Ve||(n=n.dependencies,n!==null&&eh(n)&&(Ve=!0))}function x_(n,i,a,l){Rt=n;var f=0;do{if(lo&&(uo=null),$l=0,lo=!1,25<=f)throw Error(r(301));if(f+=1,Ne=ee=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=fv,d=i(a,l)}while(lo);return d}function SI(){var n=Y.H,i=n.useState()[0];return i=typeof i.then=="function"?Jl(i):i,n=n.useState()[0],(ee!==null?ee.memoizedState:null)!==n&&(Rt.flags|=1024),i}function hm(){var n=hh!==0;return hh=0,n}function fm(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function dm(n){if(ch){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ch=!1}Wi=0,Ne=ee=Rt=null,lo=!1,$l=hh=0,uo=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Rt.memoizedState=Ne=n:Ne=Ne.next=n,Ne}function Ee(){if(ee===null){var n=Rt.alternate;n=n!==null?n.memoizedState:null}else n=ee.next;var i=Ne===null?Rt.memoizedState:Ne.next;if(i!==null)Ne=i,ee=n;else{if(n===null)throw Rt.alternate===null?Error(r(467)):Error(r(310));ee=n,n={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},Ne===null?Rt.memoizedState=Ne=n:Ne=Ne.next=n}return Ne}function fh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(n){var i=$l;return $l+=1,uo===null&&(uo=[]),n=E_(uo,n,i),i=Rt,(Ne===null?i.memoizedState:Ne.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?hv:Im),n}function dh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Jl(n);if(n.$$typeof===nt)return $e(n)}throw Error(r(438,String(n)))}function mm(n){var i=null,a=Rt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Rt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=fh(),Rt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function Zi(n,i){return typeof i=="function"?i(n):i}function mh(n){var i=Ee();return gm(i,ee,n)}function gm(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var A=_=null,C=null,B=i,K=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Mt&$)===$:(Wi&$)===$){var q=B.revertLane;if(q===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===io&&(K=!0);else if((Wi&q)===q){B=B.next,q===io&&(K=!0);continue}else $={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(A=C=$,_=d):C=C.next=$,Rt.lanes|=q,Qr|=q;$=B.action,ia&&a(d,$),d=B.hasEagerState?B.eagerState:a(d,$)}else q={lane:$,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},C===null?(A=C=q,_=d):C=C.next=q,Rt.lanes|=$,Qr|=$;B=B.next}while(B!==null&&B!==i);if(C===null?_=d:C.next=A,!Sn(d,n.memoizedState)&&(Ve=!0,K&&(a=ro,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=C,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function pm(n){var i=Ee(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);Sn(d,i.memoizedState)||(Ve=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function N_(n,i,a){var l=Rt,f=Ee(),d=Ut;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Sn((ee||f).memoizedState,a);if(_&&(f.memoizedState=a,Ve=!0),f=f.queue,vm(M_.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||Ne!==null&&Ne.memoizedState.tag&1){if(l.flags|=2048,co(9,{destroy:void 0},O_.bind(null,l,f,a,i),null),re===null)throw Error(r(349));d||(Wi&127)!==0||V_(l,i,a)}return a}function V_(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Rt.updateQueue,i===null?(i=fh(),Rt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function O_(n,i,a,l){i.value=a,i.getSnapshot=l,P_(i)&&k_(n)}function M_(n,i,a){return a(function(){P_(i)&&k_(n)})}function P_(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function k_(n){var i=Ys(n,2);i!==null&&_n(i,n,2)}function ym(n){var i=cn();if(typeof n=="function"){var a=n;if(n=a(),ia){Pn(!0);try{a()}finally{Pn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},i}function L_(n,i,a,l){return n.baseState=a,gm(n,ee,typeof l=="function"?l:Zi)}function bI(n,i,a,l,f){if(yh(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,U_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function U_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=Y.T,_={};Y.T=_;try{var A=a(f,l),C=Y.S;C!==null&&C(_,A),z_(n,i,A)}catch(B){_m(n,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),Y.T=d}}else try{d=a(f,l),z_(n,i,d)}catch(B){_m(n,i,B)}}function z_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){B_(n,i,l)},function(l){return _m(n,i,l)}):B_(n,i,a)}function B_(n,i,a){i.status="fulfilled",i.value=a,j_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,U_(n,a)))}function _m(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,j_(i),i=i.next;while(i!==l)}n.action=null}function j_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function q_(n,i){return i}function F_(n,i){if(Ut){var a=re.formState;if(a!==null){t:{var l=Rt;if(Ut){if(ae){e:{for(var f=ae,d=Hn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Kn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ae=Kn(f.nextSibling),l=f.data==="F!";break t}}Ur(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:i},a.queue=l,a=lv.bind(null,Rt,l),l.dispatch=a,l=ym(!1),d=bm.bind(null,Rt,!1,l.queue),l=cn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=bI.bind(null,Rt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function H_(n){var i=Ee();return G_(i,ee,n)}function G_(n,i,a){if(i=gm(n,i,q_)[0],n=mh(Zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Jl(i)}catch(_){throw _===so?rh:_}else l=i;i=Ee();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Rt.flags|=2048,co(9,{destroy:void 0},II.bind(null,f,a),null)),[l,d,n]}function II(n,i){n.action=i}function K_(n){var i=Ee(),a=ee;if(a!==null)return G_(i,a,n);Ee(),i=i.memoizedState,a=Ee();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function co(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=fh(),Rt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function Q_(){return Ee().memoizedState}function gh(n,i,a,l){var f=cn();Rt.flags|=n,f.memoizedState=co(1|i,{destroy:void 0},a,l===void 0?null:l)}function ph(n,i,a,l){var f=Ee();l=l===void 0?null:l;var d=f.memoizedState.inst;ee!==null&&l!==null&&um(l,ee.memoizedState.deps)?f.memoizedState=co(i,d,a,l):(Rt.flags|=n,f.memoizedState=co(1|i,d,a,l))}function Y_(n,i){gh(8390656,8,n,i)}function vm(n,i){ph(2048,8,n,i)}function wI(n){Rt.flags|=4;var i=Rt.updateQueue;if(i===null)i=fh(),Rt.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function X_(n){var i=Ee().memoizedState;return wI({ref:i,nextImpl:n}),function(){if((Gt&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function $_(n,i){return ph(4,2,n,i)}function J_(n,i){return ph(4,4,n,i)}function W_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Z_(n,i,a){a=a!=null?a.concat([n]):null,ph(4,4,W_.bind(null,i,n),a)}function Em(){}function tv(n,i){var a=Ee();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&um(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function ev(n,i){var a=Ee();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&um(i,l[1]))return l[0];if(l=n(),ia){Pn(!0);try{n()}finally{Pn(!1)}}return a.memoizedState=[l,i],l}function Tm(n,i,a){return a===void 0||(Wi&1073741824)!==0&&(Mt&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=nE(),Rt.lanes|=n,Qr|=n,a)}function nv(n,i,a,l){return Sn(a,i)?a:oo.current!==null?(n=Tm(n,a,l),Sn(n,i)||(Ve=!0),n):(Wi&42)===0||(Wi&1073741824)!==0&&(Mt&261930)===0?(Ve=!0,n.memoizedState=a):(n=nE(),Rt.lanes|=n,Qr|=n,i)}function iv(n,i,a,l,f){var d=at.p;at.p=d!==0&&8>d?d:8;var _=Y.T,A={};Y.T=A,bm(n,!1,i,a);try{var C=f(),B=Y.S;if(B!==null&&B(A,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var K=TI(C,l);Wl(n,i,K,Dn(n))}else Wl(n,i,l,Dn(n))}catch($){Wl(n,i,{then:function(){},status:"rejected",reason:$},Dn())}finally{at.p=d,_!==null&&A.types!==null&&(_.types=A.types),Y.T=_}}function RI(){}function Am(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=rv(n).queue;iv(n,f,i,yt,a===null?RI:function(){return sv(n),a(l)})}function rv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:yt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function sv(n){var i=rv(n);i.next===null&&(i=n.alternate.memoizedState),Wl(n,i.next.queue,{},Dn())}function Sm(){return $e(gu)}function av(){return Ee().memoizedState}function ov(){return Ee().memoizedState}function CI(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Dn();n=jr(a);var l=qr(i,n,a);l!==null&&(_n(l,i,a),Ql(l,i,a)),i={cache:Wd()},n.payload=i;return}i=i.return}}function DI(n,i,a){var l=Dn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},yh(n)?uv(i,a):(a=jd(n,i,a,l),a!==null&&(_n(a,n,l),cv(a,i,l)))}function lv(n,i,a){var l=Dn();Wl(n,i,a,l)}function Wl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(yh(n))uv(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,A=d(_,a);if(f.hasEagerState=!0,f.eagerState=A,Sn(A,_))return Jc(n,i,f,0),re===null&&$c(),!1}catch{}if(a=jd(n,i,f,l),a!==null)return _n(a,n,l),cv(a,i,l),!0}return!1}function bm(n,i,a,l){if(l={lane:2,revertLane:ng(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yh(n)){if(i)throw Error(r(479))}else i=jd(n,a,l,2),i!==null&&_n(i,n,2)}function yh(n){var i=n.alternate;return n===Rt||i!==null&&i===Rt}function uv(n,i){lo=ch=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function cv(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,El(n,a)}}var Zl={readContext:$e,use:dh,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useLayoutEffect:me,useInsertionEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useSyncExternalStore:me,useId:me,useHostTransitionStatus:me,useFormState:me,useActionState:me,useOptimistic:me,useMemoCache:me,useCacheRefresh:me};Zl.useEffectEvent=me;var hv={readContext:$e,use:dh,useCallback:function(n,i){return cn().memoizedState=[n,i===void 0?null:i],n},useContext:$e,useEffect:Y_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,gh(4194308,4,W_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return gh(4194308,4,n,i)},useInsertionEffect:function(n,i){gh(4,2,n,i)},useMemo:function(n,i){var a=cn();i=i===void 0?null:i;var l=n();if(ia){Pn(!0);try{n()}finally{Pn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=cn();if(a!==void 0){var f=a(i);if(ia){Pn(!0);try{a(i)}finally{Pn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=DI.bind(null,Rt,n),[l.memoizedState,n]},useRef:function(n){var i=cn();return n={current:n},i.memoizedState=n},useState:function(n){n=ym(n);var i=n.queue,a=lv.bind(null,Rt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Em,useDeferredValue:function(n,i){var a=cn();return Tm(a,n,i)},useTransition:function(){var n=ym(!1);return n=iv.bind(null,Rt,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Rt,f=cn();if(Ut){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),re===null)throw Error(r(349));(Mt&127)!==0||V_(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,Y_(M_.bind(null,l,d,n),[n]),l.flags|=2048,co(9,{destroy:void 0},O_.bind(null,l,d,a,i),null),a},useId:function(){var n=cn(),i=re.identifierPrefix;if(Ut){var a=xi,l=Di;a=(l&~(1<<32-ye(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=hh++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=AI++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Sm,useFormState:F_,useActionState:F_,useOptimistic:function(n){var i=cn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=bm.bind(null,Rt,!0,a),a.dispatch=i,[n,i]},useMemoCache:mm,useCacheRefresh:function(){return cn().memoizedState=CI.bind(null,Rt)},useEffectEvent:function(n){var i=cn(),a={impl:n};return i.memoizedState=a,function(){if((Gt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Im={readContext:$e,use:dh,useCallback:tv,useContext:$e,useEffect:vm,useImperativeHandle:Z_,useInsertionEffect:$_,useLayoutEffect:J_,useMemo:ev,useReducer:mh,useRef:Q_,useState:function(){return mh(Zi)},useDebugValue:Em,useDeferredValue:function(n,i){var a=Ee();return nv(a,ee.memoizedState,n,i)},useTransition:function(){var n=mh(Zi)[0],i=Ee().memoizedState;return[typeof n=="boolean"?n:Jl(n),i]},useSyncExternalStore:N_,useId:av,useHostTransitionStatus:Sm,useFormState:H_,useActionState:H_,useOptimistic:function(n,i){var a=Ee();return L_(a,ee,n,i)},useMemoCache:mm,useCacheRefresh:ov};Im.useEffectEvent=X_;var fv={readContext:$e,use:dh,useCallback:tv,useContext:$e,useEffect:vm,useImperativeHandle:Z_,useInsertionEffect:$_,useLayoutEffect:J_,useMemo:ev,useReducer:pm,useRef:Q_,useState:function(){return pm(Zi)},useDebugValue:Em,useDeferredValue:function(n,i){var a=Ee();return ee===null?Tm(a,n,i):nv(a,ee.memoizedState,n,i)},useTransition:function(){var n=pm(Zi)[0],i=Ee().memoizedState;return[typeof n=="boolean"?n:Jl(n),i]},useSyncExternalStore:N_,useId:av,useHostTransitionStatus:Sm,useFormState:K_,useActionState:K_,useOptimistic:function(n,i){var a=Ee();return ee!==null?L_(a,ee,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:mm,useCacheRefresh:ov};fv.useEffectEvent=X_;function wm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Rm={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Dn(),f=jr(l);f.payload=i,a!=null&&(f.callback=a),i=qr(n,f,l),i!==null&&(_n(i,n,l),Ql(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Dn(),f=jr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=qr(n,f,l),i!==null&&(_n(i,n,l),Ql(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Dn(),l=jr(a);l.tag=2,i!=null&&(l.callback=i),i=qr(n,l,a),i!==null&&(_n(i,n,a),Ql(i,n,a))}};function dv(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!zl(a,l)||!zl(f,d):!0}function mv(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Rm.enqueueReplaceState(i,i.state,null)}function ra(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=T({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function gv(n){Xc(n)}function pv(n){console.error(n)}function yv(n){Xc(n)}function _h(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function _v(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Cm(n,i,a){return a=jr(a),a.tag=3,a.payload={element:null},a.callback=function(){_h(n,i)},a}function vv(n){return n=jr(n),n.tag=3,n}function Ev(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){_v(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){_v(i,a,l),typeof f!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function xI(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&no(i,a,f,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Gn===null?xh():a.alternate===null&&ge===0&&(ge=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===sh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Zm(n,l,f)),!1;case 22:return a.flags|=65536,l===sh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Zm(n,l,f)),!1}throw Error(r(435,a.tag))}return Zm(n,l,f),xh(),!1}if(Ut)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Qd&&(n=Error(r(422),{cause:l}),ql(jn(n,a)))):(l!==Qd&&(i=Error(r(423),{cause:l}),ql(jn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=jn(l,a),f=Cm(n.stateNode,l,f),rm(n,f),ge!==4&&(ge=2)),!1;var d=Error(r(520),{cause:l});if(d=jn(d,a),ou===null?ou=[d]:ou.push(d),ge!==4&&(ge=2),i===null)return!0;l=jn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Cm(a.stateNode,l,n),rm(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Yr===null||!Yr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=vv(f),Ev(f,n,a,l),rm(a,f),!1}a=a.return}while(a!==null);return!1}var Dm=Error(r(461)),Ve=!1;function Je(n,i,a,l){i.child=n===null?b_(i,null,a,l):na(i,n.child,a,l)}function Tv(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var A in l)A!=="ref"&&(_[A]=l[A])}else _=l;return Ws(i),l=cm(n,i,a,_,d,f),A=hm(),n!==null&&!Ve?(fm(n,i,f),tr(n,i,f)):(Ut&&A&&Gd(i),i.flags|=1,Je(n,i,l,f),i.child)}function Av(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!qd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Sv(n,i,d,l,f)):(n=Zc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!Lm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:zl,a(_,l)&&n.ref===i.ref)return tr(n,i,f)}return i.flags|=1,n=Yi(d,l),n.ref=i.ref,n.return=i,i.child=n}function Sv(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(zl(d,l)&&n.ref===i.ref)if(Ve=!1,i.pendingProps=l=d,Lm(n,f))(n.flags&131072)!==0&&(Ve=!0);else return i.lanes=n.lanes,tr(n,i,f)}return xm(n,i,a,l,f)}function bv(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return Iv(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ih(i,d!==null?d.cachePool:null),d!==null?R_(i,d):am(),C_(i);else return l=i.lanes=536870912,Iv(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(ih(i,d.cachePool),R_(i,d),Hr(),i.memoizedState=null):(n!==null&&ih(i,null),am(),Hr());return Je(n,i,f,a),i.child}function tu(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Iv(n,i,a,l,f){var d=tm();return d=d===null?null:{parent:xe._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&ih(i,null),am(),C_(i),n!==null&&no(n,i,l,!0),i.childLanes=f,null}function vh(n,i){return i=Th({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function wv(n,i,a){return na(i,n.child,null,a),n=vh(i,i.pendingProps),n.flags|=2,wn(i),i.memoizedState=null,n}function NI(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ut){if(l.mode==="hidden")return n=vh(i,l),i.lanes=536870912,tu(null,n);if(lm(i),(n=ae)?(n=UE(n,Hn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:kr!==null?{id:Di,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=u_(n),a.return=i,i.child=a,Xe=i,ae=null)):n=null,n===null)throw Ur(i);return i.lanes=536870912,null}return vh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(lm(i),f)if(i.flags&256)i.flags&=-257,i=wv(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ve||no(n,i,a,!1),f=(a&n.childLanes)!==0,Ve||f){if(l=re,l!==null&&(_=Tl(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ys(n,_),_n(l,n,_),Dm;xh(),i=wv(n,i,a)}else n=d.treeContext,ae=Kn(_.nextSibling),Xe=i,Ut=!0,Lr=null,Hn=!1,n!==null&&f_(i,n),i=vh(i,l),i.flags|=4096;return i}return n=Yi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Eh(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function xm(n,i,a,l,f){return Ws(i),a=cm(n,i,a,l,void 0,f),l=hm(),n!==null&&!Ve?(fm(n,i,f),tr(n,i,f)):(Ut&&l&&Gd(i),i.flags|=1,Je(n,i,a,f),i.child)}function Rv(n,i,a,l,f,d){return Ws(i),i.updateQueue=null,a=x_(i,l,a,f),D_(n),l=hm(),n!==null&&!Ve?(fm(n,i,d),tr(n,i,d)):(Ut&&l&&Gd(i),i.flags|=1,Je(n,i,a,d),i.child)}function Cv(n,i,a,l,f){if(Ws(i),i.stateNode===null){var d=Wa,_=a.contextType;typeof _=="object"&&_!==null&&(d=$e(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rm,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},nm(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?$e(_):Wa,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(wm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Rm.enqueueReplaceState(d,d.state,null),Xl(i,l,d,f),Yl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var A=i.memoizedProps,C=ra(a,A);d.props=C;var B=d.context,K=a.contextType;_=Wa,typeof K=="object"&&K!==null&&(_=$e(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||B!==_)&&mv(i,d,l,_),Br=!1;var q=i.memoizedState;d.state=q,Xl(i,l,d,f),Yl(),B=i.memoizedState,A||q!==B||Br?(typeof $=="function"&&(wm(i,a,$,l),B=i.memoizedState),(C=Br||dv(i,a,C,l,q,B,_))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,im(n,i),_=i.memoizedProps,K=ra(a,_),d.props=K,$=i.pendingProps,q=d.context,B=a.contextType,C=Wa,typeof B=="object"&&B!==null&&(C=$e(B)),A=a.getDerivedStateFromProps,(B=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||q!==C)&&mv(i,d,l,C),Br=!1,q=i.memoizedState,d.state=q,Xl(i,l,d,f),Yl();var H=i.memoizedState;_!==$||q!==H||Br||n!==null&&n.dependencies!==null&&eh(n.dependencies)?(typeof A=="function"&&(wm(i,a,A,l),H=i.memoizedState),(K=Br||dv(i,a,K,l,q,H,C)||n!==null&&n.dependencies!==null&&eh(n.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=C,l=K):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,Eh(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=na(i,n.child,null,f),i.child=na(i,null,a,f)):Je(n,i,a,f),i.memoizedState=d.state,n=i.child):n=tr(n,i,f),n}function Dv(n,i,a,l){return $s(),i.flags|=256,Je(n,i,a,l),i.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vm(n){return{baseLanes:n,cachePool:__()}}function Om(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Cn),n}function xv(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(ve.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ut){if(f?Fr(i):Hr(),(n=ae)?(n=UE(n,Hn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:kr!==null?{id:Di,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},a=u_(n),a.return=i,i.child=a,Xe=i,ae=null)):n=null,n===null)throw Ur(i);return gg(n)?i.lanes=32:i.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Hr(),f=i.mode,A=Th({mode:"hidden",children:A},f),l=Xs(l,f,a,null),A.return=i,l.return=i,A.sibling=l,i.child=A,l=i.child,l.memoizedState=Vm(a),l.childLanes=Om(n,_,a),i.memoizedState=Nm,tu(null,l)):(Fr(i),Mm(i,A))}var C=n.memoizedState;if(C!==null&&(A=C.dehydrated,A!==null)){if(d)i.flags&256?(Fr(i),i.flags&=-257,i=Pm(n,i,a)):i.memoizedState!==null?(Hr(),i.child=n.child,i.flags|=128,i=null):(Hr(),A=l.fallback,f=i.mode,l=Th({mode:"visible",children:l.children},f),A=Xs(A,f,a,null),A.flags|=2,l.return=i,A.return=i,l.sibling=A,i.child=l,na(i,n.child,null,a),l=i.child,l.memoizedState=Vm(a),l.childLanes=Om(n,_,a),i.memoizedState=Nm,i=tu(null,l));else if(Fr(i),gg(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,ql({value:l,source:null,stack:null}),i=Pm(n,i,a)}else if(Ve||no(n,i,a,!1),_=(a&n.childLanes)!==0,Ve||_){if(_=re,_!==null&&(l=Tl(_,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,Ys(n,l),_n(_,n,l),Dm;mg(A)||xh(),i=Pm(n,i,a)}else mg(A)?(i.flags|=192,i.child=n.child,i=null):(n=C.treeContext,ae=Kn(A.nextSibling),Xe=i,Ut=!0,Lr=null,Hn=!1,n!==null&&f_(i,n),i=Mm(i,l.children),i.flags|=4096);return i}return f?(Hr(),A=l.fallback,f=i.mode,C=n.child,B=C.sibling,l=Yi(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,B!==null?A=Yi(B,A):(A=Xs(A,f,a,null),A.flags|=2),A.return=i,l.return=i,l.sibling=A,i.child=l,tu(null,l),l=i.child,A=n.child.memoizedState,A===null?A=Vm(a):(f=A.cachePool,f!==null?(C=xe._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=__(),A={baseLanes:A.baseLanes|a,cachePool:f}),l.memoizedState=A,l.childLanes=Om(n,_,a),i.memoizedState=Nm,tu(n.child,l)):(Fr(i),a=n.child,n=a.sibling,a=Yi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function Mm(n,i){return i=Th({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Th(n,i){return n=bn(22,n,null,i),n.lanes=0,n}function Pm(n,i,a){return na(i,n.child,null,a),n=Mm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Nv(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),$d(n.return,i,a)}function km(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Vv(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=ve.current,A=(_&2)!==0;if(A?(_=_&1|2,i.flags|=128):_&=1,ot(ve,_),Je(n,i,l,a),l=Ut?jl:0,!A&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Nv(n,a,i);else if(n.tag===19)Nv(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&uh(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),km(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&uh(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}km(i,!0,a,null,d,l);break;case"together":km(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function tr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Qr|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(no(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Yi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Yi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Lm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&eh(n)))}function VI(n,i,a){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),zr(i,xe,n.memoizedState.cache),$s();break;case 27:case 5:xs(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:zr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,lm(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Fr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?xv(n,i,a):(Fr(i),n=tr(n,i,a),n!==null?n.sibling:null);Fr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(no(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Vv(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(ve,ve.current),l)break;return null;case 22:return i.lanes=0,bv(n,i,a,i.pendingProps);case 24:zr(i,xe,n.memoizedState.cache)}return tr(n,i,a)}function Ov(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ve=!0;else{if(!Lm(n,a)&&(i.flags&128)===0)return Ve=!1,VI(n,i,a);Ve=(n.flags&131072)!==0}else Ve=!1,Ut&&(i.flags&1048576)!==0&&h_(i,jl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(n=ta(i.elementType),i.type=n,typeof n=="function")qd(n)?(l=ra(n,l),i.tag=1,i=Cv(null,i,n,l,a)):(i.tag=0,i=xm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===_t){i.tag=11,i=Tv(null,i,n,l,a);break t}else if(f===w){i.tag=14,i=Av(null,i,n,l,a);break t}}throw i=le(n)||n,Error(r(306,i,""))}}return i;case 0:return xm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=ra(l,i.pendingProps),Cv(n,i,l,f,a);case 3:t:{if(Le(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,im(n,i),Xl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,zr(i,xe,l),l!==d.cache&&Jd(i,[xe],a,!0),Yl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Dv(n,i,l,a);break t}else if(l!==f){f=jn(Error(r(424)),i),ql(f),i=Dv(n,i,l,a);break t}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ae=Kn(n.firstChild),Xe=i,Ut=!0,Lr=null,Hn=!0,a=b_(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if($s(),l===f){i=tr(n,i,a);break t}Je(n,i,l,a)}i=i.child}return i;case 26:return Eh(n,i),n===null?(a=HE(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ut||(a=i.type,n=i.pendingProps,l=Lh(Dt.current).createElement(a),l[Re]=i,l[qe]=n,We(l,a,n),Ce(l),i.stateNode=l):i.memoizedState=HE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return xs(i),n===null&&Ut&&(l=i.stateNode=jE(i.type,i.pendingProps,Dt.current),Xe=i,Hn=!0,f=ae,Wr(i.type)?(pg=f,ae=Kn(l.firstChild)):ae=f),Je(n,i,i.pendingProps.children,a),Eh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ut&&((f=l=ae)&&(l=lw(l,i.type,i.pendingProps,Hn),l!==null?(i.stateNode=l,Xe=i,ae=Kn(l.firstChild),Hn=!1,f=!0):f=!1),f||Ur(i)),xs(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,hg(f,d)?l=null:_!==null&&hg(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=cm(n,i,SI,null,null,a),gu._currentValue=f),Eh(n,i),Je(n,i,l,a),i.child;case 6:return n===null&&Ut&&((n=a=ae)&&(a=uw(a,i.pendingProps,Hn),a!==null?(i.stateNode=a,Xe=i,ae=null,n=!0):n=!1),n||Ur(i)),null;case 13:return xv(n,i,a);case 4:return Le(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=na(i,null,l,a):Je(n,i,l,a),i.child;case 11:return Tv(n,i,i.type,i.pendingProps,a);case 7:return Je(n,i,i.pendingProps,a),i.child;case 8:return Je(n,i,i.pendingProps.children,a),i.child;case 12:return Je(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,zr(i,i.type,l.value),Je(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Ws(i),f=$e(f),l=l(f),i.flags|=1,Je(n,i,l,a),i.child;case 14:return Av(n,i,i.type,i.pendingProps,a);case 15:return Sv(n,i,i.type,i.pendingProps,a);case 19:return Vv(n,i,a);case 31:return NI(n,i,a);case 22:return bv(n,i,a,i.pendingProps);case 24:return Ws(i),l=$e(xe),n===null?(f=tm(),f===null&&(f=re,d=Wd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},nm(i),zr(i,xe,f)):((n.lanes&a)!==0&&(im(n,i),Xl(i,null,null,a),Yl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),zr(i,xe,l)):(l=d.cache,zr(i,xe,l),l!==f.cache&&Jd(i,[xe],a,!0))),Je(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function er(n){n.flags|=4}function Um(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(aE())n.flags|=8192;else throw ea=sh,em}else n.flags&=-16777217}function Mv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!XE(i))if(aE())n.flags|=8192;else throw ea=sh,em}function Ah(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Cc():536870912,n.lanes|=i,go|=i)}function eu(n,i){if(!Ut)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function oe(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function OI(n,i,a){var l=i.pendingProps;switch(Kd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(i),null;case 1:return oe(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(xe),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(eo(i)?er(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yd())),oe(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(er(i),d!==null?(oe(i),Mv(i,d)):(oe(i),Um(i,f,null,l,a))):d?d!==n.memoizedState?(er(i),oe(i),Mv(i,d)):(oe(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&er(i),oe(i),Um(i,f,n,l,a)),null;case 27:if(Oa(i),a=Dt.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}n=ut.current,eo(i)?d_(i):(n=jE(f,l,a),i.stateNode=n,er(i))}return oe(i),null;case 5:if(Oa(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return oe(i),null}if(d=ut.current,eo(i))d_(i);else{var _=Lh(Dt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Re]=i,d[qe]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(We(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&er(i)}}return oe(i),Um(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&er(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Dt.current,eo(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Xe,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Re]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||xE(n.nodeValue,a)),n||Ur(i,!0)}else n=Lh(n).createTextNode(l),n[Re]=i,i.stateNode=n}return oe(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=eo(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Re]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),n=!1}else a=Yd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(wn(i),i):(wn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return oe(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=eo(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Re]=i}else $s(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;oe(i),f=!1}else f=Yd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(wn(i),i):(wn(i),null)}return wn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),Ah(i,i.updateQueue),oe(i),null);case 4:return ue(),n===null&&ag(i.stateNode.containerInfo),oe(i),null;case 10:return Ji(i.type),oe(i),null;case 19:if(J(ve),l=i.memoizedState,l===null)return oe(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)eu(l,!1);else{if(ge!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=uh(n),d!==null){for(i.flags|=128,eu(l,!1),n=d.updateQueue,i.updateQueue=n,Ah(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)l_(a,n),a=a.sibling;return ot(ve,ve.current&1|2),Ut&&Xi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&ln()>Rh&&(i.flags|=128,f=!0,eu(l,!1),i.lanes=4194304)}else{if(!f)if(n=uh(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,Ah(i,n),eu(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ut)return oe(i),null}else 2*ln()-l.renderingStartTime>Rh&&a!==536870912&&(i.flags|=128,f=!0,eu(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=ln(),n.sibling=null,a=ve.current,ot(ve,f?a&1|2:a&1),Ut&&Xi(i,l.treeForkCount),n):(oe(i),null);case 22:case 23:return wn(i),om(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(oe(i),i.subtreeFlags&6&&(i.flags|=8192)):oe(i),a=i.updateQueue,a!==null&&Ah(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&J(Zs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(xe),oe(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function MI(n,i){switch(Kd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Ji(xe),ue(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Oa(i),null;case 31:if(i.memoizedState!==null){if(wn(i),i.alternate===null)throw Error(r(340));$s()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(wn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));$s()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return J(ve),null;case 4:return ue(),null;case 10:return Ji(i.type),null;case 22:case 23:return wn(i),om(),n!==null&&J(Zs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Ji(xe),null;case 25:return null;default:return null}}function Pv(n,i){switch(Kd(i),i.tag){case 3:Ji(xe),ue();break;case 26:case 27:case 5:Oa(i);break;case 4:ue();break;case 31:i.memoizedState!==null&&wn(i);break;case 13:wn(i);break;case 19:J(ve);break;case 10:Ji(i.type);break;case 22:case 23:wn(i),om(),n!==null&&J(Zs);break;case 24:Ji(xe)}}function nu(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(A){$t(i,i.return,A)}}function Gr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,f=i;var C=a,B=A;try{B()}catch(K){$t(f,C,K)}}}l=l.next}while(l!==d)}}catch(K){$t(i,i.return,K)}}function kv(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{w_(i,a)}catch(l){$t(n,n.return,l)}}}function Lv(n,i,a){a.props=ra(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){$t(n,i,l)}}function iu(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){$t(n,i,f)}}function Ni(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){$t(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){$t(n,i,f)}else a.current=null}function Uv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){$t(n,n.return,f)}}function zm(n,i,a){try{var l=n.stateNode;nw(l,n.type,a,i),l[qe]=i}catch(f){$t(n,n.return,f)}}function zv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wr(n.type)||n.tag===4}function Bm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||zv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function jm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Zn));else if(l!==4&&(l===27&&Wr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(jm(n,i,a),n=n.sibling;n!==null;)jm(n,i,a),n=n.sibling}function Sh(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Wr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Sh(n,i,a),n=n.sibling;n!==null;)Sh(n,i,a),n=n.sibling}function Bv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);We(i,l,a),i[Re]=n,i[qe]=a}catch(d){$t(n,n.return,d)}}var nr=!1,Oe=!1,qm=!1,jv=typeof WeakSet=="function"?WeakSet:Set,He=null;function PI(n,i){if(n=n.containerInfo,ug=Hh,n=Zy(n),Pd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,A=-1,C=-1,B=0,K=0,$=n,q=null;e:for(;;){for(var H;$!==a||f!==0&&$.nodeType!==3||(A=_+f),$!==d||l!==0&&$.nodeType!==3||(C=_+l),$.nodeType===3&&(_+=$.nodeValue.length),(H=$.firstChild)!==null;)q=$,$=H;for(;;){if($===n)break e;if(q===a&&++B===f&&(A=_),q===d&&++K===l&&(C=_),(H=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=H}a=A===-1||C===-1?null:{start:A,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(cg={focusedElem:n,selectionRange:a},Hh=!1,He=i;He!==null;)if(i=He,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,He=n;else for(;He!==null;){switch(i=He,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ht=ra(a.type,f);n=l.getSnapshotBeforeUpdate(ht,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(vt){$t(a,a.return,vt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)dg(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,He=n;break}He=i.return}}function qv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:rr(n,a),l&4&&nu(5,a);break;case 1:if(rr(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){$t(a,a.return,_)}else{var f=ra(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){$t(a,a.return,_)}}l&64&&kv(a),l&512&&iu(a,a.return);break;case 3:if(rr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{w_(n,i)}catch(_){$t(a,a.return,_)}}break;case 27:i===null&&l&4&&Bv(a);case 26:case 5:rr(n,a),i===null&&l&4&&Uv(a),l&512&&iu(a,a.return);break;case 12:rr(n,a);break;case 31:rr(n,a),l&4&&Gv(n,a);break;case 13:rr(n,a),l&4&&Kv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=HI.bind(null,a),cw(n,a))));break;case 22:if(l=a.memoizedState!==null||nr,!l){i=i!==null&&i.memoizedState!==null||Oe,f=nr;var d=Oe;nr=l,(Oe=i)&&!d?sr(n,a,(a.subtreeFlags&8772)!==0):rr(n,a),nr=f,Oe=d}break;case 30:break;default:rr(n,a)}}function Fv(n){var i=n.alternate;i!==null&&(n.alternate=null,Fv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ua(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var he=null,mn=!1;function ir(n,i,a){for(a=a.child;a!==null;)Hv(n,i,a),a=a.sibling}function Hv(n,i,a){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(Xn,a)}catch{}switch(a.tag){case 26:Oe||Ni(a,i),ir(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Oe||Ni(a,i);var l=he,f=mn;Wr(a.type)&&(he=a.stateNode,mn=!1),ir(n,i,a),fu(a.stateNode),he=l,mn=f;break;case 5:Oe||Ni(a,i);case 6:if(l=he,f=mn,he=null,ir(n,i,a),he=l,mn=f,he!==null)if(mn)try{(he.nodeType===9?he.body:he.nodeName==="HTML"?he.ownerDocument.body:he).removeChild(a.stateNode)}catch(d){$t(a,i,d)}else try{he.removeChild(a.stateNode)}catch(d){$t(a,i,d)}break;case 18:he!==null&&(mn?(n=he,kE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),So(n)):kE(he,a.stateNode));break;case 4:l=he,f=mn,he=a.stateNode.containerInfo,mn=!0,ir(n,i,a),he=l,mn=f;break;case 0:case 11:case 14:case 15:Gr(2,a,i),Oe||Gr(4,a,i),ir(n,i,a);break;case 1:Oe||(Ni(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Lv(a,i,l)),ir(n,i,a);break;case 21:ir(n,i,a);break;case 22:Oe=(l=Oe)||a.memoizedState!==null,ir(n,i,a),Oe=l;break;default:ir(n,i,a)}}function Gv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{So(n)}catch(a){$t(i,i.return,a)}}}function Kv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{So(n)}catch(a){$t(i,i.return,a)}}function kI(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new jv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new jv),i;default:throw Error(r(435,n.tag))}}function bh(n,i){var a=kI(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=GI.bind(null,n,l);l.then(f,f)}})}function gn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,A=_;t:for(;A!==null;){switch(A.tag){case 27:if(Wr(A.type)){he=A.stateNode,mn=!1;break t}break;case 5:he=A.stateNode,mn=!1;break t;case 3:case 4:he=A.stateNode.containerInfo,mn=!0;break t}A=A.return}if(he===null)throw Error(r(160));Hv(d,_,f),he=null,mn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Qv(i,n),i=i.sibling}var si=null;function Qv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(i,n),pn(n),l&4&&(Gr(3,n,n.return),nu(3,n),Gr(5,n,n.return));break;case 1:gn(i,n),pn(n),l&512&&(Oe||a===null||Ni(a,a.return)),l&64&&nr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=si;if(gn(i,n),pn(n),l&512&&(Oe||a===null||Ni(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[yi]||d[Re]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),We(d,l,a),d[Re]=n,Ce(d),l=d;break t;case"link":var _=QE("link","href",f).get(l+(a.href||""));if(_){for(var A=0;A<_.length;A++)if(d=_[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(A,1);break e}}d=f.createElement(l),We(d,l,a),f.head.appendChild(d);break;case"meta":if(_=QE("meta","content",f).get(l+(a.content||""))){for(A=0;A<_.length;A++)if(d=_[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(A,1);break e}}d=f.createElement(l),We(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Re]=n,Ce(d),l=d}n.stateNode=l}else YE(f,n.type,n.stateNode);else n.stateNode=KE(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?YE(f,n.type,n.stateNode):KE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&zm(n,n.memoizedProps,a.memoizedProps)}break;case 27:gn(i,n),pn(n),l&512&&(Oe||a===null||Ni(a,a.return)),a!==null&&l&4&&zm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(gn(i,n),pn(n),l&512&&(Oe||a===null||Ni(a,a.return)),n.flags&32){f=n.stateNode;try{dn(f,"")}catch(ht){$t(n,n.return,ht)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,zm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(qm=!0);break;case 6:if(gn(i,n),pn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(ht){$t(n,n.return,ht)}}break;case 3:if(Bh=null,f=si,si=Uh(i.containerInfo),gn(i,n),si=f,pn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{So(i.containerInfo)}catch(ht){$t(n,n.return,ht)}qm&&(qm=!1,Yv(n));break;case 4:l=si,si=Uh(n.stateNode.containerInfo),gn(i,n),pn(n),si=l;break;case 12:gn(i,n),pn(n);break;case 31:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,bh(n,l)));break;case 13:gn(i,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(wh=ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,bh(n,l)));break;case 22:f=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,B=nr,K=Oe;if(nr=B||f,Oe=K||C,gn(i,n),Oe=K,nr=B,pn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||C||nr||Oe||sa(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=C.stateNode;var $=C.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;A.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ht){$t(C,C.return,ht)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(ht){$t(C,C.return,ht)}}}else if(i.tag===18){if(a===null){C=i;try{var H=C.stateNode;f?LE(H,!0):LE(C.stateNode,!1)}catch(ht){$t(C,C.return,ht)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,bh(n,a))));break;case 19:gn(i,n),pn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,bh(n,l)));break;case 30:break;case 21:break;default:gn(i,n),pn(n)}}function pn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(zv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Bm(n);Sh(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(dn(_,""),a.flags&=-33);var A=Bm(n);Sh(n,A,_);break;case 3:case 4:var C=a.stateNode.containerInfo,B=Bm(n);jm(n,B,C);break;default:throw Error(r(161))}}catch(K){$t(n,n.return,K)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Yv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Yv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function rr(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)qv(n,i.alternate,i),i=i.sibling}function sa(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Gr(4,i,i.return),sa(i);break;case 1:Ni(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Lv(i,i.return,a),sa(i);break;case 27:fu(i.stateNode);case 26:case 5:Ni(i,i.return),sa(i);break;case 22:i.memoizedState===null&&sa(i);break;case 30:sa(i);break;default:sa(i)}n=n.sibling}}function sr(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:sr(f,d,a),nu(4,d);break;case 1:if(sr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){$t(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var A=l.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)I_(C[f],A)}catch(B){$t(l,l.return,B)}}a&&_&64&&kv(d),iu(d,d.return);break;case 27:Bv(d);case 26:case 5:sr(f,d,a),a&&l===null&&_&4&&Uv(d),iu(d,d.return);break;case 12:sr(f,d,a);break;case 31:sr(f,d,a),a&&_&4&&Gv(f,d);break;case 13:sr(f,d,a),a&&_&4&&Kv(f,d);break;case 22:d.memoizedState===null&&sr(f,d,a),iu(d,d.return);break;case 30:break;default:sr(f,d,a)}i=i.sibling}}function Fm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Fl(a))}function Hm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Fl(n))}function ai(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Xv(n,i,a,l),i=i.sibling}function Xv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(n,i,a,l),f&2048&&nu(9,i);break;case 1:ai(n,i,a,l);break;case 3:ai(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Fl(n)));break;case 12:if(f&2048){ai(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,A=d.onPostCommit;typeof A=="function"&&A(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){$t(i,i.return,C)}}else ai(n,i,a,l);break;case 31:ai(n,i,a,l);break;case 13:ai(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ai(n,i,a,l):ru(n,i):d._visibility&2?ai(n,i,a,l):(d._visibility|=2,ho(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(_,i);break;case 24:ai(n,i,a,l),f&2048&&Hm(i.alternate,i);break;default:ai(n,i,a,l)}}function ho(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,A=a,C=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:ho(d,_,A,C,f),nu(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?ho(d,_,A,C,f):ru(d,_):(K._visibility|=2,ho(d,_,A,C,f)),f&&B&2048&&Fm(_.alternate,_);break;case 24:ho(d,_,A,C,f),f&&B&2048&&Hm(_.alternate,_);break;default:ho(d,_,A,C,f)}i=i.sibling}}function ru(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:ru(a,l),f&2048&&Fm(l.alternate,l);break;case 24:ru(a,l),f&2048&&Hm(l.alternate,l);break;default:ru(a,l)}i=i.sibling}}var su=8192;function fo(n,i,a){if(n.subtreeFlags&su)for(n=n.child;n!==null;)$v(n,i,a),n=n.sibling}function $v(n,i,a){switch(n.tag){case 26:fo(n,i,a),n.flags&su&&n.memoizedState!==null&&Aw(a,si,n.memoizedState,n.memoizedProps);break;case 5:fo(n,i,a);break;case 3:case 4:var l=si;si=Uh(n.stateNode.containerInfo),fo(n,i,a),si=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=su,su=16777216,fo(n,i,a),su=l):fo(n,i,a));break;default:fo(n,i,a)}}function Jv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function au(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,Zv(l,n)}Jv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Wv(n),n=n.sibling}function Wv(n){switch(n.tag){case 0:case 11:case 15:au(n),n.flags&2048&&Gr(9,n,n.return);break;case 3:au(n);break;case 12:au(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ih(n)):au(n);break;default:au(n)}}function Ih(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];He=l,Zv(l,n)}Jv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Gr(8,i,i.return),Ih(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ih(i));break;default:Ih(i)}n=n.sibling}}function Zv(n,i){for(;He!==null;){var a=He;switch(a.tag){case 0:case 11:case 15:Gr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Fl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,He=l;else t:for(a=n;He!==null;){l=He;var f=l.sibling,d=l.return;if(Fv(l),l===a){He=null;break t}if(f!==null){f.return=d,He=f;break t}He=d}}}var LI={getCacheForType:function(n){var i=$e(xe),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return $e(xe).controller.signal}},UI=typeof WeakMap=="function"?WeakMap:Map,Gt=0,re=null,Vt=null,Mt=0,Xt=0,Rn=null,Kr=!1,mo=!1,Gm=!1,ar=0,ge=0,Qr=0,aa=0,Km=0,Cn=0,go=0,ou=null,yn=null,Qm=!1,wh=0,tE=0,Rh=1/0,Ch=null,Yr=null,ze=0,Xr=null,po=null,or=0,Ym=0,Xm=null,eE=null,lu=0,$m=null;function Dn(){return(Gt&2)!==0&&Mt!==0?Mt&-Mt:Y.T!==null?ng():Dc()}function nE(){if(Cn===0)if((Mt&536870912)===0||Ut){var n=Os;Os<<=1,(Os&3932160)===0&&(Os=262144),Cn=n}else Cn=536870912;return n=In.current,n!==null&&(n.flags|=32),Cn}function _n(n,i,a){(n===re&&(Xt===2||Xt===9)||n.cancelPendingCommit!==null)&&(yo(n,0),$r(n,Mt,Cn,!1)),Ms(n,a),((Gt&2)===0||n!==re)&&(n===re&&((Gt&2)===0&&(aa|=a),ge===4&&$r(n,Mt,Cn,!1)),Vi(n))}function iE(n,i,a){if((Gt&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||$n(n,i),f=l?jI(n,i):Wm(n,i,!0),d=l;do{if(f===0){mo&&!l&&$r(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!zI(a)){f=Wm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var A=n;f=ou;var C=A.current.memoizedState.isDehydrated;if(C&&(yo(A,_).flags|=256),_=Wm(A,_,!1),_!==2){if(Gm&&!C){A.errorRecoveryDisabledLanes|=d,aa|=d,f=4;break t}d=yn,yn=f,d!==null&&(yn===null?yn=d:yn.push.apply(yn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){yo(n,0),$r(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$r(l,i,Cn,!Kr);break t;case 2:yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=wh+300-ln(),10<f)){if($r(l,i,Cn,!Kr),mi(l,0,!0)!==0)break t;or=i,l.timeoutHandle=ME(rE.bind(null,l,a,yn,Ch,Qm,i,Cn,aa,go,Kr,d,"Throttled",-0,0),f);break t}rE(l,a,yn,Ch,Qm,i,Cn,aa,go,Kr,d,null,-0,0)}}break}while(!0);Vi(n)}function rE(n,i,a,l,f,d,_,A,C,B,K,$,q,H){if(n.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},$v(i,d,$);var ht=(d&62914560)===d?wh-ln():(d&4194048)===d?tE-ln():0;if(ht=Sw($,ht),ht!==null){or=d,n.cancelPendingCommit=ht(fE.bind(null,n,i,d,a,l,f,_,A,C,K,$,null,q,H)),$r(n,d,_,!B);return}}fE(n,i,d,a,l,f,_,A,C)}function zI(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Sn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $r(n,i,a,l){i&=~Km,i&=~aa,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-ye(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&Ps(n,a,i)}function Dh(){return(Gt&6)===0?(uu(0),!1):!0}function Jm(){if(Vt!==null){if(Xt===0)var n=Vt.return;else n=Vt,$i=Js=null,dm(n),ao=null,Gl=0,n=Vt;for(;n!==null;)Pv(n.alternate,n),n=n.return;Vt=null}}function yo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,sw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),or=0,Jm(),re=n,Vt=a=Yi(n.current,null),Mt=i,Xt=0,Rn=null,Kr=!1,mo=$n(n,i),Gm=!1,go=Cn=Km=aa=Qr=ge=0,yn=ou=null,Qm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-ye(l),d=1<<f;i|=n[f],l&=~d}return ar=i,$c(),a}function sE(n,i){Rt=null,Y.H=Zl,i===so||i===rh?(i=T_(),Xt=3):i===em?(i=T_(),Xt=4):Xt=i===Dm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Rn=i,Vt===null&&(ge=1,_h(n,jn(i,n.current)))}function aE(){var n=In.current;return n===null?!0:(Mt&4194048)===Mt?Gn===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?n===Gn:!1}function oE(){var n=Y.H;return Y.H=Zl,n===null?Zl:n}function lE(){var n=Y.A;return Y.A=LI,n}function xh(){ge=4,Kr||(Mt&4194048)!==Mt&&In.current!==null||(mo=!0),(Qr&134217727)===0&&(aa&134217727)===0||re===null||$r(re,Mt,Cn,!1)}function Wm(n,i,a){var l=Gt;Gt|=2;var f=oE(),d=lE();(re!==n||Mt!==i)&&(Ch=null,yo(n,i)),i=!1;var _=ge;t:do try{if(Xt!==0&&Vt!==null){var A=Vt,C=Rn;switch(Xt){case 8:Jm(),_=6;break t;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var B=Xt;if(Xt=0,Rn=null,_o(n,A,C,B),a&&mo){_=0;break t}break;default:B=Xt,Xt=0,Rn=null,_o(n,A,C,B)}}BI(),_=ge;break}catch(K){sE(n,K)}while(!0);return i&&n.shellSuspendCounter++,$i=Js=null,Gt=l,Y.H=f,Y.A=d,Vt===null&&(re=null,Mt=0,$c()),_}function BI(){for(;Vt!==null;)uE(Vt)}function jI(n,i){var a=Gt;Gt|=2;var l=oE(),f=lE();re!==n||Mt!==i?(Ch=null,Rh=ln()+500,yo(n,i)):mo=$n(n,i);t:do try{if(Xt!==0&&Vt!==null){i=Vt;var d=Rn;e:switch(Xt){case 1:Xt=0,Rn=null,_o(n,i,d,1);break;case 2:case 9:if(v_(d)){Xt=0,Rn=null,cE(i);break}i=function(){Xt!==2&&Xt!==9||re!==n||(Xt=7),Vi(n)},d.then(i,i);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:v_(d)?(Xt=0,Rn=null,cE(i)):(Xt=0,Rn=null,_o(n,i,d,7));break;case 5:var _=null;switch(Vt.tag){case 26:_=Vt.memoizedState;case 5:case 27:var A=Vt;if(_?XE(_):A.stateNode.complete){Xt=0,Rn=null;var C=A.sibling;if(C!==null)Vt=C;else{var B=A.return;B!==null?(Vt=B,Nh(B)):Vt=null}break e}}Xt=0,Rn=null,_o(n,i,d,5);break;case 6:Xt=0,Rn=null,_o(n,i,d,6);break;case 8:Jm(),ge=6;break t;default:throw Error(r(462))}}qI();break}catch(K){sE(n,K)}while(!0);return $i=Js=null,Y.H=l,Y.A=f,Gt=a,Vt!==null?0:(re=null,Mt=0,$c(),ge)}function qI(){for(;Vt!==null&&!Cd();)uE(Vt)}function uE(n){var i=Ov(n.alternate,n,ar);n.memoizedProps=n.pendingProps,i===null?Nh(n):Vt=i}function cE(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Rv(a,i,i.pendingProps,i.type,void 0,Mt);break;case 11:i=Rv(a,i,i.pendingProps,i.type.render,i.ref,Mt);break;case 5:dm(i);default:Pv(a,i),i=Vt=l_(i,ar),i=Ov(a,i,ar)}n.memoizedProps=n.pendingProps,i===null?Nh(n):Vt=i}function _o(n,i,a,l){$i=Js=null,dm(i),ao=null,Gl=0;var f=i.return;try{if(xI(n,f,i,a,Mt)){ge=1,_h(n,jn(a,n.current)),Vt=null;return}}catch(d){if(f!==null)throw Vt=f,d;ge=1,_h(n,jn(a,n.current)),Vt=null;return}i.flags&32768?(Ut||l===1?n=!0:mo||(Mt&536870912)!==0?n=!1:(Kr=n=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),hE(i,n)):Nh(i)}function Nh(n){var i=n;do{if((i.flags&32768)!==0){hE(i,Kr);return}n=i.return;var a=OI(i.alternate,i,ar);if(a!==null){Vt=a;return}if(i=i.sibling,i!==null){Vt=i;return}Vt=i=n}while(i!==null);ge===0&&(ge=5)}function hE(n,i){do{var a=MI(n.alternate,n);if(a!==null){a.flags&=32767,Vt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Vt=n;return}Vt=n=a}while(n!==null);ge=6,Vt=null}function fE(n,i,a,l,f,d,_,A,C){n.cancelPendingCommit=null;do Vh();while(ze!==0);if((Gt&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Bd,Nd(n,a,d,_,A,C),n===re&&(Vt=re=null,Mt=0),po=i,Xr=n,or=a,Ym=d,Xm=f,eE=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,KI(wr,function(){return yE(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=at.p,at.p=2,_=Gt,Gt|=4;try{PI(n,i,a)}finally{Gt=_,at.p=f,Y.T=l}}ze=1,dE(),mE(),gE()}}function dE(){if(ze===1){ze=0;var n=Xr,i=po,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=at.p;at.p=2;var f=Gt;Gt|=4;try{Qv(i,n);var d=cg,_=Zy(n.containerInfo),A=d.focusedElem,C=d.selectionRange;if(_!==A&&A&&A.ownerDocument&&Wy(A.ownerDocument.documentElement,A)){if(C!==null&&Pd(A)){var B=C.start,K=C.end;if(K===void 0&&(K=B),"selectionStart"in A)A.selectionStart=B,A.selectionEnd=Math.min(K,A.value.length);else{var $=A.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var H=q.getSelection(),ht=A.textContent.length,vt=Math.min(C.start,ht),ie=C.end===void 0?vt:Math.min(C.end,ht);!H.extend&&vt>ie&&(_=ie,ie=vt,vt=_);var P=Jy(A,vt),x=Jy(A,ie);if(P&&x&&(H.rangeCount!==1||H.anchorNode!==P.node||H.anchorOffset!==P.offset||H.focusNode!==x.node||H.focusOffset!==x.offset)){var z=$.createRange();z.setStart(P.node,P.offset),H.removeAllRanges(),vt>ie?(H.addRange(z),H.extend(x.node,x.offset)):(z.setEnd(x.node,x.offset),H.addRange(z))}}}}for($=[],H=A;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<$.length;A++){var X=$[A];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Hh=!!ug,cg=ug=null}finally{Gt=f,at.p=l,Y.T=a}}n.current=i,ze=2}}function mE(){if(ze===2){ze=0;var n=Xr,i=po,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=at.p;at.p=2;var f=Gt;Gt|=4;try{qv(n,i.alternate,i)}finally{Gt=f,at.p=l,Y.T=a}}ze=3}}function gE(){if(ze===4||ze===3){ze=0,Ac();var n=Xr,i=po,a=or,l=eE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ze=5:(ze=0,po=Xr=null,pE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Yr=null),Hi(a),i=i.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,f=at.p,at.p=2,Y.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var A=l[_];d(A.value,{componentStack:A.stack})}}finally{Y.T=i,at.p=f}}(or&3)!==0&&Vh(),Vi(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===$m?lu++:(lu=0,$m=n):lu=0,uu(0)}}function pE(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Fl(i)))}function Vh(){return dE(),mE(),gE(),yE()}function yE(){if(ze!==5)return!1;var n=Xr,i=Ym;Ym=0;var a=Hi(or),l=Y.T,f=at.p;try{at.p=32>a?32:a,Y.T=null,a=Xm,Xm=null;var d=Xr,_=or;if(ze=0,po=Xr=null,or=0,(Gt&6)!==0)throw Error(r(331));var A=Gt;if(Gt|=4,Wv(d.current),Xv(d,d.current,_,a),Gt=A,uu(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(Xn,d)}catch{}return!0}finally{at.p=f,Y.T=l,pE(n,i)}}function _E(n,i,a){i=jn(a,i),i=Cm(n.stateNode,i,2),n=qr(n,i,2),n!==null&&(Ms(n,2),Vi(n))}function $t(n,i,a){if(n.tag===3)_E(n,n,a);else for(;i!==null;){if(i.tag===3){_E(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yr===null||!Yr.has(l))){n=jn(a,n),a=vv(2),l=qr(i,a,2),l!==null&&(Ev(a,l,i,n),Ms(l,2),Vi(l));break}}i=i.return}}function Zm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new UI;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Gm=!0,f.add(a),n=FI.bind(null,n,i,a),i.then(n,n))}function FI(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,re===n&&(Mt&a)===a&&(ge===4||ge===3&&(Mt&62914560)===Mt&&300>ln()-wh?(Gt&2)===0&&yo(n,0):Km|=a,go===Mt&&(go=0)),Vi(n)}function vE(n,i){i===0&&(i=Cc()),n=Ys(n,i),n!==null&&(Ms(n,i),Vi(n))}function HI(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),vE(n,a)}function GI(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),vE(n,a)}function KI(n,i){return Ue(n,i)}var Oh=null,vo=null,tg=!1,Mh=!1,eg=!1,Jr=0;function Vi(n){n!==vo&&n.next===null&&(vo===null?Oh=vo=n:vo=vo.next=n),Mh=!0,tg||(tg=!0,YI())}function uu(n,i){if(!eg&&Mh){eg=!0;do for(var a=!1,l=Oh;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,A=l.pingedLanes;d=(1<<31-ye(42|n)+1)-1,d&=f&~(_&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,SE(l,d))}else d=Mt,d=mi(l,l===re?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,SE(l,d));l=l.next}while(a);eg=!1}}function QI(){EE()}function EE(){Mh=tg=!1;var n=0;Jr!==0&&rw()&&(n=Jr);for(var i=ln(),a=null,l=Oh;l!==null;){var f=l.next,d=TE(l,i);d===0?(l.next=null,a===null?Oh=f:a.next=f,f===null&&(vo=a)):(a=l,(n!==0||(d&3)!==0)&&(Mh=!0)),l=f}ze!==0&&ze!==5||uu(n),Jr!==0&&(Jr=0)}function TE(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-ye(d),A=1<<_,C=f[_];C===-1?((A&a)===0||(A&l)!==0)&&(f[_]=xd(A,i)):C<=i&&(n.expiredLanes|=A),d&=~A}if(i=re,a=Mt,a=mi(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Xt===2||Xt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ir(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||$n(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&Ir(l),Hi(a)){case 2:case 8:a=vl;break;case 32:a=wr;break;case 268435456:a=Sc;break;default:a=wr}return l=AE.bind(null,n),a=Ue(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&Ir(l),n.callbackPriority=2,n.callbackNode=null,2}function AE(n,i){if(ze!==0&&ze!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Vh()&&n.callbackNode!==a)return null;var l=Mt;return l=mi(n,n===re?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(iE(n,l,i),TE(n,ln()),n.callbackNode!=null&&n.callbackNode===a?AE.bind(null,n):null)}function SE(n,i){if(Vh())return null;iE(n,i,!0)}function YI(){aw(function(){(Gt&6)!==0?Ue(_l,QI):EE()})}function ng(){if(Jr===0){var n=io;n===0&&(n=fi,fi<<=1,(fi&261888)===0&&(fi=256)),Jr=n}return Jr}function bE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:qa(""+n)}function IE(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function XI(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=bE((f[qe]||null).action),_=l.submitter;_&&(i=(i=_[qe]||null)?bE(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var A=new Ii("action","action",null,l,f);n.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Jr!==0){var C=_?IE(f,_):new FormData(f);Am(a,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(A.preventDefault(),C=_?IE(f,_):new FormData(f),Am(a,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var ig=0;ig<zd.length;ig++){var rg=zd[ig],$I=rg.toLowerCase(),JI=rg[0].toUpperCase()+rg.slice(1);ri($I,"on"+JI)}ri(n_,"onAnimationEnd"),ri(i_,"onAnimationIteration"),ri(r_,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(dI,"onTransitionRun"),ri(mI,"onTransitionStart"),ri(gI,"onTransitionCancel"),ri(s_,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function wE(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var A=l[_],C=A.instance,B=A.currentTarget;if(A=A.listener,C!==d&&f.isPropagationStopped())break t;d=A,f.currentTarget=B;try{d(f)}catch(K){Xc(K)}f.currentTarget=null,d=C}else for(_=0;_<l.length;_++){if(A=l[_],C=A.instance,B=A.currentTarget,A=A.listener,C!==d&&f.isPropagationStopped())break t;d=A,f.currentTarget=B;try{d(f)}catch(K){Xc(K)}f.currentTarget=null,d=C}}}}function Ot(n,i){var a=i[La];a===void 0&&(a=i[La]=new Set);var l=n+"__bubble";a.has(l)||(RE(i,n,2,!1),a.add(l))}function sg(n,i,a){var l=0;i&&(l|=4),RE(a,n,l,i)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function ag(n){if(!n[Ph]){n[Ph]=!0,Al.forEach(function(a){a!=="selectionchange"&&(WI.has(a)||sg(a,!1,n),sg(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ph]||(i[Ph]=!0,sg("selectionchange",!1,i))}}function RE(n,i,a,l){switch(nT(i)){case 2:var f=ww;break;case 8:f=Rw;break;default:f=Tg}a=f.bind(null,i,a,n),f=void 0,!Bs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function og(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var A=l.stateNode.containerInfo;if(A===f)break;if(_===4)for(_=l.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;A!==null;){if(_=_i(A),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){l=d=_;continue t}A=A.parentNode}}l=l.return}Vr(function(){var B=d,K=Ln(a),$=[];t:{var q=a_.get(n);if(q!==void 0){var H=Ii,ht=n;switch(n){case"keypress":if(qs(a)===0)break t;case"keydown":case"keyup":H=Kc;break;case"focusin":ht="focus",H=Hs;break;case"focusout":ht="blur",H=Hs;break;case"beforeblur":case"afterblur":H=Hs;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=y;break;case n_:case i_:case r_:H=zc;break;case s_:H=S;break;case"scroll":case"scrollend":H=Ml;break;case"wheel":H=F;break;case"copy":case"cut":case"paste":H=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Qi;break;case"toggle":case"beforetoggle":H=wt}var vt=(i&4)!==0,ie=!vt&&(n==="scroll"||n==="scrollend"),P=vt?q!==null?q+"Capture":null:q;vt=[];for(var x=B,z;x!==null;){var X=x;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||P===null||(X=ti(x,P),X!=null&&vt.push(hu(x,X,z))),ie)break;x=x.return}0<vt.length&&(q=new H(q,ht,null,a,K),$.push({event:q,listeners:vt}))}}if((i&7)===0){t:{if(q=n==="mouseover"||n==="pointerover",H=n==="mouseout"||n==="pointerout",q&&a!==Nl&&(ht=a.relatedTarget||a.fromElement)&&(_i(ht)||ht[pi]))break t;if((H||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,H?(ht=a.relatedTarget||a.toElement,H=B,ht=ht?_i(ht):null,ht!==null&&(ie=u(ht),vt=ht.tag,ht!==ie||vt!==5&&vt!==27&&vt!==6)&&(ht=null)):(H=null,ht=B),H!==ht)){if(vt=Pl,X="onMouseLeave",P="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(vt=Qi,X="onPointerLeave",P="onPointerEnter",x="pointer"),ie=H==null?q:Tn(H),z=ht==null?q:Tn(ht),q=new vt(X,x+"leave",H,a,K),q.target=ie,q.relatedTarget=z,X=null,_i(K)===B&&(vt=new vt(P,x+"enter",ht,a,K),vt.target=z,vt.relatedTarget=ie,X=vt),ie=X,H&&ht)e:{for(vt=ZI,P=H,x=ht,z=0,X=P;X;X=vt(X))z++;X=0;for(var gt=x;gt;gt=vt(gt))X++;for(;0<z-X;)P=vt(P),z--;for(;0<X-z;)x=vt(x),X--;for(;z--;){if(P===x||x!==null&&P===x.alternate){vt=P;break e}P=vt(P),x=vt(x)}vt=null}else vt=null;H!==null&&CE($,q,H,vt,!1),ht!==null&&ie!==null&&CE($,ie,ht,vt,!0)}}t:{if(q=B?Tn(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var qt=Gy;else if(Fy(q))if(Ky)qt=cI;else{qt=lI;var dt=oI}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ja(B.elementType)&&(qt=Gy):qt=uI;if(qt&&(qt=qt(n,B))){Hy($,qt,a,K);break t}dt&&dt(n,q,B),n==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&Cl(q,"number",q.value)}switch(dt=B?Tn(B):window,n){case"focusin":(Fy(dt)||dt.contentEditable==="true")&&(Xa=dt,kd=B,Bl=null);break;case"focusout":Bl=kd=Xa=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,t_($,a,K);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":t_($,a,K)}var xt;if(Ht)t:{switch(n){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Ya?Gs(n,a)&&(Pt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Pt="onCompositionStart");Pt&&(Ci&&a.locale!=="ko"&&(Ya||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Ya&&(xt=Ol()):(bi=K,Vl="value"in bi?bi.value:bi.textContent,Ya=!0)),dt=kh(B,Pt),0<dt.length&&(Pt=new Ri(Pt,n,null,a,K),$.push({event:Pt,listeners:dt}),xt?Pt.data=xt:(xt=Qa(a),xt!==null&&(Pt.data=xt)))),(xt=zn?iI(n,a):rI(n,a))&&(Pt=kh(B,"onBeforeInput"),0<Pt.length&&(dt=new Ri("onBeforeInput","beforeinput",null,a,K),$.push({event:dt,listeners:Pt}),dt.data=xt)),XI($,n,B,a,K)}wE($,i)})}function hu(n,i,a){return{instance:n,listener:i,currentTarget:a}}function kh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=ti(n,a),f!=null&&l.unshift(hu(n,f,d)),f=ti(n,i),f!=null&&l.push(hu(n,f,d))),n.tag===3)return l;n=n.return}return[]}function ZI(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function CE(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var A=a,C=A.alternate,B=A.stateNode;if(A=A.tag,C!==null&&C===l)break;A!==5&&A!==26&&A!==27||B===null||(C=B,f?(B=ti(a,d),B!=null&&_.unshift(hu(a,B,C))):f||(B=ti(a,d),B!=null&&_.push(hu(a,B,C)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var tw=/\r\n?/g,ew=/\u0000|\uFFFD/g;function DE(n){return(typeof n=="string"?n:""+n).replace(tw,`
`).replace(ew,"")}function xE(n,i){return i=DE(i),DE(n)===i}function ne(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||dn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&dn(n,""+l);break;case"className":An(n,"class",l);break;case"tabIndex":An(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":An(n,a,l);break;case"style":xl(n,l,d);break;case"data":if(i!=="object"){An(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=qa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ne(n,i,"name",f.name,f,null),ne(n,i,"formEncType",f.formEncType,f,null),ne(n,i,"formMethod",f.formMethod,f,null),ne(n,i,"formTarget",f.formTarget,f,null)):(ne(n,i,"encType",f.encType,f,null),ne(n,i,"method",f.method,f,null),ne(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=qa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Zn);break;case"onScroll":l!=null&&Ot("scroll",n);break;case"onScrollEnd":l!=null&&Ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=qa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Ot("beforetoggle",n),Ot("toggle",n),za(n,"popover",l);break;case"xlinkActuate":De(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":De(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":De(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":De(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":De(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":De(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":De(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":De(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":De(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":za(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kc.get(a)||a,za(n,a,l))}}function lg(n,i,a,l,f,d){switch(a){case"style":xl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?dn(n,l):(typeof l=="number"||typeof l=="bigint")&&dn(n,""+l);break;case"onScroll":l!=null&&Ot("scroll",n);break;case"onScrollEnd":l!=null&&Ot("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[qe]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):za(n,a,l)}}}function We(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",n),Ot("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ne(n,i,d,_,a,null)}}f&&ne(n,i,"srcSet",a.srcSet,a,null),l&&ne(n,i,"src",a.src,a,null);return;case"input":Ot("invalid",n);var A=d=_=f=null,C=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":_=K;break;case"checked":C=K;break;case"defaultChecked":B=K;break;case"value":d=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:ne(n,i,l,K,a,null)}}Oc(n,d,A,C,B,_,f,!1);return;case"select":Ot("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":d=A;break;case"defaultValue":_=A;break;case"multiple":l=A;default:ne(n,i,f,A,a,null)}i=d,a=_,n.multiple=!!l,i!=null?Cr(n,!!l,i,!1):a!=null&&Cr(n,!!l,a,!0);return;case"textarea":Ot("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(A=a[_],A!=null))switch(_){case"value":l=A;break;case"defaultValue":f=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ne(n,i,_,A,a,null)}Dr(n,l,f,d);return;case"option":for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null)&&(C==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":ne(n,i,C,l,a,null));return;case"dialog":Ot("beforetoggle",n),Ot("toggle",n),Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":Ot("load",n);break;case"video":case"audio":for(l=0;l<cu.length;l++)Ot(cu[l],n);break;case"image":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"embed":case"source":case"link":Ot("error",n),Ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ne(n,i,B,l,a,null)}return;default:if(ja(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&lg(n,i,K,l,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(l=a[A],l!=null&&ne(n,i,A,l,a,null))}function nw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,A=null,C=null,B=null,K=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":C=$;default:l.hasOwnProperty(H)||ne(n,i,H,null,l,$)}}for(var q in l){var H=l[q];if($=a[q],l.hasOwnProperty(q)&&(H!=null||$!=null))switch(q){case"type":d=H;break;case"name":f=H;break;case"checked":B=H;break;case"defaultChecked":K=H;break;case"value":_=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==$&&ne(n,i,q,H,l,$)}}Ba(n,_,A,C,B,K,d,f);return;case"select":H=_=A=q=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":H=C;default:l.hasOwnProperty(d)||ne(n,i,d,null,l,C)}for(f in l)if(d=l[f],C=a[f],l.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":q=d;break;case"defaultValue":A=d;break;case"multiple":_=d;default:d!==C&&ne(n,i,f,d,l,C)}i=A,a=_,l=H,q!=null?Cr(n,!!a,q,!1):!!l!=!!a&&(i!=null?Cr(n,!!a,i,!0):Cr(n,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ne(n,i,A,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":q=f;break;case"defaultValue":H=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ne(n,i,_,f,l,d)}Mc(n,q,H);return;case"option":for(var ht in a)q=a[ht],a.hasOwnProperty(ht)&&q!=null&&!l.hasOwnProperty(ht)&&(ht==="selected"?n.selected=!1:ne(n,i,ht,null,l,q));for(C in l)q=l[C],H=a[C],l.hasOwnProperty(C)&&q!==H&&(q!=null||H!=null)&&(C==="selected"?n.selected=q&&typeof q!="function"&&typeof q!="symbol":ne(n,i,C,q,l,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in a)q=a[vt],a.hasOwnProperty(vt)&&q!=null&&!l.hasOwnProperty(vt)&&ne(n,i,vt,null,l,q);for(B in l)if(q=l[B],H=a[B],l.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:ne(n,i,B,q,l,H)}return;default:if(ja(i)){for(var ie in a)q=a[ie],a.hasOwnProperty(ie)&&q!==void 0&&!l.hasOwnProperty(ie)&&lg(n,i,ie,void 0,l,q);for(K in l)q=l[K],H=a[K],!l.hasOwnProperty(K)||q===H||q===void 0&&H===void 0||lg(n,i,K,q,l,H);return}}for(var P in a)q=a[P],a.hasOwnProperty(P)&&q!=null&&!l.hasOwnProperty(P)&&ne(n,i,P,null,l,q);for($ in l)q=l[$],H=a[$],!l.hasOwnProperty($)||q===H||q==null&&H==null||ne(n,i,$,q,l,H)}function NE(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function iw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,A=f.duration;if(d&&A&&NE(_)){for(_=0,A=f.responseEnd,l+=1;l<a.length;l++){var C=a[l],B=C.startTime;if(B>A)break;var K=C.transferSize,$=C.initiatorType;K&&NE($)&&(C=C.responseEnd,_+=K*(C<A?1:(A-B)/(C-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ug=null,cg=null;function Lh(n){return n.nodeType===9?n:n.ownerDocument}function VE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function hg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var fg=null;function rw(){var n=window.event;return n&&n.type==="popstate"?n===fg?!1:(fg=n,!0):(fg=null,!1)}var ME=typeof setTimeout=="function"?setTimeout:void 0,sw=typeof clearTimeout=="function"?clearTimeout:void 0,PE=typeof Promise=="function"?Promise:void 0,aw=typeof queueMicrotask=="function"?queueMicrotask:typeof PE<"u"?function(n){return PE.resolve(null).then(n).catch(ow)}:ME;function ow(n){setTimeout(function(){throw n})}function Wr(n){return n==="head"}function kE(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),So(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")fu(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,fu(a);for(var d=a.firstChild;d;){var _=d.nextSibling,A=d.nodeName;d[yi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&fu(n.ownerDocument.body);a=f}while(a);So(i)}function LE(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function dg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dg(a),Ua(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function lw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[yi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function uw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Kn(n.nextSibling),n===null))return null;return n}function UE(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Kn(n.nextSibling),n===null))return null;return n}function mg(n){return n.data==="$?"||n.data==="$~"}function gg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function cw(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Kn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var pg=null;function zE(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return Kn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function BE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function jE(n,i,a){switch(i=Lh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function fu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ua(n)}var Qn=new Map,qE=new Set;function Uh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var lr=at.d;at.d={f:hw,r:fw,D:dw,C:mw,L:gw,m:pw,X:_w,S:yw,M:vw};function hw(){var n=lr.f(),i=Dh();return n||i}function fw(n){var i=kn(n);i!==null&&i.tag===5&&i.type==="form"?sv(i):lr.r(n)}var Eo=typeof document>"u"?null:document;function FE(n,i,a){var l=Eo;if(l&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),qE.has(f)||(qE.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),We(i,"link",n),Ce(i),l.head.appendChild(i)))}}function dw(n){lr.D(n),FE("dns-prefetch",n,null)}function mw(n,i){lr.C(n,i),FE("preconnect",n,i)}function gw(n,i,a){lr.L(n,i,a);var l=Eo;if(l&&n&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+fn(a.imageSizes)+'"]')):f+='[href="'+fn(n)+'"]';var d=f;switch(i){case"style":d=To(n);break;case"script":d=Ao(n)}Qn.has(d)||(n=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Qn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(du(d))||i==="script"&&l.querySelector(mu(d))||(i=l.createElement("link"),We(i,"link",n),Ce(i),l.head.appendChild(i)))}}function pw(n,i){lr.m(n,i);var a=Eo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ao(n)}if(!Qn.has(d)&&(n=T({rel:"modulepreload",href:n},i),Qn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(mu(d)))return}l=a.createElement("link"),We(l,"link",n),Ce(l),a.head.appendChild(l)}}}function yw(n,i,a){lr.S(n,i,a);var l=Eo;if(l&&n){var f=vi(l).hoistableStyles,d=To(n);i=i||"default";var _=f.get(d);if(!_){var A={loading:0,preload:null};if(_=l.querySelector(du(d)))A.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Qn.get(d))&&yg(n,a);var C=_=l.createElement("link");Ce(C),We(C,"link",n),C._p=new Promise(function(B,K){C.onload=B,C.onerror=K}),C.addEventListener("load",function(){A.loading|=1}),C.addEventListener("error",function(){A.loading|=2}),A.loading|=4,zh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:A},f.set(d,_)}}}function _w(n,i){lr.X(n,i);var a=Eo;if(a&&n){var l=vi(a).hoistableScripts,f=Ao(n),d=l.get(f);d||(d=a.querySelector(mu(f)),d||(n=T({src:n,async:!0},i),(i=Qn.get(f))&&_g(n,i),d=a.createElement("script"),Ce(d),We(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function vw(n,i){lr.M(n,i);var a=Eo;if(a&&n){var l=vi(a).hoistableScripts,f=Ao(n),d=l.get(f);d||(d=a.querySelector(mu(f)),d||(n=T({src:n,async:!0,type:"module"},i),(i=Qn.get(f))&&_g(n,i),d=a.createElement("script"),Ce(d),We(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function HE(n,i,a,l){var f=(f=Dt.current)?Uh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=To(a.href),a=vi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=To(a.href);var d=vi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(du(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Qn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(n,a),d||Ew(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ao(a),a=vi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function To(n){return'href="'+fn(n)+'"'}function du(n){return'link[rel="stylesheet"]['+n+"]"}function GE(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function Ew(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),We(i,"link",a),Ce(i),n.head.appendChild(i))}function Ao(n){return'[src="'+fn(n)+'"]'}function mu(n){return"script[async]"+n}function KE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return i.instance=l,Ce(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Ce(l),We(l,"style",f),zh(l,a.precedence,n),i.instance=l;case"stylesheet":f=To(a.href);var d=n.querySelector(du(f));if(d)return i.state.loading|=4,i.instance=d,Ce(d),d;l=GE(a),(f=Qn.get(f))&&yg(l,f),d=(n.ownerDocument||n).createElement("link"),Ce(d);var _=d;return _._p=new Promise(function(A,C){_.onload=A,_.onerror=C}),We(d,"link",l),i.state.loading|=4,zh(d,a.precedence,n),i.instance=d;case"script":return d=Ao(a.src),(f=n.querySelector(mu(d)))?(i.instance=f,Ce(f),f):(l=a,(f=Qn.get(d))&&(l=T({},a),_g(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ce(f),We(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,zh(l,a.precedence,n));return i.instance}function zh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var A=l[_];if(A.dataset.precedence===i)d=A;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function yg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function _g(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Bh=null;function QE(n,i,a){if(Bh===null){var l=new Map,f=Bh=new Map;f.set(a,l)}else f=Bh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[yi]||d[Re]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var A=l.get(_);A?A.push(d):l.set(_,[d])}}return l}function YE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function Tw(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function XE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Aw(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=To(l.href),d=i.querySelector(du(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=jh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Ce(d);return}d=i.ownerDocument||i,l=GE(l),(f=Qn.get(f))&&yg(l,f),d=d.createElement("link"),Ce(d);var _=d;_._p=new Promise(function(A,C){_.onload=A,_.onerror=C}),We(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=jh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var vg=0;function Sw(n,i){return n.stylesheets&&n.count===0&&Fh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&vg===0&&(vg=62500*iw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>vg?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var qh=null;function Fh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,qh=new Map,i.forEach(bw,n),qh=null,jh.call(n))}function bw(n,i){if(!(i.state.loading&4)){var a=qh.get(n);if(a)var l=a.get(null);else{a=new Map,qh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=jh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var gu={$$typeof:nt,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function Iw(n,i,a,l,f,d,_,A,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gi(0),this.hiddenUpdates=gi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function $E(n,i,a,l,f,d,_,A,C,B,K,$){return n=new Iw(n,i,a,_,C,B,K,$,A),i=1,d===!0&&(i|=24),d=bn(3,null,null,i),n.current=d,d.stateNode=n,i=Wd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},nm(d),n}function JE(n){return n?(n=Wa,n):Wa}function WE(n,i,a,l,f,d){f=JE(f),l.context===null?l.context=f:l.pendingContext=f,l=jr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=qr(n,l,i),a!==null&&(_n(a,n,i),Ql(a,n,i))}function ZE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Eg(n,i){ZE(n,i),(n=n.alternate)&&ZE(n,i)}function tT(n){if(n.tag===13||n.tag===31){var i=Ys(n,67108864);i!==null&&_n(i,n,67108864),Eg(n,67108864)}}function eT(n){if(n.tag===13||n.tag===31){var i=Dn();i=ks(i);var a=Ys(n,i);a!==null&&_n(a,n,i),Eg(n,i)}}var Hh=!0;function ww(n,i,a,l){var f=Y.T;Y.T=null;var d=at.p;try{at.p=2,Tg(n,i,a,l)}finally{at.p=d,Y.T=f}}function Rw(n,i,a,l){var f=Y.T;Y.T=null;var d=at.p;try{at.p=8,Tg(n,i,a,l)}finally{at.p=d,Y.T=f}}function Tg(n,i,a,l){if(Hh){var f=Ag(l);if(f===null)og(n,i,l,Gh,a),iT(n,l);else if(Dw(f,n,i,a,l))l.stopPropagation();else if(iT(n,l),i&4&&-1<Cw.indexOf(n)){for(;f!==null;){var d=kn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=di(d.pendingLanes);if(_!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var C=1<<31-ye(_);A.entanglements[1]|=C,_&=~C}Vi(d),(Gt&6)===0&&(Rh=ln()+500,uu(0))}}break;case 31:case 13:A=Ys(d,2),A!==null&&_n(A,d,2),Dh(),Eg(d,2)}if(d=Ag(l),d===null&&og(n,i,l,Gh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else og(n,i,l,null,a)}}function Ag(n){return n=Ln(n),Sg(n)}var Gh=null;function Sg(n){if(Gh=null,n=_i(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Gh=n,null}function nT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vs()){case _l:return 2;case vl:return 8;case wr:case Dd:return 32;case Sc:return 268435456;default:return 32}default:return 32}}var bg=!1,Zr=null,ts=null,es=null,pu=new Map,yu=new Map,ns=[],Cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iT(n,i){switch(n){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":pu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(i.pointerId)}}function _u(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=kn(i),i!==null&&tT(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Dw(n,i,a,l,f){switch(i){case"focusin":return Zr=_u(Zr,n,i,a,l,f),!0;case"dragenter":return ts=_u(ts,n,i,a,l,f),!0;case"mouseover":return es=_u(es,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return pu.set(d,_u(pu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,yu.set(d,_u(yu.get(d)||null,n,i,a,l,f)),!0}return!1}function rT(n){var i=_i(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){eT(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Jn(n.priority,function(){eT(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Ag(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Nl=l,a.target.dispatchEvent(l),Nl=null}else return i=kn(a),i!==null&&tT(i),n.blockedOn=a,!1;i.shift()}return!0}function sT(n,i,a){Kh(n)&&a.delete(i)}function xw(){bg=!1,Zr!==null&&Kh(Zr)&&(Zr=null),ts!==null&&Kh(ts)&&(ts=null),es!==null&&Kh(es)&&(es=null),pu.forEach(sT),yu.forEach(sT)}function Qh(n,i){n.blockedOn===i&&(n.blockedOn=null,bg||(bg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,xw)))}var Yh=null;function aT(n){Yh!==n&&(Yh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Yh===n&&(Yh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Sg(l||a)===null)continue;break}var d=kn(a);d!==null&&(n.splice(i,3),i-=3,Am(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function So(n){function i(C){return Qh(C,n)}Zr!==null&&Qh(Zr,n),ts!==null&&Qh(ts,n),es!==null&&Qh(es,n),pu.forEach(i),yu.forEach(i);for(var a=0;a<ns.length;a++){var l=ns[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<ns.length&&(a=ns[0],a.blockedOn===null);)rT(a),a.blockedOn===null&&ns.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[qe]||null;if(typeof d=="function")_||aT(a);else if(_){var A=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[qe]||null)A=_.formAction;else if(Sg(f)!==null)continue}else A=_.action;typeof A=="function"?a[l+1]=A:(a.splice(l,3),l-=3),aT(a)}}}function oT(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Ig(n){this._internalRoot=n}Xh.prototype.render=Ig.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Dn();WE(a,l,n,i,null,null)},Xh.prototype.unmount=Ig.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;WE(n.current,2,null,n,null,null),Dh(),i[pi]=null}};function Xh(n){this._internalRoot=n}Xh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Dc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<ns.length&&i!==0&&i<ns[a].priority;a++);ns.splice(a,0,n),a===0&&rT(n)}};var lT=t.version;if(lT!=="19.2.3")throw Error(r(527,lT,"19.2.3"));at.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var Nw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Xn=$h.inject(Nw),Qe=$h}catch{}}return Eu.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=gv,d=pv,_=yv;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=$E(n,1,!1,null,null,a,l,null,f,d,_,oT),n[pi]=i.current,ag(n),new Ig(i)},Eu.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=gv,_=pv,A=yv,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),i=$E(n,1,!0,i,a??null,l,f,C,d,_,A,oT),i.context=JE(null),a=i.current,l=Dn(),l=ks(l),f=jr(l),f.callback=null,qr(a,f,l),a=l,i.current.lanes=a,Ms(i,a),Vi(i),n[pi]=i.current,ag(n),new Xh(i)},Eu.version="19.2.3",Eu}var _T;function qw(){if(_T)return Cg.exports;_T=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Cg.exports=jw(),Cg.exports}var Fw=qw();const Hw="modulepreload",Gw=function(s,t){return new URL(s,t).href},vT={},Op=function(t,e,r){let o=Promise.resolve();if(e&&e.length>0){let p=function(E){return Promise.all(E.map(T=>Promise.resolve(T).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};const c=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),g=m?.nonce||m?.getAttribute("nonce");o=p(e.map(E=>{if(E=Gw(E,r),E in vT)return;vT[E]=!0;const T=E.endsWith(".css"),b=T?'[rel="stylesheet"]':"";if(r)for(let G=c.length-1;G>=0;G--){const W=c[G];if(W.href===E&&(!T||W.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${E}"]${b}`))return;const M=document.createElement("link");if(M.rel=T?"stylesheet":Hw,T||(M.as="script"),M.crossOrigin="",M.href=E,g&&M.setAttribute("nonce",g),document.head.appendChild(M),T)return new Promise((G,W)=>{M.addEventListener("load",G),M.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${E}`)))})}))}function u(c){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=c,window.dispatchEvent(m),!m.defaultPrevented)throw c}return o.then(c=>{for(const m of c||[])m.status==="rejected"&&u(m.reason);return t().catch(u)})};const Kw=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Qw=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),ET=s=>{const t=Qw(s);return t.charAt(0).toUpperCase()+t.slice(1)},bA=(...s)=>s.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),Yw=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Xw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $w=Ct.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>Ct.createElement("svg",{ref:g,...Xw,width:t,height:t,stroke:s,strokeWidth:r?Number(e)*24/Number(t):e,className:bA("lucide",o),...!u&&!Yw(m)&&{"aria-hidden":"true"},...m},[...c.map(([p,E])=>Ct.createElement(p,E)),...Array.isArray(u)?u:[u]]));const be=(s,t)=>{const e=Ct.forwardRef(({className:r,...o},u)=>Ct.createElement($w,{ref:u,iconNode:t,className:bA(`lucide-${Kw(ET(s))}`,`lucide-${s}`,r),...o}));return e.displayName=ET(s),e};const Jw=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ww=be("box",Jw);const Zw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tR=be("circle-alert",Zw);const eR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],nR=be("circle-check-big",eR);const iR=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],rR=be("download",iR);const sR=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],aR=be("eye-off",sR);const oR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],lR=be("eye",oR);const uR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],cR=be("info",uR);const hR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yg=be("loader-circle",hR);const fR=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],dR=be("log-in",fR);const mR=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],IA=be("log-out",mR);const gR=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pR=be("mail",gR);const yR=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],_R=be("moon",yR);const vR=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],TT=be("package",vR);const ER=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],TR=be("plus",ER);const AR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],SR=be("refresh-cw",AR);const bR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],AT=be("settings",bR);const IR=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],ST=be("shopping-cart",IR);const wR=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],RR=be("sun",wR);const CR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],DR=be("trash-2",CR);const xR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],NR=be("user-plus",xR);const VR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],OR=be("x",VR),MR=()=>{};var bT={};const wA=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},PR=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],c=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],c=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},RA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,p=g?s[o+2]:0,E=u>>2,T=(u&3)<<4|m>>4;let b=(m&15)<<2|p>>6,M=p&63;g||(M=64,c||(b=64)),r.push(e[E],e[T],e[b],e[M])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(wA(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):PR(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const p=o<s.length?e[s.charAt(o)]:64;++o;const T=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||p==null||T==null)throw new kR;const b=u<<2|m>>4;if(r.push(b),p!==64){const M=m<<4&240|p>>2;if(r.push(M),T!==64){const G=p<<6&192|T;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class kR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LR=function(s){const t=wA(s);return RA.encodeByteArray(t,!0)},CA=function(s){return LR(s).replace(/\./g,"")},DA=function(s){try{return RA.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UR=()=>xA().__FIREBASE_DEFAULTS__,zR=()=>{if(typeof process>"u"||typeof bT>"u")return;const s=bT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},BR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&DA(s[1]);return t&&JSON.parse(t)},Jf=()=>{try{return MR()||UR()||zR()||BR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},jR=s=>Jf()?.emulatorHosts?.[s],NA=()=>Jf()?.config,VA=s=>Jf()?.[`_${s}`];class qR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}function al(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OA(s){return(await fetch(s,{credentials:"include"})).ok}const Ou={};function FR(){const s={prod:[],emulator:[]};for(const t of Object.keys(Ou))Ou[t]?s.emulator.push(t):s.prod.push(t);return s}function HR(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let IT=!1;function GR(s,t){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Ou[s]===t||Ou[s]||IT)return;Ou[s]=t;function e(b){return`__firebase__banner__${b}`}const r="__firebase__banner",u=FR().prod.length>0;function c(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,M){b.setAttribute("width","24"),b.setAttribute("id",M),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{IT=!0,c()},b}function E(b,M){b.setAttribute("id",M),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=HR(r),M=e("text"),G=document.getElementById(M)||document.createElement("span"),W=e("learnmore"),Z=document.getElementById(W)||document.createElement("a"),st=e("preprendIcon"),lt=document.getElementById(st)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const nt=b.element;m(nt),E(Z,W);const _t=p();g(lt,st),nt.append(lt,G,Z,_t),document.body.appendChild(nt)}u?(G.innerText="Preview backend disconnected.",lt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(lt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function MA(){const s=Jf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function XR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $R(){const s=Be();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function PA(){return!MA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kA(){return!MA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function LA(){try{return typeof indexedDB=="object"}catch{return!1}}function JR(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(e){t(e)}})}const WR="FirebaseError";class _r extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=WR,Object.setPrototypeOf(this,_r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?ZR(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new _r(o,m,r)}}function ZR(s,t){return s.replace(t2,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const t2=/\{\$([^}]+)}/g;function e2(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function Aa(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(wT(u)&&wT(c)){if(!Aa(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function wT(s){return s!==null&&typeof s=="object"}function uc(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function wu(s){const t={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");t[decodeURIComponent(o)]=decodeURIComponent(u)}}),t}function Ru(s){const t=s.indexOf("?");if(!t)return"";const e=s.indexOf("#",t);return s.substring(t,e>0?e:void 0)}function n2(s,t){const e=new i2(s,t);return e.subscribe.bind(e)}class i2{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");r2(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=Vg),o.error===void 0&&(o.error=Vg),o.complete===void 0&&(o.complete=Vg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function r2(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function Vg(){}function Ke(s){return s&&s._delegate?s._delegate:s}class Sa{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const la="[DEFAULT]";class s2{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new qR;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(o2(t))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=la){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=la){return this.instances.has(t)}getOptions(t=la){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a2(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=la){return this.component?this.component.multipleInstances?t:la:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a2(s){return s===la?void 0:s}function o2(s){return s.instantiationMode==="EAGER"}class l2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new s2(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(kt||(kt={}));const u2={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},c2=kt.INFO,h2={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},f2=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=h2[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Mp{constructor(t){this.name=t,this._logLevel=c2,this._logHandler=f2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?u2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}const d2=(s,t)=>t.some(e=>s instanceof e);let RT,CT;function m2(){return RT||(RT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g2(){return CT||(CT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UA=new WeakMap,Xg=new WeakMap,zA=new WeakMap,Og=new WeakMap,Pp=new WeakMap;function p2(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{e(gs(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&UA.set(e,s)}).catch(()=>{}),Pp.set(t,s),t}function y2(s){if(Xg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Xg.set(s,t)}let $g={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Xg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||zA.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return gs(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function _2(s){$g=s($g)}function v2(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(Mg(this),t,...e);return zA.set(r,t.sort?t.sort():[t]),gs(r)}:g2().includes(s)?function(...t){return s.apply(Mg(this),t),gs(UA.get(this))}:function(...t){return gs(s.apply(Mg(this),t))}}function E2(s){return typeof s=="function"?v2(s):(s instanceof IDBTransaction&&y2(s),d2(s,m2())?new Proxy(s,$g):s)}function gs(s){if(s instanceof IDBRequest)return p2(s);if(Og.has(s))return Og.get(s);const t=E2(s);return t!==s&&(Og.set(s,t),Pp.set(t,s)),t}const Mg=s=>Pp.get(s);function T2(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=gs(c);return r&&c.addEventListener("upgradeneeded",g=>{r(gs(c.result),g.oldVersion,g.newVersion,gs(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const A2=["get","getKey","getAll","getAllKeys","count"],S2=["put","add","delete","clear"],Pg=new Map;function DT(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Pg.get(t))return Pg.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=S2.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||A2.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[e](...m),o&&g.done]))[0]};return Pg.set(t,u),u}_2(s=>({...s,get:(t,e,r)=>DT(t,e)||s.get(t,e,r),has:(t,e)=>!!DT(t,e)||s.has(t,e)}));class b2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(I2(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function I2(s){return s.getComponent()?.type==="VERSION"}const Jg="@firebase/app",xT="0.14.6";const dr=new Mp("@firebase/app"),w2="@firebase/app-compat",R2="@firebase/analytics-compat",C2="@firebase/analytics",D2="@firebase/app-check-compat",x2="@firebase/app-check",N2="@firebase/auth",V2="@firebase/auth-compat",O2="@firebase/database",M2="@firebase/data-connect",P2="@firebase/database-compat",k2="@firebase/functions",L2="@firebase/functions-compat",U2="@firebase/installations",z2="@firebase/installations-compat",B2="@firebase/messaging",j2="@firebase/messaging-compat",q2="@firebase/performance",F2="@firebase/performance-compat",H2="@firebase/remote-config",G2="@firebase/remote-config-compat",K2="@firebase/storage",Q2="@firebase/storage-compat",Y2="@firebase/firestore",X2="@firebase/ai",$2="@firebase/firestore-compat",J2="firebase",W2="12.6.0";const Wg="[DEFAULT]",Z2={[Jg]:"fire-core",[w2]:"fire-core-compat",[C2]:"fire-analytics",[R2]:"fire-analytics-compat",[x2]:"fire-app-check",[D2]:"fire-app-check-compat",[N2]:"fire-auth",[V2]:"fire-auth-compat",[O2]:"fire-rtdb",[M2]:"fire-data-connect",[P2]:"fire-rtdb-compat",[k2]:"fire-fn",[L2]:"fire-fn-compat",[U2]:"fire-iid",[z2]:"fire-iid-compat",[B2]:"fire-fcm",[j2]:"fire-fcm-compat",[q2]:"fire-perf",[F2]:"fire-perf-compat",[H2]:"fire-rc",[G2]:"fire-rc-compat",[K2]:"fire-gcs",[Q2]:"fire-gcs-compat",[Y2]:"fire-fst",[$2]:"fire-fst-compat",[X2]:"fire-vertex","fire-js":"fire-js",[J2]:"fire-js-all"};const bf=new Map,tC=new Map,Zg=new Map;function NT(s,t){try{s.container.addComponent(t)}catch(e){dr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function Bo(s){const t=s.name;if(Zg.has(t))return dr.debug(`There were multiple attempts to register component ${t}.`),!1;Zg.set(t,s);for(const e of bf.values())NT(e,s);for(const e of tC.values())NT(e,s);return!0}function kp(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Nn(s){return s==null?!1:s.settings!==void 0}const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new lc("app","Firebase",eC);class nC{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}const ol=W2;function BA(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:Wg,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw ps.create("bad-app-name",{appName:String(o)});if(e||(e=NA()),!e)throw ps.create("no-options");const u=bf.get(o);if(u){if(Aa(e,u.options)&&Aa(r,u.config))return u;throw ps.create("duplicate-app",{appName:o})}const c=new l2(o);for(const g of Zg.values())c.addComponent(g);const m=new nC(e,r,c);return bf.set(o,m),m}function iC(s=Wg){const t=bf.get(s);if(!t&&s===Wg&&NA())return BA();if(!t)throw ps.create("no-app",{appName:s});return t}function ys(s,t,e){let r=Z2[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dr.warn(c.join(" "));return}Bo(new Sa(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const rC="firebase-heartbeat-database",sC=1,Gu="firebase-heartbeat-store";let kg=null;function jA(){return kg||(kg=T2(rC,sC,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Gu)}catch(e){console.warn(e)}}}}).catch(s=>{throw ps.create("idb-open",{originalErrorMessage:s.message})})),kg}async function aC(s){try{const e=(await jA()).transaction(Gu),r=await e.objectStore(Gu).get(qA(s));return await e.done,r}catch(t){if(t instanceof _r)dr.warn(t.message);else{const e=ps.create("idb-get",{originalErrorMessage:t?.message});dr.warn(e.message)}}}async function VT(s,t){try{const r=(await jA()).transaction(Gu,"readwrite");await r.objectStore(Gu).put(t,qA(s)),await r.done}catch(e){if(e instanceof _r)dr.warn(e.message);else{const r=ps.create("idb-set",{originalErrorMessage:e?.message});dr.warn(r.message)}}}function qA(s){return`${s.name}!${s.options.appId}`}const oC=1024,lC=30;class uC{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new hC(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=OT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>lC){const o=fC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){dr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=OT(),{heartbeatsToSend:e,unsentEntries:r}=cC(this._heartbeatsCache.heartbeats),o=CA(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return dr.warn(t),""}}}function OT(){return new Date().toISOString().substring(0,10)}function cC(s,t=oC){const e=[];let r=s.slice();for(const o of s){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),MT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),MT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class hC{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LA()?JR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await aC(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return VT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return VT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function MT(s){return CA(JSON.stringify({version:2,heartbeats:s})).length}function fC(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}function dC(s){Bo(new Sa("platform-logger",t=>new b2(t),"PRIVATE")),Bo(new Sa("heartbeat",t=>new uC(t),"PRIVATE")),ys(Jg,xT,s),ys(Jg,xT,"esm2020"),ys("fire-js","")}dC("");var mC="firebase",gC="12.7.0";ys(mC,gC,"app");var PT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _s,FA;(function(){var s;function t(w,I){function D(){}D.prototype=I.prototype,w.F=I.prototype,w.prototype=new D,w.prototype.constructor=w,w.D=function(O,N,k){for(var R=Array(arguments.length-2),le=2;le<arguments.length;le++)R[le-2]=arguments[le];return I.prototype[N].apply(O,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(w,I,D){D||(D=0);const O=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)O[N]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(N=0;N<16;++N)O[N]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=w.g[0],D=w.g[1],N=w.g[2];let k=w.g[3],R;R=I+(k^D&(N^k))+O[0]+3614090360&4294967295,I=D+(R<<7&4294967295|R>>>25),R=k+(N^I&(D^N))+O[1]+3905402710&4294967295,k=I+(R<<12&4294967295|R>>>20),R=N+(D^k&(I^D))+O[2]+606105819&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(I^N&(k^I))+O[3]+3250441966&4294967295,D=N+(R<<22&4294967295|R>>>10),R=I+(k^D&(N^k))+O[4]+4118548399&4294967295,I=D+(R<<7&4294967295|R>>>25),R=k+(N^I&(D^N))+O[5]+1200080426&4294967295,k=I+(R<<12&4294967295|R>>>20),R=N+(D^k&(I^D))+O[6]+2821735955&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(I^N&(k^I))+O[7]+4249261313&4294967295,D=N+(R<<22&4294967295|R>>>10),R=I+(k^D&(N^k))+O[8]+1770035416&4294967295,I=D+(R<<7&4294967295|R>>>25),R=k+(N^I&(D^N))+O[9]+2336552879&4294967295,k=I+(R<<12&4294967295|R>>>20),R=N+(D^k&(I^D))+O[10]+4294925233&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(I^N&(k^I))+O[11]+2304563134&4294967295,D=N+(R<<22&4294967295|R>>>10),R=I+(k^D&(N^k))+O[12]+1804603682&4294967295,I=D+(R<<7&4294967295|R>>>25),R=k+(N^I&(D^N))+O[13]+4254626195&4294967295,k=I+(R<<12&4294967295|R>>>20),R=N+(D^k&(I^D))+O[14]+2792965006&4294967295,N=k+(R<<17&4294967295|R>>>15),R=D+(I^N&(k^I))+O[15]+1236535329&4294967295,D=N+(R<<22&4294967295|R>>>10),R=I+(N^k&(D^N))+O[1]+4129170786&4294967295,I=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(I^D))+O[6]+3225465664&4294967295,k=I+(R<<9&4294967295|R>>>23),R=N+(I^D&(k^I))+O[11]+643717713&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^I&(N^k))+O[0]+3921069994&4294967295,D=N+(R<<20&4294967295|R>>>12),R=I+(N^k&(D^N))+O[5]+3593408605&4294967295,I=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(I^D))+O[10]+38016083&4294967295,k=I+(R<<9&4294967295|R>>>23),R=N+(I^D&(k^I))+O[15]+3634488961&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^I&(N^k))+O[4]+3889429448&4294967295,D=N+(R<<20&4294967295|R>>>12),R=I+(N^k&(D^N))+O[9]+568446438&4294967295,I=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(I^D))+O[14]+3275163606&4294967295,k=I+(R<<9&4294967295|R>>>23),R=N+(I^D&(k^I))+O[3]+4107603335&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^I&(N^k))+O[8]+1163531501&4294967295,D=N+(R<<20&4294967295|R>>>12),R=I+(N^k&(D^N))+O[13]+2850285829&4294967295,I=D+(R<<5&4294967295|R>>>27),R=k+(D^N&(I^D))+O[2]+4243563512&4294967295,k=I+(R<<9&4294967295|R>>>23),R=N+(I^D&(k^I))+O[7]+1735328473&4294967295,N=k+(R<<14&4294967295|R>>>18),R=D+(k^I&(N^k))+O[12]+2368359562&4294967295,D=N+(R<<20&4294967295|R>>>12),R=I+(D^N^k)+O[5]+4294588738&4294967295,I=D+(R<<4&4294967295|R>>>28),R=k+(I^D^N)+O[8]+2272392833&4294967295,k=I+(R<<11&4294967295|R>>>21),R=N+(k^I^D)+O[11]+1839030562&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^I)+O[14]+4259657740&4294967295,D=N+(R<<23&4294967295|R>>>9),R=I+(D^N^k)+O[1]+2763975236&4294967295,I=D+(R<<4&4294967295|R>>>28),R=k+(I^D^N)+O[4]+1272893353&4294967295,k=I+(R<<11&4294967295|R>>>21),R=N+(k^I^D)+O[7]+4139469664&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^I)+O[10]+3200236656&4294967295,D=N+(R<<23&4294967295|R>>>9),R=I+(D^N^k)+O[13]+681279174&4294967295,I=D+(R<<4&4294967295|R>>>28),R=k+(I^D^N)+O[0]+3936430074&4294967295,k=I+(R<<11&4294967295|R>>>21),R=N+(k^I^D)+O[3]+3572445317&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^I)+O[6]+76029189&4294967295,D=N+(R<<23&4294967295|R>>>9),R=I+(D^N^k)+O[9]+3654602809&4294967295,I=D+(R<<4&4294967295|R>>>28),R=k+(I^D^N)+O[12]+3873151461&4294967295,k=I+(R<<11&4294967295|R>>>21),R=N+(k^I^D)+O[15]+530742520&4294967295,N=k+(R<<16&4294967295|R>>>16),R=D+(N^k^I)+O[2]+3299628645&4294967295,D=N+(R<<23&4294967295|R>>>9),R=I+(N^(D|~k))+O[0]+4096336452&4294967295,I=D+(R<<6&4294967295|R>>>26),R=k+(D^(I|~N))+O[7]+1126891415&4294967295,k=I+(R<<10&4294967295|R>>>22),R=N+(I^(k|~D))+O[14]+2878612391&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~I))+O[5]+4237533241&4294967295,D=N+(R<<21&4294967295|R>>>11),R=I+(N^(D|~k))+O[12]+1700485571&4294967295,I=D+(R<<6&4294967295|R>>>26),R=k+(D^(I|~N))+O[3]+2399980690&4294967295,k=I+(R<<10&4294967295|R>>>22),R=N+(I^(k|~D))+O[10]+4293915773&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~I))+O[1]+2240044497&4294967295,D=N+(R<<21&4294967295|R>>>11),R=I+(N^(D|~k))+O[8]+1873313359&4294967295,I=D+(R<<6&4294967295|R>>>26),R=k+(D^(I|~N))+O[15]+4264355552&4294967295,k=I+(R<<10&4294967295|R>>>22),R=N+(I^(k|~D))+O[6]+2734768916&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~I))+O[13]+1309151649&4294967295,D=N+(R<<21&4294967295|R>>>11),R=I+(N^(D|~k))+O[4]+4149444226&4294967295,I=D+(R<<6&4294967295|R>>>26),R=k+(D^(I|~N))+O[11]+3174756917&4294967295,k=I+(R<<10&4294967295|R>>>22),R=N+(I^(k|~D))+O[2]+718787259&4294967295,N=k+(R<<15&4294967295|R>>>17),R=D+(k^(N|~I))+O[9]+3951481745&4294967295,w.g[0]=w.g[0]+I&4294967295,w.g[1]=w.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+k&4294967295}r.prototype.v=function(w,I){I===void 0&&(I=w.length);const D=I-this.blockSize,O=this.C;let N=this.h,k=0;for(;k<I;){if(N==0)for(;k<=D;)o(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<I;)if(O[N++]=w.charCodeAt(k++),N==this.blockSize){o(this,O),N=0;break}}else for(;k<I;)if(O[N++]=w[k++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=I},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var I=1;I<w.length-8;++I)w[I]=0;I=this.o*8;for(var D=w.length-8;D<w.length;++D)w[D]=I&255,I/=256;for(this.v(w),w=Array(16),I=0,D=0;D<4;++D)for(let O=0;O<32;O+=8)w[I++]=this.g[D]>>>O&255;return w};function u(w,I){var D=m;return Object.prototype.hasOwnProperty.call(D,w)?D[w]:D[w]=I(w)}function c(w,I){this.h=I;const D=[];let O=!0;for(let N=w.length-1;N>=0;N--){const k=w[N]|0;O&&k==I||(D[N]=k,O=!1)}this.g=D}var m={};function g(w){return-128<=w&&w<128?u(w,function(I){return new c([I|0],I<0?-1:0)}):new c([w|0],w<0?-1:0)}function p(w){if(isNaN(w)||!isFinite(w))return T;if(w<0)return Z(p(-w));const I=[];let D=1;for(let O=0;w>=D;O++)I[O]=w/D|0,D*=4294967296;return new c(I,0)}function E(w,I){if(w.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w.charAt(0)=="-")return Z(E(w.substring(1),I));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=p(Math.pow(I,8));let O=T;for(let k=0;k<w.length;k+=8){var N=Math.min(8,w.length-k);const R=parseInt(w.substring(k,k+N),I);N<8?(N=p(Math.pow(I,N)),O=O.j(N).add(p(R))):(O=O.j(D),O=O.add(p(R)))}return O}var T=g(0),b=g(1),M=g(16777216);s=c.prototype,s.m=function(){if(W(this))return-Z(this).m();let w=0,I=1;for(let D=0;D<this.g.length;D++){const O=this.i(D);w+=(O>=0?O:4294967296+O)*I,I*=4294967296}return w},s.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(G(this))return"0";if(W(this))return"-"+Z(this).toString(w);const I=p(Math.pow(w,6));var D=this;let O="";for(;;){const N=_t(D,I).g;D=st(D,N.j(I));let k=((D.g.length>0?D.g[0]:D.h)>>>0).toString(w);if(D=N,G(D))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},s.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function G(w){if(w.h!=0)return!1;for(let I=0;I<w.g.length;I++)if(w.g[I]!=0)return!1;return!0}function W(w){return w.h==-1}s.l=function(w){return w=st(this,w),W(w)?-1:G(w)?0:1};function Z(w){const I=w.g.length,D=[];for(let O=0;O<I;O++)D[O]=~w.g[O];return new c(D,~w.h).add(b)}s.abs=function(){return W(this)?Z(this):this},s.add=function(w){const I=Math.max(this.g.length,w.g.length),D=[];let O=0;for(let N=0;N<=I;N++){let k=O+(this.i(N)&65535)+(w.i(N)&65535),R=(k>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);O=R>>>16,k&=65535,R&=65535,D[N]=R<<16|k}return new c(D,D[D.length-1]&-2147483648?-1:0)};function st(w,I){return w.add(Z(I))}s.j=function(w){if(G(this)||G(w))return T;if(W(this))return W(w)?Z(this).j(Z(w)):Z(Z(this).j(w));if(W(w))return Z(this.j(Z(w)));if(this.l(M)<0&&w.l(M)<0)return p(this.m()*w.m());const I=this.g.length+w.g.length,D=[];for(var O=0;O<2*I;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<w.g.length;N++){const k=this.i(O)>>>16,R=this.i(O)&65535,le=w.i(N)>>>16,ke=w.i(N)&65535;D[2*O+2*N]+=R*ke,lt(D,2*O+2*N),D[2*O+2*N+1]+=k*ke,lt(D,2*O+2*N+1),D[2*O+2*N+1]+=R*le,lt(D,2*O+2*N+1),D[2*O+2*N+2]+=k*le,lt(D,2*O+2*N+2)}for(w=0;w<I;w++)D[w]=D[2*w+1]<<16|D[2*w];for(w=I;w<2*I;w++)D[w]=0;return new c(D,0)};function lt(w,I){for(;(w[I]&65535)!=w[I];)w[I+1]+=w[I]>>>16,w[I]&=65535,I++}function nt(w,I){this.g=w,this.h=I}function _t(w,I){if(G(I))throw Error("division by zero");if(G(w))return new nt(T,T);if(W(w))return I=_t(Z(w),I),new nt(Z(I.g),Z(I.h));if(W(I))return I=_t(w,Z(I)),new nt(Z(I.g),I.h);if(w.g.length>30){if(W(w)||W(I))throw Error("slowDivide_ only works with positive integers.");for(var D=b,O=I;O.l(w)<=0;)D=It(D),O=It(O);var N=Et(D,1),k=Et(O,1);for(O=Et(O,2),D=Et(D,2);!G(O);){var R=k.add(O);R.l(w)<=0&&(N=N.add(D),k=R),O=Et(O,1),D=Et(D,1)}return I=st(w,N.j(I)),new nt(N,I)}for(N=T;w.l(I)>=0;){for(D=Math.max(1,Math.floor(w.m()/I.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(D),R=k.j(I);W(R)||R.l(w)>0;)D-=O,k=p(D),R=k.j(I);G(k)&&(k=b),N=N.add(k),w=st(w,R)}return new nt(N,w)}s.B=function(w){return _t(this,w).h},s.and=function(w){const I=Math.max(this.g.length,w.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)&w.i(O);return new c(D,this.h&w.h)},s.or=function(w){const I=Math.max(this.g.length,w.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)|w.i(O);return new c(D,this.h|w.h)},s.xor=function(w){const I=Math.max(this.g.length,w.g.length),D=[];for(let O=0;O<I;O++)D[O]=this.i(O)^w.i(O);return new c(D,this.h^w.h)};function It(w){const I=w.g.length+1,D=[];for(let O=0;O<I;O++)D[O]=w.i(O)<<1|w.i(O-1)>>>31;return new c(D,w.h)}function Et(w,I){const D=I>>5;I%=32;const O=w.g.length-D,N=[];for(let k=0;k<O;k++)N[k]=I>0?w.i(k+D)>>>I|w.i(k+D+1)<<32-I:w.i(k+D);return new c(N,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,FA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=E,_s=c}).apply(typeof PT<"u"?PT:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var HA,Cu,GA,of,tp,KA,QA,YA;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,y){if(y)t:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var U=h[S];if(!(U in v))break t;v=v[U]}h=h[h.length-1],S=v[h],y=y(S),y!=S&&y!=null&&t(v,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});var u=u||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=g,p.apply(null,arguments)}function E(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,U,F){for(var it=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)it[wt-2]=arguments[wt];return y.prototype[U].apply(S,it)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function M(h){const y=h.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=h[S];return v}return[]}function G(h,y){for(let S=1;S<arguments.length;S++){const U=arguments[S];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=h.length||0;const F=U.length||0;h.length=v+F;for(let it=0;it<F;it++)h[v+it]=U[it]}else h.push(U)}}class W{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Z(h){c.setTimeout(()=>{throw h},0)}function st(){var h=w;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class lt{constructor(){this.h=this.g=null}add(y,v){const S=nt.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var nt=new W(()=>new _t,h=>h.reset());class _t{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let It,Et=!1,w=new lt,I=()=>{const h=Promise.resolve(void 0);It=()=>{h.then(D)}};function D(){for(var h;h=st();){try{h.h.call(h.g)}catch(v){Z(v)}var y=nt;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Et=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function le(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(le,N),le.prototype.init=function(h,y){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&le.Z.h.call(this)},le.prototype.h=function(){le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Y=0;function at(h,y,v,S,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=U,this.key=++Y,this.da=this.fa=!1}function yt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function jt(h,y,v){for(const S in h)y.call(v,h[S],S,h)}function Qt(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function V(h){const y={};for(const v in h)y[v]=h[v];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(h,y){let v,S;for(let U=1;U<arguments.length;U++){S=arguments[U];for(v in S)h[v]=S[v];for(let F=0;F<J.length;F++)v=J[F],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function ut(h){this.src=h,this.g={},this.h=0}ut.prototype.add=function(h,y,v,S,U){const F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);const it=Dt(h,y,S,U);return it>-1?(y=h[it],v||(y.fa=!1)):(y=new at(y,this.src,F,!!S,U),y.fa=v,h.push(y)),y};function At(h,y){const v=y.type;if(v in h.g){var S=h.g[v],U=Array.prototype.indexOf.call(S,y,void 0),F;(F=U>=0)&&Array.prototype.splice.call(S,U,1),F&&(yt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Dt(h,y,v,S){for(let U=0;U<h.length;++U){const F=h[U];if(!F.da&&F.listener==y&&F.capture==!!v&&F.ha==S)return U}return-1}var zt="closure_lm_"+(Math.random()*1e6|0),Le={};function ue(h,y,v,S,U){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ue(h,y[F],v,S,U);return null}return v=yl(v),h&&h[ke]?h.J(y,v,m(S)?!!S.capture:!1,U):xs(h,y,v,!1,S,U)}function xs(h,y,v,S,U,F){if(!y)throw Error("Invalid event type");const it=m(U)?!!U.capture:!!U;let wt=Ns(h);if(wt||(h[zt]=wt=new ut(h)),v=wt.add(y,v,S,it,F),v.proxy)return v;if(S=Oa(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)k||(U=it),U===void 0&&(U=!1),h.addEventListener(y.toString(),S,U);else if(h.attachEvent)h.attachEvent(hi(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Oa(){function h(v){return y.call(h.src,h.listener,v)}const y=gl;return h}function Ma(h,y,v,S,U){if(Array.isArray(y))for(var F=0;F<y.length;F++)Ma(h,y[F],v,S,U);else S=m(S)?!!S.capture:!!S,v=yl(v),h&&h[ke]?(h=h.i,F=String(y).toString(),F in h.g&&(y=h.g[F],v=Dt(y,v,S,U),v>-1&&(yt(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[F],h.h--)))):h&&(h=Ns(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Dt(y,v,S,U)),(v=h>-1?y[h]:null)&&Pa(v))}function Pa(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])At(y.i,h);else{var v=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(v,S,h.capture):y.detachEvent?y.detachEvent(hi(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=Ns(y))?(At(v,h),v.h==0&&(v.src=null,y[zt]=null)):yt(h)}}}function hi(h){return h in Le?Le[h]:Le[h]="on"+h}function gl(h,y){if(h.da)h=!0;else{y=new le(y,this);const v=h.listener,S=h.ha||h.src;h.fa&&Pa(h),h=v.call(S,y)}return h}function Ns(h){return h=h[zt],h instanceof ut?h:null}var pl="__closure_events_fn_"+(Math.random()*1e9>>>0);function yl(h){return typeof h=="function"?h:(h[pl]||(h[pl]=function(y){return h.handleEvent(y)}),h[pl])}function Ie(){O.call(this),this.i=new ut(this),this.M=this,this.G=null}T(Ie,O),Ie.prototype[ke]=!0,Ie.prototype.removeEventListener=function(h,y,v,S){Ma(this,h,y,v,S)};function Ue(h,y){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var U=y;y=new N(S,h),ot(y,U)}U=!0;let F,it;if(v)for(it=v.length-1;it>=0;it--)F=y.g=v[it],U=Ir(F,S,!0,y)&&U;if(F=y.g=h,U=Ir(F,S,!0,y)&&U,U=Ir(F,S,!1,y)&&U,v)for(it=0;it<v.length;it++)F=y.g=v[it],U=Ir(F,S,!1,y)&&U}Ie.prototype.N=function(){if(Ie.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let S=0;S<v.length;S++)yt(v[S]);delete h.g[y],h.h--}}this.G=null},Ie.prototype.J=function(h,y,v,S){return this.i.add(String(h),y,!1,v,S)},Ie.prototype.K=function(h,y,v,S){return this.i.add(String(h),y,!0,v,S)};function Ir(h,y,v,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let U=!0;for(let F=0;F<y.length;++F){const it=y[F];if(it&&!it.da&&it.capture==v){const wt=it.listener,_e=it.ha||it.src;it.fa&&At(h.i,it),U=wt.call(_e,S)!==!1&&U}}return U&&!S.defaultPrevented}function Cd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Ac(h){h.g=Cd(()=>{h.g=null,h.i&&(h.i=!1,Ac(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ln extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ac(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(h){O.call(this),this.h=h,this.g={}}T(Vs,O);var _l=[];function vl(h){jt(h.g,function(y,v){this.g.hasOwnProperty(v)&&Pa(y)},h),h.g={}}Vs.prototype.N=function(){Vs.Z.N.call(this),vl(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=c.JSON.stringify,Dd=c.JSON.parse,Sc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function bc(){}function Ic(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qe(){N.call(this,"d")}T(Qe,N);function Pn(){N.call(this,"c")}T(Pn,N);var ye={},wc=null;function ka(){return wc=wc||new Ie}ye.Ia="serverreachability";function Rc(h){N.call(this,ye.Ia,h)}T(Rc,N);function fi(h){const y=ka();Ue(y,new Rc(y))}ye.STAT_EVENT="statevent";function Os(h,y){N.call(this,ye.STAT_EVENT,h),this.stat=y}T(Os,N);function we(h){const y=ka();Ue(y,new Os(y,h))}ye.Ja="timingevent";function di(h,y){N.call(this,ye.Ja,h),this.size=y}T(di,N);function mi(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function xd(h,y,v,S,U,F){h.info(function(){if(h.g)if(F){var it="",wt=F.split("&");for(let Ht=0;Ht<wt.length;Ht++){var _e=wt[Ht].split("=");if(_e.length>1){const ce=_e[0];_e=_e[1];const zn=ce.split("_");it=zn.length>=2&&zn[1]=="type"?it+(ce+"="+_e+"&"):it+(ce+"=redacted&")}}}else it=null;else it=F;return"XMLHTTP REQ ("+S+") [attempt "+U+"]: "+y+`
`+v+`
`+it})}function Cc(h,y,v,S,U,F,it){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+U+"]: "+y+`
`+v+`
`+F+" "+it})}function gi(h,y,v,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Nd(h,v)+(S?" "+S:"")})}function Ms(h,y){h.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function Nd(h,y){if(!h.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(h=0;h<F.length;h++)if(Array.isArray(F[h])){var v=F[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var U=S[0];if(U!="noop"&&U!="stop"&&U!="close")for(let it=1;it<S.length;it++)S[it]=""}}}}return wr(F)}catch{return y}}var Ps={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},El={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tl;function ks(){}T(ks,bc),ks.prototype.g=function(){return new XMLHttpRequest},Tl=new ks;function Hi(h){return encodeURIComponent(String(h))}function Dc(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Jn(h,y,v,S){this.j=h,this.i=y,this.l=v,this.S=S||1,this.V=new Vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wn}function Wn(){this.i=null,this.g="",this.h=!1}var Re={},qe={};function pi(h,y,v){h.M=1,h.A=Ls(De(y)),h.u=v,h.R=!0,La(h,null)}function La(h,y){h.F=Date.now(),yi(h),h.B=De(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),ja(v.i,"t",S),h.C=0,v=h.j.L,h.h=new Wn,h.g=Hc(h.j,v?y:null,!h.u),h.P>0&&(h.O=new ln(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,S=h.ba;var U="readystatechange";Array.isArray(U)||(U&&(_l[0]=U.toString()),U=_l);for(let F=0;F<U.length;F++){const it=ue(v,U[F],S||y.handleEvent,!1,y.h||y);if(!it)break;y.g[it.key]=it}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),fi(),xd(h.i,h.v,h.B,h.l,h.S,h.u)}Jn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ei(h)==3?y.j():this.Y(h)},Jn.prototype.Y=function(h){try{if(h==this.g)t:{const wt=ei(this.g),_e=this.g.ya(),Ht=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||Ye(this.g)))){this.K||wt!=4||_e==7||(_e==8||Ht<=0?fi(3):fi(2)),_i(this);var y=this.g.ca();this.X=y;var v=Vd(this);if(this.o=y==200,Cc(this.i,this.v,this.B,this.l,this.S,wt,y),this.o){if(this.U&&!this.L){e:{if(this.g){var S,U=this.g;if((S=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var F=S;break e}}F=null}if(h=F)gi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vi(this,h);else{this.o=!1,this.m=3,we(12),Tn(this),kn(this);break t}}if(this.R){h=!0;let ce;for(;!this.K&&this.C<v.length;)if(ce=Nc(this,v),ce==qe){wt==4&&(this.m=4,we(14),h=!1),gi(this.i,this.l,null,"[Incomplete Response]");break}else if(ce==Re){this.m=4,we(15),gi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else gi(this.i,this.l,ce,null),vi(this,ce);if(xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||v.length!=0||this.h.h||(this.m=1,we(16),h=!1),this.o=this.o&&h,!h)gi(this.i,this.l,v,"[Invalid Chunked Response]"),Tn(this),kn(this);else if(v.length>0&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.aa&&!it.P&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),kl(it),it.P=!0,we(11))}}else gi(this.i,this.l,v,null),vi(this,v);wt==4&&Tn(this),this.o&&!this.K&&(wt==4?Bc(this.j,this):(this.o=!1,yi(this)))}else Ki(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),Tn(this),kn(this)}}}catch{}};function Vd(h){if(!xc(h))return h.g.la();const y=Ye(h.g);if(y==="")return"";let v="";const S=y.length,U=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Tn(h),kn(h),"";h.h.i=new c.TextDecoder}for(let F=0;F<S;F++)h.h.h=!0,v+=h.h.i.decode(y[F],{stream:!(U&&F==S-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function xc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Nc(h,y){var v=h.C,S=y.indexOf(`
`,v);return S==-1?qe:(v=Number(y.substring(v,S)),isNaN(v)?Re:(S+=1,S+v>y.length?qe:(y=y.slice(S,S+v),h.C=S+v,y)))}Jn.prototype.cancel=function(){this.K=!0,Tn(this)};function yi(h){h.T=Date.now()+h.H,Ua(h,h.H)}function Ua(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=mi(p(h.aa,h),y)}function _i(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Jn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ms(this.i,this.B),this.M!=2&&(fi(),we(17)),Tn(this),this.m=2,kn(this)):Ua(this,this.T-h)};function kn(h){h.j.I==0||h.K||Bc(h.j,h)}function Tn(h){_i(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,vl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function vi(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Ti(v.h,h))){if(!h.L&&Ti(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var U=S;if(U[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ka(v),Mr(v);else break t;Hs(v),we(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=mi(p(v.Va,v),6e3));Ei(v.h)<=1&&v.ta&&(v.ta=void 0)}else Ri(v,11)}else if((h.L||v.g==h)&&Ka(v),!R(y))for(U=v.Ba.g.parse(y),y=0;y<U.length;y++){let Ht=U[y];const ce=Ht[0];if(!(ce<=v.K))if(v.K=ce,Ht=Ht[1],v.I==2)if(Ht[0]=="c"){v.M=Ht[1],v.ba=Ht[2];const zn=Ht[3];zn!=null&&(v.ka=zn,v.j.info("VER="+v.ka));const Ci=Ht[4];Ci!=null&&(v.za=Ci,v.j.info("SVER="+v.za));const ni=Ht[5];ni!=null&&typeof ni=="number"&&ni>0&&(S=1.5*ni,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ii=h.g;if(ii){const Gs=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var F=S.h;F.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(bl(F,F.h),F.h=null))}if(S.G){const Qa=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Qa&&(S.wa=Qa,Yt(S.J,S.G,Qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var it=h;if(S.na=Fc(S,S.L?S.ba:null,S.W),it.L){Il(S.h,it);var wt=it,_e=S.O;_e&&(wt.H=_e),wt.D&&(_i(wt),yi(wt)),S.g=it}else Uc(S);v.i.length>0&&wi(v)}else Ht[0]!="stop"&&Ht[0]!="close"||Ri(v,7);else v.I==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Ri(v,7):Ml(v):Ht[0]!="noop"&&v.l&&v.l.qa(Ht),v.A=0)}}fi(4)}catch{}}var Ce=class{constructor(h,y){this.g=h,this.map=y}};function Al(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ei(h){return h.h?1:h.g?h.g.size:0}function Ti(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function bl(h,y){h.g?h.g.add(y):h.h=y}function Il(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Al.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function wl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return M(h.i)}var Vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function za(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let U,F=null;S>=0?(U=h[v].substring(0,S),F=h[v].substring(S+1)):U=h[v],y(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function An(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof An?(this.l=h.l,Fe(this,h.j),this.o=h.o,this.g=h.g,Rr(this,h.u),this.h=h.h,Rl(this,kc(h.i)),this.m=h.m):h&&(y=String(h).match(Vc))?(this.l=!1,Fe(this,y[1]||"",!0),this.o=Ai(y[2]||""),this.g=Ai(y[3]||"",!0),Rr(this,y[4]),this.h=Ai(y[5]||"",!0),Rl(this,y[6]||"",!0),this.m=Ai(y[7]||"")):(this.l=!1,this.i=new Dr(null,this.l))}An.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Us(y,Ba,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Us(y,Ba,!0),"@"),h.push(Hi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Us(v,v.charAt(0)=="/"?Cl:Oc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Us(v,Mc)),h.join("")},An.prototype.resolve=function(h){const y=De(this);let v=!!h.j;v?Fe(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var S=h.h;if(v)Rr(y,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var U=y.h.lastIndexOf("/");U!=-1&&(S=y.h.slice(0,U+1)+S)}if(U=S,U==".."||U==".")S="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){S=U.lastIndexOf("/",0)==0,U=U.split("/");const F=[];for(let it=0;it<U.length;){const wt=U[it++];wt=="."?S&&it==U.length&&F.push(""):wt==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),S&&it==U.length&&F.push("")):(F.push(wt),S=!0)}S=F.join("/")}else S=U}return v?y.h=S:v=h.i.toString()!=="",v?Rl(y,kc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function De(h){return new An(h)}function Fe(h,y,v){h.j=v?Ai(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Rr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Rl(h,y,v){y instanceof Dr?(h.i=y,qa(h.i,h.l)):(v||(y=Us(y,Cr)),h.i=new Dr(y,h.l))}function Yt(h,y,v){h.i.set(y,v)}function Ls(h){return Yt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ai(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Us(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,fn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function fn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ba=/[#\/\?@]/g,Oc=/[#\?:]/g,Cl=/[#\?]/g,Cr=/[#\?@]/g,Mc=/#/g;function Dr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function dn(h){h.g||(h.g=new Map,h.h=0,h.i&&za(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}s=Dr.prototype,s.add=function(h,y){dn(this),this.i=null,h=xr(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function Pc(h,y){dn(h),y=xr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Dl(h,y){return dn(h),y=xr(h,y),h.g.has(y)}s.forEach=function(h,y){dn(this),this.g.forEach(function(v,S){v.forEach(function(U){h.call(y,U,S,this)},this)},this)};function xl(h,y){dn(h);let v=[];if(typeof y=="string")Dl(h,y)&&(v=v.concat(h.g.get(xr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}s.set=function(h,y){return dn(this),this.i=null,h=xr(this,h),Dl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=xl(this,h),h.length>0?String(h[0]):y):y};function ja(h,y,v){Pc(h,y),v.length>0&&(h.i=null,h.g.set(xr(h,y),M(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const U=Hi(v);v=xl(this,v);for(let F=0;F<v.length;F++){let it=U;v[F]!==""&&(it+="="+Hi(v[F])),h.push(it)}}return this.i=h.join("&")};function kc(h){const y=new Dr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function xr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function qa(h,y){y&&!h.j&&(dn(h),h.i=null,h.g.forEach(function(v,S){const U=S.toLowerCase();S!=U&&(Pc(this,S),ja(this,U,v))},h)),h.j=y}function Zn(h,y){const v=new $n;if(c.Image){const S=new Image;S.onload=E(Ln,v,"TestLoadImage: loaded",!0,y,S),S.onerror=E(Ln,v,"TestLoadImage: error",!1,y,S),S.onabort=E(Ln,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=E(Ln,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function Nl(h,y){const v=new $n,S=new AbortController,U=setTimeout(()=>{S.abort(),Ln(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(F=>{clearTimeout(U),F.ok?Ln(v,"TestPingServer: ok",!0,y):Ln(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),Ln(v,"TestPingServer: error",!1,y)})}function Ln(h,y,v,S,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),S(v)}catch{}}function Nr(){this.g=new Sc}function Si(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Si,bc),Si.prototype.g=function(){return new zs(this.i,this.h)};function zs(h,y){Ie.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(zs,Ie),s=zs.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ti(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Vr(this):ti(this),this.readyState==3&&Fa(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Vr(this))},s.Na=function(h){this.g&&(this.response=h,Vr(this))},s.ga=function(){this.g&&Vr(this)};function Vr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ti(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function ti(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let y="";return jt(h,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function Bs(h,y,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=Un(v),typeof h=="string"?v!=null&&Hi(v):Yt(h,y,v))}function te(h){Ie.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(te,Ie);var bi=/^https?$/i,Vl=["POST","PUT"];s=te.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tl.g(),this.g.onreadystatechange=b(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(F){js(this,F);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var U in S)v.set(U,S[U]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())v.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(F=>F.toLowerCase()=="content-type"),U=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Vl,y,void 0)>=0)||S||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,it]of v)this.g.setRequestHeader(F,it);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(F){js(this,F)}};function js(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ol(h),Gi(h)}function Ol(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ue(this,"complete"),Ue(this,"abort"),Gi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),te.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?qs(this):this.Xa())},s.Xa=function(){qs(this)};function qs(h){if(h.h&&typeof u<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ue(h,"readystatechange"),ei(h)==4){h.h=!1;try{const F=h.ca();t:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break t;default:y=!1}var v;if(!(v=y)){var S;if(S=F===0){let it=String(h.D).match(Vc)[1]||null;!it&&c.self&&c.self.location&&(it=c.self.location.protocol.slice(0,-1)),S=!bi.test(it?it.toLowerCase():"")}v=S}if(v)Ue(h,"complete"),Ue(h,"success");else{h.o=6;try{var U=ei(h)>2?h.g.statusText:""}catch{U=""}h.l=U+" ["+h.ca()+"]",Ol(h)}}finally{Gi(h)}}}}function Gi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Ue(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Dd(y)}};function Ye(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(h){const y={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var v=Dc(h[S]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const F=y[U]||[];y[U]=F,F.push(v)}Qt(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Or(h){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ii("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ii("baseRetryDelayMs",5e3,h),this.Za=Ii("retryDelaySeedMs",1e4,h),this.Ta=Ii("forwardChannelMaxRetries",2,h),this.va=Ii("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Al(h&&h.concurrentRequestLimit),this.Ba=new Nr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Or.prototype,s.ka=8,s.I=1,s.connect=function(h,y,v,S){we(0),this.W=h,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=Fc(this,null,this.W),wi(this)};function Ml(h){if(Ha(h),h.I==3){var y=h.V++,v=De(h.J);if(Yt(v,"SID",h.M),Yt(v,"RID",y),Yt(v,"TYPE","terminate"),Fs(h,v),y=new Jn(h,h.j,y),y.M=2,y.A=Ls(De(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Hc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),yi(y)}qc(h)}function Mr(h){h.g&&(kl(h),h.g.cancel(),h.g=null)}function Ha(h){Mr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ka(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function wi(h){if(!Sl(h.h)&&!h.m){h.m=!0;var y=h.Ea;It||I(),Et||(It(),Et=!0),w.add(y,h),h.D=0}}function Ga(h,y){return Ei(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=mi(p(h.Ea,h,y),jc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const U=new Jn(this,this.j,h);let F=this.o;if(this.U&&(F?(F=V(F),ot(F,this.U)):F=this.U),this.u!==null||this.R||(U.J=F,F=null),this.S)t:{for(var y=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break t}if(y===4096||v===this.i.length-1){y=v+1;break t}}y=1e3}else y=1e3;y=Lc(this,U,y),v=De(this.J),Yt(v,"RID",h),Yt(v,"CVER",22),this.G&&Yt(v,"X-HTTP-Session-Id",this.G),Fs(this,v),F&&(this.R?y="headers="+Hi(Un(F))+"&"+y:this.u&&Bs(v,this.u,F)),bl(this.h,U),this.Ra&&Yt(v,"TYPE","init"),this.S?(Yt(v,"$req",y),Yt(v,"SID","null"),U.U=!0,pi(U,v,null)):pi(U,v,y),this.I=2}}else this.I==3&&(h?Pl(this,h):this.i.length==0||Sl(this.h)||Pl(this))};function Pl(h,y){var v;y?v=y.l:v=h.V++;const S=De(h.J);Yt(S,"SID",h.M),Yt(S,"RID",v),Yt(S,"AID",h.K),Fs(h,S),h.u&&h.o&&Bs(S,h.u,h.o),v=new Jn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Lc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),bl(h.h,v),pi(v,S,y)}function Fs(h,y){h.H&&jt(h.H,function(v,S){Yt(y,S,v)}),h.l&&jt({},function(v,S){Yt(y,S,v)})}function Lc(h,y,v){v=Math.min(h.i.length,v);const S=h.l?p(h.l.Ka,h.l,h):null;t:{var U=h.i;let wt=-1;for(;;){const _e=["count="+v];wt==-1?v>0?(wt=U[0].g,_e.push("ofs="+wt)):wt=0:_e.push("ofs="+wt);let Ht=!0;for(let ce=0;ce<v;ce++){var F=U[ce].g;const zn=U[ce].map;if(F-=wt,F<0)wt=Math.max(0,U[ce].g-100),Ht=!1;else try{F="req"+F+"_"||"";try{var it=zn instanceof Map?zn:Object.entries(zn);for(const[Ci,ni]of it){let ii=ni;m(ni)&&(ii=wr(ni)),_e.push(F+Ci+"="+encodeURIComponent(ii))}}catch(Ci){throw _e.push(F+"type="+encodeURIComponent("_badmap")),Ci}}catch{S&&S(zn)}}if(Ht){it=_e.join("&");break t}}it=void 0}return h=h.i.splice(0,v),y.G=h,it}function Uc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;It||I(),Et||(It(),Et=!0),w.add(y,h),h.A=0}}function Hs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=mi(p(h.Da,h),jc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,zc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=mi(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),Mr(this),zc(this))};function kl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function zc(h){h.g=new Jn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=De(h.na);Yt(y,"RID","rpc"),Yt(y,"SID",h.M),Yt(y,"AID",h.K),Yt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Yt(y,"TO",h.ia),Yt(y,"TYPE","xmlhttp"),Fs(h,y),h.u&&h.o&&Bs(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Ls(De(y)),v.u=null,v.R=!0,La(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Mr(this),Hs(this),we(19))};function Ka(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Bc(h,y){var v=null;if(h.g==y){Ka(h),kl(h),h.g=null;var S=2}else if(Ti(h.h,y))v=y.G,Il(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var U=h.D;S=ka(),Ue(S,new di(S,v)),wi(h)}else Uc(h);else if(U=y.m,U==3||U==0&&y.X>0||!(S==1&&Ga(h,y)||S==2&&Hs(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),U){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function jc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function Ri(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),S=h.Ua;const U=!S;S=new An(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fe(S,"https"),Ls(S),U?Zn(S.toString(),v):Nl(S.toString(),v)}else we(2);h.I=0,h.l&&h.l.pa(y),qc(h),Ha(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function qc(h){if(h.I=0,h.ja=[],h.l){const y=wl(h.h);(y.length!=0||h.i.length!=0)&&(G(h.ja,y),G(h.ja,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.oa()}}function Fc(h,y,v){var S=v instanceof An?De(v):new An(v);if(S.g!="")y&&(S.g=y+"."+S.g),Rr(S,S.u);else{var U=c.location;S=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;const F=new An(null);S&&Fe(F,S),y&&(F.g=y),U&&Rr(F,U),v&&(F.h=v),S=F}return v=h.G,y=h.wa,v&&y&&Yt(S,v,y),Yt(S,"VER",h.ka),Fs(h,S),S}function Hc(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new te(new Si({ab:v})):new te(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gc(){}s=Gc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Pr(){}Pr.prototype.g=function(h,y){return new un(h,y)};function un(h,y){Ie.call(this),this.g=new Or(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Qi(this)}T(un,Ie),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Ml(this.g)},un.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=wr(h),h=v);y.i.push(new Ce(y.Ya++,h)),y.I==3&&wi(y)},un.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,un.Z.N.call(this)};function Kc(h){Qe.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){t:{for(const v in y){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Kc,Qe);function Qc(){Pn.call(this),this.status=1}T(Qc,Pn);function Qi(h){this.g=h}T(Qi,Gc),Qi.prototype.ra=function(){Ue(this.g,"a")},Qi.prototype.qa=function(h){Ue(this.g,new Kc(h))},Qi.prototype.pa=function(h){Ue(this.g,new Qc)},Qi.prototype.oa=function(){Ue(this.g,"b")},Pr.prototype.createWebChannel=Pr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,YA=function(){return new Pr},QA=function(){return ka()},KA=ye,tp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ps.NO_ERROR=0,Ps.TIMEOUT=8,Ps.HTTP_ERROR=6,of=Ps,El.COMPLETE="complete",GA=El,Ic.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.J,Cu=Ic,te.prototype.listenOnce=te.prototype.K,te.prototype.getLastError=te.prototype.Ha,te.prototype.getLastErrorCode=te.prototype.ya,te.prototype.getStatus=te.prototype.ca,te.prototype.getResponseJson=te.prototype.La,te.prototype.getResponseText=te.prototype.la,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Fa,HA=te}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const kT="@firebase/firestore",LT="4.9.3";class nn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let ll="12.7.0";const ba=new Mp("@firebase/firestore");function xo(){return ba.logLevel}function tt(s,...t){if(ba.logLevel<=kt.DEBUG){const e=t.map(Lp);ba.debug(`Firestore (${ll}): ${s}`,...e)}}function Te(s,...t){if(ba.logLevel<=kt.ERROR){const e=t.map(Lp);ba.error(`Firestore (${ll}): ${s}`,...e)}}function Ku(s,...t){if(ba.logLevel<=kt.WARN){const e=t.map(Lp);ba.warn(`Firestore (${ll}): ${s}`,...e)}}function Lp(s){if(typeof s=="string")return s;try{return(function(e){return JSON.stringify(e)})(s)}catch{return s}}function ct(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,XA(s,r,e)}function XA(s,t,e){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw Te(r),new Error(r)}function mt(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||XA(t,o,r)}function ft(s,t){return s}const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends _r{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class pC{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(nn.UNAUTHENTICATED)))}shutdown(){}}class _C{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){mt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new fr,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new fr)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new pC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return mt(t===null||typeof t=="string",2055,{h:t}),new nn(t)}}class vC{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EC{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new vC(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class UT{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TC{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){mt(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new UT(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(mt(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new UT(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function AC(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}class Up{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=AC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function St(s,t){return s<t?-1:s>t?1:0}function ep(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Lg(o)===Lg(u)?St(o,u):Lg(o)?1:-1}return St(s.length,t.length)}const SC=55296,bC=57343;function Lg(s){const t=s.charCodeAt(0);return t>=SC&&t<=bC}function jo(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function $A(s){return s+"\0"}const zT="__name__";class Oi{constructor(t,e,r){e===void 0?e=0:e>t.length&&ct(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&ct(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Oi.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return St(t.length,e.length)}static compareSegments(t,e){const r=Oi.isNumericId(t),o=Oi.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Oi.extractNumericId(t).compare(Oi.extractNumericId(e)):ep(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return _s.fromString(t.substring(4,t.length-2))}}class Kt extends Oi{construct(t,e,r){return new Kt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new et(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Kt(e)}static emptyPath(){return new Kt([])}}const IC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class de extends Oi{construct(t,e,r){return new de(t,e,r)}static isValidIdentifier(t){return IC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),de.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zT}static keyField(){return new de([zT])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new et(Q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new et(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new et(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new et(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new de(e)}static emptyPath(){return new de([])}}class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Kt.fromString(t))}static fromName(t){return new rt(Kt.fromString(t).popFirst(5))}static empty(){return new rt(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Kt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Kt(t.slice()))}}function JA(s,t,e){if(!e)throw new et(Q.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function wC(s,t,e,r){if(t===!0&&r===!0)throw new et(Q.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function BT(s){if(!rt.isDocumentKey(s))throw new et(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function jT(s){if(rt.isDocumentKey(s))throw new et(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function WA(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Wf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ct(12329,{type:typeof s})}function ui(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new et(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Wf(s);throw new et(Q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function Pe(s,t){const e={typeString:s};return t&&(e.value=t),e}function cc(s,t){if(!WA(s))throw new et(Q.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new et(Q.INVALID_ARGUMENT,e);return!0}const qT=-62135596800,FT=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*FT);return new Jt(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new et(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new et(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<qT)throw new et(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new et(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/FT}_compareTo(t){return this.seconds===t.seconds?St(this.nanoseconds,t.nanoseconds):St(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(cc(t,Jt._jsonSchema))return new Jt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-qT;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Pe("string",Jt._jsonSchemaVersion),seconds:Pe("number"),nanoseconds:Pe("number")};class pt{static fromTimestamp(t){return new pt(t)}static min(){return new pt(new Jt(0,0))}static max(){return new pt(new Jt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const qo=-1;class If{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function np(s){return s.fields.find((t=>t.kind===2))}function ua(s){return s.fields.filter((t=>t.kind!==2))}If.UNKNOWN_ID=-1;class lf{constructor(t,e){this.fieldPath=t,this.kind=e}}class Qu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Qu(0,Mn.min())}}function ZA(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=pt.fromTimestamp(r===1e9?new Jt(e+1,0):new Jt(e,r));return new Mn(o,rt.empty(),t)}function tS(s){return new Mn(s.readTime,s.key,qo)}class Mn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Mn(pt.min(),rt.empty(),qo)}static max(){return new Mn(pt.max(),rt.empty(),qo)}}function zp(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(s.documentKey,t.documentKey),e!==0?e:St(s.largestBatchId,t.largestBatchId))}const eS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function ws(s){if(s.code!==Q.FAILED_PRECONDITION||s.message!==eS)throw s;tt("LocalStore","Unexpectedly lost primary lease")}class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new L(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof L?e:L.resolve(e)}catch(e){return L.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):L.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):L.reject(e)}static resolve(t){return new L(((e,r)=>{e(t)}))}static reject(t){return new L(((e,r)=>{r(t)}))}static waitFor(t){return new L(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(g=>r(g)))})),c=!0,u===o&&e()}))}static or(t){let e=L.resolve(!1);for(const r of t)e=e.next((o=>o?L.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new L(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const p=g;e(t[p]).next((E=>{c[p]=E,++m,m===u&&r(c)}),(E=>o(E)))}}))}static doWhile(t,e){return new L(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}const xn="SimpleDb";class Zf{static open(t,e,r,o){try{return new Zf(e,t.transaction(o,r))}catch(u){throw new Mu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new fr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new Mu(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Bp(r.target.error);this.S.reject(new Mu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(xn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new CC(e)}}class vs{static delete(t){return tt(xn,"Removing database:",t),ha(xA().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!LA())return!1;if(vs.F())return!0;const t=Be(),e=vs.M(t),r=0<e&&e<10,o=iS(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,vs.M(Be())===12.2&&Te("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(xn,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;e(c)},o.onblocked=()=>{r(new Mu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new et(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new et(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Mu(t,c))},o.onupgradeneeded=u=>{tt(xn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{tt(xn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=Zf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((p=>(m.C(),p))).catch((p=>(m.abort(p),L.reject(p)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,p=g.name!=="FirebaseError"&&c<3;if(tt(xn,"Transaction failed with error:",g.message,"Retrying:",p),this.close(),!p)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function iS(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class RC{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ha(this.U.delete())}}class Mu extends et{constructor(t,e){super(Q.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Rs(s){return s.name==="IndexedDbTransactionError"}class CC{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(xn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(xn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ha(r)}add(t){return tt(xn,"ADD",this.store.name,t,t),ha(this.store.add(t))}get(t){return ha(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(xn,"GET",this.store.name,t,e),e)))}delete(t){return tt(xn,"DELETE",this.store.name,t),ha(this.store.delete(t))}count(){return tt(xn,"COUNT",this.store.name),ha(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new L(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new L(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,e){tt(xn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new L(((r,o)=>{e.onerror=u=>{const c=Bp(u.target.error);o(c)},e.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,e){const r=[];return new L(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new RC(m),p=e(m.primaryKey,m.value,g);if(p instanceof L){const E=p.catch((T=>(g.done(),L.reject(T))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>L.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ha(s){return new L(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Bp(r.target.error);e(o)}}))}let HT=!1;function Bp(s){const t=vs.M(Be());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HT||(HT=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Pu="IndexBackfiller";class DC{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(Pu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(Pu,`Documents written: ${e}`)}catch(e){Rs(e)?tt(Pu,"Ignoring IndexedDB error during index backfill: ",e):await ws(e)}await this.re(6e4)}))}}class xC{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return L.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return tt(Pu,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(tt(Pu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const c=tS(u);zp(c,r)>0&&(r=c)})),new Mn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}class vn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}vn.ce=-1;const ya=-1;function td(s){return s==null}function Yu(s){return s===0&&1/s==-1/0}function rS(s){return typeof s=="number"&&Number.isInteger(s)&&!Yu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const wf="";function on(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=GT(t)),t=NC(s.get(e),t);return GT(t)}function NC(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case wf:e+="";break;default:e+=u}}return e}function GT(s){return s+wf+""}function ki(s){const t=s.length;if(mt(t>=2,64408,{path:s}),t===2)return mt(s.charAt(0)===wf&&s.charAt(1)==="",56145,{path:s}),Kt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(wf,u);switch((c<0||c>e)&&ct(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ct(61167,{path:s})}u=c+2}return new Kt(r)}const ca="remoteDocuments",hc="owner",bo="owner",Xu="mutationQueues",VC="userId",oi="mutations",KT="batchId",ga="userMutationsIndex",QT=["userId","batchId"];function uf(s,t){return[s,on(t)]}function sS(s,t,e){return[s,on(t),e]}const OC={},Fo="documentMutations",Rf="remoteDocumentsV14",MC=["prefixPath","collectionGroup","readTime","documentId"],cf="documentKeyIndex",PC=["prefixPath","collectionGroup","documentId"],aS="collectionGroupIndex",kC=["collectionGroup","readTime","prefixPath","documentId"],$u="remoteDocumentGlobal",ip="remoteDocumentGlobalKey",Ho="targets",oS="queryTargetsIndex",LC=["canonicalId","targetId"],Go="targetDocuments",UC=["targetId","path"],jp="documentTargetsIndex",zC=["path","targetId"],Cf="targetGlobalKey",_a="targetGlobal",Ju="collectionParents",BC=["collectionId","parent"],Ko="clientMetadata",jC="clientId",ed="bundles",qC="bundleId",nd="namedQueries",FC="name",qp="indexConfiguration",HC="indexId",rp="collectionGroupIndex",GC="collectionGroup",ku="indexState",KC=["indexId","uid"],lS="sequenceNumberIndex",QC=["uid","sequenceNumber"],Lu="indexEntries",YC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],uS="documentKeyIndex",XC=["indexId","uid","orderedDocumentKey"],id="documentOverlays",$C=["userId","collectionPath","documentId"],sp="collectionPathOverlayIndex",JC=["userId","collectionPath","largestBatchId"],cS="collectionGroupOverlayIndex",WC=["userId","collectionGroup","largestBatchId"],Fp="globals",ZC="name",hS=[Xu,oi,Fo,ca,Ho,hc,_a,Go,Ko,$u,Ju,ed,nd],tD=[...hS,id],fS=[Xu,oi,Fo,Rf,Ho,hc,_a,Go,Ko,$u,Ju,ed,nd,id],dS=fS,Hp=[...dS,qp,ku,Lu],eD=Hp,mS=[...Hp,Fp],nD=mS;class ap extends nS{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function je(s,t){const e=ft(s);return vs.O(e.le,t)}function YT(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function Cs(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function gS(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class se{constructor(t,e){this.comparator=t,this.root=e||Ze.EMPTY}insert(t,e){return new se(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(t){return new se(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Wh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Wh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Wh(this.root,t,this.comparator,!0)}}class Wh{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ze{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Ze.RED,this.left=o??Ze.EMPTY,this.right=u??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Ze(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Ze.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ct(27949);return t+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw ct(57766)}get value(){throw ct(16141)}get color(){throw ct(16727)}get left(){throw ct(29726)}get right(){throw ct(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Ze(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zt{constructor(t){this.comparator=t,this.data=new se(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new XT(this.data.getIterator())}getIteratorFrom(t){return new XT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class XT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Io(s){return s.hasNext()?s.getNext():void 0}class En{constructor(t){this.fields=t,t.sort(de.comparator)}static empty(){return new En([])}unionWith(t){let e=new Zt(de.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new En(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return jo(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}class pS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Se{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new pS("Invalid base64 string: "+u):u}})(t);return new Se(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Se(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return St(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Se.EMPTY_BYTE_STRING=new Se("");const iD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(s){if(mt(!!s,39018),typeof s=="string"){let t=0;const e=iD.exec(s);if(mt(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fe(s.seconds),nanos:fe(s.nanos)}}function fe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function gr(s){return typeof s=="string"?Se.fromBase64String(s):Se.fromUint8Array(s)}const yS="server_timestamp",_S="__type__",vS="__previous_value__",ES="__local_write_time__";function Gp(s){return(s?.mapValue?.fields||{})[_S]?.stringValue===yS}function rd(s){const t=s.mapValue.fields[vS];return Gp(t)?rd(t):t}function Wu(s){const t=mr(s.mapValue.fields[ES].timestampValue);return new Jt(t.seconds,t.nanos)}class rD{constructor(t,e,r,o,u,c,m,g,p,E){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=E}}const Df="(default)";class Ia{constructor(t,e){this.projectId=t,this.database=e||Df}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database===Df}isEqual(t){return t instanceof Ia&&t.projectId===this.projectId&&t.database===this.database}}const Kp="__type__",TS="__max__",ms={mapValue:{fields:{__type__:{stringValue:TS}}}},Qp="__vector__",Qo="value",hf={nullValue:"NULL_VALUE"};function Ts(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Gp(s)?4:AS(s)?9007199254740991:sd(s)?10:11:ct(28295,{value:s})}function Fi(s,t){if(s===t)return!0;const e=Ts(s);if(e!==Ts(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Wu(s).isEqual(Wu(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=mr(o.timestampValue),m=mr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return gr(o.bytesValue).isEqual(gr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return fe(o.geoPointValue.latitude)===fe(u.geoPointValue.latitude)&&fe(o.geoPointValue.longitude)===fe(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return fe(o.integerValue)===fe(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=fe(o.doubleValue),m=fe(u.doubleValue);return c===m?Yu(c)===Yu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return jo(s.arrayValue.values||[],t.arrayValue.values||[],Fi);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(YT(c)!==YT(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Fi(c[g],m[g])))return!1;return!0})(s,t);default:return ct(52216,{left:s})}}function Zu(s,t){return(s.values||[]).find((e=>Fi(e,t)))!==void 0}function As(s,t){if(s===t)return 0;const e=Ts(s),r=Ts(t);if(e!==r)return St(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return St(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=fe(u.integerValue||u.doubleValue),g=fe(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return $T(s.timestampValue,t.timestampValue);case 4:return $T(Wu(s),Wu(t));case 5:return ep(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=gr(u),g=gr(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const E=St(m[p],g[p]);if(E!==0)return E}return St(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=St(fe(u.latitude),fe(c.latitude));return m!==0?m:St(fe(u.longitude),fe(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return JT(s.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},p=m[Qo]?.arrayValue,E=g[Qo]?.arrayValue,T=St(p?.values?.length||0,E?.values?.length||0);return T!==0?T:JT(p,E)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===ms.mapValue&&c===ms.mapValue)return 0;if(u===ms.mapValue)return 1;if(c===ms.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),p=c.fields||{},E=Object.keys(p);g.sort(),E.sort();for(let T=0;T<g.length&&T<E.length;++T){const b=ep(g[T],E[T]);if(b!==0)return b;const M=As(m[g[T]],p[E[T]]);if(M!==0)return M}return St(g.length,E.length)})(s.mapValue,t.mapValue);default:throw ct(23264,{he:e})}}function $T(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return St(s,t);const e=mr(s),r=mr(t),o=St(e.seconds,r.seconds);return o!==0?o:St(e.nanos,r.nanos)}function JT(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=As(e[o],r[o]);if(u)return u}return St(e.length,r.length)}function Yo(s){return op(s)}function op(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=mr(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return gr(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return rt.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=op(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${op(e.fields[c])}`;return o+"}"})(s.mapValue):ct(61005,{value:s})}function ff(s){switch(Ts(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=rd(s);return t?16+ff(t):16;case 5:return 2*s.stringValue.length;case 6:return gr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+ff(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Cs(r.fields,((u,c)=>{o+=u.length+ff(c)})),o})(s.mapValue);default:throw ct(13486,{value:s})}}function tc(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function lp(s){return!!s&&"integerValue"in s}function ec(s){return!!s&&"arrayValue"in s}function WT(s){return!!s&&"nullValue"in s}function ZT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function df(s){return!!s&&"mapValue"in s}function sd(s){return(s?.mapValue?.fields||{})[Kp]?.stringValue===Qp}function Uu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Cs(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Uu(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Uu(s.arrayValue.values[e]);return t}return{...s}}function AS(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===TS}const SS={mapValue:{fields:{[Kp]:{stringValue:Qp},[Qo]:{arrayValue:{}}}}};function sD(s){return"nullValue"in s?hf:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?tc(Ia.empty(),rt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?sd(s)?SS:{mapValue:{}}:ct(35942,{value:s})}function aD(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?tc(Ia.empty(),rt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?SS:"mapValue"in s?sd(s)?{mapValue:{}}:ms:ct(61959,{value:s})}function t0(s,t){const e=As(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function e0(s,t){const e=As(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}class sn{constructor(t){this.value=t}static empty(){return new sn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!df(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Uu(e)}setAll(t){let e=de.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=Uu(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());df(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Fi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];df(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){Cs(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new sn(Uu(this.value))}}function bS(s){const t=[];return Cs(s.fields,((e,r)=>{const o=new de([e]);if(df(r)){const u=bS(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new En(t)}class pe{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new pe(t,0,pt.min(),pt.min(),pt.min(),sn.empty(),0)}static newFoundDocument(t,e,r,o){return new pe(t,1,e,pt.min(),r,o,0)}static newNoDocument(t,e){return new pe(t,2,e,pt.min(),pt.min(),sn.empty(),0)}static newUnknownDocument(t,e){return new pe(t,3,e,pt.min(),pt.min(),sn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xo{constructor(t,e){this.position=t,this.inclusive=e}}function n0(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=rt.comparator(rt.fromName(c.referenceValue),e.key):r=As(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function i0(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Fi(s.position[e],t.position[e]))return!1;return!0}class nc{constructor(t,e="asc"){this.field=t,this.dir=e}}function oD(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class IS{}class Lt extends IS{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new lD(t,e,r):e==="array-contains"?new hD(t,r):e==="in"?new NS(t,r):e==="not-in"?new fD(t,r):e==="array-contains-any"?new dD(t,r):new Lt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new uD(t,r):new cD(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(As(e,this.value)):e!==null&&Ts(this.value)===Ts(e)&&this.matchesComparison(As(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wt extends IS{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Wt(t,e)}matches(t){return $o(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $o(s){return s.op==="and"}function up(s){return s.op==="or"}function Yp(s){return wS(s)&&$o(s)}function wS(s){for(const t of s.filters)if(t instanceof Wt)return!1;return!0}function cp(s){if(s instanceof Lt)return s.field.canonicalString()+s.op.toString()+Yo(s.value);if(Yp(s))return s.filters.map((t=>cp(t))).join(",");{const t=s.filters.map((e=>cp(e))).join(",");return`${s.op}(${t})`}}function RS(s,t){return s instanceof Lt?(function(r,o){return o instanceof Lt&&r.op===o.op&&r.field.isEqual(o.field)&&Fi(r.value,o.value)})(s,t):s instanceof Wt?(function(r,o){return o instanceof Wt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&RS(c,o.filters[m])),!0):!1})(s,t):void ct(19439)}function CS(s,t){const e=s.filters.concat(t);return Wt.create(e,s.op)}function DS(s){return s instanceof Lt?(function(e){return`${e.field.canonicalString()} ${e.op} ${Yo(e.value)}`})(s):s instanceof Wt?(function(e){return e.op.toString()+" {"+e.getFilters().map(DS).join(" ,")+"}"})(s):"Filter"}class lD extends Lt{constructor(t,e,r){super(t,e,r),this.key=rt.fromName(r.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class uD extends Lt{constructor(t,e){super(t,"in",e),this.keys=xS("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class cD extends Lt{constructor(t,e){super(t,"not-in",e),this.keys=xS("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function xS(s,t){return(t.arrayValue?.values||[]).map((e=>rt.fromName(e.referenceValue)))}class hD extends Lt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ec(e)&&Zu(e.arrayValue,this.value)}}class NS extends Lt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Zu(this.value.arrayValue,e)}}class fD extends Lt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Zu(this.value.arrayValue,e)}}class dD extends Lt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ec(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Zu(this.value.arrayValue,r)))}}class mD{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function hp(s,t=null,e=[],r=[],o=null,u=null,c=null){return new mD(s,t,e,r,o,u,c)}function wa(s){const t=ft(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>cp(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),td(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>Yo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>Yo(r))).join(",")),t.Te=e}return t.Te}function fc(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!oD(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!RS(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!i0(s.startAt,t.startAt)&&i0(s.endAt,t.endAt)}function xf(s){return rt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Nf(s,t){return s.filters.filter((e=>e instanceof Lt&&e.field.isEqual(t)))}function r0(s,t,e){let r=hf,o=!0;for(const u of Nf(s,t)){let c=hf,m=!0;switch(u.op){case"<":case"<=":c=sD(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=hf}t0({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];t0({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}function s0(s,t,e){let r=ms,o=!0;for(const u of Nf(s,t)){let c=ms,m=!0;switch(u.op){case">=":case">":c=aD(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=ms}e0({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];e0({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}class ul{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VS(s,t,e,r,o,u,c,m){return new ul(s,t,e,r,o,u,c,m)}function ad(s){return new ul(s)}function a0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function OS(s){return s.collectionGroup!==null}function zu(s){const t=ft(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Zt(de.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new nc(u,r))})),e.has(de.keyField().canonicalString())||t.Ie.push(new nc(de.keyField(),r))}return t.Ie}function On(s){const t=ft(s);return t.Ee||(t.Ee=gD(t,zu(s))),t.Ee}function gD(s,t){if(s.limitType==="F")return hp(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new nc(o.field,u)}));const e=s.endAt?new Xo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Xo(s.startAt.position,s.startAt.inclusive):null;return hp(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function fp(s,t){const e=s.filters.concat([t]);return new ul(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function Vf(s,t,e){return new ul(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function od(s,t){return fc(On(s),On(t))&&s.limitType===t.limitType}function MS(s){return`${wa(On(s))}|lt:${s.limitType}`}function No(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>DS(o))).join(", ")}]`),td(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>Yo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>Yo(o))).join(",")),`Target(${r})`})(On(s))}; limitType=${s.limitType})`}function dc(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):rt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of zu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const p=n0(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,zu(r),o)||r.endAt&&!(function(c,m,g){const p=n0(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,zu(r),o))})(s,t)}function PS(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function kS(s){return(t,e)=>{let r=!1;for(const o of zu(s)){const u=pD(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function pD(s,t,e){const r=s.field.isKeyField()?rt.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),p=m.data.field(u);return g!==null&&p!==null?As(g,p):ct(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ct(19790,{direction:s.dir})}}class vr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Cs(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return gS(this.inner)}size(){return this.innerSize}}const yD=new se(rt.comparator);function Vn(){return yD}const LS=new se(rt.comparator);function Du(...s){let t=LS;for(const e of s)t=t.insert(e.key,e);return t}function US(s){let t=LS;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Li(){return Bu()}function zS(){return Bu()}function Bu(){return new vr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const _D=new se(rt.comparator),vD=new Zt(rt.comparator);function Nt(...s){let t=vD;for(const e of s)t=t.add(e);return t}const ED=new Zt(St);function Xp(){return ED}function $p(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yu(t)?"-0":t}}function BS(s){return{integerValue:""+s}}function jS(s,t){return rS(t)?BS(t):$p(s,t)}class ld{constructor(){this._=void 0}}function TD(s,t,e){return s instanceof ic?(function(o,u){const c={fields:{[_S]:{stringValue:yS},[ES]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Gp(u)&&(u=rd(u)),u&&(c.fields[vS]=u),{mapValue:c}})(e,t):s instanceof Jo?FS(s,t):s instanceof Wo?HS(s,t):(function(o,u){const c=qS(o,u),m=o0(c)+o0(o.Ae);return lp(c)&&lp(o.Ae)?BS(m):$p(o.serializer,m)})(s,t)}function AD(s,t,e){return s instanceof Jo?FS(s,t):s instanceof Wo?HS(s,t):e}function qS(s,t){return s instanceof Zo?(function(r){return lp(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class ic extends ld{}class Jo extends ld{constructor(t){super(),this.elements=t}}function FS(s,t){const e=GS(t);for(const r of s.elements)e.some((o=>Fi(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Wo extends ld{constructor(t){super(),this.elements=t}}function HS(s,t){let e=GS(t);for(const r of s.elements)e=e.filter((o=>!Fi(o,r)));return{arrayValue:{values:e}}}class Zo extends ld{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function o0(s){return fe(s.integerValue||s.doubleValue)}function GS(s){return ec(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class KS{constructor(t,e){this.field=t,this.transform=e}}function SD(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Jo&&o instanceof Jo||r instanceof Wo&&o instanceof Wo?jo(r.elements,o.elements,Fi):r instanceof Zo&&o instanceof Zo?Fi(r.Ae,o.Ae):r instanceof ic&&o instanceof ic})(s.transform,t.transform)}class bD{constructor(t,e){this.version=t,this.transformResults=e}}class an{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new an}static exists(t){return new an(void 0,t)}static updateTime(t){return new an(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function mf(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class ud{}function QS(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new cd(s.key,an.none()):new cl(s.key,s.data,an.none());{const e=s.data,r=sn.empty();let o=new Zt(de.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new Er(s.key,r,new En(o.toArray()),an.none())}}function ID(s,t,e){s instanceof cl?(function(o,u,c){const m=o.value.clone(),g=u0(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):s instanceof Er?(function(o,u,c){if(!mf(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=u0(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(YS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function ju(s,t,e,r){return s instanceof cl?(function(u,c,m,g){if(!mf(u.precondition,c))return m;const p=u.value.clone(),E=c0(u.fieldTransforms,g,c);return p.setAll(E),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,t,e,r):s instanceof Er?(function(u,c,m,g){if(!mf(u.precondition,c))return m;const p=c0(u.fieldTransforms,g,c),E=c.data;return E.setAll(YS(u)),E.setAll(p),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,t,e,r):(function(u,c,m){return mf(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,e)}function wD(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=qS(r.transform,o||null);u!=null&&(e===null&&(e=sn.empty()),e.set(r.field,u))}return e||null}function l0(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,((u,c)=>SD(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class cl extends ud{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Er extends ud{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function YS(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function u0(s,t,e){const r=new Map;mt(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,AD(c,m,e[o]))}return r}function c0(s,t,e){const r=new Map;for(const o of s){const u=o.transform,c=e.data.field(o.field);r.set(o.field,TD(u,c,t))}return r}class cd extends ud{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XS extends ud{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jp{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&ID(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=ju(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=ju(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=zS();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const g=QS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(pt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Nt())}isEqual(t){return this.batchId===t.batchId&&jo(this.mutations,t.mutations,((e,r)=>l0(e,r)))&&jo(this.baseMutations,t.baseMutations,((e,r)=>l0(e,r)))}}class Wp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){mt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return _D})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new Wp(t,e,r,o)}}class Zp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class RD{constructor(t,e){this.count=t,this.unchangedNames=e}}var Me,Bt;function CD(s){switch(s){case Q.OK:return ct(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return ct(15467,{code:s})}}function $S(s){if(s===void 0)return Te("GRPC error has no .code"),Q.UNKNOWN;switch(s){case Me.OK:return Q.OK;case Me.CANCELLED:return Q.CANCELLED;case Me.UNKNOWN:return Q.UNKNOWN;case Me.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Me.INTERNAL:return Q.INTERNAL;case Me.UNAVAILABLE:return Q.UNAVAILABLE;case Me.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Me.NOT_FOUND:return Q.NOT_FOUND;case Me.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Me.ABORTED:return Q.ABORTED;case Me.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Me.DATA_LOSS:return Q.DATA_LOSS;default:return ct(39323,{code:s})}}(Bt=Me||(Me={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";function DD(){return new TextEncoder}const xD=new _s([4294967295,4294967295],0);function h0(s){const t=DD().encode(s),e=new FA;return e.update(t),new Uint8Array(e.digest())}function f0(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new _s([e,r],0),new _s([o,u],0)]}class ty{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new xu(`Invalid padding: ${e}`);if(r<0)throw new xu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new xu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=_s.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(_s.fromNumber(r)));return o.compare(xD)===1&&(o=new _s([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=h0(t),[r,o]=f0(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new ty(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=h0(t),[r,o]=f0(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class mc{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,gc.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new mc(pt.min(),o,new se(St),Vn(),Nt())}}class gc{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new gc(r,e,Nt(),Nt(),Nt())}}class gf{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class JS{constructor(t,e){this.targetId=t,this.Ce=e}}class WS{constructor(t,e,r=Se.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class d0{constructor(){this.ve=0,this.Fe=m0(),this.Me=Se.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Nt(),e=Nt(),r=Nt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ct(38017,{changeType:u})}})),new gc(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=m0()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ND{constructor(t){this.Ge=t,this.ze=new Map,this.je=Vn(),this.Je=Zh(),this.He=Zh(),this.Ye=new se(St)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:ct(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(xf(u))if(r===0){const c=new rt(u.path);this.et(e,c,pe.newNoDocument(c,pt.min()))}else mt(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,p)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=gr(r).toUint8Array()}catch(g){if(g instanceof pS)return Ku("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ty(c,o,u)}catch(g){return Ku(g instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&xf(m.target)){const g=new rt(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,pe.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Nt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new mc(t,e,this.Ye,this.je,r);return this.je=Vn(),this.Je=Zh(),this.He=Zh(),this.Ye=new se(St),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new d0,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Zt(St),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Zt(St),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new d0),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function Zh(){return new se(rt.comparator)}function m0(){return new se(rt.comparator)}const VD={asc:"ASCENDING",desc:"DESCENDING"},OD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MD={and:"AND",or:"OR"};class PD{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function dp(s,t){return s.useProto3Json||td(t)?t:{value:t}}function tl(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ZS(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function kD(s,t){return tl(s,t.toTimestamp())}function hn(s){return mt(!!s,49232),pt.fromTimestamp((function(e){const r=mr(e);return new Jt(r.seconds,r.nanos)})(s))}function ey(s,t){return mp(s,t).canonicalString()}function mp(s,t){const e=(function(o){return new Kt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function t1(s){const t=Kt.fromString(s);return mt(u1(t),10190,{key:t.toString()}),t}function Of(s,t){return ey(s.databaseId,t.path)}function va(s,t){const e=t1(t);if(e.get(1)!==s.databaseId.projectId)throw new et(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new et(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new rt(i1(e))}function e1(s,t){return ey(s.databaseId,t)}function n1(s){const t=t1(s);return t.length===4?Kt.emptyPath():i1(t)}function gp(s){return new Kt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function i1(s){return mt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function g0(s,t,e){return{name:Of(s,t),fields:e.value.mapValue.fields}}function LD(s,t,e){const r=va(s,t.name),o=hn(t.updateTime),u=t.createTime?hn(t.createTime):pt.min(),c=new sn({mapValue:{fields:t.fields}}),m=pe.newFoundDocument(r,o,u,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function UD(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ct(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(p,E){return p.useProto3Json?(mt(E===void 0||typeof E=="string",58123),Se.fromBase64String(E||"")):(mt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Se.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(p){const E=p.code===void 0?Q.UNKNOWN:$S(p.code);return new et(E,p.message||"")})(c);e=new WS(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=va(s,r.document.name),u=hn(r.document.updateTime),c=r.document.createTime?hn(r.document.createTime):pt.min(),m=new sn({mapValue:{fields:r.document.fields}}),g=pe.newFoundDocument(o,u,c,m),p=r.targetIds||[],E=r.removedTargetIds||[];e=new gf(p,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=va(s,r.document),u=r.readTime?hn(r.readTime):pt.min(),c=pe.newNoDocument(o,u),m=r.removedTargetIds||[];e=new gf([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=va(s,r.document),u=r.removedTargetIds||[];e=new gf([],u,o,null)}else{if(!("filter"in t))return ct(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new RD(o,u),m=r.targetId;e=new JS(m,c)}}return e}function Mf(s,t){let e;if(t instanceof cl)e={update:g0(s,t.key,t.value)};else if(t instanceof cd)e={delete:Of(s,t.key)};else if(t instanceof Er)e={update:g0(s,t.key,t.data),updateMask:HD(t.fieldMask)};else{if(!(t instanceof XS))return ct(16599,{Vt:t.type});e={verify:Of(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof ic)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Jo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Wo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Zo)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ct(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:kD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ct(27497)})(s,t.precondition)),e}function pp(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?an.updateTime(hn(u.updateTime)):u.exists!==void 0?an.exists(u.exists):an.none()})(t.currentDocument):an.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)mt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new ic;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Jo(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new Wo(E)}else"increment"in m?g=new Zo(c,m.increment):ct(16584,{proto:m});const p=de.fromServerFormat(m.fieldPath);return new KS(p,g)})(s,o))):[];if(t.update){t.update.name;const o=va(s,t.update.name),u=new sn({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const p=g.fieldPaths||[];return new En(p.map((E=>de.fromServerFormat(E))))})(t.updateMask);return new Er(o,u,c,e,r)}return new cl(o,u,e,r)}if(t.delete){const o=va(s,t.delete);return new cd(o,e)}if(t.verify){const o=va(s,t.verify);return new XS(o,e)}return ct(1463,{proto:t})}function zD(s,t){return s&&s.length>0?(mt(t!==void 0,14353),s.map((e=>(function(o,u){let c=o.updateTime?hn(o.updateTime):hn(u);return c.isEqual(pt.min())&&(c=hn(u)),new bD(c,o.transformResults||[])})(e,t)))):[]}function r1(s,t){return{documents:[e1(s,t.path)]}}function s1(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=e1(s,o);const u=(function(p){if(p.length!==0)return l1(Wt.create(p,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((E=>(function(b){return{field:Vo(b.field),direction:jD(b.dir)}})(E)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=dp(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:e,parent:o}}function a1(s){let t=n1(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){mt(r===1,65062);const E=e.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];e.where&&(u=(function(T){const b=o1(T);return b instanceof Wt&&Yp(b)?b.getFilters():[b]})(e.where));let c=[];e.orderBy&&(c=(function(T){return T.map((b=>(function(G){return new nc(Oo(G.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(b)))})(e.orderBy));let m=null;e.limit&&(m=(function(T){let b;return b=typeof T=="object"?T.value:T,td(b)?null:b})(e.limit));let g=null;e.startAt&&(g=(function(T){const b=!!T.before,M=T.values||[];return new Xo(M,b)})(e.startAt));let p=null;return e.endAt&&(p=(function(T){const b=!T.before,M=T.values||[];return new Xo(M,b)})(e.endAt)),VS(t,o,c,u,m,"F",g,p)}function BD(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ct(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function o1(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=Oo(e.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(e.unaryFilter.field);return Lt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Oo(e.unaryFilter.field);return Lt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Oo(e.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ct(61313);default:return ct(60726)}})(s):s.fieldFilter!==void 0?(function(e){return Lt.create(Oo(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ct(58110);default:return ct(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return Wt.create(e.compositeFilter.filters.map((r=>o1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ct(1026)}})(e.compositeFilter.op))})(s):ct(30097,{filter:s})}function jD(s){return VD[s]}function qD(s){return OD[s]}function FD(s){return MD[s]}function Vo(s){return{fieldPath:s.canonicalString()}}function Oo(s){return de.fromServerFormat(s.fieldPath)}function l1(s){return s instanceof Lt?(function(e){if(e.op==="=="){if(ZT(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NAN"}};if(WT(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ZT(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NOT_NAN"}};if(WT(e.value))return{unaryFilter:{field:Vo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(e.field),op:qD(e.op),value:e.value}}})(s):s instanceof Wt?(function(e){const r=e.getFilters().map((o=>l1(o)));return r.length===1?r[0]:{compositeFilter:{op:FD(e.op),filters:r}}})(s):ct(54877,{filter:s})}function HD(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function u1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class ur{constructor(t,e,r,o,u=pt.min(),c=pt.min(),m=Se.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new ur(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class c1{constructor(t){this.yt=t}}function GD(s,t){let e;if(t.document)e=LD(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=rt.fromSegments(t.noDocument.path),o=Ca(t.noDocument.readTime);e=pe.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ct(56709);{const r=rt.fromSegments(t.unknownDocument.path),o=Ca(t.unknownDocument.version);e=pe.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new Jt(o[0],o[1]);return pt.fromTimestamp(u)})(t.readTime)),e}function p0(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Pf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:Of(u,c.key),fields:c.data.value.mapValue.fields,updateTime:tl(u,c.version.toTimestamp()),createTime:tl(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Ra(t.version)};else{if(!t.isUnknownDocument())return ct(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:Ra(t.version)}}return r}function Pf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function Ra(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ca(s){const t=new Jt(s.seconds,s.nanoseconds);return pt.fromTimestamp(t)}function fa(s,t){const e=(t.baseMutations||[]).map((u=>pp(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>pp(s.yt,u))),o=Jt.fromMillis(t.localWriteTimeMs);return new Jp(t.batchId,o,e,r)}function Nu(s){const t=Ca(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?Ca(s.lastLimboFreeSnapshotVersion):pt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return mt(c===1,1966,{count:c}),On(ad(n1(u.documents[0])))})(s.query):(function(u){return On(a1(u))})(s.query),new ur(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Se.fromBase64String(s.resumeToken))}function h1(s,t){const e=Ra(t.snapshotVersion),r=Ra(t.lastLimboFreeSnapshotVersion);let o;o=xf(t.target)?r1(s.yt,t.target):s1(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:wa(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function f1(s){const t=a1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Vf(t,t.limit,"L"):t}function Ug(s,t){return new Zp(t.largestBatchId,pp(s.yt,t.overlayMutation))}function y0(s,t){const e=t.path.lastSegment();return[s,on(t.path.popLast()),e]}function _0(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:Ra(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}class KD{getBundleMetadata(t,e){return v0(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:Ca(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return v0(t).put((function(o){return{bundleId:o.id,createTime:Ra(hn(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return E0(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:f1(u.bundledQuery),readTime:Ca(u.readTime)}})(r)}))}saveNamedQuery(t,e){return E0(t).put((function(o){return{name:o.name,readTime:Ra(hn(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function v0(s){return je(s,ed)}function E0(s){return je(s,nd)}class hd{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new hd(t,r)}getOverlay(t,e){return Tu(t).get(y0(this.userId,e)).next((r=>r?Ug(this.serializer,r):null))}getOverlays(t,e){const r=Li();return L.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,c)=>{const m=new Zp(e,c);o.push(this.St(t,m))})),L.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((c=>o.add(on(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Tu(t).Z(sp,m))})),L.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Li(),u=on(e),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Tu(t).J(sp,c).next((m=>{for(const g of m){const p=Ug(this.serializer,g);o.set(p.getKey(),p)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=Li();let c;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Tu(t).ee({index:cS,range:m},((g,p,E)=>{const T=Ug(this.serializer,p);u.size()<o||T.largestBatchId===c?(u.set(T.getKey(),T),c=T.largestBatchId):E.done()})).next((()=>u))}St(t,e){return Tu(t).put((function(o,u,c){const[m,g,p]=y0(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Mf(o.yt,c.mutation)}})(this.serializer,this.userId,e))}}function Tu(s){return je(s,id)}class QD{bt(t){return je(t,Fp)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e?.value;return r?Se.fromUint8Array(r):Se.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}class da{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(fe(t.integerValue));else if("doubleValue"in t){const r=fe(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Yu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=mr(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(gr(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?AS(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):sd(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):ct(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){const r=t.fields||{};this.Ft(e,53);const o=Qo,u=r[o].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(fe(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),rt.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}da.Kt=new da;const wo=255;function YD(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function T0(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=YD(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class XD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=T0(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=T0(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(wo),this.sn(255)}_n(){this.an(wo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===wo?(this.sn(wo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===wo?(this.an(wo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class $D{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class JD{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Au{constructor(){this.cn=new XD,this.ln=new $D(this.cn),this.hn=new JD(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ma{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new ma(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:pf(this.En),directionalValue:pf(this.dn),orderedDocumentKey:pf(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function rs(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=A0(s.En,t.En),e!==0?e:(e=A0(s.dn,t.dn),e!==0?e:rt.comparator(s.In,t.In)))}function A0(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function pf(s){return kA()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function S0(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class b0{constructor(t){this.mn=new Zt(((e,r)=>de.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(mt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=np(t);if(e!==void 0&&!this.wn(e))return!1;const r=ua(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new Zt(de.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new lf(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new lf(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new lf(r.field,r.dir==="asc"?0:1)));return new If(If.UNKNOWN_ID,this.collectionId,e,Qu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function d1(s){if(mt(s instanceof Lt||s instanceof Wt,20012),s instanceof Lt){if(s instanceof NS){const e=s.value.arrayValue?.values?.map((r=>Lt.create(s.field,"==",r)))||[];return Wt.create(e,"or")}return s}const t=s.filters.map((e=>d1(e)));return Wt.create(t,s.op)}function WD(s){if(s.getFilters().length===0)return[];const t=vp(d1(s));return mt(m1(t),7391),yp(t)||_p(t)?[t]:t.getFilters()}function yp(s){return s instanceof Lt}function _p(s){return s instanceof Wt&&Yp(s)}function m1(s){return yp(s)||_p(s)||(function(e){if(e instanceof Wt&&up(e)){for(const r of e.getFilters())if(!yp(r)&&!_p(r))return!1;return!0}return!1})(s)}function vp(s){if(mt(s instanceof Lt||s instanceof Wt,34018),s instanceof Lt)return s;if(s.filters.length===1)return vp(s.filters[0]);const t=s.filters.map((r=>vp(r)));let e=Wt.create(t,s.op);return e=kf(e),m1(e)?e:(mt(e instanceof Wt,64498),mt($o(e),40251),mt(e.filters.length>1,57927),e.filters.reduce(((r,o)=>ny(r,o))))}function ny(s,t){let e;return mt(s instanceof Lt||s instanceof Wt,38388),mt(t instanceof Lt||t instanceof Wt,25473),e=s instanceof Lt?t instanceof Lt?(function(o,u){return Wt.create([o,u],"and")})(s,t):I0(s,t):t instanceof Lt?I0(t,s):(function(o,u){if(mt(o.filters.length>0&&u.filters.length>0,48005),$o(o)&&$o(u))return CS(o,u.getFilters());const c=up(o)?o:u,m=up(o)?u:o,g=c.filters.map((p=>ny(p,m)));return Wt.create(g,"or")})(s,t),kf(e)}function I0(s,t){if($o(t))return CS(t,s.getFilters());{const e=t.filters.map((r=>ny(s,r)));return Wt.create(e,"or")}}function kf(s){if(mt(s instanceof Lt||s instanceof Wt,11850),s instanceof Lt)return s;const t=s.getFilters();if(t.length===1)return kf(t[0]);if(wS(s))return s;const e=t.map((o=>kf(o))),r=[];return e.forEach((o=>{o instanceof Lt?r.push(o):o instanceof Wt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Wt.create(r,s.op)}class ZD{constructor(){this.Cn=new iy}addToCollectionParentIndex(t,e){return this.Cn.add(e),L.resolve()}getCollectionParents(t,e){return L.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return L.resolve()}deleteFieldIndex(t,e){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,e){return L.resolve()}getDocumentsMatchingTarget(t,e){return L.resolve(null)}getIndexType(t,e){return L.resolve(0)}getFieldIndexes(t,e){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,e){return L.resolve(Mn.min())}getMinOffsetFromCollectionGroup(t,e){return L.resolve(Mn.min())}updateCollectionGroup(t,e,r){return L.resolve()}updateIndexEntries(t,e){return L.resolve()}}class iy{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Zt(Kt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Zt(Kt.comparator)).toArray()}}const w0="IndexedDbIndexManager",tf=new Uint8Array(0);class tx{constructor(t,e){this.databaseId=e,this.vn=new iy,this.Fn=new vr((r=>wa(r)),((r,o)=>fc(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:on(o)};return R0(t).put(u)}return L.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[$A(e),""],!1,!0);return R0(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==e)break;r.push(ki(c.parent))}return r}))}addFieldIndex(t,e){const r=Su(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const c=Co(t);return u.next((m=>{c.put(_0(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=Su(t),o=Co(t),u=Ro(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Su(t),r=Ro(t),o=Co(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return L.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new b0(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=Ro(t);let o=!0;const u=new Map;return L.forEach(this.Mn(e),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Nt();const m=[];return L.forEach(u,((g,p)=>{tt(w0,`Using index ${(function(nt){return`id=${nt.indexId}|cg=${nt.collectionGroup}|f=${nt.fields.map((_t=>`${_t.fieldPath}:${_t.kind}`)).join(",")}`})(g)} to execute ${wa(e)}`);const E=(function(nt,_t){const It=np(_t);if(It===void 0)return null;for(const Et of Nf(nt,It.fieldPath))switch(Et.op){case"array-contains-any":return Et.value.arrayValue.values||[];case"array-contains":return[Et.value]}return null})(p,g),T=(function(nt,_t){const It=new Map;for(const Et of ua(_t))for(const w of Nf(nt,Et.fieldPath))switch(w.op){case"==":case"in":It.set(Et.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return It.set(Et.fieldPath.canonicalString(),w.value),Array.from(It.values())}return null})(p,g),b=(function(nt,_t){const It=[];let Et=!0;for(const w of ua(_t)){const I=w.kind===0?r0(nt,w.fieldPath,nt.startAt):s0(nt,w.fieldPath,nt.startAt);It.push(I.value),Et&&(Et=I.inclusive)}return new Xo(It,Et)})(p,g),M=(function(nt,_t){const It=[];let Et=!0;for(const w of ua(_t)){const I=w.kind===0?s0(nt,w.fieldPath,nt.endAt):r0(nt,w.fieldPath,nt.endAt);It.push(I.value),Et&&(Et=I.inclusive)}return new Xo(It,Et)})(p,g),G=this.On(g,p,b),W=this.On(g,p,M),Z=this.Nn(g,p,T),st=this.Bn(g.indexId,E,G,b.inclusive,W,M.inclusive,Z);return L.forEach(st,(lt=>r.Y(lt,e.limit).next((nt=>{nt.forEach((_t=>{const It=rt.fromSegments(_t.documentKey);c.has(It)||(c=c.add(It),m.push(It))}))}))))})).next((()=>m))}return L.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=WD(Wt.create(t.filters,"and")).map((r=>hp(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,c,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),p=g/(e!=null?e.length:1),E=[];for(let T=0;T<g;++T){const b=e?this.Ln(e[T/p]):tf,M=this.kn(t,b,r[T%p],o),G=this.qn(t,b,u[T%p],c),W=m.map((Z=>this.kn(t,b,Z,!0)));E.push(...this.createRange(M,G,W))}return E}kn(t,e,r,o){const u=new ma(t,rt.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new ma(t,rt.empty(),e,r);return o?u.An():u}xn(t,e){const r=new b0(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return L.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let p=new Zt(de.comparator),E=!1;for(const T of g.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?E=!0:p=p.add(b.field));for(const T of g.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new Au;for(const o of ua(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);da.Kt.Dt(u,c)}return r.un()}Ln(t){const e=new Au;return da.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new Au;return da.Kt.Dt(tc(this.databaseId,e),r.Pn((function(u){const c=ua(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new Au);let u=0;for(const c of ua(t)){const m=r[u++];for(const g of o)if(this.Un(e,c.fieldPath)&&ec(m))o=this.Kn(o,c,m);else{const p=g.Pn(c.kind);da.Kt.Dt(m,p)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new Au;g.seed(m.un()),da.Kt.Dt(c,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof Lt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=Su(t),o=Co(t);return(e?r.J(rp,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const c=[];return L.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(E,T){const b=T?new Qu(T.sequenceNumber,new Mn(Ca(T.readTime),new rt(ki(T.documentKey)),T.largestBatchId)):Qu.empty(),M=E.fields.map((([G,W])=>new lf(de.fromServerFormat(G),W)));return new If(E.indexId,E.collectionGroup,M,b)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:St(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=Su(t),u=Co(t);return this.Gn(t).next((c=>o.J(rp,IDBKeyRange.bound(e,e)).next((m=>L.forEach(m,(g=>u.put(_0(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,e){const r=new Map;return L.forEach(e,((o,u)=>{const c=r.get(o.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),L.forEach(m,(g=>this.zn(t,o,g).next((p=>{const E=this.jn(u,g);return p.isEqual(E)?L.resolve():this.Jn(t,u,g,p,E)})))))))}))}Hn(t,e,r,o){return Ro(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return Ro(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=Ro(t);let u=new Zt(rs);return o.ee({index:uS,range:IDBKeyRange.only([r.indexId,this.uid,pf(this.$n(r,e))])},((c,m)=>{u=u.add(new ma(r.indexId,e,S0(m.arrayValue),S0(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new Zt(rs);const o=this.Qn(e,t);if(o==null)return r;const u=np(e);if(u!=null){const c=t.data.field(u.fieldPath);if(ec(c))for(const m of c.arrayValue.values||[])r=r.add(new ma(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new ma(e.indexId,t.key,tf,o));return r}Jn(t,e,r,o,u){tt(w0,"Updating index entries for document '%s'",e.key);const c=[];return(function(g,p,E,T,b){const M=g.getIterator(),G=p.getIterator();let W=Io(M),Z=Io(G);for(;W||Z;){let st=!1,lt=!1;if(W&&Z){const nt=E(W,Z);nt<0?lt=!0:nt>0&&(st=!0)}else W!=null?lt=!0:st=!0;st?(T(Z),Z=Io(G)):lt?(b(W),W=Io(M)):(W=Io(M),Z=Io(G))}})(o,u,rs,(m=>{c.push(this.Hn(t,e,r,m))}),(m=>{c.push(this.Yn(t,e,r,m))})),L.waitFor(c)}Gn(t){let e=1;return Co(t).ee({index:lS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((c,m)=>rs(c,m))).filter(((c,m,g)=>!m||rs(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=rs(c,t),g=rs(c,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(e);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,tf,rt.empty()),g=o[c+1].Vn(this.uid,tf,rt.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return rs(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(C0)}getMinOffset(t,e){return L.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||ct(44426))))).next(C0)}}function R0(s){return je(s,Ju)}function Ro(s){return je(s,Lu)}function Su(s){return je(s,qp)}function Co(s){return je(s,ku)}function C0(s){mt(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;zp(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Mn(t.readTime,t.documentKey,e)}const D0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},g1=41943040;class rn{static withCacheSize(t){return new rn(t,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}function p1(s,t,e){const r=s.store(oi),o=s.store(Fo),u=[],c=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:c},((E,T,b)=>(m++,b.delete())));u.push(g.next((()=>{mt(m===1,47070,{batchId:e.batchId})})));const p=[];for(const E of e.mutations){const T=sS(t,E.key.path,e.batchId);u.push(o.delete(T)),p.push(E.key)}return L.waitFor(u).next((()=>p))}function Lf(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ct(14731);t=s.noDocument}return JSON.stringify(t).length}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(g1,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class fd{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){mt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new fd(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ss(t).ee({index:ga,range:r},((o,u,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Mo(t),c=ss(t);return c.add({}).next((m=>{mt(typeof m=="number",49019);const g=new Jp(m,e,r,o),p=(function(M,G,W){const Z=W.baseMutations.map((lt=>Mf(M.yt,lt))),st=W.mutations.map((lt=>Mf(M.yt,lt)));return{userId:G,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:Z,mutations:st}})(this.serializer,this.userId,g),E=[];let T=new Zt(((b,M)=>St(b.canonicalString(),M.canonicalString())));for(const b of o){const M=sS(this.userId,b.key.path,m);T=T.add(b.key.path.popLast()),E.push(c.put(p)),E.push(u.put(M,OC))}return T.forEach((b=>{E.push(this.indexManager.addToCollectionParentIndex(t,b))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),L.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,e){return ss(t).get(e).next((r=>r?(mt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),fa(this.serializer,r)):null))}er(t,e){return this.Xn[e]?L.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ss(t).ee({index:ga,range:o},((c,m,g)=>{m.userId===this.userId&&(mt(m.batchId>=r,47524,{tr:r}),u=fa(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ya;return ss(t).ee({index:ga,range:e,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,ya],[this.userId,Number.POSITIVE_INFINITY]);return ss(t).J(ga,e).next((r=>r.map((o=>fa(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=uf(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Mo(t).ee({range:o},((c,m,g)=>{const[p,E,T]=c,b=ki(E);if(p===this.userId&&e.path.isEqual(b))return ss(t).get(T).next((M=>{if(!M)throw ct(61480,{nr:c,batchId:T});mt(M.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:M.userId,batchId:T}),u.push(fa(this.serializer,M))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(St);const o=[];return e.forEach((u=>{const c=uf(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Mo(t).ee({range:m},((p,E,T)=>{const[b,M,G]=p,W=ki(M);b===this.userId&&u.path.isEqual(W)?r=r.add(G):T.done()}));o.push(g)})),L.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=uf(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Zt(St);return Mo(t).ee({range:c},((g,p,E)=>{const[T,b,M]=g,G=ki(b);T===this.userId&&r.isPrefixOf(G)?G.length===o&&(m=m.add(M)):E.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push(ss(t).get(u).next((c=>{if(c===null)throw ct(35274,{batchId:u});mt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(fa(this.serializer,c))})))})),L.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return p1(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),L.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return L.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Mo(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=ki(u[1]);o.push(g)}else m.done()})).next((()=>{mt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return y1(t,this.userId,e)}_r(t){return _1(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:ya,lastStreamToken:""}))}}function y1(s,t,e){const r=uf(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Mo(s).ee({range:u,X:!0},((m,g,p)=>{const[E,T,b]=m;E===t&&T===o&&(c=!0),p.done()})).next((()=>c))}function ss(s){return je(s,oi)}function Mo(s){return je(s,Fo)}function _1(s){return je(s,Xu)}class Da{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Da(0)}static cr(){return new Da(-1)}}class ex{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new Da(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>pt.fromTimestamp(new Jt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Do(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(mt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return Do(t).ee(((c,m)=>{const g=Nu(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>L.waitFor(u))).next((()=>o))}forEachTarget(t,e){return Do(t).ee(((r,o)=>{const u=Nu(o);e(u)}))}lr(t){return x0(t).get(Cf).next((e=>(mt(e!==null,2888),e)))}hr(t,e){return x0(t).put(Cf,e)}Pr(t,e){return Do(t).put(h1(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=wa(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Do(t).ee({range:o,index:oS},((c,m,g)=>{const p=Nu(m);fc(e,p.target)&&(u=p,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=ls(t);return e.forEach((c=>{const m=on(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),L.waitFor(o)}removeMatchingKeys(t,e,r){const o=ls(t);return L.forEach(e,(u=>{const c=on(u.path);return L.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=ls(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=ls(t);let u=Nt();return o.ee({range:r,X:!0},((c,m,g)=>{const p=ki(c[1]),E=new rt(p);u=u.add(E)})).next((()=>u))}containsKey(t,e){const r=on(e.path),o=IDBKeyRange.bound([r],[$A(r)],!1,!0);let u=0;return ls(t).ee({index:jp,X:!0,range:o},(([c,m],g,p)=>{c!==0&&(u++,p.done())})).next((()=>u>0))}At(t,e){return Do(t).get(e).next((r=>r?Nu(r):null))}}function Do(s){return je(s,Ho)}function x0(s){return je(s,_a)}function ls(s){return je(s,Go)}const N0="LruGarbageCollector",v1=1048576;function V0([s,t],[e,r]){const o=St(s,e);return o===0?St(t,r):o}class nx{constructor(t){this.Ir=t,this.buffer=new Zt(V0),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();V0(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class E1{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(N0,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Rs(e)?tt(N0,"Ignoring IndexedDB error during garbage collection: ",e):await ws(e)}await this.Vr(3e5)}))}}class ix{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return L.resolve(vn.ce);const r=new nx(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(D0)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D0):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,g,p;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(t,o)))).next((T=>(r=T,m=Date.now(),this.removeTargets(t,r,e)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((T=>(p=Date.now(),xo()<=kt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${T} documents in `+(p-g)+`ms
Total Duration: ${p-E}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function T1(s,t){return new ix(s,t)}class rx{constructor(t,e){this.db=t,this.garbageCollector=T1(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return ef(t,r)}removeReference(t,e,r){return ef(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return ef(t,e)}br(t,e){return(function(o,u){let c=!1;return _1(o).te((m=>y1(o,m,u).next((g=>(g&&(c=!0),L.resolve(!g)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=e){const g=this.br(t,c).next((p=>{if(!p)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,pt.min()),ls(t).delete((function(T){return[0,on(T.path)]})(c)))))}));o.push(g)}})).next((()=>L.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return ef(t,e)}Sr(t,e){const r=ls(t);let o,u=vn.ce;return r.ee({index:jp},(([c,m],{path:g,sequenceNumber:p})=>{c===0?(u!==vn.ce&&e(new rt(ki(o)),u),u=p,o=g):u=vn.ce})).next((()=>{u!==vn.ce&&e(new rt(ki(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ef(s,t){return ls(s).put((function(r,o){return{targetId:0,path:on(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}class A1{constructor(){this.changes=new vr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,pe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?L.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class sx{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return oa(t).put(r)}removeEntry(t,e,r){return oa(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Pf(c),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=pe.newInvalidDocument(e);return oa(t).ee({index:cf,range:IDBKeyRange.only(bu(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:pe.newInvalidDocument(e)};return oa(t).ee({index:cf,range:IDBKeyRange.only(bu(e))},((o,u)=>{r={document:this.Cr(e,u),size:Lf(u)}})).next((()=>r))}getEntries(t,e){let r=Vn();return this.Fr(t,e,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,e){let r=Vn(),o=new se(rt.comparator);return this.Fr(t,e,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,Lf(c))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return L.resolve();let o=new Zt(P0);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(bu(o.first()),bu(o.last())),c=o.getIterator();let m=c.getNext();return oa(t).ee({index:cf,range:u},((g,p,E)=>{const T=rt.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;m&&P0(m,T)<0;)r(m,null),m=c.getNext();m&&m.isEqual(T)&&(r(m,p),m=c.hasNext()?c.getNext():null),m?E.j(bu(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),Pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oa(t).J(IDBKeyRange.bound(m,g,!0)).next((p=>{u?.incrementDocumentReadCount(p.length);let E=Vn();for(const T of p){const b=this.Cr(rt.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(dc(e,b)||o.has(b.key))&&(E=E.insert(b.key,b))}return E}))}getAllFromCollectionGroup(t,e,r,o){let u=Vn();const c=M0(e,r),m=M0(e,Mn.max());return oa(t).ee({index:aS,range:IDBKeyRange.bound(c,m,!0)},((g,p,E)=>{const T=this.Cr(rt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);u=u.insert(T.key,T),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new ax(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return O0(t).get(ip).next((e=>(mt(!!e,20021),e)))}Dr(t,e){return O0(t).put(ip,e)}Cr(t,e){if(e){const r=GD(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(pt.min())))return r}return pe.newInvalidDocument(t)}}function S1(s){return new sx(s)}class ax extends A1{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new vr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new Zt(((u,c)=>St(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=p0(this.Nr.serializer,c);o=o.add(u.path.popLast());const p=Lf(g);r+=p-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=p0(this.Nr.serializer,c.convertToNoDocument(pt.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),L.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function O0(s){return je(s,$u)}function oa(s){return je(s,Rf)}function bu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function M0(s,t){const e=t.documentKey.path.toArray();return[s,Pf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function P0(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=St(e[u],r[u]),o)return o;return o=St(e.length,r.length),o||(o=St(e[e.length-2],r[r.length-2]),o||St(e[e.length-1],r[r.length-1]))}class ox{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class b1{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&ju(r.mutation,o,En.empty(),Jt.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Nt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Nt()){const o=Li();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=Du();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Li();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Nt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Vn();const c=Bu(),m=(function(){return Bu()})();return e.forEach(((g,p)=>{const E=r.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Er)?u=u.insert(p.key,p):E!==void 0?(c.set(p.key,E.mutation.getFieldMask()),ju(E.mutation,p,E.mutation.getFieldMask(),Jt.now())):c.set(p.key,En.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,E)=>c.set(p,E))),e.forEach(((p,E)=>m.set(p,new ox(E,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Bu();let o=new se(((c,m)=>c-m)),u=Nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=e.get(g);if(p===null)return;let E=r.get(g)||En.empty();E=m.applyToLocalView(p,E),r.set(g,E);const T=(o.get(m.batchId)||Nt()).add(g);o=o.insert(m.batchId,T)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,E=g.value,T=zS();E.forEach((b=>{if(!u.has(b)){const M=QS(e.get(b),r.get(b));M!==null&&T.set(b,M),u=u.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,T))}return L.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):OS(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):L.resolve(Li());let m=qo,g=u;return c.next((p=>L.forEach(p,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(E)?L.resolve():this.remoteDocumentCache.getEntry(t,E).next((b=>{g=g.insert(E,b)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Nt()))).next((E=>({batchId:m,changes:US(E)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next((r=>{let o=Du();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=Du();return this.indexManager.getCollectionParents(t,u).next((m=>L.forEach(m,(g=>{const p=(function(T,b){return new ul(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,r,o).next((E=>{E.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((g,p)=>{const E=p.getKey();c.get(E)===null&&(c=c.insert(E,pe.newInvalidDocument(E)))}));let m=Du();return c.forEach(((g,p)=>{const E=u.get(g);E!==void 0&&ju(E.mutation,p,En.empty(),Jt.now()),dc(e,p)&&(m=m.insert(g,p))})),m}))}}class lx{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return L.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:hn(o.createTime)}})(e)),L.resolve()}getNamedQuery(t,e){return L.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:f1(o.bundledQuery),readTime:hn(o.readTime)}})(e)),L.resolve()}}class ux{constructor(){this.overlays=new se(rt.comparator),this.qr=new Map}getOverlay(t,e){return L.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Li();return L.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),L.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(t,e,r){const o=Li(),u=e.length+1,c=new rt(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return L.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new se(((p,E)=>p-E));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>r){let E=u.get(p.largestBatchId);E===null&&(E=Li(),u=u.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const m=Li(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,E)=>m.set(p,E))),!(m.size()>=o)););return L.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Zp(e,r));let u=this.qr.get(e);u===void 0&&(u=Nt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}class cx{constructor(){this.sessionToken=Se.EMPTY_BYTE_STRING}getSessionToken(t){return L.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,L.resolve()}}class ry{constructor(){this.Qr=new Zt(Ge.$r),this.Ur=new Zt(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Ge(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new Ge(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new rt(new Kt([])),r=new Ge(e,t),o=new Ge(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new rt(new Kt([])),r=new Ge(e,t),o=new Ge(e,t+1);let u=Nt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Ge(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Ge{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return rt.comparator(t.key,e.key)||St(t.Yr,e.Yr)}static Kr(t,e){return St(t.Yr,e.Yr)||rt.comparator(t.key,e.key)}}class hx{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(Ge.$r)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Jp(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Ge(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return L.resolve(c)}lookupMutationBatch(t,e){return L.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return L.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?ya:this.tr-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Ge(e,0),o=new Ge(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),L.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(St);return e.forEach((o=>{const u=new Ge(o,0),c=new Ge(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const c=new Ge(new rt(u),0);let m=new Zt(St);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(g.Yr)),!0)}),c),L.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){mt(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(e.mutations,(o=>{const u=new Ge(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new Ge(e,0),o=this.Zr.firstAfterOrEqual(r);return L.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class fx{constructor(t){this.ri=t,this.docs=(function(){return new se(rt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return L.resolve(r?r.document.mutableCopy():pe.newInvalidDocument(e))}getEntries(t,e){let r=Vn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():pe.newInvalidDocument(o))})),L.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Vn();const c=e.path,m=new rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:E}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||zp(tS(E),r)<=0||(o.has(E.key)||dc(e,E))&&(u=u.insert(E.key,E.mutableCopy()))}return L.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ct(9500)}ii(t,e){return L.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new dx(this)}getSize(t){return L.resolve(this.size)}}class dx extends A1{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),L.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class mx{constructor(t){this.persistence=t,this.si=new vr((e=>wa(e)),fc),this.lastRemoteSnapshotVersion=pt.min(),this.highestTargetId=0,this.oi=0,this._i=new ry,this.targetCount=0,this.ai=Da.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),L.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new Da(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,L.resolve()}updateTargetData(t,e){return this.Pr(e),L.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),L.waitFor(u).next((()=>o))}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return L.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),L.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),L.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),L.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return L.resolve(r)}containsKey(t,e){return L.resolve(this._i.containsKey(e))}}class sy{constructor(t,e){this.ui={},this.overlays={},this.ci=new vn(0),this.li=!1,this.li=!0,this.hi=new cx,this.referenceDelegate=t(this),this.Pi=new mx(this),this.indexManager=new ZD,this.remoteDocumentCache=(function(o){return new fx(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new c1(e),this.Ii=new lx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new ux,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new hx(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new gx(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return L.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class gx extends nS{constructor(t){super(),this.currentSequenceNumber=t}}class dd{constructor(t){this.persistence=t,this.Ri=new ry,this.Vi=null}static mi(t){return new dd(t)}get fi(){if(this.Vi)return this.Vi;throw ct(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),L.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),L.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(r=>{const o=rt.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,pt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return L.or([()=>L.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class Uf{constructor(t,e){this.persistence=t,this.pi=new vr((r=>on(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=T1(this,e)}static mi(t,e){return new Uf(t,e)}Ei(){}di(t){return L.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return L.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?L.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,pt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),L.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),L.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),L.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),L.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=ff(t.data.value)),e}br(t,e,r){return L.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return L.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class px{constructor(t){this.serializer=t}k(t,e,r,o){const u=new Zf("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(hc)})(t),(function(g){g.createObjectStore(Xu,{keyPath:VC}),g.createObjectStore(oi,{keyPath:KT,autoIncrement:!0}).createIndex(ga,QT,{unique:!0}),g.createObjectStore(Fo)})(t),k0(t),(function(g){g.createObjectStore(ca)})(t));let c=L.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Go),g.deleteObjectStore(Ho),g.deleteObjectStore(_a)})(t),k0(t)),c=c.next((()=>(function(g){const p=g.store(_a),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pt.min().toTimestamp(),targetCount:0};return p.put(Cf,E)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,p){return p.store(oi).J().next((T=>{g.deleteObjectStore(oi),g.createObjectStore(oi,{keyPath:KT,autoIncrement:!0}).createIndex(ga,QT,{unique:!0});const b=p.store(oi),M=T.map((G=>b.put(G)));return L.waitFor(M)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(Ko,{keyPath:jC})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore($u)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(ed,{keyPath:qC})})(t),(function(g){g.createObjectStore(nd,{keyPath:FC})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const p=g.createObjectStore(id,{keyPath:$C});p.createIndex(sp,JC,{unique:!1}),p.createIndex(cS,WC,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const p=g.createObjectStore(Rf,{keyPath:MC});p.createIndex(cf,PC),p.createIndex(aS,kC)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(ca)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(qp,{keyPath:HC,autoIncrement:!0}).createIndex(rp,GC,{unique:!1}),g.createObjectStore(ku,{keyPath:KC}).createIndex(lS,QC,{unique:!1}),g.createObjectStore(Lu,{keyPath:YC}).createIndex(uS,XC,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{e.objectStore(ku).clear()})).next((()=>{e.objectStore(Lu).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(Fp,{keyPath:ZC})})(t)}))),r<18&&o>=18&&kA()&&(c=c.next((()=>{e.objectStore(ku).clear()})).next((()=>{e.objectStore(Lu).clear()}))),c}wi(t){let e=0;return t.store(ca).ee(((r,o)=>{e+=Lf(o)})).next((()=>{const r={byteSize:e};return t.store($u).put(ip,r)}))}yi(t){const e=t.store(Xu),r=t.store(oi);return e.J().next((o=>L.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,ya],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ga,c).next((m=>L.forEach(m,(g=>{mt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const p=fa(this.serializer,g);return p1(t,u.userId,p).next((()=>{}))}))))}))))}Si(t){const e=t.store(Go),r=t.store(ca);return t.store(_a).get(Cf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Kt(c),p=(function(T){return[0,on(T)]})(g);u.push(e.get(p).next((E=>E?L.resolve():(T=>e.put({targetId:0,path:on(T),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>L.waitFor(u)))}))}bi(t,e){t.createObjectStore(Ju,{keyPath:BC});const r=e.store(Ju),o=new iy,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:on(g)})}};return e.store(ca).ee({X:!0},((c,m)=>{const g=new Kt(c);return u(g.popLast())})).next((()=>e.store(Fo).ee({X:!0},(([c,m,g],p)=>{const E=ki(m);return u(E.popLast())}))))}Di(t){const e=t.store(Ho);return e.ee(((r,o)=>{const u=Nu(o),c=h1(this.serializer,u);return e.put(c)}))}Ci(t,e){const r=e.store(ca),o=[];return r.ee(((u,c)=>{const m=e.store(Rf),g=(function(T){return T.document?new rt(Kt.fromString(T.document.name).popFirst(5)):T.noDocument?rt.fromSegments(T.noDocument.path):T.unknownDocument?rt.fromSegments(T.unknownDocument.path):ct(36783)})(c).path.toArray(),p={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(p))})).next((()=>L.waitFor(o)))}Fi(t,e){const r=e.store(oi),o=S1(this.serializer),u=new sy(dd.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let p=m.get(g.userId)??Nt();fa(this.serializer,g).keys().forEach((E=>p=p.add(E))),m.set(g.userId,p)})),L.forEach(m,((g,p)=>{const E=new nn(p),T=hd.wt(this.serializer,E),b=u.getIndexManager(E),M=fd.wt(E,this.serializer,b,u.referenceDelegate);return new b1(o,M,T,b).recalculateAndSaveOverlaysForDocumentKeys(new ap(e,vn.ce),g).next()}))}))}}function k0(s){s.createObjectStore(Go,{keyPath:UC}).createIndex(jp,zC,{unique:!0}),s.createObjectStore(Ho,{keyPath:"targetId"}).createIndex(oS,LC,{unique:!0}),s.createObjectStore(_a)}const as="IndexedDbPersistence",zg=18e5,Bg=5e3,jg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yx="main";class ay{constructor(t,e,r,o,u,c,m,g,p,E,T=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=p,this.Oi=E,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!ay.v())throw new et(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rx(this,o),this.$i=e+yx,this.serializer=new c1(g),this.Ui=new vs(this.$i,this.Ni,new px(this.serializer)),this.hi=new QD,this.Pi=new ex(this.referenceDelegate,this.serializer),this.remoteDocumentCache=S1(this.serializer),this.Ii=new KD,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&Te(as,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(Q.FAILED_PRECONDITION,jg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new vn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>nf(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(Rs(t))return tt(as,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(as,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Iu(t).get(bo).next((e=>L.resolve(this.es(e))))}ts(t){return nf(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,zg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=je(e,Ko);return r.J().next((o=>{const u=this.ss(o,zg),c=o.filter((m=>u.indexOf(m)===-1));return L.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?L.resolve(!0):Iu(t).get(bo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Bg)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new et(Q.FAILED_PRECONDITION,jg);return!1}}return!(!this.networkEnabled||!this.inForeground)||nf(t).J().next((r=>this.ss(r,Bg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(as,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[hc,Ko],(t=>{const e=new ap(t,vn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>nf(t).J().next((e=>this.ss(e,zg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return fd.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new tx(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return hd.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(as,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?nD:g===17?mS:g===16?eD:g===15?Hp:g===14?dS:g===13?fS:g===12?tD:g===11?hS:void ct(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new ap(m,this.ci?this.ci.next():vn.ce),e==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw Te(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new et(Q.FAILED_PRECONDITION,eS);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return Iu(t).get(bo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,Bg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new et(Q.FAILED_PRECONDITION,jg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Iu(t).put(bo,e)}static v(){return vs.v()}Zi(t){const e=Iu(t);return e.get(bo).next((r=>this.es(r)?(tt(as,"Releasing primary lease."),e.delete(bo)):L.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(Te(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;PA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){try{const e=this.Ki?.getItem(this._s(t))!==null;return tt(as,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return Te(as,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){Te("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Iu(s){return je(s,hc)}function nf(s){return je(s,Ko)}function I1(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}class oy{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Nt(),o=Nt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new oy(t,e.fromCache,r,o)}}class _x{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class w1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return PA()?8:iS(Be())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new _x;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(xo()<=kt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",No(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(xo()<=kt.DEBUG&&tt("QueryEngine","Query:",No(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(xo()<=kt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",No(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,On(e))):L.resolve())}ys(t,e){if(a0(e))return L.resolve(null);let r=On(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=Vf(e,null,"F"),r=On(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Nt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const p=this.Ds(e,m);return this.Cs(e,p,c,g.readTime)?this.ys(t,Vf(e,null,"F")):this.vs(t,p,e,g)}))))})))))}ws(t,e,r,o){return a0(e)||o.isEqual(pt.min())?L.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?L.resolve(null):(xo()<=kt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(e)),this.vs(t,c,e,ZA(o,qo)).next((m=>m)))}))}Ds(t,e){let r=new Zt(kS(t));return e.forEach(((o,u)=>{dc(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return xo()<=kt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",No(e)),this.ps.getDocumentsMatchingQuery(t,e,Mn.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const ly="LocalStore",vx=3e8;class Ex{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new se(St),this.xs=new vr((u=>wa(u)),fc),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new b1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function R1(s,t,e,r){return new Ex(s,t,e,r)}async function C1(s,t){const e=ft(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Nt();for(const p of o){c.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}for(const p of u){m.push(p.batchId);for(const E of p.mutations)g=g.add(E.key)}return e.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function Tx(s,t){const e=ft(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,p,E){const T=p.batch,b=T.keys();let M=L.resolve();return b.forEach((G=>{M=M.next((()=>E.getEntry(g,G))).next((W=>{const Z=p.docVersions.get(G);mt(Z!==null,48541),W.version.compareTo(Z)<0&&(T.applyToRemoteDocument(W,p),W.isValidDocument()&&(W.setReadTime(p.commitVersion),E.addEntry(W)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(g,T)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Nt();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(g=g.add(m.batch.mutations[p].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function D1(s){const t=ft(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function Ax(s,t){const e=ft(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((E,T)=>{const b=o.get(T);if(!b)return;m.push(e.Pi.removeMatchingKeys(u,E.removedDocuments,T).next((()=>e.Pi.addMatchingKeys(u,E.addedDocuments,T))));let M=b.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(T)!==null?M=M.withResumeToken(Se.EMPTY_BYTE_STRING,pt.min()).withLastLimboFreeSnapshotVersion(pt.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,r)),o=o.insert(T,M),(function(W,Z,st){return W.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=vx?!0:st.addedDocuments.size+st.modifiedDocuments.size+st.removedDocuments.size>0})(b,M,E)&&m.push(e.Pi.updateTargetData(u,M))}));let g=Vn(),p=Nt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(Sx(u,c,t.documentUpdates).next((E=>{g=E.ks,p=E.qs}))),!r.isEqual(pt.min())){const E=e.Pi.getLastRemoteSnapshotVersion(u).next((T=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return L.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function Sx(s,t,e){let r=Nt(),o=Nt();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Vn();return e.forEach(((m,g)=>{const p=u.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(pt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):tt(ly,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function bx(s,t){const e=ft(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ya),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function zf(s,t){const e=ft(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,L.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new ur(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function el(s,t,e){const r=ft(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Rs(c))throw c;tt(ly,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function Ep(s,t,e){const r=ft(s);let o=pt.min(),u=Nt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,E){const T=ft(g),b=T.xs.get(E);return b!==void 0?L.resolve(T.Ms.get(b)):T.Pi.getTargetData(p,E)})(r,c,On(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:pt.min(),e?u:Nt()))).next((m=>(V1(r,PS(t),m),{documents:m,Qs:u})))))}function x1(s,t){const e=ft(s),r=ft(e.Pi),o=e.Ms.get(t);return o?Promise.resolve(o.target):e.persistence.runTransaction("Get target data","readonly",(u=>r.At(u,t).next((c=>c?c.target:null))))}function N1(s,t){const e=ft(s),r=e.Os.get(t)||pt.min();return e.persistence.runTransaction("Get new document changes","readonly",(o=>e.Ns.getAllFromCollectionGroup(o,t,ZA(r,qo),Number.MAX_SAFE_INTEGER))).then((o=>(V1(e,t,o),o)))}function V1(s,t,e){let r=s.Os.get(t)||pt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}const O1="firestore_clients";function L0(s,t){return`${O1}_${s}_${t}`}const M1="firestore_mutations";function U0(s,t,e){let r=`${M1}_${s}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}const P1="firestore_targets";function qg(s,t){return`${P1}_${s}_${t}`}const Mi="SharedClientState";class Bf{constructor(t,e,r,o){this.user=t,this.batchId=e,this.state=r,this.error=o}static Ws(t,e,r){const o=JSON.parse(r);let u,c=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return c&&o.error&&(c=typeof o.error.message=="string"&&typeof o.error.code=="string",c&&(u=new et(o.error.code,o.error.message))),c?new Bf(t,e,o.state,u):(Te(Mi,`Failed to parse mutation state for ID '${e}': ${r}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class qu{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Ws(t,e){const r=JSON.parse(e);let o,u=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return u&&r.error&&(u=typeof r.error.message=="string"&&typeof r.error.code=="string",u&&(o=new et(r.error.code,r.error.message))),u?new qu(t,r.state,o):(Te(Mi,`Failed to parse target state for ID '${t}': ${e}`),null)}Gs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class jf{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Ws(t,e){const r=JSON.parse(e);let o=typeof r=="object"&&r.activeTargetIds instanceof Array,u=Xp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=rS(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new jf(t,u):(Te(Mi,`Failed to parse client data for instance '${t}': ${e}`),null)}}class uy{constructor(t,e){this.clientId=t,this.onlineState=e}static Ws(t){const e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new uy(e.clientId,e.onlineState):(Te(Mi,`Failed to parse online state: ${t}`),null)}}class Tp{constructor(){this.activeTargetIds=Xp()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fg{constructor(t,e,r,o,u){this.window=t,this.Mi=e,this.persistenceKey=r,this.Js=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new se(St),this.started=!1,this.Xs=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.eo=L0(this.persistenceKey,this.Js),this.no=(function(g){return`firestore_sequence_number_${g}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Tp),this.ro=new RegExp(`^${O1}_${c}_([^_]*)$`),this.io=new RegExp(`^${M1}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${P1}_${c}_(\\d+)$`),this.oo=(function(g){return`firestore_online_state_${g}`})(this.persistenceKey),this._o=(function(g){return`firestore_bundle_loaded_v2_${g}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Ts();for(const r of t){if(r===this.Js)continue;const o=this.getItem(L0(this.persistenceKey,r));if(o){const u=jf.Ws(r,o);u&&(this.Zs=this.Zs.insert(u.clientId,u))}}this.ao();const e=this.storage.getItem(this.oo);if(e){const r=this.uo(e);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.no,JSON.stringify(t))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(t){let e=!1;return this.Zs.forEach(((r,o)=>{o.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.ho(t,"pending")}updateMutationState(t,e,r){this.ho(t,e,r),this.Po(t)}addLocalQueryTarget(t,e=!0){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem(qg(this.persistenceKey,t));if(o){const u=qu.Ws(t,o);u&&(r=u.state)}}return e&&this.To.zs(t),this.ao(),r}removeLocalQueryTarget(t){this.To.js(t),this.ao()}isLocalQueryTarget(t){return this.To.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(qg(this.persistenceKey,t))}updateQueryState(t,e,r){this.Io(t,e,r)}handleUserChange(t,e,r){e.forEach((o=>{this.Po(o)})),this.currentUser=t,r.forEach((o=>{this.addPendingMutation(o)}))}setOnlineState(t){this.Eo(t)}notifyBundleLoaded(t){this.Ao(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return tt(Mi,"READ",t,e),e}setItem(t,e){tt(Mi,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){tt(Mi,"REMOVE",t),this.storage.removeItem(t)}Ys(t){const e=t;if(e.storageArea===this.storage){if(tt(Mi,"EVENT",e.key,e.newValue),e.key===this.eo)return void Te("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(e.key!==null){if(this.ro.test(e.key)){if(e.newValue==null){const r=this.Ro(e.key);return this.Vo(r,null)}{const r=this.mo(e.key,e.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(e.key)){if(e.newValue!==null){const r=this.fo(e.key,e.newValue);if(r)return this.po(r)}}else if(this.so.test(e.key)){if(e.newValue!==null){const r=this.yo(e.key,e.newValue);if(r)return this.wo(r)}}else if(e.key===this.oo){if(e.newValue!==null){const r=this.uo(e.newValue);if(r)return this.co(r)}}else if(e.key===this.no){const r=(function(u){let c=vn.ce;if(u!=null)try{const m=JSON.parse(u);mt(typeof m=="number",30636,{So:u}),c=m}catch(m){Te(Mi,"Failed to read sequence number from WebStorage",m)}return c})(e.newValue);r!==vn.ce&&this.sequenceNumberHandler(r)}else if(e.key===this._o){const r=this.bo(e.newValue);await Promise.all(r.map((o=>this.syncEngine.Do(o))))}}}else this.Xs.push(e)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(t,e,r){const o=new Bf(this.currentUser,t,e,r),u=U0(this.persistenceKey,this.currentUser,t);this.setItem(u,o.Gs())}Po(t){const e=U0(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Eo(t){const e={clientId:this.Js,onlineState:t};this.storage.setItem(this.oo,JSON.stringify(e))}Io(t,e,r){const o=qg(this.persistenceKey,t),u=new qu(t,e,r);this.setItem(o,u.Gs())}Ao(t){const e=JSON.stringify(Array.from(t));this.setItem(this._o,e)}Ro(t){const e=this.ro.exec(t);return e?e[1]:null}mo(t,e){const r=this.Ro(t);return jf.Ws(r,e)}fo(t,e){const r=this.io.exec(t),o=Number(r[1]),u=r[2]!==void 0?r[2]:null;return Bf.Ws(new nn(u),o,e)}yo(t,e){const r=this.so.exec(t),o=Number(r[1]);return qu.Ws(o,e)}uo(t){return uy.Ws(t)}bo(t){return JSON.parse(t)}async po(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Co(t.batchId,t.state,t.error);tt(Mi,`Ignoring mutation for non-active user ${t.user.uid}`)}wo(t){return this.syncEngine.vo(t.targetId,t.state,t.error)}Vo(t,e){const r=e?this.Zs.insert(t,e):this.Zs.remove(t),o=this.lo(this.Zs),u=this.lo(r),c=[],m=[];return u.forEach((g=>{o.has(g)||c.push(g)})),o.forEach((g=>{u.has(g)||m.push(g)})),this.syncEngine.Fo(c,m).then((()=>{this.Zs=r}))}co(t){this.Zs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}lo(t){let e=Xp();return t.forEach(((r,o)=>{e=e.unionWith(o.activeTargetIds)})),e}}class k1{constructor(){this.Mo=new Tp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Tp,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ix{Oo(t){}shutdown(){}}const z0="ConnectivityMonitor";class B0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(z0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(z0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rf=null;function Ap(){return rf===null?rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():rf++,"0x"+rf.toString(16)}const Hg="RestConnection",wx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rx{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Df?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=Ap(),m=this.zo(t,e.toUriEncodedString());tt(Hg,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:p}=new URL(m),E=al(p);return this.Jo(t,m,g,r,E).then((T=>(tt(Hg,`Received RPC '${t}' ${c}: `,T),T)),(T=>{throw Ku(Hg,`RPC '${t}' ${c} failed with error: `,T,"url: ",m,"request:",r),T}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ll})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=wx[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}class Cx{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const en="WebChannelConnection";class Dx extends Rx{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=Ap();return new Promise(((m,g)=>{const p=new HA;p.setWithCredentials(!0),p.listenOnce(GA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case of.NO_ERROR:const T=p.getResponseJson();tt(en,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(T)),m(T);break;case of.TIMEOUT:tt(en,`RPC '${t}' ${c} timed out`),g(new et(Q.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const b=p.getStatus();if(tt(en,`RPC '${t}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const G=M?.error;if(G&&G.status&&G.message){const W=(function(st){const lt=st.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(lt)>=0?lt:Q.UNKNOWN})(G.status);g(new et(W,G.message))}else g(new et(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new et(Q.UNAVAILABLE,"Connection failed."));break;default:ct(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{tt(en,`RPC '${t}' ${c} completed.`)}}));const E=JSON.stringify(o);tt(en,`RPC '${t}' ${c} sending request:`,o),p.send(e,"POST",E,r,15)}))}T_(t,e,r){const o=Ap(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=YA(),m=QA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const E=u.join("");tt(en,`Creating RPC '${t}' stream ${o}: ${E}`,g);const T=c.createWebChannel(E,g);this.I_(T);let b=!1,M=!1;const G=new Cx({Yo:Z=>{M?tt(en,`Not sending because RPC '${t}' stream ${o} is closed:`,Z):(b||(tt(en,`Opening RPC '${t}' stream ${o} transport.`),T.open(),b=!0),tt(en,`RPC '${t}' stream ${o} sending:`,Z),T.send(Z))},Zo:()=>T.close()}),W=(Z,st,lt)=>{Z.listen(st,(nt=>{try{lt(nt)}catch(_t){setTimeout((()=>{throw _t}),0)}}))};return W(T,Cu.EventType.OPEN,(()=>{M||(tt(en,`RPC '${t}' stream ${o} transport opened.`),G.o_())})),W(T,Cu.EventType.CLOSE,(()=>{M||(M=!0,tt(en,`RPC '${t}' stream ${o} transport closed`),G.a_(),this.E_(T))})),W(T,Cu.EventType.ERROR,(Z=>{M||(M=!0,Ku(en,`RPC '${t}' stream ${o} transport errored. Name:`,Z.name,"Message:",Z.message),G.a_(new et(Q.UNAVAILABLE,"The operation could not be completed")))})),W(T,Cu.EventType.MESSAGE,(Z=>{if(!M){const st=Z.data[0];mt(!!st,16349);const lt=st,nt=lt?.error||lt[0]?.error;if(nt){tt(en,`RPC '${t}' stream ${o} received error:`,nt);const _t=nt.status;let It=(function(I){const D=Me[I];if(D!==void 0)return $S(D)})(_t),Et=nt.message;It===void 0&&(It=Q.INTERNAL,Et="Unknown error status: "+_t+" with message "+nt.message),M=!0,G.a_(new et(It,Et)),T.close()}else tt(en,`RPC '${t}' stream ${o} received:`,st),G.u_(st)}})),W(m,KA.STAT_EVENT,(Z=>{Z.stat===tp.PROXY?tt(en,`RPC '${t}' stream ${o} detected buffering proxy`):Z.stat===tp.NOPROXY&&tt(en,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{G.__()}),0),G}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function L1(){return typeof window<"u"?window:null}function yf(){return typeof document<"u"?document:null}function md(s){return new PD(s,!0)}class U1{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const j0="PersistentStream";class z1{constructor(t,e,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U1(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===Q.RESOURCE_EXHAUSTED?(Te(e.toString()),Te("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new et(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(j0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(j0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xx extends z1{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=UD(this.serializer,t),r=(function(u){if(!("targetChange"in u))return pt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?pt.min():c.readTime?hn(c.readTime):pt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=gp(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=xf(g)?{documents:r1(u,g)}:{query:s1(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=ZS(u,c.resumeToken);const p=dp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(pt.min())>0){m.readTime=tl(u,c.snapshotVersion.toTimestamp());const p=dp(u,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,t);const r=BD(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=gp(this.serializer),e.removeTarget=t,this.q_(e)}}class Nx extends z1{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return mt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,mt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){mt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=zD(t.writeResults,t.commitTime),r=hn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=gp(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>Mf(this.serializer,r)))};this.q_(e)}}class Vx{}class Ox extends Vx{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new et(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,mp(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new et(Q.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,mp(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new et(Q.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Mx{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Te(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const xa="RemoteStore";class Px{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Va(this)&&(tt(xa,"Restarting streams for network reachability change."),await(async function(g){const p=ft(g);p.Ea.add(4),await pc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await gd(p)})(this))}))})),this.Ra=new Mx(r,o)}}async function gd(s){if(Va(s))for(const t of s.da)await t(!0)}async function pc(s){for(const t of s.da)await t(!1)}function pd(s,t){const e=ft(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),fy(e)?hy(e):fl(e).O_()&&cy(e,t))}function nl(s,t){const e=ft(s),r=fl(e);e.Ia.delete(t),r.O_()&&B1(e,t),e.Ia.size===0&&(r.O_()?r.L_():Va(e)&&e.Ra.set("Unknown"))}function cy(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}fl(s).Y_(t)}function B1(s,t){s.Va.Ue(t),fl(s).Z_(t)}function hy(s){s.Va=new ND({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),fl(s).start(),s.Ra.ua()}function fy(s){return Va(s)&&!fl(s).x_()&&s.Ia.size>0}function Va(s){return ft(s).Ea.size===0}function j1(s){s.Va=void 0}async function kx(s){s.Ra.set("Online")}async function Lx(s){s.Ia.forEach(((t,e)=>{cy(s,t)}))}async function Ux(s,t){j1(s),fy(s)?(s.Ra.ha(t),hy(s)):s.Ra.set("Unknown")}async function zx(s,t,e){if(s.Ra.set("Online"),t instanceof WS&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(xa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await qf(s,r)}else if(t instanceof gf?s.Va.Ze(t):t instanceof JS?s.Va.st(t):s.Va.tt(t),!e.isEqual(pt.min()))try{const r=await D1(s.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(p);E&&u.Ia.set(p,E.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Se.EMPTY_BYTE_STRING,E.snapshotVersion)),B1(u,g);const T=new ur(E.target,g,p,E.sequenceNumber);cy(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(xa,"Failed to raise snapshot:",r),await qf(s,r)}}async function qf(s,t,e){if(!Rs(t))throw t;s.Ea.add(1),await pc(s),s.Ra.set("Offline"),e||(e=()=>D1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(xa,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await gd(s)}))}function q1(s,t){return t().catch((e=>qf(s,e,t)))}async function hl(s){const t=ft(s),e=Ss(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ya;for(;Bx(t);)try{const o=await bx(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,jx(t,o)}catch(o){await qf(t,o)}F1(t)&&H1(t)}function Bx(s){return Va(s)&&s.Ta.length<10}function jx(s,t){s.Ta.push(t);const e=Ss(s);e.O_()&&e.X_&&e.ea(t.mutations)}function F1(s){return Va(s)&&!Ss(s).x_()&&s.Ta.length>0}function H1(s){Ss(s).start()}async function qx(s){Ss(s).ra()}async function Fx(s){const t=Ss(s);for(const e of s.Ta)t.ea(e.mutations)}async function Hx(s,t,e){const r=s.Ta.shift(),o=Wp.from(r,t,e);await q1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await hl(s)}async function Gx(s,t){t&&Ss(s).X_&&await(async function(r,o){if((function(c){return CD(c)&&c!==Q.ABORTED})(o.code)){const u=r.Ta.shift();Ss(r).B_(),await q1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await hl(r)}})(s,t),F1(s)&&H1(s)}async function q0(s,t){const e=ft(s);e.asyncQueue.verifyOperationInProgress(),tt(xa,"RemoteStore received new credentials");const r=Va(e);e.Ea.add(3),await pc(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await gd(e)}async function Sp(s,t){const e=ft(s);t?(e.Ea.delete(2),await gd(e)):t||(e.Ea.add(2),await pc(e),e.Ra.set("Unknown"))}function fl(s){return s.ma||(s.ma=(function(e,r,o){const u=ft(e);return u.sa(),new xx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:kx.bind(null,s),t_:Lx.bind(null,s),r_:Ux.bind(null,s),H_:zx.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),fy(s)?hy(s):s.Ra.set("Unknown")):(await s.ma.stop(),j1(s))}))),s.ma}function Ss(s){return s.fa||(s.fa=(function(e,r,o){const u=ft(e);return u.sa(),new Nx(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:qx.bind(null,s),r_:Gx.bind(null,s),ta:Fx.bind(null,s),na:Hx.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await hl(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(xa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dy{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new dy(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Q.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(s,t){if(Te("AsyncQueue",`${t}: ${s}`),Rs(s))return new et(Q.UNAVAILABLE,`${t}: ${s}`);throw s}class ko{static emptySet(t){return new ko(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||rt.comparator(e.key,r.key):(e,r)=>rt.comparator(e.key,r.key),this.keyedMap=Du(),this.sortedSet=new se(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new ko;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class F0{constructor(){this.ga=new se(rt.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ct(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class il{constructor(t,e,r,o,u,c,m,g,p){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new il(t,e,ko.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&od(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}class Kx{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class Qx{constructor(){this.queries=H0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=ft(e),u=o.queries;o.queries=H0(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new et(Q.ABORTED,"Firestore shutting down"))}}function H0(){return new vr((s=>MS(s)),od)}async function G1(s,t){const e=ft(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new Kx,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=my(c,`Initialization of query '${No(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&gy(e)}async function K1(s,t){const e=ft(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function Yx(s,t){const e=ft(s);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&gy(e)}function Xx(s,t,e){const r=ft(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function gy(s){s.Ca.forEach((t=>{t.next()}))}var bp,G0;(G0=bp||(bp={})).Ma="default",G0.Cache="cache";class Q1{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new il(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=il.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==bp.Cache}}class Y1{constructor(t){this.key=t}}class X1{constructor(t){this.key=t}}class $x{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nt(),this.mutatedKeys=Nt(),this.eu=kS(t),this.tu=new ko(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new F0,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,T)=>{const b=o.get(E),M=dc(this.query,T)?T:null,G=!!b&&this.mutatedKeys.has(b.key),W=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let Z=!1;b&&M?b.data.isEqual(M.data)?G!==W&&(r.track({type:3,doc:M}),Z=!0):this.su(b,M)||(r.track({type:2,doc:M}),Z=!0,(g&&this.eu(M,g)>0||p&&this.eu(M,p)<0)&&(m=!0)):!b&&M?(r.track({type:0,doc:M}),Z=!0):b&&!M&&(r.track({type:1,doc:b}),Z=!0,(g||p)&&(m=!0)),Z&&(M?(c=c.add(M),u=W?u.add(E):u.delete(E)):(c=c.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((E,T)=>(function(M,G){const W=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct(20277,{Rt:Z})}};return W(M)-W(G)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new il(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new X1(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new Y1(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Nt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return il.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dl="SyncEngine";class Jx{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Wx{constructor(t){this.key=t,this.hu=!1}}class Zx{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new vr((m=>MS(m)),od),this.Iu=new Map,this.Eu=new Set,this.du=new se(rt.comparator),this.Au=new Map,this.Ru=new ry,this.Vu={},this.mu=new Map,this.fu=Da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tN(s,t,e=!0){const r=yd(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await $1(r,t,e,!0),o}async function eN(s,t){const e=yd(s);await $1(e,t,!0,!1)}async function $1(s,t,e,r){const o=await zf(s.localStore,On(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await py(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&e&&pd(s.remoteStore,o),m}async function py(s,t,e,r,o){s.pu=(T,b,M)=>(async function(W,Z,st,lt){let nt=Z.view.ru(st);nt.Cs&&(nt=await Ep(W.localStore,Z.query,!1).then((({documents:w})=>Z.view.ru(w,nt))));const _t=lt&&lt.targetChanges.get(Z.targetId),It=lt&&lt.targetMismatches.get(Z.targetId)!=null,Et=Z.view.applyChanges(nt,W.isPrimaryClient,_t,It);return Ip(W,Z.targetId,Et.au),Et.snapshot})(s,T,b,M);const u=await Ep(s.localStore,t,!0),c=new $x(t,u.Qs),m=c.ru(u.documents),g=gc.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),p=c.applyChanges(m,s.isPrimaryClient,g);Ip(s,e,p.au);const E=new Jx(t,e,c);return s.Tu.set(t,E),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),p.snapshot}async function nN(s,t,e){const r=ft(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!od(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await el(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&nl(r.remoteStore,o.targetId),rl(r,o.targetId)})).catch(ws)):(rl(r,o.targetId),await el(r.localStore,o.targetId,!0))}async function iN(s,t){const e=ft(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),nl(e.remoteStore,r.targetId))}async function rN(s,t,e){const r=Ey(s);try{const o=await(function(c,m){const g=ft(c),p=Jt.now(),E=m.reduce(((M,G)=>M.add(G.key)),Nt());let T,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let G=Vn(),W=Nt();return g.Ns.getEntries(M,E).next((Z=>{G=Z,G.forEach(((st,lt)=>{lt.isValidDocument()||(W=W.add(st))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,G))).next((Z=>{T=Z;const st=[];for(const lt of m){const nt=wD(lt,T.get(lt.key).overlayedDocument);nt!=null&&st.push(new Er(lt.key,nt,bS(nt.value.mapValue),an.exists(!0)))}return g.mutationQueue.addMutationBatch(M,p,st,m)})).next((Z=>{b=Z;const st=Z.applyToLocalDocumentSet(T,W);return g.documentOverlayCache.saveOverlays(M,Z.batchId,st)}))})).then((()=>({batchId:b.batchId,changes:US(T)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new se(St)),p=p.insert(m,g),c.Vu[c.currentUser.toKey()]=p})(r,o.batchId,e),await Ds(r,o.changes),await hl(r.remoteStore)}catch(o){const u=my(o,"Failed to persist write");e.reject(u)}}async function J1(s,t){const e=ft(s);try{const r=await Ax(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?mt(c.hu,14607):o.removedDocuments.size>0&&(mt(c.hu,42227),c.hu=!1))})),await Ds(e,r,t)}catch(r){await ws(r)}}function K0(s,t,e){const r=ft(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=ft(c);g.onlineState=m;let p=!1;g.queries.forEach(((E,T)=>{for(const b of T.Sa)b.va(m)&&(p=!0)})),p&&gy(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sN(s,t,e){const r=ft(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new se(rt.comparator);c=c.insert(u,pe.newNoDocument(u,pt.min()));const m=Nt().add(u),g=new mc(pt.min(),new Map,new se(St),c,m);await J1(r,g),r.du=r.du.remove(u),r.Au.delete(t),vy(r)}else await el(r.localStore,t,!1).then((()=>rl(r,t,e))).catch(ws)}async function aN(s,t){const e=ft(s),r=t.batch.batchId;try{const o=await Tx(e.localStore,t);_y(e,r,null),yy(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Ds(e,o)}catch(o){await ws(o)}}async function oN(s,t,e){const r=ft(s);try{const o=await(function(c,m){const g=ft(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let E;return g.mutationQueue.lookupMutationBatch(p,m).next((T=>(mt(T!==null,37113),E=T.keys(),g.mutationQueue.removeMutationBatch(p,T)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E))).next((()=>g.localDocuments.getDocuments(p,E)))}))})(r.localStore,t);_y(r,t,e),yy(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Ds(r,o)}catch(o){await ws(o)}}function yy(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function _y(s,t,e){const r=ft(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function rl(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||W1(s,r)}))}function W1(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(nl(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),vy(s))}function Ip(s,t,e){for(const r of e)r instanceof Y1?(s.Ru.addReference(r.key,t),lN(s,r)):r instanceof X1?(tt(dl,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||W1(s,r.key)):ct(19791,{wu:r})}function lN(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt(dl,"New document in limbo: "+e),s.Eu.add(r),vy(s))}function vy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new rt(Kt.fromString(t)),r=s.fu.next();s.Au.set(r,new Wx(e)),s.du=s.du.insert(e,r),pd(s.remoteStore,new ur(On(ad(e.path)),r,"TargetPurposeLimboResolution",vn.ce))}}async function Ds(s,t,e){const r=ft(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((p=>{if((p||e)&&r.isPrimaryClient){const E=p?!p.fromCache:e?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){o.push(p);const E=oy.As(g.targetId,p);u.push(E)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,p){const E=ft(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(p,(b=>L.forEach(b.Es,(M=>E.persistence.referenceDelegate.addReference(T,b.targetId,M))).next((()=>L.forEach(b.ds,(M=>E.persistence.referenceDelegate.removeReference(T,b.targetId,M)))))))))}catch(T){if(!Rs(T))throw T;tt(ly,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const M=E.Ms.get(b),G=M.snapshotVersion,W=M.withLastLimboFreeSnapshotVersion(G);E.Ms=E.Ms.insert(b,W)}}})(r.localStore,u))}async function uN(s,t){const e=ft(s);if(!e.currentUser.isEqual(t)){tt(dl,"User change. New user:",t.toKey());const r=await C1(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new et(Q.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ds(e,r.Ls)}}function cN(s,t){const e=ft(s),r=e.Au.get(t);if(r&&r.hu)return Nt().add(r.key);{let o=Nt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}async function hN(s,t){const e=ft(s),r=await Ep(e.localStore,t.query,!0),o=t.view.cu(r);return e.isPrimaryClient&&Ip(e,t.targetId,o.au),o}async function fN(s,t){const e=ft(s);return N1(e.localStore,t).then((r=>Ds(e,r)))}async function dN(s,t,e,r){const o=ft(s),u=await(function(m,g){const p=ft(m),E=ft(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(T=>E.er(T,g).next((b=>b?p.localDocuments.getDocuments(T,b):L.resolve(null)))))})(o.localStore,t);u!==null?(e==="pending"?await hl(o.remoteStore):e==="acknowledged"||e==="rejected"?(_y(o,t,r||null),yy(o,t),(function(m,g){ft(ft(m).mutationQueue).ir(g)})(o.localStore,t)):ct(6720,"Unknown batchState",{Su:e}),await Ds(o,u)):tt(dl,"Cannot apply mutation batch with id: "+t)}async function mN(s,t){const e=ft(s);if(yd(e),Ey(e),t===!0&&e.gu!==!0){const r=e.sharedClientState.getAllActiveQueryTargets(),o=await Q0(e,r.toArray());e.gu=!0,await Sp(e.remoteStore,!0);for(const u of o)pd(e.remoteStore,u)}else if(t===!1&&e.gu!==!1){const r=[];let o=Promise.resolve();e.Iu.forEach(((u,c)=>{e.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then((()=>(rl(e,c),el(e.localStore,c,!0)))),nl(e.remoteStore,c)})),await o,await Q0(e,r),(function(c){const m=ft(c);m.Au.forEach(((g,p)=>{nl(m.remoteStore,p)})),m.Ru.Jr(),m.Au=new Map,m.du=new se(rt.comparator)})(e),e.gu=!1,await Sp(e.remoteStore,!1)}}async function Q0(s,t,e){const r=ft(s),o=[],u=[];for(const c of t){let m;const g=r.Iu.get(c);if(g&&g.length!==0){m=await zf(r.localStore,On(g[0]));for(const p of g){const E=r.Tu.get(p),T=await hN(r,E);T.snapshot&&u.push(T.snapshot)}}else{const p=await x1(r.localStore,c);m=await zf(r.localStore,p),await py(r,Z1(p),c,!1,m.resumeToken)}o.push(m)}return r.Pu.H_(u),o}function Z1(s){return VS(s.path,s.collectionGroup,s.orderBy,s.filters,s.limit,"F",s.startAt,s.endAt)}function gN(s){return(function(e){return ft(ft(e).persistence).Ts()})(ft(s).localStore)}async function pN(s,t,e,r){const o=ft(s);if(o.gu)return void tt(dl,"Ignoring unexpected query state notification.");const u=o.Iu.get(t);if(u&&u.length>0)switch(e){case"current":case"not-current":{const c=await N1(o.localStore,PS(u[0])),m=mc.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Se.EMPTY_BYTE_STRING);await Ds(o,c,m);break}case"rejected":await el(o.localStore,t,!0),rl(o,t,r);break;default:ct(64155,e)}}async function yN(s,t,e){const r=yd(s);if(r.gu){for(const o of t){if(r.Iu.has(o)&&r.sharedClientState.isActiveQueryTarget(o)){tt(dl,"Adding an already active target "+o);continue}const u=await x1(r.localStore,o),c=await zf(r.localStore,u);await py(r,Z1(u),c.targetId,!1,c.resumeToken),pd(r.remoteStore,c)}for(const o of e)r.Iu.has(o)&&await el(r.localStore,o,!1).then((()=>{nl(r.remoteStore,o),rl(r,o)})).catch(ws)}}function yd(s){const t=ft(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=J1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sN.bind(null,t),t.Pu.H_=Yx.bind(null,t.eventManager),t.Pu.yu=Xx.bind(null,t.eventManager),t}function Ey(s){const t=ft(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=aN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oN.bind(null,t),t}class rc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=md(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return R1(this.persistence,new w1,t.initialUser,this.serializer)}Cu(t){return new sy(dd.mi,this.serializer)}Du(t){return new k1}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rc.provider={build:()=>new rc};class _N extends rc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){mt(this.persistence.referenceDelegate instanceof Uf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new E1(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new sy((r=>Uf.mi(r,e)),this.serializer)}}class tb extends rc{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await Ey(this.xu.syncEngine),await hl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return R1(this.persistence,new w1,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new E1(r,t.asyncQueue,e)}Mu(t,e){const r=new xC(e,this.persistence);return new DC(t.asyncQueue,r)}Cu(t){const e=I1(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ay(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,L1(),yf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new k1}}class vN extends tb{constructor(t,e){super(t,e,!1),this.xu=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.xu.syncEngine;this.sharedClientState instanceof Fg&&(this.sharedClientState.syncEngine={Co:dN.bind(null,e),vo:pN.bind(null,e),Fo:yN.bind(null,e),Ts:gN.bind(null,e),Do:fN.bind(null,e)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await mN(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(t){const e=L1();if(!Fg.v(e))throw new et(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=I1(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fg(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class sc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>K0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uN.bind(null,this.syncEngine),await Sp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Qx})()}createDatastore(t){const e=md(t.databaseInfo.databaseId),r=(function(u){return new Dx(u)})(t.databaseInfo);return(function(u,c,m,g){return new Ox(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new Px(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>K0(this.syncEngine,e,0)),(function(){return B0.v()?new B0:new Ix})())}createSyncEngine(t,e){return(function(o,u,c,m,g,p,E){const T=new Zx(o,u,c,m,g,p);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=ft(e);tt(xa,"RemoteStore shutting down."),r.Ea.add(5),await pc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sc.provider={build:()=>new sc};class eb{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Te("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const bs="FirestoreClient";class EN{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{tt(bs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(tt(bs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=my(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Gg(s,t){s.asyncQueue.verifyOperationInProgress(),tt(bs,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await C1(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function Y0(s,t){s.asyncQueue.verifyOperationInProgress();const e=await TN(s);tt(bs,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>q0(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>q0(t.remoteStore,o))),s._onlineComponents=t}async function TN(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(bs,"Using user provided OfflineComponentProvider");try{await Gg(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;Ku("Error using user provided cache. Falling back to memory cache: "+e),await Gg(s,new rc)}}else tt(bs,"Using default OfflineComponentProvider"),await Gg(s,new _N(void 0));return s._offlineComponents}async function nb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(bs,"Using user provided OnlineComponentProvider"),await Y0(s,s._uninitializedComponentsProvider._online)):(tt(bs,"Using default OnlineComponentProvider"),await Y0(s,new sc))),s._onlineComponents}function AN(s){return nb(s).then((t=>t.syncEngine))}async function wp(s){const t=await nb(s),e=t.eventManager;return e.onListen=tN.bind(null,t.syncEngine),e.onUnlisten=nN.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=eN.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=iN.bind(null,t.syncEngine),e}function SN(s,t,e={}){const r=new fr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,c,m,g,p){const E=new eb({next:b=>{E.Nu(),c.enqueueAndForget((()=>K1(u,T))),b.fromCache&&g.source==="server"?p.reject(new et(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new Q1(m,E,{includeMetadataChanges:!0,qa:!0});return G1(u,T)})(await wp(s),s.asyncQueue,t,e,r))),r.promise}function ib(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const X0=new Map;const bN="firestore.googleapis.com",$0=!0;class J0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new et(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bN,this.ssl=$0}else this.host=t.host,this.ssl=t.ssl??$0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=g1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<v1)throw new et(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new et(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new et(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new et(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ty{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new J0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new et(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new J0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yC;switch(r.type){case"firstParty":return new EC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=X0.get(e);r&&(tt("ComponentProvider","Removing Datastore"),X0.delete(e),r.terminate())})(this),Promise.resolve()}}class Tr{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Tr(this.firestore,t,this._query)}}class Ae{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ae(this.firestore,t,this._key)}toJSON(){return{type:Ae._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(cc(e,Ae._jsonSchema))return new Ae(t,r||null,new rt(Kt.fromString(e.referencePath)))}}Ae._jsonSchemaVersion="firestore/documentReference/1.0",Ae._jsonSchema={type:Pe("string",Ae._jsonSchemaVersion),referencePath:Pe("string")};class Es extends Tr{constructor(t,e,r){super(t,e,ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ae(this.firestore,null,new rt(t))}withConverter(t){return new Es(this.firestore,t,this._path)}}function Fu(s,t,...e){if(s=Ke(s),JA("collection","path",t),s instanceof Ty){const r=Kt.fromString(t,...e);return jT(r),new Es(s,null,r)}{if(!(s instanceof Ae||s instanceof Es))throw new et(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Kt.fromString(t,...e));return jT(r),new Es(s.firestore,null,r)}}function sl(s,t,...e){if(s=Ke(s),arguments.length===1&&(t=Up.newId()),JA("doc","path",t),s instanceof Ty){const r=Kt.fromString(t,...e);return BT(r),new Ae(s,null,new rt(r))}{if(!(s instanceof Ae||s instanceof Es))throw new et(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Kt.fromString(t,...e));return BT(r),new Ae(s.firestore,s instanceof Es?s.converter:null,new rt(r))}}const W0="AsyncQueue";class Z0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U1(this,"async_queue_retry"),this._c=()=>{const r=yf();r&&tt(W0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=yf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=yf();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Rs(t))throw t;tt(W0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,Te("INTERNAL UNHANDLED ERROR: ",tA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=dy.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ct(47125,{Pc:tA(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function tA(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}function eA(s){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Is extends Ty{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new Z0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Z0(t),this._firestoreClient=void 0,await t}}}function IN(s,t,e){e||(e=Df);const r=kp(s,"firestore");if(r.isInitialized(e)){const o=r.getImmediate({identifier:e}),u=r.getOptions(e);if(Aa(u,t))return o;throw new et(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new et(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<v1)throw new et(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&al(t.host)&&OA(t.host),r.initialize({options:t,instanceIdentifier:e})}function Ay(s){if(s._terminated)throw new et(Q.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||wN(s),s._firestoreClient}function wN(s){const t=s._freezeSettings(),e=(function(o,u,c,m){return new rD(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ib(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new EN(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Yn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yn(Se.fromBase64String(t))}catch(e){throw new et(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Yn(Se.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(cc(t,Yn._jsonSchema))return Yn.fromBase64String(t.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Pe("string",Yn._jsonSchemaVersion),bytes:Pe("string")};class _d{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new et(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class vd{constructor(t){this._methodName=t}}class Ui{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new et(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new et(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return St(this._lat,t._lat)||St(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ui._jsonSchemaVersion}}static fromJSON(t){if(cc(t,Ui._jsonSchema))return new Ui(t.latitude,t.longitude)}}Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:Pe("string",Ui._jsonSchemaVersion),latitude:Pe("number"),longitude:Pe("number")};class zi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(cc(t,zi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new zi(t.vectorValues);throw new et(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:Pe("string",zi._jsonSchemaVersion),vectorValues:Pe("object")};const RN=/^__.*__$/;class CN{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new Er(t,this.data,this.fieldMask,e,this.fieldTransforms):new cl(t,this.data,e,this.fieldTransforms)}}class rb{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Er(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function sb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct(40011,{Ac:s})}}class Sy{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Sy({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ff(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(sb(this.Ac)&&RN.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class DN{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||md(t)}Cc(t,e,r,o=!1){return new Sy({Ac:t,methodName:e,Dc:r,path:de.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ed(s){const t=s._freezeSettings(),e=md(s._databaseId);return new DN(s._databaseId,!!t.ignoreUndefinedProperties,e)}function ab(s,t,e,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);Iy("Data must be an object, but it was:",c,r);const m=ob(r,c);let g,p;if(u.merge)g=new En(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const E=[];for(const T of u.mergeFields){const b=Rp(t,T,e);if(!c.contains(b))throw new et(Q.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ub(E,b)||E.push(b)}g=new En(E),p=c.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,p=c.fieldTransforms;return new CN(new sn(m),g,p)}class Td extends vd{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Td}}class by extends vd{constructor(t,e){super(t),this.Fc=e}_toFieldTransform(t){const e=new Zo(t.serializer,jS(t.serializer,this.Fc));return new KS(t.path,e)}isEqual(t){return t instanceof by&&this.Fc===t.Fc}}function xN(s,t,e,r){const o=s.Cc(1,t,e);Iy("Data must be an object, but it was:",o,r);const u=[],c=sn.empty();Cs(r,((g,p)=>{const E=wy(t,g,e);p=Ke(p);const T=o.yc(E);if(p instanceof Td)u.push(E);else{const b=yc(p,T);b!=null&&(u.push(E),c.set(E,b))}}));const m=new En(u);return new rb(c,m,o.fieldTransforms)}function NN(s,t,e,r,o,u){const c=s.Cc(1,t,e),m=[Rp(t,r,e)],g=[o];if(u.length%2!=0)throw new et(Q.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)m.push(Rp(t,u[b])),g.push(u[b+1]);const p=[],E=sn.empty();for(let b=m.length-1;b>=0;--b)if(!ub(p,m[b])){const M=m[b];let G=g[b];G=Ke(G);const W=c.yc(M);if(G instanceof Td)p.push(M);else{const Z=yc(G,W);Z!=null&&(p.push(M),E.set(M,Z))}}const T=new En(p);return new rb(E,T,c.fieldTransforms)}function VN(s,t,e,r=!1){return yc(e,s.Cc(r?4:3,t))}function yc(s,t){if(lb(s=Ke(s)))return Iy("Unsupported field value:",t,s),ob(s,t);if(s instanceof vd)return(function(r,o){if(!sb(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=yc(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jS(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Jt.fromDate(r);return{timestampValue:tl(o.serializer,u)}}if(r instanceof Jt){const u=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tl(o.serializer,u)}}if(r instanceof Ui)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:ZS(o.serializer,r._byteString)};if(r instanceof Ae){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ey(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof zi)return(function(c,m){return{mapValue:{fields:{[Kp]:{stringValue:Qp},[Qo]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return $p(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Wf(r)}`)})(s,t)}function ob(s,t){const e={};return gS(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cs(s,((r,o)=>{const u=yc(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function lb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Jt||s instanceof Ui||s instanceof Yn||s instanceof Ae||s instanceof vd||s instanceof zi)}function Iy(s,t,e){if(!lb(e)||!WA(e)){const r=Wf(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function Rp(s,t,e){if((t=Ke(t))instanceof _d)return t._internalPath;if(typeof t=="string")return wy(s,t);throw Ff("Field path arguments must be of type string or ",s,!1,void 0,e)}const ON=new RegExp("[~\\*/\\[\\]]");function wy(s,t,e){if(t.search(ON)>=0)throw Ff(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new _d(...t.split("."))._internalPath}catch{throw Ff(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function Ff(s,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new et(Q.INVALID_ARGUMENT,m+s+g)}function ub(s,t){return s.some((e=>e.isEqual(t)))}class cb{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ae(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new MN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ad("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class MN extends cb{data(){return super.data()}}function Ad(s,t){return typeof t=="string"?wy(s,t):t instanceof _d?t._internalPath:t._delegate._internalPath}function hb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new et(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ry{}class Cy extends Ry{}function fb(s,t,...e){let r=[];t instanceof Ry&&r.push(t),r=r.concat(e),(function(u){const c=u.filter((g=>g instanceof Dy)).length,m=u.filter((g=>g instanceof Sd)).length;if(c>1||c>0&&m>0)throw new et(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Sd extends Cy{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Sd(t,e,r)}_apply(t){const e=this._parse(t);return mb(t._query,e),new Tr(t.firestore,t.converter,fp(t._query,e))}_parse(t){const e=Ed(t.firestore);return(function(u,c,m,g,p,E,T){let b;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new et(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){iA(T,E);const G=[];for(const W of T)G.push(nA(g,u,W));b={arrayValue:{values:G}}}else b=nA(g,u,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||iA(T,E),b=VN(m,c,T,E==="in"||E==="not-in");return Lt.create(p,E,b)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function db(s,t,e){const r=t,o=Ad("where",s);return Sd._create(o,r,e)}class Dy extends Ry{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Dy(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:Wt.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)mb(c,g),c=fp(c,g)})(t._query,e),new Tr(t.firestore,t.converter,fp(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xy extends Cy{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new xy(t,e)}_apply(t){const e=(function(o,u,c){if(o.startAt!==null)throw new et(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new et(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(u,c)})(t._query,this._field,this._direction);return new Tr(t.firestore,t.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new ul(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,e))}}function bM(s,t="asc"){const e=t,r=Ad("orderBy",s);return xy._create(r,e)}class Ny extends Cy{constructor(t,e,r){super(),this.type=t,this._limit=e,this._limitType=r}static _create(t,e,r){return new Ny(t,e,r)}_apply(t){return new Tr(t.firestore,t.converter,Vf(t._query,this._limit,this._limitType))}}function IM(s){return Ny._create("limit",s,"F")}function nA(s,t,e){if(typeof(e=Ke(e))=="string"){if(e==="")throw new et(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OS(t)&&e.indexOf("/")!==-1)throw new et(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Kt.fromString(e));if(!rt.isDocumentKey(r))throw new et(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tc(s,new rt(r))}if(e instanceof Ae)return tc(s,e._key);throw new et(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(e)}.`)}function iA(s,t){if(!Array.isArray(s)||s.length===0)throw new et(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mb(s,t){const e=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new et(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new et(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class PN{convertValue(t,e="none"){switch(Ts(t)){case 0:return null;case 1:return t.booleanValue;case 2:return fe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ct(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Cs(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){const e=t.fields?.[Qo].arrayValue?.values?.map((r=>fe(r.doubleValue)));return new zi(e)}convertGeoPoint(t){return new Ui(fe(t.latitude),fe(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=rd(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Wu(t));default:return null}}convertTimestamp(t){const e=mr(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Kt.fromString(t);mt(u1(r),9688,{name:t});const o=new Ia(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return o.isEqual(e)||Te(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}function gb(s,t,e){let r;return r=s?e&&(e.merge||e.mergeFields)?s.toFirestore(t,e):s.toFirestore(t):t,r}class Vu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ea extends cb{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Ad("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=Ea._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:Pe("string",Ea._jsonSchemaVersion),bundleSource:Pe("string","DocumentSnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class _f extends Ea{data(t={}){return super.data(t)}}class Ta{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new Vu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new _f(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new et(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new _f(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new _f(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Vu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),E=c.indexOf(m.doc.key)),{type:kN(m.type),doc:g,oldIndex:p,newIndex:E}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ta._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct(61501,{type:s})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:Pe("string",Ta._jsonSchemaVersion),bundleSource:Pe("string","QuerySnapshot"),bundleName:Pe("string"),bundle:Pe("string")};class Vy extends PN{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ae(this.firestore,null,e)}}function wM(s){s=ui(s,Tr);const t=ui(s.firestore,Is),e=Ay(t),r=new Vy(t);return hb(s._query),SN(e,s._query).then((o=>new Ta(t,r,s,o)))}function rA(s,t,e){s=ui(s,Ae);const r=ui(s.firestore,Is),o=gb(s.converter,t,e);return bd(r,[ab(Ed(r),"setDoc",s._key,o,s.converter!==null,e).toMutation(s._key,an.none())])}function LN(s,t,e,...r){s=ui(s,Ae);const o=ui(s.firestore,Is),u=Ed(o);let c;return c=typeof(t=Ke(t))=="string"||t instanceof _d?NN(u,"updateDoc",s._key,t,e,r):xN(u,"updateDoc",s._key,t),bd(o,[c.toMutation(s._key,an.exists(!0))])}function pb(s){return bd(ui(s.firestore,Is),[new cd(s._key,an.none())])}function Cp(s,t){const e=ui(s.firestore,Is),r=sl(s),o=gb(s.converter,t);return bd(e,[ab(Ed(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function Oy(s,...t){s=Ke(s);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||eA(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(eA(t[r])){const g=t[r];t[r]=g.next?.bind(g),t[r+1]=g.error?.bind(g),t[r+2]=g.complete?.bind(g)}let u,c,m;if(s instanceof Ae)c=ui(s.firestore,Is),m=ad(s._key.path),u={next:g=>{t[r]&&t[r](UN(c,s,g))},error:t[r+1],complete:t[r+2]};else{const g=ui(s,Tr);c=ui(g.firestore,Is),m=g._query;const p=new Vy(c);u={next:E=>{t[r]&&t[r](new Ta(c,p,g,E))},error:t[r+1],complete:t[r+2]},hb(s._query)}return(function(p,E,T,b){const M=new eb(b),G=new Q1(E,M,T);return p.asyncQueue.enqueueAndForget((async()=>G1(await wp(p),G))),()=>{M.Nu(),p.asyncQueue.enqueueAndForget((async()=>K1(await wp(p),G)))}})(Ay(c),m,o,u)}function bd(s,t){return(function(r,o){const u=new fr;return r.asyncQueue.enqueueAndForget((async()=>rN(await AN(r),o,u))),u.promise})(Ay(s),t)}function UN(s,t,e){const r=e.docs.get(t._key),o=new Vy(s);return new Ea(s,o,t._key,r,new Vu(e.hasPendingWrites,e.fromCache),t.converter)}class zN{constructor(t){let e;this.kind="persistent",t?.tabManager?(t.tabManager._initialize(t),e=t.tabManager):(e=FN(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function BN(s){return new zN(s)}class jN{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=sc.provider,this._offlineComponentProvider={build:e=>new tb(e,t?.cacheSizeBytes,this.forceOwnership)}}}class qN{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=sc.provider,this._offlineComponentProvider={build:e=>new vN(e,t?.cacheSizeBytes)}}}function FN(s){return new jN(s?.forceOwnership)}function HN(){return new qN}function RM(s){return new by("increment",s)}(function(t,e=!0){(function(o){ll=o})(ol),Bo(new Sa("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Is(new _C(r.getProvider("auth-internal")),new TC(c,r.getProvider("app-check-internal")),(function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new et(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(p.options.projectId,E)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ys(kT,LT,t),ys(kT,LT,"esm2020")})();function yb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GN=yb,_b=new lc("auth","Firebase",yb());const Hf=new Mp("@firebase/auth");function KN(s,...t){Hf.logLevel<=kt.WARN&&Hf.warn(`Auth (${ol}): ${s}`,...t)}function vf(s,...t){Hf.logLevel<=kt.ERROR&&Hf.error(`Auth (${ol}): ${s}`,...t)}function ci(s,...t){throw My(s,...t)}function Bi(s,...t){return My(s,...t)}function vb(s,t,e){const r={...GN(),[t]:e};return new lc("auth","Firebase",r).create(t,{appName:s.name})}function ji(s){return vb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function My(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return _b.create(s,...t)}function Tt(s,t,...e){if(!s)throw My(t,...e)}function cr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw vf(t),new Error(t)}function pr(s,t){s||cr(t)}function Dp(){return typeof self<"u"&&self.location?.href||""}function QN(){return sA()==="http:"||sA()==="https:"}function sA(){return typeof self<"u"&&self.location?.protocol||null}function YN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QN()||YR()||"connection"in navigator)?navigator.onLine:!0}function XN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class _c{constructor(t,e){this.shortDelay=t,this.longDelay=e,pr(e>t,"Short delay should be less than long delay!"),this.isMobile=KR()||XR()}get(){return YN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Py(s,t){pr(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class Eb{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const JN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],WN=new _c(3e4,6e4);function Ar(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function Sr(s,t,e,r,o={}){return Tb(s,o,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=uc({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:t,headers:g,...u};return QR()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&al(s.emulatorConfig.host)&&(p.credentials="include"),Eb.fetch()(await Ab(s,s.config.apiHost,e,m),p)})}async function Tb(s,t,e){s._canInitEmulator=!1;const r={...$N,...t};try{const o=new tV(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw sf(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw sf(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw sf(s,"user-disabled",c);const E=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw vb(s,E,p);ci(s,E)}}catch(o){if(o instanceof _r)throw o;ci(s,"network-request-failed",{message:String(o)})}}async function vc(s,t,e,r,o={}){const u=await Sr(s,t,e,r,o);return"mfaPendingCredential"in u&&ci(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Ab(s,t,e,r){const o=`${t}${e}?${r}`,u=s,c=u.config.emulator?Py(s.config,o):`${s.config.apiScheme}://${o}`;return JN.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}function ZN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Bi(this.auth,"network-request-failed")),WN.get())})}}function sf(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=Bi(s,t,r);return o.customData._tokenResponse=e,o}function aA(s){return s!==void 0&&s.enterprise!==void 0}class eV{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return ZN(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nV(s,t){return Sr(s,"GET","/v2/recaptchaConfig",Ar(s,t))}async function iV(s,t){return Sr(s,"POST","/v1/accounts:delete",t)}async function Gf(s,t){return Sr(s,"POST","/v1/accounts:lookup",t)}function Hu(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function rV(s,t=!1){const e=Ke(s),r=await e.getIdToken(t),o=ky(r);Tt(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:r,authTime:Hu(Kg(o.auth_time)),issuedAtTime:Hu(Kg(o.iat)),expirationTime:Hu(Kg(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Kg(s){return Number(s)*1e3}function ky(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return vf("JWT malformed, contained fewer than 3 sections"),null;try{const o=DA(e);return o?JSON.parse(o):(vf("Failed to decode base64 JWT payload"),null)}catch(o){return vf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function oA(s){const t=ky(s);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function ac(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof _r&&sV(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function sV({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class aV{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class xp{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(s){const t=s.auth,e=await s.getIdToken(),r=await ac(s,Gf(t,{idToken:e}));Tt(r?.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?Sb(o.providerUserInfo):[],c=lV(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!c?.length,p=m?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new xp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(s,E)}async function oV(s){const t=Ke(s);await Kf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function lV(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function Sb(s){return s.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function uV(s,t){const e=await Tb(s,{},async()=>{const r=uc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await Ab(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&al(s.emulatorConfig.host)&&(g.credentials="include"),Eb.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function cV(s,t){return Sr(s,"POST","/v2/accounts:revokeToken",Ar(s,t))}class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):oA(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const e=oA(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await uV(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,c=new Lo;return r&&(Tt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(Tt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(Tt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return cr("not implemented")}}function os(s,t){Tt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class li{constructor({uid:t,auth:e,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new aV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await ac(this,this.stsTokenManager.getToken(this.auth,t));return Tt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return rV(this,t)}reload(){return oV(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new li({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await Kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(ji(this.auth));const t=await this.getIdToken();return await ac(this,iV(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,p=e.createdAt??void 0,E=e.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:M,providerData:G,stsTokenManager:W}=e;Tt(T&&W,t,"internal-error");const Z=Lo.fromJSON(this.name,W);Tt(typeof T=="string",t,"internal-error"),os(r,t.name),os(o,t.name),Tt(typeof b=="boolean",t,"internal-error"),Tt(typeof M=="boolean",t,"internal-error"),os(u,t.name),os(c,t.name),os(m,t.name),os(g,t.name),os(p,t.name),os(E,t.name);const st=new li({uid:T,auth:t,email:o,emailVerified:b,displayName:r,isAnonymous:M,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:Z,createdAt:p,lastLoginAt:E});return G&&Array.isArray(G)&&(st.providerData=G.map(lt=>({...lt}))),g&&(st._redirectEventId=g),st}static async _fromIdTokenResponse(t,e,r=!1){const o=new Lo;o.updateFromServerResponse(e);const u=new li({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await Kf(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];Tt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Sb(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new Lo;m.updateFromIdToken(r);const g=new li({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,p),g}}const lA=new Map;function hr(s){pr(s instanceof Function,"Expected a class definition");let t=lA.get(s);return t?(pr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,lA.set(s,t),t)}class bb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}bb.type="NONE";const uA=bb;function Ef(s,t,e){return`firebase:${s}:${t}:${e}`}class Uo{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Ef(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ef("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Gf(this.auth,{idToken:t}).catch(()=>{});return e?li._fromGetAccountInfoResponse(this.auth,e,t):null}return li._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new Uo(hr(uA),t,r);const o=(await Promise.all(e.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=o[0]||hr(uA);const c=Ef(r,t.config.apiKey,t.name);let m=null;for(const p of e)try{const E=await p._get(c);if(E){let T;if(typeof E=="string"){const b=await Gf(t,{idToken:E}).catch(()=>{});if(!b)break;T=await li._fromGetAccountInfoResponse(t,b,E)}else T=li._fromJSON(t,E);p!==u&&(m=T),u=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Uo(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Uo(u,t,r))}}function cA(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Cb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ib(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xb(t))return"Blackberry";if(Nb(t))return"Webos";if(wb(t))return"Safari";if((t.includes("chrome/")||Rb(t))&&!t.includes("edge/"))return"Chrome";if(Db(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if(r?.length===2)return r[1]}return"Other"}function Ib(s=Be()){return/firefox\//i.test(s)}function wb(s=Be()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rb(s=Be()){return/crios\//i.test(s)}function Cb(s=Be()){return/iemobile/i.test(s)}function Db(s=Be()){return/android/i.test(s)}function xb(s=Be()){return/blackberry/i.test(s)}function Nb(s=Be()){return/webos/i.test(s)}function Ly(s=Be()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hV(s=Be()){return Ly(s)&&!!window.navigator?.standalone}function fV(){return $R()&&document.documentMode===10}function Vb(s=Be()){return Ly(s)||Db(s)||Nb(s)||xb(s)||/windows phone/i.test(s)||Cb(s)}function Ob(s,t=[]){let e;switch(s){case"Browser":e=cA(Be());break;case"Worker":e=`${cA(Be())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${ol}/${r}`}class dV{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function mV(s,t={}){return Sr(s,"GET","/v2/passwordPolicy",Ar(s,t))}const gV=6;class pV{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??gV,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class yV{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hA(this),this.idTokenSubscription=new hA(this),this.beforeStateQueue=new dV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=hr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uo.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Gf(this,{idToken:t}),r=await li._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Nn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===c)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Kf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=XN()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Nn(this.app))return Promise.reject(ji(this));const e=t?Ke(t):null;return e&&Tt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Nn(this.app)?Promise.reject(ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await mV(this),e=new pV(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new lc("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await cV(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&hr(t)||this._popupRedirectResolver;Tt(e,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[hr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ob(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&KN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function br(s){return Ke(s)}class hA{constructor(t){this.auth=t,this.observer=null,this.addObserver=n2(e=>this.observer=e)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _V(s){Id=s}function Mb(s){return Id.loadJS(s)}function vV(){return Id.recaptchaEnterpriseScript}function EV(){return Id.gapiScript}function TV(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class AV{constructor(){this.enterprise=new SV}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class SV{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const bV="recaptcha-enterprise",Pb="NO_RECAPTCHA";class IV{constructor(t){this.type=bV,this.auth=br(t)}async verify(t="verify",e=!1){async function r(u){if(!e){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(c,m)=>{nV(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new eV(g);return u.tenantId==null?u._agentRecaptchaConfig=p:u._tenantRecaptchaConfigs[u.tenantId]=p,c(p.siteKey)}}).catch(g=>{m(g)})})}function o(u,c,m){const g=window.grecaptcha;aA(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:t}).then(p=>{c(p)}).catch(()=>{c(Pb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AV().execute("siteKey",{action:"verify"}):new Promise((u,c)=>{r(this.auth).then(m=>{if(!e&&aA(window.grecaptcha))o(m,u,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=vV();g.length!==0&&(g+=m),Mb(g).then(()=>{o(m,u,c)}).catch(p=>{c(p)})}}).catch(m=>{c(m)})})}}async function fA(s,t,e,r=!1,o=!1){const u=new IV(s);let c;if(o)c=Pb;else try{c=await u.verify(e)}catch{c=await u.verify(e,!0)}const m={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Qf(s,t,e,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await fA(s,t,e,e==="getOobCode");return r(s,u)}else return r(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await fA(s,t,e,e==="getOobCode");return r(s,c)}else return Promise.reject(u)})}function wV(s,t){const e=kp(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(Aa(u,t??{}))return o;ci(o,"already-initialized")}return e.initialize({options:t})}function RV(s,t){const e=t?.persistence||[],r=(Array.isArray(e)?e:[e]).map(hr);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function CV(s,t,e){const r=br(s);Tt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=kb(t),{host:c,port:m}=DV(t),g=m===null?"":`:${m}`,p={url:`${u}//${c}${g}/`},E=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Tt(Aa(p,r.config.emulator)&&Aa(E,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=E,r.settings.appVerificationDisabledForTesting=!0,al(c)?(OA(`${u}//${c}${g}`),GR("Auth",!0)):xV()}function kb(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function DV(s){const t=kb(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:dA(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:dA(c)}}}function dA(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function xV(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Uy{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return cr("not implemented")}_getIdTokenResponse(t){return cr("not implemented")}_linkToIdToken(t,e){return cr("not implemented")}_getReauthenticationResolver(t){return cr("not implemented")}}async function NV(s,t){return Sr(s,"POST","/v1/accounts:signUp",t)}async function VV(s,t){return vc(s,"POST","/v1/accounts:signInWithPassword",Ar(s,t))}async function OV(s,t){return Sr(s,"POST","/v1/accounts:sendOobCode",Ar(s,t))}async function MV(s,t){return OV(s,t)}async function PV(s,t){return vc(s,"POST","/v1/accounts:signInWithEmailLink",Ar(s,t))}async function kV(s,t){return vc(s,"POST","/v1/accounts:signInWithEmailLink",Ar(s,t))}class oc extends Uy{constructor(t,e,r,o=null){super("password",r),this._email=t,this._password=e,this._tenantId=o}static _fromEmailAndPassword(t,e){return new oc(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new oc(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qf(t,e,"signInWithPassword",VV);case"emailLink":return PV(t,{email:this._email,oobCode:this._password});default:ci(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qf(t,r,"signUpPassword",NV);case"emailLink":return kV(t,{idToken:e,email:this._email,oobCode:this._password});default:ci(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function zo(s,t){return vc(s,"POST","/v1/accounts:signInWithIdp",Ar(s,t))}const LV="http://localhost";class Na extends Uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Na(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ci("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=e;if(!r||!o)return null;const c=new Na(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return zo(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,zo(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,zo(t,e)}buildRequest(){const t={requestUri:LV,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=uc(e)}return t}}function UV(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zV(s){const t=wu(Ru(s)).link,e=t?wu(Ru(t)).deep_link_id:null,r=wu(Ru(s)).deep_link_id;return(r?wu(Ru(r)).link:null)||r||e||t||s}class zy{constructor(t){const e=wu(Ru(t)),r=e.apiKey??null,o=e.oobCode??null,u=UV(e.mode??null);Tt(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=zV(t);try{return new zy(e)}catch{return null}}}class ml{constructor(){this.providerId=ml.PROVIDER_ID}static credential(t,e){return oc._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const r=zy.parseLink(e);return Tt(r,"argument-error"),oc._fromEmailAndCode(t,r.code,r.tenantId)}}ml.PROVIDER_ID="password";ml.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ml.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Lb{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ec extends Lb{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class us extends Ec{constructor(){super("facebook.com")}static credential(t){return Na._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return us.credentialFromTaggedObject(t)}static credentialFromError(t){return us.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return us.credential(t.oauthAccessToken)}catch{return null}}}us.FACEBOOK_SIGN_IN_METHOD="facebook.com";us.PROVIDER_ID="facebook.com";class cs extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Na._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return cs.credentialFromTaggedObject(t)}static credentialFromError(t){return cs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return cs.credential(e,r)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";class hs extends Ec{constructor(){super("github.com")}static credential(t){return Na._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return hs.credentialFromTaggedObject(t)}static credentialFromError(t){return hs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return hs.credential(t.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";class fs extends Ec{constructor(){super("twitter.com")}static credential(t,e){return Na._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return fs.credentialFromTaggedObject(t)}static credentialFromError(t){return fs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return fs.credential(e,r)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";async function Ub(s,t){return vc(s,"POST","/v1/accounts:signUp",Ar(s,t))}class yr{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await li._fromIdTokenResponse(t,r,o),c=mA(r);return new yr({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=mA(r);return new yr({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function mA(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}async function BV(s){if(Nn(s.app))return Promise.reject(ji(s));const t=br(s);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new yr({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await Ub(t,{returnSecureToken:!0}),r=await yr._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(r.user),r}class Yf extends _r{constructor(t,e,r,o){super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new Yf(t,e,r,o)}}function zb(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(s,u,t,r):u})}async function jV(s,t,e=!1){const r=await ac(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return yr._forOperation(s,"link",r)}async function qV(s,t,e=!1){const{auth:r}=s;if(Nn(r.app))return Promise.reject(ji(r));const o="reauthenticate";try{const u=await ac(s,zb(r,o,t,s),e);Tt(u.idToken,r,"internal-error");const c=ky(u.idToken);Tt(c,r,"internal-error");const{sub:m}=c;return Tt(s.uid===m,r,"user-mismatch"),yr._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ci(r,"user-mismatch"),u}}async function Bb(s,t,e=!1){if(Nn(s.app))return Promise.reject(ji(s));const r="signIn",o=await zb(s,r,t),u=await yr._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}async function FV(s,t){return Bb(br(s),t)}async function jb(s){const t=br(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function HV(s,t,e){const r=br(s);await Qf(r,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MV)}async function GV(s,t,e){if(Nn(s.app))return Promise.reject(ji(s));const r=br(s),c=await Qf(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ub).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jb(s),g}),m=await yr._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(m.user),m}function KV(s,t,e){return Nn(s.app)?Promise.reject(ji(s)):FV(Ke(s),ml.credential(t,e)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jb(s),r})}function QV(s,t,e,r){return Ke(s).onIdTokenChanged(t,e,r)}function YV(s,t,e){return Ke(s).beforeAuthStateChanged(t,e)}function XV(s,t,e,r){return Ke(s).onAuthStateChanged(t,e,r)}const Xf="__sak";class qb{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Xf,"1"),this.storage.removeItem(Xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const $V=1e3,JV=10;class Fb extends qb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vb(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);fV()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,JV):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},$V)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Fb.type="LOCAL";const WV=Fb;class Hb extends qb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Hb.type="SESSION";const Gb=Hb;function ZV(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class wd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new wd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async p=>p(e.origin,u)),g=await ZV(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];function By(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}class tO{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const p=By("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(T){const b=T;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(b.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function qi(){return window}function eO(s){qi().location.href=s}function Kb(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function nO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iO(){return navigator?.serviceWorker?.controller||null}function rO(){return Kb()?self:null}const Qb="firebaseLocalStorageDb",sO=1,$f="firebaseLocalStorage",Yb="fbase_key";class Tc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Rd(s,t){return s.transaction([$f],t?"readwrite":"readonly").objectStore($f)}function aO(){const s=indexedDB.deleteDatabase(Qb);return new Tc(s).toPromise()}function Np(){const s=indexedDB.open(Qb,sO);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore($f,{keyPath:Yb})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains($f)?t(r):(r.close(),await aO(),t(await Np()))})})}async function gA(s,t,e){const r=Rd(s,!0).put({[Yb]:t,value:e});return new Tc(r).toPromise()}async function oO(s,t){const e=Rd(s,!1).get(t),r=await new Tc(e).toPromise();return r===void 0?null:r.value}function pA(s,t){const e=Rd(s,!0).delete(t);return new Tc(e).toPromise()}const lO=800,uO=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Np(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>uO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(rO()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await nO(),!this.activeServiceWorker)return;this.sender=new tO(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||iO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Np();return await gA(t,Xf,"1"),await pA(t,Xf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gA(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>oO(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>pA(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=Rd(o,!1).getAll();return new Tc(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const cO=Xb;new _c(3e4,6e4);function hO(s,t){return t?hr(t):(Tt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class jy extends Uy{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return zo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return zo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return zo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function fO(s){return Bb(s.auth,new jy(s),s.bypassAuthState)}function dO(s){const{auth:t,user:e}=s;return Tt(e,t,"internal-error"),qV(e,new jy(s),s.bypassAuthState)}async function mO(s){const{auth:t,user:e}=s;return Tt(e,t,"internal-error"),jV(e,new jy(s),s.bypassAuthState)}class $b{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return fO;case"linkViaPopup":case"linkViaRedirect":return mO;case"reauthViaPopup":case"reauthViaRedirect":return dO;default:ci(this.auth,"internal-error")}}resolve(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gO=new _c(2e3,1e4);class Po extends $b{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const t=By();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,gO.get())};t()}}Po.currentPopupAction=null;const pO="pendingRedirect",Tf=new Map;class yO extends $b{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=Tf.get(this.auth._key());if(!t){try{const r=await _O(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}Tf.set(this.auth._key(),t)}return this.bypassAuthState||Tf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _O(s,t){const e=TO(t),r=EO(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function vO(s,t){Tf.set(s._key(),t)}function EO(s){return hr(s._redirectPersistence)}function TO(s){return Ef(pO,s.config.apiKey,s.name)}async function AO(s,t,e=!1){if(Nn(s.app))return Promise.reject(ji(s));const r=br(s),o=hO(r,t),c=await new yO(r,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}const SO=600*1e3;class bO{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!IO(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!Jb(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Bi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=SO&&this.cachedEventUids.clear(),this.cachedEventUids.has(yA(t))}saveEventToCache(t){this.cachedEventUids.add(yA(t)),this.lastProcessedEventTime=Date.now()}}function yA(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function Jb({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function IO(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jb(s);default:return!1}}async function wO(s,t={}){return Sr(s,"GET","/v1/projects",t)}const RO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CO=/^https?/;async function DO(s){if(s.config.emulator)return;const{authorizedDomains:t}=await wO(s);for(const e of t)try{if(xO(e))return}catch{}ci(s,"unauthorized-domain")}function xO(s){const t=Dp(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!CO.test(e))return!1;if(RO.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const NO=new _c(3e4,6e4);function _A(){const s=qi().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function VO(s){return new Promise((t,e)=>{function r(){_A(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_A(),e(Bi(s,"network-request-failed"))},timeout:NO.get()})}if(qi().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(qi().gapi?.load)r();else{const o=TV("iframefcb");return qi()[o]=()=>{gapi.load?r():e(Bi(s,"network-request-failed"))},Mb(`${EV()}?onload=${o}`).catch(u=>e(u))}}).catch(t=>{throw Af=null,t})}let Af=null;function OO(s){return Af=Af||VO(s),Af}const MO=new _c(5e3,15e3),PO="__/auth/iframe",kO="emulator/auth/iframe",LO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zO(s){const t=s.config;Tt(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Py(t,kO):`https://${s.config.authDomain}/${PO}`,r={apiKey:t.apiKey,appName:s.name,v:ol},o=UO.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${uc(r).slice(1)}`}async function BO(s){const t=await OO(s),e=qi().gapi;return Tt(e,s,"internal-error"),t.open({where:document.body,url:zO(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LO,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=Bi(s,"network-request-failed"),m=qi().setTimeout(()=>{u(c)},MO.get());function g(){qi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}const jO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qO=500,FO=600,HO="_blank",GO="http://localhost";class vA{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KO(s,t,e,r=qO,o=FO){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...jO,width:r.toString(),height:o.toString(),top:u,left:c},p=Be().toLowerCase();e&&(m=Rb(p)?HO:e),Ib(p)&&(t=t||GO,g.scrollbars="yes");const E=Object.entries(g).reduce((b,[M,G])=>`${b}${M}=${G},`,"");if(hV(p)&&m!=="_self")return QO(t||"",m),new vA(null);const T=window.open(t||"",m,E);Tt(T,s,"popup-blocked");try{T.focus()}catch{}return new vA(T)}function QO(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}const YO="__/auth/handler",XO="emulator/auth/handler",$O=encodeURIComponent("fac");async function EA(s,t,e,r,o,u){Tt(s.config.authDomain,s,"auth-domain-config-required"),Tt(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:ol,eventId:o};if(t instanceof Lb){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",e2(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(t instanceof Ec){const E=t.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),p=g?`#${$O}=${encodeURIComponent(g)}`:"";return`${JO(s)}?${uc(m).slice(1)}${p}`}function JO({config:s}){return s.emulator?Py(s,XO):`https://${s.authDomain}/${YO}`}const Qg="webStorageSupport";class WO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gb,this._completeRedirectFn=AO,this._overrideRedirectResult=vO}async _openPopup(t,e,r,o){pr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await EA(t,e,r,Dp(),o);return KO(t,u,By())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await EA(t,e,r,Dp(),o);return eO(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(pr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await BO(t),r=new bO(t);return e.register("authEvent",o=>(Tt(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Qg,{type:Qg},o=>{const u=o?.[0]?.[Qg];u!==void 0&&e(!!u),ci(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=DO(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Vb()||wb()||Ly()}}const ZO=WO;var TA="@firebase/auth",AA="1.12.0";class tM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eM(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nM(s){Bo(new Sa("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Tt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ob(s)},p=new yV(r,o,u,g);return RV(p,e),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Bo(new Sa("auth-internal",t=>{const e=br(t.getProvider("auth").getImmediate());return(r=>new tM(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(TA,AA,eM(s)),ys(TA,AA,"esm2020")}const iM=300,rM=VA("authIdTokenMaxAge")||iM;let SA=null;const sM=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>rM)return;const o=e?.token;SA!==o&&(SA=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function aM(s=iC()){const t=kp(s,"auth");if(t.isInitialized())return t.getImmediate();const e=wV(s,{popupRedirectResolver:ZO,persistence:[cO,WV,Gb]}),r=VA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=sM(u.toString());YV(e,c,()=>c(e.currentUser)),QV(e,m=>c(m))}}const o=jR("auth");return o&&CV(e,`http://${o}`),e}function oM(){return document.getElementsByTagName("head")?.[0]??document}_V({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=Bi("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",oM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nM("Browser");const lM={apiKey:"AIzaSyDFJKoHEhMnpjt2bqTPpzru1qdA_rUOEdk",authDomain:"bitlkhzin-8d5c8.firebaseapp.com",projectId:"bitlkhzin-8d5c8",storageBucket:"bitlkhzin-8d5c8.firebasestorage.app",messagingSenderId:"862517672946",appId:"1:862517672946:web:66efa0f33cd67f0751896b"},Wb=BA(lM),Pi=IN(Wb,{localCache:BN({tabManager:HN()})}),pa=aM(Wb),uM=({children:s,currentView:t="inventory",onNavigate:e})=>j.jsxs("div",{className:"layout-container",style:{display:"flex",minHeight:"100vh"},children:[j.jsxs("aside",{className:"glass-panel sidebar desktop-only",style:{width:"260px",margin:"24px 0 24px 24px",height:"calc(100vh - 48px)",position:"sticky",top:"24px",display:"flex",flexDirection:"column",padding:"32px 24px",borderRadius:"32px",border:"1px solid rgba(255,255,255,0.08)",background:"#111827",boxShadow:"var(--shadow-lg)"},children:[j.jsxs("div",{style:{marginBottom:"40px",display:"flex",alignItems:"center",gap:"16px",paddingLeft:"12px"},children:[j.jsx("div",{style:{width:"48px",height:"48px",background:"linear-gradient(135deg, hsl(var(--color-primary)), #8b5cf6)",borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",boxShadow:"0 4px 12px rgba(99, 102, 241, 0.4)"},children:j.jsx(Ww,{size:24,strokeWidth:2.5})}),j.jsx("span",{style:{fontSize:"1.25rem",fontWeight:800,color:"white",letterSpacing:"-0.02em"},children:"Bit Khzin"})]}),j.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:"12px",flex:1},children:[j.jsx(af,{icon:j.jsx(TT,{size:22}),label:"Inventory",active:t==="inventory",onClick:()=>e?.("inventory")}),j.jsx(af,{icon:j.jsx(ST,{size:22}),label:"Shopping List",active:t==="todo",onClick:()=>e?.("todo")}),j.jsx(af,{icon:j.jsx(AT,{size:22}),label:"Settings",active:t==="settings",onClick:()=>e?.("settings")})]}),j.jsx("div",{style:{marginTop:"auto",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.1)",width:"100%"},children:j.jsx(af,{icon:j.jsx(IA,{size:20}),label:"Sign Out",onClick:()=>pa.signOut(),active:!1,danger:!0})})]}),j.jsx("main",{className:"animate-fade-in",style:{flex:1,padding:"24px",maxWidth:"100%",paddingBottom:"100px",marginLeft:"0"},children:j.jsx("div",{style:{maxWidth:"800px",margin:"0 auto",width:"100%"},children:s})},t),j.jsx("div",{className:"mobile-nav-container mobile-only",style:{position:"fixed",bottom:0,zIndex:50},children:j.jsxs("ul",{className:"nav-list",style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",width:"100%"},children:[j.jsx("li",{className:`nav-item ${t==="inventory"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:j.jsxs("button",{className:`nav-link ${t==="inventory"?"active":""}`,onClick:()=>e?.("inventory"),children:[j.jsx("span",{className:"icon",children:j.jsx(TT,{size:24})}),j.jsx("span",{className:"text",children:"Pantry"})]})}),j.jsx("li",{className:`nav-item ${t==="todo"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:j.jsxs("button",{className:`nav-link ${t==="todo"?"active":""}`,onClick:()=>e?.("todo"),children:[j.jsx("span",{className:"icon",children:j.jsx(ST,{size:24})}),j.jsx("span",{className:"text",children:"Shop"})]})}),j.jsx("li",{className:`nav-item ${t==="settings"?"active":""}`,style:{width:"100%",display:"flex",justifyContent:"center"},children:j.jsxs("button",{className:`nav-link ${t==="settings"?"active":""}`,onClick:()=>e?.("settings"),children:[j.jsx("span",{className:"icon",children:j.jsx(AT,{size:24})}),j.jsx("span",{className:"text",children:"Settings"})]})}),j.jsx("div",{className:"indicator",style:{left:`calc(100% / 3 * ${t==="inventory"?0:t==="todo"?1:2} + 100% / 6 - 35px)`}})]})}),j.jsx("style",{children:`
        @media (max-width: 1024px) {
          .desktop-only { display: none !important; }
        }
        @media (min-width: 1025px) {
          .mobile-only { display: none !important; }
        }
      `})]}),af=({icon:s,label:t,active:e=!1,onClick:r,danger:o=!1})=>j.jsxs("button",{onClick:r,className:"tap-scale",style:{display:"flex",alignItems:"center",gap:"16px",padding:"16px 20px",width:"100%",borderRadius:"20px",border:"none",background:e?"white":"transparent",boxShadow:e?"0 8px 20px -4px rgba(59, 130, 246, 0.4), 0 4px 8px -2px rgba(0,0,0,0.05)":"none",color:e?"#1f2937":o?"#ef4444":"#9ca3af",cursor:"pointer",fontWeight:e?700:500,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",textAlign:"left",fontSize:"1rem",position:"relative"},children:[j.jsx("span",{style:{color:e?"hsl(var(--color-primary))":"currentColor",display:"flex",alignItems:"center"},children:s}),j.jsx("span",{style:{opacity:e?1:.9},children:t})]}),Sf=["Produce","Dairy","Bakery","Meat","Frozen","Pantry","Beverages","Snacks","Household","Other"],cM={milk:"Dairy",cheese:"Dairy",yogurt:"Dairy",butter:"Dairy",egg:"Dairy","7lib":"Dairy",lben:"Dairy",bayd:"Dairy",fermaj:"Dairy",danon:"Dairy",bread:"Bakery",bagel:"Bakery",sugar:"Bakery",flour:"Bakery",khobz:"Bakery",apple:"Produce",banana:"Produce",lettuce:"Produce",tomato:"Produce",onion:"Produce",potato:"Produce",maticha:"Produce",batata:"Produce",khei:"Produce",carrot:"Produce",khodra:"Produce",fakiya:"Produce",bsla:"Produce",touma:"Produce",na3na3:"Produce",rbi3:"Produce",chicken:"Meat",beef:"Meat",steak:"Meat",djaj:"Meat",l7em:"Meat",kefta:"Meat",saucisse:"Meat",hout:"Meat",water:"Beverages",juice:"Beverages",soda:"Beverages",coffee:"Beverages",tea:"Beverages",atay:"Beverages","9ahwa":"Beverages",monada:"Beverages",rice:"Pantry",pasta:"Pantry",oil:"Pantry",salt:"Pantry",pepper:"Pantry",zit:"Pantry","olive oil":"Pantry",skar:"Pantry",smida:"Pantry",semolina:"Pantry",laadas:"Pantry",lentils:"Pantry",homs:"Pantry",chickpeas:"Pantry",lubia:"Pantry",couscous:"Pantry"},Zb=Ct.createContext({user:null,userProfile:null,loading:!0,updateHousehold:async()=>{}}),qy=()=>Ct.useContext(Zb),hM=({children:s})=>{const[t,e]=Ct.useState(null),[r,o]=Ct.useState(null),[u,c]=Ct.useState(!0);Ct.useEffect(()=>{const g=XV(pa,async p=>{if(e(p),p){const E=sl(Pi,"users",p.uid),T=Oy(E,async b=>{if(b.exists())o(b.data());else{const M={uid:p.uid,email:p.email||"",householdId:p.uid};try{await rA(E,M),o(M)}catch(G){console.error("Error creating profile:",G)}}c(!1)});return()=>T()}else o(null),c(!1)});return()=>g()},[]);const m=async g=>{if(!t)return;const p=sl(Pi,"users",t.uid);await rA(p,{householdId:g},{merge:!0})};return j.jsx(Zb.Provider,{value:{user:t,userProfile:r,loading:u,updateHousehold:m},children:s})},fM=()=>{const[s,t]=Ct.useState([]),[e,r]=Ct.useState(!0),{user:o,userProfile:u}=qy();return Ct.useEffect(()=>{if(!o||!u?.householdId){t([]),r(!1);return}const E=fb(Fu(Pi,"inventory"),db("householdId","==",u.householdId)),T=Oy(E,b=>{const M=b.docs.map(G=>({id:G.id,...G.data()}));M.sort((G,W)=>W.createdAt-G.createdAt),t(M),r(!1)},b=>{console.error("Error fetching inventory:",b),r(!1)});return()=>T()},[o,u?.householdId]),{items:s,loading:e,addItem:async E=>{if(!o||!u?.householdId)return;let T=E.category;if(!T||T==="Other"){const G=E.name.toLowerCase();for(const[W,Z]of Object.entries(cM))if(G.includes(W)){T=Z;break}}const b=Date.now().toString(),M={...E,category:T,stockLevel:E.stockLevel||"full",id:b,userId:o.uid,householdId:u.householdId,createdAt:Date.now(),updatedAt:Date.now()};t(G=>[M,...G]);try{await Cp(Fu(Pi,"inventory"),{...E,category:T,stockLevel:E.stockLevel||"full",userId:o.uid,householdId:u.householdId,createdAt:Date.now(),updatedAt:Date.now()})}catch(G){throw console.error("Error adding item:",G),t(W=>W.filter(Z=>Z.id!==b)),G}},updateItem:async(E,T)=>{t(b=>b.map(M=>M.id===E?{...M,...T,updatedAt:Date.now()}:M));try{await LN(sl(Pi,"inventory",E),{...T,updatedAt:Date.now()})}catch(b){console.error("Error updating item:",b)}},deleteItem:async E=>{const T=s.find(b=>b.id===E);if(T){t(b=>b.filter(M=>M.id!==E));try{await pb(sl(Pi,"inventory",E))}catch(b){console.error("Error deleting item:",b),T&&t(M=>[...M,T].sort((G,W)=>W.createdAt-G.createdAt))}}},seedData:async()=>{if(!o||!u?.householdId)return;const E=[{name:"Khobz (Bread)",category:"Bakery",stockLevel:"full"},{name:"Atay (Tea)",category:"Beverages",stockLevel:"full"},{name:"Skar (Sugar)",category:"Pantry",stockLevel:"full"},{name:"Zit Zitoune",category:"Pantry",stockLevel:"full"},{name:"Farine & Smida",category:"Pantry",stockLevel:"full"},{name:"Laadas/Homs",category:"Pantry",stockLevel:"low"},{name:"Maticha (Tomato)",category:"Produce",stockLevel:"full"},{name:"Batata (Potato)",category:"Produce",stockLevel:"full"},{name:"Milk",category:"Dairy",stockLevel:"full"},{name:"Eggs",category:"Dairy",stockLevel:"low"}];try{const T=E.map(b=>Cp(Fu(Pi,"inventory"),{...b,location:"kitchen",quantity:1,value:0,userId:o.uid,householdId:u.householdId,createdAt:Date.now(),updatedAt:Date.now()}));await Promise.all(T)}catch(T){console.error("Error seeding data:",T)}}}},tI=({children:s,className:t="",hoverEffect:e=!1,style:r,...o})=>j.jsx("div",{className:`glass-panel ${e?"hover-lift":""} ${t}`,style:{padding:"24px",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:e?"pointer":"default",...r},...o,children:s}),ds=({children:s,variant:t="primary",size:e="md",isLoading:r,className:o="",disabled:u,...c})=>{const m=()=>{switch(t){case"primary":return"btn-primary";case"secondary":return"btn-secondary";case"danger":return"btn-primary";case"ghost":return"btn-ghost";default:return"btn-primary"}},g=()=>{switch(e){case"sm":return{padding:"8px 16px",fontSize:"0.875rem"};case"lg":return{padding:"16px 32px",fontSize:"1.25rem"};default:return{}}},p=m();return j.jsxs("button",{className:`${p} tap-scale ${o}`,disabled:r||u,style:{...g(),opacity:r||u?.7:1,cursor:r||u?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",...c.style},...c,children:[r&&j.jsx("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:j.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"30 60"})}),s]})},dM=()=>{const[s,t]=Ct.useState(null),[e,r]=Ct.useState(!1);return Ct.useEffect(()=>{const u=c=>{c.preventDefault(),t(c),r(!0)};return window.addEventListener("beforeinstallprompt",u),()=>{window.removeEventListener("beforeinstallprompt",u)}},[]),{isInstallable:e,promptToInstall:async()=>{if(!s)return;await s.prompt();const{outcome:u}=await s.userChoice;console.log(u==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),t(null),r(!1)}}},eI=({message:s,type:t="info",isVisible:e,onClose:r,duration:o=3e3,actionLabel:u,onAction:c})=>{if(Ct.useEffect(()=>{if(e&&o>0){const p=setTimeout(()=>{r()},o);return()=>clearTimeout(p)}},[e,o,r]),!e)return null;const m=()=>{switch(t){case"success":return j.jsx(nR,{size:20,color:"#4ade80"});case"error":return j.jsx(tR,{size:20,color:"#f87171"});default:return j.jsx(cR,{size:20,color:"#60a5fa"})}},g=()=>{switch(t){case"success":return"rgba(74, 222, 128, 0.5)";case"error":return"rgba(248, 113, 113, 0.5)";default:return"rgba(96, 165, 250, 0.5)"}};return j.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:2e3,display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",background:"rgba(20, 20, 30, 0.95)",backdropFilter:"blur(12px)",border:`1px solid ${g()}`,borderRadius:"99px",color:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",maxWidth:"90%",width:"max-content",animation:"slideDownFade 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[m(),j.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500,flex:1},children:s}),u&&c&&j.jsx("button",{onClick:c,style:{background:"rgba(255,255,255,0.15)",border:"none",color:"white",padding:"4px 10px",borderRadius:"4px",fontWeight:"bold",cursor:"pointer",fontSize:"0.85rem"},children:u}),j.jsx("button",{onClick:r,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"rgba(255,255,255,0.6)",display:"flex"},children:j.jsx(OR,{size:16})}),j.jsx("style",{children:`
                @keyframes slideDownFade {
                    from { opacity: 0; transform: translate(-50%, -20px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
            `})]})},mM=()=>{const[s,t]=Ct.useState(!0),[e,r]=Ct.useState(!1),[o,u]=Ct.useState(""),[c,m]=Ct.useState(""),[g,p]=Ct.useState(!1),[E,T]=Ct.useState(!1),[b,M]=Ct.useState({msg:"",type:"info",show:!1}),G=(lt,nt)=>{M({msg:lt,type:nt,show:!0})},W=async lt=>{lt.preventDefault(),T(!0);try{s?await KV(pa,o,c):await GV(pa,o,c)}catch(nt){console.error(nt);let _t="Authentication failed";nt.code==="auth/invalid-credential"&&(_t="Invalid email or password."),nt.code==="auth/email-already-in-use"&&(_t="Email already in use."),nt.code==="auth/weak-password"&&(_t="Password should be at least 6 characters."),nt.code==="auth/operation-not-allowed"&&(_t="Enable Email/Password in Firebase Console!"),G(_t,"error"),T(!1)}},Z=async()=>{T(!0);try{await BV(pa)}catch(lt){console.error(lt),G("Failed to sign in anonymously.","error"),T(!1)}},st=async lt=>{if(lt.preventDefault(),!o){G("Please enter your email address.","info");return}T(!0);try{await HV(pa,o),G("Password reset email sent! Check your inbox.","success"),r(!1)}catch(nt){console.error(nt);let _t="Failed to send reset email.";nt.code==="auth/user-not-found"&&(_t="No account found with this email."),nt.code==="auth/invalid-email"&&(_t="Invalid email address."),G(_t,"error")}finally{T(!1)}};return j.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",background:"radial-gradient(circle at 50% 10%, rgba(37, 99, 235, 0.1) 0%, transparent 50%)"},children:[j.jsxs("div",{className:"animate-fade-in",style:{width:"100%",maxWidth:"400px"},children:[j.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[j.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:800,marginBottom:"8px",background:"linear-gradient(135deg, hsl(var(--color-primary)) 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Bitlkhzin"}),j.jsx("p",{className:"text-muted",children:"Your smart inventory companion."})]}),j.jsx(tI,{children:j.jsxs("form",{onSubmit:e?st:W,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[j.jsx("h2",{className:"text-title",style:{fontSize:"1.5rem",textAlign:"center"},children:e?"Reset Password":s?"Welcome Back":"Create Account"}),j.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[j.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem",marginBottom:"8px"},children:"Email"}),j.jsx("input",{type:"email",required:!0,value:o,onChange:lt=>u(lt.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"you@example.com"})]}),!e&&j.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[j.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[j.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem"},children:"Password"}),s&&j.jsx("button",{type:"button",onClick:()=>r(!0),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontSize:"0.75rem",cursor:"pointer",fontWeight:500},children:"Forgot Password?"})]}),j.jsxs("div",{style:{position:"relative"},children:[j.jsx("input",{type:g?"text":"password",required:!0,minLength:6,value:c,onChange:lt=>m(lt.target.value),className:"glass-panel",style:{padding:"12px",paddingRight:"40px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:""}),j.jsx("button",{type:"button",onClick:()=>p(!g),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-light)",opacity:.6,display:"flex",alignItems:"center"},children:g?j.jsx(aR,{size:18}):j.jsx(lR,{size:18})})]})]}),j.jsxs(ds,{type:"submit",style:{marginTop:"8px",display:"flex",justifyContent:"center",gap:"8px"},disabled:E,children:[E?j.jsx(Yg,{className:"animate-spin"}):e?j.jsx(pR,{size:18}):s?j.jsx(dR,{size:18}):j.jsx(NR,{size:18}),e?"Send Reset Link":s?"Sign In":"Create Account"]}),j.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:j.jsx("p",{className:"text-muted",style:{fontSize:"0.9rem"},children:e?j.jsx("button",{type:"button",onClick:()=>r(!1),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer"},children:"Back to Login"}):j.jsxs(j.Fragment,{children:[s?"Don't have an account? ":"Already have an account? ",j.jsx("button",{type:"button",onClick:()=>{t(!s),u(""),m("")},style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer",textDecoration:"underline"},children:s?"Sign Up":"Log In"})]})})}),!e&&j.jsxs(j.Fragment,{children:[j.jsxs("div",{style:{position:"relative",margin:"20px 0",textAlign:"center"},children:[j.jsx("hr",{style:{borderColor:"var(--glass-border)",opacity:.5}}),j.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--color-surface-light)",padding:"0 10px",fontSize:"0.8rem",color:"var(--color-text-light)",opacity:.6},children:"OR"})]}),j.jsx(ds,{type:"button",variant:"secondary",onClick:Z,disabled:E,style:{width:"100%"},children:"Continue as Guest"})]})]})})]}),j.jsx(eI,{message:b.msg,type:b.type,isVisible:b.show,onClose:()=>M({...b,show:!1})})]})},nI=Ct.createContext({categories:Sf,customCategories:[],addCategory:async()=>{},removeCategory:async()=>{},loading:!0}),gM=()=>Ct.useContext(nI),pM=({children:s})=>{const{user:t,userProfile:e}=qy(),[r,o]=Ct.useState([]),[u,c]=Ct.useState(!0);Ct.useEffect(()=>{if(!t||!e?.householdId){o([]),c(!1);return}const E=fb(Fu(Pi,"categories"),db("householdId","==",e.householdId)),T=Oy(E,b=>{const M=b.docs.map(G=>({id:G.id,...G.data(),isCustom:!0}));o(M),c(!1)});return()=>T()},[t,e?.householdId]);const m=async E=>{if(!(!E.trim()||!e?.householdId)){if(Sf.includes(E)||r.some(T=>T.name===E)){alert("Category already exists");return}await Cp(Fu(Pi,"categories"),{name:E,householdId:e.householdId,createdAt:Date.now()})}},g=async(E,T)=>{if(Sf.includes(T)){alert("Cannot delete default categories");return}await pb(sl(Pi,"categories",E))},p=[...new Set([...Sf,...r.map(E=>E.name)])];return j.jsx(nI.Provider,{value:{categories:p,customCategories:r,addCategory:m,removeCategory:g,loading:u},children:s})},yM=Ct.lazy(()=>Op(()=>import("./InventoryList-CMJ7WzWO.js"),__vite__mapDeps([0,1]),import.meta.url).then(s=>({default:s.InventoryList}))),_M=Ct.lazy(()=>Op(()=>import("./InventoryForm-Dqh2J9nh.js"),[],import.meta.url).then(s=>({default:s.InventoryForm}))),vM=Ct.lazy(()=>Op(()=>import("./TodoView-D8tA0G3H.js"),__vite__mapDeps([2,1]),import.meta.url).then(s=>({default:s.TodoView}))),EM=()=>{const{customCategories:s,addCategory:t,removeCategory:e}=gM(),[r,o]=Ct.useState(""),u=async c=>{c.preventDefault(),r.trim()&&(await t(r.trim()),o(""))};return j.jsxs("div",{children:[j.jsx("h3",{children:"Custom Categories"}),j.jsxs("form",{onSubmit:u,style:{display:"flex",gap:"8px",marginBottom:"12px",marginTop:"8px"},children:[j.jsx("input",{value:r,onChange:c=>o(c.target.value),placeholder:"New Category...",className:"glass-panel",style:{flex:1,padding:"8px"}}),j.jsx(ds,{size:"sm",type:"submit",children:j.jsx(TR,{size:16})})]}),j.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:[s.length===0&&j.jsx("span",{className:"text-muted",style:{fontSize:"0.9rem"},children:"No custom categories yet."}),s.map(c=>j.jsxs("div",{style:{background:"rgba(0,0,0,0.05)",padding:"4px 12px",borderRadius:"16px",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"6px"},children:[c.name,j.jsx("button",{onClick:()=>e(c.id,c.name),style:{border:"none",background:"none",cursor:"pointer",color:"#ef4444",display:"flex"},children:j.jsx(DR,{size:14})})]},c.id))]})]})};function TM(){const[s,t]=Ct.useState(()=>localStorage.getItem("currentView")||"inventory"),[e,r]=Ct.useState({show:!1,msg:"",type:"success"}),o=(st,lt="success")=>{r({show:!0,msg:st,type:lt}),setTimeout(()=>r(nt=>({...nt,show:!1})),3e3)};Ct.useEffect(()=>{localStorage.setItem("currentView",s)},[s]);const[u,c]=Ct.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1),{items:m,addItem:g,deleteItem:p}=fM(),{isInstallable:E,promptToInstall:T}=dM(),{user:b,loading:M,userProfile:G,updateHousehold:W}=qy();if(Ct.useEffect(()=>{const st=document.querySelector('meta[name="theme-color"]');u?(document.documentElement.classList.add("dark"),st&&st.setAttribute("content","#14171f")):(document.documentElement.classList.remove("dark"),st&&st.setAttribute("content","#f9fafb"))},[u]),M)return j.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:j.jsx(Yg,{className:"animate-spin",size:48,color:"hsl(var(--color-primary))"})});if(!b)return j.jsx(mM,{});const Z=()=>{switch(s){case"add":return j.jsx(_M,{onSubmit:st=>{g(st),t("inventory")},onCancel:()=>t("inventory")});case"settings":return j.jsxs("div",{className:"animate-fade-in",children:[j.jsx("h2",{className:"text-title",children:"Settings"}),j.jsxs(tI,{children:[j.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[j.jsx("h3",{style:{margin:0},children:"Appearance"}),j.jsxs(ds,{variant:"secondary",onClick:()=>c(!u),style:{display:"flex",alignItems:"center",gap:"8px"},children:[u?j.jsx(RR,{size:18}):j.jsx(_R,{size:18}),u?"Light Mode":"Dark Mode"]})]}),j.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),j.jsxs("div",{style:{opacity:.6},children:[j.jsx("p",{children:"App Version: 1.1.0"}),j.jsxs("p",{children:["Account: ",b.email]}),j.jsx("p",{children:"Sync Status: Cloud (Firebase)"}),j.jsxs(ds,{size:"sm",variant:"secondary",onClick:()=>window.location.reload(),style:{marginTop:"12px",width:"100%",justifyContent:"center",gap:"8px"},children:[j.jsx(SR,{size:16}),"Check for Updates / Reload"]})]}),j.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),j.jsxs("div",{children:[j.jsx("h3",{children:"Family Sharing"}),j.jsx("p",{style:{fontSize:"0.9rem",opacity:.7,marginBottom:"8px"},children:"Share this code with your family to sync your list:"}),j.jsx("div",{style:{background:"rgba(0,0,0,0.05)",padding:"12px",borderRadius:"8px",fontFamily:"monospace",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",cursor:"pointer",userSelect:"all"},onClick:()=>{navigator.clipboard.writeText(G?.householdId||""),o("Code copied to clipboard!","success")},title:"Click to copy",children:G?.householdId||"Loading..."}),j.jsxs("details",{children:[j.jsx("summary",{style:{cursor:"pointer",fontSize:"0.9rem",color:"hsl(var(--color-primary))"},children:"Join a Family"}),j.jsxs("form",{onSubmit:async st=>{st.preventDefault();const lt=st.target.code.value;lt&&confirm("Joining a new family will switch your view. Continue?")&&(await W(lt),alert("You have joined the family!"),window.location.reload())},style:{marginTop:"12px",display:"flex",gap:"8px"},children:[j.jsx("input",{name:"code",placeholder:"Enter family code",className:"glass-panel",style:{padding:"8px",flex:1}}),j.jsx(ds,{size:"sm",type:"submit",children:"Join"})]})]})]}),j.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),j.jsxs(ds,{variant:"secondary",onClick:()=>pa.signOut(),style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px",color:"#f87171",borderColor:"rgba(248, 113, 113, 0.3)"},children:[j.jsx(IA,{size:18}),"Log Out"]}),E&&j.jsxs(j.Fragment,{children:[j.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),j.jsxs(ds,{onClick:T,style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px"},children:[j.jsx(rR,{size:18}),"Install App"]})]}),j.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),j.jsx(EM,{})]})]});case"todo":return j.jsx(vM,{});default:return j.jsx("div",{className:"animate-fade-in",children:j.jsx(yM,{items:m,onAddItem:()=>t("add"),onDeleteItem:p})})}};return j.jsxs(uM,{currentView:s,onNavigate:st=>t(st),children:[j.jsx(Ct.Suspense,{fallback:j.jsx("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:j.jsx(Yg,{className:"animate-spin",size:32,color:"hsl(var(--color-primary))"})}),children:Z()}),j.jsx(eI,{isVisible:e.show,message:e.msg,type:e.type,onClose:()=>r(st=>({...st,show:!1}))})]})}Fw.createRoot(document.getElementById("root")).render(j.jsx(Ct.StrictMode,{children:j.jsx(hM,{children:j.jsx(pM,{children:j.jsx(TM,{})})})}));export{cM as A,ds as B,tR as C,Yg as L,TR as P,AM as R,eI as T,OR as X,gM as a,tI as b,be as c,nR as d,qy as e,Fu as f,Pi as g,wM as h,sl as i,j,RM as k,IM as l,Oy as m,pb as n,bM as o,LN as p,fb as q,Ct as r,rA as s,Cp as t,fM as u,DR as v,db as w};
