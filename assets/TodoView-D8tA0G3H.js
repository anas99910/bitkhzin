import{c as v,r as i,j as e,u as L,a as A,b as B,P as k,B as S,d as W,T as q}from"./index-CVH2VVU9.js";import{u as M,a as O,S as E}from"./SwipeableItem-CJQZ9PtE.js";const $=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],_=v("archive",$);const P=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Q=v("chevron-down",P);const V=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],H=v("chevron-up",V),U=({value:o,onChange:d,options:x,placeholder:h="Select...",className:y=""})=>{const[c,p]=i.useState(!1),n=i.useRef(null);i.useEffect(()=>{const s=l=>{n.current&&!n.current.contains(l.target)&&p(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const m=x.find(s=>s.value===o)?.label||h;return e.jsxs("div",{className:`dropdown-container ${y}`,ref:n,children:[e.jsxs("div",{className:"desktop-only-dropdown",style:{position:"relative"},children:[e.jsxs("button",{type:"button",onClick:()=>p(!c),className:"glass-panel",style:{width:"100%",padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"all 0.2s",boxShadow:"var(--shadow-sm)"},children:[e.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:m}),c?e.jsx(H,{size:18,style:{opacity:.6}}):e.jsx(Q,{size:18,style:{opacity:.6}})]}),c&&e.jsx("div",{className:"glass-panel animate-fade-in",style:{position:"absolute",top:"calc(100% + 8px)",left:0,right:0,zIndex:50,maxHeight:"240px",overflowY:"auto",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.3)",padding:"4px"},children:x.map(s=>e.jsx("div",{onClick:()=>{d(s.value),p(!1)},style:{padding:"10px 16px",cursor:"pointer",borderRadius:"12px",fontSize:"0.95rem",color:o===s.value?"hsl(var(--color-primary))":"var(--text-primary)",background:o===s.value?"rgba(59, 130, 246, 0.1)":"transparent",fontWeight:o===s.value?600:400,transition:"background 0.2s",marginBottom:"2px"},onMouseEnter:l=>l.currentTarget.style.background=o===s.value?"rgba(59, 130, 246, 0.15)":"rgba(255, 255, 255, 0.05)",onMouseLeave:l=>l.currentTarget.style.background=o===s.value?"rgba(59, 130, 246, 0.1)":"transparent",children:s.label},s.value))})]}),e.jsx("select",{className:"mobile-only-select",value:o,onChange:s=>d(s.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",color:"var(--text-primary)",fontSize:"1rem",appearance:"none"},children:x.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("style",{children:`
                @media (min-width: 1025px) {
                    .mobile-only-select { display: none !important; }
                    .desktop-only-dropdown { display: block !important; }
                }
                @media (max-width: 1024px) {
                    .mobile-only-select { display: block !important; }
                    .desktop-only-dropdown { display: none !important; }
                }
            `})]})},F=()=>{const{todos:o,addTodo:d,toggleTodo:x,deleteTodo:h}=M(),{addItem:y}=L(),{categories:c}=A(),{frequentItems:p}=O(),[n,m]=i.useState(""),[s,l]=i.useState(1),[j,C]=i.useState(c[0]||"Other"),T=t=>{d(t.text,1,t.category),g(`Added ${t.text}`,"success")},[u,f]=i.useState({show:!1,msg:"",type:"success"}),g=(t,r="success",a,b)=>{f({show:!0,msg:t,type:r,actionLabel:a,onAction:b}),setTimeout(()=>f(R=>({...R,show:!1})),a?5e3:3e3)},I=t=>{t?.preventDefault(),n.trim()&&(d(n,s,j),m(""),l(1))},N=(t,r)=>{const a=o.find(b=>b.id===t);h(t),g(`Deleted "${r}"`,"info","Undo",()=>{a&&(d(a.text,a.quantity,a.category),g("Item restored"))})},z=()=>{const t=o.filter(r=>r.completed);t.length!==0&&confirm(`Move ${t.length} items to pantry ? `)&&(t.forEach(r=>{y({name:r.text,category:r.category,quantity:r.quantity,location:"Kitchen",stockLevel:"full",value:0}),h(r.id)}),g(`Moved ${t.length} items to Pantry`,"success"))},D=o.reduce((t,r)=>(t[r.category]||(t[r.category]=[]),t[r.category].push(r),t),{}),w=o.filter(t=>t.completed).length;return e.jsxs("div",{className:"animate-slide-up",style:{paddingBottom:"120px"},children:[e.jsx("h2",{className:"text-title",children:"Shopping List"}),e.jsxs(B,{className:"mb-6",children:[p.length>0&&e.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"12px",marginBottom:"12px",borderBottom:"1px solid var(--glass-border)",scrollbarWidth:"none",msOverflowStyle:"none"},className:"no-scrollbar",children:p.map(t=>e.jsxs("button",{onClick:()=>T(t),type:"button",style:{whiteSpace:"nowrap",padding:"6px 12px",borderRadius:"20px",border:"1px solid var(--glass-border)",background:"rgba(255,255,255,0.05)",color:"var(--text-secondary)",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",flexShrink:0},children:[e.jsx(k,{size:12}),t.text]},t.id))}),e.jsxs("form",{onSubmit:I,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("input",{type:"number",min:"1",value:s,onChange:t=>l(parseInt(t.target.value)||1),className:"glass-panel",style:{width:"60px",padding:"12px",background:"rgba(255,255,255,0.05)",outline:"none",textAlign:"center",border:"1px solid var(--glass-border)"},placeholder:"Qty"}),e.jsx("input",{type:"text",value:n,onChange:t=>m(t.target.value),placeholder:"What do you need?",className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.05)",outline:"none",border:"1px solid var(--glass-border)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(U,{value:j,onChange:t=>C(t),options:c.map(t=>({value:t,label:t})),placeholder:"Category"}),e.jsx(S,{type:"submit",disabled:!n.trim(),style:{width:"60px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:24})})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[o.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px",opacity:.5},children:e.jsx("p",{children:"Your shopping list is empty."})}),Object.entries(D).map(([t,r])=>e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h3",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"hsl(var(--color-primary))",marginBottom:"12px",marginLeft:"4px",textTransform:"uppercase",letterSpacing:"0.05em",opacity:.8},children:t}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map(a=>e.jsx(E,{onSwipeLeft:()=>N(a.id,a.text),children:e.jsxs("div",{className:"tap-scale glass-panel",style:{display:"flex",alignItems:"center",padding:"16px",gap:"16px",background:a.completed?"rgba(0,0,0,0.2)":"var(--color-surface)",width:"100%",borderRadius:"16px",border:"1px solid var(--glass-border)",transition:"all 0.2s ease"},onClick:()=>x(a.id),children:[e.jsx("div",{style:{minWidth:"24px",height:"24px",borderRadius:"6px",border:a.completed?"none":"2px solid var(--text-muted)",background:a.completed?"hsl(var(--color-primary))":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0},children:a.completed&&e.jsx(W,{size:16,color:"white"})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"1rem",textDecoration:a.completed?"line-through":"none",fontWeight:500,color:a.completed?"var(--text-muted)":"var(--text-main)",transition:"all 0.2s",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.text}),a.quantity>1&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"hsl(var(--color-primary))",fontWeight:"bold"},children:["Qty: ",a.quantity]})]})]})},a.id))})]},t))]}),w>0&&e.jsx("div",{className:"animate-slide-up",style:{position:"fixed",bottom:"90px",left:"50%",transform:"translateX(-50%)",zIndex:20},children:e.jsxs(S,{onClick:z,style:{borderRadius:"32px",padding:"12px 24px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold",background:"hsl(var(--color-primary))",color:"white",border:"1px solid rgba(255,255,255,0.2)"},children:[e.jsx(_,{size:20}),"Move ",w," to Pantry"]})}),e.jsx(q,{isVisible:u.show,message:u.msg,type:u.type,actionLabel:u.actionLabel,onAction:u.onAction,onClose:()=>f(t=>({...t,show:!1}))})]})};export{F as TodoView};
