import{c as v,a as i,j as e,u as B,b as L,d as W,P as k,B as S,f as q,T as M}from"./index-vpsI0Pgs.js";import{u as O,a as E,S as $}from"./SwipeableItem-M-imXXXc.js";const _=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],C=v("archive",_);const P=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Q=v("chevron-down",P);const V=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],H=v("chevron-up",V),U=({value:n,onChange:d,options:x,placeholder:g="Select...",className:y=""})=>{const[c,p]=i.useState(!1),o=i.useRef(null);i.useEffect(()=>{const s=l=>{o.current&&!o.current.contains(l.target)&&p(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const h=x.find(s=>s.value===n)?.label||g;return e.jsxs("div",{className:`dropdown-container ${y}`,ref:o,children:[e.jsxs("div",{className:"desktop-only-dropdown",style:{position:"relative"},children:[e.jsxs("button",{type:"button",onClick:()=>p(!c),className:"glass-panel",style:{width:"100%",padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",color:"var(--text-primary)",cursor:"pointer",fontSize:"0.95rem",fontWeight:500,transition:"all 0.2s",boxShadow:"var(--shadow-sm)"},children:[e.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:h}),c?e.jsx(H,{size:18,style:{opacity:.6}}):e.jsx(Q,{size:18,style:{opacity:.6}})]}),c&&e.jsx("div",{className:"glass-panel animate-fade-in",style:{position:"absolute",top:"calc(100% + 8px)",left:0,right:0,zIndex:50,maxHeight:"240px",overflowY:"auto",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.3)",padding:"4px"},children:x.map(s=>e.jsx("div",{onClick:()=>{d(s.value),p(!1)},style:{padding:"10px 16px",cursor:"pointer",borderRadius:"12px",fontSize:"0.95rem",color:n===s.value?"hsl(var(--color-primary))":"var(--text-primary)",background:n===s.value?"rgba(59, 130, 246, 0.1)":"transparent",fontWeight:n===s.value?600:400,transition:"background 0.2s",marginBottom:"2px"},onMouseEnter:l=>l.currentTarget.style.background=n===s.value?"rgba(59, 130, 246, 0.15)":"rgba(255, 255, 255, 0.05)",onMouseLeave:l=>l.currentTarget.style.background=n===s.value?"rgba(59, 130, 246, 0.1)":"transparent",children:s.label},s.value))})]}),e.jsx("select",{className:"mobile-only-select",value:n,onChange:s=>d(s.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"16px",border:"1px solid var(--glass-border)",background:"var(--color-surface)",color:"var(--text-primary)",fontSize:"1rem",appearance:"none"},children:x.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})},F=()=>{const{todos:n,addTodo:d,toggleTodo:x,deleteTodo:g}=O(),{addItem:y}=B(),{categories:c}=L(),{frequentItems:p}=E(),[o,h]=i.useState(""),[s,l]=i.useState(1),[j,z]=i.useState(c[0]||"Other"),I=t=>{d(t.text,1,t.category),m(`Added ${t.text}`,"success")},[u,f]=i.useState({show:!1,msg:"",type:"success"}),m=(t,r="success",a,b)=>{f({show:!0,msg:t,type:r,actionLabel:a,onAction:b}),setTimeout(()=>f(A=>({...A,show:!1})),a?5e3:3e3)},N=t=>{t?.preventDefault(),o.trim()&&(d(o,s,j),h(""),l(1))},T=(t,r)=>{const a=n.find(b=>b.id===t);g(t),m(`Deleted "${r}"`,"info","Undo",()=>{a&&(d(a.text,a.quantity,a.category),m("Item restored"))})},D=()=>{const t=n.filter(r=>r.completed);t.length!==0&&confirm(`Move ${t.length} items to pantry ? `)&&(t.forEach(r=>{y({name:r.text,category:r.category,quantity:r.quantity,location:"Kitchen",stockLevel:"full",value:0}),g(r.id)}),m(`Moved ${t.length} items to Pantry`,"success"))},R=n.reduce((t,r)=>(t[r.category]||(t[r.category]=[]),t[r.category].push(r),t),{}),w=n.filter(t=>t.completed).length;return e.jsxs("div",{className:"animate-slide-up",style:{paddingBottom:"120px"},children:[e.jsx("h2",{className:"text-title",children:"Shopping List"}),e.jsxs(W,{className:"mb-6",style:{position:"relative",zIndex:10},children:[p.length>0&&e.jsx("div",{style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"12px",marginBottom:"12px",borderBottom:"1px solid var(--glass-border)",scrollbarWidth:"none",msOverflowStyle:"none"},className:"no-scrollbar",children:p.map(t=>e.jsxs("button",{onClick:()=>I(t),type:"button",style:{whiteSpace:"nowrap",padding:"6px 12px",borderRadius:"20px",border:"1px solid var(--glass-border)",background:"rgba(255,255,255,0.05)",color:"var(--text-secondary)",fontSize:"0.85rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s",flexShrink:0},children:[e.jsx(k,{size:12}),t.text]},t.id))}),e.jsxs("form",{onSubmit:N,style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("input",{type:"number",min:"1",value:s,onChange:t=>l(parseInt(t.target.value)||1),className:"glass-panel",style:{width:"60px",padding:"12px",background:"rgba(255,255,255,0.05)",outline:"none",textAlign:"center",border:"1px solid var(--glass-border)"},placeholder:"Qty"}),e.jsx("input",{type:"text",value:o,onChange:t=>h(t.target.value),placeholder:"What do you need?",className:"glass-panel",style:{flex:1,padding:"12px",background:"rgba(255,255,255,0.05)",outline:"none",border:"1px solid var(--glass-border)"}})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx(U,{value:j,onChange:t=>z(t),options:c.map(t=>({value:t,label:t})),placeholder:"Category"}),e.jsx(S,{type:"submit",disabled:!o.trim(),style:{width:"60px",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(k,{size:24})})]})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[n.length===0&&e.jsxs("div",{className:"glass-panel",style:{textAlign:"center",padding:"40px 20px",marginTop:"20px",display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[e.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",background:"rgba(var(--color-primary), 0.1)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{size:32,style:{opacity:.5}})}),e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"1.1rem",fontWeight:600,marginBottom:"4px"},children:"Your list is empty"}),e.jsx("p",{className:"text-muted",style:{fontSize:"0.9rem"},children:"Add items above or check your history"})]})]}),Object.entries(R).map(([t,r])=>e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h3",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"hsl(var(--color-primary))",marginBottom:"12px",marginLeft:"4px",textTransform:"uppercase",letterSpacing:"0.05em",opacity:.8},children:t}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map(a=>e.jsx($,{onSwipeLeft:()=>T(a.id,a.text),children:e.jsxs("div",{className:"tap-scale glass-panel",style:{display:"flex",alignItems:"center",padding:"16px",gap:"16px",background:a.completed?"rgba(0,0,0,0.2)":"var(--color-surface)",width:"100%",borderRadius:"16px",border:"1px solid var(--glass-border)",transition:"all 0.2s ease"},onClick:()=>x(a.id),children:[e.jsx("div",{style:{minWidth:"24px",height:"24px",borderRadius:"6px",border:a.completed?"none":"2px solid var(--text-muted)",background:a.completed?"hsl(var(--color-primary))":"transparent",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0},children:a.completed&&e.jsx(q,{size:16,color:"white"})}),e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"1rem",textDecoration:a.completed?"line-through":"none",fontWeight:500,color:a.completed?"var(--text-muted)":"var(--text-main)",transition:"all 0.2s",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.text}),a.quantity>1&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"hsl(var(--color-primary))",fontWeight:"bold"},children:["Qty: ",a.quantity]})]})]})},a.id))})]},t))]}),w>0&&e.jsx("div",{className:"animate-slide-up",style:{position:"fixed",bottom:"90px",left:"50%",transform:"translateX(-50%)",zIndex:20},children:e.jsxs(S,{onClick:D,style:{borderRadius:"32px",padding:"12px 24px",boxShadow:"0 8px 32px rgba(0,0,0,0.3)",display:"flex",alignItems:"center",gap:"8px",fontWeight:"bold",background:"hsl(var(--color-primary))",color:"white",border:"1px solid rgba(255,255,255,0.2)"},children:[e.jsx(C,{size:20}),"Move ",w," to Pantry"]})}),e.jsx(M,{isVisible:u.show,message:u.msg,type:u.type,actionLabel:u.actionLabel,onAction:u.onAction,onClose:()=>f(t=>({...t,show:!1}))})]})};export{F as TodoView};
