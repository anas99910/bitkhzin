(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=e(o);fetch(o.href,u)}})();var tg={exports:{}},au={};var IT;function NI(){if(IT)return au;IT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,o,u){var c=null;if(u!==void 0&&(c=""+u),o.key!==void 0&&(c=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:c,ref:o!==void 0?o:null,props:u}}return au.Fragment=t,au.jsx=e,au.jsxs=e,au}var wT;function OI(){return wT||(wT=1,tg.exports=NI()),tg.exports}var J=OI(),eg={exports:{}},St={};var RT;function MI(){if(RT)return St;RT=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),I=Symbol.iterator;function B(N){return N===null||typeof N!="object"?null:(N=I&&N[I]||N["@@iterator"],typeof N=="function"?N:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,W={};function ft(N,$,st){this.props=N,this.context=$,this.refs=W,this.updater=st||Z}ft.prototype.isReactComponent={},ft.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},ft.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function dt(){}dt.prototype=ft.prototype;function at(N,$,st){this.props=N,this.context=$,this.refs=W,this.updater=st||Z}var Rt=at.prototype=new dt;Rt.constructor=at,Y(Rt,ft.prototype),Rt.isPureReactComponent=!0;var bt=Array.isArray;function _t(){}var w={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function D(N,$,st){var ot=st.ref;return{$$typeof:s,type:N,key:$,ref:ot!==void 0?ot:null,props:st}}function O(N,$){return D(N.type,$,N.props)}function x(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function P(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(st){return $[st]})}var R=/\/+/g;function ae(N,$){return typeof N=="object"&&N!==null&&N.key!=null?P(""+N.key):$.toString(36)}function Me(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(_t,_t):(N.status="pending",N.then(function($){N.status==="pending"&&(N.status="fulfilled",N.value=$)},function($){N.status==="pending"&&(N.status="rejected",N.reason=$)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function G(N,$,st,ot,Tt){var Ct=typeof N;(Ct==="undefined"||Ct==="boolean")&&(N=null);var Ut=!1;if(N===null)Ut=!0;else switch(Ct){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(N.$$typeof){case s:case t:Ut=!0;break;case T:return Ut=N._init,G(Ut(N._payload),$,st,ot,Tt)}}if(Ut)return Tt=Tt(N),Ut=ot===""?"."+ae(N,0):ot,bt(Tt)?(st="",Ut!=null&&(st=Ut.replace(R,"$&/")+"/"),G(Tt,$,st,"",function(vs){return vs})):Tt!=null&&(x(Tt)&&(Tt=O(Tt,st+(Tt.key==null||N&&N.key===Tt.key?"":(""+Tt.key).replace(R,"$&/")+"/")+Ut)),$.push(Tt)),1;Ut=0;var Pe=ot===""?".":ot+":";if(bt(N))for(var oe=0;oe<N.length;oe++)ot=N[oe],Ct=Pe+ae(ot,oe),Ut+=G(ot,$,st,Ct,Tt);else if(oe=B(N),typeof oe=="function")for(N=oe.call(N),oe=0;!(ot=N.next()).done;)ot=ot.value,Ct=Pe+ae(ot,oe++),Ut+=G(ot,$,st,Ct,Tt);else if(Ct==="object"){if(typeof N.then=="function")return G(Me(N),$,st,ot,Tt);throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function rt(N,$,st){if(N==null)return N;var ot=[],Tt=0;return G(N,ot,"","",function(Ct){return $.call(st,Ct,Tt++)}),ot}function pt(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(st){(N._status===0||N._status===-1)&&(N._status=1,N._result=st)},function(st){(N._status===0||N._status===-1)&&(N._status=2,N._result=st)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var Bt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Kt={map:rt,forEach:function(N,$,st){rt(N,function(){$.apply(this,arguments)},st)},count:function(N){var $=0;return rt(N,function(){$++}),$},toArray:function(N){return rt(N,function($){return $})||[]},only:function(N){if(!x(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return St.Activity=A,St.Children=Kt,St.Component=ft,St.Fragment=e,St.Profiler=o,St.PureComponent=at,St.StrictMode=r,St.Suspense=g,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,St.__COMPILER_RUNTIME={__proto__:null,c:function(N){return w.H.useMemoCache(N)}},St.cache=function(N){return function(){return N.apply(null,arguments)}},St.cacheSignal=function(){return null},St.cloneElement=function(N,$,st){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ot=Y({},N.props),Tt=N.key;if($!=null)for(Ct in $.key!==void 0&&(Tt=""+$.key),$)!b.call($,Ct)||Ct==="key"||Ct==="__self"||Ct==="__source"||Ct==="ref"&&$.ref===void 0||(ot[Ct]=$[Ct]);var Ct=arguments.length-2;if(Ct===1)ot.children=st;else if(1<Ct){for(var Ut=Array(Ct),Pe=0;Pe<Ct;Pe++)Ut[Pe]=arguments[Pe+2];ot.children=Ut}return D(N.type,Tt,ot)},St.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},St.createElement=function(N,$,st){var ot,Tt={},Ct=null;if($!=null)for(ot in $.key!==void 0&&(Ct=""+$.key),$)b.call($,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(Tt[ot]=$[ot]);var Ut=arguments.length-2;if(Ut===1)Tt.children=st;else if(1<Ut){for(var Pe=Array(Ut),oe=0;oe<Ut;oe++)Pe[oe]=arguments[oe+2];Tt.children=Pe}if(N&&N.defaultProps)for(ot in Ut=N.defaultProps,Ut)Tt[ot]===void 0&&(Tt[ot]=Ut[ot]);return D(N,Ct,Tt)},St.createRef=function(){return{current:null}},St.forwardRef=function(N){return{$$typeof:m,render:N}},St.isValidElement=x,St.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:pt}},St.memo=function(N,$){return{$$typeof:y,type:N,compare:$===void 0?null:$}},St.startTransition=function(N){var $=w.T,st={};w.T=st;try{var ot=N(),Tt=w.S;Tt!==null&&Tt(st,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(_t,Bt)}catch(Ct){Bt(Ct)}finally{$!==null&&st.types!==null&&($.types=st.types),w.T=$}},St.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},St.use=function(N){return w.H.use(N)},St.useActionState=function(N,$,st){return w.H.useActionState(N,$,st)},St.useCallback=function(N,$){return w.H.useCallback(N,$)},St.useContext=function(N){return w.H.useContext(N)},St.useDebugValue=function(){},St.useDeferredValue=function(N,$){return w.H.useDeferredValue(N,$)},St.useEffect=function(N,$){return w.H.useEffect(N,$)},St.useEffectEvent=function(N){return w.H.useEffectEvent(N)},St.useId=function(){return w.H.useId()},St.useImperativeHandle=function(N,$,st){return w.H.useImperativeHandle(N,$,st)},St.useInsertionEffect=function(N,$){return w.H.useInsertionEffect(N,$)},St.useLayoutEffect=function(N,$){return w.H.useLayoutEffect(N,$)},St.useMemo=function(N,$){return w.H.useMemo(N,$)},St.useOptimistic=function(N,$){return w.H.useOptimistic(N,$)},St.useReducer=function(N,$,st){return w.H.useReducer(N,$,st)},St.useRef=function(N){return w.H.useRef(N)},St.useState=function(N){return w.H.useState(N)},St.useSyncExternalStore=function(N,$,st){return w.H.useSyncExternalStore(N,$,st)},St.useTransition=function(){return w.H.useTransition()},St.version="19.2.3",St}var CT;function tp(){return CT||(CT=1,eg.exports=MI()),eg.exports}var Ve=tp(),ng={exports:{}},ou={},ig={exports:{}},rg={};var DT;function PI(){return DT||(DT=1,(function(s){function t(G,rt){var pt=G.length;G.push(rt);t:for(;0<pt;){var Bt=pt-1>>>1,Kt=G[Bt];if(0<o(Kt,rt))G[Bt]=rt,G[pt]=Kt,pt=Bt;else break t}}function e(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var rt=G[0],pt=G.pop();if(pt!==rt){G[0]=pt;t:for(var Bt=0,Kt=G.length,N=Kt>>>1;Bt<N;){var $=2*(Bt+1)-1,st=G[$],ot=$+1,Tt=G[ot];if(0>o(st,pt))ot<Kt&&0>o(Tt,st)?(G[Bt]=Tt,G[ot]=pt,Bt=ot):(G[Bt]=st,G[$]=pt,Bt=$);else if(ot<Kt&&0>o(Tt,pt))G[Bt]=Tt,G[ot]=pt,Bt=ot;else break t}}return rt}function o(G,rt){var pt=G.sortIndex-rt.sortIndex;return pt!==0?pt:G.id-rt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],y=[],T=1,A=null,I=3,B=!1,Z=!1,Y=!1,W=!1,ft=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function Rt(G){for(var rt=e(y);rt!==null;){if(rt.callback===null)r(y);else if(rt.startTime<=G)r(y),rt.sortIndex=rt.expirationTime,t(g,rt);else break;rt=e(y)}}function bt(G){if(Y=!1,Rt(G),!Z)if(e(g)!==null)Z=!0,_t||(_t=!0,P());else{var rt=e(y);rt!==null&&Me(bt,rt.startTime-G)}}var _t=!1,w=-1,b=5,D=-1;function O(){return W?!0:!(s.unstable_now()-D<b)}function x(){if(W=!1,_t){var G=s.unstable_now();D=G;var rt=!0;try{t:{Z=!1,Y&&(Y=!1,dt(w),w=-1),B=!0;var pt=I;try{e:{for(Rt(G),A=e(g);A!==null&&!(A.expirationTime>G&&O());){var Bt=A.callback;if(typeof Bt=="function"){A.callback=null,I=A.priorityLevel;var Kt=Bt(A.expirationTime<=G);if(G=s.unstable_now(),typeof Kt=="function"){A.callback=Kt,Rt(G),rt=!0;break e}A===e(g)&&r(g),Rt(G)}else r(g);A=e(g)}if(A!==null)rt=!0;else{var N=e(y);N!==null&&Me(bt,N.startTime-G),rt=!1}}break t}finally{A=null,I=pt,B=!1}rt=void 0}}finally{rt?P():_t=!1}}}var P;if(typeof at=="function")P=function(){at(x)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,ae=R.port2;R.port1.onmessage=x,P=function(){ae.postMessage(null)}}else P=function(){ft(x,0)};function Me(G,rt){w=ft(function(){G(s.unstable_now())},rt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return I},s.unstable_next=function(G){switch(I){case 1:case 2:case 3:var rt=3;break;default:rt=I}var pt=I;I=rt;try{return G()}finally{I=pt}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(G,rt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pt=I;I=G;try{return rt()}finally{I=pt}},s.unstable_scheduleCallback=function(G,rt,pt){var Bt=s.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?Bt+pt:Bt):pt=Bt,G){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=pt+Kt,G={id:T++,callback:rt,priorityLevel:G,startTime:pt,expirationTime:Kt,sortIndex:-1},pt>Bt?(G.sortIndex=pt,t(y,G),e(g)===null&&G===e(y)&&(Y?(dt(w),w=-1):Y=!0,Me(bt,pt-Bt))):(G.sortIndex=Kt,t(g,G),Z||B||(Z=!0,_t||(_t=!0,P()))),G},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(G){var rt=I;return function(){var pt=I;I=rt;try{return G.apply(this,arguments)}finally{I=pt}}}})(rg)),rg}var VT;function kI(){return VT||(VT=1,ig.exports=PI()),ig.exports}var sg={exports:{}},Ze={};var xT;function LI(){if(xT)return Ze;xT=1;var s=tp();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:y,implementation:T}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ze.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,T)},Ze.flushSync=function(g){var y=c.T,T=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=y,r.p=T,r.d.f()}},Ze.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Ze.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Ze.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin),I=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:I,fetchPriority:B}):T==="script"&&r.d.X(g,{crossOrigin:A,integrity:I,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ze.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Ze.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,A=m(T,y.crossOrigin);r.d.L(g,T,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ze.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Ze.requestFormReset=function(g){r.d.r(g)},Ze.unstable_batchedUpdates=function(g,y){return g(y)},Ze.useFormState=function(g,y,T){return c.H.useFormState(g,y,T)},Ze.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ze.version="19.2.3",Ze}var NT;function UI(){if(NT)return sg.exports;NT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),sg.exports=LI(),sg.exports}var OT;function zI(){if(OT)return ou;OT=1;var s=kI(),t=tp(),e=UI();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function y(n){var i=n.alternate;if(!i){if(i=u(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),n;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,E=f.child;E;){if(E===a){_=!0,a=f,l=d;break}if(E===l){_=!0,l=f,a=d;break}E=E.sibling}if(!_){for(E=d.child;E;){if(E===a){_=!0,a=d,l=f;break}if(E===l){_=!0,l=d,a=f;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function T(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=T(n),i!==null)return i;n=n.sibling}return null}var A=Object.assign,I=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),ft=Symbol.for("react.profiler"),dt=Symbol.for("react.consumer"),at=Symbol.for("react.context"),Rt=Symbol.for("react.forward_ref"),bt=Symbol.for("react.suspense"),_t=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Y:return"Fragment";case ft:return"Profiler";case W:return"StrictMode";case bt:return"Suspense";case _t:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Z:return"Portal";case at:return n.displayName||"Context";case dt:return(n._context.displayName||"Context")+".Consumer";case Rt:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return i=n.displayName||null,i!==null?i:ae(n.type)||"Memo";case b:i=n._payload,n=n._init;try{return ae(n(i))}catch{}}return null}var Me=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pt={pending:!1,data:null,method:null,action:null},Bt=[],Kt=-1;function N(n){return{current:n}}function $(n){0>Kt||(n.current=Bt[Kt],Bt[Kt]=null,Kt--)}function st(n,i){Kt++,Bt[Kt]=n.current,n.current=i}var ot=N(null),Tt=N(null),Ct=N(null),Ut=N(null);function Pe(n,i){switch(st(Ct,i),st(Tt,n),st(ot,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Yv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Yv(i),n=Xv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ot),st(ot,n)}function oe(){$(ot),$(Tt),$(Ct)}function vs(n){n.memoizedState!==null&&st(Ut,n);var i=ot.current,a=Xv(i,n.type);i!==a&&(st(Tt,n),st(ot,a))}function wa(n){Tt.current===n&&($(ot),$(Tt)),Ut.current===n&&($(Ut),nu._currentValue=pt)}var Ra,Ca;function oi(n){if(Ra===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ra=i&&i[1]||"",Ca=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ra+n+Ca}var nl=!1;function Ts(n,i){if(!n||nl)return"";nl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(F){var j=F}Reflect.construct(n,[],X)}else{try{X.call()}catch(F){j=F}n.call(X.prototype)}}else{try{throw Error()}catch(F){j=F}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(F){if(F&&j&&typeof F.stack=="string")return[F.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],E=d[1];if(_&&E){var C=_.split(`
`),z=E.split(`
`);for(f=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;if(l===C.length||f===z.length)for(l=C.length-1,f=z.length-1;1<=l&&0<=f&&C[l]!==z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(C[l]!==z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||C[l]!==z[f]){var H=`
`+C[l].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=l&&0<=f);break}}}finally{nl=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?oi(a):""}function il(n,i){switch(n.tag){case 26:case 27:case 5:return oi(n.type);case 16:return oi("Lazy");case 13:return n.child!==i&&i!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return Ts(n.type,!1);case 11:return Ts(n.type.render,!1);case 1:return Ts(n.type,!0);case 31:return oi("Activity");default:return""}}function rl(n){try{var i="",a=null;do i+=il(n,a),a=n,n=n.return;while(n);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Te=Object.prototype.hasOwnProperty,ke=s.unstable_scheduleCallback,pr=s.unstable_cancelCallback,nd=s.unstable_shouldYield,sc=s.unstable_requestPaint,sn=s.unstable_now,Es=s.unstable_getCurrentPriorityLevel,sl=s.unstable_ImmediatePriority,al=s.unstable_UserBlockingPriority,yr=s.unstable_NormalPriority,id=s.unstable_LowPriority,ac=s.unstable_IdlePriority,oc=s.log,lc=s.unstable_setDisableYieldValue,Qn=null,He=null;function xn(n){if(typeof oc=="function"&&lc(n),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(Qn,n)}catch{}}var pe=Math.clz32?Math.clz32:cc,uc=Math.log,Da=Math.LN2;function cc(n){return n>>>=0,n===0?32:31-(uc(n)/Da|0)|0}var li=256,As=262144,Ee=4194304;function ui(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ci(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?f=ui(l):(_&=E,_!==0?f=ui(_):a||(a=E&~n,a!==0&&(f=ui(a))))):(E=l&~d,E!==0?f=ui(E):_!==0?f=ui(_):a||(a=l&~n,a!==0&&(f=ui(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function Yn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function rd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(){var n=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),n}function hi(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Ss(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function sd(n,i,a,l,f,d){var _=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var E=n.entanglements,C=n.expirationTimes,z=n.hiddenUpdates;for(a=_&~a;0<a;){var H=31-pe(a),X=1<<H;E[H]=0,C[H]=-1;var j=z[H];if(j!==null)for(z[H]=null,H=0;H<j.length;H++){var F=j[H];F!==null&&(F.lane&=-536870913)}a&=~X}l!==0&&bs(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(_&~i))}function bs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-pe(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&261930}function ol(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-pe(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function ll(n,i){var a=i&-i;return a=(a&42)!==0?1:Is(a),(a&(n.suspendedLanes|i))!==0?0:a}function Is(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ui(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function fc(){var n=rt.p;return n!==0?n:(n=window.event,n===void 0?32:_T(n.type))}function Xn(n,i){var a=rt.p;try{return rt.p=n,i()}finally{rt.p=a}}var $n=Math.random().toString(36).slice(2),Ae="__reactFiber$"+$n,Be="__reactProps$"+$n,fi="__reactContainer$"+$n,Va="__reactEvents$"+$n,ad="__reactListeners$"+$n,dc="__reactHandles$"+$n,mc="__reactResources$"+$n,di="__reactMarker$"+$n;function xa(n){delete n[Ae],delete n[Be],delete n[Va],delete n[ad],delete n[dc]}function mi(n){var i=n[Ae];if(i)return i;for(var a=n.parentNode;a;){if(i=a[fi]||a[Ae]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=nT(n);n!==null;){if(a=n[Ae])return a;n=nT(n)}return i}n=a,a=n.parentNode}return null}function Nn(n){if(n=n[Ae]||n[fi]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function vn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function gi(n){var i=n[mc];return i||(i=n[mc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Se(n){n[di]=!0}var ul=new Set,cl={};function pi(n,i){yi(n,i),yi(n+"Capture",i)}function yi(n,i){for(cl[n]=i,n=0;n<i.length;n++)ul.add(i[n])}var hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fl={},dl={};function gc(n){return Te.call(dl,n)?!0:Te.call(fl,n)?!1:hl.test(n)?dl[n]=!0:(fl[n]=!0,!1)}function Na(n,i,a){if(gc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function Tn(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function be(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}function je(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _r(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ml(n,i,a){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(n,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Qt(n){if(!n._valueTracker){var i=_r(n)?"checked":"value";n._valueTracker=ml(n,i,""+n[i])}}function ws(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=_r(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function _i(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Rs=/[\n"\\]/g;function hn(n){return n.replace(Rs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Oa(n,i,a,l,f,d,_,E){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+je(i)):n.value!==""+je(i)&&(n.value=""+je(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?gl(n,_,je(i)):a!=null?gl(n,_,je(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+je(E):n.removeAttribute("name")}function pc(n,i,a,l,f,d,_,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Qt(n);return}a=a!=null?""+je(a):"",i=i!=null?""+je(i):a,E||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=E?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Qt(n)}function gl(n,i,a){i==="number"&&_i(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function vr(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+je(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function yc(n,i,a){if(i!=null&&(i=""+je(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+je(a):""}function Tr(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Me(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=je(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l),Qt(n)}function fn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var _c=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||_c.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function yl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&pl(n,f,l)}else for(var d in i)i.hasOwnProperty(d)&&pl(n,d,i[d])}function Ma(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Er=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(n){return Er.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Jn(){}var _l=null;function On(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,vi=null;function Cs(n){var i=Nn(n);if(i&&(n=i.stateNode)){var a=n[Be]||null;t:switch(n=i.stateNode,i.type){case"input":if(Oa(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+hn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Be]||null;if(!f)throw Error(r(90));Oa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&ws(l)}break t;case"textarea":yc(n,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&vr(n,!!a.multiple,i,!1)}}}var ka=!1;function Sr(n,i,a){if(ka)return n(i,a);ka=!0;try{var l=n(i);return l}finally{if(ka=!1,(Ar!==null||vi!==null)&&(fh(),Ar&&(i=Ar,n=vi,vi=Ar=null,Cs(i),n)))for(i=0;i<n.length;i++)Cs(n[i])}}function Zn(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Be]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break t;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=!1;if(Mn)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{Ds=!1}var Ti=null,vl=null,Vs=null;function Tl(){if(Vs)return Vs;var n,i=vl,a=i.length,l,f="value"in Ti?Ti.value:Ti.textContent,d=f.length;for(n=0;n<a&&i[n]===f[n];n++);var _=a-n;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return Vs=f.slice(n,1<l?1-l:void 0)}function xs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function zi(){return!0}function Wn(){return!1}function Ge(n){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(a=n[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?zi:Wn,this.isPropagationStopped=Wn,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Ge(Bi),br=A({},Bi,{view:0,detail:0}),El=Ge(br),Ir,La,Ai,Ua=A({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ai&&(Ai&&n.type==="mousemove"?(Ir=n.screenX-Ai.screenX,La=n.screenY-Ai.screenY):La=Ir=0,Ai=n),Ir)},movementY:function(n){return"movementY"in n?n.movementY:La}}),Al=Ge(Ua),Ns=A({},Ua,{dataTransfer:0}),Tc=Ge(Ns),Ec=A({},br,{relatedTarget:0}),Os=Ge(Ec),Sl=A({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Ac=Ge(Sl),za=A({},Bi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Sc=Ge(za),bc=A({},Bi,{data:0}),Si=Ge(bc),Ic={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Rc[n])?!!i[n]:!1}function wr(){return Cc}var an=A({},br,{key:function(n){if(n.key){var i=Ic[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=xs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(n){return n.type==="keypress"?xs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Dc=Ge(an),Vc=A({},Ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=Ge(Vc),h=A({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr}),p=Ge(h),v=A({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Ge(v),L=A({},Ua,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),q=Ge(L),et=A({},Bi,{newState:0,oldState:0}),It=Ge(et),ye=[9,13,27,32],Ft=Mn&&"CompositionEvent"in window,le=null;Mn&&"documentMode"in document&&(le=document.documentMode);var Pn=Mn&&"TextEvent"in window&&!le,bi=Mn&&(!Ft||le&&8<le&&11>=le),ti=" ",ei=!1;function Ms(n,i){switch(n){case"keyup":return ye.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ja=!1;function nb(n,i){switch(n){case"compositionend":return Ba(i);case"keypress":return i.which!==32?null:(ei=!0,ti);case"textInput":return n=i.data,n===ti&&ei?null:n;default:return null}}function ib(n,i){if(ja)return n==="compositionend"||!Ft&&Ms(n,i)?(n=Tl(),Vs=vl=Ti=null,ja=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bi&&i.locale!=="ko"?null:i.data;default:return null}}var rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!rb[n.type]:i==="textarea"}function ay(n,i,a,l){Ar?vi?vi.push(l):vi=[l]:Ar=l,i=vh(i,"onChange"),0<i.length&&(a=new Ei("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var bl=null,Il=null;function sb(n){qv(n,0)}function xc(n){var i=vn(n);if(ws(i))return n}function oy(n,i){if(n==="change")return i}var ly=!1;if(Mn){var od;if(Mn){var ld="oninput"in document;if(!ld){var uy=document.createElement("div");uy.setAttribute("oninput","return;"),ld=typeof uy.oninput=="function"}od=ld}else od=!1;ly=od&&(!document.documentMode||9<document.documentMode)}function cy(){bl&&(bl.detachEvent("onpropertychange",hy),Il=bl=null)}function hy(n){if(n.propertyName==="value"&&xc(Il)){var i=[];ay(i,Il,n,On(n)),Sr(sb,i)}}function ab(n,i,a){n==="focusin"?(cy(),bl=i,Il=a,bl.attachEvent("onpropertychange",hy)):n==="focusout"&&cy()}function ob(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xc(Il)}function lb(n,i){if(n==="click")return xc(i)}function ub(n,i){if(n==="input"||n==="change")return xc(i)}function cb(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var En=typeof Object.is=="function"?Object.is:cb;function wl(n,i){if(En(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Te.call(i,f)||!En(n[f],i[f]))return!1}return!0}function fy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dy(n,i){var a=fy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=fy(a)}}function my(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?my(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function gy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=_i(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=_i(n.document)}return i}function ud(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var hb=Mn&&"documentMode"in document&&11>=document.documentMode,qa=null,cd=null,Rl=null,hd=!1;function py(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hd||qa==null||qa!==_i(l)||(l=qa,"selectionStart"in l&&ud(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rl&&wl(Rl,l)||(Rl=l,l=vh(cd,"onSelect"),0<l.length&&(i=new Ei("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=qa)))}function Ps(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Fa={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},fd={},yy={};Mn&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function ks(n){if(fd[n])return fd[n];if(!Fa[n])return n;var i=Fa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in yy)return fd[n]=i[a];return n}var _y=ks("animationend"),vy=ks("animationiteration"),Ty=ks("animationstart"),fb=ks("transitionrun"),db=ks("transitionstart"),mb=ks("transitioncancel"),Ey=ks("transitionend"),Ay=new Map,dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dd.push("scrollEnd");function ni(n,i){Ay.set(n,i),pi(i,[n])}var Nc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},kn=[],Ha=0,md=0;function Oc(){for(var n=Ha,i=md=Ha=0;i<n;){var a=kn[i];kn[i++]=null;var l=kn[i];kn[i++]=null;var f=kn[i];kn[i++]=null;var d=kn[i];if(kn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Sy(a,f,d)}}function Mc(n,i,a,l){kn[Ha++]=n,kn[Ha++]=i,kn[Ha++]=a,kn[Ha++]=l,md|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function gd(n,i,a,l){return Mc(n,i,a,l),Pc(n)}function Ls(n,i){return Mc(n,null,null,i),Pc(n)}function Sy(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&i!==null&&(f=31-pe(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function Pc(n){if(50<Xl)throw Xl=0,bm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ga={};function gb(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,a,l){return new gb(n,i,a,l)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qi(n,i){var a=n.alternate;return a===null?(a=An(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function by(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function kc(n,i,a,l,f,d){var _=0;if(l=n,typeof n=="function")pd(n)&&(_=1);else if(typeof n=="string")_=TI(n,a,ot.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case D:return n=An(31,a,i,f),n.elementType=D,n.lanes=d,n;case Y:return Us(a.children,f,d,i);case W:_=8,f|=24;break;case ft:return n=An(12,a,i,f|2),n.elementType=ft,n.lanes=d,n;case bt:return n=An(13,a,i,f),n.elementType=bt,n.lanes=d,n;case _t:return n=An(19,a,i,f),n.elementType=_t,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case at:_=10;break t;case dt:_=9;break t;case Rt:_=11;break t;case w:_=14;break t;case b:_=16,l=null;break t}_=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=An(_,a,i,f),i.elementType=n,i.type=l,i.lanes=d,i}function Us(n,i,a,l){return n=An(7,n,l,i),n.lanes=a,n}function yd(n,i,a){return n=An(6,n,null,i),n.lanes=a,n}function Iy(n){var i=An(18,null,null,0);return i.stateNode=n,i}function _d(n,i,a){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var wy=new WeakMap;function Ln(n,i){if(typeof n=="object"&&n!==null){var a=wy.get(n);return a!==void 0?a:(i={value:n,source:i,stack:rl(i)},wy.set(n,i),i)}return{value:n,source:i,stack:rl(i)}}var Ka=[],Qa=0,Lc=null,Cl=0,Un=[],zn=0,Rr=null,Ii=1,wi="";function Fi(n,i){Ka[Qa++]=Cl,Ka[Qa++]=Lc,Lc=n,Cl=i}function Ry(n,i,a){Un[zn++]=Ii,Un[zn++]=wi,Un[zn++]=Rr,Rr=n;var l=Ii;n=wi;var f=32-pe(l)-1;l&=~(1<<f),a+=1;var d=32-pe(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Ii=1<<32-pe(i)+f|a<<f|l,wi=d+n}else Ii=1<<d|a<<f|l,wi=n}function vd(n){n.return!==null&&(Fi(n,1),Ry(n,1,0))}function Td(n){for(;n===Lc;)Lc=Ka[--Qa],Ka[Qa]=null,Cl=Ka[--Qa],Ka[Qa]=null;for(;n===Rr;)Rr=Un[--zn],Un[zn]=null,wi=Un[--zn],Un[zn]=null,Ii=Un[--zn],Un[zn]=null}function Cy(n,i){Un[zn++]=Ii,Un[zn++]=wi,Un[zn++]=Rr,Ii=i.id,wi=i.overflow,Rr=n}var Ke=null,re=null,Lt=!1,Cr=null,Bn=!1,Ed=Error(r(519));function Dr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(Ln(i,n)),Ed}function Dy(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[Ae]=n,i[Be]=l,a){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(a=0;a<Jl.length;a++)Nt(Jl[a],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),pc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),Tr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Kv(i.textContent,a)?(l.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),l.onScroll!=null&&Nt("scroll",i),l.onScrollEnd!=null&&Nt("scrollend",i),l.onClick!=null&&(i.onclick=Jn),i=!0):i=!1,i||Dr(n,!0)}function Vy(n){for(Ke=n.return;Ke;)switch(Ke.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Ke=Ke.return}}function Ya(n){if(n!==Ke)return!1;if(!Lt)return Vy(n),Lt=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||zm(n.type,n.memoizedProps)),a=!a),a&&re&&Dr(n),Vy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));re=eT(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));re=eT(n)}else i===27?(i=re,Fr(n.type)?(n=Hm,Hm=null,re=n):re=i):re=Ke?qn(n.stateNode.nextSibling):null;return!0}function zs(){re=Ke=null,Lt=!1}function Ad(){var n=Cr;return n!==null&&(pn===null?pn=n:pn.push.apply(pn,n),Cr=null),n}function Dl(n){Cr===null?Cr=[n]:Cr.push(n)}var Sd=N(null),Bs=null,Hi=null;function Vr(n,i,a){st(Sd,i._currentValue),i._currentValue=a}function Gi(n){n._currentValue=Sd.current,$(Sd)}function bd(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function Id(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var E=d;d=f;for(var C=0;C<i.length;C++)if(E.context===i[C]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),bd(d.return,a,n),l||(_=null);break t}d=E.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),bd(_,a,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Xa(n,i,a,l){n=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=f.type;En(f.pendingProps.value,_.value)||(n!==null?n.push(E):n=[E])}}else if(f===Ut.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(nu):n=[nu])}f=f.return}n!==null&&Id(i,n,a,l),i.flags|=262144}function Uc(n){for(n=n.firstContext;n!==null;){if(!En(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function js(n){Bs=n,Hi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Qe(n){return xy(Bs,n)}function zc(n,i){return Bs===null&&js(n),xy(n,i)}function xy(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Hi===null){if(n===null)throw Error(r(308));Hi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Hi=Hi.next=i;return a}var pb=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},yb=s.unstable_scheduleCallback,_b=s.unstable_NormalPriority,Ie={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wd(){return{controller:new pb,data:new Map,refCount:0}}function Vl(n){n.refCount--,n.refCount===0&&yb(_b,function(){n.controller.abort()})}var xl=null,Rd=0,$a=0,Ja=null;function vb(n,i){if(xl===null){var a=xl=[];Rd=0,$a=Vm(),Ja={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Rd++,i.then(Ny,Ny),i}function Ny(){if(--Rd===0&&xl!==null){Ja!==null&&(Ja.status="fulfilled");var n=xl;xl=null,$a=0,Ja=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Tb(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Oy=G.S;G.S=function(n,i){pv=sn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&vb(n,i),Oy!==null&&Oy(n,i)};var qs=N(null);function Cd(){var n=qs.current;return n!==null?n:ie.pooledCache}function Bc(n,i){i===null?st(qs,qs.current):st(qs,i.pool)}function My(){var n=Cd();return n===null?null:{parent:Ie._currentValue,pool:n}}var Za=Error(r(460)),Dd=Error(r(474)),jc=Error(r(542)),qc={then:function(){}};function Py(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ky(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Jn,Jn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Uy(n),n;default:if(typeof i.status=="string")i.then(Jn,Jn);else{if(n=ie,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Uy(n),n}throw Hs=i,Za}}function Fs(n){try{var i=n._init;return i(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Hs=a,Za):a}}var Hs=null;function Ly(){if(Hs===null)throw Error(r(459));var n=Hs;return Hs=null,n}function Uy(n){if(n===Za||n===jc)throw Error(r(483))}var Wa=null,Nl=0;function Fc(n){var i=Nl;return Nl+=1,Wa===null&&(Wa=[]),ky(Wa,n,i)}function Ol(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Hc(n,i){throw i.$$typeof===I?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function zy(n){function i(M,V){if(n){var U=M.deletions;U===null?(M.deletions=[V],M.flags|=16):U.push(V)}}function a(M,V){if(!n)return null;for(;V!==null;)i(M,V),V=V.sibling;return null}function l(M){for(var V=new Map;M!==null;)M.key!==null?V.set(M.key,M):V.set(M.index,M),M=M.sibling;return V}function f(M,V){return M=qi(M,V),M.index=0,M.sibling=null,M}function d(M,V,U){return M.index=U,n?(U=M.alternate,U!==null?(U=U.index,U<V?(M.flags|=67108866,V):U):(M.flags|=67108866,V)):(M.flags|=1048576,V)}function _(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function E(M,V,U,Q){return V===null||V.tag!==6?(V=yd(U,M.mode,Q),V.return=M,V):(V=f(V,U),V.return=M,V)}function C(M,V,U,Q){var mt=U.type;return mt===Y?H(M,V,U.props.children,Q,U.key):V!==null&&(V.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===b&&Fs(mt)===V.type)?(V=f(V,U.props),Ol(V,U),V.return=M,V):(V=kc(U.type,U.key,U.props,null,M.mode,Q),Ol(V,U),V.return=M,V)}function z(M,V,U,Q){return V===null||V.tag!==4||V.stateNode.containerInfo!==U.containerInfo||V.stateNode.implementation!==U.implementation?(V=_d(U,M.mode,Q),V.return=M,V):(V=f(V,U.children||[]),V.return=M,V)}function H(M,V,U,Q,mt){return V===null||V.tag!==7?(V=Us(U,M.mode,Q,mt),V.return=M,V):(V=f(V,U),V.return=M,V)}function X(M,V,U){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=yd(""+V,M.mode,U),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case B:return U=kc(V.type,V.key,V.props,null,M.mode,U),Ol(U,V),U.return=M,U;case Z:return V=_d(V,M.mode,U),V.return=M,V;case b:return V=Fs(V),X(M,V,U)}if(Me(V)||P(V))return V=Us(V,M.mode,U,null),V.return=M,V;if(typeof V.then=="function")return X(M,Fc(V),U);if(V.$$typeof===at)return X(M,zc(M,V),U);Hc(M,V)}return null}function j(M,V,U,Q){var mt=V!==null?V.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return mt!==null?null:E(M,V,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case B:return U.key===mt?C(M,V,U,Q):null;case Z:return U.key===mt?z(M,V,U,Q):null;case b:return U=Fs(U),j(M,V,U,Q)}if(Me(U)||P(U))return mt!==null?null:H(M,V,U,Q,null);if(typeof U.then=="function")return j(M,V,Fc(U),Q);if(U.$$typeof===at)return j(M,V,zc(M,U),Q);Hc(M,U)}return null}function F(M,V,U,Q,mt){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return M=M.get(U)||null,E(V,M,""+Q,mt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case B:return M=M.get(Q.key===null?U:Q.key)||null,C(V,M,Q,mt);case Z:return M=M.get(Q.key===null?U:Q.key)||null,z(V,M,Q,mt);case b:return Q=Fs(Q),F(M,V,U,Q,mt)}if(Me(Q)||P(Q))return M=M.get(U)||null,H(V,M,Q,mt,null);if(typeof Q.then=="function")return F(M,V,U,Fc(Q),mt);if(Q.$$typeof===at)return F(M,V,U,zc(V,Q),mt);Hc(V,Q)}return null}function lt(M,V,U,Q){for(var mt=null,jt=null,ct=V,Dt=V=0,Mt=null;ct!==null&&Dt<U.length;Dt++){ct.index>Dt?(Mt=ct,ct=null):Mt=ct.sibling;var qt=j(M,ct,U[Dt],Q);if(qt===null){ct===null&&(ct=Mt);break}n&&ct&&qt.alternate===null&&i(M,ct),V=d(qt,V,Dt),jt===null?mt=qt:jt.sibling=qt,jt=qt,ct=Mt}if(Dt===U.length)return a(M,ct),Lt&&Fi(M,Dt),mt;if(ct===null){for(;Dt<U.length;Dt++)ct=X(M,U[Dt],Q),ct!==null&&(V=d(ct,V,Dt),jt===null?mt=ct:jt.sibling=ct,jt=ct);return Lt&&Fi(M,Dt),mt}for(ct=l(ct);Dt<U.length;Dt++)Mt=F(ct,M,Dt,U[Dt],Q),Mt!==null&&(n&&Mt.alternate!==null&&ct.delete(Mt.key===null?Dt:Mt.key),V=d(Mt,V,Dt),jt===null?mt=Mt:jt.sibling=Mt,jt=Mt);return n&&ct.forEach(function(Yr){return i(M,Yr)}),Lt&&Fi(M,Dt),mt}function yt(M,V,U,Q){if(U==null)throw Error(r(151));for(var mt=null,jt=null,ct=V,Dt=V=0,Mt=null,qt=U.next();ct!==null&&!qt.done;Dt++,qt=U.next()){ct.index>Dt?(Mt=ct,ct=null):Mt=ct.sibling;var Yr=j(M,ct,qt.value,Q);if(Yr===null){ct===null&&(ct=Mt);break}n&&ct&&Yr.alternate===null&&i(M,ct),V=d(Yr,V,Dt),jt===null?mt=Yr:jt.sibling=Yr,jt=Yr,ct=Mt}if(qt.done)return a(M,ct),Lt&&Fi(M,Dt),mt;if(ct===null){for(;!qt.done;Dt++,qt=U.next())qt=X(M,qt.value,Q),qt!==null&&(V=d(qt,V,Dt),jt===null?mt=qt:jt.sibling=qt,jt=qt);return Lt&&Fi(M,Dt),mt}for(ct=l(ct);!qt.done;Dt++,qt=U.next())qt=F(ct,M,Dt,qt.value,Q),qt!==null&&(n&&qt.alternate!==null&&ct.delete(qt.key===null?Dt:qt.key),V=d(qt,V,Dt),jt===null?mt=qt:jt.sibling=qt,jt=qt);return n&&ct.forEach(function(xI){return i(M,xI)}),Lt&&Fi(M,Dt),mt}function ne(M,V,U,Q){if(typeof U=="object"&&U!==null&&U.type===Y&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case B:t:{for(var mt=U.key;V!==null;){if(V.key===mt){if(mt=U.type,mt===Y){if(V.tag===7){a(M,V.sibling),Q=f(V,U.props.children),Q.return=M,M=Q;break t}}else if(V.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===b&&Fs(mt)===V.type){a(M,V.sibling),Q=f(V,U.props),Ol(Q,U),Q.return=M,M=Q;break t}a(M,V);break}else i(M,V);V=V.sibling}U.type===Y?(Q=Us(U.props.children,M.mode,Q,U.key),Q.return=M,M=Q):(Q=kc(U.type,U.key,U.props,null,M.mode,Q),Ol(Q,U),Q.return=M,M=Q)}return _(M);case Z:t:{for(mt=U.key;V!==null;){if(V.key===mt)if(V.tag===4&&V.stateNode.containerInfo===U.containerInfo&&V.stateNode.implementation===U.implementation){a(M,V.sibling),Q=f(V,U.children||[]),Q.return=M,M=Q;break t}else{a(M,V);break}else i(M,V);V=V.sibling}Q=_d(U,M.mode,Q),Q.return=M,M=Q}return _(M);case b:return U=Fs(U),ne(M,V,U,Q)}if(Me(U))return lt(M,V,U,Q);if(P(U)){if(mt=P(U),typeof mt!="function")throw Error(r(150));return U=mt.call(U),yt(M,V,U,Q)}if(typeof U.then=="function")return ne(M,V,Fc(U),Q);if(U.$$typeof===at)return ne(M,V,zc(M,U),Q);Hc(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,V!==null&&V.tag===6?(a(M,V.sibling),Q=f(V,U),Q.return=M,M=Q):(a(M,V),Q=yd(U,M.mode,Q),Q.return=M,M=Q),_(M)):a(M,V)}return function(M,V,U,Q){try{Nl=0;var mt=ne(M,V,U,Q);return Wa=null,mt}catch(ct){if(ct===Za||ct===jc)throw ct;var jt=An(29,ct,null,M.mode);return jt.lanes=Q,jt.return=M,jt}}}var Gs=zy(!0),By=zy(!1),xr=!1;function Vd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Nr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Or(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ht&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=Pc(n),Sy(n,null,a),i}return Mc(n,l,i,a),Pc(n)}function Ml(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ol(n,a)}}function Nd(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Od=!1;function Pl(){if(Od){var n=Ja;if(n!==null)throw n}}function kl(n,i,a,l){Od=!1;var f=n.updateQueue;xr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var C=E,z=C.next;C.next=null,_===null?d=z:_.next=z,_=C;var H=n.alternate;H!==null&&(H=H.updateQueue,E=H.lastBaseUpdate,E!==_&&(E===null?H.firstBaseUpdate=z:E.next=z,H.lastBaseUpdate=C))}if(d!==null){var X=f.baseState;_=0,H=z=C=null,E=d;do{var j=E.lane&-536870913,F=j!==E.lane;if(F?(Ot&j)===j:(l&j)===j){j!==0&&j===$a&&(Od=!0),H!==null&&(H=H.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var lt=n,yt=E;j=i;var ne=a;switch(yt.tag){case 1:if(lt=yt.payload,typeof lt=="function"){X=lt.call(ne,X,j);break t}X=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=yt.payload,j=typeof lt=="function"?lt.call(ne,X,j):lt,j==null)break t;X=A({},X,j);break t;case 2:xr=!0}}j=E.callback,j!==null&&(n.flags|=64,F&&(n.flags|=8192),F=f.callbacks,F===null?f.callbacks=[j]:F.push(j))}else F={lane:j,tag:E.tag,payload:E.payload,callback:E.callback,next:null},H===null?(z=H=F,C=X):H=H.next=F,_|=j;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;F=E,E=F.next,F.next=null,f.lastBaseUpdate=F,f.shared.pending=null}}while(!0);H===null&&(C=X),f.baseState=C,f.firstBaseUpdate=z,f.lastBaseUpdate=H,d===null&&(f.shared.lanes=0),Ur|=_,n.lanes=_,n.memoizedState=X}}function jy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function qy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)jy(a[n],i)}var to=N(null),Gc=N(0);function Fy(n,i){n=tr,st(Gc,n),st(to,i),tr=n|i.baseLanes}function Md(){st(Gc,tr),st(to,to.current)}function Pd(){tr=Gc.current,$(to),$(Gc)}var Sn=N(null),jn=null;function Mr(n){var i=n.alternate;st(_e,_e.current&1),st(Sn,n),jn===null&&(i===null||to.current!==null||i.memoizedState!==null)&&(jn=n)}function kd(n){st(_e,_e.current),st(Sn,n),jn===null&&(jn=n)}function Hy(n){n.tag===22?(st(_e,_e.current),st(Sn,n),jn===null&&(jn=n)):Pr()}function Pr(){st(_e,_e.current),st(Sn,Sn.current)}function bn(n){$(Sn),jn===n&&(jn=null),$(_e)}var _e=N(0);function Kc(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||qm(a)||Fm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ki=0,wt=null,te=null,we=null,Qc=!1,eo=!1,Ks=!1,Yc=0,Ll=0,no=null,Eb=0;function de(){throw Error(r(321))}function Ld(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!En(n[a],i[a]))return!1;return!0}function Ud(n,i,a,l,f,d){return Ki=d,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=n===null||n.memoizedState===null?R_:Wd,Ks=!1,d=a(l,f),Ks=!1,eo&&(d=Ky(i,a,l,f)),Gy(n),d}function Gy(n){G.H=Bl;var i=te!==null&&te.next!==null;if(Ki=0,we=te=wt=null,Qc=!1,Ll=0,no=null,i)throw Error(r(300));n===null||Re||(n=n.dependencies,n!==null&&Uc(n)&&(Re=!0))}function Ky(n,i,a,l){wt=n;var f=0;do{if(eo&&(no=null),Ll=0,eo=!1,25<=f)throw Error(r(301));if(f+=1,we=te=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=C_,d=i(a,l)}while(eo);return d}function Ab(){var n=G.H,i=n.useState()[0];return i=typeof i.then=="function"?Ul(i):i,n=n.useState()[0],(te!==null?te.memoizedState:null)!==n&&(wt.flags|=1024),i}function zd(){var n=Yc!==0;return Yc=0,n}function Bd(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function jd(n){if(Qc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qc=!1}Ki=0,we=te=wt=null,eo=!1,Ll=Yc=0,no=null}function on(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?wt.memoizedState=we=n:we=we.next=n,we}function ve(){if(te===null){var n=wt.alternate;n=n!==null?n.memoizedState:null}else n=te.next;var i=we===null?wt.memoizedState:we.next;if(i!==null)we=i,te=n;else{if(n===null)throw wt.alternate===null?Error(r(467)):Error(r(310));te=n,n={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},we===null?wt.memoizedState=we=n:we=we.next=n}return we}function Xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(n){var i=Ll;return Ll+=1,no===null&&(no=[]),n=ky(no,n,i),i=wt,(we===null?i.memoizedState:we.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?R_:Wd),n}function $c(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ul(n);if(n.$$typeof===at)return Qe(n)}throw Error(r(438,String(n)))}function qd(n){var i=null,a=wt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=wt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Xc(),wt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=O;return i.index++,a}function Qi(n,i){return typeof i=="function"?i(n):i}function Jc(n){var i=ve();return Fd(i,te,n)}function Fd(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{i=f.next;var E=_=null,C=null,z=i,H=!1;do{var X=z.lane&-536870913;if(X!==z.lane?(Ot&X)===X:(Ki&X)===X){var j=z.revertLane;if(j===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),X===$a&&(H=!0);else if((Ki&j)===j){z=z.next,j===$a&&(H=!0);continue}else X={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(E=C=X,_=d):C=C.next=X,wt.lanes|=j,Ur|=j;X=z.action,Ks&&a(d,X),d=z.hasEagerState?z.eagerState:a(d,X)}else j={lane:X,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(E=C=j,_=d):C=C.next=j,wt.lanes|=X,Ur|=X;z=z.next}while(z!==null&&z!==i);if(C===null?_=d:C.next=E,!En(d,n.memoizedState)&&(Re=!0,H&&(a=Ja,a!==null)))throw a;n.memoizedState=d,n.baseState=_,n.baseQueue=C,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Hd(n){var i=ve(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=n(d,_.action),_=_.next;while(_!==f);En(d,i.memoizedState)||(Re=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Qy(n,i,a){var l=wt,f=ve(),d=Lt;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!En((te||f).memoizedState,a);if(_&&(f.memoizedState=a,Re=!0),f=f.queue,Qd($y.bind(null,l,f,n),[n]),f.getSnapshot!==i||_||we!==null&&we.memoizedState.tag&1){if(l.flags|=2048,io(9,{destroy:void 0},Xy.bind(null,l,f,a,i),null),ie===null)throw Error(r(349));d||(Ki&127)!==0||Yy(l,i,a)}return a}function Yy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i=Xc(),wt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Xy(n,i,a,l){i.value=a,i.getSnapshot=l,Jy(i)&&Zy(n)}function $y(n,i,a){return a(function(){Jy(i)&&Zy(n)})}function Jy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!En(n,a)}catch{return!0}}function Zy(n){var i=Ls(n,2);i!==null&&yn(i,n,2)}function Gd(n){var i=on();if(typeof n=="function"){var a=n;if(n=a(),Ks){xn(!0);try{a()}finally{xn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:n},i}function Wy(n,i,a,l){return n.baseState=a,Fd(n,te,typeof l=="function"?l:Qi)}function Sb(n,i,a,l,f){if(th(n))throw Error(r(485));if(n=i.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};G.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,t_(i,d)):(d.next=a.next,i.pending=a.next=d)}}function t_(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var d=G.T,_={};G.T=_;try{var E=a(f,l),C=G.S;C!==null&&C(_,E),e_(n,i,E)}catch(z){Kd(n,i,z)}finally{d!==null&&_.types!==null&&(d.types=_.types),G.T=d}}else try{d=a(f,l),e_(n,i,d)}catch(z){Kd(n,i,z)}}function e_(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){n_(n,i,l)},function(l){return Kd(n,i,l)}):n_(n,i,a)}function n_(n,i,a){i.status="fulfilled",i.value=a,i_(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,t_(n,a)))}function Kd(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,i_(i),i=i.next;while(i!==l)}n.action=null}function i_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function r_(n,i){return i}function s_(n,i){if(Lt){var a=ie.formState;if(a!==null){t:{var l=wt;if(Lt){if(re){e:{for(var f=re,d=Bn;f.nodeType!==8;){if(!d){f=null;break e}if(f=qn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){re=qn(f.nextSibling),l=f.data==="F!";break t}}Dr(l)}l=!1}l&&(i=a[0])}}return a=on(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r_,lastRenderedState:i},a.queue=l,a=b_.bind(null,wt,l),l.dispatch=a,l=Gd(!1),d=Zd.bind(null,wt,!1,l.queue),l=on(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=Sb.bind(null,wt,f,d,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function a_(n){var i=ve();return o_(i,te,n)}function o_(n,i,a){if(i=Fd(n,i,r_)[0],n=Jc(Qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ul(i)}catch(_){throw _===Za?jc:_}else l=i;i=ve();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(wt.flags|=2048,io(9,{destroy:void 0},bb.bind(null,f,a),null)),[l,d,n]}function bb(n,i){n.action=i}function l_(n){var i=ve(),a=te;if(a!==null)return o_(i,a,n);ve(),i=i.memoizedState,a=ve();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function io(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=wt.updateQueue,i===null&&(i=Xc(),wt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function u_(){return ve().memoizedState}function Zc(n,i,a,l){var f=on();wt.flags|=n,f.memoizedState=io(1|i,{destroy:void 0},a,l===void 0?null:l)}function Wc(n,i,a,l){var f=ve();l=l===void 0?null:l;var d=f.memoizedState.inst;te!==null&&l!==null&&Ld(l,te.memoizedState.deps)?f.memoizedState=io(i,d,a,l):(wt.flags|=n,f.memoizedState=io(1|i,d,a,l))}function c_(n,i){Zc(8390656,8,n,i)}function Qd(n,i){Wc(2048,8,n,i)}function Ib(n){wt.flags|=4;var i=wt.updateQueue;if(i===null)i=Xc(),wt.updateQueue=i,i.events=[n];else{var a=i.events;a===null?i.events=[n]:a.push(n)}}function h_(n){var i=ve().memoizedState;return Ib({ref:i,nextImpl:n}),function(){if((Ht&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function f_(n,i){return Wc(4,2,n,i)}function d_(n,i){return Wc(4,4,n,i)}function m_(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function g_(n,i,a){a=a!=null?a.concat([n]):null,Wc(4,4,m_.bind(null,i,n),a)}function Yd(){}function p_(n,i){var a=ve();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Ld(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function y_(n,i){var a=ve();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Ld(i,l[1]))return l[0];if(l=n(),Ks){xn(!0);try{n()}finally{xn(!1)}}return a.memoizedState=[l,i],l}function Xd(n,i,a){return a===void 0||(Ki&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=i:(n.memoizedState=a,n=_v(),wt.lanes|=n,Ur|=n,a)}function __(n,i,a,l){return En(a,i)?a:to.current!==null?(n=Xd(n,a,l),En(n,i)||(Re=!0),n):(Ki&42)===0||(Ki&1073741824)!==0&&(Ot&261930)===0?(Re=!0,n.memoizedState=a):(n=_v(),wt.lanes|=n,Ur|=n,i)}function v_(n,i,a,l,f){var d=rt.p;rt.p=d!==0&&8>d?d:8;var _=G.T,E={};G.T=E,Zd(n,!1,i,a);try{var C=f(),z=G.S;if(z!==null&&z(E,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var H=Tb(C,l);zl(n,i,H,Rn(n))}else zl(n,i,l,Rn(n))}catch(X){zl(n,i,{then:function(){},status:"rejected",reason:X},Rn())}finally{rt.p=d,_!==null&&E.types!==null&&(_.types=E.types),G.T=_}}function wb(){}function $d(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=T_(n).queue;v_(n,f,i,pt,a===null?wb:function(){return E_(n),a(l)})}function T_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:pt,baseState:pt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:pt},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function E_(n){var i=T_(n);i.next===null&&(i=n.alternate.memoizedState),zl(n,i.next.queue,{},Rn())}function Jd(){return Qe(nu)}function A_(){return ve().memoizedState}function S_(){return ve().memoizedState}function Rb(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();n=Nr(a);var l=Or(i,n,a);l!==null&&(yn(l,i,a),Ml(l,i,a)),i={cache:wd()},n.payload=i;return}i=i.return}}function Cb(n,i,a){var l=Rn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},th(n)?I_(i,a):(a=gd(n,i,a,l),a!==null&&(yn(a,n,l),w_(a,i,l)))}function b_(n,i,a){var l=Rn();zl(n,i,a,l)}function zl(n,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(th(n))I_(i,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,E=d(_,a);if(f.hasEagerState=!0,f.eagerState=E,En(E,_))return Mc(n,i,f,0),ie===null&&Oc(),!1}catch{}if(a=gd(n,i,f,l),a!==null)return yn(a,n,l),w_(a,i,l),!0}return!1}function Zd(n,i,a,l){if(l={lane:2,revertLane:Vm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},th(n)){if(i)throw Error(r(479))}else i=gd(n,a,l,2),i!==null&&yn(i,n,2)}function th(n){var i=n.alternate;return n===wt||i!==null&&i===wt}function I_(n,i){eo=Qc=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function w_(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,ol(n,a)}}var Bl={readContext:Qe,use:$c,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de};Bl.useEffectEvent=de;var R_={readContext:Qe,use:$c,useCallback:function(n,i){return on().memoizedState=[n,i===void 0?null:i],n},useContext:Qe,useEffect:c_,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Zc(4194308,4,m_.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Zc(4194308,4,n,i)},useInsertionEffect:function(n,i){Zc(4,2,n,i)},useMemo:function(n,i){var a=on();i=i===void 0?null:i;var l=n();if(Ks){xn(!0);try{n()}finally{xn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=on();if(a!==void 0){var f=a(i);if(Ks){xn(!0);try{a(i)}finally{xn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=Cb.bind(null,wt,n),[l.memoizedState,n]},useRef:function(n){var i=on();return n={current:n},i.memoizedState=n},useState:function(n){n=Gd(n);var i=n.queue,a=b_.bind(null,wt,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Yd,useDeferredValue:function(n,i){var a=on();return Xd(a,n,i)},useTransition:function(){var n=Gd(!1);return n=v_.bind(null,wt,n.queue,!0,!1),on().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=wt,f=on();if(Lt){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ie===null)throw Error(r(349));(Ot&127)!==0||Yy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,c_($y.bind(null,l,d,n),[n]),l.flags|=2048,io(9,{destroy:void 0},Xy.bind(null,l,d,a,i),null),a},useId:function(){var n=on(),i=ie.identifierPrefix;if(Lt){var a=wi,l=Ii;a=(l&~(1<<32-pe(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Yc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Eb++,i="_"+i+"r_"+a.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Jd,useFormState:s_,useActionState:s_,useOptimistic:function(n){var i=on();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Zd.bind(null,wt,!0,a),a.dispatch=i,[n,i]},useMemoCache:qd,useCacheRefresh:function(){return on().memoizedState=Rb.bind(null,wt)},useEffectEvent:function(n){var i=on(),a={impl:n};return i.memoizedState=a,function(){if((Ht&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Wd={readContext:Qe,use:$c,useCallback:p_,useContext:Qe,useEffect:Qd,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:y_,useReducer:Jc,useRef:u_,useState:function(){return Jc(Qi)},useDebugValue:Yd,useDeferredValue:function(n,i){var a=ve();return __(a,te.memoizedState,n,i)},useTransition:function(){var n=Jc(Qi)[0],i=ve().memoizedState;return[typeof n=="boolean"?n:Ul(n),i]},useSyncExternalStore:Qy,useId:A_,useHostTransitionStatus:Jd,useFormState:a_,useActionState:a_,useOptimistic:function(n,i){var a=ve();return Wy(a,te,n,i)},useMemoCache:qd,useCacheRefresh:S_};Wd.useEffectEvent=h_;var C_={readContext:Qe,use:$c,useCallback:p_,useContext:Qe,useEffect:Qd,useImperativeHandle:g_,useInsertionEffect:f_,useLayoutEffect:d_,useMemo:y_,useReducer:Hd,useRef:u_,useState:function(){return Hd(Qi)},useDebugValue:Yd,useDeferredValue:function(n,i){var a=ve();return te===null?Xd(a,n,i):__(a,te.memoizedState,n,i)},useTransition:function(){var n=Hd(Qi)[0],i=ve().memoizedState;return[typeof n=="boolean"?n:Ul(n),i]},useSyncExternalStore:Qy,useId:A_,useHostTransitionStatus:Jd,useFormState:l_,useActionState:l_,useOptimistic:function(n,i){var a=ve();return te!==null?Wy(a,te,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:qd,useCacheRefresh:S_};C_.useEffectEvent=h_;function tm(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var em={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Rn(),f=Nr(l);f.payload=i,a!=null&&(f.callback=a),i=Or(n,f,l),i!==null&&(yn(i,n,l),Ml(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Rn(),f=Nr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Or(n,f,l),i!==null&&(yn(i,n,l),Ml(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Rn(),l=Nr(a);l.tag=2,i!=null&&(l.callback=i),i=Or(n,l,a),i!==null&&(yn(i,n,a),Ml(i,n,a))}};function D_(n,i,a,l,f,d,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!wl(a,l)||!wl(f,d):!0}function V_(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&em.enqueueReplaceState(i,i.state,null)}function Qs(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=A({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}function x_(n){Nc(n)}function N_(n){console.error(n)}function O_(n){Nc(n)}function eh(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function M_(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function nm(n,i,a){return a=Nr(a),a.tag=3,a.payload={element:null},a.callback=function(){eh(n,i)},a}function P_(n){return n=Nr(n),n.tag=3,n}function k_(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){M_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){M_(i,a,l),typeof f!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function Db(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Xa(i,a,f,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return jn===null?dh():a.alternate===null&&me===0&&(me=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===qc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Rm(n,l,f)),!1;case 22:return a.flags|=65536,l===qc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Rm(n,l,f)),!1}throw Error(r(435,a.tag))}return Rm(n,l,f),dh(),!1}if(Lt)return i=Sn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Ed&&(n=Error(r(422),{cause:l}),Dl(Ln(n,a)))):(l!==Ed&&(i=Error(r(423),{cause:l}),Dl(Ln(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Ln(l,a),f=nm(n.stateNode,l,f),Nd(n,f),me!==4&&(me=2)),!1;var d=Error(r(520),{cause:l});if(d=Ln(d,a),Yl===null?Yl=[d]:Yl.push(d),me!==4&&(me=2),i===null)return!0;l=Ln(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=nm(a.stateNode,l,n),Nd(a,n),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(zr===null||!zr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=P_(f),k_(f,n,a,l),Nd(a,f),!1}a=a.return}while(a!==null);return!1}var im=Error(r(461)),Re=!1;function Ye(n,i,a,l){i.child=n===null?By(i,null,a,l):Gs(i,n.child,a,l)}function L_(n,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return js(i),l=Ud(n,i,a,_,d,f),E=zd(),n!==null&&!Re?(Bd(n,i,f),Yi(n,i,f)):(Lt&&E&&vd(i),i.flags|=1,Ye(n,i,l,f),i.child)}function U_(n,i,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!pd(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,z_(n,i,d,l,f)):(n=kc(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(d=n.child,!hm(n,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(_,l)&&n.ref===i.ref)return Yi(n,i,f)}return i.flags|=1,n=qi(d,l),n.ref=i.ref,n.return=i,i.child=n}function z_(n,i,a,l,f){if(n!==null){var d=n.memoizedProps;if(wl(d,l)&&n.ref===i.ref)if(Re=!1,i.pendingProps=l=d,hm(n,f))(n.flags&131072)!==0&&(Re=!0);else return i.lanes=n.lanes,Yi(n,i,f)}return rm(n,i,a,l,f)}function B_(n,i,a,l){var f=l.children,d=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,n!==null){for(l=i.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return j_(n,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Bc(i,d!==null?d.cachePool:null),d!==null?Fy(i,d):Md(),Hy(i);else return l=i.lanes=536870912,j_(n,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Bc(i,d.cachePool),Fy(i,d),Pr(),i.memoizedState=null):(n!==null&&Bc(i,null),Md(),Pr());return Ye(n,i,f,a),i.child}function jl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function j_(n,i,a,l,f){var d=Cd();return d=d===null?null:{parent:Ie._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},n!==null&&Bc(i,null),Md(),Hy(i),n!==null&&Xa(n,i,l,!0),i.childLanes=f,null}function nh(n,i){return i=rh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function q_(n,i,a){return Gs(i,n.child,null,a),n=nh(i,i.pendingProps),n.flags|=2,bn(i),i.memoizedState=null,n}function Vb(n,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Lt){if(l.mode==="hidden")return n=nh(i,l),i.lanes=536870912,jl(null,n);if(kd(i),(n=re)?(n=tT(n,Bn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Rr!==null?{id:Ii,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Iy(n),a.return=i,i.child=a,Ke=i,re=null)):n=null,n===null)throw Dr(i);return i.lanes=536870912,null}return nh(i,l)}var d=n.memoizedState;if(d!==null){var _=d.dehydrated;if(kd(i),f)if(i.flags&256)i.flags&=-257,i=q_(n,i,a);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(Re||Xa(n,i,a,!1),f=(a&n.childLanes)!==0,Re||f){if(l=ie,l!==null&&(_=ll(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ls(n,_),yn(l,n,_),im;dh(),i=q_(n,i,a)}else n=d.treeContext,re=qn(_.nextSibling),Ke=i,Lt=!0,Cr=null,Bn=!1,n!==null&&Cy(i,n),i=nh(i,l),i.flags|=4096;return i}return n=qi(n.child,{mode:l.mode,children:l.children}),n.ref=i.ref,i.child=n,n.return=i,n}function ih(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function rm(n,i,a,l,f){return js(i),a=Ud(n,i,a,l,void 0,f),l=zd(),n!==null&&!Re?(Bd(n,i,f),Yi(n,i,f)):(Lt&&l&&vd(i),i.flags|=1,Ye(n,i,a,f),i.child)}function F_(n,i,a,l,f,d){return js(i),i.updateQueue=null,a=Ky(i,l,a,f),Gy(n),l=zd(),n!==null&&!Re?(Bd(n,i,d),Yi(n,i,d)):(Lt&&l&&vd(i),i.flags|=1,Ye(n,i,a,d),i.child)}function H_(n,i,a,l,f){if(js(i),i.stateNode===null){var d=Ga,_=a.contextType;typeof _=="object"&&_!==null&&(d=Qe(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=em,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Vd(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Qe(_):Ga,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(tm(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&em.enqueueReplaceState(d,d.state,null),kl(i,l,d,f),Pl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){d=i.stateNode;var E=i.memoizedProps,C=Qs(a,E);d.props=C;var z=d.context,H=a.contextType;_=Ga,typeof H=="object"&&H!==null&&(_=Qe(H));var X=a.getDerivedStateFromProps;H=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,H||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||z!==_)&&V_(i,d,l,_),xr=!1;var j=i.memoizedState;d.state=j,kl(i,l,d,f),Pl(),z=i.memoizedState,E||j!==z||xr?(typeof X=="function"&&(tm(i,a,X,l),z=i.memoizedState),(C=xr||D_(i,a,C,l,j,z,_))?(H||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=_,l=C):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,xd(n,i),_=i.memoizedProps,H=Qs(a,_),d.props=H,X=i.pendingProps,j=d.context,z=a.contextType,C=Ga,typeof z=="object"&&z!==null&&(C=Qe(z)),E=a.getDerivedStateFromProps,(z=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==X||j!==C)&&V_(i,d,l,C),xr=!1,j=i.memoizedState,d.state=j,kl(i,l,d,f),Pl();var F=i.memoizedState;_!==X||j!==F||xr||n!==null&&n.dependencies!==null&&Uc(n.dependencies)?(typeof E=="function"&&(tm(i,a,E,l),F=i.memoizedState),(H=xr||D_(i,a,H,l,j,F,C)||n!==null&&n.dependencies!==null&&Uc(n.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,C)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=C,l=H):(typeof d.componentDidUpdate!="function"||_===n.memoizedProps&&j===n.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&j===n.memoizedState||(i.flags|=1024),l=!1)}return d=l,ih(n,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,n!==null&&l?(i.child=Gs(i,n.child,null,f),i.child=Gs(i,null,a,f)):Ye(n,i,a,f),i.memoizedState=d.state,n=i.child):n=Yi(n,i,f),n}function G_(n,i,a,l){return zs(),i.flags|=256,Ye(n,i,a,l),i.child}var sm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function am(n){return{baseLanes:n,cachePool:My()}}function om(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=wn),n}function K_(n,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=n!==null&&n.memoizedState===null?!1:(_e.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(Lt){if(f?Mr(i):Pr(),(n=re)?(n=tT(n,Bn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Rr!==null?{id:Ii,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},a=Iy(n),a.return=i,i.child=a,Ke=i,re=null)):n=null,n===null)throw Dr(i);return Fm(n)?i.lanes=32:i.lanes=536870912,null}var E=l.children;return l=l.fallback,f?(Pr(),f=i.mode,E=rh({mode:"hidden",children:E},f),l=Us(l,f,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,l=i.child,l.memoizedState=am(a),l.childLanes=om(n,_,a),i.memoizedState=sm,jl(null,l)):(Mr(i),lm(i,E))}var C=n.memoizedState;if(C!==null&&(E=C.dehydrated,E!==null)){if(d)i.flags&256?(Mr(i),i.flags&=-257,i=um(n,i,a)):i.memoizedState!==null?(Pr(),i.child=n.child,i.flags|=128,i=null):(Pr(),E=l.fallback,f=i.mode,l=rh({mode:"visible",children:l.children},f),E=Us(E,f,a,null),E.flags|=2,l.return=i,E.return=i,l.sibling=E,i.child=l,Gs(i,n.child,null,a),l=i.child,l.memoizedState=am(a),l.childLanes=om(n,_,a),i.memoizedState=sm,i=jl(null,l));else if(Mr(i),Fm(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(r(419)),l.stack="",l.digest=_,Dl({value:l,source:null,stack:null}),i=um(n,i,a)}else if(Re||Xa(n,i,a,!1),_=(a&n.childLanes)!==0,Re||_){if(_=ie,_!==null&&(l=ll(_,a),l!==0&&l!==C.retryLane))throw C.retryLane=l,Ls(n,l),yn(_,n,l),im;qm(E)||dh(),i=um(n,i,a)}else qm(E)?(i.flags|=192,i.child=n.child,i=null):(n=C.treeContext,re=qn(E.nextSibling),Ke=i,Lt=!0,Cr=null,Bn=!1,n!==null&&Cy(i,n),i=lm(i,l.children),i.flags|=4096);return i}return f?(Pr(),E=l.fallback,f=i.mode,C=n.child,z=C.sibling,l=qi(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,z!==null?E=qi(z,E):(E=Us(E,f,a,null),E.flags|=2),E.return=i,l.return=i,l.sibling=E,i.child=l,jl(null,l),l=i.child,E=n.child.memoizedState,E===null?E=am(a):(f=E.cachePool,f!==null?(C=Ie._currentValue,f=f.parent!==C?{parent:C,pool:C}:f):f=My(),E={baseLanes:E.baseLanes|a,cachePool:f}),l.memoizedState=E,l.childLanes=om(n,_,a),i.memoizedState=sm,jl(n.child,l)):(Mr(i),a=n.child,n=a.sibling,a=qi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=a,i.memoizedState=null,a)}function lm(n,i){return i=rh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function rh(n,i){return n=An(22,n,null,i),n.lanes=0,n}function um(n,i,a){return Gs(i,n.child,null,a),n=lm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Q_(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),bd(n.return,i,a)}function cm(n,i,a,l,f,d){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function Y_(n,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=_e.current,E=(_&2)!==0;if(E?(_=_&1|2,i.flags|=128):_&=1,st(_e,_),Ye(n,i,l,a),l=Lt?Cl:0,!E&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Q_(n,a,i);else if(n.tag===19)Q_(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Kc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),cm(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Kc(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}cm(i,!0,a,null,d,l);break;case"together":cm(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function Yi(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Ur|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Xa(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=qi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=qi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function hm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Uc(n)))}function xb(n,i,a){switch(i.tag){case 3:Pe(i,i.stateNode.containerInfo),Vr(i,Ie,n.memoizedState.cache),zs();break;case 27:case 5:vs(i);break;case 4:Pe(i,i.stateNode.containerInfo);break;case 10:Vr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,kd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Mr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?K_(n,i,a):(Mr(i),n=Yi(n,i,a),n!==null?n.sibling:null);Mr(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Xa(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Y_(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),st(_e,_e.current),l)break;return null;case 22:return i.lanes=0,B_(n,i,a,i.pendingProps);case 24:Vr(i,Ie,n.memoizedState.cache)}return Yi(n,i,a)}function X_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Re=!0;else{if(!hm(n,a)&&(i.flags&128)===0)return Re=!1,xb(n,i,a);Re=(n.flags&131072)!==0}else Re=!1,Lt&&(i.flags&1048576)!==0&&Ry(i,Cl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(n=Fs(i.elementType),i.type=n,typeof n=="function")pd(n)?(l=Qs(n,l),i.tag=1,i=H_(null,i,n,l,a)):(i.tag=0,i=rm(null,i,n,l,a));else{if(n!=null){var f=n.$$typeof;if(f===Rt){i.tag=11,i=L_(null,i,n,l,a);break t}else if(f===w){i.tag=14,i=U_(null,i,n,l,a);break t}}throw i=ae(n)||n,Error(r(306,i,""))}}return i;case 0:return rm(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Qs(l,i.pendingProps),H_(n,i,l,f,a);case 3:t:{if(Pe(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,xd(n,i),kl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Vr(i,Ie,l),l!==d.cache&&Id(i,[Ie],a,!0),Pl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=G_(n,i,l,a);break t}else if(l!==f){f=Ln(Error(r(424)),i),Dl(f),i=G_(n,i,l,a);break t}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,re=qn(n.firstChild),Ke=i,Lt=!0,Cr=null,Bn=!0,a=By(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(zs(),l===f){i=Yi(n,i,a);break t}Ye(n,i,l,a)}i=i.child}return i;case 26:return ih(n,i),n===null?(a=aT(i.type,null,i.pendingProps,null))?i.memoizedState=a:Lt||(a=i.type,n=i.pendingProps,l=Th(Ct.current).createElement(a),l[Ae]=i,l[Be]=n,Xe(l,a,n),Se(l),i.stateNode=l):i.memoizedState=aT(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return vs(i),n===null&&Lt&&(l=i.stateNode=iT(i.type,i.pendingProps,Ct.current),Ke=i,Bn=!0,f=re,Fr(i.type)?(Hm=f,re=qn(l.firstChild)):re=f),Ye(n,i,i.pendingProps.children,a),ih(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Lt&&((f=l=re)&&(l=oI(l,i.type,i.pendingProps,Bn),l!==null?(i.stateNode=l,Ke=i,re=qn(l.firstChild),Bn=!1,f=!0):f=!1),f||Dr(i)),vs(i),f=i.type,d=i.pendingProps,_=n!==null?n.memoizedProps:null,l=d.children,zm(f,d)?l=null:_!==null&&zm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Ud(n,i,Ab,null,null,a),nu._currentValue=f),ih(n,i),Ye(n,i,l,a),i.child;case 6:return n===null&&Lt&&((n=a=re)&&(a=lI(a,i.pendingProps,Bn),a!==null?(i.stateNode=a,Ke=i,re=null,n=!0):n=!1),n||Dr(i)),null;case 13:return K_(n,i,a);case 4:return Pe(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Gs(i,null,l,a):Ye(n,i,l,a),i.child;case 11:return L_(n,i,i.type,i.pendingProps,a);case 7:return Ye(n,i,i.pendingProps,a),i.child;case 8:return Ye(n,i,i.pendingProps.children,a),i.child;case 12:return Ye(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Vr(i,i.type,l.value),Ye(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,js(i),f=Qe(f),l=l(f),i.flags|=1,Ye(n,i,l,a),i.child;case 14:return U_(n,i,i.type,i.pendingProps,a);case 15:return z_(n,i,i.type,i.pendingProps,a);case 19:return Y_(n,i,a);case 31:return Vb(n,i,a);case 22:return B_(n,i,a,i.pendingProps);case 24:return js(i),l=Qe(Ie),n===null?(f=Cd(),f===null&&(f=ie,d=wd(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},Vd(i),Vr(i,Ie,f)):((n.lanes&a)!==0&&(xd(n,i),kl(i,null,null,a),Pl()),f=n.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Vr(i,Ie,l)):(l=d.cache,Vr(i,Ie,l),l!==f.cache&&Id(i,[Ie],a,!0))),Ye(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Xi(n){n.flags|=4}function fm(n,i,a,l,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Av())n.flags|=8192;else throw Hs=qc,Dd}else n.flags&=-16777217}function $_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!hT(i))if(Av())n.flags|=8192;else throw Hs=qc,Dd}function sh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?hc():536870912,n.lanes|=i,oo|=i)}function ql(n,i){if(!Lt)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function se(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function Nb(n,i,a){var l=i.pendingProps;switch(Td(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(i),null;case 1:return se(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Gi(Ie),oe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ya(i)?Xi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ad())),se(i),null;case 26:var f=i.type,d=i.memoizedState;return n===null?(Xi(i),d!==null?(se(i),$_(i,d)):(se(i),fm(i,f,null,l,a))):d?d!==n.memoizedState?(Xi(i),se(i),$_(i,d)):(se(i),i.flags&=-16777217):(n=n.memoizedProps,n!==l&&Xi(i),se(i),fm(i,f,n,l,a)),null;case 27:if(wa(i),a=Ct.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Xi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return se(i),null}n=ot.current,Ya(i)?Dy(i):(n=iT(f,l,a),i.stateNode=n,Xi(i))}return se(i),null;case 5:if(wa(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&Xi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return se(i),null}if(d=ot.current,Ya(i))Dy(i);else{var _=Th(Ct.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ae]=i,d[Be]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(Xe(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&Xi(i)}}return se(i),fm(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,a),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&Xi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ct.current,Ya(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=Ke,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Ae]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Kv(n.nodeValue,a)),n||Dr(i,!0)}else n=Th(n).createTextNode(l),n[Ae]=i,i.stateNode=n}return se(i),null;case 31:if(a=i.memoizedState,n===null||n.memoizedState!==null){if(l=Ya(i),a!==null){if(n===null){if(!l)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ae]=i}else zs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;se(i),n=!1}else a=Ad(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return i.flags&256?(bn(i),i):(bn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return se(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ya(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ae]=i}else zs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;se(i),f=!1}else f=Ad(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(bn(i),i):(bn(i),null)}return bn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,n=n!==null&&n.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==n&&a&&(i.child.flags|=8192),sh(i,i.updateQueue),se(i),null);case 4:return oe(),n===null&&Mm(i.stateNode.containerInfo),se(i),null;case 10:return Gi(i.type),se(i),null;case 19:if($(_e),l=i.memoizedState,l===null)return se(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)ql(l,!1);else{if(me!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(d=Kc(n),d!==null){for(i.flags|=128,ql(l,!1),n=d.updateQueue,i.updateQueue=n,sh(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)by(a,n),a=a.sibling;return st(_e,_e.current&1|2),Lt&&Fi(i,l.treeForkCount),i.child}n=n.sibling}l.tail!==null&&sn()>ch&&(i.flags|=128,f=!0,ql(l,!1),i.lanes=4194304)}else{if(!f)if(n=Kc(d),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,sh(i,n),ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Lt)return se(i),null}else 2*sn()-l.renderingStartTime>ch&&a!==536870912&&(i.flags|=128,f=!0,ql(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(n=l.last,n!==null?n.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=sn(),n.sibling=null,a=_e.current,st(_e,f?a&1|2:a&1),Lt&&Fi(i,l.treeForkCount),n):(se(i),null);case 22:case 23:return bn(i),Pd(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(se(i),i.subtreeFlags&6&&(i.flags|=8192)):se(i),a=i.updateQueue,a!==null&&sh(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&$(qs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Gi(Ie),se(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Ob(n,i){switch(Td(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Gi(Ie),oe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return wa(i),null;case 31:if(i.memoizedState!==null){if(bn(i),i.alternate===null)throw Error(r(340));zs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(bn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));zs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return $(_e),null;case 4:return oe(),null;case 10:return Gi(i.type),null;case 22:case 23:return bn(i),Pd(),n!==null&&$(qs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Gi(Ie),null;case 25:return null;default:return null}}function J_(n,i){switch(Td(i),i.tag){case 3:Gi(Ie),oe();break;case 26:case 27:case 5:wa(i);break;case 4:oe();break;case 31:i.memoizedState!==null&&bn(i);break;case 13:bn(i);break;case 19:$(_e);break;case 10:Gi(i.type);break;case 22:case 23:bn(i),Pd(),n!==null&&$(qs);break;case 24:Gi(Ie)}}function Fl(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(E){Xt(i,i.return,E)}}function kr(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,f=i;var C=a,z=E;try{z()}catch(H){Xt(f,C,H)}}}l=l.next}while(l!==d)}}catch(H){Xt(i,i.return,H)}}function Z_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{qy(i,a)}catch(l){Xt(n,n.return,l)}}}function W_(n,i,a){a.props=Qs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){Xt(n,i,l)}}function Hl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){Xt(n,i,f)}}function Ri(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Xt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Xt(n,i,f)}else a.current=null}function tv(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Xt(n,n.return,f)}}function dm(n,i,a){try{var l=n.stateNode;eI(l,n.type,a,i),l[Be]=i}catch(f){Xt(n,n.return,f)}}function ev(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Fr(n.type)||n.tag===4}function mm(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||ev(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Fr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Jn));else if(l!==4&&(l===27&&Fr(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(gm(n,i,a),n=n.sibling;n!==null;)gm(n,i,a),n=n.sibling}function ah(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&Fr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ah(n,i,a),n=n.sibling;n!==null;)ah(n,i,a),n=n.sibling}function nv(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Xe(i,l,a),i[Ae]=n,i[Be]=a}catch(d){Xt(n,n.return,d)}}var $i=!1,Ce=!1,pm=!1,iv=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Mb(n,i){if(n=n.containerInfo,Lm=Rh,n=gy(n),ud(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else t:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,E=-1,C=-1,z=0,H=0,X=n,j=null;e:for(;;){for(var F;X!==a||f!==0&&X.nodeType!==3||(E=_+f),X!==d||l!==0&&X.nodeType!==3||(C=_+l),X.nodeType===3&&(_+=X.nodeValue.length),(F=X.firstChild)!==null;)j=X,X=F;for(;;){if(X===n)break e;if(j===a&&++z===f&&(E=_),j===d&&++H===l&&(C=_),(F=X.nextSibling)!==null)break;X=j,j=X.parentNode}X=F}a=E===-1||C===-1?null:{start:E,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Um={focusedElem:n,selectionRange:a},Rh=!1,qe=i;qe!==null;)if(i=qe,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,qe=n;else for(;qe!==null;){switch(i=qe,d=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)f=n[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var lt=Qs(a.type,f);n=l.getSnapshotBeforeUpdate(lt,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(yt){Xt(a,a.return,yt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)jm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":jm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,qe=n;break}qe=i.return}}function rv(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zi(n,a),l&4&&Fl(5,a);break;case 1:if(Zi(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(_){Xt(a,a.return,_)}else{var f=Qs(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Xt(a,a.return,_)}}l&64&&Z_(a),l&512&&Hl(a,a.return);break;case 3:if(Zi(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{qy(n,i)}catch(_){Xt(a,a.return,_)}}break;case 27:i===null&&l&4&&nv(a);case 26:case 5:Zi(n,a),i===null&&l&4&&tv(a),l&512&&Hl(a,a.return);break;case 12:Zi(n,a);break;case 31:Zi(n,a),l&4&&ov(n,a);break;case 13:Zi(n,a),l&4&&lv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Fb.bind(null,a),uI(n,a))));break;case 22:if(l=a.memoizedState!==null||$i,!l){i=i!==null&&i.memoizedState!==null||Ce,f=$i;var d=Ce;$i=l,(Ce=i)&&!d?Wi(n,a,(a.subtreeFlags&8772)!==0):Zi(n,a),$i=f,Ce=d}break;case 30:break;default:Zi(n,a)}}function sv(n){var i=n.alternate;i!==null&&(n.alternate=null,sv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&xa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ue=null,dn=!1;function Ji(n,i,a){for(a=a.child;a!==null;)av(n,i,a),a=a.sibling}function av(n,i,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(Qn,a)}catch{}switch(a.tag){case 26:Ce||Ri(a,i),Ji(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ce||Ri(a,i);var l=ue,f=dn;Fr(a.type)&&(ue=a.stateNode,dn=!1),Ji(n,i,a),Wl(a.stateNode),ue=l,dn=f;break;case 5:Ce||Ri(a,i);case 6:if(l=ue,f=dn,ue=null,Ji(n,i,a),ue=l,dn=f,ue!==null)if(dn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(a.stateNode)}catch(d){Xt(a,i,d)}else try{ue.removeChild(a.stateNode)}catch(d){Xt(a,i,d)}break;case 18:ue!==null&&(dn?(n=ue,Zv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),po(n)):Zv(ue,a.stateNode));break;case 4:l=ue,f=dn,ue=a.stateNode.containerInfo,dn=!0,Ji(n,i,a),ue=l,dn=f;break;case 0:case 11:case 14:case 15:kr(2,a,i),Ce||kr(4,a,i),Ji(n,i,a);break;case 1:Ce||(Ri(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&W_(a,i,l)),Ji(n,i,a);break;case 21:Ji(n,i,a);break;case 22:Ce=(l=Ce)||a.memoizedState!==null,Ji(n,i,a),Ce=l;break;default:Ji(n,i,a)}}function ov(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{po(n)}catch(a){Xt(i,i.return,a)}}}function lv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{po(n)}catch(a){Xt(i,i.return,a)}}function Pb(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new iv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new iv),i;default:throw Error(r(435,n.tag))}}function oh(n,i){var a=Pb(n);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=Hb.bind(null,n,l);l.then(f,f)}})}function mn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,_=i,E=_;t:for(;E!==null;){switch(E.tag){case 27:if(Fr(E.type)){ue=E.stateNode,dn=!1;break t}break;case 5:ue=E.stateNode,dn=!1;break t;case 3:case 4:ue=E.stateNode.containerInfo,dn=!0;break t}E=E.return}if(ue===null)throw Error(r(160));av(d,_,f),ue=null,dn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)uv(i,n),i=i.sibling}var ii=null;function uv(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:mn(i,n),gn(n),l&4&&(kr(3,n,n.return),Fl(3,n),kr(5,n,n.return));break;case 1:mn(i,n),gn(n),l&512&&(Ce||a===null||Ri(a,a.return)),l&64&&$i&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ii;if(mn(i,n),gn(n),l&512&&(Ce||a===null||Ri(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){t:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[di]||d[Ae]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Xe(d,l,a),d[Ae]=n,Se(d),l=d;break t;case"link":var _=uT("link","href",f).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(d=_[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break e}}d=f.createElement(l),Xe(d,l,a),f.head.appendChild(d);break;case"meta":if(_=uT("meta","content",f).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(d=_[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break e}}d=f.createElement(l),Xe(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ae]=n,Se(d),l=d}n.stateNode=l}else cT(f,n.type,n.stateNode);else n.stateNode=lT(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?cT(f,n.type,n.stateNode):lT(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&dm(n,n.memoizedProps,a.memoizedProps)}break;case 27:mn(i,n),gn(n),l&512&&(Ce||a===null||Ri(a,a.return)),a!==null&&l&4&&dm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(mn(i,n),gn(n),l&512&&(Ce||a===null||Ri(a,a.return)),n.flags&32){f=n.stateNode;try{fn(f,"")}catch(lt){Xt(n,n.return,lt)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,dm(n,f,a!==null?a.memoizedProps:f)),l&1024&&(pm=!0);break;case 6:if(mn(i,n),gn(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(lt){Xt(n,n.return,lt)}}break;case 3:if(Sh=null,f=ii,ii=Eh(i.containerInfo),mn(i,n),ii=f,gn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{po(i.containerInfo)}catch(lt){Xt(n,n.return,lt)}pm&&(pm=!1,cv(n));break;case 4:l=ii,ii=Eh(n.stateNode.containerInfo),mn(i,n),gn(n),ii=l;break;case 12:mn(i,n),gn(n);break;case 31:mn(i,n),gn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,oh(n,l)));break;case 13:mn(i,n),gn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(uh=sn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,oh(n,l)));break;case 22:f=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,z=$i,H=Ce;if($i=z||f,Ce=H||C,mn(i,n),Ce=H,$i=z,gn(n),l&8192)t:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||C||$i||Ce||Ys(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(d=C.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=C.stateNode;var X=C.memoizedProps.style,j=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(lt){Xt(C,C.return,lt)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(lt){Xt(C,C.return,lt)}}}else if(i.tag===18){if(a===null){C=i;try{var F=C.stateNode;f?Wv(F,!0):Wv(C.stateNode,!1)}catch(lt){Xt(C,C.return,lt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,oh(n,a))));break;case 19:mn(i,n),gn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,oh(n,l)));break;case 30:break;case 21:break;default:mn(i,n),gn(n)}}function gn(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(ev(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=mm(n);ah(n,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(fn(_,""),a.flags&=-33);var E=mm(n);ah(n,E,_);break;case 3:case 4:var C=a.stateNode.containerInfo,z=mm(n);gm(n,z,C);break;default:throw Error(r(161))}}catch(H){Xt(n,n.return,H)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function cv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;cv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Zi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)rv(n,i.alternate,i),i=i.sibling}function Ys(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:kr(4,i,i.return),Ys(i);break;case 1:Ri(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&W_(i,i.return,a),Ys(i);break;case 27:Wl(i.stateNode);case 26:case 5:Ri(i,i.return),Ys(i);break;case 22:i.memoizedState===null&&Ys(i);break;case 30:Ys(i);break;default:Ys(i)}n=n.sibling}}function Wi(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:Wi(f,d,a),Fl(4,d);break;case 1:if(Wi(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(z){Xt(l,l.return,z)}if(l=d,f=l.updateQueue,f!==null){var E=l.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)jy(C[f],E)}catch(z){Xt(l,l.return,z)}}a&&_&64&&Z_(d),Hl(d,d.return);break;case 27:nv(d);case 26:case 5:Wi(f,d,a),a&&l===null&&_&4&&tv(d),Hl(d,d.return);break;case 12:Wi(f,d,a);break;case 31:Wi(f,d,a),a&&_&4&&ov(f,d);break;case 13:Wi(f,d,a),a&&_&4&&lv(f,d);break;case 22:d.memoizedState===null&&Wi(f,d,a),Hl(d,d.return);break;case 30:break;default:Wi(f,d,a)}i=i.sibling}}function ym(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Vl(a))}function _m(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Vl(n))}function ri(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hv(n,i,a,l),i=i.sibling}function hv(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ri(n,i,a,l),f&2048&&Fl(9,i);break;case 1:ri(n,i,a,l);break;case 3:ri(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Vl(n)));break;case 12:if(f&2048){ri(n,i,a,l),n=i.stateNode;try{var d=i.memoizedProps,_=d.id,E=d.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){Xt(i,i.return,C)}}else ri(n,i,a,l);break;case 31:ri(n,i,a,l);break;case 13:ri(n,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ri(n,i,a,l):Gl(n,i):d._visibility&2?ri(n,i,a,l):(d._visibility|=2,ro(n,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&ym(_,i);break;case 24:ri(n,i,a,l),f&2048&&_m(i.alternate,i);break;default:ri(n,i,a,l)}}function ro(n,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=n,_=i,E=a,C=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:ro(d,_,E,C,f),Fl(8,_);break;case 23:break;case 22:var H=_.stateNode;_.memoizedState!==null?H._visibility&2?ro(d,_,E,C,f):Gl(d,_):(H._visibility|=2,ro(d,_,E,C,f)),f&&z&2048&&ym(_.alternate,_);break;case 24:ro(d,_,E,C,f),f&&z&2048&&_m(_.alternate,_);break;default:ro(d,_,E,C,f)}i=i.sibling}}function Gl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:Gl(a,l),f&2048&&ym(l.alternate,l);break;case 24:Gl(a,l),f&2048&&_m(l.alternate,l);break;default:Gl(a,l)}i=i.sibling}}var Kl=8192;function so(n,i,a){if(n.subtreeFlags&Kl)for(n=n.child;n!==null;)fv(n,i,a),n=n.sibling}function fv(n,i,a){switch(n.tag){case 26:so(n,i,a),n.flags&Kl&&n.memoizedState!==null&&EI(a,ii,n.memoizedState,n.memoizedProps);break;case 5:so(n,i,a);break;case 3:case 4:var l=ii;ii=Eh(n.stateNode.containerInfo),so(n,i,a),ii=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Kl,Kl=16777216,so(n,i,a),Kl=l):so(n,i,a));break;default:so(n,i,a)}}function dv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ql(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qe=l,gv(l,n)}dv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)mv(n),n=n.sibling}function mv(n){switch(n.tag){case 0:case 11:case 15:Ql(n),n.flags&2048&&kr(9,n,n.return);break;case 3:Ql(n);break;case 12:Ql(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,lh(n)):Ql(n);break;default:Ql(n)}}function lh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];qe=l,gv(l,n)}dv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:kr(8,i,i.return),lh(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,lh(i));break;default:lh(i)}n=n.sibling}}function gv(n,i){for(;qe!==null;){var a=qe;switch(a.tag){case 0:case 11:case 15:kr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,qe=l;else t:for(a=n;qe!==null;){l=qe;var f=l.sibling,d=l.return;if(sv(l),l===a){qe=null;break t}if(f!==null){f.return=d,qe=f;break t}qe=d}}}var kb={getCacheForType:function(n){var i=Qe(Ie),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a},cacheSignal:function(){return Qe(Ie).controller.signal}},Lb=typeof WeakMap=="function"?WeakMap:Map,Ht=0,ie=null,xt=null,Ot=0,Yt=0,In=null,Lr=!1,ao=!1,vm=!1,tr=0,me=0,Ur=0,Xs=0,Tm=0,wn=0,oo=0,Yl=null,pn=null,Em=!1,uh=0,pv=0,ch=1/0,hh=null,zr=null,Le=0,Br=null,lo=null,er=0,Am=0,Sm=null,yv=null,Xl=0,bm=null;function Rn(){return(Ht&2)!==0&&Ot!==0?Ot&-Ot:G.T!==null?Vm():fc()}function _v(){if(wn===0)if((Ot&536870912)===0||Lt){var n=As;As<<=1,(As&3932160)===0&&(As=262144),wn=n}else wn=536870912;return n=Sn.current,n!==null&&(n.flags|=32),wn}function yn(n,i,a){(n===ie&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)&&(uo(n,0),jr(n,Ot,wn,!1)),Ss(n,a),((Ht&2)===0||n!==ie)&&(n===ie&&((Ht&2)===0&&(Xs|=a),me===4&&jr(n,Ot,wn,!1)),Ci(n))}function vv(n,i,a){if((Ht&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&n.expiredLanes)===0||Yn(n,i),f=l?Bb(n,i):wm(n,i,!0),d=l;do{if(f===0){ao&&!l&&jr(n,i,0,!1);break}else{if(a=n.current.alternate,d&&!Ub(a)){f=wm(n,i,!1),d=!1;continue}if(f===2){if(d=i,n.errorRecoveryDisabledLanes&d)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var E=n;f=Yl;var C=E.current.memoizedState.isDehydrated;if(C&&(uo(E,_).flags|=256),_=wm(E,_,!1),_!==2){if(vm&&!C){E.errorRecoveryDisabledLanes|=d,Xs|=d,f=4;break t}d=pn,pn=f,d!==null&&(pn===null?pn=d:pn.push.apply(pn,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){uo(n,0),jr(n,i,0,!0);break}t:{switch(l=n,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:jr(l,i,wn,!Lr);break t;case 2:pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=uh+300-sn(),10<f)){if(jr(l,i,wn,!Lr),ci(l,0,!0)!==0)break t;er=i,l.timeoutHandle=$v(Tv.bind(null,l,a,pn,hh,Em,i,wn,Xs,oo,Lr,d,"Throttled",-0,0),f);break t}Tv(l,a,pn,hh,Em,i,wn,Xs,oo,Lr,d,null,-0,0)}}break}while(!0);Ci(n)}function Tv(n,i,a,l,f,d,_,E,C,z,H,X,j,F){if(n.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jn},fv(i,d,X);var lt=(d&62914560)===d?uh-sn():(d&4194048)===d?pv-sn():0;if(lt=AI(X,lt),lt!==null){er=d,n.cancelPendingCommit=lt(Cv.bind(null,n,i,d,a,l,f,_,E,C,H,X,null,j,F)),jr(n,d,_,!z);return}}Cv(n,i,d,a,l,f,_,E,C)}function Ub(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!En(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function jr(n,i,a,l){i&=~Tm,i&=~Xs,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var d=31-pe(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&bs(n,a,i)}function fh(){return(Ht&6)===0?($l(0),!1):!0}function Im(){if(xt!==null){if(Yt===0)var n=xt.return;else n=xt,Hi=Bs=null,jd(n),Wa=null,Nl=0,n=xt;for(;n!==null;)J_(n.alternate,n),n=n.return;xt=null}}function uo(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,rI(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),er=0,Im(),ie=n,xt=a=qi(n.current,null),Ot=i,Yt=0,In=null,Lr=!1,ao=Yn(n,i),vm=!1,oo=wn=Tm=Xs=Ur=me=0,pn=Yl=null,Em=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-pe(l),d=1<<f;i|=n[f],l&=~d}return tr=i,Oc(),a}function Ev(n,i){wt=null,G.H=Bl,i===Za||i===jc?(i=Ly(),Yt=3):i===Dd?(i=Ly(),Yt=4):Yt=i===im?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,In=i,xt===null&&(me=1,eh(n,Ln(i,n.current)))}function Av(){var n=Sn.current;return n===null?!0:(Ot&4194048)===Ot?jn===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===jn:!1}function Sv(){var n=G.H;return G.H=Bl,n===null?Bl:n}function bv(){var n=G.A;return G.A=kb,n}function dh(){me=4,Lr||(Ot&4194048)!==Ot&&Sn.current!==null||(ao=!0),(Ur&134217727)===0&&(Xs&134217727)===0||ie===null||jr(ie,Ot,wn,!1)}function wm(n,i,a){var l=Ht;Ht|=2;var f=Sv(),d=bv();(ie!==n||Ot!==i)&&(hh=null,uo(n,i)),i=!1;var _=me;t:do try{if(Yt!==0&&xt!==null){var E=xt,C=In;switch(Yt){case 8:Im(),_=6;break t;case 3:case 2:case 9:case 6:Sn.current===null&&(i=!0);var z=Yt;if(Yt=0,In=null,co(n,E,C,z),a&&ao){_=0;break t}break;default:z=Yt,Yt=0,In=null,co(n,E,C,z)}}zb(),_=me;break}catch(H){Ev(n,H)}while(!0);return i&&n.shellSuspendCounter++,Hi=Bs=null,Ht=l,G.H=f,G.A=d,xt===null&&(ie=null,Ot=0,Oc()),_}function zb(){for(;xt!==null;)Iv(xt)}function Bb(n,i){var a=Ht;Ht|=2;var l=Sv(),f=bv();ie!==n||Ot!==i?(hh=null,ch=sn()+500,uo(n,i)):ao=Yn(n,i);t:do try{if(Yt!==0&&xt!==null){i=xt;var d=In;e:switch(Yt){case 1:Yt=0,In=null,co(n,i,d,1);break;case 2:case 9:if(Py(d)){Yt=0,In=null,wv(i);break}i=function(){Yt!==2&&Yt!==9||ie!==n||(Yt=7),Ci(n)},d.then(i,i);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Py(d)?(Yt=0,In=null,wv(i)):(Yt=0,In=null,co(n,i,d,7));break;case 5:var _=null;switch(xt.tag){case 26:_=xt.memoizedState;case 5:case 27:var E=xt;if(_?hT(_):E.stateNode.complete){Yt=0,In=null;var C=E.sibling;if(C!==null)xt=C;else{var z=E.return;z!==null?(xt=z,mh(z)):xt=null}break e}}Yt=0,In=null,co(n,i,d,5);break;case 6:Yt=0,In=null,co(n,i,d,6);break;case 8:Im(),me=6;break t;default:throw Error(r(462))}}jb();break}catch(H){Ev(n,H)}while(!0);return Hi=Bs=null,G.H=l,G.A=f,Ht=a,xt!==null?0:(ie=null,Ot=0,Oc(),me)}function jb(){for(;xt!==null&&!nd();)Iv(xt)}function Iv(n){var i=X_(n.alternate,n,tr);n.memoizedProps=n.pendingProps,i===null?mh(n):xt=i}function wv(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=F_(a,i,i.pendingProps,i.type,void 0,Ot);break;case 11:i=F_(a,i,i.pendingProps,i.type.render,i.ref,Ot);break;case 5:jd(i);default:J_(a,i),i=xt=by(i,tr),i=X_(a,i,tr)}n.memoizedProps=n.pendingProps,i===null?mh(n):xt=i}function co(n,i,a,l){Hi=Bs=null,jd(i),Wa=null,Nl=0;var f=i.return;try{if(Db(n,f,i,a,Ot)){me=1,eh(n,Ln(a,n.current)),xt=null;return}}catch(d){if(f!==null)throw xt=f,d;me=1,eh(n,Ln(a,n.current)),xt=null;return}i.flags&32768?(Lt||l===1?n=!0:ao||(Ot&536870912)!==0?n=!1:(Lr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Rv(i,n)):mh(i)}function mh(n){var i=n;do{if((i.flags&32768)!==0){Rv(i,Lr);return}n=i.return;var a=Nb(i.alternate,i,tr);if(a!==null){xt=a;return}if(i=i.sibling,i!==null){xt=i;return}xt=i=n}while(i!==null);me===0&&(me=5)}function Rv(n,i){do{var a=Ob(n.alternate,n);if(a!==null){a.flags&=32767,xt=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){xt=n;return}xt=n=a}while(n!==null);me=6,xt=null}function Cv(n,i,a,l,f,d,_,E,C){n.cancelPendingCommit=null;do gh();while(Le!==0);if((Ht&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=md,sd(n,a,d,_,E,C),n===ie&&(xt=ie=null,Ot=0),lo=i,Br=n,er=a,Am=d,Sm=f,yv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Gb(yr,function(){return Ov(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,f=rt.p,rt.p=2,_=Ht,Ht|=4;try{Mb(n,i,a)}finally{Ht=_,rt.p=f,G.T=l}}Le=1,Dv(),Vv(),xv()}}function Dv(){if(Le===1){Le=0;var n=Br,i=lo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=rt.p;rt.p=2;var f=Ht;Ht|=4;try{uv(i,n);var d=Um,_=gy(n.containerInfo),E=d.focusedElem,C=d.selectionRange;if(_!==E&&E&&E.ownerDocument&&my(E.ownerDocument.documentElement,E)){if(C!==null&&ud(E)){var z=C.start,H=C.end;if(H===void 0&&(H=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(H,E.value.length);else{var X=E.ownerDocument||document,j=X&&X.defaultView||window;if(j.getSelection){var F=j.getSelection(),lt=E.textContent.length,yt=Math.min(C.start,lt),ne=C.end===void 0?yt:Math.min(C.end,lt);!F.extend&&yt>ne&&(_=ne,ne=yt,yt=_);var M=dy(E,yt),V=dy(E,ne);if(M&&V&&(F.rangeCount!==1||F.anchorNode!==M.node||F.anchorOffset!==M.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var U=X.createRange();U.setStart(M.node,M.offset),F.removeAllRanges(),yt>ne?(F.addRange(U),F.extend(V.node,V.offset)):(U.setEnd(V.node,V.offset),F.addRange(U))}}}}for(X=[],F=E;F=F.parentNode;)F.nodeType===1&&X.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Q=X[E];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Rh=!!Lm,Um=Lm=null}finally{Ht=f,rt.p=l,G.T=a}}n.current=i,Le=2}}function Vv(){if(Le===2){Le=0;var n=Br,i=lo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=rt.p;rt.p=2;var f=Ht;Ht|=4;try{rv(n,i.alternate,i)}finally{Ht=f,rt.p=l,G.T=a}}Le=3}}function xv(){if(Le===4||Le===3){Le=0,sc();var n=Br,i=lo,a=er,l=yv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Le=5:(Le=0,lo=Br=null,Nv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(zr=null),Ui(a),i=i.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(Qn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,f=rt.p,rt.p=2,G.T=null;try{for(var d=n.onRecoverableError,_=0;_<l.length;_++){var E=l[_];d(E.value,{componentStack:E.stack})}}finally{G.T=i,rt.p=f}}(er&3)!==0&&gh(),Ci(n),f=n.pendingLanes,(a&261930)!==0&&(f&42)!==0?n===bm?Xl++:(Xl=0,bm=n):Xl=0,$l(0)}}function Nv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Vl(i)))}function gh(){return Dv(),Vv(),xv(),Ov()}function Ov(){if(Le!==5)return!1;var n=Br,i=Am;Am=0;var a=Ui(er),l=G.T,f=rt.p;try{rt.p=32>a?32:a,G.T=null,a=Sm,Sm=null;var d=Br,_=er;if(Le=0,lo=Br=null,er=0,(Ht&6)!==0)throw Error(r(331));var E=Ht;if(Ht|=4,mv(d.current),hv(d,d.current,_,a),Ht=E,$l(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(Qn,d)}catch{}return!0}finally{rt.p=f,G.T=l,Nv(n,i)}}function Mv(n,i,a){i=Ln(a,i),i=nm(n.stateNode,i,2),n=Or(n,i,2),n!==null&&(Ss(n,2),Ci(n))}function Xt(n,i,a){if(n.tag===3)Mv(n,n,a);else for(;i!==null;){if(i.tag===3){Mv(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(zr===null||!zr.has(l))){n=Ln(a,n),a=P_(2),l=Or(i,a,2),l!==null&&(k_(a,l,i,n),Ss(l,2),Ci(l));break}}i=i.return}}function Rm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Lb;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(vm=!0,f.add(a),n=qb.bind(null,n,i,a),i.then(n,n))}function qb(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ie===n&&(Ot&a)===a&&(me===4||me===3&&(Ot&62914560)===Ot&&300>sn()-uh?(Ht&2)===0&&uo(n,0):Tm|=a,oo===Ot&&(oo=0)),Ci(n)}function Pv(n,i){i===0&&(i=hc()),n=Ls(n,i),n!==null&&(Ss(n,i),Ci(n))}function Fb(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Pv(n,a)}function Hb(n,i){var a=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Pv(n,a)}function Gb(n,i){return ke(n,i)}var ph=null,ho=null,Cm=!1,yh=!1,Dm=!1,qr=0;function Ci(n){n!==ho&&n.next===null&&(ho===null?ph=ho=n:ho=ho.next=n),yh=!0,Cm||(Cm=!0,Qb())}function $l(n,i){if(!Dm&&yh){Dm=!0;do for(var a=!1,l=ph;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-pe(42|n)+1)-1,d&=f&~(_&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,zv(l,d))}else d=Ot,d=ci(l,l===ie?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Yn(l,d)||(a=!0,zv(l,d));l=l.next}while(a);Dm=!1}}function Kb(){kv()}function kv(){yh=Cm=!1;var n=0;qr!==0&&iI()&&(n=qr);for(var i=sn(),a=null,l=ph;l!==null;){var f=l.next,d=Lv(l,i);d===0?(l.next=null,a===null?ph=f:a.next=f,f===null&&(ho=a)):(a=l,(n!==0||(d&3)!==0)&&(yh=!0)),l=f}Le!==0&&Le!==5||$l(n),qr!==0&&(qr=0)}function Lv(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var _=31-pe(d),E=1<<_,C=f[_];C===-1?((E&a)===0||(E&l)!==0)&&(f[_]=rd(E,i)):C<=i&&(n.expiredLanes|=E),d&=~E}if(i=ie,a=Ot,a=ci(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(Yt===2||Yt===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&pr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Yn(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&pr(l),Ui(a)){case 2:case 8:a=al;break;case 32:a=yr;break;case 268435456:a=ac;break;default:a=yr}return l=Uv.bind(null,n),a=ke(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&pr(l),n.callbackPriority=2,n.callbackNode=null,2}function Uv(n,i){if(Le!==0&&Le!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(gh()&&n.callbackNode!==a)return null;var l=Ot;return l=ci(n,n===ie?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(vv(n,l,i),Lv(n,sn()),n.callbackNode!=null&&n.callbackNode===a?Uv.bind(null,n):null)}function zv(n,i){if(gh())return null;vv(n,i,!0)}function Qb(){sI(function(){(Ht&6)!==0?ke(sl,Kb):kv()})}function Vm(){if(qr===0){var n=$a;n===0&&(n=li,li<<=1,(li&261888)===0&&(li=256)),qr=n}return qr}function Bv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Pa(""+n)}function jv(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Yb(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=Bv((f[Be]||null).action),_=l.submitter;_&&(i=(i=_[Be]||null)?Bv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var E=new Ei("action","action",null,l,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qr!==0){var C=_?jv(f,_):new FormData(f);$d(a,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(E.preventDefault(),C=_?jv(f,_):new FormData(f),$d(a,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var xm=0;xm<dd.length;xm++){var Nm=dd[xm],Xb=Nm.toLowerCase(),$b=Nm[0].toUpperCase()+Nm.slice(1);ni(Xb,"on"+$b)}ni(_y,"onAnimationEnd"),ni(vy,"onAnimationIteration"),ni(Ty,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(fb,"onTransitionRun"),ni(db,"onTransitionStart"),ni(mb,"onTransitionCancel"),ni(Ey,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function qv(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var E=l[_],C=E.instance,z=E.currentTarget;if(E=E.listener,C!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=z;try{d(f)}catch(H){Nc(H)}f.currentTarget=null,d=C}else for(_=0;_<l.length;_++){if(E=l[_],C=E.instance,z=E.currentTarget,E=E.listener,C!==d&&f.isPropagationStopped())break t;d=E,f.currentTarget=z;try{d(f)}catch(H){Nc(H)}f.currentTarget=null,d=C}}}}function Nt(n,i){var a=i[Va];a===void 0&&(a=i[Va]=new Set);var l=n+"__bubble";a.has(l)||(Fv(i,n,2,!1),a.add(l))}function Om(n,i,a){var l=0;i&&(l|=4),Fv(a,n,l,i)}var _h="_reactListening"+Math.random().toString(36).slice(2);function Mm(n){if(!n[_h]){n[_h]=!0,ul.forEach(function(a){a!=="selectionchange"&&(Jb.has(a)||Om(a,!1,n),Om(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_h]||(i[_h]=!0,Om("selectionchange",!1,i))}}function Fv(n,i,a,l){switch(_T(i)){case 2:var f=II;break;case 8:f=wI;break;default:f=Xm}a=f.bind(null,i,a,n),f=void 0,!Ds||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Pm(n,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===f)break;if(_===4)for(_=l.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;E!==null;){if(_=mi(E),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){l=d=_;continue t}E=E.parentNode}}l=l.return}Sr(function(){var z=d,H=On(a),X=[];t:{var j=Ay.get(n);if(j!==void 0){var F=Ei,lt=n;switch(n){case"keypress":if(xs(a)===0)break t;case"keydown":case"keyup":F=Dc;break;case"focusin":lt="focus",F=Os;break;case"focusout":lt="blur",F=Os;break;case"beforeblur":case"afterblur":F=Os;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=p;break;case _y:case vy:case Ty:F=Ac;break;case Ey:F=S;break;case"scroll":case"scrollend":F=El;break;case"wheel":F=q;break;case"copy":case"cut":case"paste":F=Sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=ji;break;case"toggle":case"beforetoggle":F=It}var yt=(i&4)!==0,ne=!yt&&(n==="scroll"||n==="scrollend"),M=yt?j!==null?j+"Capture":null:j;yt=[];for(var V=z,U;V!==null;){var Q=V;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||M===null||(Q=Zn(V,M),Q!=null&&yt.push(Zl(V,Q,U))),ne)break;V=V.return}0<yt.length&&(j=new F(j,lt,null,a,H),X.push({event:j,listeners:yt}))}}if((i&7)===0){t:{if(j=n==="mouseover"||n==="pointerover",F=n==="mouseout"||n==="pointerout",j&&a!==_l&&(lt=a.relatedTarget||a.fromElement)&&(mi(lt)||lt[fi]))break t;if((F||j)&&(j=H.window===H?H:(j=H.ownerDocument)?j.defaultView||j.parentWindow:window,F?(lt=a.relatedTarget||a.toElement,F=z,lt=lt?mi(lt):null,lt!==null&&(ne=u(lt),yt=lt.tag,lt!==ne||yt!==5&&yt!==27&&yt!==6)&&(lt=null)):(F=null,lt=z),F!==lt)){if(yt=Al,Q="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(yt=ji,Q="onPointerLeave",M="onPointerEnter",V="pointer"),ne=F==null?j:vn(F),U=lt==null?j:vn(lt),j=new yt(Q,V+"leave",F,a,H),j.target=ne,j.relatedTarget=U,Q=null,mi(H)===z&&(yt=new yt(M,V+"enter",lt,a,H),yt.target=U,yt.relatedTarget=ne,Q=yt),ne=Q,F&&lt)e:{for(yt=Zb,M=F,V=lt,U=0,Q=M;Q;Q=yt(Q))U++;Q=0;for(var mt=V;mt;mt=yt(mt))Q++;for(;0<U-Q;)M=yt(M),U--;for(;0<Q-U;)V=yt(V),Q--;for(;U--;){if(M===V||V!==null&&M===V.alternate){yt=M;break e}M=yt(M),V=yt(V)}yt=null}else yt=null;F!==null&&Hv(X,j,F,yt,!1),lt!==null&&ne!==null&&Hv(X,ne,lt,yt,!0)}}t:{if(j=z?vn(z):window,F=j.nodeName&&j.nodeName.toLowerCase(),F==="select"||F==="input"&&j.type==="file")var jt=oy;else if(sy(j))if(ly)jt=ub;else{jt=ob;var ct=ab}else F=j.nodeName,!F||F.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?z&&Ma(z.elementType)&&(jt=oy):jt=lb;if(jt&&(jt=jt(n,z))){ay(X,jt,a,H);break t}ct&&ct(n,j,z),n==="focusout"&&z&&j.type==="number"&&z.memoizedProps.value!=null&&gl(j,"number",j.value)}switch(ct=z?vn(z):window,n){case"focusin":(sy(ct)||ct.contentEditable==="true")&&(qa=ct,cd=z,Rl=null);break;case"focusout":Rl=cd=qa=null;break;case"mousedown":hd=!0;break;case"contextmenu":case"mouseup":case"dragend":hd=!1,py(X,a,H);break;case"selectionchange":if(hb)break;case"keydown":case"keyup":py(X,a,H)}var Dt;if(Ft)t:{switch(n){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else ja?Ms(n,a)&&(Mt="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(bi&&a.locale!=="ko"&&(ja||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&ja&&(Dt=Tl()):(Ti=H,vl="value"in Ti?Ti.value:Ti.textContent,ja=!0)),ct=vh(z,Mt),0<ct.length&&(Mt=new Si(Mt,n,null,a,H),X.push({event:Mt,listeners:ct}),Dt?Mt.data=Dt:(Dt=Ba(a),Dt!==null&&(Mt.data=Dt)))),(Dt=Pn?nb(n,a):ib(n,a))&&(Mt=vh(z,"onBeforeInput"),0<Mt.length&&(ct=new Si("onBeforeInput","beforeinput",null,a,H),X.push({event:ct,listeners:Mt}),ct.data=Dt)),Yb(X,n,z,a,H)}qv(X,i)})}function Zl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function vh(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Zn(n,a),f!=null&&l.unshift(Zl(n,f,d)),f=Zn(n,i),f!=null&&l.push(Zl(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Zb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Hv(n,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var E=a,C=E.alternate,z=E.stateNode;if(E=E.tag,C!==null&&C===l)break;E!==5&&E!==26&&E!==27||z===null||(C=z,f?(z=Zn(a,d),z!=null&&_.unshift(Zl(a,z,C))):f||(z=Zn(a,d),z!=null&&_.push(Zl(a,z,C)))),a=a.return}_.length!==0&&n.push({event:i,listeners:_})}var Wb=/\r\n?/g,tI=/\u0000|\uFFFD/g;function Gv(n){return(typeof n=="string"?n:""+n).replace(Wb,`
`).replace(tI,"")}function Kv(n,i){return i=Gv(i),Gv(n)===i}function ee(n,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||fn(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&fn(n,""+l);break;case"className":Tn(n,"class",l);break;case"tabIndex":Tn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(n,a,l);break;case"style":yl(n,l,d);break;case"data":if(i!=="object"){Tn(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Pa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&ee(n,i,"name",f.name,f,null),ee(n,i,"formEncType",f.formEncType,f,null),ee(n,i,"formMethod",f.formMethod,f,null),ee(n,i,"formTarget",f.formTarget,f,null)):(ee(n,i,"encType",f.encType,f,null),ee(n,i,"method",f.method,f,null),ee(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Pa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Jn);break;case"onScroll":l!=null&&Nt("scroll",n);break;case"onScrollEnd":l!=null&&Nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Pa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Nt("beforetoggle",n),Nt("toggle",n),Na(n,"popover",l);break;case"xlinkActuate":be(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":be(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":be(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":be(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":be(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":be(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":be(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":be(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":be(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Na(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=vc.get(a)||a,Na(n,a,l))}}function km(n,i,a,l,f,d){switch(a){case"style":yl(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?fn(n,l):(typeof l=="number"||typeof l=="bigint")&&fn(n,""+l);break;case"onScroll":l!=null&&Nt("scroll",n);break;case"onScrollEnd":l!=null&&Nt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cl.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=n[Be]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break t}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Na(n,a,l)}}}function Xe(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",n),Nt("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,d,_,a,null)}}f&&ee(n,i,"srcSet",a.srcSet,a,null),l&&ee(n,i,"src",a.src,a,null);return;case"input":Nt("invalid",n);var E=d=_=f=null,C=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var H=a[l];if(H!=null)switch(l){case"name":f=H;break;case"type":_=H;break;case"checked":C=H;break;case"defaultChecked":z=H;break;case"value":d=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:ee(n,i,l,H,a,null)}}pc(n,d,E,C,z,_,f,!1);return;case"select":Nt("invalid",n),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(E=a[f],E!=null))switch(f){case"value":d=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:ee(n,i,f,E,a,null)}i=d,a=_,n.multiple=!!l,i!=null?vr(n,!!l,i,!1):a!=null&&vr(n,!!l,a,!0);return;case"textarea":Nt("invalid",n),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":f=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:ee(n,i,_,E,a,null)}Tr(n,l,f,d);return;case"option":for(C in a)a.hasOwnProperty(C)&&(l=a[C],l!=null)&&(C==="selected"?n.selected=l&&typeof l!="function"&&typeof l!="symbol":ee(n,i,C,l,a,null));return;case"dialog":Nt("beforetoggle",n),Nt("toggle",n),Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":Nt("load",n);break;case"video":case"audio":for(l=0;l<Jl.length;l++)Nt(Jl[l],n);break;case"image":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"embed":case"source":case"link":Nt("error",n),Nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ee(n,i,z,l,a,null)}return;default:if(Ma(i)){for(H in a)a.hasOwnProperty(H)&&(l=a[H],l!==void 0&&km(n,i,H,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&ee(n,i,E,l,a,null))}function eI(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,E=null,C=null,z=null,H=null;for(F in a){var X=a[F];if(a.hasOwnProperty(F)&&X!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":C=X;default:l.hasOwnProperty(F)||ee(n,i,F,null,l,X)}}for(var j in l){var F=l[j];if(X=a[j],l.hasOwnProperty(j)&&(F!=null||X!=null))switch(j){case"type":d=F;break;case"name":f=F;break;case"checked":z=F;break;case"defaultChecked":H=F;break;case"value":_=F;break;case"defaultValue":E=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==X&&ee(n,i,j,F,l,X)}}Oa(n,_,E,C,z,H,d,f);return;case"select":F=_=E=j=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":F=C;default:l.hasOwnProperty(d)||ee(n,i,d,null,l,C)}for(f in l)if(d=l[f],C=a[f],l.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":j=d;break;case"defaultValue":E=d;break;case"multiple":_=d;default:d!==C&&ee(n,i,f,d,l,C)}i=E,a=_,l=F,j!=null?vr(n,!!a,j,!1):!!l!=!!a&&(i!=null?vr(n,!!a,i,!0):vr(n,!!a,a?[]:"",!1));return;case"textarea":F=j=null;for(E in a)if(f=a[E],a.hasOwnProperty(E)&&f!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ee(n,i,E,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":j=f;break;case"defaultValue":F=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&ee(n,i,_,f,l,d)}yc(n,j,F);return;case"option":for(var lt in a)j=a[lt],a.hasOwnProperty(lt)&&j!=null&&!l.hasOwnProperty(lt)&&(lt==="selected"?n.selected=!1:ee(n,i,lt,null,l,j));for(C in l)j=l[C],F=a[C],l.hasOwnProperty(C)&&j!==F&&(j!=null||F!=null)&&(C==="selected"?n.selected=j&&typeof j!="function"&&typeof j!="symbol":ee(n,i,C,j,l,F));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)j=a[yt],a.hasOwnProperty(yt)&&j!=null&&!l.hasOwnProperty(yt)&&ee(n,i,yt,null,l,j);for(z in l)if(j=l[z],F=a[z],l.hasOwnProperty(z)&&j!==F&&(j!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:ee(n,i,z,j,l,F)}return;default:if(Ma(i)){for(var ne in a)j=a[ne],a.hasOwnProperty(ne)&&j!==void 0&&!l.hasOwnProperty(ne)&&km(n,i,ne,void 0,l,j);for(H in l)j=l[H],F=a[H],!l.hasOwnProperty(H)||j===F||j===void 0&&F===void 0||km(n,i,H,j,l,F);return}}for(var M in a)j=a[M],a.hasOwnProperty(M)&&j!=null&&!l.hasOwnProperty(M)&&ee(n,i,M,null,l,j);for(X in l)j=l[X],F=a[X],!l.hasOwnProperty(X)||j===F||j==null&&F==null||ee(n,i,X,j,l,F)}function Qv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,E=f.duration;if(d&&E&&Qv(_)){for(_=0,E=f.responseEnd,l+=1;l<a.length;l++){var C=a[l],z=C.startTime;if(z>E)break;var H=C.transferSize,X=C.initiatorType;H&&Qv(X)&&(C=C.responseEnd,_+=H*(C<E?1:(E-z)/(C-z)))}if(--l,i+=8*(d+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Lm=null,Um=null;function Th(n){return n.nodeType===9?n:n.ownerDocument}function Yv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function zm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bm=null;function iI(){var n=window.event;return n&&n.type==="popstate"?n===Bm?!1:(Bm=n,!0):(Bm=null,!1)}var $v=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(n){return Jv.resolve(null).then(n).catch(aI)}:$v;function aI(n){setTimeout(function(){throw n})}function Fr(n){return n==="head"}function Zv(n,i){var a=i,l=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){n.removeChild(f),po(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Wl(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Wl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,E=d.nodeName;d[di]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&Wl(n.ownerDocument.body);a=f}while(a);po(i)}function Wv(n,i){var a=n;n=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=l}while(a)}function jm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":jm(a),xa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function oI(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[di])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=qn(n.nextSibling),n===null)break}return null}function lI(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=qn(n.nextSibling),n===null))return null;return n}function tT(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=qn(n.nextSibling),n===null))return null;return n}function qm(n){return n.data==="$?"||n.data==="$~"}function Fm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function uI(n,i){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function qn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Hm=null;function eT(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(i===0)return qn(n.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}n=n.nextSibling}return null}function nT(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return n;i--}else a!=="/$"&&a!=="/&"||i++}n=n.previousSibling}return null}function iT(n,i,a){switch(i=Th(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Wl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);xa(n)}var Fn=new Map,rT=new Set;function Eh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var nr=rt.d;rt.d={f:cI,r:hI,D:fI,C:dI,L:mI,m:gI,X:yI,S:pI,M:_I};function cI(){var n=nr.f(),i=fh();return n||i}function hI(n){var i=Nn(n);i!==null&&i.tag===5&&i.type==="form"?E_(i):nr.r(n)}var fo=typeof document>"u"?null:document;function sT(n,i,a){var l=fo;if(l&&typeof i=="string"&&i){var f=hn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),rT.has(f)||(rT.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Xe(i,"link",n),Se(i),l.head.appendChild(i)))}}function fI(n){nr.D(n),sT("dns-prefetch",n,null)}function dI(n,i){nr.C(n,i),sT("preconnect",n,i)}function mI(n,i,a){nr.L(n,i,a);var l=fo;if(l&&n&&i){var f='link[rel="preload"][as="'+hn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+hn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+hn(a.imageSizes)+'"]')):f+='[href="'+hn(n)+'"]';var d=f;switch(i){case"style":d=mo(n);break;case"script":d=go(n)}Fn.has(d)||(n=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Fn.set(d,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(tu(d))||i==="script"&&l.querySelector(eu(d))||(i=l.createElement("link"),Xe(i,"link",n),Se(i),l.head.appendChild(i)))}}function gI(n,i){nr.m(n,i);var a=fo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+hn(l)+'"][href="'+hn(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=go(n)}if(!Fn.has(d)&&(n=A({rel:"modulepreload",href:n},i),Fn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(eu(d)))return}l=a.createElement("link"),Xe(l,"link",n),Se(l),a.head.appendChild(l)}}}function pI(n,i,a){nr.S(n,i,a);var l=fo;if(l&&n){var f=gi(l).hoistableStyles,d=mo(n);i=i||"default";var _=f.get(d);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(tu(d)))E.loading=5;else{n=A({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Fn.get(d))&&Gm(n,a);var C=_=l.createElement("link");Se(C),Xe(C,"link",n),C._p=new Promise(function(z,H){C.onload=z,C.onerror=H}),C.addEventListener("load",function(){E.loading|=1}),C.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Ah(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:E},f.set(d,_)}}}function yI(n,i){nr.X(n,i);var a=fo;if(a&&n){var l=gi(a).hoistableScripts,f=go(n),d=l.get(f);d||(d=a.querySelector(eu(f)),d||(n=A({src:n,async:!0},i),(i=Fn.get(f))&&Km(n,i),d=a.createElement("script"),Se(d),Xe(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function _I(n,i){nr.M(n,i);var a=fo;if(a&&n){var l=gi(a).hoistableScripts,f=go(n),d=l.get(f);d||(d=a.querySelector(eu(f)),d||(n=A({src:n,async:!0,type:"module"},i),(i=Fn.get(f))&&Km(n,i),d=a.createElement("script"),Se(d),Xe(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function aT(n,i,a,l){var f=(f=Ct.current)?Eh(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=mo(a.href),a=gi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=mo(a.href);var d=gi(f).hoistableStyles,_=d.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,_),(d=f.querySelector(tu(n)))&&!d._p&&(_.instance=d,_.state.loading=5),Fn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(n,a),d||vI(f,n,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=go(a),a=gi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function mo(n){return'href="'+hn(n)+'"'}function tu(n){return'link[rel="stylesheet"]['+n+"]"}function oT(n){return A({},n,{"data-precedence":n.precedence,precedence:null})}function vI(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Xe(i,"link",a),Se(i),n.head.appendChild(i))}function go(n){return'[src="'+hn(n)+'"]'}function eu(n){return"script[async]"+n}function lT(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+hn(a.href)+'"]');if(l)return i.instance=l,Se(l),l;var f=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Se(l),Xe(l,"style",f),Ah(l,a.precedence,n),i.instance=l;case"stylesheet":f=mo(a.href);var d=n.querySelector(tu(f));if(d)return i.state.loading|=4,i.instance=d,Se(d),d;l=oT(a),(f=Fn.get(f))&&Gm(l,f),d=(n.ownerDocument||n).createElement("link"),Se(d);var _=d;return _._p=new Promise(function(E,C){_.onload=E,_.onerror=C}),Xe(d,"link",l),i.state.loading|=4,Ah(d,a.precedence,n),i.instance=d;case"script":return d=go(a.src),(f=n.querySelector(eu(d)))?(i.instance=f,Se(f),f):(l=a,(f=Fn.get(d))&&(l=A({},a),Km(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Se(f),Xe(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Ah(l,a.precedence,n));return i.instance}function Ah(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===i)d=E;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Gm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Km(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Sh=null;function uT(n,i,a){if(Sh===null){var l=new Map,f=Sh=new Map;f.set(a,l)}else f=Sh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[di]||d[Ae]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=n+_;var E=l.get(_);E?E.push(d):l.set(_,[d])}}return l}function cT(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function TI(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function hT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function EI(n,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=mo(l.href),d=i.querySelector(tu(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=bh.bind(n),i.then(n,n)),a.state.loading|=4,a.instance=d,Se(d);return}d=i.ownerDocument||i,l=oT(l),(f=Fn.get(f))&&Gm(l,f),d=d.createElement("link"),Se(d);var _=d;_._p=new Promise(function(E,C){_.onload=E,_.onerror=C}),Xe(d,"link",l),a.instance=d}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=bh.bind(n),i.addEventListener("load",a),i.addEventListener("error",a))}}var Qm=0;function AI(n,i){return n.stylesheets&&n.count===0&&wh(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var l=setTimeout(function(){if(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend){var d=n.unsuspend;n.unsuspend=null,d()}},6e4+i);0<n.imgBytes&&Qm===0&&(Qm=62500*nI());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend)){var d=n.unsuspend;n.unsuspend=null,d()}},(n.imgBytes>Qm?50:800)+i);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function bh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ih=null;function wh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ih=new Map,i.forEach(SI,n),Ih=null,bh.call(n))}function SI(n,i){if(!(i.state.loading&4)){var a=Ih.get(n);if(a)var l=a.get(null);else{a=new Map,Ih.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=bh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var nu={$$typeof:at,Provider:null,Consumer:null,_currentValue:pt,_currentValue2:pt,_threadCount:0};function bI(n,i,a,l,f,d,_,E,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function fT(n,i,a,l,f,d,_,E,C,z,H,X){return n=new bI(n,i,a,_,C,z,H,X,E),i=1,d===!0&&(i|=24),d=An(3,null,null,i),n.current=d,d.stateNode=n,i=wd(),i.refCount++,n.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Vd(d),n}function dT(n){return n?(n=Ga,n):Ga}function mT(n,i,a,l,f,d){f=dT(f),l.context===null?l.context=f:l.pendingContext=f,l=Nr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Or(n,l,i),a!==null&&(yn(a,n,i),Ml(a,n,i))}function gT(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ym(n,i){gT(n,i),(n=n.alternate)&&gT(n,i)}function pT(n){if(n.tag===13||n.tag===31){var i=Ls(n,67108864);i!==null&&yn(i,n,67108864),Ym(n,67108864)}}function yT(n){if(n.tag===13||n.tag===31){var i=Rn();i=Is(i);var a=Ls(n,i);a!==null&&yn(a,n,i),Ym(n,i)}}var Rh=!0;function II(n,i,a,l){var f=G.T;G.T=null;var d=rt.p;try{rt.p=2,Xm(n,i,a,l)}finally{rt.p=d,G.T=f}}function wI(n,i,a,l){var f=G.T;G.T=null;var d=rt.p;try{rt.p=8,Xm(n,i,a,l)}finally{rt.p=d,G.T=f}}function Xm(n,i,a,l){if(Rh){var f=$m(l);if(f===null)Pm(n,i,l,Ch,a),vT(n,l);else if(CI(f,n,i,a,l))l.stopPropagation();else if(vT(n,l),i&4&&-1<RI.indexOf(n)){for(;f!==null;){var d=Nn(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=ui(d.pendingLanes);if(_!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var C=1<<31-pe(_);E.entanglements[1]|=C,_&=~C}Ci(d),(Ht&6)===0&&(ch=sn()+500,$l(0))}}break;case 31:case 13:E=Ls(d,2),E!==null&&yn(E,d,2),fh(),Ym(d,2)}if(d=$m(l),d===null&&Pm(n,i,l,Ch,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Pm(n,i,l,null,a)}}function $m(n){return n=On(n),Jm(n)}var Ch=null;function Jm(n){if(Ch=null,n=mi(n),n!==null){var i=u(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=c(i),n!==null)return n;n=null}else if(a===31){if(n=m(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ch=n,null}function _T(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Es()){case sl:return 2;case al:return 8;case yr:case id:return 32;case ac:return 268435456;default:return 32}default:return 32}}var Zm=!1,Hr=null,Gr=null,Kr=null,iu=new Map,ru=new Map,Qr=[],RI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vT(n,i){switch(n){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":iu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(i.pointerId)}}function su(n,i,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Nn(i),i!==null&&pT(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function CI(n,i,a,l,f){switch(i){case"focusin":return Hr=su(Hr,n,i,a,l,f),!0;case"dragenter":return Gr=su(Gr,n,i,a,l,f),!0;case"mouseover":return Kr=su(Kr,n,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return iu.set(d,su(iu.get(d)||null,n,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,ru.set(d,su(ru.get(d)||null,n,i,a,l,f)),!0}return!1}function TT(n){var i=mi(n.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){n.blockedOn=i,Xn(n.priority,function(){yT(a)});return}}else if(i===31){if(i=m(a),i!==null){n.blockedOn=i,Xn(n.priority,function(){yT(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Dh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=$m(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);_l=l,a.target.dispatchEvent(l),_l=null}else return i=Nn(a),i!==null&&pT(i),n.blockedOn=a,!1;i.shift()}return!0}function ET(n,i,a){Dh(n)&&a.delete(i)}function DI(){Zm=!1,Hr!==null&&Dh(Hr)&&(Hr=null),Gr!==null&&Dh(Gr)&&(Gr=null),Kr!==null&&Dh(Kr)&&(Kr=null),iu.forEach(ET),ru.forEach(ET)}function Vh(n,i){n.blockedOn===i&&(n.blockedOn=null,Zm||(Zm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,DI)))}var xh=null;function AT(n){xh!==n&&(xh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){xh===n&&(xh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Jm(l||a)===null)continue;break}var d=Nn(a);d!==null&&(n.splice(i,3),i-=3,$d(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function po(n){function i(C){return Vh(C,n)}Hr!==null&&Vh(Hr,n),Gr!==null&&Vh(Gr,n),Kr!==null&&Vh(Kr,n),iu.forEach(i),ru.forEach(i);for(var a=0;a<Qr.length;a++){var l=Qr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Qr.length&&(a=Qr[0],a.blockedOn===null);)TT(a),a.blockedOn===null&&Qr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[Be]||null;if(typeof d=="function")_||AT(a);else if(_){var E=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[Be]||null)E=_.formAction;else if(Jm(f)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),AT(a)}}}function ST(){function n(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Wm(n){this._internalRoot=n}Nh.prototype.render=Wm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Rn();mT(a,l,n,i,null,null)},Nh.prototype.unmount=Wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;mT(n.current,2,null,n,null,null),fh(),i[fi]=null}};function Nh(n){this._internalRoot=n}Nh.prototype.unstable_scheduleHydration=function(n){if(n){var i=fc();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Qr.length&&i!==0&&i<Qr[a].priority;a++);Qr.splice(a,0,n),a===0&&TT(n)}};var bT=t.version;if(bT!=="19.2.3")throw Error(r(527,bT,"19.2.3"));rt.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=y(i),n=n!==null?T(n):null,n=n===null?null:n.stateNode,n};var VI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Qn=Oh.inject(VI),He=Oh}catch{}}return ou.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=x_,d=N_,_=O_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=fT(n,1,!1,null,null,a,l,null,f,d,_,ST),n[fi]=i.current,Mm(n),new Wm(i)},ou.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",d=x_,_=N_,E=O_,C=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(C=a.formState)),i=fT(n,1,!0,i,a??null,l,f,C,d,_,E,ST),i.context=dT(null),a=i.current,l=Rn(),l=Is(l),f=Nr(l),f.callback=null,Or(a,f,l),a=l,i.current.lanes=a,Ss(i,a),Ci(i),n[fi]=i.current,Mm(n),new Nh(i)},ou.version="19.2.3",ou}var MT;function BI(){if(MT)return ng.exports;MT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ng.exports=zI(),ng.exports}var jI=BI();const qI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,r)=>r?r.toUpperCase():e.toLowerCase()),PT=s=>{const t=FI(s);return t.charAt(0).toUpperCase()+t.slice(1)},z0=(...s)=>s.filter((t,e,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===e).join(" ").trim(),HI=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var GI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const KI=Ve.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:c,...m},g)=>Ve.createElement("svg",{ref:g,...GI,width:t,height:t,stroke:s,strokeWidth:r?Number(e)*24/Number(t):e,className:z0("lucide",o),...!u&&!HI(m)&&{"aria-hidden":"true"},...m},[...c.map(([y,T])=>Ve.createElement(y,T)),...Array.isArray(u)?u:[u]]));const fr=(s,t)=>{const e=Ve.forwardRef(({className:r,...o},u)=>Ve.createElement(KI,{ref:u,iconNode:t,className:z0(`lucide-${qI(PT(s))}`,`lucide-${s}`,r),...o}));return e.displayName=PT(s),e};const QI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],YI=fr("circle",QI);const XI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$I=fr("log-out",XI);const JI=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ZI=fr("moon",JI);const WI=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],kT=fr("package",WI);const tw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],B0=fr("plus",tw);const ew=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LT=fr("settings",ew);const nw=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],UT=fr("square-check-big",nw);const iw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],rw=fr("sun",iw);const sw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],j0=fr("trash-2",sw),aw=({children:s,currentView:t="inventory",onNavigate:e})=>J.jsxs("div",{className:"layout-container",style:{display:"flex",minHeight:"100vh"},children:[J.jsxs("aside",{className:"glass-panel sidebar desktop-only",style:{width:"280px",margin:"20px",height:"calc(100vh - 40px)",position:"sticky",top:"20px",display:"flex",flexDirection:"column",padding:"24px"},children:[J.jsxs("div",{style:{marginBottom:"40px",display:"flex",alignItems:"center",gap:"12px"},children:[J.jsx("div",{style:{width:"40px",height:"40px",background:"hsl(var(--color-primary))",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:"HI"}),J.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"800"},children:"Bit Khzin"})]}),J.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:"8px",flex:1},children:[J.jsx($s,{icon:J.jsx(kT,{size:20}),label:"Inventory",active:t==="inventory",onClick:()=>e?.("inventory")}),J.jsx($s,{icon:J.jsx(UT,{size:20}),label:"To-Do",active:t==="todo",onClick:()=>e?.("todo")}),J.jsx($s,{icon:J.jsx(LT,{size:20}),label:"Settings",active:t==="settings",onClick:()=>e?.("settings")})]}),J.jsx("div",{style:{paddingTop:"20px",borderTop:"1px solid var(--glass-border)"},children:J.jsx($s,{icon:J.jsx($I,{size:20}),label:"Sign Out"})})]}),J.jsx("main",{style:{flex:1,padding:"20px",maxWidth:"100%",paddingBottom:"90px"},children:s}),J.jsxs("nav",{className:"mobile-nav glass-panel mobile-only",style:{position:"fixed",bottom:"0",left:"0",right:"0",padding:"12px 20px",display:"flex",justifyContent:"space-around",zIndex:50,background:"var(--glass-bg)",backdropFilter:"blur(20px)",borderTop:"1px solid var(--glass-border)",borderRadius:"20px 20px 0 0",boxShadow:"0 -4px 20px rgba(0,0,0,0.1)"},children:[J.jsx($s,{icon:J.jsx(kT,{size:24}),label:"Inventory",active:t==="inventory",onClick:()=>e?.("inventory"),vertical:!0}),J.jsx($s,{icon:J.jsx(UT,{size:24}),label:"To-Do",active:t==="todo",onClick:()=>e?.("todo"),vertical:!0}),J.jsx($s,{icon:J.jsx(LT,{size:24}),label:"Settings",active:t==="settings",onClick:()=>e?.("settings"),vertical:!0})]}),J.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-only { display: none !important; }
        }
        @media (min-width: 769px) {
          .mobile-only { display: none !important; }
        }
      `})]}),$s=({icon:s,label:t,active:e=!1,onClick:r,vertical:o=!1})=>J.jsxs("button",{onClick:r,style:{display:"flex",flexDirection:o?"column":"row",alignItems:"center",gap:o?"4px":"12px",padding:"12px 16px",width:o?"auto":"100%",borderRadius:"var(--radius-sm)",border:"none",background:!o&&e?"rgba(59, 130, 246, 0.1)":"transparent",color:e?"hsl(var(--color-primary))":"inherit",cursor:"pointer",fontWeight:600,transition:"all 0.2s",textAlign:o?"center":"left",fontSize:o?"0.75rem":"1rem",opacity:!e&&o?.6:1},children:[s,t&&J.jsx("span",{children:t})]}),ep=({children:s,className:t="",hoverEffect:e=!1,style:r,...o})=>J.jsx("div",{className:`glass-panel ${t}`,style:{padding:"24px",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:e?"pointer":"default",...e?{":hover":{transform:"translateY(-4px)"}}:{},...r},...o,children:s}),Cu=({children:s,variant:t="primary",size:e="md",isLoading:r,className:o="",disabled:u,...c})=>{const m=()=>{switch(t){case"primary":return"btn-primary";case"secondary":return"btn-secondary";case"danger":return"btn-primary";case"ghost":return"btn-ghost";default:return"btn-primary"}},g=()=>{switch(e){case"sm":return{padding:"8px 16px",fontSize:"0.875rem"};case"lg":return{padding:"16px 32px",fontSize:"1.25rem"};default:return{}}},y=m();return J.jsxs("button",{className:`${y} ${o}`,disabled:r||u,style:{...g(),opacity:r||u?.7:1,cursor:r||u?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},...c,children:[r&&J.jsx("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:J.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"30 60"})}),s]})},ow=({items:s,onAddItem:t,onDeleteItem:e})=>J.jsxs("div",{className:"animate-fade-in",children:[J.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[J.jsx("h2",{className:"text-title",style:{margin:0},children:"My Items"}),J.jsx("div",{style:{display:"flex",gap:"12px"},children:J.jsxs(Cu,{onClick:t,children:[J.jsx(B0,{size:18})," ",J.jsx("span",{className:"desktop-only",children:"Add Item"})]})})]}),s.length===0?J.jsx("div",{style:{textAlign:"center",padding:"48px",opacity:.6},children:J.jsx("p",{children:"No items found. Add your first item!"})}):J.jsx("div",{className:"grid-auto-fit",children:s.map((r,o)=>J.jsx(ep,{hoverEffect:!0,style:{animationDelay:`${o*50}ms`},className:"animate-fade-in",children:J.jsxs("div",{style:{display:"flex",gap:"16px"},children:[J.jsx("div",{style:{width:"80px",height:"80px",borderRadius:"12px",background:"linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem"},children:lw(r.category)}),J.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[J.jsxs("div",{children:[J.jsx("h3",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:r.name}),J.jsxs("p",{className:"text-muted",style:{fontSize:"0.875rem"},children:[r.category,"  ",r.location]})]}),J.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[J.jsx("span",{style:{fontWeight:"600",color:"hsl(var(--color-primary))"},children:r.value?`$${r.value}`:"-"}),J.jsx("div",{style:{display:"flex",gap:"8px"},children:J.jsx("button",{onClick:u=>{u.stopPropagation(),e(r.id)},style:{padding:"8px",borderRadius:"8px",border:"none",background:"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer"},children:J.jsx(j0,{size:16})})})]})]})]})},r.id))})]}),lw=s=>{switch(s){case"Electronics":return"";case"Furniture":return"";case"Clothing":return"";case"Kitchen":return"";case"Tools":return"";default:return""}},zT=["Electronics","Furniture","Clothing","Kitchen","Tools","Other"],BT=["Living Room","Bedroom","Kitchen","Garage","Office","Storage"],uw=({onSubmit:s,onCancel:t})=>{const[e,r]=Ve.useState(""),[o,u]=Ve.useState(zT[0]),[c,m]=Ve.useState(BT[0]),[g,y]=Ve.useState(1),[T,A]=Ve.useState(""),I=Y=>{Y.preventDefault(),s({name:e,category:o,location:c,quantity:g,value:T?parseFloat(T):0})},B={display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},Z={fontWeight:600,fontSize:"0.875rem"};return J.jsxs(ep,{className:"animate-fade-in",children:[J.jsx("h2",{className:"text-title",style:{fontSize:"1.5rem"},children:"Add New Item"}),J.jsxs("form",{onSubmit:I,children:[J.jsxs("div",{style:B,children:[J.jsx("label",{style:Z,children:"Item Name"}),J.jsx("input",{required:!0,type:"text",value:e,onChange:Y=>r(Y.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)"},placeholder:"e.g. Sony Bravia TV"})]}),J.jsxs("div",{className:"form-row",children:[J.jsxs("div",{style:B,children:[J.jsx("label",{style:Z,children:"Category"}),J.jsx("select",{value:o,onChange:Y=>u(Y.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:zT.map(Y=>J.jsx("option",{value:Y,children:Y},Y))})]}),J.jsxs("div",{style:B,children:[J.jsx("label",{style:Z,children:"Location"}),J.jsx("select",{value:c,onChange:Y=>m(Y.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:BT.map(Y=>J.jsx("option",{value:Y,children:Y},Y))})]})]}),J.jsxs("div",{className:"form-row",children:[J.jsxs("div",{style:B,children:[J.jsx("label",{style:Z,children:"Quantity"}),J.jsx("input",{type:"number",min:"1",value:g,onChange:Y=>y(parseInt(Y.target.value)),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"}})]}),J.jsxs("div",{style:B,children:[J.jsx("label",{style:Z,children:"Value ($)"}),J.jsx("input",{type:"number",min:"0",step:"0.01",value:T,onChange:Y=>A(Y.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"0.00"})]})]}),J.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end"},children:[J.jsx(Cu,{type:"button",variant:"secondary",onClick:t,children:"Cancel"}),J.jsx(Cu,{type:"submit",children:"Save Item"})]})]})]})},cw=()=>{};var jT={};const q0=function(s){const t=[];let e=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[e++]=o:o<2048?(t[e++]=o>>6|192,t[e++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[e++]=o>>18|240,t[e++]=o>>12&63|128,t[e++]=o>>6&63|128,t[e++]=o&63|128):(t[e++]=o>>12|224,t[e++]=o>>6&63|128,t[e++]=o&63|128)}return t},hw=function(s){const t=[];let e=0,r=0;for(;e<s.length;){const o=s[e++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[e++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[e++],c=s[e++],m=s[e++],g=((o&7)<<18|(u&63)<<12|(c&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[e++],c=s[e++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|c&63)}}return t.join("")},F0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],c=o+1<s.length,m=c?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,T=u>>2,A=(u&3)<<4|m>>4;let I=(m&15)<<2|y>>6,B=y&63;g||(B=64,c||(I=64)),r.push(e[T],e[A],e[I],e[B])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(q0(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):hw(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=e[s.charAt(o++)],m=o<s.length?e[s.charAt(o)]:0;++o;const y=o<s.length?e[s.charAt(o)]:64;++o;const A=o<s.length?e[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||A==null)throw new fw;const I=u<<2|m>>4;if(r.push(I),y!==64){const B=m<<4&240|y>>2;if(r.push(B),A!==64){const Z=y<<6&192|A;r.push(Z)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dw=function(s){const t=q0(s);return F0.encodeByteArray(t,!0)},sf=function(s){return dw(s).replace(/\./g,"")},H0=function(s){try{return F0.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function G0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const mw=()=>G0().__FIREBASE_DEFAULTS__,gw=()=>{if(typeof process>"u"||typeof jT>"u")return;const s=jT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},pw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&H0(s[1]);return t&&JSON.parse(t)},xf=()=>{try{return cw()||mw()||gw()||pw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},K0=s=>xf()?.emulatorHosts?.[s],yw=s=>{const t=K0(s);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},Q0=()=>xf()?.config,Y0=s=>xf()?.[`_${s}`];class _w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}function Xo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X0(s){return(await fetch(s,{credentials:"include"})).ok}function vw(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[sf(JSON.stringify(e)),sf(JSON.stringify(c)),""].join(".")}const _u={};function Tw(){const s={prod:[],emulator:[]};for(const t of Object.keys(_u))_u[t]?s.emulator.push(t):s.prod.push(t);return s}function Ew(s){let t=document.getElementById(s),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),e=!0),{created:e,element:t}}let qT=!1;function $0(s,t){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||_u[s]===t||_u[s]||qT)return;_u[s]=t;function e(I){return`__firebase__banner__${I}`}const r="__firebase__banner",u=Tw().prod.length>0;function c(){const I=document.getElementById(r);I&&I.remove()}function m(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,B){I.setAttribute("width","24"),I.setAttribute("id",B),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{qT=!0,c()},I}function T(I,B){I.setAttribute("id",B),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function A(){const I=Ew(r),B=e("text"),Z=document.getElementById(B)||document.createElement("span"),Y=e("learnmore"),W=document.getElementById(Y)||document.createElement("a"),ft=e("preprendIcon"),dt=document.getElementById(ft)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const at=I.element;m(at),T(W,Y);const Rt=y();g(dt,ft),at.append(dt,Z,W,Rt),document.body.appendChild(at)}u?(Z.innerText="Preview backend disconnected.",dt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(dt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}function Ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function J0(){const s=xf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Iw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ww(){const s=Ue();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Z0(){return!J0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W0(){return!J0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function tA(){try{return typeof indexedDB=="object"}catch{return!1}}function Rw(){return new Promise((s,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),e||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{e=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(e){t(e)}})}const Cw="FirebaseError";class dr extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=Cw,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},o=`${this.service}/${t}`,u=this.errors[t],c=u?Dw(u,r):"Error",m=`${this.serviceName}: ${c} (${o}).`;return new dr(o,m,r)}}function Dw(s,t){return s.replace(Vw,(e,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const Vw=/\{\$([^}]+)}/g;function xw(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}function ha(s,t){if(s===t)return!0;const e=Object.keys(s),r=Object.keys(t);for(const o of e){if(!r.includes(o))return!1;const u=s[o],c=t[o];if(FT(u)&&FT(c)){if(!ha(u,c))return!1}else if(u!==c)return!1}for(const o of r)if(!e.includes(o))return!1;return!0}function FT(s){return s!==null&&typeof s=="object"}function Ku(s){const t=[];for(const[e,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Nw(s,t){const e=new Ow(s,t);return e.subscribe.bind(e)}class Ow{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let o;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");Mw(t,["next","error","complete"])?o=t:o={next:t,error:e,complete:r},o.next===void 0&&(o.next=ag),o.error===void 0&&(o.error=ag),o.complete===void 0&&(o.complete=ag);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mw(s,t){if(typeof s!="object"||s===null)return!1;for(const e of t)if(e in s&&typeof s[e]=="function")return!0;return!1}function ag(){}function rn(s){return s&&s._delegate?s._delegate:s}class fa{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Zs="[DEFAULT]";class Pw{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new _w;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:e});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Lw(t))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(e);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Zs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zs){return this.instances.has(t)}getOptions(t=Zs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[u,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&c.resolve(o)}return o}onInit(t,e){const r=this.normalizeInstanceIdentifier(e),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const o of r)try{o(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kw(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Zs){return this.component?this.component.multipleInstances?t:Zs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kw(s){return s===Zs?void 0:s}function Lw(s){return s.instantiationMode==="EAGER"}class Uw{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Pw(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Pt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Pt||(Pt={}));const zw={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},Bw=Pt.INFO,jw={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},qw=(s,t,...e)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=jw[t];if(o)console[o](`[${r}]  ${s.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class np{constructor(t){this.name=t,this._logLevel=Bw,this._logHandler=qw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?zw[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...t),this._logHandler(this,Pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...t),this._logHandler(this,Pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...t),this._logHandler(this,Pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...t),this._logHandler(this,Pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...t),this._logHandler(this,Pt.ERROR,...t)}}const Fw=(s,t)=>t.some(e=>s instanceof e);let HT,GT;function Hw(){return HT||(HT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gw(){return GT||(GT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eA=new WeakMap,Tg=new WeakMap,nA=new WeakMap,og=new WeakMap,ip=new WeakMap;function Kw(s){const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",c)},u=()=>{e(as(s.result)),o()},c=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&eA.set(e,s)}).catch(()=>{}),ip.set(t,s),t}function Qw(s){if(Tg.has(s))return;const t=new Promise((e,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",c),s.removeEventListener("abort",c)},u=()=>{e(),o()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",c),s.addEventListener("abort",c)});Tg.set(s,t)}let Eg={get(s,t,e){if(s instanceof IDBTransaction){if(t==="done")return Tg.get(s);if(t==="objectStoreNames")return s.objectStoreNames||nA.get(s);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return as(s[t])},set(s,t,e){return s[t]=e,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function Yw(s){Eg=s(Eg)}function Xw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=s.call(lg(this),t,...e);return nA.set(r,t.sort?t.sort():[t]),as(r)}:Gw().includes(s)?function(...t){return s.apply(lg(this),t),as(eA.get(this))}:function(...t){return as(s.apply(lg(this),t))}}function $w(s){return typeof s=="function"?Xw(s):(s instanceof IDBTransaction&&Qw(s),Fw(s,Hw())?new Proxy(s,Eg):s)}function as(s){if(s instanceof IDBRequest)return Kw(s);if(og.has(s))return og.get(s);const t=$w(s);return t!==s&&(og.set(s,t),ip.set(t,s)),t}const lg=s=>ip.get(s);function Jw(s,t,{blocked:e,upgrade:r,blocking:o,terminated:u}={}){const c=indexedDB.open(s,t),m=as(c);return r&&c.addEventListener("upgradeneeded",g=>{r(as(c.result),g.oldVersion,g.newVersion,as(c.transaction),g)}),e&&c.addEventListener("blocked",g=>e(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Zw=["get","getKey","getAll","getAllKeys","count"],Ww=["put","add","delete","clear"],ug=new Map;function KT(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(ug.get(t))return ug.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,o=Ww.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Zw.includes(e)))return;const u=async function(c,...m){const g=this.transaction(c,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[e](...m),o&&g.done]))[0]};return ug.set(t,u),u}Yw(s=>({...s,get:(t,e,r)=>KT(t,e)||s.get(t,e,r),has:(t,e)=>!!KT(t,e)||s.has(t,e)}));class tR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(eR(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function eR(s){return s.getComponent()?.type==="VERSION"}const Ag="@firebase/app",QT="0.14.6";const or=new np("@firebase/app"),nR="@firebase/app-compat",iR="@firebase/analytics-compat",rR="@firebase/analytics",sR="@firebase/app-check-compat",aR="@firebase/app-check",oR="@firebase/auth",lR="@firebase/auth-compat",uR="@firebase/database",cR="@firebase/data-connect",hR="@firebase/database-compat",fR="@firebase/functions",dR="@firebase/functions-compat",mR="@firebase/installations",gR="@firebase/installations-compat",pR="@firebase/messaging",yR="@firebase/messaging-compat",_R="@firebase/performance",vR="@firebase/performance-compat",TR="@firebase/remote-config",ER="@firebase/remote-config-compat",AR="@firebase/storage",SR="@firebase/storage-compat",bR="@firebase/firestore",IR="@firebase/ai",wR="@firebase/firestore-compat",RR="firebase",CR="12.6.0";const Sg="[DEFAULT]",DR={[Ag]:"fire-core",[nR]:"fire-core-compat",[rR]:"fire-analytics",[iR]:"fire-analytics-compat",[aR]:"fire-app-check",[sR]:"fire-app-check-compat",[oR]:"fire-auth",[lR]:"fire-auth-compat",[uR]:"fire-rtdb",[cR]:"fire-data-connect",[hR]:"fire-rtdb-compat",[fR]:"fire-fn",[dR]:"fire-fn-compat",[mR]:"fire-iid",[gR]:"fire-iid-compat",[pR]:"fire-fcm",[yR]:"fire-fcm-compat",[_R]:"fire-perf",[vR]:"fire-perf-compat",[TR]:"fire-rc",[ER]:"fire-rc-compat",[AR]:"fire-gcs",[SR]:"fire-gcs-compat",[bR]:"fire-fst",[wR]:"fire-fst-compat",[IR]:"fire-vertex","fire-js":"fire-js",[RR]:"fire-js-all"};const af=new Map,VR=new Map,bg=new Map;function YT(s,t){try{s.container.addComponent(t)}catch(e){or.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,e)}}function Mo(s){const t=s.name;if(bg.has(t))return or.debug(`There were multiple attempts to register component ${t}.`),!1;bg.set(t,s);for(const e of af.values())YT(e,s);for(const e of VR.values())YT(e,s);return!0}function rp(s,t){const e=s.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),s.container.getProvider(t)}function Vi(s){return s==null?!1:s.settings!==void 0}const xR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new Gu("app","Firebase",xR);class NR{constructor(t,e,r){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}const $o=CR;function iA(s,t={}){let e=s;typeof t!="object"&&(t={name:t});const r={name:Sg,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw os.create("bad-app-name",{appName:String(o)});if(e||(e=Q0()),!e)throw os.create("no-options");const u=af.get(o);if(u){if(ha(e,u.options)&&ha(r,u.config))return u;throw os.create("duplicate-app",{appName:o})}const c=new Uw(o);for(const g of bg.values())c.addComponent(g);const m=new NR(e,r,c);return af.set(o,m),m}function rA(s=Sg){const t=af.get(s);if(!t&&s===Sg&&Q0())return iA();if(!t)throw os.create("no-app",{appName:s});return t}function ls(s,t,e){let r=DR[s]??s;e&&(r+=`-${e}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const c=[`Unable to register library "${r}" with version "${t}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),or.warn(c.join(" "));return}Mo(new fa(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const OR="firebase-heartbeat-database",MR=1,Du="firebase-heartbeat-store";let cg=null;function sA(){return cg||(cg=Jw(OR,MR,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Du)}catch(e){console.warn(e)}}}}).catch(s=>{throw os.create("idb-open",{originalErrorMessage:s.message})})),cg}async function PR(s){try{const e=(await sA()).transaction(Du),r=await e.objectStore(Du).get(aA(s));return await e.done,r}catch(t){if(t instanceof dr)or.warn(t.message);else{const e=os.create("idb-get",{originalErrorMessage:t?.message});or.warn(e.message)}}}async function XT(s,t){try{const r=(await sA()).transaction(Du,"readwrite");await r.objectStore(Du).put(t,aA(s)),await r.done}catch(e){if(e instanceof dr)or.warn(e.message);else{const r=os.create("idb-set",{originalErrorMessage:e?.message});or.warn(r.message)}}}function aA(s){return`${s.name}!${s.options.appId}`}const kR=1024,LR=30;class UR{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new BR(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=$T();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:e}),this._heartbeatsCache.heartbeats.length>LR){const o=jR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){or.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$T(),{heartbeatsToSend:e,unsentEntries:r}=zR(this._heartbeatsCache.heartbeats),o=sf(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return or.warn(t),""}}}function $T(){return new Date().toISOString().substring(0,10)}function zR(s,t=kR){const e=[];let r=s.slice();for(const o of s){const u=e.find(c=>c.agent===o.agent);if(u){if(u.dates.push(o.date),JT(e)>t){u.dates.pop();break}}else if(e.push({agent:o.agent,dates:[o.date]}),JT(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class BR{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tA()?Rw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await PR(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return XT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return XT(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function JT(s){return sf(JSON.stringify({version:2,heartbeats:s})).length}function jR(s){if(s.length===0)return-1;let t=0,e=s[0].date;for(let r=1;r<s.length;r++)s[r].date<e&&(e=s[r].date,t=r);return t}function qR(s){Mo(new fa("platform-logger",t=>new tR(t),"PRIVATE")),Mo(new fa("heartbeat",t=>new UR(t),"PRIVATE")),ls(Ag,QT,s),ls(Ag,QT,"esm2020"),ls("fire-js","")}qR("");var FR="firebase",HR="12.7.0";ls(FR,HR,"app");var ZT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var us,oA;(function(){var s;function t(w,b){function D(){}D.prototype=b.prototype,w.F=b.prototype,w.prototype=new D,w.prototype.constructor=w,w.D=function(O,x,P){for(var R=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)R[ae-2]=arguments[ae];return b.prototype[x].apply(O,R)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,e),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(w,b,D){D||(D=0);const O=Array(16);if(typeof b=="string")for(var x=0;x<16;++x)O[x]=b.charCodeAt(D++)|b.charCodeAt(D++)<<8|b.charCodeAt(D++)<<16|b.charCodeAt(D++)<<24;else for(x=0;x<16;++x)O[x]=b[D++]|b[D++]<<8|b[D++]<<16|b[D++]<<24;b=w.g[0],D=w.g[1],x=w.g[2];let P=w.g[3],R;R=b+(P^D&(x^P))+O[0]+3614090360&4294967295,b=D+(R<<7&4294967295|R>>>25),R=P+(x^b&(D^x))+O[1]+3905402710&4294967295,P=b+(R<<12&4294967295|R>>>20),R=x+(D^P&(b^D))+O[2]+606105819&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(b^x&(P^b))+O[3]+3250441966&4294967295,D=x+(R<<22&4294967295|R>>>10),R=b+(P^D&(x^P))+O[4]+4118548399&4294967295,b=D+(R<<7&4294967295|R>>>25),R=P+(x^b&(D^x))+O[5]+1200080426&4294967295,P=b+(R<<12&4294967295|R>>>20),R=x+(D^P&(b^D))+O[6]+2821735955&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(b^x&(P^b))+O[7]+4249261313&4294967295,D=x+(R<<22&4294967295|R>>>10),R=b+(P^D&(x^P))+O[8]+1770035416&4294967295,b=D+(R<<7&4294967295|R>>>25),R=P+(x^b&(D^x))+O[9]+2336552879&4294967295,P=b+(R<<12&4294967295|R>>>20),R=x+(D^P&(b^D))+O[10]+4294925233&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(b^x&(P^b))+O[11]+2304563134&4294967295,D=x+(R<<22&4294967295|R>>>10),R=b+(P^D&(x^P))+O[12]+1804603682&4294967295,b=D+(R<<7&4294967295|R>>>25),R=P+(x^b&(D^x))+O[13]+4254626195&4294967295,P=b+(R<<12&4294967295|R>>>20),R=x+(D^P&(b^D))+O[14]+2792965006&4294967295,x=P+(R<<17&4294967295|R>>>15),R=D+(b^x&(P^b))+O[15]+1236535329&4294967295,D=x+(R<<22&4294967295|R>>>10),R=b+(x^P&(D^x))+O[1]+4129170786&4294967295,b=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(b^D))+O[6]+3225465664&4294967295,P=b+(R<<9&4294967295|R>>>23),R=x+(b^D&(P^b))+O[11]+643717713&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^b&(x^P))+O[0]+3921069994&4294967295,D=x+(R<<20&4294967295|R>>>12),R=b+(x^P&(D^x))+O[5]+3593408605&4294967295,b=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(b^D))+O[10]+38016083&4294967295,P=b+(R<<9&4294967295|R>>>23),R=x+(b^D&(P^b))+O[15]+3634488961&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^b&(x^P))+O[4]+3889429448&4294967295,D=x+(R<<20&4294967295|R>>>12),R=b+(x^P&(D^x))+O[9]+568446438&4294967295,b=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(b^D))+O[14]+3275163606&4294967295,P=b+(R<<9&4294967295|R>>>23),R=x+(b^D&(P^b))+O[3]+4107603335&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^b&(x^P))+O[8]+1163531501&4294967295,D=x+(R<<20&4294967295|R>>>12),R=b+(x^P&(D^x))+O[13]+2850285829&4294967295,b=D+(R<<5&4294967295|R>>>27),R=P+(D^x&(b^D))+O[2]+4243563512&4294967295,P=b+(R<<9&4294967295|R>>>23),R=x+(b^D&(P^b))+O[7]+1735328473&4294967295,x=P+(R<<14&4294967295|R>>>18),R=D+(P^b&(x^P))+O[12]+2368359562&4294967295,D=x+(R<<20&4294967295|R>>>12),R=b+(D^x^P)+O[5]+4294588738&4294967295,b=D+(R<<4&4294967295|R>>>28),R=P+(b^D^x)+O[8]+2272392833&4294967295,P=b+(R<<11&4294967295|R>>>21),R=x+(P^b^D)+O[11]+1839030562&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^b)+O[14]+4259657740&4294967295,D=x+(R<<23&4294967295|R>>>9),R=b+(D^x^P)+O[1]+2763975236&4294967295,b=D+(R<<4&4294967295|R>>>28),R=P+(b^D^x)+O[4]+1272893353&4294967295,P=b+(R<<11&4294967295|R>>>21),R=x+(P^b^D)+O[7]+4139469664&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^b)+O[10]+3200236656&4294967295,D=x+(R<<23&4294967295|R>>>9),R=b+(D^x^P)+O[13]+681279174&4294967295,b=D+(R<<4&4294967295|R>>>28),R=P+(b^D^x)+O[0]+3936430074&4294967295,P=b+(R<<11&4294967295|R>>>21),R=x+(P^b^D)+O[3]+3572445317&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^b)+O[6]+76029189&4294967295,D=x+(R<<23&4294967295|R>>>9),R=b+(D^x^P)+O[9]+3654602809&4294967295,b=D+(R<<4&4294967295|R>>>28),R=P+(b^D^x)+O[12]+3873151461&4294967295,P=b+(R<<11&4294967295|R>>>21),R=x+(P^b^D)+O[15]+530742520&4294967295,x=P+(R<<16&4294967295|R>>>16),R=D+(x^P^b)+O[2]+3299628645&4294967295,D=x+(R<<23&4294967295|R>>>9),R=b+(x^(D|~P))+O[0]+4096336452&4294967295,b=D+(R<<6&4294967295|R>>>26),R=P+(D^(b|~x))+O[7]+1126891415&4294967295,P=b+(R<<10&4294967295|R>>>22),R=x+(b^(P|~D))+O[14]+2878612391&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~b))+O[5]+4237533241&4294967295,D=x+(R<<21&4294967295|R>>>11),R=b+(x^(D|~P))+O[12]+1700485571&4294967295,b=D+(R<<6&4294967295|R>>>26),R=P+(D^(b|~x))+O[3]+2399980690&4294967295,P=b+(R<<10&4294967295|R>>>22),R=x+(b^(P|~D))+O[10]+4293915773&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~b))+O[1]+2240044497&4294967295,D=x+(R<<21&4294967295|R>>>11),R=b+(x^(D|~P))+O[8]+1873313359&4294967295,b=D+(R<<6&4294967295|R>>>26),R=P+(D^(b|~x))+O[15]+4264355552&4294967295,P=b+(R<<10&4294967295|R>>>22),R=x+(b^(P|~D))+O[6]+2734768916&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~b))+O[13]+1309151649&4294967295,D=x+(R<<21&4294967295|R>>>11),R=b+(x^(D|~P))+O[4]+4149444226&4294967295,b=D+(R<<6&4294967295|R>>>26),R=P+(D^(b|~x))+O[11]+3174756917&4294967295,P=b+(R<<10&4294967295|R>>>22),R=x+(b^(P|~D))+O[2]+718787259&4294967295,x=P+(R<<15&4294967295|R>>>17),R=D+(P^(x|~b))+O[9]+3951481745&4294967295,w.g[0]=w.g[0]+b&4294967295,w.g[1]=w.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,w.g[2]=w.g[2]+x&4294967295,w.g[3]=w.g[3]+P&4294967295}r.prototype.v=function(w,b){b===void 0&&(b=w.length);const D=b-this.blockSize,O=this.C;let x=this.h,P=0;for(;P<b;){if(x==0)for(;P<=D;)o(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<b;)if(O[x++]=w.charCodeAt(P++),x==this.blockSize){o(this,O),x=0;break}}else for(;P<b;)if(O[x++]=w[P++],x==this.blockSize){o(this,O),x=0;break}}this.h=x,this.o+=b},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var b=1;b<w.length-8;++b)w[b]=0;b=this.o*8;for(var D=w.length-8;D<w.length;++D)w[D]=b&255,b/=256;for(this.v(w),w=Array(16),b=0,D=0;D<4;++D)for(let O=0;O<32;O+=8)w[b++]=this.g[D]>>>O&255;return w};function u(w,b){var D=m;return Object.prototype.hasOwnProperty.call(D,w)?D[w]:D[w]=b(w)}function c(w,b){this.h=b;const D=[];let O=!0;for(let x=w.length-1;x>=0;x--){const P=w[x]|0;O&&P==b||(D[x]=P,O=!1)}this.g=D}var m={};function g(w){return-128<=w&&w<128?u(w,function(b){return new c([b|0],b<0?-1:0)}):new c([w|0],w<0?-1:0)}function y(w){if(isNaN(w)||!isFinite(w))return A;if(w<0)return W(y(-w));const b=[];let D=1;for(let O=0;w>=D;O++)b[O]=w/D|0,D*=4294967296;return new c(b,0)}function T(w,b){if(w.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(w.charAt(0)=="-")return W(T(w.substring(1),b));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=y(Math.pow(b,8));let O=A;for(let P=0;P<w.length;P+=8){var x=Math.min(8,w.length-P);const R=parseInt(w.substring(P,P+x),b);x<8?(x=y(Math.pow(b,x)),O=O.j(x).add(y(R))):(O=O.j(D),O=O.add(y(R)))}return O}var A=g(0),I=g(1),B=g(16777216);s=c.prototype,s.m=function(){if(Y(this))return-W(this).m();let w=0,b=1;for(let D=0;D<this.g.length;D++){const O=this.i(D);w+=(O>=0?O:4294967296+O)*b,b*=4294967296}return w},s.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(Z(this))return"0";if(Y(this))return"-"+W(this).toString(w);const b=y(Math.pow(w,6));var D=this;let O="";for(;;){const x=Rt(D,b).g;D=ft(D,x.j(b));let P=((D.g.length>0?D.g[0]:D.h)>>>0).toString(w);if(D=x,Z(D))return P+O;for(;P.length<6;)P="0"+P;O=P+O}},s.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function Z(w){if(w.h!=0)return!1;for(let b=0;b<w.g.length;b++)if(w.g[b]!=0)return!1;return!0}function Y(w){return w.h==-1}s.l=function(w){return w=ft(this,w),Y(w)?-1:Z(w)?0:1};function W(w){const b=w.g.length,D=[];for(let O=0;O<b;O++)D[O]=~w.g[O];return new c(D,~w.h).add(I)}s.abs=function(){return Y(this)?W(this):this},s.add=function(w){const b=Math.max(this.g.length,w.g.length),D=[];let O=0;for(let x=0;x<=b;x++){let P=O+(this.i(x)&65535)+(w.i(x)&65535),R=(P>>>16)+(this.i(x)>>>16)+(w.i(x)>>>16);O=R>>>16,P&=65535,R&=65535,D[x]=R<<16|P}return new c(D,D[D.length-1]&-2147483648?-1:0)};function ft(w,b){return w.add(W(b))}s.j=function(w){if(Z(this)||Z(w))return A;if(Y(this))return Y(w)?W(this).j(W(w)):W(W(this).j(w));if(Y(w))return W(this.j(W(w)));if(this.l(B)<0&&w.l(B)<0)return y(this.m()*w.m());const b=this.g.length+w.g.length,D=[];for(var O=0;O<2*b;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(let x=0;x<w.g.length;x++){const P=this.i(O)>>>16,R=this.i(O)&65535,ae=w.i(x)>>>16,Me=w.i(x)&65535;D[2*O+2*x]+=R*Me,dt(D,2*O+2*x),D[2*O+2*x+1]+=P*Me,dt(D,2*O+2*x+1),D[2*O+2*x+1]+=R*ae,dt(D,2*O+2*x+1),D[2*O+2*x+2]+=P*ae,dt(D,2*O+2*x+2)}for(w=0;w<b;w++)D[w]=D[2*w+1]<<16|D[2*w];for(w=b;w<2*b;w++)D[w]=0;return new c(D,0)};function dt(w,b){for(;(w[b]&65535)!=w[b];)w[b+1]+=w[b]>>>16,w[b]&=65535,b++}function at(w,b){this.g=w,this.h=b}function Rt(w,b){if(Z(b))throw Error("division by zero");if(Z(w))return new at(A,A);if(Y(w))return b=Rt(W(w),b),new at(W(b.g),W(b.h));if(Y(b))return b=Rt(w,W(b)),new at(W(b.g),b.h);if(w.g.length>30){if(Y(w)||Y(b))throw Error("slowDivide_ only works with positive integers.");for(var D=I,O=b;O.l(w)<=0;)D=bt(D),O=bt(O);var x=_t(D,1),P=_t(O,1);for(O=_t(O,2),D=_t(D,2);!Z(O);){var R=P.add(O);R.l(w)<=0&&(x=x.add(D),P=R),O=_t(O,1),D=_t(D,1)}return b=ft(w,x.j(b)),new at(x,b)}for(x=A;w.l(b)>=0;){for(D=Math.max(1,Math.floor(w.m()/b.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),P=y(D),R=P.j(b);Y(R)||R.l(w)>0;)D-=O,P=y(D),R=P.j(b);Z(P)&&(P=I),x=x.add(P),w=ft(w,R)}return new at(x,w)}s.B=function(w){return Rt(this,w).h},s.and=function(w){const b=Math.max(this.g.length,w.g.length),D=[];for(let O=0;O<b;O++)D[O]=this.i(O)&w.i(O);return new c(D,this.h&w.h)},s.or=function(w){const b=Math.max(this.g.length,w.g.length),D=[];for(let O=0;O<b;O++)D[O]=this.i(O)|w.i(O);return new c(D,this.h|w.h)},s.xor=function(w){const b=Math.max(this.g.length,w.g.length),D=[];for(let O=0;O<b;O++)D[O]=this.i(O)^w.i(O);return new c(D,this.h^w.h)};function bt(w){const b=w.g.length+1,D=[];for(let O=0;O<b;O++)D[O]=w.i(O)<<1|w.i(O-1)>>>31;return new c(D,w.h)}function _t(w,b){const D=b>>5;b%=32;const O=w.g.length-D,x=[];for(let P=0;P<O;P++)x[P]=b>0?w.i(P+D)>>>b|w.i(P+D+1)<<32-b:w.i(P+D);return new c(x,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=T,us=c}).apply(typeof ZT<"u"?ZT:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lA,du,uA,qh,Ig,cA,hA,fA;(function(){var s,t=Object.defineProperty;function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var p=0;p<h.length;++p){var v=h[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=e(this);function o(h,p){if(p)t:{var v=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var L=h[S];if(!(L in v))break t;v=v[L]}h=h[h.length-1],S=v[h],p=p(S),p!=S&&p!=null&&t(v,h,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(p){var v=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&v.push([S,p[S]]);return v}});var u=u||{},c=this||self;function m(h){var p=typeof h;return p=="object"&&h!=null||p=="function"}function g(h,p,v){return h.call.apply(h.bind,arguments)}function y(h,p,v){return y=g,y.apply(null,arguments)}function T(h,p){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function A(h,p){function v(){}v.prototype=p.prototype,h.Z=p.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(S,L,q){for(var et=Array(arguments.length-2),It=2;It<arguments.length;It++)et[It-2]=arguments[It];return p.prototype[L].apply(S,et)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function B(h){const p=h.length;if(p>0){const v=Array(p);for(let S=0;S<p;S++)v[S]=h[S];return v}return[]}function Z(h,p){for(let S=1;S<arguments.length;S++){const L=arguments[S];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=h.length||0;const q=L.length||0;h.length=v+q;for(let et=0;et<q;et++)h[v+et]=L[et]}else h.push(L)}}class Y{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function W(h){c.setTimeout(()=>{throw h},0)}function ft(){var h=w;let p=null;return h.g&&(p=h.g,h.g=h.g.next,h.g||(h.h=null),p.next=null),p}class dt{constructor(){this.h=this.g=null}add(p,v){const S=at.get();S.set(p,v),this.h?this.h.next=S:this.g=S,this.h=S}}var at=new Y(()=>new Rt,h=>h.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let bt,_t=!1,w=new dt,b=()=>{const h=Promise.resolve(void 0);bt=()=>{h.then(D)}};function D(){for(var h;h=ft();){try{h.h.call(h.g)}catch(v){W(v)}var p=at;p.j(h),p.h<100&&(p.h++,h.next=p.g,p.g=h)}_t=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,p){this.type=h,this.g=this.target=p,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,p=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,p),c.removeEventListener("test",v,p)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function ae(h,p){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,p)}A(ae,x),ae.prototype.init=function(h,p){const v=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=p,p=h.relatedTarget,p||(v=="mouseover"?p=h.fromElement:v=="mouseout"&&(p=h.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),G=0;function rt(h,p,v,S,L){this.listener=h,this.proxy=null,this.src=p,this.type=v,this.capture=!!S,this.ha=L,this.key=++G,this.da=this.fa=!1}function pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Bt(h,p,v){for(const S in h)p.call(v,h[S],S,h)}function Kt(h,p){for(const v in h)p.call(void 0,h[v],v,h)}function N(h){const p={};for(const v in h)p[v]=h[v];return p}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(h,p){let v,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(v in S)h[v]=S[v];for(let q=0;q<$.length;q++)v=$[q],Object.prototype.hasOwnProperty.call(S,v)&&(h[v]=S[v])}}function ot(h){this.src=h,this.g={},this.h=0}ot.prototype.add=function(h,p,v,S,L){const q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);const et=Ct(h,p,S,L);return et>-1?(p=h[et],v||(p.fa=!1)):(p=new rt(p,this.src,q,!!S,L),p.fa=v,h.push(p)),p};function Tt(h,p){const v=p.type;if(v in h.g){var S=h.g[v],L=Array.prototype.indexOf.call(S,p,void 0),q;(q=L>=0)&&Array.prototype.splice.call(S,L,1),q&&(pt(p),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Ct(h,p,v,S){for(let L=0;L<h.length;++L){const q=h[L];if(!q.da&&q.listener==p&&q.capture==!!v&&q.ha==S)return L}return-1}var Ut="closure_lm_"+(Math.random()*1e6|0),Pe={};function oe(h,p,v,S,L){if(Array.isArray(p)){for(let q=0;q<p.length;q++)oe(h,p[q],v,S,L);return null}return v=rl(v),h&&h[Me]?h.J(p,v,m(S)?!!S.capture:!1,L):vs(h,p,v,!1,S,L)}function vs(h,p,v,S,L,q){if(!p)throw Error("Invalid event type");const et=m(L)?!!L.capture:!!L;let It=Ts(h);if(It||(h[Ut]=It=new ot(h)),v=It.add(p,v,S,et,q),v.proxy)return v;if(S=wa(),v.proxy=S,S.src=h,S.listener=v,h.addEventListener)P||(L=et),L===void 0&&(L=!1),h.addEventListener(p.toString(),S,L);else if(h.attachEvent)h.attachEvent(oi(p.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function wa(){function h(v){return p.call(h.src,h.listener,v)}const p=nl;return h}function Ra(h,p,v,S,L){if(Array.isArray(p))for(var q=0;q<p.length;q++)Ra(h,p[q],v,S,L);else S=m(S)?!!S.capture:!!S,v=rl(v),h&&h[Me]?(h=h.i,q=String(p).toString(),q in h.g&&(p=h.g[q],v=Ct(p,v,S,L),v>-1&&(pt(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete h.g[q],h.h--)))):h&&(h=Ts(h))&&(p=h.g[p.toString()],h=-1,p&&(h=Ct(p,v,S,L)),(v=h>-1?p[h]:null)&&Ca(v))}function Ca(h){if(typeof h!="number"&&h&&!h.da){var p=h.src;if(p&&p[Me])Tt(p.i,h);else{var v=h.type,S=h.proxy;p.removeEventListener?p.removeEventListener(v,S,h.capture):p.detachEvent?p.detachEvent(oi(v),S):p.addListener&&p.removeListener&&p.removeListener(S),(v=Ts(p))?(Tt(v,h),v.h==0&&(v.src=null,p[Ut]=null)):pt(h)}}}function oi(h){return h in Pe?Pe[h]:Pe[h]="on"+h}function nl(h,p){if(h.da)h=!0;else{p=new ae(p,this);const v=h.listener,S=h.ha||h.src;h.fa&&Ca(h),h=v.call(S,p)}return h}function Ts(h){return h=h[Ut],h instanceof ot?h:null}var il="__closure_events_fn_"+(Math.random()*1e9>>>0);function rl(h){return typeof h=="function"?h:(h[il]||(h[il]=function(p){return h.handleEvent(p)}),h[il])}function Te(){O.call(this),this.i=new ot(this),this.M=this,this.G=null}A(Te,O),Te.prototype[Me]=!0,Te.prototype.removeEventListener=function(h,p,v,S){Ra(this,h,p,v,S)};function ke(h,p){var v,S=h.G;if(S)for(v=[];S;S=S.G)v.push(S);if(h=h.M,S=p.type||p,typeof p=="string")p=new x(p,h);else if(p instanceof x)p.target=p.target||h;else{var L=p;p=new x(S,h),st(p,L)}L=!0;let q,et;if(v)for(et=v.length-1;et>=0;et--)q=p.g=v[et],L=pr(q,S,!0,p)&&L;if(q=p.g=h,L=pr(q,S,!0,p)&&L,L=pr(q,S,!1,p)&&L,v)for(et=0;et<v.length;et++)q=p.g=v[et],L=pr(q,S,!1,p)&&L}Te.prototype.N=function(){if(Te.Z.N.call(this),this.i){var h=this.i;for(const p in h.g){const v=h.g[p];for(let S=0;S<v.length;S++)pt(v[S]);delete h.g[p],h.h--}}this.G=null},Te.prototype.J=function(h,p,v,S){return this.i.add(String(h),p,!1,v,S)},Te.prototype.K=function(h,p,v,S){return this.i.add(String(h),p,!0,v,S)};function pr(h,p,v,S){if(p=h.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let q=0;q<p.length;++q){const et=p[q];if(et&&!et.da&&et.capture==v){const It=et.listener,ye=et.ha||et.src;et.fa&&Tt(h.i,et),L=It.call(ye,S)!==!1&&L}}return L&&!S.defaultPrevented}function nd(h,p){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:c.setTimeout(h,p||0)}function sc(h){h.g=nd(()=>{h.g=null,h.i&&(h.i=!1,sc(h))},h.l);const p=h.h;h.h=null,h.m.apply(null,p)}class sn extends O{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:sc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(h){O.call(this),this.h=h,this.g={}}A(Es,O);var sl=[];function al(h){Bt(h.g,function(p,v){this.g.hasOwnProperty(v)&&Ca(p)},h),h.g={}}Es.prototype.N=function(){Es.Z.N.call(this),al(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yr=c.JSON.stringify,id=c.JSON.parse,ac=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function oc(){}function lc(){}var Qn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function He(){x.call(this,"d")}A(He,x);function xn(){x.call(this,"c")}A(xn,x);var pe={},uc=null;function Da(){return uc=uc||new Te}pe.Ia="serverreachability";function cc(h){x.call(this,pe.Ia,h)}A(cc,x);function li(h){const p=Da();ke(p,new cc(p))}pe.STAT_EVENT="statevent";function As(h,p){x.call(this,pe.STAT_EVENT,h),this.stat=p}A(As,x);function Ee(h){const p=Da();ke(p,new As(p,h))}pe.Ja="timingevent";function ui(h,p){x.call(this,pe.Ja,h),this.size=p}A(ui,x);function ci(h,p){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},p)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function rd(h,p,v,S,L,q){h.info(function(){if(h.g)if(q){var et="",It=q.split("&");for(let Ft=0;Ft<It.length;Ft++){var ye=It[Ft].split("=");if(ye.length>1){const le=ye[0];ye=ye[1];const Pn=le.split("_");et=Pn.length>=2&&Pn[1]=="type"?et+(le+"="+ye+"&"):et+(le+"=redacted&")}}}else et=null;else et=q;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+p+`
`+v+`
`+et})}function hc(h,p,v,S,L,q,et){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+p+`
`+v+`
`+q+" "+et})}function hi(h,p,v,S){h.info(function(){return"XMLHTTP TEXT ("+p+"): "+sd(h,v)+(S?" "+S:"")})}function Ss(h,p){h.info(function(){return"TIMEOUT: "+p})}Yn.prototype.info=function(){};function sd(h,p){if(!h.g)return p;if(!p)return null;try{const q=JSON.parse(p);if(q){for(h=0;h<q.length;h++)if(Array.isArray(q[h])){var v=q[h];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var L=S[0];if(L!="noop"&&L!="stop"&&L!="close")for(let et=1;et<S.length;et++)S[et]=""}}}}return yr(q)}catch{return p}}var bs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ol={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ll;function Is(){}A(Is,oc),Is.prototype.g=function(){return new XMLHttpRequest},ll=new Is;function Ui(h){return encodeURIComponent(String(h))}function fc(h){var p=1;h=h.split(":");const v=[];for(;p>0&&h.length;)v.push(h.shift()),p--;return h.length&&v.push(h.join(":")),v}function Xn(h,p,v,S){this.j=h,this.i=p,this.l=v,this.S=S||1,this.V=new Es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var Ae={},Be={};function fi(h,p,v){h.M=1,h.A=ws(be(p)),h.u=v,h.R=!0,Va(h,null)}function Va(h,p){h.F=Date.now(),di(h),h.B=be(h.A);var v=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),Ma(v.i,"t",S),h.C=0,v=h.j.L,h.h=new $n,h.g=Rc(h.j,v?p:null,!h.u),h.P>0&&(h.O=new sn(y(h.Y,h,h.g),h.P)),p=h.V,v=h.g,S=h.ba;var L="readystatechange";Array.isArray(L)||(L&&(sl[0]=L.toString()),L=sl);for(let q=0;q<L.length;q++){const et=oe(v,L[q],S||p.handleEvent,!1,p.h||p);if(!et)break;p.g[et.key]=et}p=h.J?N(h.J):{},h.u?(h.v||(h.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,p)):(h.v="GET",h.g.ea(h.B,h.v,null,p)),li(),rd(h.i,h.v,h.B,h.l,h.S,h.u)}Xn.prototype.ba=function(h){h=h.target;const p=this.O;p&&Wn(h)==3?p.j():this.Y(h)},Xn.prototype.Y=function(h){try{if(h==this.g)t:{const It=Wn(this.g),ye=this.g.ya(),Ft=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||Ge(this.g)))){this.K||It!=4||ye==7||(ye==8||Ft<=0?li(3):li(2)),mi(this);var p=this.g.ca();this.X=p;var v=ad(this);if(this.o=p==200,hc(this.i,this.v,this.B,this.l,this.S,It,p),this.o){if(this.U&&!this.L){e:{if(this.g){var S,L=this.g;if((S=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var q=S;break e}}q=null}if(h=q)hi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,gi(this,h);else{this.o=!1,this.m=3,Ee(12),vn(this),Nn(this);break t}}if(this.R){h=!0;let le;for(;!this.K&&this.C<v.length;)if(le=mc(this,v),le==Be){It==4&&(this.m=4,Ee(14),h=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(le==Ae){this.m=4,Ee(15),hi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else hi(this.i,this.l,le,null),gi(this,le);if(dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||v.length!=0||this.h.h||(this.m=1,Ee(16),h=!1),this.o=this.o&&h,!h)hi(this.i,this.l,v,"[Invalid Chunked Response]"),vn(this),Nn(this);else if(v.length>0&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.aa&&!et.P&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Sl(et),et.P=!0,Ee(11))}}else hi(this.i,this.l,v,null),gi(this,v);It==4&&vn(this),this.o&&!this.K&&(It==4?Sc(this.j,this):(this.o=!1,di(this)))}else Bi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ee(12)):(this.m=0,Ee(13)),vn(this),Nn(this)}}}catch{}};function ad(h){if(!dc(h))return h.g.la();const p=Ge(h.g);if(p==="")return"";let v="";const S=p.length,L=Wn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return vn(h),Nn(h),"";h.h.i=new c.TextDecoder}for(let q=0;q<S;q++)h.h.h=!0,v+=h.h.i.decode(p[q],{stream:!(L&&q==S-1)});return p.length=0,h.h.g+=v,h.C=0,h.h.g}function dc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function mc(h,p){var v=h.C,S=p.indexOf(`
`,v);return S==-1?Be:(v=Number(p.substring(v,S)),isNaN(v)?Ae:(S+=1,S+v>p.length?Be:(p=p.slice(S,S+v),h.C=S+v,p)))}Xn.prototype.cancel=function(){this.K=!0,vn(this)};function di(h){h.T=Date.now()+h.H,xa(h,h.H)}function xa(h,p){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ci(y(h.aa,h),p)}function mi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Xn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ss(this.i,this.B),this.M!=2&&(li(),Ee(17)),vn(this),this.m=2,Nn(this)):xa(this,this.T-h)};function Nn(h){h.j.I==0||h.K||Sc(h.j,h)}function vn(h){mi(h);var p=h.O;p&&typeof p.dispose=="function"&&p.dispose(),h.O=null,al(h.V),h.g&&(p=h.g,h.g=null,p.abort(),p.dispose())}function gi(h,p){try{var v=h.j;if(v.I!=0&&(v.g==h||yi(v.h,h))){if(!h.L&&yi(v.h,h)&&v.I==3){try{var S=v.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)za(v),Ir(v);else break t;Os(v),Ee(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=ci(y(v.Va,v),6e3));pi(v.h)<=1&&v.ta&&(v.ta=void 0)}else Si(v,11)}else if((h.L||v.g==h)&&za(v),!R(p))for(L=v.Ba.g.parse(p),p=0;p<L.length;p++){let Ft=L[p];const le=Ft[0];if(!(le<=v.K))if(v.K=le,Ft=Ft[1],v.I==2)if(Ft[0]=="c"){v.M=Ft[1],v.ba=Ft[2];const Pn=Ft[3];Pn!=null&&(v.ka=Pn,v.j.info("VER="+v.ka));const bi=Ft[4];bi!=null&&(v.za=bi,v.j.info("SVER="+v.za));const ti=Ft[5];ti!=null&&typeof ti=="number"&&ti>0&&(S=1.5*ti,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const ei=h.g;if(ei){const Ms=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var q=S.h;q.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(hl(q,q.h),q.h=null))}if(S.G){const Ba=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;Ba&&(S.wa=Ba,Qt(S.J,S.G,Ba))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var et=h;if(S.na=wc(S,S.L?S.ba:null,S.W),et.L){fl(S.h,et);var It=et,ye=S.O;ye&&(It.H=ye),It.D&&(mi(It),di(It)),S.g=et}else Ec(S);v.i.length>0&&Ai(v)}else Ft[0]!="stop"&&Ft[0]!="close"||Si(v,7);else v.I==3&&(Ft[0]=="stop"||Ft[0]=="close"?Ft[0]=="stop"?Si(v,7):El(v):Ft[0]!="noop"&&v.l&&v.l.qa(Ft),v.A=0)}}li(4)}catch{}}var Se=class{constructor(h,p){this.g=h,this.map=p}};function ul(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function pi(h){return h.h?1:h.g?h.g.size:0}function yi(h,p){return h.h?h.h==p:h.g?h.g.has(p):!1}function hl(h,p){h.g?h.g.add(p):h.h=p}function fl(h,p){h.h&&h.h==p?h.h=null:h.g&&h.g.has(p)&&h.g.delete(p)}ul.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function dl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let p=h.i;for(const v of h.g.values())p=p.concat(v.G);return p}return B(h.i)}var gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Na(h,p){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const S=h[v].indexOf("=");let L,q=null;S>=0?(L=h[v].substring(0,S),q=h[v].substring(S+1)):L=h[v],p(L,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;h instanceof Tn?(this.l=h.l,je(this,h.j),this.o=h.o,this.g=h.g,_r(this,h.u),this.h=h.h,ml(this,vc(h.i)),this.m=h.m):h&&(p=String(h).match(gc))?(this.l=!1,je(this,p[1]||"",!0),this.o=_i(p[2]||""),this.g=_i(p[3]||"",!0),_r(this,p[4]),this.h=_i(p[5]||"",!0),ml(this,p[6]||"",!0),this.m=_i(p[7]||"")):(this.l=!1,this.i=new Tr(null,this.l))}Tn.prototype.toString=function(){const h=[];var p=this.j;p&&h.push(Rs(p,Oa,!0),":");var v=this.g;return(v||p=="file")&&(h.push("//"),(p=this.o)&&h.push(Rs(p,Oa,!0),"@"),h.push(Ui(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Rs(v,v.charAt(0)=="/"?gl:pc,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Rs(v,yc)),h.join("")},Tn.prototype.resolve=function(h){const p=be(this);let v=!!h.j;v?je(p,h.j):v=!!h.o,v?p.o=h.o:v=!!h.g,v?p.g=h.g:v=h.u!=null;var S=h.h;if(v)_r(p,h.u);else if(v=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var L=p.h.lastIndexOf("/");L!=-1&&(S=p.h.slice(0,L+1)+S)}if(L=S,L==".."||L==".")S="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){S=L.lastIndexOf("/",0)==0,L=L.split("/");const q=[];for(let et=0;et<L.length;){const It=L[et++];It=="."?S&&et==L.length&&q.push(""):It==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),S&&et==L.length&&q.push("")):(q.push(It),S=!0)}S=q.join("/")}else S=L}return v?p.h=S:v=h.i.toString()!=="",v?ml(p,vc(h.i)):v=!!h.m,v&&(p.m=h.m),p};function be(h){return new Tn(h)}function je(h,p,v){h.j=v?_i(p,!0):p,h.j&&(h.j=h.j.replace(/:$/,""))}function _r(h,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);h.u=p}else h.u=null}function ml(h,p,v){p instanceof Tr?(h.i=p,Pa(h.i,h.l)):(v||(p=Rs(p,vr)),h.i=new Tr(p,h.l))}function Qt(h,p,v){h.i.set(p,v)}function ws(h){return Qt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function _i(h,p){return h?p?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rs(h,p,v){return typeof h=="string"?(h=encodeURI(h).replace(p,hn),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Oa=/[#\/\?@]/g,pc=/[#\?:]/g,gl=/[#\?]/g,vr=/[#\?@]/g,yc=/#/g;function Tr(h,p){this.h=this.g=null,this.i=h||null,this.j=!!p}function fn(h){h.g||(h.g=new Map,h.h=0,h.i&&Na(h.i,function(p,v){h.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=Tr.prototype,s.add=function(h,p){fn(this),this.i=null,h=Er(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(p),this.h+=1,this};function _c(h,p){fn(h),p=Er(h,p),h.g.has(p)&&(h.i=null,h.h-=h.g.get(p).length,h.g.delete(p))}function pl(h,p){return fn(h),p=Er(h,p),h.g.has(p)}s.forEach=function(h,p){fn(this),this.g.forEach(function(v,S){v.forEach(function(L){h.call(p,L,S,this)},this)},this)};function yl(h,p){fn(h);let v=[];if(typeof p=="string")pl(h,p)&&(v=v.concat(h.g.get(Er(h,p))));else for(h=Array.from(h.g.values()),p=0;p<h.length;p++)v=v.concat(h[p]);return v}s.set=function(h,p){return fn(this),this.i=null,h=Er(this,h),pl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[p]),this.h+=1,this},s.get=function(h,p){return h?(h=yl(this,h),h.length>0?String(h[0]):p):p};function Ma(h,p,v){_c(h,p),v.length>0&&(h.i=null,h.g.set(Er(h,p),B(v)),h.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var v=p[S];const L=Ui(v);v=yl(this,v);for(let q=0;q<v.length;q++){let et=L;v[q]!==""&&(et+="="+Ui(v[q])),h.push(et)}}return this.i=h.join("&")};function vc(h){const p=new Tr;return p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),p}function Er(h,p){return p=String(p),h.j&&(p=p.toLowerCase()),p}function Pa(h,p){p&&!h.j&&(fn(h),h.i=null,h.g.forEach(function(v,S){const L=S.toLowerCase();S!=L&&(_c(this,S),Ma(this,L,v))},h)),h.j=p}function Jn(h,p){const v=new Yn;if(c.Image){const S=new Image;S.onload=T(On,v,"TestLoadImage: loaded",!0,p,S),S.onerror=T(On,v,"TestLoadImage: error",!1,p,S),S.onabort=T(On,v,"TestLoadImage: abort",!1,p,S),S.ontimeout=T(On,v,"TestLoadImage: timeout",!1,p,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else p(!1)}function _l(h,p){const v=new Yn,S=new AbortController,L=setTimeout(()=>{S.abort(),On(v,"TestPingServer: timeout",!1,p)},1e4);fetch(h,{signal:S.signal}).then(q=>{clearTimeout(L),q.ok?On(v,"TestPingServer: ok",!0,p):On(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),On(v,"TestPingServer: error",!1,p)})}function On(h,p,v,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(v)}catch{}}function Ar(){this.g=new ac}function vi(h){this.i=h.Sb||null,this.h=h.ab||!1}A(vi,oc),vi.prototype.g=function(){return new Cs(this.i,this.h)};function Cs(h,p){Te.call(this),this.H=h,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Cs,Te),s=Cs.prototype,s.open=function(h,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=p,this.readyState=1,Zn(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(p.body=h),(this.H||c).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ka(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ka(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var p=h.value?h.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!h.done}))&&(this.response=this.responseText+=p)}h.done?Sr(this):Zn(this),this.readyState==3&&ka(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Sr(this))},s.Na=function(h){this.g&&(this.response=h,Sr(this))},s.ga=function(){this.g&&Sr(this)};function Sr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zn(h)}s.setRequestHeader=function(h,p){this.A.append(h,p)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=p.next();return h.join(`\r
`)};function Zn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Mn(h){let p="";return Bt(h,function(v,S){p+=S,p+=":",p+=v,p+=`\r
`}),p}function Ds(h,p,v){t:{for(S in v){var S=!1;break t}S=!0}S||(v=Mn(v),typeof h=="string"?v!=null&&Ui(v):Qt(h,p,v))}function Wt(h){Te.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Wt,Te);var Ti=/^https?$/i,vl=["POST","PUT"];s=Wt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,p,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);p=p?p.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ll.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(h),!0),this.B=!1}catch(q){Vs(this,q);return}if(h=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)v.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())v.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),L=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(vl,p,void 0)>=0)||S||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,et]of v)this.g.setRequestHeader(q,et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(q){Vs(this,q)}};function Vs(h,p){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=p,h.o=5,Tl(h),zi(h)}function Tl(h){h.A||(h.A=!0,ke(h,"complete"),ke(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ke(this,"complete"),ke(this,"abort"),zi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),Wt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?xs(this):this.Xa())},s.Xa=function(){xs(this)};function xs(h){if(h.h&&typeof u<"u"){if(h.v&&Wn(h)==4)setTimeout(h.Ca.bind(h),0);else if(ke(h,"readystatechange"),Wn(h)==4){h.h=!1;try{const q=h.ca();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var S;if(S=q===0){let et=String(h.D).match(gc)[1]||null;!et&&c.self&&c.self.location&&(et=c.self.location.protocol.slice(0,-1)),S=!Ti.test(et?et.toLowerCase():"")}v=S}if(v)ke(h,"complete"),ke(h,"success");else{h.o=6;try{var L=Wn(h)>2?h.g.statusText:""}catch{L=""}h.l=L+" ["+h.ca()+"]",Tl(h)}}finally{zi(h)}}}}function zi(h,p){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,p||ke(h,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Wn(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var p=this.g.responseText;return h&&p.indexOf(h)==0&&(p=p.substring(h.length)),id(p)}};function Ge(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(h){const p={};h=(h.g&&Wn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(R(h[S]))continue;var v=fc(h[S]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=p[L]||[];p[L]=q,q.push(v)}Kt(p,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(h,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||p}function br(h){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,h),this.Za=Ei("retryDelaySeedMs",1e4,h),this.Ta=Ei("forwardChannelMaxRetries",2,h),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ul(h&&h.concurrentRequestLimit),this.Ba=new Ar,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=br.prototype,s.ka=8,s.I=1,s.connect=function(h,p,v,S){Ee(0),this.W=h,this.H=p||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=wc(this,null,this.W),Ai(this)};function El(h){if(La(h),h.I==3){var p=h.V++,v=be(h.J);if(Qt(v,"SID",h.M),Qt(v,"RID",p),Qt(v,"TYPE","terminate"),Ns(h,v),p=new Xn(h,h.j,p),p.M=2,p.A=ws(be(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=p.A,v=!0),v||(p.g=Rc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),di(p)}Ic(h)}function Ir(h){h.g&&(Sl(h),h.g.cancel(),h.g=null)}function La(h){Ir(h),h.v&&(c.clearTimeout(h.v),h.v=null),za(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ai(h){if(!cl(h.h)&&!h.m){h.m=!0;var p=h.Ea;bt||b(),_t||(bt(),_t=!0),w.add(p,h),h.D=0}}function Ua(h,p){return pi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=p.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ci(y(h.Ea,h,p),bc(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const L=new Xn(this,this.j,h);let q=this.o;if(this.U&&(q?(q=N(q),st(q,this.U)):q=this.U),this.u!==null||this.R||(L.J=q,q=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break e}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Tc(this,L,p),v=be(this.J),Qt(v,"RID",h),Qt(v,"CVER",22),this.G&&Qt(v,"X-HTTP-Session-Id",this.G),Ns(this,v),q&&(this.R?p="headers="+Ui(Mn(q))+"&"+p:this.u&&Ds(v,this.u,q)),hl(this.h,L),this.Ra&&Qt(v,"TYPE","init"),this.S?(Qt(v,"$req",p),Qt(v,"SID","null"),L.U=!0,fi(L,v,null)):fi(L,v,p),this.I=2}}else this.I==3&&(h?Al(this,h):this.i.length==0||cl(this.h)||Al(this))};function Al(h,p){var v;p?v=p.l:v=h.V++;const S=be(h.J);Qt(S,"SID",h.M),Qt(S,"RID",v),Qt(S,"AID",h.K),Ns(h,S),h.u&&h.o&&Ds(S,h.u,h.o),v=new Xn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),p&&(h.i=p.G.concat(h.i)),p=Tc(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),hl(h.h,v),fi(v,S,p)}function Ns(h,p){h.H&&Bt(h.H,function(v,S){Qt(p,S,v)}),h.l&&Bt({},function(v,S){Qt(p,S,v)})}function Tc(h,p,v){v=Math.min(h.i.length,v);const S=h.l?y(h.l.Ka,h.l,h):null;t:{var L=h.i;let It=-1;for(;;){const ye=["count="+v];It==-1?v>0?(It=L[0].g,ye.push("ofs="+It)):It=0:ye.push("ofs="+It);let Ft=!0;for(let le=0;le<v;le++){var q=L[le].g;const Pn=L[le].map;if(q-=It,q<0)It=Math.max(0,L[le].g-100),Ft=!1;else try{q="req"+q+"_"||"";try{var et=Pn instanceof Map?Pn:Object.entries(Pn);for(const[bi,ti]of et){let ei=ti;m(ti)&&(ei=yr(ti)),ye.push(q+bi+"="+encodeURIComponent(ei))}}catch(bi){throw ye.push(q+"type="+encodeURIComponent("_badmap")),bi}}catch{S&&S(Pn)}}if(Ft){et=ye.join("&");break t}}et=void 0}return h=h.i.splice(0,v),p.G=h,et}function Ec(h){if(!h.g&&!h.v){h.Y=1;var p=h.Da;bt||b(),_t||(bt(),_t=!0),w.add(p,h),h.A=0}}function Os(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ci(y(h.Da,h),bc(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Ac(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ci(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ee(10),Ir(this),Ac(this))};function Sl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ac(h){h.g=new Xn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var p=be(h.na);Qt(p,"RID","rpc"),Qt(p,"SID",h.M),Qt(p,"AID",h.K),Qt(p,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qt(p,"TO",h.ia),Qt(p,"TYPE","xmlhttp"),Ns(h,p),h.u&&h.o&&Ds(p,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=ws(be(p)),v.u=null,v.R=!0,Va(v,h)}s.Va=function(){this.C!=null&&(this.C=null,Ir(this),Os(this),Ee(19))};function za(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Sc(h,p){var v=null;if(h.g==p){za(h),Sl(h),h.g=null;var S=2}else if(yi(h.h,p))v=p.G,fl(h.h,p),S=1;else return;if(h.I!=0){if(p.o)if(S==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var L=h.D;S=Da(),ke(S,new ui(S,v)),Ai(h)}else Ec(h);else if(L=p.m,L==3||L==0&&p.X>0||!(S==1&&Ua(h,p)||S==2&&Os(h)))switch(v&&v.length>0&&(p=h.h,p.i=p.i.concat(v)),L){case 1:Si(h,5);break;case 4:Si(h,10);break;case 3:Si(h,6);break;default:Si(h,2)}}}function bc(h,p){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*p}function Si(h,p){if(h.j.info("Error code "+p),p==2){var v=y(h.bb,h),S=h.Ua;const L=!S;S=new Tn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||je(S,"https"),ws(S),L?Jn(S.toString(),v):_l(S.toString(),v)}else Ee(2);h.I=0,h.l&&h.l.pa(p),Ic(h),La(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))};function Ic(h){if(h.I=0,h.ja=[],h.l){const p=dl(h.h);(p.length!=0||h.i.length!=0)&&(Z(h.ja,p),Z(h.ja,h.i),h.h.i.length=0,B(h.i),h.i.length=0),h.l.oa()}}function wc(h,p,v){var S=v instanceof Tn?be(v):new Tn(v);if(S.g!="")p&&(S.g=p+"."+S.g),_r(S,S.u);else{var L=c.location;S=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const q=new Tn(null);S&&je(q,S),p&&(q.g=p),L&&_r(q,L),v&&(q.h=v),S=q}return v=h.G,p=h.wa,v&&p&&Qt(S,v,p),Qt(S,"VER",h.ka),Ns(h,S),S}function Rc(h,p,v){if(p&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=h.Aa&&!h.ma?new Wt(new vi({ab:v})):new Wt(h.ma),p.Fa(h.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cc(){}s=Cc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function wr(){}wr.prototype.g=function(h,p){return new an(h,p)};function an(h,p){Te.call(this),this.g=new br(p),this.l=h,this.h=p&&p.messageUrlParams||null,h=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(h?h["X-WebChannel-Content-Type"]=p.messageContentType:h={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(h?h["X-WebChannel-Client-Profile"]=p.sa:h={"X-WebChannel-Client-Profile":p.sa}),this.g.U=h,(h=p&&p.Qb)&&!R(h)&&(this.g.u=h),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!R(p)&&(this.g.G=p,h=this.h,h!==null&&p in h&&(h=this.h,p in h&&delete h[p])),this.j=new ji(this)}A(an,Te),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){El(this.g)},an.prototype.o=function(h){var p=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=yr(h),h=v);p.i.push(new Se(p.Ya++,h)),p.I==3&&Ai(p)},an.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,an.Z.N.call(this)};function Dc(h){He.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var p=h.__sm__;if(p){t:{for(const v in p){h=v;break t}h=void 0}(this.i=h)&&(h=this.i,p=p!==null&&h in p?p[h]:void 0),this.data=p}else this.data=h}A(Dc,He);function Vc(){xn.call(this),this.status=1}A(Vc,xn);function ji(h){this.g=h}A(ji,Cc),ji.prototype.ra=function(){ke(this.g,"a")},ji.prototype.qa=function(h){ke(this.g,new Dc(h))},ji.prototype.pa=function(h){ke(this.g,new Vc)},ji.prototype.oa=function(){ke(this.g,"b")},wr.prototype.createWebChannel=wr.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,fA=function(){return new wr},hA=function(){return Da()},cA=pe,Ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},bs.NO_ERROR=0,bs.TIMEOUT=8,bs.HTTP_ERROR=6,qh=bs,ol.COMPLETE="complete",uA=ol,lc.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",Te.prototype.listen=Te.prototype.J,du=lc,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,lA=Wt}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const WT="@firebase/firestore",tE="4.9.3";class $e{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$e.UNAUTHENTICATED=new $e(null),$e.GOOGLE_CREDENTIALS=new $e("google-credentials-uid"),$e.FIRST_PARTY=new $e("first-party-uid"),$e.MOCK_USER=new $e("mock-user");let Jo="12.7.0";const da=new np("@firebase/firestore");function So(){return da.logLevel}function tt(s,...t){if(da.logLevel<=Pt.DEBUG){const e=t.map(sp);da.debug(`Firestore (${Jo}): ${s}`,...e)}}function ln(s,...t){if(da.logLevel<=Pt.ERROR){const e=t.map(sp);da.error(`Firestore (${Jo}): ${s}`,...e)}}function ma(s,...t){if(da.logLevel<=Pt.WARN){const e=t.map(sp);da.warn(`Firestore (${Jo}): ${s}`,...e)}}function sp(s){if(typeof s=="string")return s;try{return(function(e){return JSON.stringify(e)})(s)}catch{return s}}function ut(s,t,e){let r="Unexpected state";typeof t=="string"?r=t:e=t,dA(s,r,e)}function dA(s,t,e){let r=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(e!==void 0)try{r+=" CONTEXT: "+JSON.stringify(e)}catch{r+=" CONTEXT: "+e}throw ln(r),new Error(r)}function ht(s,t,e,r){let o="Unexpected state";typeof e=="string"?o=e:r=e,s||dA(t,o,r)}function At(s,t){return s}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends dr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cs{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class mA{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e($e.UNAUTHENTICATED)))}shutdown(){}}class KR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class QR{constructor(t){this.t=t,this.currentUser=$e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ht(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,e(g)):Promise.resolve();let u=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new cs,t.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new cs)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht(typeof r.accessToken=="string",31837,{l:r}),new mA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ht(t===null||typeof t=="string",2055,{h:t}),new $e(t)}}class YR{constructor(t,e,r){this.P=t,this.T=e,this.I=r,this.type="FirstParty",this.user=$e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XR{constructor(t,e,r){this.P=t,this.T=e,this.I=r}getToken(){return Promise.resolve(new YR(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable((()=>e($e.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $R{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vi(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ht(this.o===void 0,3512);const r=u=>{u.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,tt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(ht(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new eE(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function JR(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<s;r++)e[r]=Math.floor(256*Math.random());return e}class ap{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=JR(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<e&&(r+=t.charAt(o[u]%62))}return r}}function Et(s,t){return s<t?-1:s>t?1:0}function wg(s,t){const e=Math.min(s.length,t.length);for(let r=0;r<e;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return hg(o)===hg(u)?Et(o,u):hg(o)?1:-1}return Et(s.length,t.length)}const ZR=55296,WR=57343;function hg(s){const t=s.charCodeAt(0);return t>=ZR&&t<=WR}function Po(s,t,e){return s.length===t.length&&s.every(((r,o)=>e(r,t[o])))}function gA(s){return s+"\0"}const nE="__name__";class Di{constructor(t,e,r){e===void 0?e=0:e>t.length&&ut(637,{offset:e,range:t.length}),r===void 0?r=t.length-e:r>t.length-e&&ut(1746,{length:r,range:t.length-e}),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return Di.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Di?t.forEach((r=>{e.push(r)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let o=0;o<r;o++){const u=Di.compareSegments(t.get(o),e.get(o));if(u!==0)return u}return Et(t.length,e.length)}static compareSegments(t,e){const r=Di.isNumericId(t),o=Di.isNumericId(e);return r&&!o?-1:!r&&o?1:r&&o?Di.extractNumericId(t).compare(Di.extractNumericId(e)):wg(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return us.fromString(t.substring(4,t.length-2))}}class Gt extends Di{construct(t,e,r){return new Gt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new nt(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter((o=>o.length>0)))}return new Gt(e)}static emptyPath(){return new Gt([])}}const t2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fe extends Di{construct(t,e,r){return new fe(t,e,r)}static isValidIdentifier(t){return t2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fe.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nE}static keyField(){return new fe([nE])}static fromServerFormat(t){const e=[];let r="",o=0;const u=()=>{if(r.length===0)throw new nt(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let c=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new nt(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new nt(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(c=!c,o++):m!=="."||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new nt(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fe(e)}static emptyPath(){return new fe([])}}class it{constructor(t){this.path=t}static fromPath(t){return new it(Gt.fromString(t))}static fromName(t){return new it(Gt.fromString(t).popFirst(5))}static empty(){return new it(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Gt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Gt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new it(new Gt(t.slice()))}}function pA(s,t,e){if(!e)throw new nt(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function e2(s,t,e,r){if(t===!0&&r===!0)throw new nt(K.INVALID_ARGUMENT,`${s} and ${e} cannot be used together.`)}function iE(s){if(!it.isDocumentKey(s))throw new nt(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rE(s){if(it.isDocumentKey(s))throw new nt(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function yA(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Nf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ut(12329,{type:typeof s})}function ar(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new nt(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Nf(s);throw new nt(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return s}function xe(s,t){const e={typeString:s};return t&&(e.value=t),e}function Qu(s,t){if(!yA(s))throw new nt(K.INVALID_ARGUMENT,"JSON must be an object");let e;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){e=`JSON missing required field: '${r}'`;break}const c=s[r];if(o&&typeof c!==o){e=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&c!==u.value){e=`Expected '${r}' field to equal '${u.value}'`;break}}if(e)throw new nt(K.INVALID_ARGUMENT,e);return!0}const sE=-62135596800,aE=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(t){return $t.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor((t-1e3*e)*aE);return new $t(e,r)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new nt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new nt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<sE)throw new nt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aE}_compareTo(t){return this.seconds===t.seconds?Et(this.nanoseconds,t.nanoseconds):Et(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Qu(t,$t._jsonSchema))return new $t(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-sE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:xe("string",$t._jsonSchemaVersion),seconds:xe("number"),nanoseconds:xe("number")};class gt{static fromTimestamp(t){return new gt(t)}static min(){return new gt(new $t(0,0))}static max(){return new gt(new $t(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vu=-1;class of{constructor(t,e,r,o){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=o}}function Rg(s){return s.fields.find((t=>t.kind===2))}function Ws(s){return s.fields.filter((t=>t.kind!==2))}of.UNKNOWN_ID=-1;class Fh{constructor(t,e){this.fieldPath=t,this.kind=e}}class xu{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new xu(0,Vn.min())}}function n2(s,t){const e=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=gt.fromTimestamp(r===1e9?new $t(e+1,0):new $t(e,r));return new Vn(o,it.empty(),t)}function _A(s){return new Vn(s.readTime,s.key,Vu)}class Vn{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Vn(gt.min(),it.empty(),Vu)}static max(){return new Vn(gt.max(),it.empty(),Vu)}}function op(s,t){let e=s.readTime.compareTo(t.readTime);return e!==0?e:(e=it.comparator(s.documentKey,t.documentKey),e!==0?e:Et(s.largestBatchId,t.largestBatchId))}const vA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Sa(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==vA)throw s;tt("LocalStore","Unexpectedly lost primary lease")}class k{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new k(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(e,u).next(r,o)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof k?e:k.resolve(e)}catch(e){return k.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):k.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):k.reject(e)}static resolve(t){return new k(((e,r)=>{e(t)}))}static reject(t){return new k(((e,r)=>{r(t)}))}static waitFor(t){return new k(((e,r)=>{let o=0,u=0,c=!1;t.forEach((m=>{++o,m.next((()=>{++u,c&&u===o&&e()}),(g=>r(g)))})),c=!0,u===o&&e()}))}static or(t){let e=k.resolve(!1);for(const r of t)e=e.next((o=>o?k.resolve(o):r()));return e}static forEach(t,e){const r=[];return t.forEach(((o,u)=>{r.push(e.call(this,o,u))})),this.waitFor(r)}static mapArray(t,e){return new k(((r,o)=>{const u=t.length,c=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;e(t[y]).next((T=>{c[y]=T,++m,m===u&&r(c)}),(T=>o(T)))}}))}static doWhile(t,e){return new k(((r,o)=>{const u=()=>{t()===!0?e().next((()=>{u()}),o):r()};u()}))}}const Cn="SimpleDb";class Of{static open(t,e,r,o){try{return new Of(e,t.transaction(o,r))}catch(u){throw new vu(e,u)}}constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.S=new cs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{e.error?this.S.reject(new vu(t,e.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=lp(r.target.error);this.S.reject(new vu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(tt(Cn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const e=this.transaction.objectStore(t);return new r2(e)}}class hs{static delete(t){return tt(Cn,"Removing database:",t),ea(G0().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!tA())return!1;if(hs.F())return!0;const t=Ue(),e=hs.M(t),r=0<e&&e<10,o=EA(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(t,e){return t.store(e)}static M(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,e,r){this.name=t,this.version=e,this.N=r,this.B=null,hs.M(Ue())===12.2&&ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(tt(Cn,"Opening database:",this.name),this.db=await new Promise(((e,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const c=u.target.result;e(c)},o.onblocked=()=>{r(new vu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const c=u.target.error;c.name==="VersionError"?r(new nt(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new nt(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new vu(t,c))},o.onupgradeneeded=u=>{tt(Cn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const c=u.target.result;this.N.k(c,o.transaction,u.oldVersion,this.version).next((()=>{tt(Cn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,r,o){const u=e==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(t);const m=Of.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),k.reject(y)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,y=g.name!=="FirebaseError"&&c<3;if(tt(Cn,"Transaction failed with error:",g.message,"Retrying:",y),this.close(),!y)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function EA(s){const t=s.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}class i2{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return ea(this.U.delete())}}class vu extends nt{constructor(t,e){super(K.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function ys(s){return s.name==="IndexedDbTransactionError"}class r2{constructor(t){this.store=t}put(t,e){let r;return e!==void 0?(tt(Cn,"PUT",this.store.name,t,e),r=this.store.put(e,t)):(tt(Cn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ea(r)}add(t){return tt(Cn,"ADD",this.store.name,t,t),ea(this.store.add(t))}get(t){return ea(this.store.get(t)).next((e=>(e===void 0&&(e=null),tt(Cn,"GET",this.store.name,t,e),e)))}delete(t){return tt(Cn,"DELETE",this.store.name,t),ea(this.store.delete(t))}count(){return tt(Cn,"COUNT",this.store.name),ea(this.store.count())}J(t,e){const r=this.options(t,e),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new k(((c,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{c(g.target.result)}}))}{const u=this.cursor(r),c=[];return this.H(u,((m,g)=>{c.push(g)})).next((()=>c))}}Y(t,e){const r=this.store.getAll(t,e===null?void 0:e);return new k(((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}}))}Z(t,e){tt(Cn,"DELETE ALL",this.store.name);const r=this.options(t,e);r.X=!1;const o=this.cursor(r);return this.H(o,((u,c,m)=>m.delete()))}ee(t,e){let r;e?r=t:(r={},e=t);const o=this.cursor(r);return this.H(o,e)}te(t){const e=this.cursor({});return new k(((r,o)=>{e.onerror=u=>{const c=lp(u.target.error);o(c)},e.onsuccess=u=>{const c=u.target.result;c?t(c.primaryKey,c.value).next((m=>{m?c.continue():r()})):r()}}))}H(t,e){const r=[];return new k(((o,u)=>{t.onerror=c=>{u(c.target.error)},t.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const g=new i2(m),y=e(m.primaryKey,m.value,g);if(y instanceof k){const T=y.catch((A=>(g.done(),k.reject(A))));r.push(T)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>k.waitFor(r)))}options(t,e){let r;return t!==void 0&&(typeof t=="string"?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function ea(s){return new k(((t,e)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=lp(r.target.error);e(o)}}))}let oE=!1;function lp(s){const t=hs.M(Ue());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(e)>=0){const r=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oE||(oE=!0,setTimeout((()=>{throw r}),0)),r}}return s}const Tu="IndexBackfiller";class s2{constructor(t,e){this.asyncQueue=t,this.ne=e,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){tt(Tu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const e=await this.ne.ie();tt(Tu,`Documents written: ${e}`)}catch(e){ys(e)?tt(Tu,"Ignoring IndexedDB error during index backfill: ",e):await Sa(e)}await this.re(6e4)}))}}class a2{constructor(t,e){this.localStore=t,this.persistence=e}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.se(e,t)))}se(t,e){const r=new Set;let o=e,u=!0;return k.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((c=>{if(c!==null&&!r.has(c))return tt(Tu,`Processing collection: ${c}`),this.oe(t,c,o).next((m=>{o-=m,r.add(c)}));u=!1})))).next((()=>e-o))}oe(t,e,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((o=>this.localStore.localDocuments.getNextDocuments(t,e,o,r).next((u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(t,c).next((()=>this._e(o,u))).next((m=>(tt(Tu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,e,m)))).next((()=>c.size))}))))}_e(t,e){let r=t;return e.changes.forEach(((o,u)=>{const c=_A(u);op(c,r)>0&&(r=c)})),new Vn(r.readTime,r.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Gn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>e.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Gn.ce=-1;const aa=-1;function Mf(s){return s==null}function Nu(s){return s===0&&1/s==-1/0}function o2(s){return typeof s=="number"&&Number.isInteger(s)&&!Nu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const lf="";function nn(s){let t="";for(let e=0;e<s.length;e++)t.length>0&&(t=lE(t)),t=l2(s.get(e),t);return lE(t)}function l2(s,t){let e=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":e+="";break;case lf:e+="";break;default:e+=u}}return e}function lE(s){return s+lf+""}function xi(s){const t=s.length;if(ht(t>=2,64408,{path:s}),t===2)return ht(s.charAt(0)===lf&&s.charAt(1)==="",56145,{path:s}),Gt.emptyPath();const e=t-2,r=[];let o="";for(let u=0;u<t;){const c=s.indexOf(lf,u);switch((c<0||c>e)&&ut(50515,{path:s}),s.charAt(c+1)){case"":const m=s.substring(u,c);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,c),o+="\0";break;case"":o+=s.substring(u,c+1);break;default:ut(61167,{path:s})}u=c+2}return new Gt(r)}const ta="remoteDocuments",Yu="owner",yo="owner",Ou="mutationQueues",u2="userId",si="mutations",uE="batchId",sa="userMutationsIndex",cE=["userId","batchId"];function Hh(s,t){return[s,nn(t)]}function AA(s,t,e){return[s,nn(t),e]}const c2={},ko="documentMutations",uf="remoteDocumentsV14",h2=["prefixPath","collectionGroup","readTime","documentId"],Gh="documentKeyIndex",f2=["prefixPath","collectionGroup","documentId"],SA="collectionGroupIndex",d2=["collectionGroup","readTime","prefixPath","documentId"],Mu="remoteDocumentGlobal",Cg="remoteDocumentGlobalKey",Lo="targets",bA="queryTargetsIndex",m2=["canonicalId","targetId"],Uo="targetDocuments",g2=["targetId","path"],up="documentTargetsIndex",p2=["path","targetId"],cf="targetGlobalKey",oa="targetGlobal",Pu="collectionParents",y2=["collectionId","parent"],zo="clientMetadata",_2="clientId",Pf="bundles",v2="bundleId",kf="namedQueries",T2="name",cp="indexConfiguration",E2="indexId",Dg="collectionGroupIndex",A2="collectionGroup",Eu="indexState",S2=["indexId","uid"],IA="sequenceNumberIndex",b2=["uid","sequenceNumber"],Au="indexEntries",I2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wA="documentKeyIndex",w2=["indexId","uid","orderedDocumentKey"],Lf="documentOverlays",R2=["userId","collectionPath","documentId"],Vg="collectionPathOverlayIndex",C2=["userId","collectionPath","largestBatchId"],RA="collectionGroupOverlayIndex",D2=["userId","collectionGroup","largestBatchId"],hp="globals",V2="name",CA=[Ou,si,ko,ta,Lo,Yu,oa,Uo,zo,Mu,Pu,Pf,kf],x2=[...CA,Lf],DA=[Ou,si,ko,uf,Lo,Yu,oa,Uo,zo,Mu,Pu,Pf,kf,Lf],VA=DA,fp=[...VA,cp,Eu,Au],N2=fp,xA=[...fp,hp],O2=xA;class xg extends TA{constructor(t,e){super(),this.le=t,this.currentSequenceNumber=e}}function ze(s,t){const e=At(s);return hs.O(e.le,t)}function hE(s){let t=0;for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t++;return t}function _s(s,t){for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&t(e,s[e])}function NA(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}class he{constructor(t,e){this.comparator=t,this.root=e||Je.EMPTY}insert(t,e){return new he(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(t){return new he(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Je.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return e+r.left.size;o<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,r)=>(t(e,r),!1)))}toString(){const t=[];return this.inorderTraversal(((e,r)=>(t.push(`${e}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ph(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ph(this.root,t,this.comparator,!0)}}class Ph{constructor(t,e,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=e?r(t.key,e):1,e&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Je{constructor(t,e,r,o,u){this.key=t,this.value=e,this.color=r??Je.RED,this.left=o??Je.EMPTY,this.right=u??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,o,u){return new Je(t??this.key,e??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,e,r),null):u===0?o.copy(null,e,null,null,null):o.copy(null,null,null,null,o.right.insert(t,e,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,o=this;if(e(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,e),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),e(t,o.key)===0){if(o.right.isEmpty())return Je.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,e))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ut(27949);return t+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(t,e,r,o,u){return this}insert(t,e,r){return new Je(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zt{constructor(t){this.comparator=t,this.data=new he(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,r)=>(t(e),!1)))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;e(o.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new fE(this.data.getIterator())}getIteratorFrom(t){return new fE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((r=>{e=e.add(r)})),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class fE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _o(s){return s.hasNext()?s.getNext():void 0}class _n{constructor(t){this.fields=t,t.sort(fe.comparator)}static empty(){return new _n([])}unionWith(t){let e=new Zt(fe.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new _n(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Po(this.fields,t.fields,((e,r)=>e.isEqual(r)))}}class OA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Oe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new OA("Invalid base64 string: "+u):u}})(t);return new Oe(e)}static fromUint8Array(t){const e=(function(o){let u="";for(let c=0;c<o.length;++c)u+=String.fromCharCode(o[c]);return u})(t);return new Oe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Et(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Oe.EMPTY_BYTE_STRING=new Oe("");const M2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(s){if(ht(!!s,39018),typeof s=="string"){let t=0;const e=M2.exec(s);if(ht(!!e,46558,{timestamp:s}),e[1]){let o=e[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ce(s.seconds),nanos:ce(s.nanos)}}function ce(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ur(s){return typeof s=="string"?Oe.fromBase64String(s):Oe.fromUint8Array(s)}const MA="server_timestamp",PA="__type__",kA="__previous_value__",LA="__local_write_time__";function dp(s){return(s?.mapValue?.fields||{})[PA]?.stringValue===MA}function Uf(s){const t=s.mapValue.fields[kA];return dp(t)?Uf(t):t}function ku(s){const t=lr(s.mapValue.fields[LA].timestampValue);return new $t(t.seconds,t.nanos)}class P2{constructor(t,e,r,o,u,c,m,g,y,T){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const hf="(default)";class ga{constructor(t,e){this.projectId=t,this.database=e||hf}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database===hf}isEqual(t){return t instanceof ga&&t.projectId===this.projectId&&t.database===this.database}}const mp="__type__",UA="__max__",rs={mapValue:{fields:{__type__:{stringValue:UA}}}},gp="__vector__",Bo="value",Kh={nullValue:"NULL_VALUE"};function ds(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?dp(s)?4:zA(s)?9007199254740991:zf(s)?10:11:ut(28295,{value:s})}function Li(s,t){if(s===t)return!0;const e=ds(s);if(e!==ds(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return ku(s).isEqual(ku(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const c=lr(o.timestampValue),m=lr(u.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return ur(o.bytesValue).isEqual(ur(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return ce(o.geoPointValue.latitude)===ce(u.geoPointValue.latitude)&&ce(o.geoPointValue.longitude)===ce(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ce(o.integerValue)===ce(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const c=ce(o.doubleValue),m=ce(u.doubleValue);return c===m?Nu(c)===Nu(m):isNaN(c)&&isNaN(m)}return!1})(s,t);case 9:return Po(s.arrayValue.values||[],t.arrayValue.values||[],Li);case 10:case 11:return(function(o,u){const c=o.mapValue.fields||{},m=u.mapValue.fields||{};if(hE(c)!==hE(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Li(c[g],m[g])))return!1;return!0})(s,t);default:return ut(52216,{left:s})}}function Lu(s,t){return(s.values||[]).find((e=>Li(e,t)))!==void 0}function ms(s,t){if(s===t)return 0;const e=ds(s),r=ds(t);if(e!==r)return Et(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Et(s.booleanValue,t.booleanValue);case 2:return(function(u,c){const m=ce(u.integerValue||u.doubleValue),g=ce(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return dE(s.timestampValue,t.timestampValue);case 4:return dE(ku(s),ku(t));case 5:return wg(s.stringValue,t.stringValue);case 6:return(function(u,c){const m=ur(u),g=ur(c);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,c){const m=u.split("/"),g=c.split("/");for(let y=0;y<m.length&&y<g.length;y++){const T=Et(m[y],g[y]);if(T!==0)return T}return Et(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,c){const m=Et(ce(u.latitude),ce(c.latitude));return m!==0?m:Et(ce(u.longitude),ce(c.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return mE(s.arrayValue,t.arrayValue);case 10:return(function(u,c){const m=u.fields||{},g=c.fields||{},y=m[Bo]?.arrayValue,T=g[Bo]?.arrayValue,A=Et(y?.values?.length||0,T?.values?.length||0);return A!==0?A:mE(y,T)})(s.mapValue,t.mapValue);case 11:return(function(u,c){if(u===rs.mapValue&&c===rs.mapValue)return 0;if(u===rs.mapValue)return 1;if(c===rs.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=c.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const I=wg(g[A],T[A]);if(I!==0)return I;const B=ms(m[g[A]],y[T[A]]);if(B!==0)return B}return Et(g.length,T.length)})(s.mapValue,t.mapValue);default:throw ut(23264,{he:e})}}function dE(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return Et(s,t);const e=lr(s),r=lr(t),o=Et(e.seconds,r.seconds);return o!==0?o:Et(e.nanos,r.nanos)}function mE(s,t){const e=s.values||[],r=t.values||[];for(let o=0;o<e.length&&o<r.length;++o){const u=ms(e[o],r[o]);if(u)return u}return Et(e.length,r.length)}function jo(s){return Ng(s)}function Ng(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(e){const r=lr(e);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(e){return ur(e).toBase64()})(s.bytesValue):"referenceValue"in s?(function(e){return it.fromName(e).toString()})(s.referenceValue):"geoPointValue"in s?(function(e){return`geo(${e.latitude},${e.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(e){let r="[",o=!0;for(const u of e.values||[])o?o=!1:r+=",",r+=Ng(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(e){const r=Object.keys(e.fields||{}).sort();let o="{",u=!0;for(const c of r)u?u=!1:o+=",",o+=`${c}:${Ng(e.fields[c])}`;return o+"}"})(s.mapValue):ut(61005,{value:s})}function Qh(s){switch(ds(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Uf(s);return t?16+Qh(t):16;case 5:return 2*s.stringValue.length;case 6:return ur(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+Qh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return _s(r.fields,((u,c)=>{o+=u.length+Qh(c)})),o})(s.mapValue);default:throw ut(13486,{value:s})}}function Uu(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function Og(s){return!!s&&"integerValue"in s}function zu(s){return!!s&&"arrayValue"in s}function gE(s){return!!s&&"nullValue"in s}function pE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Yh(s){return!!s&&"mapValue"in s}function zf(s){return(s?.mapValue?.fields||{})[mp]?.stringValue===gp}function Su(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return _s(s.mapValue.fields,((e,r)=>t.mapValue.fields[e]=Su(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(s.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Su(s.arrayValue.values[e]);return t}return{...s}}function zA(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===UA}const BA={mapValue:{fields:{[mp]:{stringValue:gp},[Bo]:{arrayValue:{}}}}};function k2(s){return"nullValue"in s?Kh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Uu(ga.empty(),it.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?zf(s)?BA:{mapValue:{}}:ut(35942,{value:s})}function L2(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Uu(ga.empty(),it.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?BA:"mapValue"in s?zf(s)?{mapValue:{}}:rs:ut(61959,{value:s})}function yE(s,t){const e=ms(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function _E(s,t){const e=ms(s.value,t.value);return e!==0?e:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}class en{constructor(t){this.value=t}static empty(){return new en({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Yh(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Su(e)}setAll(t){let e=fe.emptyPath(),r={},o=[];t.forEach(((c,m)=>{if(!e.isImmediateParentOf(m)){const g=this.getFieldsMap(e);this.applyChanges(g,r,o),r={},o=[],e=m.popLast()}c?r[m.lastSegment()]=Su(c):o.push(m.lastSegment())}));const u=this.getFieldsMap(e);this.applyChanges(u,r,o)}delete(t){const e=this.field(t.popLast());Yh(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Li(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=e.mapValue.fields[t.get(r)];Yh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=o),e=o}return e.mapValue.fields}applyChanges(t,e,r){_s(e,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new en(Su(this.value))}}function jA(s){const t=[];return _s(s.fields,((e,r)=>{const o=new fe([e]);if(Yh(r)){const u=jA(r.mapValue).fields;if(u.length===0)t.push(o);else for(const c of u)t.push(o.child(c))}else t.push(o)})),new _n(t)}class ge{constructor(t,e,r,o,u,c,m){this.key=t,this.documentType=e,this.version=r,this.readTime=o,this.createTime=u,this.data=c,this.documentState=m}static newInvalidDocument(t){return new ge(t,0,gt.min(),gt.min(),gt.min(),en.empty(),0)}static newFoundDocument(t,e,r,o){return new ge(t,1,e,gt.min(),r,o,0)}static newNoDocument(t,e){return new ge(t,2,e,gt.min(),gt.min(),en.empty(),0)}static newUnknownDocument(t,e){return new ge(t,3,e,gt.min(),gt.min(),en.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ge&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qo{constructor(t,e){this.position=t,this.inclusive=e}}function vE(s,t,e){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],c=s.position[o];if(u.field.isKeyField()?r=it.comparator(it.fromName(c.referenceValue),e.key):r=ms(c,e.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function TE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let e=0;e<s.position.length;e++)if(!Li(s.position[e],t.position[e]))return!1;return!0}class Bu{constructor(t,e="asc"){this.field=t,this.dir=e}}function U2(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}class qA{}class kt extends qA{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new z2(t,e,r):e==="array-contains"?new q2(t,r):e==="in"?new YA(t,r):e==="not-in"?new F2(t,r):e==="array-contains-any"?new H2(t,r):new kt(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new B2(t,r):new j2(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(ms(e,this.value)):e!==null&&ds(this.value)===ds(e)&&this.matchesComparison(ms(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends qA{constructor(t,e){super(),this.filters=t,this.op=e,this.Pe=null}static create(t,e){return new Jt(t,e)}matches(t){return Fo(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fo(s){return s.op==="and"}function Mg(s){return s.op==="or"}function pp(s){return FA(s)&&Fo(s)}function FA(s){for(const t of s.filters)if(t instanceof Jt)return!1;return!0}function Pg(s){if(s instanceof kt)return s.field.canonicalString()+s.op.toString()+jo(s.value);if(pp(s))return s.filters.map((t=>Pg(t))).join(",");{const t=s.filters.map((e=>Pg(e))).join(",");return`${s.op}(${t})`}}function HA(s,t){return s instanceof kt?(function(r,o){return o instanceof kt&&r.op===o.op&&r.field.isEqual(o.field)&&Li(r.value,o.value)})(s,t):s instanceof Jt?(function(r,o){return o instanceof Jt&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,c,m)=>u&&HA(c,o.filters[m])),!0):!1})(s,t):void ut(19439)}function GA(s,t){const e=s.filters.concat(t);return Jt.create(e,s.op)}function KA(s){return s instanceof kt?(function(e){return`${e.field.canonicalString()} ${e.op} ${jo(e.value)}`})(s):s instanceof Jt?(function(e){return e.op.toString()+" {"+e.getFilters().map(KA).join(" ,")+"}"})(s):"Filter"}class z2 extends kt{constructor(t,e,r){super(t,e,r),this.key=it.fromName(r.referenceValue)}matches(t){const e=it.comparator(t.key,this.key);return this.matchesComparison(e)}}class B2 extends kt{constructor(t,e){super(t,"in",e),this.keys=QA("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class j2 extends kt{constructor(t,e){super(t,"not-in",e),this.keys=QA("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function QA(s,t){return(t.arrayValue?.values||[]).map((e=>it.fromName(e.referenceValue)))}class q2 extends kt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return zu(e)&&Lu(e.arrayValue,this.value)}}class YA extends kt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Lu(this.value.arrayValue,e)}}class F2 extends kt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!Lu(this.value.arrayValue,e)}}class H2 extends kt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!zu(e)||!e.arrayValue.values)&&e.arrayValue.values.some((r=>Lu(this.value.arrayValue,r)))}}class G2{constructor(t,e=null,r=[],o=[],u=null,c=null,m=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.Te=null}}function kg(s,t=null,e=[],r=[],o=null,u=null,c=null){return new G2(s,t,e,r,o,u,c)}function pa(s){const t=At(s);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((r=>Pg(r))).join(","),e+="|ob:",e+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),Mf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((r=>jo(r))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((r=>jo(r))).join(",")),t.Te=e}return t.Te}function Xu(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<s.orderBy.length;e++)if(!U2(s.orderBy[e],t.orderBy[e]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let e=0;e<s.filters.length;e++)if(!HA(s.filters[e],t.filters[e]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!TE(s.startAt,t.startAt)&&TE(s.endAt,t.endAt)}function ff(s){return it.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function df(s,t){return s.filters.filter((e=>e instanceof kt&&e.field.isEqual(t)))}function EE(s,t,e){let r=Kh,o=!0;for(const u of df(s,t)){let c=Kh,m=!0;switch(u.op){case"<":case"<=":c=k2(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=Kh}yE({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];yE({value:r,inclusive:o},{value:c,inclusive:e.inclusive})<0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}function AE(s,t,e){let r=rs,o=!0;for(const u of df(s,t)){let c=rs,m=!0;switch(u.op){case">=":case">":c=L2(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=rs}_E({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(e!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const c=e.position[u];_E({value:r,inclusive:o},{value:c,inclusive:e.inclusive})>0&&(r=c,o=e.inclusive);break}}return{value:r,inclusive:o}}class Zo{constructor(t,e=null,r=[],o=[],u=null,c="F",m=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function K2(s,t,e,r,o,u,c,m){return new Zo(s,t,e,r,o,u,c,m)}function Bf(s){return new Zo(s)}function SE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function XA(s){return s.collectionGroup!==null}function bu(s){const t=At(s);if(t.Ie===null){t.Ie=[];const e=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),e.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Zt(fe.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{e.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Bu(u,r))})),e.has(fe.keyField().canonicalString())||t.Ie.push(new Bu(fe.keyField(),r))}return t.Ie}function Kn(s){const t=At(s);return t.Ee||(t.Ee=Q2(t,bu(s))),t.Ee}function Q2(s,t){if(s.limitType==="F")return kg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Bu(o.field,u)}));const e=s.endAt?new qo(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new qo(s.startAt.position,s.startAt.inclusive):null;return kg(s.path,s.collectionGroup,t,s.filters,s.limit,e,r)}}function Lg(s,t){const e=s.filters.concat([t]);return new Zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),e,s.limit,s.limitType,s.startAt,s.endAt)}function Ug(s,t,e){return new Zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,e,s.startAt,s.endAt)}function jf(s,t){return Xu(Kn(s),Kn(t))&&s.limitType===t.limitType}function $A(s){return`${pa(Kn(s))}|lt:${s.limitType}`}function bo(s){return`Query(target=${(function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map((o=>KA(o))).join(", ")}]`),Mf(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((o=>jo(o))).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((o=>jo(o))).join(",")),`Target(${r})`})(Kn(s))}; limitType=${s.limitType})`}function $u(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):it.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of bu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(c,m,g){const y=vE(c,m,g);return c.inclusive?y<=0:y<0})(r.startAt,bu(r),o)||r.endAt&&!(function(c,m,g){const y=vE(c,m,g);return c.inclusive?y>=0:y>0})(r.endAt,bu(r),o))})(s,t)}function Y2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function JA(s){return(t,e)=>{let r=!1;for(const o of bu(s)){const u=X2(o,t,e);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function X2(s,t,e){const r=s.field.isKeyField()?it.comparator(t.key,e.key):(function(u,c,m){const g=c.data.field(u),y=m.data.field(u);return g!==null&&y!==null?ms(g,y):ut(42886)})(s.field,t,e);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ut(19790,{direction:s.dir})}}class mr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,e]);o.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[e]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){_s(this.inner,((e,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return NA(this.inner)}size(){return this.innerSize}}const $2=new he(it.comparator);function Dn(){return $2}const ZA=new he(it.comparator);function mu(...s){let t=ZA;for(const e of s)t=t.insert(e.key,e);return t}function WA(s){let t=ZA;return s.forEach(((e,r)=>t=t.insert(e,r.overlayedDocument))),t}function Ni(){return Iu()}function tS(){return Iu()}function Iu(){return new mr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const J2=new he(it.comparator),Z2=new Zt(it.comparator);function Vt(...s){let t=Z2;for(const e of s)t=t.add(e);return t}const W2=new Zt(Et);function tC(){return W2}function yp(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nu(t)?"-0":t}}function eS(s){return{integerValue:""+s}}function eC(s,t){return o2(t)?eS(t):yp(s,t)}class qf{constructor(){this._=void 0}}function nC(s,t,e){return s instanceof ju?(function(o,u){const c={fields:{[PA]:{stringValue:MA},[LA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&dp(u)&&(u=Uf(u)),u&&(c.fields[kA]=u),{mapValue:c}})(e,t):s instanceof Ho?iS(s,t):s instanceof Go?rS(s,t):(function(o,u){const c=nS(o,u),m=bE(c)+bE(o.Ae);return Og(c)&&Og(o.Ae)?eS(m):yp(o.serializer,m)})(s,t)}function iC(s,t,e){return s instanceof Ho?iS(s,t):s instanceof Go?rS(s,t):e}function nS(s,t){return s instanceof qu?(function(r){return Og(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class ju extends qf{}class Ho extends qf{constructor(t){super(),this.elements=t}}function iS(s,t){const e=sS(t);for(const r of s.elements)e.some((o=>Li(o,r)))||e.push(r);return{arrayValue:{values:e}}}class Go extends qf{constructor(t){super(),this.elements=t}}function rS(s,t){let e=sS(t);for(const r of s.elements)e=e.filter((o=>!Li(o,r)));return{arrayValue:{values:e}}}class qu extends qf{constructor(t,e){super(),this.serializer=t,this.Ae=e}}function bE(s){return ce(s.integerValue||s.doubleValue)}function sS(s){return zu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class rC{constructor(t,e){this.field=t,this.transform=e}}function sC(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Ho&&o instanceof Ho||r instanceof Go&&o instanceof Go?Po(r.elements,o.elements,Li):r instanceof qu&&o instanceof qu?Li(r.Ae,o.Ae):r instanceof ju&&o instanceof ju})(s.transform,t.transform)}class aC{constructor(t,e){this.version=t,this.transformResults=e}}class un{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new un}static exists(t){return new un(void 0,t)}static updateTime(t){return new un(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Xh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Ff{}function aS(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Hf(s.key,un.none()):new Wo(s.key,s.data,un.none());{const e=s.data,r=en.empty();let o=new Zt(fe.comparator);for(let u of t.fields)if(!o.has(u)){let c=e.field(u);c===null&&u.length>1&&(u=u.popLast(),c=e.field(u)),c===null?r.delete(u):r.set(u,c),o=o.add(u)}return new gr(s.key,r,new _n(o.toArray()),un.none())}}function oC(s,t,e){s instanceof Wo?(function(o,u,c){const m=o.value.clone(),g=wE(o.fieldTransforms,u,c.transformResults);m.setAll(g),u.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,t,e):s instanceof gr?(function(o,u,c){if(!Xh(o.precondition,u))return void u.convertToUnknownDocument(c.version);const m=wE(o.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(oS(o)),g.setAll(m),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,t,e):(function(o,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function wu(s,t,e,r){return s instanceof Wo?(function(u,c,m,g){if(!Xh(u.precondition,c))return m;const y=u.value.clone(),T=RE(u.fieldTransforms,g,c);return y.setAll(T),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(s,t,e,r):s instanceof gr?(function(u,c,m,g){if(!Xh(u.precondition,c))return m;const y=RE(u.fieldTransforms,g,c),T=c.data;return T.setAll(oS(u)),T.setAll(y),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,t,e,r):(function(u,c,m){return Xh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,t,e)}function lC(s,t){let e=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=nS(r.transform,o||null);u!=null&&(e===null&&(e=en.empty()),e.set(r.field,u))}return e||null}function IE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Po(r,o,((u,c)=>sC(u,c)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class Wo extends Ff{constructor(t,e,r,o=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class gr extends Ff{constructor(t,e,r,o,u=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function oS(s){const t=new Map;return s.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const r=s.data.field(e);t.set(e,r)}})),t}function wE(s,t,e){const r=new Map;ht(s.length===e.length,32656,{Re:e.length,Ve:s.length});for(let o=0;o<e.length;o++){const u=s[o],c=u.transform,m=t.data.field(u.field);r.set(u.field,iC(c,m,e[o]))}return r}function RE(s,t,e){const r=new Map;for(const o of s){const u=o.transform,c=e.data.field(o.field);r.set(o.field,nC(u,c,t))}return r}class Hf extends Ff{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lS extends Ff{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _p{constructor(t,e,r,o){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&oC(u,t,r[o])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=wu(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=wu(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=tS();return this.mutations.forEach((o=>{const u=t.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=e.has(o.key)?null:m;const g=aS(c,m);g!==null&&r.set(o.key,g),c.isValidDocument()||c.convertToNoDocument(gt.min())})),r}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Vt())}isEqual(t){return this.batchId===t.batchId&&Po(this.mutations,t.mutations,((e,r)=>IE(e,r)))&&Po(this.baseMutations,t.baseMutations,((e,r)=>IE(e,r)))}}class vp{constructor(t,e,r,o){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=o}static from(t,e,r){ht(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return J2})();const u=t.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new vp(t,e,r,o)}}class Tp{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class uC{constructor(t,e){this.count=t,this.unchangedNames=e}}var De,zt;function cC(s){switch(s){case K.OK:return ut(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ut(15467,{code:s})}}function uS(s){if(s===void 0)return ln("GRPC error has no .code"),K.UNKNOWN;switch(s){case De.OK:return K.OK;case De.CANCELLED:return K.CANCELLED;case De.UNKNOWN:return K.UNKNOWN;case De.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case De.INTERNAL:return K.INTERNAL;case De.UNAVAILABLE:return K.UNAVAILABLE;case De.UNAUTHENTICATED:return K.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case De.NOT_FOUND:return K.NOT_FOUND;case De.ALREADY_EXISTS:return K.ALREADY_EXISTS;case De.PERMISSION_DENIED:return K.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case De.ABORTED:return K.ABORTED;case De.OUT_OF_RANGE:return K.OUT_OF_RANGE;case De.UNIMPLEMENTED:return K.UNIMPLEMENTED;case De.DATA_LOSS:return K.DATA_LOSS;default:return ut(39323,{code:s})}}(zt=De||(De={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function hC(){return new TextEncoder}const fC=new us([4294967295,4294967295],0);function CE(s){const t=hC().encode(s),e=new oA;return e.update(t),new Uint8Array(e.digest())}function DE(s){const t=new DataView(s.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new us([e,r],0),new us([o,u],0)]}class Ep{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new gu(`Invalid padding: ${e}`);if(r<0)throw new gu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new gu(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new gu(`Invalid padding when bitmap length is 0: ${e}`);this.ge=8*t.length-e,this.pe=us.fromNumber(this.ge)}ye(t,e,r){let o=t.add(e.multiply(us.fromNumber(r)));return o.compare(fC)===1&&(o=new us([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const e=CE(t),[r,o]=DE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);if(!this.we(c))return!1}return!0}static create(t,e,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Ep(u,o,e);return r.forEach((m=>c.insert(m))),c}insert(t){if(this.ge===0)return;const e=CE(t),[r,o]=DE(e);for(let u=0;u<this.hashCount;u++){const c=this.ye(r,o,u);this.Se(c)}}Se(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gf{constructor(t,e,r,o,u){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const o=new Map;return o.set(t,Ju.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Gf(gt.min(),o,new he(Et),Dn(),Vt())}}class Ju{constructor(t,e,r,o,u){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new Ju(r,e,Vt(),Vt(),Vt())}}class $h{constructor(t,e,r,o){this.be=t,this.removedTargetIds=e,this.key=r,this.De=o}}class cS{constructor(t,e){this.targetId=t,this.Ce=e}}class hS{constructor(t,e,r=Oe.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=o}}class VE{constructor(){this.ve=0,this.Fe=xE(),this.Me=Oe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Vt(),e=Vt(),r=Vt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:e=e.add(o);break;case 1:r=r.add(o);break;default:ut(38017,{changeType:u})}})),new Ju(this.Me,this.xe,t,e,r)}qe(){this.Oe=!1,this.Fe=xE()}Qe(t,e){this.Oe=!0,this.Fe=this.Fe.insert(t,e)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dC{constructor(t){this.Ge=t,this.ze=new Map,this.je=Dn(),this.Je=kh(),this.He=kh(),this.Ye=new he(Et)}Ze(t){for(const e of t.be)t.De&&t.De.isFoundDocument()?this.Xe(e,t.De):this.et(e,t.key,t.De);for(const e of t.removedTargetIds)this.et(e,t.key,t.De)}tt(t){this.forEachTarget(t,(e=>{const r=this.nt(e);switch(t.state){case 0:this.rt(e)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(e);break;case 3:this.rt(e)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(e)&&(this.it(e),r.Le(t.resumeToken));break;default:ut(56790,{state:t.state})}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ze.forEach(((r,o)=>{this.rt(o)&&e(o)}))}st(t){const e=t.targetId,r=t.Ce.count,o=this.ot(e);if(o){const u=o.target;if(ff(u))if(r===0){const c=new it(u.path);this.et(e,c,ge.newNoDocument(c,gt.min()))}else ht(r===1,20013,{expectedCount:r});else{const c=this._t(e);if(c!==r){const m=this.ut(t),g=m?this.ct(m,t,c):1;if(g!==0){this.it(e);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(e,y)}}}}}ut(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=e;let c,m;try{c=ur(r).toUint8Array()}catch(g){if(g instanceof OA)return ma("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Ep(c,o,u)}catch(g){return ma(g instanceof gu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,e,r){return e.Ce.count===r-this.Pt(t,e.targetId)?0:2}Pt(t,e){const r=this.Ge.getRemoteKeysForTarget(e);let o=0;return r.forEach((u=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(e,u,null),o++)})),o}Tt(t){const e=new Map;this.ze.forEach(((u,c)=>{const m=this.ot(c);if(m){if(u.current&&ff(m.target)){const g=new it(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,ge.newNoDocument(g,t))}u.Be&&(e.set(c,u.ke()),u.qe())}}));let r=Vt();this.He.forEach(((u,c)=>{let m=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const o=new Gf(t,e,this.Ye,this.je,r);return this.je=Dn(),this.Je=kh(),this.He=kh(),this.Ye=new he(Et),o}Xe(t,e){if(!this.rt(t))return;const r=this.Et(t,e.key)?2:0;this.nt(t).Qe(e.key,r),this.je=this.je.insert(e.key,e),this.Je=this.Je.insert(e.key,this.It(e.key).add(t)),this.He=this.He.insert(e.key,this.dt(e.key).add(t))}et(t,e,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,e)?o.Qe(e,1):o.$e(e),this.He=this.He.insert(e,this.dt(e).delete(t)),this.He=this.He.insert(e,this.dt(e).add(t)),r&&(this.je=this.je.insert(e,r))}removeTarget(t){this.ze.delete(t)}_t(t){const e=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let e=this.ze.get(t);return e||(e=new VE,this.ze.set(t,e)),e}dt(t){let e=this.He.get(t);return e||(e=new Zt(Et),this.He=this.He.insert(t,e)),e}It(t){let e=this.Je.get(t);return e||(e=new Zt(Et),this.Je=this.Je.insert(t,e)),e}rt(t){const e=this.ot(t)!==null;return e||tt("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.ze.get(t);return e&&e.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new VE),this.Ge.getRemoteKeysForTarget(t).forEach((e=>{this.et(t,e,null)}))}Et(t,e){return this.Ge.getRemoteKeysForTarget(t).has(e)}}function kh(){return new he(it.comparator)}function xE(){return new he(it.comparator)}const mC={asc:"ASCENDING",desc:"DESCENDING"},gC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pC={and:"AND",or:"OR"};class yC{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function zg(s,t){return s.useProto3Json||Mf(t)?t:{value:t}}function Ko(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fS(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function _C(s,t){return Ko(s,t.toTimestamp())}function cn(s){return ht(!!s,49232),gt.fromTimestamp((function(e){const r=lr(e);return new $t(r.seconds,r.nanos)})(s))}function Ap(s,t){return Bg(s,t).canonicalString()}function Bg(s,t){const e=(function(o){return new Gt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?e:e.child(t)}function dS(s){const t=Gt.fromString(s);return ht(AS(t),10190,{key:t.toString()}),t}function mf(s,t){return Ap(s.databaseId,t.path)}function la(s,t){const e=dS(t);if(e.get(1)!==s.databaseId.projectId)throw new nt(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+s.databaseId.projectId);if(e.get(3)!==s.databaseId.database)throw new nt(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+s.databaseId.database);return new it(pS(e))}function mS(s,t){return Ap(s.databaseId,t)}function gS(s){const t=dS(s);return t.length===4?Gt.emptyPath():pS(t)}function jg(s){return new Gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function pS(s){return ht(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function NE(s,t,e){return{name:mf(s,t),fields:e.value.mapValue.fields}}function vC(s,t,e){const r=la(s,t.name),o=cn(t.updateTime),u=t.createTime?cn(t.createTime):gt.min(),c=new en({mapValue:{fields:t.fields}}),m=ge.newFoundDocument(r,o,u,c);return e&&m.setHasCommittedMutations(),e?m.setHasCommittedMutations():m}function TC(s,t){let e;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ut(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(y,T){return y.useProto3Json?(ht(T===void 0||typeof T=="string",58123),Oe.fromBase64String(T||"")):(ht(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Oe.fromUint8Array(T||new Uint8Array))})(s,t.targetChange.resumeToken),c=t.targetChange.cause,m=c&&(function(y){const T=y.code===void 0?K.UNKNOWN:uS(y.code);return new nt(T,y.message||"")})(c);e=new hS(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=la(s,r.document.name),u=cn(r.document.updateTime),c=r.document.createTime?cn(r.document.createTime):gt.min(),m=new en({mapValue:{fields:r.document.fields}}),g=ge.newFoundDocument(o,u,c,m),y=r.targetIds||[],T=r.removedTargetIds||[];e=new $h(y,T,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=la(s,r.document),u=r.readTime?cn(r.readTime):gt.min(),c=ge.newNoDocument(o,u),m=r.removedTargetIds||[];e=new $h([],m,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=la(s,r.document),u=r.removedTargetIds||[];e=new $h([],u,o,null)}else{if(!("filter"in t))return ut(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,c=new uC(o,u),m=r.targetId;e=new cS(m,c)}}return e}function gf(s,t){let e;if(t instanceof Wo)e={update:NE(s,t.key,t.value)};else if(t instanceof Hf)e={delete:mf(s,t.key)};else if(t instanceof gr)e={update:NE(s,t.key,t.data),updateMask:wC(t.fieldMask)};else{if(!(t instanceof lS))return ut(16599,{Vt:t.type});e={verify:mf(s,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((r=>(function(u,c){const m=c.transform;if(m instanceof ju)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ho)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Go)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof qu)return{fieldPath:c.field.canonicalString(),increment:m.Ae};throw ut(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(e.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:_C(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ut(27497)})(s,t.precondition)),e}function qg(s,t){const e=t.currentDocument?(function(u){return u.updateTime!==void 0?un.updateTime(cn(u.updateTime)):u.exists!==void 0?un.exists(u.exists):un.none()})(t.currentDocument):un.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(c,m){let g=null;if("setToServerValue"in m)ht(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new ju;else if("appendMissingElements"in m){const T=m.appendMissingElements.values||[];g=new Ho(T)}else if("removeAllFromArray"in m){const T=m.removeAllFromArray.values||[];g=new Go(T)}else"increment"in m?g=new qu(c,m.increment):ut(16584,{proto:m});const y=fe.fromServerFormat(m.fieldPath);return new rC(y,g)})(s,o))):[];if(t.update){t.update.name;const o=la(s,t.update.name),u=new en({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=(function(g){const y=g.fieldPaths||[];return new _n(y.map((T=>fe.fromServerFormat(T))))})(t.updateMask);return new gr(o,u,c,e,r)}return new Wo(o,u,e,r)}if(t.delete){const o=la(s,t.delete);return new Hf(o,e)}if(t.verify){const o=la(s,t.verify);return new lS(o,e)}return ut(1463,{proto:t})}function EC(s,t){return s&&s.length>0?(ht(t!==void 0,14353),s.map((e=>(function(o,u){let c=o.updateTime?cn(o.updateTime):cn(u);return c.isEqual(gt.min())&&(c=cn(u)),new aC(c,o.transformResults||[])})(e,t)))):[]}function yS(s,t){return{documents:[mS(s,t.path)]}}function _S(s,t){const e={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=mS(s,o);const u=(function(y){if(y.length!==0)return ES(Jt.create(y,"and"))})(t.filters);u&&(e.structuredQuery.where=u);const c=(function(y){if(y.length!==0)return y.map((T=>(function(I){return{field:Io(I.field),direction:SC(I.dir)}})(T)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const m=zg(s,t.limit);return m!==null&&(e.structuredQuery.limit=m),t.startAt&&(e.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:e,parent:o}}function vS(s){let t=gS(s.parent);const e=s.structuredQuery,r=e.from?e.from.length:0;let o=null;if(r>0){ht(r===1,65062);const T=e.from[0];T.allDescendants?o=T.collectionId:t=t.child(T.collectionId)}let u=[];e.where&&(u=(function(A){const I=TS(A);return I instanceof Jt&&pp(I)?I.getFilters():[I]})(e.where));let c=[];e.orderBy&&(c=(function(A){return A.map((I=>(function(Z){return new Bu(wo(Z.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Z.direction))})(I)))})(e.orderBy));let m=null;e.limit&&(m=(function(A){let I;return I=typeof A=="object"?A.value:A,Mf(I)?null:I})(e.limit));let g=null;e.startAt&&(g=(function(A){const I=!!A.before,B=A.values||[];return new qo(B,I)})(e.startAt));let y=null;return e.endAt&&(y=(function(A){const I=!A.before,B=A.values||[];return new qo(B,I)})(e.endAt)),K2(t,o,c,u,m,"F",g,y)}function AC(s,t){const e=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:o})}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function TS(s){return s.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=wo(e.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(e.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=wo(e.unaryFilter.field);return kt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wo(e.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}})(s):s.fieldFilter!==void 0?(function(e){return kt.create(wo(e.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}})(e.fieldFilter.op),e.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(e){return Jt.create(e.compositeFilter.filters.map((r=>TS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ut(1026)}})(e.compositeFilter.op))})(s):ut(30097,{filter:s})}function SC(s){return mC[s]}function bC(s){return gC[s]}function IC(s){return pC[s]}function Io(s){return{fieldPath:s.canonicalString()}}function wo(s){return fe.fromServerFormat(s.fieldPath)}function ES(s){return s instanceof kt?(function(e){if(e.op==="=="){if(pE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NAN"}};if(gE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(pE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NAN"}};if(gE(e.value))return{unaryFilter:{field:Io(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(e.field),op:bC(e.op),value:e.value}}})(s):s instanceof Jt?(function(e){const r=e.getFilters().map((o=>ES(o)));return r.length===1?r[0]:{compositeFilter:{op:IC(e.op),filters:r}}})(s):ut(54877,{filter:s})}function wC(s){const t=[];return s.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function AS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class ir{constructor(t,e,r,o,u=gt.min(),c=gt.min(),m=Oe.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new ir(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class SS{constructor(t){this.yt=t}}function RC(s,t){let e;if(t.document)e=vC(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=it.fromSegments(t.noDocument.path),o=_a(t.noDocument.readTime);e=ge.newNoDocument(r,o),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ut(56709);{const r=it.fromSegments(t.unknownDocument.path),o=_a(t.unknownDocument.version);e=ge.newUnknownDocument(r,o)}}return t.readTime&&e.setReadTime((function(o){const u=new $t(o[0],o[1]);return gt.fromTimestamp(u)})(t.readTime)),e}function OE(s,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:pf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,c){return{name:mf(u,c.key),fields:c.data.value.mapValue.fields,updateTime:Ko(u,c.version.toTimestamp()),createTime:Ko(u,c.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:ya(t.version)};else{if(!t.isUnknownDocument())return ut(57904,{document:t});r.unknownDocument={path:e.path.toArray(),version:ya(t.version)}}return r}function pf(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function ya(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _a(s){const t=new $t(s.seconds,s.nanoseconds);return gt.fromTimestamp(t)}function na(s,t){const e=(t.baseMutations||[]).map((u=>qg(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const c=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];c.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>qg(s.yt,u))),o=$t.fromMillis(t.localWriteTimeMs);return new _p(t.batchId,o,e,r)}function pu(s){const t=_a(s.readTime),e=s.lastLimboFreeSnapshotVersion!==void 0?_a(s.lastLimboFreeSnapshotVersion):gt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const c=u.documents.length;return ht(c===1,1966,{count:c}),Kn(Bf(gS(u.documents[0])))})(s.query):(function(u){return Kn(vS(u))})(s.query),new ir(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,e,Oe.fromBase64String(s.resumeToken))}function bS(s,t){const e=ya(t.snapshotVersion),r=ya(t.lastLimboFreeSnapshotVersion);let o;o=ff(t.target)?yS(s.yt,t.target):_S(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:pa(t.target),readTime:e,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function IS(s){const t=vS({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ug(t,t.limit,"L"):t}function fg(s,t){return new Tp(t.largestBatchId,qg(s.yt,t.overlayMutation))}function ME(s,t){const e=t.path.lastSegment();return[s,nn(t.path.popLast()),e]}function PE(s,t,e,r){return{indexId:s,uid:t,sequenceNumber:e,readTime:ya(r.readTime),documentKey:nn(r.documentKey.path),largestBatchId:r.largestBatchId}}class CC{getBundleMetadata(t,e){return kE(t).get(e).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:_a(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,e){return kE(t).put((function(o){return{bundleId:o.id,createTime:ya(cn(o.createTime)),version:o.version}})(e))}getNamedQuery(t,e){return LE(t).get(e).next((r=>{if(r)return(function(u){return{name:u.name,query:IS(u.bundledQuery),readTime:_a(u.readTime)}})(r)}))}saveNamedQuery(t,e){return LE(t).put((function(o){return{name:o.name,readTime:ya(cn(o.readTime)),bundledQuery:o.bundledQuery}})(e))}}function kE(s){return ze(s,Pf)}function LE(s){return ze(s,kf)}class Kf{constructor(t,e){this.serializer=t,this.userId=e}static wt(t,e){const r=e.uid||"";return new Kf(t,r)}getOverlay(t,e){return lu(t).get(ME(this.userId,e)).next((r=>r?fg(this.serializer,r):null))}getOverlays(t,e){const r=Ni();return k.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){const o=[];return r.forEach(((u,c)=>{const m=new Tp(e,c);o.push(this.St(t,m))})),k.waitFor(o)}removeOverlaysForBatchId(t,e,r){const o=new Set;e.forEach((c=>o.add(nn(c.getCollectionPath()))));const u=[];return o.forEach((c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(lu(t).Z(Vg,m))})),k.waitFor(u)}getOverlaysForCollection(t,e,r){const o=Ni(),u=nn(e),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return lu(t).J(Vg,c).next((m=>{for(const g of m){const y=fg(this.serializer,g);o.set(y.getKey(),y)}return o}))}getOverlaysForCollectionGroup(t,e,r,o){const u=Ni();let c;const m=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return lu(t).ee({index:RA,range:m},((g,y,T)=>{const A=fg(this.serializer,y);u.size()<o||A.largestBatchId===c?(u.set(A.getKey(),A),c=A.largestBatchId):T.done()})).next((()=>u))}St(t,e){return lu(t).put((function(o,u,c){const[m,g,y]=ME(u,c.mutation.key);return{userId:u,collectionPath:g,documentId:y,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:gf(o.yt,c.mutation)}})(this.serializer,this.userId,e))}}function lu(s){return ze(s,Lf)}class DC{bt(t){return ze(t,hp)}getSessionToken(t){return this.bt(t).get("sessionToken").next((e=>{const r=e?.value;return r?Oe.fromUint8Array(r):Oe.EMPTY_BYTE_STRING}))}setSessionToken(t,e){return this.bt(t).put({name:"sessionToken",value:e.toUint8Array()})}}class ia{constructor(){}Dt(t,e){this.Ct(t,e),e.vt()}Ct(t,e){if("nullValue"in t)this.Ft(e,5);else if("booleanValue"in t)this.Ft(e,10),e.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(e,15),e.Mt(ce(t.integerValue));else if("doubleValue"in t){const r=ce(t.doubleValue);isNaN(r)?this.Ft(e,13):(this.Ft(e,15),Nu(r)?e.Mt(0):e.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(e,20),typeof r=="string"&&(r=lr(r)),e.xt(`${r.seconds||""}`),e.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,e),this.Nt(e);else if("bytesValue"in t)this.Ft(e,30),e.Bt(ur(t.bytesValue)),this.Nt(e);else if("referenceValue"in t)this.Lt(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(e,45),e.Mt(r.latitude||0),e.Mt(r.longitude||0)}else"mapValue"in t?zA(t)?this.Ft(e,Number.MAX_SAFE_INTEGER):zf(t)?this.kt(t.mapValue,e):(this.qt(t.mapValue,e),this.Nt(e)):"arrayValue"in t?(this.Qt(t.arrayValue,e),this.Nt(e)):ut(19022,{$t:t})}Ot(t,e){this.Ft(e,25),this.Ut(t,e)}Ut(t,e){e.xt(t)}qt(t,e){const r=t.fields||{};this.Ft(e,55);for(const o of Object.keys(r))this.Ot(o,e),this.Ct(r[o],e)}kt(t,e){const r=t.fields||{};this.Ft(e,53);const o=Bo,u=r[o].arrayValue?.values?.length||0;this.Ft(e,15),e.Mt(ce(u)),this.Ot(o,e),this.Ct(r[o],e)}Qt(t,e){const r=t.values||[];this.Ft(e,50);for(const o of r)this.Ct(o,e)}Lt(t,e){this.Ft(e,37),it.fromName(t).path.forEach((r=>{this.Ft(e,60),this.Ut(r,e)}))}Ft(t,e){t.Mt(e)}Nt(t){t.Mt(2)}}ia.Kt=new ia;const vo=255;function VC(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function UE(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const c=VC(255&r[u]);if(o+=c,c!==8)break}return o})(s);return Math.ceil(t/8)}class xC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Gt(r.value),r=e.next();this.zt()}jt(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.Jt(r.value),r=e.next();this.Ht()}Yt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=e.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(e<"\uD800"||"\uDBFF"<e)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=e.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const e=this.en(t),r=UE(e);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=255&e[o]}nn(t){const e=this.en(t),r=UE(e);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=e.length-r;o<e.length;++o)this.buffer[this.position++]=~(255&e[o])}rn(){this.sn(vo),this.sn(255)}_n(){this.an(vo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const e=(function(u){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,u,!1),new Uint8Array(c.buffer)})(t),r=!!(128&e[0]);e[0]^=r?255:128;for(let o=1;o<e.length;++o)e[o]^=r?255:0;return e}Gt(t){const e=255&t;e===0?(this.sn(0),this.sn(255)):e===vo?(this.sn(vo),this.sn(0)):this.sn(e)}Jt(t){const e=255&t;e===0?(this.an(0),this.an(255)):e===vo?(this.an(vo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class NC{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class OC{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class uu{constructor(){this.cn=new xC,this.ln=new NC(this.cn),this.hn=new OC(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ra{constructor(t,e,r,o){this.Tn=t,this.In=e,this.En=r,this.dn=o}An(){const t=this.dn.length,e=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(e);return r.set(this.dn,0),e!==t?r.set([0],this.dn.length):++r[r.length-1],new ra(this.Tn,this.In,this.En,r)}Rn(t,e,r){return{indexId:this.Tn,uid:t,arrayValue:Jh(this.En),directionalValue:Jh(this.dn),orderedDocumentKey:Jh(e),documentKey:r.path.toArray()}}Vn(t,e,r){const o=this.Rn(t,e,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function Xr(s,t){let e=s.Tn-t.Tn;return e!==0?e:(e=zE(s.En,t.En),e!==0?e:(e=zE(s.dn,t.dn),e!==0?e:it.comparator(s.In,t.In)))}function zE(s,t){for(let e=0;e<s.length&&e<t.length;++e){const r=s[e]-t[e];if(r!==0)return r}return s.length-t.length}function Jh(s){return W0()?(function(e){let r="";for(let o=0;o<e.length;o++)r+=String.fromCharCode(e[o]);return r})(s):s}function BE(s){return typeof s!="string"?s:(function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r})(s)}class jE{constructor(t){this.mn=new Zt(((e,r)=>fe.comparator(e.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const e of t.filters){const r=e;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(ht(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const e=Rg(t);if(e!==void 0&&!this.wn(e))return!1;const r=Ws(t);let o=new Set,u=0,c=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[c++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(c>=this.fn.length||!this.bn(this.fn[c++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new Zt(fe.comparator);const e=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")e.push(new Fh(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),e.push(new Fh(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),e.push(new Fh(r.field,r.dir==="asc"?0:1)));return new of(of.UNKNOWN_ID,this.collectionId,e,xu.empty())}wn(t){for(const e of this.gn)if(this.Sn(e,t))return!0;return!1}Sn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===r}bn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}}function wS(s){if(ht(s instanceof kt||s instanceof Jt,20012),s instanceof kt){if(s instanceof YA){const e=s.value.arrayValue?.values?.map((r=>kt.create(s.field,"==",r)))||[];return Jt.create(e,"or")}return s}const t=s.filters.map((e=>wS(e)));return Jt.create(t,s.op)}function MC(s){if(s.getFilters().length===0)return[];const t=Gg(wS(s));return ht(RS(t),7391),Fg(t)||Hg(t)?[t]:t.getFilters()}function Fg(s){return s instanceof kt}function Hg(s){return s instanceof Jt&&pp(s)}function RS(s){return Fg(s)||Hg(s)||(function(e){if(e instanceof Jt&&Mg(e)){for(const r of e.getFilters())if(!Fg(r)&&!Hg(r))return!1;return!0}return!1})(s)}function Gg(s){if(ht(s instanceof kt||s instanceof Jt,34018),s instanceof kt)return s;if(s.filters.length===1)return Gg(s.filters[0]);const t=s.filters.map((r=>Gg(r)));let e=Jt.create(t,s.op);return e=yf(e),RS(e)?e:(ht(e instanceof Jt,64498),ht(Fo(e),40251),ht(e.filters.length>1,57927),e.filters.reduce(((r,o)=>Sp(r,o))))}function Sp(s,t){let e;return ht(s instanceof kt||s instanceof Jt,38388),ht(t instanceof kt||t instanceof Jt,25473),e=s instanceof kt?t instanceof kt?(function(o,u){return Jt.create([o,u],"and")})(s,t):qE(s,t):t instanceof kt?qE(t,s):(function(o,u){if(ht(o.filters.length>0&&u.filters.length>0,48005),Fo(o)&&Fo(u))return GA(o,u.getFilters());const c=Mg(o)?o:u,m=Mg(o)?u:o,g=c.filters.map((y=>Sp(y,m)));return Jt.create(g,"or")})(s,t),yf(e)}function qE(s,t){if(Fo(t))return GA(t,s.getFilters());{const e=t.filters.map((r=>Sp(s,r)));return Jt.create(e,"or")}}function yf(s){if(ht(s instanceof kt||s instanceof Jt,11850),s instanceof kt)return s;const t=s.getFilters();if(t.length===1)return yf(t[0]);if(FA(s))return s;const e=t.map((o=>yf(o))),r=[];return e.forEach((o=>{o instanceof kt?r.push(o):o instanceof Jt&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:Jt.create(r,s.op)}class PC{constructor(){this.Cn=new bp}addToCollectionParentIndex(t,e){return this.Cn.add(e),k.resolve()}getCollectionParents(t,e){return k.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return k.resolve()}deleteFieldIndex(t,e){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,e){return k.resolve()}getDocumentsMatchingTarget(t,e){return k.resolve(null)}getIndexType(t,e){return k.resolve(0)}getFieldIndexes(t,e){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,e){return k.resolve(Vn.min())}getMinOffsetFromCollectionGroup(t,e){return k.resolve(Vn.min())}updateCollectionGroup(t,e,r){return k.resolve()}updateIndexEntries(t,e){return k.resolve()}}class bp{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e]||new Zt(Gt.comparator),u=!o.has(r);return this.index[e]=o.add(r),u}has(t){const e=t.lastSegment(),r=t.popLast(),o=this.index[e];return o&&o.has(r)}getEntries(t){return(this.index[t]||new Zt(Gt.comparator)).toArray()}}const FE="IndexedDbIndexManager",Lh=new Uint8Array(0);class kC{constructor(t,e){this.databaseId=e,this.vn=new bp,this.Fn=new mr((r=>pa(r)),((r,o)=>Xu(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.vn.has(e)){const r=e.lastSegment(),o=e.popLast();t.addOnCommittedListener((()=>{this.vn.add(e)}));const u={collectionId:r,parent:nn(o)};return HE(t).put(u)}return k.resolve()}getCollectionParents(t,e){const r=[],o=IDBKeyRange.bound([e,""],[gA(e),""],!1,!0);return HE(t).J(o).next((u=>{for(const c of u){if(c.collectionId!==e)break;r.push(xi(c.parent))}return r}))}addFieldIndex(t,e){const r=cu(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(e);delete o.indexId;const u=r.add(o);if(e.indexState){const c=Eo(t);return u.next((m=>{c.put(PE(m,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return u.next()}deleteFieldIndex(t,e){const r=cu(t),o=Eo(t),u=To(t);return r.delete(e.indexId).next((()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=cu(t),r=To(t),o=Eo(t);return e.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,e){return k.forEach(this.Mn(e),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new jE(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,e){const r=To(t);let o=!0;const u=new Map;return k.forEach(this.Mn(e),(c=>this.xn(t,c).next((m=>{o&&(o=!!m),u.set(c,m)})))).next((()=>{if(o){let c=Vt();const m=[];return k.forEach(u,((g,y)=>{tt(FE,`Using index ${(function(at){return`id=${at.indexId}|cg=${at.collectionGroup}|f=${at.fields.map((Rt=>`${Rt.fieldPath}:${Rt.kind}`)).join(",")}`})(g)} to execute ${pa(e)}`);const T=(function(at,Rt){const bt=Rg(Rt);if(bt===void 0)return null;for(const _t of df(at,bt.fieldPath))switch(_t.op){case"array-contains-any":return _t.value.arrayValue.values||[];case"array-contains":return[_t.value]}return null})(y,g),A=(function(at,Rt){const bt=new Map;for(const _t of Ws(Rt))for(const w of df(at,_t.fieldPath))switch(w.op){case"==":case"in":bt.set(_t.fieldPath.canonicalString(),w.value);break;case"not-in":case"!=":return bt.set(_t.fieldPath.canonicalString(),w.value),Array.from(bt.values())}return null})(y,g),I=(function(at,Rt){const bt=[];let _t=!0;for(const w of Ws(Rt)){const b=w.kind===0?EE(at,w.fieldPath,at.startAt):AE(at,w.fieldPath,at.startAt);bt.push(b.value),_t&&(_t=b.inclusive)}return new qo(bt,_t)})(y,g),B=(function(at,Rt){const bt=[];let _t=!0;for(const w of Ws(Rt)){const b=w.kind===0?AE(at,w.fieldPath,at.endAt):EE(at,w.fieldPath,at.endAt);bt.push(b.value),_t&&(_t=b.inclusive)}return new qo(bt,_t)})(y,g),Z=this.On(g,y,I),Y=this.On(g,y,B),W=this.Nn(g,y,A),ft=this.Bn(g.indexId,T,Z,I.inclusive,Y,B.inclusive,W);return k.forEach(ft,(dt=>r.Y(dt,e.limit).next((at=>{at.forEach((Rt=>{const bt=it.fromSegments(Rt.documentKey);c.has(bt)||(c=c.add(bt),m.push(bt))}))}))))})).next((()=>m))}return k.resolve(null)}))}Mn(t){let e=this.Fn.get(t);return e||(t.filters.length===0?e=[t]:e=MC(Jt.create(t.filters,"and")).map((r=>kg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,e),e)}Bn(t,e,r,o,u,c,m){const g=(e!=null?e.length:1)*Math.max(r.length,u.length),y=g/(e!=null?e.length:1),T=[];for(let A=0;A<g;++A){const I=e?this.Ln(e[A/y]):Lh,B=this.kn(t,I,r[A%y],o),Z=this.qn(t,I,u[A%y],c),Y=m.map((W=>this.kn(t,I,W,!0)));T.push(...this.createRange(B,Z,Y))}return T}kn(t,e,r,o){const u=new ra(t,it.empty(),e,r);return o?u:u.An()}qn(t,e,r,o){const u=new ra(t,it.empty(),e,r);return o?u.An():u}xn(t,e){const r=new jE(e),o=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let c=null;for(const m of u)r.yn(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c}))}getIndexType(t,e){let r=2;const o=this.Mn(e);return k.forEach(o,(u=>this.xn(t,u).next((c=>{c?r!==0&&c.fields.length<(function(g){let y=new Zt(fe.comparator),T=!1;for(const A of g.filters)for(const I of A.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?T=!0:y=y.add(I.field));for(const A of g.orderBy)A.field.isKeyField()||(y=y.add(A.field));return y.size+(T?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(e)&&o.length>1&&r===2?1:r))}Qn(t,e){const r=new uu;for(const o of Ws(t)){const u=e.data.field(o.fieldPath);if(u==null)return null;const c=r.Pn(o.kind);ia.Kt.Dt(u,c)}return r.un()}Ln(t){const e=new uu;return ia.Kt.Dt(t,e.Pn(0)),e.un()}$n(t,e){const r=new uu;return ia.Kt.Dt(Uu(this.databaseId,e),r.Pn((function(u){const c=Ws(u);return c.length===0?0:c[c.length-1].kind})(t))),r.un()}Nn(t,e,r){if(r===null)return[];let o=[];o.push(new uu);let u=0;for(const c of Ws(t)){const m=r[u++];for(const g of o)if(this.Un(e,c.fieldPath)&&zu(m))o=this.Kn(o,c,m);else{const y=g.Pn(c.kind);ia.Kt.Dt(m,y)}}return this.Wn(o)}On(t,e,r){return this.Nn(t,e,r.position)}Wn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].un();return e}Kn(t,e,r){const o=[...t],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const g=new uu;g.seed(m.un()),ia.Kt.Dt(c,g.Pn(e.kind)),u.push(g)}return u}Un(t,e){return!!t.filters.find((r=>r instanceof kt&&r.field.isEqual(e)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,e){const r=cu(t),o=Eo(t);return(e?r.J(Dg,IDBKeyRange.bound(e,e)):r.J()).next((u=>{const c=[];return k.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{c.push((function(T,A){const I=A?new xu(A.sequenceNumber,new Vn(_a(A.readTime),new it(xi(A.documentKey)),A.largestBatchId)):xu.empty(),B=T.fields.map((([Z,Y])=>new Fh(fe.fromServerFormat(Z),Y)));return new of(T.indexId,T.collectionGroup,B,I)})(m,g))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((e=>e.length===0?null:(e.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:Et(r.collectionGroup,o.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(t,e,r){const o=cu(t),u=Eo(t);return this.Gn(t).next((c=>o.J(Dg,IDBKeyRange.bound(e,e)).next((m=>k.forEach(m,(g=>u.put(PE(g.indexId,this.uid,c,r))))))))}updateIndexEntries(t,e){const r=new Map;return k.forEach(e,((o,u)=>{const c=r.get(o.collectionGroup);return(c?k.resolve(c):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),k.forEach(m,(g=>this.zn(t,o,g).next((y=>{const T=this.jn(u,g);return y.isEqual(T)?k.resolve():this.Jn(t,u,g,y,T)})))))))}))}Hn(t,e,r,o){return To(t).put(o.Rn(this.uid,this.$n(r,e.key),e.key))}Yn(t,e,r,o){return To(t).delete(o.Vn(this.uid,this.$n(r,e.key),e.key))}zn(t,e,r){const o=To(t);let u=new Zt(Xr);return o.ee({index:wA,range:IDBKeyRange.only([r.indexId,this.uid,Jh(this.$n(r,e))])},((c,m)=>{u=u.add(new ra(r.indexId,e,BE(m.arrayValue),BE(m.directionalValue)))})).next((()=>u))}jn(t,e){let r=new Zt(Xr);const o=this.Qn(e,t);if(o==null)return r;const u=Rg(e);if(u!=null){const c=t.data.field(u.fieldPath);if(zu(c))for(const m of c.arrayValue.values||[])r=r.add(new ra(e.indexId,t.key,this.Ln(m),o))}else r=r.add(new ra(e.indexId,t.key,Lh,o));return r}Jn(t,e,r,o,u){tt(FE,"Updating index entries for document '%s'",e.key);const c=[];return(function(g,y,T,A,I){const B=g.getIterator(),Z=y.getIterator();let Y=_o(B),W=_o(Z);for(;Y||W;){let ft=!1,dt=!1;if(Y&&W){const at=T(Y,W);at<0?dt=!0:at>0&&(ft=!0)}else Y!=null?dt=!0:ft=!0;ft?(A(W),W=_o(Z)):dt?(I(Y),Y=_o(B)):(Y=_o(B),W=_o(Z))}})(o,u,Xr,(m=>{c.push(this.Hn(t,e,r,m))}),(m=>{c.push(this.Yn(t,e,r,m))})),k.waitFor(c)}Gn(t){let e=1;return Eo(t).ee({index:IA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),e=o.sequenceNumber+1})).next((()=>e))}createRange(t,e,r){r=r.sort(((c,m)=>Xr(c,m))).filter(((c,m,g)=>!m||Xr(c,g[m-1])!==0));const o=[];o.push(t);for(const c of r){const m=Xr(c,t),g=Xr(c,e);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(c),o.push(c.An());else if(g>0)break}o.push(e);const u=[];for(let c=0;c<o.length;c+=2){if(this.Zn(o[c],o[c+1]))return[];const m=o[c].Vn(this.uid,Lh,it.empty()),g=o[c+1].Vn(this.uid,Lh,it.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,e){return Xr(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(GE)}getMinOffset(t,e){return k.mapArray(this.Mn(e),(r=>this.xn(t,r).next((o=>o||ut(44426))))).next(GE)}}function HE(s){return ze(s,Pu)}function To(s){return ze(s,Au)}function cu(s){return ze(s,cp)}function Eo(s){return ze(s,Eu)}function GE(s){ht(s.length!==0,28825);let t=s[0].indexState.offset,e=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;op(o,t)<0&&(t=o),e<o.largestBatchId&&(e=o.largestBatchId)}return new Vn(t.readTime,t.documentKey,e)}const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CS=41943040;class tn{static withCacheSize(t){return new tn(t,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}}function DS(s,t,e){const r=s.store(si),o=s.store(ko),u=[],c=IDBKeyRange.only(e.batchId);let m=0;const g=r.ee({range:c},((T,A,I)=>(m++,I.delete())));u.push(g.next((()=>{ht(m===1,47070,{batchId:e.batchId})})));const y=[];for(const T of e.mutations){const A=AA(t,T.key.path,e.batchId);u.push(o.delete(A)),y.push(T.key)}return k.waitFor(u).next((()=>y))}function _f(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ut(14731);t=s.noDocument}return JSON.stringify(t).length}tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(CS,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class Qf{constructor(t,e,r,o){this.userId=t,this.serializer=e,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,e,r,o){ht(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new Qf(u,e,r,o)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(t).ee({index:sa,range:r},((o,u,c)=>{e=!1,c.done()})).next((()=>e))}addMutationBatch(t,e,r,o){const u=Ro(t),c=$r(t);return c.add({}).next((m=>{ht(typeof m=="number",49019);const g=new _p(m,e,r,o),y=(function(B,Z,Y){const W=Y.baseMutations.map((dt=>gf(B.yt,dt))),ft=Y.mutations.map((dt=>gf(B.yt,dt)));return{userId:Z,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:W,mutations:ft}})(this.serializer,this.userId,g),T=[];let A=new Zt(((I,B)=>Et(I.canonicalString(),B.canonicalString())));for(const I of o){const B=AA(this.userId,I.key.path,m);A=A.add(I.key.path.popLast()),T.push(c.put(y)),T.push(u.put(B,c2))}return A.forEach((I=>{T.push(this.indexManager.addToCollectionParentIndex(t,I))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),k.waitFor(T).next((()=>g))}))}lookupMutationBatch(t,e){return $r(t).get(e).next((r=>r?(ht(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:e}),na(this.serializer,r)):null))}er(t,e){return this.Xn[e]?k.resolve(this.Xn[e]):this.lookupMutationBatch(t,e).next((r=>{if(r){const o=r.keys();return this.Xn[e]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return $r(t).ee({index:sa,range:o},((c,m,g)=>{m.userId===this.userId&&(ht(m.batchId>=r,47524,{tr:r}),u=na(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=aa;return $r(t).ee({index:sa,range:e,reverse:!0},((o,u,c)=>{r=u.batchId,c.done()})).next((()=>r))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,aa],[this.userId,Number.POSITIVE_INFINITY]);return $r(t).J(sa,e).next((r=>r.map((o=>na(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=Hh(this.userId,e.path),o=IDBKeyRange.lowerBound(r),u=[];return Ro(t).ee({range:o},((c,m,g)=>{const[y,T,A]=c,I=xi(T);if(y===this.userId&&e.path.isEqual(I))return $r(t).get(A).next((B=>{if(!B)throw ut(61480,{nr:c,batchId:A});ht(B.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:B.userId,batchId:A}),u.push(na(this.serializer,B))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(Et);const o=[];return e.forEach((u=>{const c=Hh(this.userId,u.path),m=IDBKeyRange.lowerBound(c),g=Ro(t).ee({range:m},((y,T,A)=>{const[I,B,Z]=y,Y=xi(B);I===this.userId&&u.path.isEqual(Y)?r=r.add(Z):A.done()}));o.push(g)})),k.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1,u=Hh(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new Zt(Et);return Ro(t).ee({range:c},((g,y,T)=>{const[A,I,B]=g,Z=xi(I);A===this.userId&&r.isPrefixOf(Z)?Z.length===o&&(m=m.add(B)):T.done()})).next((()=>this.rr(t,m)))}rr(t,e){const r=[],o=[];return e.forEach((u=>{o.push($r(t).get(u).next((c=>{if(c===null)throw ut(35274,{batchId:u});ht(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:u}),r.push(na(this.serializer,c))})))})),k.waitFor(o).next((()=>r))}removeMutationBatch(t,e){return DS(t.le,this.userId,e).next((r=>(t.addOnCommittedListener((()=>{this.ir(e.batchId)})),k.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return k.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),o=[];return Ro(t).ee({range:r},((u,c,m)=>{if(u[0]===this.userId){const g=xi(u[1]);o.push(g)}else m.done()})).next((()=>{ht(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,e){return VS(t,this.userId,e)}_r(t){return xS(t).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:aa,lastStreamToken:""}))}}function VS(s,t,e){const r=Hh(t,e.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Ro(s).ee({range:u,X:!0},((m,g,y)=>{const[T,A,I]=m;T===t&&A===o&&(c=!0),y.done()})).next((()=>c))}function $r(s){return ze(s,si)}function Ro(s){return ze(s,ko)}function xS(s){return ze(s,Ou)}class va{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new va(0)}static cr(){return new va(-1)}}class LC{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.lr(t).next((e=>{const r=new va(e.highestTargetId);return e.highestTargetId=r.next(),this.hr(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((e=>gt.fromTimestamp(new $t(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(t,e,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=e,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),e>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=e),this.hr(t,o))))}addTargetData(t,e){return this.Pr(t,e).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(e,r),this.hr(t,r))))))}updateTargetData(t,e){return this.Pr(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Ao(t).delete(e.targetId))).next((()=>this.lr(t))).next((r=>(ht(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,e,r){let o=0;const u=[];return Ao(t).ee(((c,m)=>{const g=pu(m);g.sequenceNumber<=e&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>k.waitFor(u))).next((()=>o))}forEachTarget(t,e){return Ao(t).ee(((r,o)=>{const u=pu(o);e(u)}))}lr(t){return QE(t).get(cf).next((e=>(ht(e!==null,2888),e)))}hr(t,e){return QE(t).put(cf,e)}Pr(t,e){return Ao(t).put(bS(this.serializer,e))}Tr(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((e=>e.targetCount))}getTargetData(t,e){const r=pa(e),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ao(t).ee({range:o,index:bA},((c,m,g)=>{const y=pu(m);Xu(e,y.target)&&(u=y,g.done())})).next((()=>u))}addMatchingKeys(t,e,r){const o=[],u=Wr(t);return e.forEach((c=>{const m=nn(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,c))})),k.waitFor(o)}removeMatchingKeys(t,e,r){const o=Wr(t);return k.forEach(e,(u=>{const c=nn(u.path);return k.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,e){const r=Wr(t),o=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),o=Wr(t);let u=Vt();return o.ee({range:r,X:!0},((c,m,g)=>{const y=xi(c[1]),T=new it(y);u=u.add(T)})).next((()=>u))}containsKey(t,e){const r=nn(e.path),o=IDBKeyRange.bound([r],[gA(r)],!1,!0);let u=0;return Wr(t).ee({index:up,X:!0,range:o},(([c,m],g,y)=>{c!==0&&(u++,y.done())})).next((()=>u>0))}At(t,e){return Ao(t).get(e).next((r=>r?pu(r):null))}}function Ao(s){return ze(s,Lo)}function QE(s){return ze(s,oa)}function Wr(s){return ze(s,Uo)}const YE="LruGarbageCollector",UC=1048576;function XE([s,t],[e,r]){const o=Et(s,e);return o===0?Et(t,r):o}class zC{constructor(t){this.Ir=t,this.buffer=new Zt(XE),this.Er=0}dr(){return++this.Er}Ar(t){const e=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();XE(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class NS{constructor(t,e,r){this.garbageCollector=t,this.asyncQueue=e,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(YE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ys(e)?tt(YE,"Ignoring IndexedDB error during garbage collection: ",e):await Sa(e)}await this.Vr(3e5)}))}}class BC{constructor(t,e){this.mr=t,this.params=e}calculateTargetCount(t,e){return this.mr.gr(t).next((r=>Math.floor(e/100*r)))}nthSequenceNumber(t,e){if(e===0)return k.resolve(Gn.ce);const r=new zC(e);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,e,r){return this.mr.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.mr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(KE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.yr(t,e)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,e){let r,o,u,c,m,g,y;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,c=Date.now(),this.nthSequenceNumber(t,o)))).next((A=>(r=A,m=Date.now(),this.removeTargets(t,r,e)))).next((A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((A=>(y=Date.now(),So()<=Pt.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-T}ms
	Determined least recently used ${o} in `+(m-c)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function OS(s,t){return new BC(s,t)}class jC{constructor(t,e){this.db=t,this.garbageCollector=OS(this,e)}gr(t){const e=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pr(t,e){return this.Sr(t,((r,o)=>e(o)))}addReference(t,e,r){return Uh(t,r)}removeReference(t,e,r){return Uh(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return Uh(t,e)}br(t,e){return(function(o,u){let c=!1;return xS(o).te((m=>VS(o,m,u).next((g=>(g&&(c=!0),k.resolve(!g)))))).next((()=>c))})(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((c,m)=>{if(m<=e){const g=this.br(t,c).next((y=>{if(!y)return u++,r.getEntry(t,c).next((()=>(r.removeEntry(c,gt.min()),Wr(t).delete((function(A){return[0,nn(A.path)]})(c)))))}));o.push(g)}})).next((()=>k.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return Uh(t,e)}Sr(t,e){const r=Wr(t);let o,u=Gn.ce;return r.ee({index:up},(([c,m],{path:g,sequenceNumber:y})=>{c===0?(u!==Gn.ce&&e(new it(xi(o)),u),u=y,o=g):u=Gn.ce})).next((()=>{u!==Gn.ce&&e(new it(xi(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Uh(s,t){return Wr(s).put((function(r,o){return{targetId:0,path:nn(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}class MS{constructor(){this.changes=new mr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ge.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?k.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class qC{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Js(t).put(r)}removeEntry(t,e,r){return Js(t).delete((function(u,c){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],pf(c),m[m.length-1]]})(e,r))}updateMetadata(t,e){return this.getMetadata(t).next((r=>(r.byteSize+=e,this.Dr(t,r))))}getEntry(t,e){let r=ge.newInvalidDocument(e);return Js(t).ee({index:Gh,range:IDBKeyRange.only(hu(e))},((o,u)=>{r=this.Cr(e,u)})).next((()=>r))}vr(t,e){let r={size:0,document:ge.newInvalidDocument(e)};return Js(t).ee({index:Gh,range:IDBKeyRange.only(hu(e))},((o,u)=>{r={document:this.Cr(e,u),size:_f(u)}})).next((()=>r))}getEntries(t,e){let r=Dn();return this.Fr(t,e,((o,u)=>{const c=this.Cr(o,u);r=r.insert(o,c)})).next((()=>r))}Mr(t,e){let r=Dn(),o=new he(it.comparator);return this.Fr(t,e,((u,c)=>{const m=this.Cr(u,c);r=r.insert(u,m),o=o.insert(u,_f(c))})).next((()=>({documents:r,Or:o})))}Fr(t,e,r){if(e.isEmpty())return k.resolve();let o=new Zt(ZE);e.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(hu(o.first()),hu(o.last())),c=o.getIterator();let m=c.getNext();return Js(t).ee({index:Gh,range:u},((g,y,T)=>{const A=it.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&ZE(m,A)<0;)r(m,null),m=c.getNext();m&&m.isEqual(A)&&(r(m,y),m=c.hasNext()?c.getNext():null),m?T.j(hu(m)):T.done()})).next((()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(t,e,r,o,u){const c=e.path,m=[c.popLast().toArray(),c.lastSegment(),pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Js(t).J(IDBKeyRange.bound(m,g,!0)).next((y=>{u?.incrementDocumentReadCount(y.length);let T=Dn();for(const A of y){const I=this.Cr(it.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);I.isFoundDocument()&&($u(e,I)||o.has(I.key))&&(T=T.insert(I.key,I))}return T}))}getAllFromCollectionGroup(t,e,r,o){let u=Dn();const c=JE(e,r),m=JE(e,Vn.max());return Js(t).ee({index:SA,range:IDBKeyRange.bound(c,m,!0)},((g,y,T)=>{const A=this.Cr(it.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);u=u.insert(A.key,A),u.size===o&&T.done()})).next((()=>u))}newChangeBuffer(t){return new FC(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((e=>e.byteSize))}getMetadata(t){return $E(t).get(Cg).next((e=>(ht(!!e,20021),e)))}Dr(t,e){return $E(t).put(Cg,e)}Cr(t,e){if(e){const r=RC(this.serializer,e);if(!(r.isNoDocument()&&r.version.isEqual(gt.min())))return r}return ge.newInvalidDocument(t)}}function PS(s){return new qC(s)}class FC extends MS{constructor(t,e){super(),this.Nr=t,this.trackRemovals=e,this.Br=new mr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const e=[];let r=0,o=new Zt(((u,c)=>Et(u.canonicalString(),c.canonicalString())));return this.changes.forEach(((u,c)=>{const m=this.Br.get(u);if(e.push(this.Nr.removeEntry(t,u,m.readTime)),c.isValidDocument()){const g=OE(this.Nr.serializer,c);o=o.add(u.path.popLast());const y=_f(g);r+=y-m.size,e.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=OE(this.Nr.serializer,c.convertToNoDocument(gt.min()));e.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{e.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),e.push(this.Nr.updateMetadata(t,r)),k.waitFor(e)}getFromCache(t,e){return this.Nr.vr(t,e).next((r=>(this.Br.set(e,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,e){return this.Nr.Mr(t,e).next((({documents:r,Or:o})=>(o.forEach(((u,c)=>{this.Br.set(u,{size:c,readTime:r.get(u).readTime})})),r)))}}function $E(s){return ze(s,Mu)}function Js(s){return ze(s,uf)}function hu(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function JE(s,t){const e=t.documentKey.path.toArray();return[s,pf(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function ZE(s,t){const e=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<e.length-2&&u<r.length-2;++u)if(o=Et(e[u],r[u]),o)return o;return o=Et(e.length,r.length),o||(o=Et(e[e.length-2],r[r.length-2]),o||Et(e[e.length-1],r[r.length-1]))}class HC{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class kS{constructor(t,e,r,o){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,e)))).next((o=>(r!==null&&wu(r.mutation,o,_n.empty(),$t.now()),o)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.getLocalViewOfDocuments(t,r,Vt()).next((()=>r))))}getLocalViewOfDocuments(t,e,r=Vt()){const o=Ni();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,r).next((u=>{let c=mu();return u.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const r=Ni();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,Vt())))}populateOverlays(t,e,r){const o=[];return r.forEach((u=>{e.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((c,m)=>{e.set(c,m)}))}))}computeViews(t,e,r,o){let u=Dn();const c=Iu(),m=(function(){return Iu()})();return e.forEach(((g,y)=>{const T=r.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof gr)?u=u.insert(y.key,y):T!==void 0?(c.set(y.key,T.mutation.getFieldMask()),wu(T.mutation,y,T.mutation.getFieldMask(),$t.now())):c.set(y.key,_n.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,T)=>c.set(y,T))),e.forEach(((y,T)=>m.set(y,new HC(T,c.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,e){const r=Iu();let o=new he(((c,m)=>c-m)),u=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const m of c)m.keys().forEach((g=>{const y=e.get(g);if(y===null)return;let T=r.get(g)||_n.empty();T=m.applyToLocalView(y,T),r.set(g,T);const A=(o.get(m.batchId)||Vt()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,T=g.value,A=tS();T.forEach((I=>{if(!u.has(I)){const B=aS(e.get(I),r.get(I));B!==null&&A.set(I,B),u=u.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(t,y,A))}return k.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,e,r,o){return(function(c){return it.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):XA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,o):this.getDocumentsMatchingCollectionQuery(t,e,r,o)}getNextDocuments(t,e,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,o).next((u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,o-u.size):k.resolve(Ni());let m=Vu,g=u;return c.next((y=>k.forEach(y,((T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?k.resolve():this.remoteDocumentCache.getEntry(t,T).next((I=>{g=g.insert(T,I)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,Vt()))).next((T=>({batchId:m,changes:WA(T)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new it(e)).next((r=>{let o=mu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,e,r,o){const u=e.collectionGroup;let c=mu();return this.indexManager.getCollectionParents(t,u).next((m=>k.forEach(m,(g=>{const y=(function(A,I){return new Zo(I,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(e,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,o).next((T=>{T.forEach(((A,I)=>{c=c.insert(A,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,u,o)))).next((c=>{u.forEach(((g,y)=>{const T=y.getKey();c.get(T)===null&&(c=c.insert(T,ge.newInvalidDocument(T)))}));let m=mu();return c.forEach(((g,y)=>{const T=u.get(g);T!==void 0&&wu(T.mutation,y,_n.empty(),$t.now()),$u(e,y)&&(m=m.insert(g,y))})),m}))}}class GC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,e){return k.resolve(this.Lr.get(e))}saveBundleMetadata(t,e){return this.Lr.set(e.id,(function(o){return{id:o.id,version:o.version,createTime:cn(o.createTime)}})(e)),k.resolve()}getNamedQuery(t,e){return k.resolve(this.kr.get(e))}saveNamedQuery(t,e){return this.kr.set(e.name,(function(o){return{name:o.name,query:IS(o.bundledQuery),readTime:cn(o.readTime)}})(e)),k.resolve()}}class KC{constructor(){this.overlays=new he(it.comparator),this.qr=new Map}getOverlay(t,e){return k.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ni();return k.forEach(e,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,e,r){return r.forEach(((o,u)=>{this.St(t,e,u)})),k.resolve()}removeOverlaysForBatchId(t,e,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(t,e,r){const o=Ni(),u=e.length+1,c=new it(e.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return k.resolve(o)}getOverlaysForCollectionGroup(t,e,r,o){let u=new he(((y,T)=>y-T));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>r){let T=u.get(y.largestBatchId);T===null&&(T=Ni(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Ni(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,T)=>m.set(y,T))),!(m.size()>=o)););return k.resolve(m)}St(t,e,r){const o=this.overlays.get(r.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Tp(e,r));let u=this.qr.get(e);u===void 0&&(u=Vt(),this.qr.set(e,u)),this.qr.set(e,u.add(r.key))}}class QC{constructor(){this.sessionToken=Oe.EMPTY_BYTE_STRING}getSessionToken(t){return k.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,k.resolve()}}class Ip{constructor(){this.Qr=new Zt(Fe.$r),this.Ur=new Zt(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,e){const r=new Fe(t,e);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,e){t.forEach((r=>this.addReference(r,e)))}removeReference(t,e){this.Gr(new Fe(t,e))}zr(t,e){t.forEach((r=>this.removeReference(r,e)))}jr(t){const e=new it(new Gt([])),r=new Fe(e,t),o=new Fe(e,t+1),u=[];return this.Ur.forEachInRange([r,o],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const e=new it(new Gt([])),r=new Fe(e,t),o=new Fe(e,t+1);let u=Vt();return this.Ur.forEachInRange([r,o],(c=>{u=u.add(c.key)})),u}containsKey(t){const e=new Fe(t,0),r=this.Qr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Fe{constructor(t,e){this.key=t,this.Yr=e}static $r(t,e){return it.comparator(t.key,e.key)||Et(t.Yr,e.Yr)}static Kr(t,e){return Et(t.Yr,e.Yr)||it.comparator(t.key,e.key)}}class YC{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(Fe.$r)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new _p(u,e,r,o);this.mutationQueue.push(c);for(const m of o)this.Zr=this.Zr.add(new Fe(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return k.resolve(c)}lookupMutationBatch(t,e){return k.resolve(this.Xr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,o=this.ei(r),u=o<0?0:o;return k.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?aa:this.tr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Fe(e,0),o=new Fe(e,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(c=>{const m=this.Xr(c.Yr);u.push(m)})),k.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(Et);return e.forEach((o=>{const u=new Fe(o,0),c=new Fe(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(m=>{r=r.add(m.Yr)}))})),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,o=r.length+1;let u=r;it.isDocumentKey(u)||(u=u.child(""));const c=new Fe(new it(u),0);let m=new Zt(Et);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)}),c),k.resolve(this.ti(m))}ti(t){const e=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&e.push(o)})),e}removeMutationBatch(t,e){ht(this.ni(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(e.mutations,(o=>{const u=new Fe(o.key,e.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,e){const r=new Fe(e,0),o=this.Zr.firstAfterOrEqual(r);return k.resolve(e.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}ni(t,e){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const e=this.ei(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class XC{constructor(t){this.ri=t,this.docs=(function(){return new he(it.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,o=this.docs.get(r),u=o?o.size:0,c=this.ri(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return k.resolve(r?r.document.mutableCopy():ge.newInvalidDocument(e))}getEntries(t,e){let r=Dn();return e.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ge.newInvalidDocument(o))})),k.resolve(r)}getDocumentsMatchingQuery(t,e,r,o){let u=Dn();const c=e.path,m=new it(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||op(_A(T),r)<=0||(o.has(T.key)||$u(e,T))&&(u=u.insert(T.key,T.mutableCopy()))}return k.resolve(u)}getAllFromCollectionGroup(t,e,r,o){ut(9500)}ii(t,e){return k.forEach(this.docs,(r=>e(r)))}newChangeBuffer(t){return new $C(this)}getSize(t){return k.resolve(this.size)}}class $C extends MS{constructor(t){super(),this.Nr=t}applyChanges(t){const e=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?e.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),k.waitFor(e)}getFromCache(t,e){return this.Nr.getEntry(t,e)}getAllFromCache(t,e){return this.Nr.getEntries(t,e)}}class JC{constructor(t){this.persistence=t,this.si=new mr((e=>pa(e)),Xu),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.oi=0,this._i=new Ip,this.targetCount=0,this.ai=va.ur()}forEachTarget(t,e){return this.si.forEach(((r,o)=>e(o))),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.oi&&(this.oi=e),k.resolve()}Pr(t){this.si.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ai=new va(e),this.highestTargetId=e),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,e){return this.Pr(e),this.targetCount+=1,k.resolve()}updateTargetData(t,e){return this.Pr(e),k.resolve()}removeTargetData(t,e){return this.si.delete(e.target),this._i.jr(e.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,e,r){let o=0;const u=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=e&&r.get(m.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),k.waitFor(u).next((()=>o))}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,e){const r=this.si.get(e)||null;return k.resolve(r)}addMatchingKeys(t,e,r){return this._i.Wr(e,r),k.resolve()}removeMatchingKeys(t,e,r){this._i.zr(e,r);const o=this.persistence.referenceDelegate,u=[];return o&&e.forEach((c=>{u.push(o.markPotentiallyOrphaned(t,c))})),k.waitFor(u)}removeMatchingKeysForTargetId(t,e){return this._i.jr(e),k.resolve()}getMatchingKeysForTargetId(t,e){const r=this._i.Hr(e);return k.resolve(r)}containsKey(t,e){return k.resolve(this._i.containsKey(e))}}class wp{constructor(t,e){this.ui={},this.overlays={},this.ci=new Gn(0),this.li=!1,this.li=!0,this.hi=new QC,this.referenceDelegate=t(this),this.Pi=new JC(this),this.indexManager=new PC,this.remoteDocumentCache=(function(o){return new XC(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new SS(e),this.Ii=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new KC,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.ui[t.toKey()];return r||(r=new YC(e,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt("MemoryPersistence","Starting transaction:",t);const o=new ZC(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,e){return k.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,e))))}}class ZC extends TA{constructor(t){super(),this.currentSequenceNumber=t}}class Yf{constructor(t){this.persistence=t,this.Ri=new Ip,this.Vi=null}static mi(t){return new Yf(t)}get fi(){if(this.Vi)return this.Vi;throw ut(60996)}addReference(t,e,r){return this.Ri.addReference(r,e),this.fi.delete(r.toString()),k.resolve()}removeReference(t,e,r){return this.Ri.removeReference(r,e),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(t,e){return this.fi.add(e.toString()),k.resolve()}removeTarget(t,e){this.Ri.jr(e.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,e)))}Ei(){this.Vi=new Set}di(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,(r=>{const o=it.fromPath(r);return this.gi(t,o).next((u=>{u||e.removeEntry(o,gt.min())}))})).next((()=>(this.Vi=null,e.apply(t))))}updateLimboDocument(t,e){return this.gi(t,e).next((r=>{r?this.fi.delete(e.toString()):this.fi.add(e.toString())}))}Ti(t){return 0}gi(t,e){return k.or([()=>k.resolve(this.Ri.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ai(t,e)])}}class vf{constructor(t,e){this.persistence=t,this.pi=new mr((r=>nn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=OS(this,e)}static mi(t,e){return new vf(t,e)}Ei(){}di(t){return k.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}gr(t){const e=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>e.next((o=>r+o))))}wr(t){let e=0;return this.pr(t,(r=>{e++})).next((()=>e))}pr(t,e){return k.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?k.resolve():e(o)))))}removeTargets(t,e,r){return this.persistence.getTargetCache().removeTargets(t,e,r)}removeOrphanedDocuments(t,e){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(c=>this.br(t,c,e).next((m=>{m||(r++,u.removeEntry(c,gt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,e){return this.pi.set(e,t.currentSequenceNumber),k.resolve()}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),k.resolve()}removeReference(t,e,r){return this.pi.set(r,t.currentSequenceNumber),k.resolve()}updateLimboDocument(t,e){return this.pi.set(e,t.currentSequenceNumber),k.resolve()}Ti(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Qh(t.data.value)),e}br(t,e,r){return k.or([()=>this.persistence.Ai(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const o=this.pi.get(e);return k.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class WC{constructor(t){this.serializer=t}k(t,e,r,o){const u=new Of("createOrUpgrade",e);r<1&&o>=1&&((function(g){g.createObjectStore(Yu)})(t),(function(g){g.createObjectStore(Ou,{keyPath:u2}),g.createObjectStore(si,{keyPath:uE,autoIncrement:!0}).createIndex(sa,cE,{unique:!0}),g.createObjectStore(ko)})(t),WE(t),(function(g){g.createObjectStore(ta)})(t));let c=k.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Uo),g.deleteObjectStore(Lo),g.deleteObjectStore(oa)})(t),WE(t)),c=c.next((()=>(function(g){const y=g.store(oa),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gt.min().toTimestamp(),targetCount:0};return y.put(cf,T)})(u)))),r<4&&o>=4&&(r!==0&&(c=c.next((()=>(function(g,y){return y.store(si).J().next((A=>{g.deleteObjectStore(si),g.createObjectStore(si,{keyPath:uE,autoIncrement:!0}).createIndex(sa,cE,{unique:!0});const I=y.store(si),B=A.map((Z=>I.put(Z)));return k.waitFor(B)}))})(t,u)))),c=c.next((()=>{(function(g){g.createObjectStore(zo,{keyPath:_2})})(t)}))),r<5&&o>=5&&(c=c.next((()=>this.yi(u)))),r<6&&o>=6&&(c=c.next((()=>((function(g){g.createObjectStore(Mu)})(t),this.wi(u))))),r<7&&o>=7&&(c=c.next((()=>this.Si(u)))),r<8&&o>=8&&(c=c.next((()=>this.bi(t,u)))),r<9&&o>=9&&(c=c.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(c=c.next((()=>this.Di(u)))),r<11&&o>=11&&(c=c.next((()=>{(function(g){g.createObjectStore(Pf,{keyPath:v2})})(t),(function(g){g.createObjectStore(kf,{keyPath:T2})})(t)}))),r<12&&o>=12&&(c=c.next((()=>{(function(g){const y=g.createObjectStore(Lf,{keyPath:R2});y.createIndex(Vg,C2,{unique:!1}),y.createIndex(RA,D2,{unique:!1})})(t)}))),r<13&&o>=13&&(c=c.next((()=>(function(g){const y=g.createObjectStore(uf,{keyPath:h2});y.createIndex(Gh,f2),y.createIndex(SA,d2)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(ta)))),r<14&&o>=14&&(c=c.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(c=c.next((()=>(function(g){g.createObjectStore(cp,{keyPath:E2,autoIncrement:!0}).createIndex(Dg,A2,{unique:!1}),g.createObjectStore(Eu,{keyPath:S2}).createIndex(IA,b2,{unique:!1}),g.createObjectStore(Au,{keyPath:I2}).createIndex(wA,w2,{unique:!1})})(t)))),r<16&&o>=16&&(c=c.next((()=>{e.objectStore(Eu).clear()})).next((()=>{e.objectStore(Au).clear()}))),r<17&&o>=17&&(c=c.next((()=>{(function(g){g.createObjectStore(hp,{keyPath:V2})})(t)}))),r<18&&o>=18&&W0()&&(c=c.next((()=>{e.objectStore(Eu).clear()})).next((()=>{e.objectStore(Au).clear()}))),c}wi(t){let e=0;return t.store(ta).ee(((r,o)=>{e+=_f(o)})).next((()=>{const r={byteSize:e};return t.store(Mu).put(Cg,r)}))}yi(t){const e=t.store(Ou),r=t.store(si);return e.J().next((o=>k.forEach(o,(u=>{const c=IDBKeyRange.bound([u.userId,aa],[u.userId,u.lastAcknowledgedBatchId]);return r.J(sa,c).next((m=>k.forEach(m,(g=>{ht(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const y=na(this.serializer,g);return DS(t,u.userId,y).next((()=>{}))}))))}))))}Si(t){const e=t.store(Uo),r=t.store(ta);return t.store(oa).get(cf).next((o=>{const u=[];return r.ee(((c,m)=>{const g=new Gt(c),y=(function(A){return[0,nn(A)]})(g);u.push(e.get(y).next((T=>T?k.resolve():(A=>e.put({targetId:0,path:nn(A),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>k.waitFor(u)))}))}bi(t,e){t.createObjectStore(Pu,{keyPath:y2});const r=e.store(Pu),o=new bp,u=c=>{if(o.add(c)){const m=c.lastSegment(),g=c.popLast();return r.put({collectionId:m,parent:nn(g)})}};return e.store(ta).ee({X:!0},((c,m)=>{const g=new Gt(c);return u(g.popLast())})).next((()=>e.store(ko).ee({X:!0},(([c,m,g],y)=>{const T=xi(m);return u(T.popLast())}))))}Di(t){const e=t.store(Lo);return e.ee(((r,o)=>{const u=pu(o),c=bS(this.serializer,u);return e.put(c)}))}Ci(t,e){const r=e.store(ta),o=[];return r.ee(((u,c)=>{const m=e.store(uf),g=(function(A){return A.document?new it(Gt.fromString(A.document.name).popFirst(5)):A.noDocument?it.fromSegments(A.noDocument.path):A.unknownDocument?it.fromSegments(A.unknownDocument.path):ut(36783)})(c).path.toArray(),y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(y))})).next((()=>k.waitFor(o)))}Fi(t,e){const r=e.store(si),o=PS(this.serializer),u=new wp(Yf.mi,this.serializer.yt);return r.J().next((c=>{const m=new Map;return c.forEach((g=>{let y=m.get(g.userId)??Vt();na(this.serializer,g).keys().forEach((T=>y=y.add(T))),m.set(g.userId,y)})),k.forEach(m,((g,y)=>{const T=new $e(y),A=Kf.wt(this.serializer,T),I=u.getIndexManager(T),B=Qf.wt(T,this.serializer,I,u.referenceDelegate);return new kS(o,B,A,I).recalculateAndSaveOverlaysForDocumentKeys(new xg(e,Gn.ce),g).next()}))}))}}function WE(s){s.createObjectStore(Uo,{keyPath:g2}).createIndex(up,p2,{unique:!0}),s.createObjectStore(Lo,{keyPath:"targetId"}).createIndex(bA,m2,{unique:!0}),s.createObjectStore(oa)}const Jr="IndexedDbPersistence",dg=18e5,mg=5e3,gg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tD="main";class Rp{constructor(t,e,r,o,u,c,m,g,y,T,A=18){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Mi=u,this.window=c,this.document=m,this.xi=y,this.Oi=T,this.Ni=A,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!Rp.v())throw new nt(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jC(this,o),this.$i=e+tD,this.serializer=new SS(g),this.Ui=new hs(this.$i,this.Ni,new WC(this.serializer)),this.hi=new DC,this.Pi=new LC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=PS(this.serializer),this.Ii=new CC,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,T===!1&&ln(Jr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(K.FAILED_PRECONDITION,gg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new Gn(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async e=>{e.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>zh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((e=>this.isPrimary&&!e?this.Zi(t).next((()=>!1)):!!e&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(ys(t))return tt(Jr,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return tt(Jr,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return fu(t).get(yo).next((e=>k.resolve(this.es(e))))}ts(t){return zh(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,dg)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const r=ze(e,zo);return r.J().next((o=>{const u=this.ss(o,dg),c=o.filter((m=>u.indexOf(m)===-1));return k.forEach(c,(m=>r.delete(m.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const e of t)this.Ki.removeItem(this._s(e.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?k.resolve(!0):fu(t).get(yo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,mg)&&!this.us(e.ownerId)){if(this.es(e)&&this.networkEnabled)return!0;if(!this.es(e)){if(!e.allowTabSynchronization)throw new nt(K.FAILED_PRECONDITION,gg);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(t).J().next((r=>this.ss(r,mg).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||c&&m)return!0}return!1}))===void 0))})).next((e=>(this.isPrimary!==e&&tt(Jr,`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Yu,zo],(t=>{const e=new xg(t,Gn.ce);return this.Zi(e).next((()=>this.ts(e)))})),this.Ui.close(),this.Ps()}ss(t,e){return t.filter((r=>this.rs(r.updateTimeMs,e)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>zh(t).J().next((e=>this.ss(e,dg).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,e){return Qf.wt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new kC(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return Kf.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,e,r){tt(Jr,"Starting transaction:",t);const o=e==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?O2:g===17?xA:g===16?N2:g===15?fp:g===14?VA:g===13?DA:g===12?x2:g===11?CA:void ut(60245)})(this.Ni);let c;return this.Ui.runTransaction(t,o,u,(m=>(c=new xg(m,this.ci?this.ci.next():Gn.ce),e==="readwrite-primary"?this.Hi(c).next((g=>!!g||this.Yi(c))).next((g=>{if(!g)throw ln(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new nt(K.FAILED_PRECONDITION,vA);return r(c)})).next((g=>this.Xi(c).next((()=>g)))):this.Is(c).next((()=>r(c)))))).then((m=>(c.raiseOnCommittedEvent(),m)))}Is(t){return fu(t).get(yo).next((e=>{if(e!==null&&this.rs(e.leaseTimestampMs,mg)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new nt(K.FAILED_PRECONDITION,gg)}))}Xi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fu(t).put(yo,e)}static v(){return hs.v()}Zi(t){const e=fu(t);return e.get(yo).next((r=>this.es(r)?(tt(Jr,"Releasing primary lease."),e.delete(yo)):k.resolve()))}rs(t,e){const r=Date.now();return!(t<r-e)&&(!(t>r)||(ln(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Z0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){try{const e=this.Ki?.getItem(this._s(t))!==null;return tt(Jr,`Client '${t}' ${e?"is":"is not"} zombied in LocalStorage`),e}catch(e){return ln(Jr,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){ln("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function fu(s){return ze(s,Yu)}function zh(s){return ze(s,zo)}function eD(s,t){let e=s.projectId;return s.isDefaultDatabase||(e+="."+s.database),"firestore/"+t+"/"+e+"/"}class Cp{constructor(t,e,r,o){this.targetId=t,this.fromCache=e,this.Es=r,this.ds=o}static As(t,e){let r=Vt(),o=Vt();for(const u of e.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Cp(t,e.fromCache,r,o)}}class nD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class LS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Z0()?8:EA(Ue())>0?6:4})()}initialize(t,e){this.ps=t,this.indexManager=e,this.Rs=!0}getDocumentsMatchingQuery(t,e,r,o){const u={result:null};return this.ys(t,e).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,e,o,r).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new nD;return this.Ss(t,e,c).next((m=>{if(u.result=m,this.Vs)return this.bs(t,e,c,m.size)}))})).next((()=>u.result))}bs(t,e,r,o){return r.documentReadCount<this.fs?(So()<=Pt.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",bo(e),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(So()<=Pt.DEBUG&&tt("QueryEngine","Query:",bo(e),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(So()<=Pt.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",bo(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kn(e))):k.resolve())}ys(t,e){if(SE(e))return k.resolve(null);let r=Kn(e);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(e.limit!==null&&o===1&&(e=Ug(e,null,"F"),r=Kn(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const c=Vt(...u);return this.ps.getDocuments(t,c).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(e,m);return this.Cs(e,y,c,g.readTime)?this.ys(t,Ug(e,null,"F")):this.vs(t,y,e,g)}))))})))))}ws(t,e,r,o){return SE(e)||o.isEqual(gt.min())?k.resolve(null):this.ps.getDocuments(t,r).next((u=>{const c=this.Ds(e,u);return this.Cs(e,c,r,o)?k.resolve(null):(So()<=Pt.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bo(e)),this.vs(t,c,e,n2(o,Vu)).next((m=>m)))}))}Ds(t,e){let r=new Zt(JA(t));return e.forEach(((o,u)=>{$u(t,u)&&(r=r.add(u))})),r}Cs(t,e,r,o){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const u=t.limitType==="F"?e.last():e.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,e,r){return So()<=Pt.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",bo(e)),this.ps.getDocumentsMatchingQuery(t,e,Vn.min(),r)}vs(t,e,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(e.forEach((c=>{u=u.insert(c.key,c)})),u)))}}const Dp="LocalStore",iD=3e8;class rD{constructor(t,e,r,o){this.persistence=t,this.Fs=e,this.serializer=o,this.Ms=new he(Et),this.xs=new mr((u=>pa(u)),Xu),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new kS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ms)))}}function US(s,t,e,r){return new rD(s,t,e,r)}async function zS(s,t){const e=At(s);return await e.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return e.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,e.Bs(t),e.mutationQueue.getAllMutationBatches(r)))).next((u=>{const c=[],m=[];let g=Vt();for(const y of o){c.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return e.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:m})))}))}))}function sD(s,t){const e=At(s);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=e.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,T){const A=y.batch,I=A.keys();let B=k.resolve();return I.forEach((Z=>{B=B.next((()=>T.getEntry(g,Z))).next((Y=>{const W=y.docVersions.get(Z);ht(W!==null,48541),Y.version.compareTo(W)<0&&(A.applyToRemoteDocument(Y,y),Y.isValidDocument()&&(Y.setReadTime(y.commitVersion),T.addEntry(Y)))}))})),B.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(e,r,t,u).next((()=>u.apply(r))).next((()=>e.mutationQueue.performConsistencyCheck(r))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Vt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(t)))).next((()=>e.localDocuments.getDocuments(r,o)))}))}function BS(s){const t=At(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Pi.getLastRemoteSnapshotVersion(e)))}function aD(s,t){const e=At(s),r=t.snapshotVersion;let o=e.Ms;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=e.Ns.newChangeBuffer({trackRemovals:!0});o=e.Ms;const m=[];t.targetChanges.forEach(((T,A)=>{const I=o.get(A);if(!I)return;m.push(e.Pi.removeMatchingKeys(u,T.removedDocuments,A).next((()=>e.Pi.addMatchingKeys(u,T.addedDocuments,A))));let B=I.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?B=B.withResumeToken(Oe.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,r)),o=o.insert(A,B),(function(Y,W,ft){return Y.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=iD?!0:ft.addedDocuments.size+ft.modifiedDocuments.size+ft.removedDocuments.size>0})(I,B,T)&&m.push(e.Pi.updateTargetData(u,B))}));let g=Dn(),y=Vt();if(t.documentUpdates.forEach((T=>{t.resolvedLimboDocuments.has(T)&&m.push(e.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push(oD(u,c,t.documentUpdates).next((T=>{g=T.ks,y=T.qs}))),!r.isEqual(gt.min())){const T=e.Pi.getLastRemoteSnapshotVersion(u).next((A=>e.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(T)}return k.waitFor(m).next((()=>c.apply(u))).next((()=>e.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(e.Ms=o,u)))}function oD(s,t,e){let r=Vt(),o=Vt();return e.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let c=Dn();return e.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(gt.min())?(t.removeEntry(m,g.readTime),c=c.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),c=c.insert(m,g)):tt(Dp,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:o}}))}function lD(s,t){const e=At(s);return e.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=aa),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function uD(s,t){const e=At(s);return e.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return e.Pi.getTargetData(r,t).next((u=>u?(o=u,k.resolve(o)):e.Pi.allocateTargetId(r).next((c=>(o=new ir(t,c,"TargetPurposeListen",r.currentSequenceNumber),e.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=e.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(e.Ms=e.Ms.insert(r.targetId,r),e.xs.set(t,r.targetId)),r}))}async function Kg(s,t,e){const r=At(s),o=r.Ms.get(t),u=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",u,(c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ys(c))throw c;tt(Dp,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function t0(s,t,e){const r=At(s);let o=gt.min(),u=Vt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,T){const A=At(g),I=A.xs.get(T);return I!==void 0?k.resolve(A.Ms.get(I)):A.Pi.getTargetData(y,T)})(r,c,Kn(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,t,e?o:gt.min(),e?u:Vt()))).next((m=>(cD(r,Y2(t),m),{documents:m,Qs:u})))))}function cD(s,t,e){let r=s.Os.get(t)||gt.min();e.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class e0{constructor(){this.activeTargetIds=tC()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class jS{constructor(){this.Mo=new e0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t,e=!0){return e&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,e,r){this.xo[t]=e}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new e0,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class hD{Oo(t){}shutdown(){}}const n0="ConnectivityMonitor";class i0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(n0,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(n0,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Bh=null;function Qg(){return Bh===null?Bh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bh++,"0x"+Bh.toString(16)}const pg="RestConnection",fD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=e+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===hf?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,e,r,o,u){const c=Qg(),m=this.zo(t,e.toUriEncodedString());tt(pg,`Sending RPC '${t}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(m),T=Xo(y);return this.Jo(t,m,g,r,T).then((A=>(tt(pg,`Received RPC '${t}' ${c}: `,A),A)),(A=>{throw ma(pg,`RPC '${t}' ${c} failed with error: `,A,"url: ",m,"request:",r),A}))}Ho(t,e,r,o,u,c){return this.Go(t,e,r,o,u)}jo(t,e,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,e){const r=fD[t];return`${this.Uo}/v1/${e}:${r}`}terminate(){}}class mD{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}const We="WebChannelConnection";class gD extends dD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,r,o,u){const c=Qg();return new Promise(((m,g)=>{const y=new lA;y.setWithCredentials(!0),y.listenOnce(uA.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case qh.NO_ERROR:const A=y.getResponseJson();tt(We,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(A)),m(A);break;case qh.TIMEOUT:tt(We,`RPC '${t}' ${c} timed out`),g(new nt(K.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const I=y.getStatus();if(tt(We,`RPC '${t}' ${c} failed with status:`,I,"response text:",y.getResponseText()),I>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const Z=B?.error;if(Z&&Z.status&&Z.message){const Y=(function(ft){const dt=ft.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(dt)>=0?dt:K.UNKNOWN})(Z.status);g(new nt(Y,Z.message))}else g(new nt(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new nt(K.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{l_:t,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{tt(We,`RPC '${t}' ${c} completed.`)}}));const T=JSON.stringify(o);tt(We,`RPC '${t}' ${c} sending request:`,o),y.send(e,"POST",T,r,15)}))}T_(t,e,r){const o=Qg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=fA(),m=hA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,e,r),g.encodeInitMessageHeaders=!0;const T=u.join("");tt(We,`Creating RPC '${t}' stream ${o}: ${T}`,g);const A=c.createWebChannel(T,g);this.I_(A);let I=!1,B=!1;const Z=new mD({Yo:W=>{B?tt(We,`Not sending because RPC '${t}' stream ${o} is closed:`,W):(I||(tt(We,`Opening RPC '${t}' stream ${o} transport.`),A.open(),I=!0),tt(We,`RPC '${t}' stream ${o} sending:`,W),A.send(W))},Zo:()=>A.close()}),Y=(W,ft,dt)=>{W.listen(ft,(at=>{try{dt(at)}catch(Rt){setTimeout((()=>{throw Rt}),0)}}))};return Y(A,du.EventType.OPEN,(()=>{B||(tt(We,`RPC '${t}' stream ${o} transport opened.`),Z.o_())})),Y(A,du.EventType.CLOSE,(()=>{B||(B=!0,tt(We,`RPC '${t}' stream ${o} transport closed`),Z.a_(),this.E_(A))})),Y(A,du.EventType.ERROR,(W=>{B||(B=!0,ma(We,`RPC '${t}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),Z.a_(new nt(K.UNAVAILABLE,"The operation could not be completed")))})),Y(A,du.EventType.MESSAGE,(W=>{if(!B){const ft=W.data[0];ht(!!ft,16349);const dt=ft,at=dt?.error||dt[0]?.error;if(at){tt(We,`RPC '${t}' stream ${o} received error:`,at);const Rt=at.status;let bt=(function(b){const D=De[b];if(D!==void 0)return uS(D)})(Rt),_t=at.message;bt===void 0&&(bt=K.INTERNAL,_t="Unknown error status: "+Rt+" with message "+at.message),B=!0,Z.a_(new nt(bt,_t)),A.close()}else tt(We,`RPC '${t}' stream ${o} received:`,ft),Z.u_(ft)}})),Y(m,cA.STAT_EVENT,(W=>{W.stat===Ig.PROXY?tt(We,`RPC '${t}' stream ${o} detected buffering proxy`):W.stat===Ig.NOPROXY&&tt(We,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Z.__()}),0),Z}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((e=>e===t))}}function pD(){return typeof window<"u"?window:null}function Zh(){return typeof document<"u"?document:null}function Xf(s){return new yC(s,!0)}class qS{constructor(t,e,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=e,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const e=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,e-r);o>0&&tt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const r0="PersistentStream";class FS{constructor(t,e,r,o,u,c,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qS(t,e)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,e){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():e&&e.code===K.RESOURCE_EXHAUSTED?(ln(e.toString()),ln("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):e&&e.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(e)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),e=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===e&&this.G_(r,o)}),(r=>{t((()=>{const o=new nt(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,e){const r=this.W_(this.D_);this.stream=this.j_(t,e),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(r0,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return e=>{this.Mi.enqueueAndForget((()=>this.D_===t?e():(tt(r0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yD extends FS{constructor(t,e,r,o,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}j_(t,e){return this.connection.T_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const e=TC(this.serializer,t),r=(function(u){if(!("targetChange"in u))return gt.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?gt.min():c.readTime?cn(c.readTime):gt.min()})(t);return this.listener.H_(e,r)}Y_(t){const e={};e.database=jg(this.serializer),e.addTarget=(function(u,c){let m;const g=c.target;if(m=ff(g)?{documents:yS(u,g)}:{query:_S(u,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=fS(u,c.resumeToken);const y=zg(u,c.expectedCount);y!==null&&(m.expectedCount=y)}else if(c.snapshotVersion.compareTo(gt.min())>0){m.readTime=Ko(u,c.snapshotVersion.toTimestamp());const y=zg(u,c.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=AC(this.serializer,t);r&&(e.labels=r),this.q_(e)}Z_(t){const e={};e.database=jg(this.serializer),e.removeTarget=t,this.q_(e)}}class _D extends FS{constructor(t,e,r,o,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,o,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,e){return this.connection.T_("Write",t,e)}J_(t){return ht(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ht(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ht(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const e=EC(t.writeResults,t.commitTime),r=cn(t.commitTime);return this.listener.na(r,e)}ra(){const t={};t.database=jg(this.serializer),this.q_(t)}ea(t){const e={streamToken:this.lastStreamToken,writes:t.map((r=>gf(this.serializer,r)))};this.q_(e)}}class vD{}class TD extends vD{constructor(t,e,r,o){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new nt(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,e,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,Bg(e,r),o,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new nt(K.UNKNOWN,u.toString())}))}Ho(t,e,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(t,Bg(e,r),o,c,m,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new nt(K.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ED{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ln(e),this.aa=!1):tt("OnlineStateTracker",e)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ta="RemoteStore";class AD{constructor(t,e,r,o,u){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{ba(this)&&(tt(Ta,"Restarting streams for network reachability change."),await(async function(g){const y=At(g);y.Ea.add(4),await Zu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $f(y)})(this))}))})),this.Ra=new ED(r,o)}}async function $f(s){if(ba(s))for(const t of s.da)await t(!0)}async function Zu(s){for(const t of s.da)await t(!1)}function HS(s,t){const e=At(s);e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),Op(e)?Np(e):tl(e).O_()&&xp(e,t))}function Vp(s,t){const e=At(s),r=tl(e);e.Ia.delete(t),r.O_()&&GS(e,t),e.Ia.size===0&&(r.O_()?r.L_():ba(e)&&e.Ra.set("Unknown"))}function xp(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(gt.min())>0){const e=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}tl(s).Y_(t)}function GS(s,t){s.Va.Ue(t),tl(s).Z_(t)}function Np(s){s.Va=new dC({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),tl(s).start(),s.Ra.ua()}function Op(s){return ba(s)&&!tl(s).x_()&&s.Ia.size>0}function ba(s){return At(s).Ea.size===0}function KS(s){s.Va=void 0}async function SD(s){s.Ra.set("Online")}async function bD(s){s.Ia.forEach(((t,e)=>{xp(s,t)}))}async function ID(s,t){KS(s),Op(s)?(s.Ra.ha(t),Np(s)):s.Ra.set("Unknown")}async function wD(s,t,e){if(s.Ra.set("Online"),t instanceof hS&&t.state===2&&t.cause)try{await(async function(o,u){const c=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,c),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){tt(Ta,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Tf(s,r)}else if(t instanceof $h?s.Va.Ze(t):t instanceof cS?s.Va.st(t):s.Va.tt(t),!e.isEqual(gt.min()))try{const r=await BS(s.localStore);e.compareTo(r)>=0&&await(function(u,c){const m=u.Va.Tt(c);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,y)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(Oe.EMPTY_BYTE_STRING,T.snapshotVersion)),GS(u,g);const A=new ir(T.target,g,y,T.sequenceNumber);xp(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(s,e)}catch(r){tt(Ta,"Failed to raise snapshot:",r),await Tf(s,r)}}async function Tf(s,t,e){if(!ys(t))throw t;s.Ea.add(1),await Zu(s),s.Ra.set("Offline"),e||(e=()=>BS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{tt(Ta,"Retrying IndexedDB access"),await e(),s.Ea.delete(1),await $f(s)}))}function QS(s,t){return t().catch((e=>Tf(s,e,t)))}async function Wu(s){const t=At(s),e=gs(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:aa;for(;RD(t);)try{const o=await lD(t.localStore,r);if(o===null){t.Ta.length===0&&e.L_();break}r=o.batchId,CD(t,o)}catch(o){await Tf(t,o)}YS(t)&&XS(t)}function RD(s){return ba(s)&&s.Ta.length<10}function CD(s,t){s.Ta.push(t);const e=gs(s);e.O_()&&e.X_&&e.ea(t.mutations)}function YS(s){return ba(s)&&!gs(s).x_()&&s.Ta.length>0}function XS(s){gs(s).start()}async function DD(s){gs(s).ra()}async function VD(s){const t=gs(s);for(const e of s.Ta)t.ea(e.mutations)}async function xD(s,t,e){const r=s.Ta.shift(),o=vp.from(r,t,e);await QS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Wu(s)}async function ND(s,t){t&&gs(s).X_&&await(async function(r,o){if((function(c){return cC(c)&&c!==K.ABORTED})(o.code)){const u=r.Ta.shift();gs(r).B_(),await QS(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Wu(r)}})(s,t),YS(s)&&XS(s)}async function s0(s,t){const e=At(s);e.asyncQueue.verifyOperationInProgress(),tt(Ta,"RemoteStore received new credentials");const r=ba(e);e.Ea.add(3),await Zu(e),r&&e.Ra.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await $f(e)}async function OD(s,t){const e=At(s);t?(e.Ea.delete(2),await $f(e)):t||(e.Ea.add(2),await Zu(e),e.Ra.set("Unknown"))}function tl(s){return s.ma||(s.ma=(function(e,r,o){const u=At(e);return u.sa(),new yD(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:SD.bind(null,s),t_:bD.bind(null,s),r_:ID.bind(null,s),H_:wD.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),Op(s)?Np(s):s.Ra.set("Unknown")):(await s.ma.stop(),KS(s))}))),s.ma}function gs(s){return s.fa||(s.fa=(function(e,r,o){const u=At(e);return u.sa(),new _D(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:DD.bind(null,s),r_:ND.bind(null,s),ta:VD.bind(null,s),na:xD.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Wu(s)):(await s.fa.stop(),s.Ta.length>0&&(tt(Ta,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Mp{constructor(t,e,r,o,u){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,o,u){const c=Date.now()+r,m=new Mp(t,e,c,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(s,t){if(ln("AsyncQueue",`${t}: ${s}`),ys(s))return new nt(K.UNAVAILABLE,`${t}: ${s}`);throw s}class Do{static emptySet(t){return new Do(t.comparator)}constructor(t){this.comparator=t?(e,r)=>t(e,r)||it.comparator(e.key,r.key):(e,r)=>it.comparator(e.key,r.key),this.keyedMap=mu(),this.sortedSet=new he(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,r)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const o=e.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new Do;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class a0{constructor(){this.ga=new he(it.comparator)}track(t){const e=t.doc.key,r=this.ga.get(e);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(e,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(e):t.type===1&&r.type===2?this.ga=this.ga.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(e,{type:2,doc:t.doc}):ut(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(e,t)}ya(){const t=[];return this.ga.inorderTraversal(((e,r)=>{t.push(r)})),t}}class Qo{constructor(t,e,r,o,u,c,m,g,y){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,e,r,o,u){const c=[];return e.forEach((m=>{c.push({type:0,doc:m})})),new Qo(t,e,Do.emptySet(e),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&jf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let o=0;o<e.length;o++)if(e[o].type!==r[o].type||!e[o].doc.isEqual(r[o].doc))return!1;return!0}}class MD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class PD{constructor(){this.queries=o0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,r){const o=At(e),u=o.queries;o.queries=o0(),u.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new nt(K.ABORTED,"Firestore shutting down"))}}function o0(){return new mr((s=>$A(s)),jf)}async function kD(s,t){const e=At(s);let r=3;const o=t.query;let u=e.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new MD,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await e.onListen(o,!0);break;case 1:u.wa=await e.onListen(o,!1);break;case 2:await e.onFirstRemoteStoreListen(o)}}catch(c){const m=Pp(c,`Initialization of query '${bo(t.query)}' failed`);return void t.onError(m)}e.queries.set(o,u),u.Sa.push(t),t.va(e.onlineState),u.wa&&t.Fa(u.wa)&&kp(e)}async function LD(s,t){const e=At(s),r=t.query;let o=3;const u=e.queries.get(r);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function UD(s,t){const e=At(s);let r=!1;for(const o of t){const u=o.query,c=e.queries.get(u);if(c){for(const m of c.Sa)m.Fa(o)&&(r=!0);c.wa=o}}r&&kp(e)}function zD(s,t,e){const r=At(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(e);r.queries.delete(t)}function kp(s){s.Ca.forEach((t=>{t.next()}))}var Yg,l0;(l0=Yg||(Yg={})).Ma="default",l0.Cache="cache";class BD{constructor(t,e,r){this.query=t,this.xa=e,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new Qo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),e=!0):this.La(t,this.onlineState)&&(this.ka(t),e=!0),this.Na=t,e}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let e=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),e=!0),e}La(t,e){if(!t.fromCache||!this.Da())return!0;const r=e!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const e=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}ka(t){t=Qo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Yg.Cache}}class $S{constructor(t){this.key=t}}class JS{constructor(t){this.key=t}}class jD{constructor(t,e){this.query=t,this.Ya=e,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=JA(t),this.tu=new Do(this.eu)}get nu(){return this.Ya}ru(t,e){const r=e?e.iu:new a0,o=e?e.tu:this.tu;let u=e?e.mutatedKeys:this.mutatedKeys,c=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((T,A)=>{const I=o.get(T),B=$u(this.query,A)?A:null,Z=!!I&&this.mutatedKeys.has(I.key),Y=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let W=!1;I&&B?I.data.isEqual(B.data)?Z!==Y&&(r.track({type:3,doc:B}),W=!0):this.su(I,B)||(r.track({type:2,doc:B}),W=!0,(g&&this.eu(B,g)>0||y&&this.eu(B,y)<0)&&(m=!0)):!I&&B?(r.track({type:0,doc:B}),W=!0):I&&!B&&(r.track({type:1,doc:I}),W=!0,(g||y)&&(m=!0)),W&&(B?(c=c.add(B),u=Y?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const T=this.query.limitType==="F"?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:c,iu:r,Cs:m,mutatedKeys:u}}su(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((T,A)=>(function(B,Z){const Y=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{Rt:W})}};return Y(B)-Y(Z)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(r),o=o??!1;const m=e&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new Qo(this.query,t.tu,u,c,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((e=>this.Ya=this.Ya.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ya=this.Ya.delete(e))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const e=[];return t.forEach((r=>{this.Xa.has(r)||e.push(new JS(r))})),this.Xa.forEach((r=>{t.has(r)||e.push(new $S(r))})),e}cu(t){this.Ya=t.Qs,this.Xa=Vt();const e=this.ru(t.documents);return this.applyChanges(e,!0)}lu(){return Qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lp="SyncEngine";class qD{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class FD{constructor(t){this.key=t,this.hu=!1}}class HD{constructor(t,e,r,o,u,c){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new mr((m=>$A(m)),jf),this.Iu=new Map,this.Eu=new Set,this.du=new he(it.comparator),this.Au=new Map,this.Ru=new Ip,this.Vu={},this.mu=new Map,this.fu=va.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GD(s,t,e=!0){const r=i1(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await ZS(r,t,e,!0),o}async function KD(s,t){const e=i1(s);await ZS(e,t,!0,!1)}async function ZS(s,t,e,r){const o=await uD(s.localStore,Kn(t)),u=o.targetId,c=s.sharedClientState.addLocalQueryTarget(u,e);let m;return r&&(m=await QD(s,t,u,c==="current",o.resumeToken)),s.isPrimaryClient&&e&&HS(s.remoteStore,o),m}async function QD(s,t,e,r,o){s.pu=(A,I,B)=>(async function(Y,W,ft,dt){let at=W.view.ru(ft);at.Cs&&(at=await t0(Y.localStore,W.query,!1).then((({documents:w})=>W.view.ru(w,at))));const Rt=dt&&dt.targetChanges.get(W.targetId),bt=dt&&dt.targetMismatches.get(W.targetId)!=null,_t=W.view.applyChanges(at,Y.isPrimaryClient,Rt,bt);return c0(Y,W.targetId,_t.au),_t.snapshot})(s,A,I,B);const u=await t0(s.localStore,t,!0),c=new jD(t,u.Qs),m=c.ru(u.documents),g=Ju.createSynthesizedTargetChangeForCurrentChange(e,r&&s.onlineState!=="Offline",o),y=c.applyChanges(m,s.isPrimaryClient,g);c0(s,e,y.au);const T=new qD(t,e,c);return s.Tu.set(t,T),s.Iu.has(e)?s.Iu.get(e).push(t):s.Iu.set(e,[t]),y.snapshot}async function YD(s,t,e){const r=At(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((c=>!jf(c,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Kg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),e&&Vp(r.remoteStore,o.targetId),Xg(r,o.targetId)})).catch(Sa)):(Xg(r,o.targetId),await Kg(r.localStore,o.targetId,!0))}async function XD(s,t){const e=At(s),r=e.Tu.get(t),o=e.Iu.get(r.targetId);e.isPrimaryClient&&o.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Vp(e.remoteStore,r.targetId))}async function $D(s,t,e){const r=r1(s);try{const o=await(function(c,m){const g=At(c),y=$t.now(),T=m.reduce(((B,Z)=>B.add(Z.key)),Vt());let A,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let Z=Dn(),Y=Vt();return g.Ns.getEntries(B,T).next((W=>{Z=W,Z.forEach(((ft,dt)=>{dt.isValidDocument()||(Y=Y.add(ft))}))})).next((()=>g.localDocuments.getOverlayedDocuments(B,Z))).next((W=>{A=W;const ft=[];for(const dt of m){const at=lC(dt,A.get(dt.key).overlayedDocument);at!=null&&ft.push(new gr(dt.key,at,jA(at.value.mapValue),un.exists(!0)))}return g.mutationQueue.addMutationBatch(B,y,ft,m)})).next((W=>{I=W;const ft=W.applyToLocalDocumentSet(A,Y);return g.documentOverlayCache.saveOverlays(B,W.batchId,ft)}))})).then((()=>({batchId:I.batchId,changes:WA(A)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(c,m,g){let y=c.Vu[c.currentUser.toKey()];y||(y=new he(Et)),y=y.insert(m,g),c.Vu[c.currentUser.toKey()]=y})(r,o.batchId,e),await tc(r,o.changes),await Wu(r.remoteStore)}catch(o){const u=Pp(o,"Failed to persist write");e.reject(u)}}async function WS(s,t){const e=At(s);try{const r=await aD(e.localStore,t);t.targetChanges.forEach(((o,u)=>{const c=e.Au.get(u);c&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ht(c.hu,14607):o.removedDocuments.size>0&&(ht(c.hu,42227),c.hu=!1))})),await tc(e,r,t)}catch(r){await Sa(r)}}function u0(s,t,e){const r=At(s);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const o=[];r.Tu.forEach(((u,c)=>{const m=c.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(c,m){const g=At(c);g.onlineState=m;let y=!1;g.queries.forEach(((T,A)=>{for(const I of A.Sa)I.va(m)&&(y=!0)})),y&&kp(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function JD(s,t,e){const r=At(s);r.sharedClientState.updateQueryState(t,"rejected",e);const o=r.Au.get(t),u=o&&o.key;if(u){let c=new he(it.comparator);c=c.insert(u,ge.newNoDocument(u,gt.min()));const m=Vt().add(u),g=new Gf(gt.min(),new Map,new he(Et),c,m);await WS(r,g),r.du=r.du.remove(u),r.Au.delete(t),Up(r)}else await Kg(r.localStore,t,!1).then((()=>Xg(r,t,e))).catch(Sa)}async function ZD(s,t){const e=At(s),r=t.batch.batchId;try{const o=await sD(e.localStore,t);e1(e,r,null),t1(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await tc(e,o)}catch(o){await Sa(o)}}async function WD(s,t,e){const r=At(s);try{const o=await(function(c,m){const g=At(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let T;return g.mutationQueue.lookupMutationBatch(y,m).next((A=>(ht(A!==null,37113),T=A.keys(),g.mutationQueue.removeMutationBatch(y,A)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T))).next((()=>g.localDocuments.getDocuments(y,T)))}))})(r.localStore,t);e1(r,t,e),t1(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await tc(r,o)}catch(o){await Sa(o)}}function t1(s,t){(s.mu.get(t)||[]).forEach((e=>{e.resolve()})),s.mu.delete(t)}function e1(s,t,e){const r=At(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(e?u.reject(e):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function Xg(s,t,e=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),e&&s.Pu.yu(r,e);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||n1(s,r)}))}function n1(s,t){s.Eu.delete(t.path.canonicalString());const e=s.du.get(t);e!==null&&(Vp(s.remoteStore,e),s.du=s.du.remove(t),s.Au.delete(e),Up(s))}function c0(s,t,e){for(const r of e)r instanceof $S?(s.Ru.addReference(r.key,t),tV(s,r)):r instanceof JS?(tt(Lp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||n1(s,r.key)):ut(19791,{wu:r})}function tV(s,t){const e=t.key,r=e.path.canonicalString();s.du.get(e)||s.Eu.has(r)||(tt(Lp,"New document in limbo: "+e),s.Eu.add(r),Up(s))}function Up(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const e=new it(Gt.fromString(t)),r=s.fu.next();s.Au.set(r,new FD(e)),s.du=s.du.insert(e,r),HS(s.remoteStore,new ir(Kn(Bf(e.path)),r,"TargetPurposeLimboResolution",Gn.ce))}}async function tc(s,t,e){const r=At(s),o=[],u=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,t,e).then((y=>{if((y||e)&&r.isPrimaryClient){const T=y?!y.fromCache:e?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Cp.As(g.targetId,y);u.push(T)}})))})),await Promise.all(c),r.Pu.H_(o),await(async function(g,y){const T=At(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>k.forEach(y,(I=>k.forEach(I.Es,(B=>T.persistence.referenceDelegate.addReference(A,I.targetId,B))).next((()=>k.forEach(I.ds,(B=>T.persistence.referenceDelegate.removeReference(A,I.targetId,B)))))))))}catch(A){if(!ys(A))throw A;tt(Dp,"Failed to update sequence numbers: "+A)}for(const A of y){const I=A.targetId;if(!A.fromCache){const B=T.Ms.get(I),Z=B.snapshotVersion,Y=B.withLastLimboFreeSnapshotVersion(Z);T.Ms=T.Ms.insert(I,Y)}}})(r.localStore,u))}async function eV(s,t){const e=At(s);if(!e.currentUser.isEqual(t)){tt(Lp,"User change. New user:",t.toKey());const r=await zS(e.localStore,t);e.currentUser=t,(function(u,c){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new nt(K.CANCELLED,c))}))})),u.mu.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await tc(e,r.Ls)}}function nV(s,t){const e=At(s),r=e.Au.get(t);if(r&&r.hu)return Vt().add(r.key);{let o=Vt();const u=e.Iu.get(t);if(!u)return o;for(const c of u){const m=e.Tu.get(c);o=o.unionWith(m.view.nu)}return o}}function i1(s){const t=At(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=WS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=JD.bind(null,t),t.Pu.H_=UD.bind(null,t.eventManager),t.Pu.yu=zD.bind(null,t.eventManager),t}function r1(s){const t=At(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZD.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WD.bind(null,t),t}class Fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Xf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,e){return null}Mu(t,e){return null}vu(t){return US(this.persistence,new LS,t.initialUser,this.serializer)}Cu(t){return new wp(Yf.mi,this.serializer)}Du(t){return new jS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fu.provider={build:()=>new Fu};class iV extends Fu{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,e){ht(this.persistence.referenceDelegate instanceof vf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new NS(r,t.asyncQueue,e)}Cu(t){const e=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new wp((r=>vf.mi(r,e)),this.serializer)}}class rV extends Fu{constructor(t,e,r){super(),this.xu=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await r1(this.xu.syncEngine),await Wu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return US(this.persistence,new LS,t.initialUser,this.serializer)}Fu(t,e){const r=this.persistence.referenceDelegate.garbageCollector;return new NS(r,t.asyncQueue,e)}Mu(t,e){const r=new a2(e,this.persistence);return new s2(t.asyncQueue,r)}Cu(t){const e=eD(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new Rp(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,pD(),Zh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new jS}}class Ef{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eV.bind(null,this.syncEngine),await OD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new PD})()}createDatastore(t){const e=Xf(t.databaseInfo.databaseId),r=(function(u){return new gD(u)})(t.databaseInfo);return(function(u,c,m,g){return new TD(u,c,m,g)})(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return(function(r,o,u,c,m){return new AD(r,o,u,c,m)})(this.localStore,this.datastore,t.asyncQueue,(e=>u0(this.syncEngine,e,0)),(function(){return i0.v()?new i0:new hD})())}createSyncEngine(t,e){return(function(o,u,c,m,g,y,T){const A=new HD(o,u,c,m,g,y);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){await(async function(e){const r=At(e);tt(Ta,"RemoteStore shutting down."),r.Ea.add(5),await Zu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ef.provider={build:()=>new Ef};class sV{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):ln("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const ps="FirestoreClient";class aV{constructor(t,e,r,o,u){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=o,this.user=$e.UNAUTHENTICATED,this.clientId=ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async c=>{tt(ps,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(tt(ps,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Pp(e,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function yg(s,t){s.asyncQueue.verifyOperationInProgress(),tt(ps,"Initializing OfflineComponentProvider");const e=s.configuration;await t.initialize(e);let r=e.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await zS(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function h0(s,t){s.asyncQueue.verifyOperationInProgress();const e=await oV(s);tt(ps,"Initializing OnlineComponentProvider"),await t.initialize(e,s.configuration),s.setCredentialChangeListener((r=>s0(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>s0(t.remoteStore,o))),s._onlineComponents=t}async function oV(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){tt(ps,"Using user provided OfflineComponentProvider");try{await yg(s,s._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(e))throw e;ma("Error using user provided cache. Falling back to memory cache: "+e),await yg(s,new Fu)}}else tt(ps,"Using default OfflineComponentProvider"),await yg(s,new iV(void 0));return s._offlineComponents}async function s1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(tt(ps,"Using user provided OnlineComponentProvider"),await h0(s,s._uninitializedComponentsProvider._online)):(tt(ps,"Using default OnlineComponentProvider"),await h0(s,new Ef))),s._onlineComponents}function lV(s){return s1(s).then((t=>t.syncEngine))}async function f0(s){const t=await s1(s),e=t.eventManager;return e.onListen=GD.bind(null,t.syncEngine),e.onUnlisten=YD.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=KD.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=XD.bind(null,t.syncEngine),e}function a1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}const d0=new Map;const o1="firestore.googleapis.com",m0=!0;class g0{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new nt(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o1,this.ssl=m0}else this.host=t.host,this.ssl=t.ssl??m0;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=CS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<UC)throw new nt(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}e2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a1(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jf{constructor(t,e,r,o){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g0(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new GR;switch(r.type){case"firstParty":return new XR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new nt(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const r=d0.get(e);r&&(tt("ComponentProvider","Removing Datastore"),d0.delete(e),r.terminate())})(this),Promise.resolve()}}function uV(s,t,e,r={}){s=ar(s,Jf);const o=Xo(t),u=s._getSettings(),c={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${e}`;o&&(X0(`https://${m}`),$0("Firestore",!0)),u.host!==o1&&u.host!==m&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!ha(g,c)&&(s._setSettings(g),r.mockUserToken)){let y,T;if(typeof r.mockUserToken=="string")y=r.mockUserToken,T=$e.MOCK_USER;else{y=vw(r.mockUserToken,s._app?.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new nt(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new $e(A)}s._authCredentials=new KR(new mA(y,T))}}class Ia{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ia(this.firestore,t,this._query)}}class Ne{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ne(this.firestore,t,this._key)}toJSON(){return{type:Ne._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,e,r){if(Qu(e,Ne._jsonSchema))return new Ne(t,r||null,new it(Gt.fromString(e.referencePath)))}}Ne._jsonSchemaVersion="firestore/documentReference/1.0",Ne._jsonSchema={type:xe("string",Ne._jsonSchemaVersion),referencePath:xe("string")};class fs extends Ia{constructor(t,e,r){super(t,e,Bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ne(this.firestore,null,new it(t))}withConverter(t){return new fs(this.firestore,t,this._path)}}function Af(s,t,...e){if(s=rn(s),pA("collection","path",t),s instanceof Jf){const r=Gt.fromString(t,...e);return rE(r),new fs(s,null,r)}{if(!(s instanceof Ne||s instanceof fs))throw new nt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Gt.fromString(t,...e));return rE(r),new fs(s.firestore,null,r)}}function Sf(s,t,...e){if(s=rn(s),arguments.length===1&&(t=ap.newId()),pA("doc","path",t),s instanceof Jf){const r=Gt.fromString(t,...e);return iE(r),new Ne(s,null,new it(r))}{if(!(s instanceof Ne||s instanceof fs))throw new nt(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Gt.fromString(t,...e));return iE(r),new Ne(s.firestore,s instanceof fs?s.converter:null,new it(r))}}const p0="AsyncQueue";class y0{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qS(this,"async_queue_retry"),this._c=()=>{const r=Zh();r&&tt(p0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const e=Zh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const e=Zh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const e=new cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ys(t))throw t;tt(p0,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const e=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,ln("INTERNAL UNHANDLED ERROR: ",_0(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=e,e}enqueueAfterDelay(t,e,r){this.uc(),this.oc.indexOf(t)>-1&&(e=0);const o=Mp.createAndSchedule(this,t,e,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ut(47125,{Pc:_0(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const e of this.tc)if(e.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((e,r)=>e.targetTimeMs-r.targetTimeMs));for(const e of this.tc)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const e=this.tc.indexOf(t);this.tc.splice(e,1)}}function _0(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}function v0(s){return(function(e,r){if(typeof e!="object"||e===null)return!1;const o=e;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class Ea extends Jf{constructor(t,e,r,o){super(t,e,r,o),this.type="firestore",this._queue=new y0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new y0(t),this._firestoreClient=void 0,await t}}}function cV(s,t){const e=typeof s=="object"?s:rA(),r=typeof s=="string"?s:hf,o=rp(e,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=yw("firestore");u&&uV(o,...u)}return o}function l1(s){if(s._terminated)throw new nt(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||u1(s),s._firestoreClient}function u1(s){const t=s._freezeSettings(),e=(function(o,u,c,m){return new P2(o,u,c,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,a1(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new aV(s._authCredentials,s._appCheckCredentials,s._queue,e,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}function hV(s,t){ma("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=s._freezeSettings();return fV(s,Ef.provider,{build:r=>new rV(r,e.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}function fV(s,t,e){if((s=ar(s,Ea))._firestoreClient||s._terminated)throw new nt(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new nt(K.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:e},u1(s)}class Hn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hn(Oe.fromBase64String(t))}catch(e){throw new nt(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hn(Oe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Qu(t,Hn._jsonSchema))return Hn.fromBase64String(t.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:xe("string",Hn._jsonSchemaVersion),bytes:xe("string")};class Zf{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new nt(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class zp{constructor(t){this._methodName=t}}class Oi{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new nt(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new nt(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Et(this._lat,t._lat)||Et(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(t){if(Qu(t,Oi._jsonSchema))return new Oi(t.latitude,t.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:xe("string",Oi._jsonSchemaVersion),latitude:xe("number"),longitude:xe("number")};class Mi{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Qu(t,Mi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e=="number")))return new Mi(t.vectorValues);throw new nt(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:xe("string",Mi._jsonSchemaVersion),vectorValues:xe("object")};const dV=/^__.*__$/;class mV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new gr(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wo(t,this.data,e,this.fieldTransforms)}}class c1{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new gr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function h1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ac:s})}}class Bp{constructor(t,e,r,o,u,c){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Bp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.gc(t),r}yc(t){const e=this.path?.child(t),r=this.Vc({path:e,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return bf(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(h1(this.Ac)&&dV.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class gV{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Xf(t)}Cc(t,e,r,o=!1){return new Bp({Ac:t,methodName:e,Dc:r,path:fe.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jp(s){const t=s._freezeSettings(),e=Xf(s._databaseId);return new gV(s._databaseId,!!t.ignoreUndefinedProperties,e)}function pV(s,t,e,r,o,u={}){const c=s.Cc(u.merge||u.mergeFields?2:0,t,e,o);qp("Data must be an object, but it was:",c,r);const m=f1(r,c);let g,y;if(u.merge)g=new _n(c.fieldMask),y=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const I=$g(t,A,e);if(!c.contains(I))throw new nt(K.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);m1(T,I)||T.push(I)}g=new _n(T),y=c.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,y=c.fieldTransforms;return new mV(new en(m),g,y)}class Wf extends zp{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Wf}}function yV(s,t,e,r){const o=s.Cc(1,t,e);qp("Data must be an object, but it was:",o,r);const u=[],c=en.empty();_s(r,((g,y)=>{const T=Fp(t,g,e);y=rn(y);const A=o.yc(T);if(y instanceof Wf)u.push(T);else{const I=ec(y,A);I!=null&&(u.push(T),c.set(T,I))}}));const m=new _n(u);return new c1(c,m,o.fieldTransforms)}function _V(s,t,e,r,o,u){const c=s.Cc(1,t,e),m=[$g(t,r,e)],g=[o];if(u.length%2!=0)throw new nt(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<u.length;I+=2)m.push($g(t,u[I])),g.push(u[I+1]);const y=[],T=en.empty();for(let I=m.length-1;I>=0;--I)if(!m1(y,m[I])){const B=m[I];let Z=g[I];Z=rn(Z);const Y=c.yc(B);if(Z instanceof Wf)y.push(B);else{const W=ec(Z,Y);W!=null&&(y.push(B),T.set(B,W))}}const A=new _n(y);return new c1(T,A,c.fieldTransforms)}function vV(s,t,e,r=!1){return ec(e,s.Cc(r?4:3,t))}function ec(s,t){if(d1(s=rn(s)))return qp("Unsupported field value:",t,s),f1(s,t);if(s instanceof zp)return(function(r,o){if(!h1(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let c=0;for(const m of r){let g=ec(m,o.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=$t.fromDate(r);return{timestampValue:Ko(o.serializer,u)}}if(r instanceof $t){const u=new $t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ko(o.serializer,u)}}if(r instanceof Oi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:fS(o.serializer,r._byteString)};if(r instanceof Ne){const u=o.databaseId,c=r.firestore._databaseId;if(!c.isEqual(u))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ap(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Mi)return(function(c,m){return{mapValue:{fields:{[mp]:{stringValue:gp},[Bo]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return yp(m.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Nf(r)}`)})(s,t)}function f1(s,t){const e={};return NA(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):_s(s,((r,o)=>{const u=ec(o,t.mc(r));u!=null&&(e[r]=u)})),{mapValue:{fields:e}}}function d1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $t||s instanceof Oi||s instanceof Hn||s instanceof Ne||s instanceof zp||s instanceof Mi)}function qp(s,t,e){if(!d1(e)||!yA(e)){const r=Nf(e);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function $g(s,t,e){if((t=rn(t))instanceof Zf)return t._internalPath;if(typeof t=="string")return Fp(s,t);throw bf("Field path arguments must be of type string or ",s,!1,void 0,e)}const TV=new RegExp("[~\\*/\\[\\]]");function Fp(s,t,e){if(t.search(TV)>=0)throw bf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,e);try{return new Zf(...t.split("."))._internalPath}catch{throw bf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,e)}}function bf(s,t,e,r,o){const u=r&&!r.isEmpty(),c=o!==void 0;let m=`Function ${t}() called with invalid data`;e&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${r}`),c&&(g+=` in document ${o}`),g+=")"),new nt(K.INVALID_ARGUMENT,m+s+g)}function m1(s,t){return s.some((e=>e.isEqual(t)))}class g1{constructor(t,e,r,o,u){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new EV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Hp("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class EV extends g1{data(){return super.data()}}function Hp(s,t){return typeof t=="string"?Fp(s,t):t instanceof Zf?t._internalPath:t._delegate._internalPath}function AV(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new nt(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}class p1 extends Gp{}function y1(s,t,...e){let r=[];t instanceof Gp&&r.push(t),r=r.concat(e),(function(u){const c=u.filter((g=>g instanceof Qp)).length,m=u.filter((g=>g instanceof Kp)).length;if(c>1||c>0&&m>0)throw new nt(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Kp extends p1{constructor(t,e,r){super(),this._field=t,this._op=e,this._value=r,this.type="where"}static _create(t,e,r){return new Kp(t,e,r)}_apply(t){const e=this._parse(t);return v1(t._query,e),new Ia(t.firestore,t.converter,Lg(t._query,e))}_parse(t){const e=jp(t.firestore);return(function(u,c,m,g,y,T,A){let I;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new nt(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){E0(A,T);const Z=[];for(const Y of A)Z.push(T0(g,u,Y));I={arrayValue:{values:Z}}}else I=T0(g,u,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||E0(A,T),I=vV(m,c,A,T==="in"||T==="not-in");return kt.create(y,T,I)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Qp extends Gp{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Qp(t,e)}_parse(t){const e=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return e.length===1?e[0]:Jt.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(o,u){let c=o;const m=u.getFlattenedFilters();for(const g of m)v1(c,g),c=Lg(c,g)})(t._query,e),new Ia(t.firestore,t.converter,Lg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yp extends p1{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Yp(t,e)}_apply(t){const e=(function(o,u,c){if(o.startAt!==null)throw new nt(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new nt(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(u,c)})(t._query,this._field,this._direction);return new Ia(t.firestore,t.converter,(function(o,u){const c=o.explicitOrderBy.concat([u]);return new Zo(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,e))}}function _1(s,t="asc"){const e=t,r=Hp("orderBy",s);return Yp._create(r,e)}function T0(s,t,e){if(typeof(e=rn(e))=="string"){if(e==="")throw new nt(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XA(t)&&e.indexOf("/")!==-1)throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Gt.fromString(e));if(!it.isDocumentKey(r))throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uu(s,new it(r))}if(e instanceof Ne)return Uu(s,e._key);throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(e)}.`)}function E0(s,t){if(!Array.isArray(s)||s.length===0)throw new nt(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function v1(s,t){const e=(function(o,u){for(const c of o)for(const m of c.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new nt(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class SV{convertValue(t,e="none"){switch(ds(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ur(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ut(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return _s(t,((o,u)=>{r[o]=this.convertValue(u,e)})),r}convertVectorValue(t){const e=t.fields?.[Bo].arrayValue?.values?.map((r=>ce(r.doubleValue)));return new Mi(e)}convertGeoPoint(t){return new Oi(ce(t.latitude),ce(t.longitude))}convertArray(t,e){return(t.values||[]).map((r=>this.convertValue(r,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Uf(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(ku(t));default:return null}}convertTimestamp(t){const e=lr(t);return new $t(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Gt.fromString(t);ht(AS(r),9688,{name:t});const o=new ga(r.get(1),r.get(3)),u=new it(r.popFirst(5));return o.isEqual(e)||ln(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),u}}function bV(s,t,e){let r;return r=s?s.toFirestore(t):t,r}class yu{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ua extends g1{constructor(t,e,r,o,u,c){super(t,e,r,o,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Hp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,e={};return e.type=ua._jsonSchemaVersion,e.bundle="",e.bundleSource="DocumentSnapshot",e.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?e:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),e.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),e)}}ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",ua._jsonSchema={type:xe("string",ua._jsonSchemaVersion),bundleSource:xe("string","DocumentSnapshot"),bundleName:xe("string"),bundle:xe("string")};class Wh extends ua{data(t={}){return super.data(t)}}class Vo{constructor(t,e,r,o){this._firestore=t,this._userDataWriter=e,this._snapshot=o,this.metadata=new yu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((r=>{t.call(e,new Wh(this._firestore,this._userDataWriter,r.key,r,new yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new nt(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((m=>{const g=new Wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),T=c.indexOf(m.doc.key)),{type:IV(m.type),doc:g,oldIndex:y,newIndex:T}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Vo._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const e=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(e.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function IV(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:s})}}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:xe("string",Vo._jsonSchemaVersion),bundleSource:xe("string","QuerySnapshot"),bundleName:xe("string"),bundle:xe("string")};class T1 extends SV{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ne(this.firestore,null,e)}}function wV(s,t,e,...r){s=ar(s,Ne);const o=ar(s.firestore,Ea),u=jp(o);let c;return c=typeof(t=rn(t))=="string"||t instanceof Zf?_V(u,"updateDoc",s._key,t,e,r):yV(u,"updateDoc",s._key,t),Xp(o,[c.toMutation(s._key,un.exists(!0))])}function E1(s){return Xp(ar(s.firestore,Ea),[new Hf(s._key,un.none())])}function A1(s,t){const e=ar(s.firestore,Ea),r=Sf(s),o=bV(s.converter,t);return Xp(e,[pV(jp(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then((()=>r))}function S1(s,...t){s=rn(s);let e={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||v0(t[r])||(e=t[r++]);const o={includeMetadataChanges:e.includeMetadataChanges,source:e.source};if(v0(t[r])){const g=t[r];t[r]=g.next?.bind(g),t[r+1]=g.error?.bind(g),t[r+2]=g.complete?.bind(g)}let u,c,m;if(s instanceof Ne)c=ar(s.firestore,Ea),m=Bf(s._key.path),u={next:g=>{t[r]&&t[r](RV(c,s,g))},error:t[r+1],complete:t[r+2]};else{const g=ar(s,Ia);c=ar(g.firestore,Ea),m=g._query;const y=new T1(c);u={next:T=>{t[r]&&t[r](new Vo(c,y,g,T))},error:t[r+1],complete:t[r+2]},AV(s._query)}return(function(y,T,A,I){const B=new sV(I),Z=new BD(T,B,A);return y.asyncQueue.enqueueAndForget((async()=>kD(await f0(y),Z))),()=>{B.Nu(),y.asyncQueue.enqueueAndForget((async()=>LD(await f0(y),Z)))}})(l1(c),m,o,u)}function Xp(s,t){return(function(r,o){const u=new cs;return r.asyncQueue.enqueueAndForget((async()=>$D(await lV(r),o,u))),u.promise})(l1(s),t)}function RV(s,t,e){const r=e.docs.get(t._key),o=new T1(s);return new ua(s,o,t._key,r,new yu(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(o){Jo=o})($o),Mo(new fa("firestore",((r,{instanceIdentifier:o,options:u})=>{const c=r.getProvider("app").getImmediate(),m=new Ea(new QR(r.getProvider("auth-internal")),new $R(c,r.getProvider("app-check-internal")),(function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new nt(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(y.options.projectId,T)})(c,o),c);return u={useFetchStreams:e,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),ls(WT,tE,t),ls(WT,tE,"esm2020")})();function b1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CV=b1,I1=new Gu("auth","Firebase",b1());const If=new np("@firebase/auth");function DV(s,...t){If.logLevel<=Pt.WARN&&If.warn(`Auth (${$o}): ${s}`,...t)}function tf(s,...t){If.logLevel<=Pt.ERROR&&If.error(`Auth (${$o}): ${s}`,...t)}function cr(s,...t){throw $p(s,...t)}function Pi(s,...t){return $p(s,...t)}function w1(s,t,e){const r={...CV(),[t]:e};return new Gu("auth","Firebase",r).create(t,{appName:s.name})}function ca(s){return w1(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(s,...t){if(typeof s!="string"){const e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(e,...r)}return I1.create(s,...t)}function vt(s,t,...e){if(!s)throw $p(t,...e)}function rr(s){const t="INTERNAL ASSERTION FAILED: "+s;throw tf(t),new Error(t)}function hr(s,t){s||rr(t)}function Jg(){return typeof self<"u"&&self.location?.href||""}function VV(){return A0()==="http:"||A0()==="https:"}function A0(){return typeof self<"u"&&self.location?.protocol||null}function xV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VV()||bw()||"connection"in navigator)?navigator.onLine:!0}function NV(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class nc{constructor(t,e){this.shortDelay=t,this.longDelay=e,hr(e>t,"Short delay should be less than long delay!"),this.isMobile=Aw()||Iw()}get(){return xV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jp(s,t){hr(s.emulator,"Emulator should always be set here");const{url:e}=s.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class R1{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const OV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const MV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PV=new nc(3e4,6e4);function Zp(s,t){return s.tenantId&&!t.tenantId?{...t,tenantId:s.tenantId}:t}async function el(s,t,e,r,o={}){return C1(s,o,async()=>{let u={},c={};r&&(t==="GET"?c=r:u={body:JSON.stringify(r)});const m=Ku({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:t,headers:g,...u};return Sw()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Xo(s.emulatorConfig.host)&&(y.credentials="include"),R1.fetch()(await D1(s,s.config.apiHost,e,m),y)})}async function C1(s,t,e){s._canInitEmulator=!1;const r={...OV,...t};try{const o=new LV(s),u=await Promise.race([e(),o.promise]);o.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw jh(s,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const m=u.ok?c.errorMessage:c.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw jh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw jh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw jh(s,"user-disabled",c);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw w1(s,T,y);cr(s,T)}}catch(o){if(o instanceof dr)throw o;cr(s,"network-request-failed",{message:String(o)})}}async function kV(s,t,e,r,o={}){const u=await el(s,t,e,r,o);return"mfaPendingCredential"in u&&cr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function D1(s,t,e,r){const o=`${t}${e}?${r}`,u=s,c=u.config.emulator?Jp(s.config,o):`${s.config.apiScheme}://${o}`;return MV.includes(e)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class LV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Pi(this.auth,"network-request-failed")),PV.get())})}}function jh(s,t,e){const r={appName:s.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);const o=Pi(s,t,r);return o.customData._tokenResponse=e,o}async function UV(s,t){return el(s,"POST","/v1/accounts:delete",t)}async function wf(s,t){return el(s,"POST","/v1/accounts:lookup",t)}function Ru(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function zV(s,t=!1){const e=rn(s),r=await e.getIdToken(t),o=Wp(r);vt(o&&o.exp&&o.auth_time&&o.iat,e.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,c=u?.sign_in_provider;return{claims:o,token:r,authTime:Ru(_g(o.auth_time)),issuedAtTime:Ru(_g(o.iat)),expirationTime:Ru(_g(o.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function _g(s){return Number(s)*1e3}function Wp(s){const[t,e,r]=s.split(".");if(t===void 0||e===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const o=H0(e);return o?JSON.parse(o):(tf("Failed to decode base64 JWT payload"),null)}catch(o){return tf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function S0(s){const t=Wp(s);return vt(t,"internal-error"),vt(typeof t.exp<"u","internal-error"),vt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function Hu(s,t,e=!1){if(e)return t;try{return await t}catch(r){throw r instanceof dr&&BV(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function BV({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class jV{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zg{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Rf(s){const t=s.auth,e=await s.getIdToken(),r=await Hu(s,wf(t,{idToken:e}));vt(r?.users.length,t,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?V1(o.providerUserInfo):[],c=FV(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!c?.length,y=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,T)}async function qV(s){const t=rn(s);await Rf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function FV(s,t){return[...s.filter(r=>!t.some(o=>o.providerId===r.providerId)),...t]}function V1(s){return s.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function HV(s,t){const e=await C1(s,{},async()=>{const r=Ku({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,c=await D1(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Xo(s.emulatorConfig.host)&&(g.credentials="include"),R1.fetch()(c,g)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function GV(s,t){return el(s,"POST","/v2/accounts:revokeToken",Zp(s,t))}class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vt(t.idToken,"internal-error"),vt(typeof t.idToken<"u","internal-error"),vt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):S0(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){vt(t.length!==0,"internal-error");const e=S0(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:r,refreshToken:o,expiresIn:u}=await HV(t,e);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){const{refreshToken:r,accessToken:o,expirationTime:u}=e,c=new xo;return r&&(vt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),o&&(vt(typeof o=="string","internal-error",{appName:t}),c.accessToken=o),u&&(vt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return rr("not implemented")}}function Zr(s,t){vt(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class ai{constructor({uid:t,auth:e,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new jV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const e=await Hu(this,this.stsTokenManager.getToken(this.auth,t));return vt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return zV(this,t)}reload(){return qV(this)}_assign(t){this!==t&&(vt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new ai({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&await Rf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(ca(this.auth));const t=await this.getIdToken();return await Hu(this,UV(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const r=e.displayName??void 0,o=e.email??void 0,u=e.phoneNumber??void 0,c=e.photoURL??void 0,m=e.tenantId??void 0,g=e._redirectEventId??void 0,y=e.createdAt??void 0,T=e.lastLoginAt??void 0,{uid:A,emailVerified:I,isAnonymous:B,providerData:Z,stsTokenManager:Y}=e;vt(A&&Y,t,"internal-error");const W=xo.fromJSON(this.name,Y);vt(typeof A=="string",t,"internal-error"),Zr(r,t.name),Zr(o,t.name),vt(typeof I=="boolean",t,"internal-error"),vt(typeof B=="boolean",t,"internal-error"),Zr(u,t.name),Zr(c,t.name),Zr(m,t.name),Zr(g,t.name),Zr(y,t.name),Zr(T,t.name);const ft=new ai({uid:A,auth:t,email:o,emailVerified:I,displayName:r,isAnonymous:B,photoURL:c,phoneNumber:u,tenantId:m,stsTokenManager:W,createdAt:y,lastLoginAt:T});return Z&&Array.isArray(Z)&&(ft.providerData=Z.map(dt=>({...dt}))),g&&(ft._redirectEventId=g),ft}static async _fromIdTokenResponse(t,e,r=!1){const o=new xo;o.updateFromServerResponse(e);const u=new ai({uid:e.localId,auth:t,stsTokenManager:o,isAnonymous:r});return await Rf(u),u}static async _fromGetAccountInfoResponse(t,e,r){const o=e.users[0];vt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?V1(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!u?.length,m=new xo;m.updateFromIdToken(r);const g=new ai({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const b0=new Map;function sr(s){hr(s instanceof Function,"Expected a class definition");let t=b0.get(s);return t?(hr(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,b0.set(s,t),t)}class x1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}x1.type="NONE";const I0=x1;function ef(s,t,e){return`firebase:${s}:${t}:${e}`}class No{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ef(this.userKey,o.apiKey,u),this.fullPersistenceKey=ef("persistence",o.apiKey,u),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await wf(this.auth,{idToken:t}).catch(()=>{});return e?ai._fromGetAccountInfoResponse(this.auth,e,t):null}return ai._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,r="authUser"){if(!e.length)return new No(sr(I0),t,r);const o=(await Promise.all(e.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||sr(I0);const c=ef(r,t.config.apiKey,t.name);let m=null;for(const y of e)try{const T=await y._get(c);if(T){let A;if(typeof T=="string"){const I=await wf(t,{idToken:T}).catch(()=>{});if(!I)break;A=await ai._fromGetAccountInfoResponse(t,I,T)}else A=ai._fromJSON(t,T);y!==u&&(m=A),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new No(u,t,r):(u=g[0],m&&await u._set(c,m.toJSON()),await Promise.all(e.map(async y=>{if(y!==u)try{await y._remove(c)}catch{}})),new No(u,t,r))}}function w0(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(P1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(N1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(L1(t))return"Blackberry";if(U1(t))return"Webos";if(O1(t))return"Safari";if((t.includes("chrome/")||M1(t))&&!t.includes("edge/"))return"Chrome";if(k1(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(e);if(r?.length===2)return r[1]}return"Other"}function N1(s=Ue()){return/firefox\//i.test(s)}function O1(s=Ue()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function M1(s=Ue()){return/crios\//i.test(s)}function P1(s=Ue()){return/iemobile/i.test(s)}function k1(s=Ue()){return/android/i.test(s)}function L1(s=Ue()){return/blackberry/i.test(s)}function U1(s=Ue()){return/webos/i.test(s)}function ty(s=Ue()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function KV(s=Ue()){return ty(s)&&!!window.navigator?.standalone}function QV(){return ww()&&document.documentMode===10}function z1(s=Ue()){return ty(s)||k1(s)||U1(s)||L1(s)||/windows phone/i.test(s)||P1(s)}function B1(s,t=[]){let e;switch(s){case"Browser":e=w0(Ue());break;case"Worker":e=`${w0(Ue())}-${s}`;break;default:e=s}const r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${$o}/${r}`}class YV{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const r=u=>new Promise((c,m)=>{try{const g=t(u);c(g)}catch(g){m(g)}});r.onAbort=e,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const r of this.queue)await r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(const o of e)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function XV(s,t={}){return el(s,"GET","/v2/passwordPolicy",Zp(s,t))}const $V=6;class JV{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??$V,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),o&&(e.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let o=0;o<t.length;o++)r=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}class ZV{constructor(t,e,r,o){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R0(this),this.idTokenSubscription=new R0(this),this.beforeStateQueue=new YV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=sr(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await No.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await wf(this,{idToken:t}),r=await ai._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Vi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let r=e,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=r?._redirectEventId,m=await this.tryRedirectSignIn(t);(!u||u===c)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Rf(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=NV()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Vi(this.app))return Promise.reject(ca(this));const e=t?rn(t):null;return e&&vt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&vt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(ca(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Vi(this.app)?Promise.reject(ca(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sr(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await XV(this),e=new JV(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Gu("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),await GV(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const r=await this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&sr(t)||this._popupRedirectResolver;vt(e,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[sr(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,o){if(this._deleted)return()=>{};const u=typeof e=="function"?e:e.next.bind(e);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(m,this,"internal-error"),m.then(()=>{c||u(this.currentUser)}),typeof e=="function"){const g=t.addObserver(e,r,o);return()=>{c=!0,g()}}else{const g=t.addObserver(e);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=B1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){if(Vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&DV(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ey(s){return rn(s)}class R0{constructor(t){this.auth=t,this.observer=null,this.addObserver=Nw(e=>this.observer=e)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ny={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WV(s){ny=s}function tx(s){return ny.loadJS(s)}function ex(){return ny.gapiScript}function nx(s){return`__${s}${Math.floor(Math.random()*1e6)}`}function ix(s,t){const e=rp(s,"auth");if(e.isInitialized()){const o=e.getImmediate(),u=e.getOptions();if(ha(u,t??{}))return o;cr(o,"already-initialized")}return e.initialize({options:t})}function rx(s,t){const e=t?.persistence||[],r=(Array.isArray(e)?e:[e]).map(sr);t?.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(r,t?.popupRedirectResolver)}function sx(s,t,e){const r=ey(s);vt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=!1,u=j1(t),{host:c,port:m}=ax(t),g=m===null?"":`:${m}`,y={url:`${u}//${c}${g}/`},T=Object.freeze({host:c,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){vt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),vt(ha(y,r.config.emulator)&&ha(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Xo(c)?(X0(`${u}//${c}${g}`),$0("Auth",!0)):ox()}function j1(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function ax(s){const t=j1(s),e=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!e)return{host:"",port:null};const r=e[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:C0(r.substr(u.length+1))}}else{const[u,c]=r.split(":");return{host:u,port:C0(c)}}}function C0(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function ox(){function s(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class q1{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return rr("not implemented")}_getIdTokenResponse(t){return rr("not implemented")}_linkToIdToken(t,e){return rr("not implemented")}_getReauthenticationResolver(t){return rr("not implemented")}}async function Oo(s,t){return kV(s,"POST","/v1/accounts:signInWithIdp",Zp(s,t))}const lx="http://localhost";class Aa extends q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Aa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):cr("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:o,...u}=e;if(!r||!o)return null;const c=new Aa(r,o);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Oo(t,e)}_linkToIdToken(t,e){const r=this.buildRequest();return r.idToken=e,Oo(t,r)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Oo(t,e)}buildRequest(){const t={requestUri:lx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Ku(e)}return t}}class F1{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class ic extends F1{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ts extends ic{constructor(){super("facebook.com")}static credential(t){return Aa._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ts.credentialFromTaggedObject(t)}static credentialFromError(t){return ts.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ts.credential(t.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";class es extends ic{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Aa._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return es.credentialFromTaggedObject(t)}static credentialFromError(t){return es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:r}=t;if(!e&&!r)return null;try{return es.credential(e,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";class ns extends ic{constructor(){super("github.com")}static credential(t){return Aa._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ns.credentialFromTaggedObject(t)}static credentialFromError(t){return ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ns.credential(t.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";class is extends ic{constructor(){super("twitter.com")}static credential(t,e){return Aa._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return is.credentialFromTaggedObject(t)}static credentialFromError(t){return is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:r}=t;if(!e||!r)return null;try{return is.credential(e,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";class Yo{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,r,o=!1){const u=await ai._fromIdTokenResponse(t,r,o),c=D0(r);return new Yo({user:u,providerId:c,_tokenResponse:r,operationType:e})}static async _forOperation(t,e,r){await t._updateTokensIfNecessary(r,!0);const o=D0(r);return new Yo({user:t,providerId:o,_tokenResponse:r,operationType:e})}}function D0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Cf extends dr{constructor(t,e,r,o){super(e.code,e.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Cf.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,o){return new Cf(t,e,r,o)}}function H1(s,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(s):e._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Cf._fromErrorAndOperation(s,u,t,r):u})}async function ux(s,t,e=!1){const r=await Hu(s,t._linkToIdToken(s.auth,await s.getIdToken()),e);return Yo._forOperation(s,"link",r)}async function cx(s,t,e=!1){const{auth:r}=s;if(Vi(r.app))return Promise.reject(ca(r));const o="reauthenticate";try{const u=await Hu(s,H1(r,o,t,s),e);vt(u.idToken,r,"internal-error");const c=Wp(u.idToken);vt(c,r,"internal-error");const{sub:m}=c;return vt(s.uid===m,r,"user-mismatch"),Yo._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&cr(r,"user-mismatch"),u}}async function hx(s,t,e=!1){if(Vi(s.app))return Promise.reject(ca(s));const r="signIn",o=await H1(s,r,t),u=await Yo._fromIdTokenResponse(s,r,o);return e||await s._updateCurrentUser(u.user),u}function fx(s,t,e,r){return rn(s).onIdTokenChanged(t,e,r)}function dx(s,t,e){return rn(s).beforeAuthStateChanged(t,e)}const Df="__sak";class G1{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const mx=1e3,gx=10;class K1 extends G1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const r=this.storage.getItem(e),o=this.localCache[e];r!==o&&t(e,o,r)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=t.key;e?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(r);!e&&this.localCache[r]===c||this.notifyListeners(r,c)},u=this.storage.getItem(r);QV()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,gx):o()}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:r}),!0)})},mx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}K1.type="LOCAL";const px=K1;class Q1 extends G1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Q1.type="SESSION";const Y1=Q1;function yx(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class td{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(o=>o.isListeningto(t));if(e)return e;const r=new td(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:r,eventType:o,data:u}=e.data,c=this.handlersMap[o];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(c).map(async y=>y(e.origin,u)),g=await yx(m);e.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];function iy(s="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return s+e}class _x{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,c;return new Promise((m,g)=>{const y=iy("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:o,onMessage(A){const I=A;if(I.data.eventId===y)switch(I.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(I.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:y,data:e},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function ki(){return window}function vx(s){ki().location.href=s}function X1(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function Tx(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ex(){return navigator?.serviceWorker?.controller||null}function Ax(){return X1()?self:null}const $1="firebaseLocalStorageDb",Sx=1,Vf="firebaseLocalStorage",J1="fbase_key";class rc{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function ed(s,t){return s.transaction([Vf],t?"readwrite":"readonly").objectStore(Vf)}function bx(){const s=indexedDB.deleteDatabase($1);return new rc(s).toPromise()}function Wg(){const s=indexedDB.open($1,Sx);return new Promise((t,e)=>{s.addEventListener("error",()=>{e(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Vf,{keyPath:J1})}catch(o){e(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Vf)?t(r):(r.close(),await bx(),t(await Wg()))})})}async function V0(s,t,e){const r=ed(s,!0).put({[J1]:t,value:e});return new rc(r).toPromise()}async function Ix(s,t){const e=ed(s,!1).get(t),r=await new rc(e).toPromise();return r===void 0?null:r.value}function x0(s,t){const e=ed(s,!0).delete(t);return new rc(e).toPromise()}const wx=800,Rx=3;class Z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wg(),this.db)}async _withRetries(t){let e=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(e++>Rx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(Ax()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Tx(),!this.activeServiceWorker)return;this.sender=new _x(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Ex()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Wg();return await V0(t,Df,"1"),await x0(t,Df),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(r=>Ix(r,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>x0(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const u=ed(o,!1).getAll();return new rc(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],r=new Set;if(t.length!==0)for(const{fbase_key:o,value:u}of t)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),e.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),e.push(o));return e}notifyListeners(t,e){this.localCache[t]=e;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z1.type="LOCAL";const Cx=Z1;new nc(3e4,6e4);function Dx(s,t){return t?sr(t):(vt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class ry extends q1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Oo(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Oo(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Oo(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Vx(s){return hx(s.auth,new ry(s),s.bypassAuthState)}function xx(s){const{auth:t,user:e}=s;return vt(e,t,"internal-error"),cx(e,new ry(s),s.bypassAuthState)}async function Nx(s){const{auth:t,user:e}=s;return vt(e,t,"internal-error"),ux(e,new ry(s),s.bypassAuthState)}class W1{constructor(t,e,r,o,u=!1){this.auth=t,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:r,postBody:o,tenantId:u,error:c,type:m}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:e,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Vx;case"linkViaPopup":case"linkViaRedirect":return Nx;case"reauthViaPopup":case"reauthViaRedirect":return xx;default:cr(this.auth,"internal-error")}}resolve(t){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ox=new nc(2e3,1e4);class Co extends W1{constructor(t,e,r,o,u){super(t,e,o,u),this.provider=r,this.authWindow=null,this.pollId=null,Co.currentPopupAction&&Co.currentPopupAction.cancel(),Co.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vt(t,this.auth,"internal-error"),t}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const t=iy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Co.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ox.get())};t()}}Co.currentPopupAction=null;const Mx="pendingRedirect",nf=new Map;class Px extends W1{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}async execute(){let t=nf.get(this.auth._key());if(!t){try{const r=await kx(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}nf.set(this.auth._key(),t)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kx(s,t){const e=zx(t),r=Ux(s);if(!await r._isAvailable())return!1;const o=await r._get(e)==="true";return await r._remove(e),o}function Lx(s,t){nf.set(s._key(),t)}function Ux(s){return sr(s._redirectPersistence)}function zx(s){return ef(Mx,s.config.apiKey,s.name)}async function Bx(s,t,e=!1){if(Vi(s.app))return Promise.reject(ca(s));const r=ey(s),o=Dx(r,t),c=await new Px(r,o,e).execute();return c&&!e&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}const jx=600*1e3;class qx{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Fx(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!tb(t)){const r=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Pi(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=jx&&this.cachedEventUids.clear(),this.cachedEventUids.has(N0(t))}saveEventToCache(t){this.cachedEventUids.add(N0(t)),this.lastProcessedEventTime=Date.now()}}function N0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function tb({type:s,error:t}){return s==="unknown"&&t?.code==="auth/no-auth-event"}function Fx(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tb(s);default:return!1}}async function Hx(s,t={}){return el(s,"GET","/v1/projects",t)}const Gx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kx=/^https?/;async function Qx(s){if(s.config.emulator)return;const{authorizedDomains:t}=await Hx(s);for(const e of t)try{if(Yx(e))return}catch{}cr(s,"unauthorized-domain")}function Yx(s){const t=Jg(),{protocol:e,hostname:r}=new URL(t);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?e==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===r}if(!Kx.test(e))return!1;if(Gx.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const Xx=new nc(3e4,6e4);function O0(){const s=ki().___jsl;if(s?.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let e=0;e<s.CP.length;e++)s.CP[e]=null}}function $x(s){return new Promise((t,e)=>{function r(){O0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{O0(),e(Pi(s,"network-request-failed"))},timeout:Xx.get()})}if(ki().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ki().gapi?.load)r();else{const o=nx("iframefcb");return ki()[o]=()=>{gapi.load?r():e(Pi(s,"network-request-failed"))},tx(`${ex()}?onload=${o}`).catch(u=>e(u))}}).catch(t=>{throw rf=null,t})}let rf=null;function Jx(s){return rf=rf||$x(s),rf}const Zx=new nc(5e3,15e3),Wx="__/auth/iframe",tN="emulator/auth/iframe",eN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iN(s){const t=s.config;vt(t.authDomain,s,"auth-domain-config-required");const e=t.emulator?Jp(t,tN):`https://${s.config.authDomain}/${Wx}`,r={apiKey:t.apiKey,appName:s.name,v:$o},o=nN.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${e}?${Ku(r).slice(1)}`}async function rN(s){const t=await Jx(s),e=ki().gapi;return vt(e,s,"internal-error"),t.open({where:document.body,url:iN(s),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eN,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const c=Pi(s,"network-request-failed"),m=ki().setTimeout(()=>{u(c)},Zx.get());function g(){ki().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(c)})}))}const sN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aN=500,oN=600,lN="_blank",uN="http://localhost";class M0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cN(s,t,e,r=aN,o=oN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...sN,width:r.toString(),height:o.toString(),top:u,left:c},y=Ue().toLowerCase();e&&(m=M1(y)?lN:e),N1(y)&&(t=t||uN,g.scrollbars="yes");const T=Object.entries(g).reduce((I,[B,Z])=>`${I}${B}=${Z},`,"");if(KV(y)&&m!=="_self")return hN(t||"",m),new M0(null);const A=window.open(t||"",m,T);vt(A,s,"popup-blocked");try{A.focus()}catch{}return new M0(A)}function hN(s,t){const e=document.createElement("a");e.href=s,e.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}const fN="__/auth/handler",dN="emulator/auth/handler",mN=encodeURIComponent("fac");async function P0(s,t,e,r,o,u){vt(s.config.authDomain,s,"auth-domain-config-required"),vt(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:e,redirectUrl:r,v:$o,eventId:o};if(t instanceof F1){t.setDefaultLanguage(s.languageCode),c.providerId=t.providerId||"",xw(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[T,A]of Object.entries({}))c[T]=A}if(t instanceof ic){const T=t.getScopes().filter(A=>A!=="");T.length>0&&(c.scopes=T.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),y=g?`#${mN}=${encodeURIComponent(g)}`:"";return`${gN(s)}?${Ku(m).slice(1)}${y}`}function gN({config:s}){return s.emulator?Jp(s,dN):`https://${s.authDomain}/${fN}`}const vg="webStorageSupport";class pN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y1,this._completeRedirectFn=Bx,this._overrideRedirectResult=Lx}async _openPopup(t,e,r,o){hr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await P0(t,e,r,Jg(),o);return cN(t,u,iy())}async _openRedirect(t,e,r,o){await this._originValidation(t);const u=await P0(t,e,r,Jg(),o);return vx(u),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:o,promise:u}=this.eventManagers[e];return o?Promise.resolve(o):(hr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}async initAndGetManager(t){const e=await rN(t),r=new qx(t);return e.register("authEvent",o=>(vt(o?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(vg,{type:vg},o=>{const u=o?.[0]?.[vg];u!==void 0&&e(!!u),cr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=Qx(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return z1()||O1()||ty()}}const yN=pN;var k0="@firebase/auth",L0="1.12.0";class _N{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TN(s){Mo(new fa("auth",(t,{options:e})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;vt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B1(s)},y=new ZV(r,o,u,g);return rx(y,e),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),Mo(new fa("auth-internal",t=>{const e=ey(t.getProvider("auth").getImmediate());return(r=>new _N(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(k0,L0,vN(s)),ls(k0,L0,"esm2020")}const EN=300,AN=Y0("authIdTokenMaxAge")||EN;let U0=null;const SN=s=>async t=>{const e=t&&await t.getIdTokenResult(),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>AN)return;const o=e?.token;U0!==o&&(U0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bN(s=rA()){const t=rp(s,"auth");if(t.isInitialized())return t.getImmediate();const e=ix(s,{popupRedirectResolver:yN,persistence:[Cx,px,Y1]}),r=Y0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const c=SN(u.toString());dx(e,c,()=>c(e.currentUser)),fx(e,m=>c(m))}}const o=K0("auth");return o&&sx(e,`http://${o}`),e}function IN(){return document.getElementsByTagName("head")?.[0]??document}WV({loadJS(s){return new Promise((t,e)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=t,r.onerror=o=>{const u=Pi("internal-error");u.customData=o,e(u)},r.type="text/javascript",r.charset="UTF-8",IN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TN("Browser");const wN={apiKey:"AIzaSyDFJKoHehMnPjt2bqTPpzru1qdA_rUOEdk",authDomain:"bitlkhzin-8d5c8.firebaseapp.com",projectId:"bitlkhzin-8d5c8",storageBucket:"bitlkhzin-8d5c8.firebasestorage.app",messagingSenderId:"862517672946",appId:"1:862517672946:web:66efa0f33cd67f0751896b"},eb=iA(wN),ss=cV(eb);bN(eb);hV(ss).catch(s=>{s.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):s.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const RN=()=>{const[s,t]=Ve.useState([]);return Ve.useEffect(()=>{const u=y1(Af(ss,"todos"),_1("createdAt","desc")),c=S1(u,m=>{const g=m.docs.map(y=>({id:y.id,...y.data()}));t(g)});return()=>c()},[]),{todos:s,addTodo:async u=>{if(u.trim())try{await A1(Af(ss,"todos"),{text:u,completed:!1,createdAt:Date.now()})}catch(c){console.error("Error adding todo:",c)}},toggleTodo:async u=>{const c=s.find(m=>m.id===u);if(c)try{await wV(Sf(ss,"todos",u),{completed:!c.completed})}catch(m){console.error("Error toggling todo:",m)}},deleteTodo:async u=>{try{await E1(Sf(ss,"todos",u))}catch(c){console.error("Error deleting todo:",c)}}}},CN=()=>{const{todos:s,addTodo:t,toggleTodo:e,deleteTodo:r}=RN(),[o,u]=Ve.useState(""),c=m=>{m?.preventDefault(),o.trim()&&(t(o),u(""))};return J.jsxs("div",{className:"animate-fade-in",children:[J.jsx("h2",{className:"text-title",children:"To-Do List"}),J.jsxs("form",{onSubmit:c,style:{marginBottom:"24px",display:"flex",gap:"12px"},children:[J.jsx("input",{type:"text",value:o,onChange:m=>u(m.target.value),placeholder:"Add a new task...",className:"glass-panel",style:{flex:1,padding:"16px",background:"rgba(255,255,255,0.5)",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-md)",fontSize:"1rem",outline:"none"}}),J.jsx(Cu,{type:"submit",style:{borderRadius:"var(--radius-md)"},children:J.jsx(B0,{})})]}),J.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[s.length===0&&J.jsx("div",{style:{textAlign:"center",padding:"40px",opacity:.5},children:J.jsx("p",{children:"No tasks yet. Enjoy your day! "})}),s.map(m=>J.jsxs("div",{className:"glass-panel",style:{display:"flex",alignItems:"center",padding:"16px",gap:"16px",transition:"all 0.2s",opacity:m.completed?.6:1,background:m.completed?"rgba(255,255,255,0.05)":"var(--glass-bg)"},children:[J.jsx("button",{onClick:()=>e(m.id),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:m.completed?"hsl(var(--color-primary))":"gray"},children:m.completed?J.jsx(DN,{}):J.jsx(YI,{size:24})}),J.jsx("span",{style:{flex:1,fontSize:"1.1rem",textDecoration:m.completed?"line-through":"none",color:m.completed?"var(--color-text-muted)":"inherit"},children:m.text}),J.jsx("button",{onClick:()=>r(m.id),style:{background:"none",border:"none",opacity:.3,cursor:"pointer",color:"#ef4444"},onMouseEnter:g=>g.currentTarget.style.opacity="1",onMouseLeave:g=>g.currentTarget.style.opacity="0.3",children:J.jsx(j0,{size:18})})]},m.id))]})]})},DN=()=>J.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:J.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"})}),VN=()=>{const[s,t]=Ve.useState([]),[e,r]=Ve.useState(!0);return Ve.useEffect(()=>{const c=y1(Af(ss,"inventory"),_1("createdAt","desc")),m=S1(c,g=>{const y=g.docs.map(T=>({id:T.id,...T.data()}));t(y),r(!1)},g=>{console.error("Error fetching inventory:",g),r(!1)});return()=>m()},[]),{items:s,loading:e,addItem:async c=>{try{await A1(Af(ss,"inventory"),{...c,createdAt:Date.now(),updatedAt:Date.now()})}catch(m){console.error("Error adding item:",m)}},deleteItem:async c=>{try{await E1(Sf(ss,"inventory",c))}catch(m){console.error("Error deleting item:",m)}}}};function xN(){const[s,t]=Ve.useState("inventory"),[e,r]=Ve.useState(!1),{items:o,addItem:u,deleteItem:c}=VN();Ve.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const m=()=>{switch(s){case"add":return J.jsx(uw,{onSubmit:g=>{u(g),t("inventory")},onCancel:()=>t("inventory")});case"settings":return J.jsxs("div",{className:"animate-fade-in",children:[J.jsx("h2",{className:"text-title",children:"Settings"}),J.jsxs(ep,{children:[J.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[J.jsx("h3",{style:{margin:0},children:"Appearance"}),J.jsxs(Cu,{variant:"secondary",onClick:()=>r(!e),style:{display:"flex",alignItems:"center",gap:"8px"},children:[e?J.jsx(rw,{size:18}):J.jsx(ZI,{size:18}),e?"Light Mode":"Dark Mode"]})]}),J.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),J.jsxs("div",{style:{opacity:.6},children:[J.jsx("p",{children:"App Version: 1.0.1"}),J.jsx("p",{children:"Sync Status: Local Storage"})]})]})]});case"todo":return J.jsx(CN,{});default:return J.jsx("div",{className:"animate-fade-in",children:J.jsx(ow,{items:o,onAddItem:()=>t("add"),onDeleteItem:c})})}};return J.jsx(aw,{currentView:s,onNavigate:g=>t(g),children:m()})}jI.createRoot(document.getElementById("root")).render(J.jsx(Ve.StrictMode,{children:J.jsx(xN,{})}));
