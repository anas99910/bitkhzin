import{c as T,u as B,R as c,j as e,B as p,P as b,m as S,A,T as P}from"./index-vpsI0Pgs.js";import{InventoryForm as N}from"./InventoryForm-CVBCfmRk.js";import{u as D,S as E}from"./SwipeableItem-M-imXXXc.js";const W=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M=T("check",W),_=({items:x,onAddItem:w,onDeleteItem:u})=>{const{addTodo:k}=D(),{updateItem:m,seedData:y}=B(),[f,a]=c.useState({show:!1,msg:""}),[o,v]=c.useState(!1),[n,g]=c.useState(new Set),[d,h]=c.useState(null),I=t=>{k(t.name,1,t.category),a({show:!0,msg:`Added ${t.name} to Shopping List`}),setTimeout(()=>a({show:!1,msg:""}),3e3)},j=(t,i)=>{m(t.id,{stockLevel:i})},L=t=>{const i=new Set(n);i.has(t)?i.delete(t):i.add(t),g(i)},C=()=>{confirm(`Delete ${n.size} items?`)&&(n.forEach(t=>u(t)),v(!1),g(new Set),a({show:!0,msg:"Items deleted"}),setTimeout(()=>a({show:!1,msg:""}),3e3))},z=t=>{d&&(m(d.id,t),h(null),a({show:!0,msg:"Item updated"}),setTimeout(()=>a({show:!1,msg:""}),3e3))},R=x.reduce((t,i)=>{const l=i.category||"Other";return t[l]||(t[l]=[]),t[l].push(i),t},{});return e.jsxs("div",{className:"animate-fade-in",style:{paddingBottom:"80px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[x.length>0&&e.jsx(p,{variant:"ghost",onClick:()=>{v(!o),g(new Set)},style:{color:o?"var(--color-primary)":"var(--text-muted)"},children:o?"Cancel":"Select"}),o&&n.size>0&&e.jsxs(p,{variant:"danger",size:"sm",onClick:C,children:["Delete (",n.size,")"]})]}),!o&&e.jsxs(p,{onClick:w,className:"tap-scale",children:[e.jsx(b,{size:18})," Add Item"]})]}),d&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:e.jsx("div",{style:{width:"100%",maxWidth:"500px"},children:e.jsx(N,{initialValues:d,onSubmit:z,onCancel:()=>h(null)})})}),x.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"48px",opacity:.8},children:[e.jsx("p",{style:{marginBottom:"16px"},children:"Your pantry is empty."}),e.jsx(p,{onClick:()=>y&&y(),children:"Preload Essentials"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:Object.entries(R).map(([t,i],l)=>e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1,duration:.4},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",paddingLeft:"8px",borderLeft:"4px solid hsl(var(--color-primary))"},children:e.jsx("h3",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"hsl(var(--color-primary))",textTransform:"uppercase",letterSpacing:"0.05em"},children:t})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:e.jsx(A,{initial:!1,mode:"popLayout",children:i.map(s=>e.jsx(S.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9,transition:{duration:.2}},transition:{type:"spring",stiffness:500,damping:30},children:e.jsx(E,{onSwipeLeft:()=>u(s.id),disabled:o,children:e.jsxs("div",{className:"glass-panel",onClick:()=>{o&&L(s.id)},style:{display:"flex",alignItems:"center",padding:"16px",background:n.has(s.id)?"rgba(99, 102, 241, 0.1)":s.stockLevel==="low"?"rgba(239, 68, 68, 0.05)":"var(--color-surface)",border:n.has(s.id)?"1px solid var(--color-primary)":"1px solid var(--glass-border)",borderRadius:"12px",marginBottom:"8px",position:"relative",transition:"all 0.2s"},children:[o?e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",border:n.has(s.id)?"none":"2px solid var(--text-muted)",background:n.has(s.id)?"var(--color-primary)":"transparent",marginRight:"16px",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:n.has(s.id)&&e.jsx(M,{size:16})}):e.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid var(--text-muted)",borderRadius:"6px",marginRight:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-muted)",opacity:.5},onClick:r=>{r.stopPropagation(),I(s)},title:"Add to Shopping List",children:e.jsx(b,{size:14})}),e.jsx("div",{style:{flex:1},onClick:()=>!o&&h(s),children:e.jsx("span",{style:{fontWeight:500,fontSize:"1rem",cursor:o?"default":"pointer"},children:s.name})}),!o&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),j(s,"low")},className:"tap-scale",style:{background:s.stockLevel==="low"?"rgba(239, 68, 68, 0.1)":"transparent",border:"none",fontSize:"0.8rem",fontWeight:"600",color:s.stockLevel==="low"?"#ef4444":"var(--text-muted)",cursor:"pointer",opacity:s.stockLevel==="low"?1:.4,transition:"all 0.2s",padding:"4px 8px",borderRadius:"8px"},children:"Low"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),j(s,"full")},className:"tap-scale",style:{background:s.stockLevel==="full"?"rgba(16, 185, 129, 0.1)":"transparent",border:"none",fontSize:"0.8rem",fontWeight:"600",color:s.stockLevel==="full"?"#10b981":"var(--text-muted)",cursor:"pointer",opacity:s.stockLevel==="full"?1:.4,transition:"all 0.2s",padding:"4px 8px",borderRadius:"8px"},children:"Full"})]})]})})},s.id))})})]},t))}),e.jsx(P,{isVisible:f.show,message:f.msg,type:"success",onClose:()=>a({show:!1,msg:""})})]})};export{_ as InventoryList};
