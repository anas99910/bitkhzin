(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var Kp={exports:{}},Tc={};var K2;function hC(){if(K2)return Tc;K2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return Tc.Fragment=e,Tc.jsx=t,Tc.jsxs=t,Tc}var Y2;function dC(){return Y2||(Y2=1,Kp.exports=hC()),Kp.exports}var G=dC(),Yp={exports:{}},Me={};var W2;function pC(){if(W2)return Me;W2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),_=Symbol.iterator;function E(j){return j===null||typeof j!="object"?null:(j=_&&j[_]||j["@@iterator"],typeof j=="function"?j:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function V(j,ue,ge){this.props=j,this.context=ue,this.refs=D,this.updater=ge||T}V.prototype.isReactComponent={},V.prototype.setState=function(j,ue){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ue,"setState")},V.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function M(){}M.prototype=V.prototype;function B(j,ue,ge){this.props=j,this.context=ue,this.refs=D,this.updater=ge||T}var H=B.prototype=new M;H.constructor=B,S(H,V.prototype),H.isPureReactComponent=!0;var $=Array.isArray;function J(){}var C={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function N(j,ue,ge){var ve=ge.ref;return{$$typeof:r,type:j,key:ue,ref:ve!==void 0?ve:null,props:ge}}function P(j,ue){return N(j.type,ue,j.props)}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function U(j){var ue={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ge){return ue[ge]})}var L=/\/+/g;function Pe(j,ue){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):ue.toString(36)}function yt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(J,J):(j.status="pending",j.then(function(ue){j.status==="pending"&&(j.status="fulfilled",j.value=ue)},function(ue){j.status==="pending"&&(j.status="rejected",j.reason=ue)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ne(j,ue,ge,ve,De){var Be=typeof j;(Be==="undefined"||Be==="boolean")&&(j=null);var We=!1;if(j===null)We=!0;else switch(Be){case"bigint":case"string":case"number":We=!0;break;case"object":switch(j.$$typeof){case r:case e:We=!0;break;case p:return We=j._init,ne(We(j._payload),ue,ge,ve,De)}}if(We)return De=De(j),We=ve===""?"."+Pe(j,0):ve,$(De)?(ge="",We!=null&&(ge=We.replace(L,"$&/")+"/"),ne(De,ue,ge,"",function(Ro){return Ro})):De!=null&&(k(De)&&(De=P(De,ge+(De.key==null||j&&j.key===De.key?"":(""+De.key).replace(L,"$&/")+"/")+We)),ue.push(De)),1;We=0;var an=ve===""?".":ve+":";if($(j))for(var Dt=0;Dt<j.length;Dt++)ve=j[Dt],Be=an+Pe(ve,Dt),We+=ne(ve,ue,ge,Be,De);else if(Dt=E(j),typeof Dt=="function")for(j=Dt.call(j),Dt=0;!(ve=j.next()).done;)ve=ve.value,Be=an+Pe(ve,Dt++),We+=ne(ve,ue,ge,Be,De);else if(Be==="object"){if(typeof j.then=="function")return ne(yt(j),ue,ge,ve,De);throw ue=String(j),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return We}function de(j,ue,ge){if(j==null)return j;var ve=[],De=0;return ne(j,ve,"","",function(Be){return ue.call(ge,Be,De++)}),ve}function we(j){if(j._status===-1){var ue=j._result;ue=ue(),ue.then(function(ge){(j._status===0||j._status===-1)&&(j._status=1,j._result=ge)},function(ge){(j._status===0||j._status===-1)&&(j._status=2,j._result=ge)}),j._status===-1&&(j._status=0,j._result=ue)}if(j._status===1)return j._result.default;throw j._result}var Ze=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},lt={map:de,forEach:function(j,ue,ge){de(j,function(){ue.apply(this,arguments)},ge)},count:function(j){var ue=0;return de(j,function(){ue++}),ue},toArray:function(j){return de(j,function(ue){return ue})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Me.Activity=m,Me.Children=lt,Me.Component=V,Me.Fragment=t,Me.Profiler=i,Me.PureComponent=B,Me.StrictMode=n,Me.Suspense=f,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Me.__COMPILER_RUNTIME={__proto__:null,c:function(j){return C.H.useMemoCache(j)}},Me.cache=function(j){return function(){return j.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(j,ue,ge){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ve=S({},j.props),De=j.key;if(ue!=null)for(Be in ue.key!==void 0&&(De=""+ue.key),ue)!b.call(ue,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&ue.ref===void 0||(ve[Be]=ue[Be]);var Be=arguments.length-2;if(Be===1)ve.children=ge;else if(1<Be){for(var We=Array(Be),an=0;an<Be;an++)We[an]=arguments[an+2];ve.children=We}return N(j.type,De,ve)},Me.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},Me.createElement=function(j,ue,ge){var ve,De={},Be=null;if(ue!=null)for(ve in ue.key!==void 0&&(Be=""+ue.key),ue)b.call(ue,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(De[ve]=ue[ve]);var We=arguments.length-2;if(We===1)De.children=ge;else if(1<We){for(var an=Array(We),Dt=0;Dt<We;Dt++)an[Dt]=arguments[Dt+2];De.children=an}if(j&&j.defaultProps)for(ve in We=j.defaultProps,We)De[ve]===void 0&&(De[ve]=We[ve]);return N(j,Be,De)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(j){return{$$typeof:l,render:j}},Me.isValidElement=k,Me.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:we}},Me.memo=function(j,ue){return{$$typeof:h,type:j,compare:ue===void 0?null:ue}},Me.startTransition=function(j){var ue=C.T,ge={};C.T=ge;try{var ve=j(),De=C.S;De!==null&&De(ge,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(J,Ze)}catch(Be){Ze(Be)}finally{ue!==null&&ge.types!==null&&(ue.types=ge.types),C.T=ue}},Me.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Me.use=function(j){return C.H.use(j)},Me.useActionState=function(j,ue,ge){return C.H.useActionState(j,ue,ge)},Me.useCallback=function(j,ue){return C.H.useCallback(j,ue)},Me.useContext=function(j){return C.H.useContext(j)},Me.useDebugValue=function(){},Me.useDeferredValue=function(j,ue){return C.H.useDeferredValue(j,ue)},Me.useEffect=function(j,ue){return C.H.useEffect(j,ue)},Me.useEffectEvent=function(j){return C.H.useEffectEvent(j)},Me.useId=function(){return C.H.useId()},Me.useImperativeHandle=function(j,ue,ge){return C.H.useImperativeHandle(j,ue,ge)},Me.useInsertionEffect=function(j,ue){return C.H.useInsertionEffect(j,ue)},Me.useLayoutEffect=function(j,ue){return C.H.useLayoutEffect(j,ue)},Me.useMemo=function(j,ue){return C.H.useMemo(j,ue)},Me.useOptimistic=function(j,ue){return C.H.useOptimistic(j,ue)},Me.useReducer=function(j,ue,ge){return C.H.useReducer(j,ue,ge)},Me.useRef=function(j){return C.H.useRef(j)},Me.useState=function(j){return C.H.useState(j)},Me.useSyncExternalStore=function(j,ue,ge){return C.H.useSyncExternalStore(j,ue,ge)},Me.useTransition=function(){return C.H.useTransition()},Me.version="19.2.3",Me}var Q2;function vv(){return Q2||(Q2=1,Yp.exports=pC()),Yp.exports}var _e=vv(),Wp={exports:{}},Sc={},Qp={exports:{}},$p={};var $2;function gC(){return $2||($2=1,(function(r){function e(ne,de){var we=ne.length;ne.push(de);e:for(;0<we;){var Ze=we-1>>>1,lt=ne[Ze];if(0<i(lt,de))ne[Ze]=de,ne[we]=lt,we=Ze;else break e}}function t(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var de=ne[0],we=ne.pop();if(we!==de){ne[0]=we;e:for(var Ze=0,lt=ne.length,j=lt>>>1;Ze<j;){var ue=2*(Ze+1)-1,ge=ne[ue],ve=ue+1,De=ne[ve];if(0>i(ge,we))ve<lt&&0>i(De,ge)?(ne[Ze]=De,ne[ve]=we,Ze=ve):(ne[Ze]=ge,ne[ue]=we,Ze=ue);else if(ve<lt&&0>i(De,we))ne[Ze]=De,ne[ve]=we,Ze=ve;else break e}}return de}function i(ne,de){var we=ne.sortIndex-de.sortIndex;return we!==0?we:ne.id-de.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();r.unstable_now=function(){return s.now()-l}}var f=[],h=[],p=1,m=null,_=3,E=!1,T=!1,S=!1,D=!1,V=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H(ne){for(var de=t(h);de!==null;){if(de.callback===null)n(h);else if(de.startTime<=ne)n(h),de.sortIndex=de.expirationTime,e(f,de);else break;de=t(h)}}function $(ne){if(S=!1,H(ne),!T)if(t(f)!==null)T=!0,J||(J=!0,U());else{var de=t(h);de!==null&&yt($,de.startTime-ne)}}var J=!1,C=-1,b=5,N=-1;function P(){return D?!0:!(r.unstable_now()-N<b)}function k(){if(D=!1,J){var ne=r.unstable_now();N=ne;var de=!0;try{e:{T=!1,S&&(S=!1,M(C),C=-1),E=!0;var we=_;try{t:{for(H(ne),m=t(f);m!==null&&!(m.expirationTime>ne&&P());){var Ze=m.callback;if(typeof Ze=="function"){m.callback=null,_=m.priorityLevel;var lt=Ze(m.expirationTime<=ne);if(ne=r.unstable_now(),typeof lt=="function"){m.callback=lt,H(ne),de=!0;break t}m===t(f)&&n(f),H(ne)}else n(f);m=t(f)}if(m!==null)de=!0;else{var j=t(h);j!==null&&yt($,j.startTime-ne),de=!1}}break e}finally{m=null,_=we,E=!1}de=void 0}}finally{de?U():J=!1}}}var U;if(typeof B=="function")U=function(){B(k)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Pe=L.port2;L.port1.onmessage=k,U=function(){Pe.postMessage(null)}}else U=function(){V(k,0)};function yt(ne,de){C=V(function(){ne(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(ne){switch(_){case 1:case 2:case 3:var de=3;break;default:de=_}var we=_;_=de;try{return ne()}finally{_=we}},r.unstable_requestPaint=function(){D=!0},r.unstable_runWithPriority=function(ne,de){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=_;_=ne;try{return de()}finally{_=we}},r.unstable_scheduleCallback=function(ne,de,we){var Ze=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ze+we:Ze):we=Ze,ne){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=we+lt,ne={id:p++,callback:de,priorityLevel:ne,startTime:we,expirationTime:lt,sortIndex:-1},we>Ze?(ne.sortIndex=we,e(h,ne),t(f)===null&&ne===t(h)&&(S?(M(C),C=-1):S=!0,yt($,we-Ze))):(ne.sortIndex=lt,e(f,ne),T||E||(T=!0,J||(J=!0,U()))),ne},r.unstable_shouldYield=P,r.unstable_wrapCallback=function(ne){var de=_;return function(){var we=_;_=de;try{return ne.apply(this,arguments)}finally{_=we}}}})($p)),$p}var Z2;function vC(){return Z2||(Z2=1,Qp.exports=gC()),Qp.exports}var Zp={exports:{}},Vn={};var J2;function mC(){if(J2)return Vn;J2=1;var r=vv();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:h,implementation:p}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Vn.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,p)},Vn.flushSync=function(f){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,f)return f()}finally{s.T=h,n.p=p,n.d.f()}},Vn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(f,h))},Vn.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Vn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,m=l(p,h.crossOrigin),_=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:_,fetchPriority:E}):p==="script"&&n.d.X(f,{crossOrigin:m,integrity:_,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Vn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);n.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(f)},Vn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=l(p,h.crossOrigin);n.d.L(f,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Vn.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=l(h.as,h.crossOrigin);n.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(f)},Vn.requestFormReset=function(f){n.d.r(f)},Vn.unstable_batchedUpdates=function(f,h){return f(h)},Vn.useFormState=function(f,h,p){return s.H.useFormState(f,h,p)},Vn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Vn.version="19.2.3",Vn}var eE;function yC(){if(eE)return Zp.exports;eE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Zp.exports=mC(),Zp.exports}var tE;function _C(){if(tE)return Sc;tE=1;var r=vC(),e=vv(),t=yC();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,c=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(c=u.return),o=u.return;while(o)}return u.tag===3?c:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function f(o){if(a(o)!==o)throw Error(n(188))}function h(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(n(188));return u!==o?null:o}for(var c=o,d=u;;){var v=c.return;if(v===null)break;var y=v.alternate;if(y===null){if(d=v.return,d!==null){c=d;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===c)return f(v),o;if(y===d)return f(v),u;y=y.sibling}throw Error(n(188))}if(c.return!==d.return)c=v,d=y;else{for(var A=!1,I=v.child;I;){if(I===c){A=!0,c=v,d=y;break}if(I===d){A=!0,d=v,c=y;break}I=I.sibling}if(!A){for(I=y.child;I;){if(I===c){A=!0,c=y,d=v;break}if(I===d){A=!0,d=y,c=v;break}I=I.sibling}if(!A)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var m=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var L=Symbol.for("react.client.reference");function Pe(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===L?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case V:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case J:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case B:return o.displayName||"Context";case M:return(o._context.displayName||"Context")+".Consumer";case H:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case C:return u=o.displayName||null,u!==null?u:Pe(o.type)||"Memo";case b:u=o._payload,o=o._init;try{return Pe(o(u))}catch{}}return null}var yt=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ze=[],lt=-1;function j(o){return{current:o}}function ue(o){0>lt||(o.current=Ze[lt],Ze[lt]=null,lt--)}function ge(o,u){lt++,Ze[lt]=o.current,o.current=u}var ve=j(null),De=j(null),Be=j(null),We=j(null);function an(o,u){switch(ge(Be,u),ge(De,o),ge(ve,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?v2(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=v2(u),o=m2(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ue(ve),ge(ve,o)}function Dt(){ue(ve),ue(De),ue(Be)}function Ro(o){o.memoizedState!==null&&ge(We,o);var u=ve.current,c=m2(u,o.type);u!==c&&(ge(De,o),ge(ve,c))}function zs(o){De.current===o&&(ue(ve),ue(De)),We.current===o&&(ue(We),Ec._currentValue=we)}var js,Hs;function oi(o){if(js===void 0)try{throw Error()}catch(c){var u=c.stack.trim().match(/\n( *(at )?)/);js=u&&u[1]||"",Hs=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+o+Hs}var El=!1;function Do(o,u){if(!o||El)return"";El=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(u){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(te){var Z=te}Reflect.construct(o,[],se)}else{try{se.call()}catch(te){Z=te}o.call(se.prototype)}}else{try{throw Error()}catch(te){Z=te}(se=o())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),A=y[0],I=y[1];if(A&&I){var F=A.split(`
`),Q=I.split(`
`);for(v=d=0;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(d===F.length||v===Q.length)for(d=F.length-1,v=Q.length-1;1<=d&&0<=v&&F[d]!==Q[v];)v--;for(;1<=d&&0<=v;d--,v--)if(F[d]!==Q[v]){if(d!==1||v!==1)do if(d--,v--,0>v||F[d]!==Q[v]){var ie=`
`+F[d].replace(" at new "," at ");return o.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",o.displayName)),ie}while(1<=d&&0<=v);break}}}finally{El=!1,Error.prepareStackTrace=c}return(c=o?o.displayName||o.name:"")?oi(c):""}function xl(o,u){switch(o.tag){case 26:case 27:case 5:return oi(o.type);case 16:return oi("Lazy");case 13:return o.child!==u&&u!==null?oi("Suspense Fallback"):oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return Do(o.type,!1);case 11:return Do(o.type.render,!1);case 1:return Do(o.type,!0);case 31:return oi("Activity");default:return""}}function Al(o){try{var u="",c=null;do u+=xl(o,c),c=o,o=o.return;while(o);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var qt=Object.prototype.hasOwnProperty,on=r.unstable_scheduleCallback,Ea=r.unstable_cancelCallback,W1=r.unstable_shouldYield,Lf=r.unstable_requestPaint,Hn=r.unstable_now,Oo=r.unstable_getCurrentPriorityLevel,wl=r.unstable_ImmediatePriority,Tl=r.unstable_UserBlockingPriority,xa=r.unstable_NormalPriority,Q1=r.unstable_LowPriority,Vf=r.unstable_IdlePriority,Bf=r.log,kf=r.unstable_setDisableYieldValue,zr=null,Sn=null;function Ar(o){if(typeof Bf=="function"&&kf(o),Sn&&typeof Sn.setStrictMode=="function")try{Sn.setStrictMode(zr,o)}catch{}}var zt=Math.clz32?Math.clz32:Uf,Ff=Math.log,Gs=Math.LN2;function Uf(o){return o>>>=0,o===0?32:31-(Ff(o)/Gs|0)|0}var si=256,No=262144,Xt=4194304;function ui(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function li(o,u,c){var d=o.pendingLanes;if(d===0)return 0;var v=0,y=o.suspendedLanes,A=o.pingedLanes;o=o.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?v=ui(d):(A&=I,A!==0?v=ui(A):c||(c=I&~o,c!==0&&(v=ui(c))))):(I=d&~y,I!==0?v=ui(I):A!==0?v=ui(A):c||(c=d&~o,c!==0&&(v=ui(c)))),v===0?0:u!==0&&u!==v&&(u&y)===0&&(y=v&-v,c=u&-u,y>=c||y===32&&(c&4194048)!==0)?u:v}function jr(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function $1(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zf(){var o=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),o}function ci(o){for(var u=[],c=0;31>c;c++)u.push(o);return u}function Mo(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Z1(o,u,c,d,v,y){var A=o.pendingLanes;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=c,o.entangledLanes&=c,o.errorRecoveryDisabledLanes&=c,o.shellSuspendCounter=0;var I=o.entanglements,F=o.expirationTimes,Q=o.hiddenUpdates;for(c=A&~c;0<c;){var ie=31-zt(c),se=1<<ie;I[ie]=0,F[ie]=-1;var Z=Q[ie];if(Z!==null)for(Q[ie]=null,ie=0;ie<Z.length;ie++){var te=Z[ie];te!==null&&(te.lane&=-536870913)}c&=~se}d!==0&&Po(o,d,0),y!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=y&~(A&~u))}function Po(o,u,c){o.pendingLanes|=u,o.suspendedLanes&=~u;var d=31-zt(u);o.entangledLanes|=u,o.entanglements[d]=o.entanglements[d]|1073741824|c&261930}function Sl(o,u){var c=o.entangledLanes|=u;for(o=o.entanglements;c;){var d=31-zt(c),v=1<<d;v&u|o[d]&u&&(o[d]|=u),c&=~v}}function Il(o,u){var c=u&-u;return c=(c&42)!==0?1:Lo(c),(c&(o.suspendedLanes|u))!==0?0:c}function Lo(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ui(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function jf(){var o=de.p;return o!==0?o:(o=window.event,o===void 0?32:U2(o.type))}function Hr(o,u){var c=de.p;try{return de.p=o,u()}finally{de.p=c}}var Gr=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Gr,vn="__reactProps$"+Gr,fi="__reactContainer$"+Gr,qs="__reactEvents$"+Gr,J1="__reactListeners$"+Gr,Hf="__reactHandles$"+Gr,Gf="__reactResources$"+Gr,hi="__reactMarker$"+Gr;function Xs(o){delete o[Kt],delete o[vn],delete o[qs],delete o[J1],delete o[Hf]}function di(o){var u=o[Kt];if(u)return u;for(var c=o.parentNode;c;){if(u=c[fi]||c[Kt]){if(c=u.alternate,u.child!==null||c!==null&&c.child!==null)for(o=T2(o);o!==null;){if(c=o[Kt])return c;o=T2(o)}return u}o=c,c=o.parentNode}return null}function wr(o){if(o=o[Kt]||o[fi]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function lr(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function pi(o){var u=o[Gf];return u||(u=o[Gf]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Yt(o){o[hi]=!0}var Cl=new Set,bl={};function gi(o,u){vi(o,u),vi(o+"Capture",u)}function vi(o,u){for(bl[o]=u,o=0;o<u.length;o++)Cl.add(u[o])}var Rl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dl={},Ol={};function qf(o){return qt.call(Ol,o)?!0:qt.call(Dl,o)?!1:Rl.test(o)?Ol[o]=!0:(Dl[o]=!0,!1)}function Ks(o,u,c){if(qf(u))if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var d=u.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+c)}}function cr(o,u,c){if(c===null)o.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+c)}}function Wt(o,u,c,d){if(d===null)o.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttributeNS(u,c,""+d)}}function mn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Aa(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Nl(o,u,c){var d=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,y=d.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return v.call(this)},set:function(A){c=""+A,y.call(this,A)}}),Object.defineProperty(o,u,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(A){c=""+A},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function ct(o){if(!o._valueTracker){var u=Aa(o)?"checked":"value";o._valueTracker=Nl(o,u,""+o[u])}}function Vo(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var c=u.getValue(),d="";return o&&(d=Aa(o)?o.checked?"true":"false":o.value),o=d,o!==c?(u.setValue(o),!0):!1}function mi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bo=/[\n"\\]/g;function Zn(o){return o.replace(Bo,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ys(o,u,c,d,v,y,A,I){o.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?o.type=A:o.removeAttribute("type"),u!=null?A==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+mn(u)):o.value!==""+mn(u)&&(o.value=""+mn(u)):A!=="submit"&&A!=="reset"||o.removeAttribute("value"),u!=null?Ml(o,A,mn(u)):c!=null?Ml(o,A,mn(c)):d!=null&&o.removeAttribute("value"),v==null&&y!=null&&(o.defaultChecked=!!y),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?o.name=""+mn(I):o.removeAttribute("name")}function Xf(o,u,c,d,v,y,A,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(o.type=y),u!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||u!=null)){ct(o);return}c=c!=null?""+mn(c):"",u=u!=null?""+mn(u):c,I||u===o.value||(o.value=u),o.defaultValue=u}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,o.checked=I?o.checked:!!d,o.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.name=A),ct(o)}function Ml(o,u,c){u==="number"&&mi(o.ownerDocument)===o||o.defaultValue===""+c||(o.defaultValue=""+c)}function wa(o,u,c,d){if(o=o.options,u){u={};for(var v=0;v<c.length;v++)u["$"+c[v]]=!0;for(c=0;c<o.length;c++)v=u.hasOwnProperty("$"+o[c].value),o[c].selected!==v&&(o[c].selected=v),v&&d&&(o[c].defaultSelected=!0)}else{for(c=""+mn(c),u=null,v=0;v<o.length;v++){if(o[v].value===c){o[v].selected=!0,d&&(o[v].defaultSelected=!0);return}u!==null||o[v].disabled||(u=o[v])}u!==null&&(u.selected=!0)}}function Kf(o,u,c){if(u!=null&&(u=""+mn(u),u!==o.value&&(o.value=u),c==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=c!=null?""+mn(c):""}function Ta(o,u,c,d){if(u==null){if(d!=null){if(c!=null)throw Error(n(92));if(yt(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),u=c}c=mn(u),o.defaultValue=c,d=o.textContent,d===c&&d!==""&&d!==null&&(o.value=d),ct(o)}function Jn(o,u){if(u){var c=o.firstChild;if(c&&c===o.lastChild&&c.nodeType===3){c.nodeValue=u;return}}o.textContent=u}var Yf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(o,u,c){var d=u.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":d?o.setProperty(u,c):typeof c!="number"||c===0||Yf.has(u)?u==="float"?o.cssFloat=c:o[u]=(""+c).trim():o[u]=c+"px"}function Ll(o,u,c){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||u!=null&&u.hasOwnProperty(d)||(d.indexOf("--")===0?o.setProperty(d,""):d==="float"?o.cssFloat="":o[d]="");for(var v in u)d=u[v],u.hasOwnProperty(v)&&c[v]!==d&&Pl(o,v,d)}else for(var y in u)u.hasOwnProperty(y)&&Pl(o,y,u[y])}function Ws(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qs(o){return Sa.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function qr(){}var Vl=null;function Tr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ia=null,yi=null;function ko(o){var u=wr(o);if(u&&(o=u.stateNode)){var c=o[vn]||null;e:switch(o=u.stateNode,u.type){case"input":if(Ys(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),u=c.name,c.type==="radio"&&u!=null){for(c=o;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Zn(""+u)+'"][type="radio"]'),u=0;u<c.length;u++){var d=c[u];if(d!==o&&d.form===o.form){var v=d[vn]||null;if(!v)throw Error(n(90));Ys(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(u=0;u<c.length;u++)d=c[u],d.form===o.form&&Vo(d)}break e;case"textarea":Kf(o,c.value,c.defaultValue);break e;case"select":u=c.value,u!=null&&wa(o,!!c.multiple,u,!1)}}}var $s=!1;function Ca(o,u,c){if($s)return o(u,c);$s=!0;try{var d=o(u);return d}finally{if($s=!1,(Ia!==null||yi!==null)&&(jh(),Ia&&(u=Ia,o=yi,yi=Ia=null,ko(u),o)))for(u=0;u<o.length;u++)ko(o[u])}}function Xr(o,u){var c=o.stateNode;if(c===null)return null;var d=c[vn]||null;if(d===null)return null;c=d[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(o=o.type,d=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!d;break e;default:o=!1}if(o)return null;if(c&&typeof c!="function")throw Error(n(231,u,typeof c));return c}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fo=!1;if(Sr)try{var _t={};Object.defineProperty(_t,"passive",{get:function(){Fo=!0}}),window.addEventListener("test",_t,_t),window.removeEventListener("test",_t,_t)}catch{Fo=!1}var _i=null,Bl=null,Uo=null;function kl(){if(Uo)return Uo;var o,u=Bl,c=u.length,d,v="value"in _i?_i.value:_i.textContent,y=v.length;for(o=0;o<c&&u[o]===v[o];o++);var A=c-o;for(d=1;d<=A&&u[c-d]===v[y-d];d++);return Uo=v.slice(o,1<d?1-d:void 0)}function zo(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function zi(){return!0}function Kr(){return!1}function In(o){function u(c,d,v,y,A){this._reactName=c,this._targetInst=v,this.type=d,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var I in o)o.hasOwnProperty(I)&&(c=o[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?zi:Kr,this.isPropagationStopped=Kr,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),u}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=In(ji),ba=m({},ji,{view:0,detail:0}),Fl=In(ba),Ra,Zs,xi,Js=m({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==xi&&(xi&&o.type==="mousemove"?(Ra=o.screenX-xi.screenX,Zs=o.screenY-xi.screenY):Zs=Ra=0,xi=o),Ra)},movementY:function(o){return"movementY"in o?o.movementY:Zs}}),Ul=In(Js),jo=m({},Js,{dataTransfer:0}),Qf=In(jo),$f=m({},ba,{relatedTarget:0}),Ho=In($f),zl=m({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Zf=In(zl),eu=m({},ji,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jf=In(eu),eh=m({},ji,{data:0}),Ai=In(eh),th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ih(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=rh[o])?!!u[o]:!1}function Da(){return ih}var Gn=m({},ba,{key:function(o){if(o.key){var u=th[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=zo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?nh[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(o){return o.type==="keypress"?zo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?zo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),ah=In(Gn),oh=m({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=In(oh),g=m({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),x=In(g),w=m({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=In(w),K=m({},Js,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=In(K),ce=m({},ji,{newState:0,oldState:0}),Le=In(ce),jt=[9,13,27,32],rt=Sr&&"CompositionEvent"in window,Ot=null;Sr&&"documentMode"in document&&(Ot=document.documentMode);var Ir=Sr&&"TextEvent"in window&&!Ot,wi=Sr&&(!rt||Ot&&8<Ot&&11>=Ot),Yr=" ",Wr=!1;function Go(o,u){switch(o){case"keyup":return jt.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var nu=!1;function VS(o,u){switch(o){case"compositionend":return tu(u);case"keypress":return u.which!==32?null:(Wr=!0,Yr);case"textInput":return o=u.data,o===Yr&&Wr?null:o;default:return null}}function BS(o,u){if(nu)return o==="compositionend"||!rt&&Go(o,u)?(o=kl(),Uo=Bl=_i=null,nu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return wi&&u.locale!=="ko"?null:u.data;default:return null}}var kS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cm(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!kS[o.type]:u==="textarea"}function bm(o,u,c,d){Ia?yi?yi.push(d):yi=[d]:Ia=d,u=Wh(u,"onChange"),0<u.length&&(c=new Ei("onChange","change",null,c,d),o.push({event:c,listeners:u}))}var jl=null,Hl=null;function FS(o){c2(o,0)}function sh(o){var u=lr(o);if(Vo(u))return o}function Rm(o,u){if(o==="change")return u}var Dm=!1;if(Sr){var e0;if(Sr){var t0="oninput"in document;if(!t0){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),t0=typeof Om.oninput=="function"}e0=t0}else e0=!1;Dm=e0&&(!document.documentMode||9<document.documentMode)}function Nm(){jl&&(jl.detachEvent("onpropertychange",Mm),Hl=jl=null)}function Mm(o){if(o.propertyName==="value"&&sh(Hl)){var u=[];bm(u,Hl,o,Tr(o)),Ca(FS,u)}}function US(o,u,c){o==="focusin"?(Nm(),jl=u,Hl=c,jl.attachEvent("onpropertychange",Mm)):o==="focusout"&&Nm()}function zS(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return sh(Hl)}function jS(o,u){if(o==="click")return sh(u)}function HS(o,u){if(o==="input"||o==="change")return sh(u)}function GS(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var fr=typeof Object.is=="function"?Object.is:GS;function Gl(o,u){if(fr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var c=Object.keys(o),d=Object.keys(u);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var v=c[d];if(!qt.call(u,v)||!fr(o[v],u[v]))return!1}return!0}function Pm(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Lm(o,u){var c=Pm(o);o=0;for(var d;c;){if(c.nodeType===3){if(d=o+c.textContent.length,o<=u&&d>=u)return{node:c,offset:u-o};o=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Pm(c)}}function Vm(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Vm(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Bm(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=mi(o.document);u instanceof o.HTMLIFrameElement;){try{var c=typeof u.contentWindow.location.href=="string"}catch{c=!1}if(c)o=u.contentWindow;else break;u=mi(o.document)}return u}function n0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var qS=Sr&&"documentMode"in document&&11>=document.documentMode,ru=null,r0=null,ql=null,i0=!1;function km(o,u,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;i0||ru==null||ru!==mi(d)||(d=ru,"selectionStart"in d&&n0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ql&&Gl(ql,d)||(ql=d,d=Wh(r0,"onSelect"),0<d.length&&(u=new Ei("onSelect","select",null,u,c),o.push({event:u,listeners:d}),u.target=ru)))}function qo(o,u){var c={};return c[o.toLowerCase()]=u.toLowerCase(),c["Webkit"+o]="webkit"+u,c["Moz"+o]="moz"+u,c}var iu={animationend:qo("Animation","AnimationEnd"),animationiteration:qo("Animation","AnimationIteration"),animationstart:qo("Animation","AnimationStart"),transitionrun:qo("Transition","TransitionRun"),transitionstart:qo("Transition","TransitionStart"),transitioncancel:qo("Transition","TransitionCancel"),transitionend:qo("Transition","TransitionEnd")},a0={},Fm={};Sr&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete iu.animationend.animation,delete iu.animationiteration.animation,delete iu.animationstart.animation),"TransitionEvent"in window||delete iu.transitionend.transition);function Xo(o){if(a0[o])return a0[o];if(!iu[o])return o;var u=iu[o],c;for(c in u)if(u.hasOwnProperty(c)&&c in Fm)return a0[o]=u[c];return o}var Um=Xo("animationend"),zm=Xo("animationiteration"),jm=Xo("animationstart"),XS=Xo("transitionrun"),KS=Xo("transitionstart"),YS=Xo("transitioncancel"),Hm=Xo("transitionend"),Gm=new Map,o0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");o0.push("scrollEnd");function Qr(o,u){Gm.set(o,u),gi(u,[o])}var uh=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Cr=[],au=0,s0=0;function lh(){for(var o=au,u=s0=au=0;u<o;){var c=Cr[u];Cr[u++]=null;var d=Cr[u];Cr[u++]=null;var v=Cr[u];Cr[u++]=null;var y=Cr[u];if(Cr[u++]=null,d!==null&&v!==null){var A=d.pending;A===null?v.next=v:(v.next=A.next,A.next=v),d.pending=v}y!==0&&qm(c,v,y)}}function ch(o,u,c,d){Cr[au++]=o,Cr[au++]=u,Cr[au++]=c,Cr[au++]=d,s0|=d,o.lanes|=d,o=o.alternate,o!==null&&(o.lanes|=d)}function u0(o,u,c,d){return ch(o,u,c,d),fh(o)}function Ko(o,u){return ch(o,null,null,u),fh(o)}function qm(o,u,c){o.lanes|=c;var d=o.alternate;d!==null&&(d.lanes|=c);for(var v=!1,y=o.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(o=y.stateNode,o===null||o._visibility&1||(v=!0)),o=y,y=y.return;return o.tag===3?(y=o.stateNode,v&&u!==null&&(v=31-zt(c),o=y.hiddenUpdates,d=o[v],d===null?o[v]=[u]:d.push(u),u.lane=c|536870912),y):null}function fh(o){if(50<dc)throw dc=0,mp=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var ou={};function WS(o,u,c,d){this.tag=o,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(o,u,c,d){return new WS(o,u,c,d)}function l0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Gi(o,u){var c=o.alternate;return c===null?(c=hr(o.tag,u,o.key,o.mode),c.elementType=o.elementType,c.type=o.type,c.stateNode=o.stateNode,c.alternate=o,o.alternate=c):(c.pendingProps=u,c.type=o.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=o.flags&65011712,c.childLanes=o.childLanes,c.lanes=o.lanes,c.child=o.child,c.memoizedProps=o.memoizedProps,c.memoizedState=o.memoizedState,c.updateQueue=o.updateQueue,u=o.dependencies,c.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},c.sibling=o.sibling,c.index=o.index,c.ref=o.ref,c.refCleanup=o.refCleanup,c}function Xm(o,u){o.flags&=65011714;var c=o.alternate;return c===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,u=c.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function hh(o,u,c,d,v,y){var A=0;if(d=o,typeof o=="function")l0(o)&&(A=1);else if(typeof o=="string")A=eC(o,c,ve.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=hr(31,c,u,v),o.elementType=N,o.lanes=y,o;case S:return Yo(c.children,v,y,u);case D:A=8,v|=24;break;case V:return o=hr(12,c,u,v|2),o.elementType=V,o.lanes=y,o;case $:return o=hr(13,c,u,v),o.elementType=$,o.lanes=y,o;case J:return o=hr(19,c,u,v),o.elementType=J,o.lanes=y,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:A=10;break e;case M:A=9;break e;case H:A=11;break e;case C:A=14;break e;case b:A=16,d=null;break e}A=29,c=Error(n(130,o===null?"null":typeof o,"")),d=null}return u=hr(A,c,u,v),u.elementType=o,u.type=d,u.lanes=y,u}function Yo(o,u,c,d){return o=hr(7,o,d,u),o.lanes=c,o}function c0(o,u,c){return o=hr(6,o,null,u),o.lanes=c,o}function Km(o){var u=hr(18,null,null,0);return u.stateNode=o,u}function f0(o,u,c){return u=hr(4,o.children!==null?o.children:[],o.key,u),u.lanes=c,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Ym=new WeakMap;function br(o,u){if(typeof o=="object"&&o!==null){var c=Ym.get(o);return c!==void 0?c:(u={value:o,source:u,stack:Al(u)},Ym.set(o,u),u)}return{value:o,source:u,stack:Al(u)}}var su=[],uu=0,dh=null,Xl=0,Rr=[],Dr=0,Oa=null,Ti=1,Si="";function qi(o,u){su[uu++]=Xl,su[uu++]=dh,dh=o,Xl=u}function Wm(o,u,c){Rr[Dr++]=Ti,Rr[Dr++]=Si,Rr[Dr++]=Oa,Oa=o;var d=Ti;o=Si;var v=32-zt(d)-1;d&=~(1<<v),c+=1;var y=32-zt(u)+v;if(30<y){var A=v-v%5;y=(d&(1<<A)-1).toString(32),d>>=A,v-=A,Ti=1<<32-zt(u)+v|c<<v|d,Si=y+o}else Ti=1<<y|c<<v|d,Si=o}function h0(o){o.return!==null&&(qi(o,1),Wm(o,1,0))}function d0(o){for(;o===dh;)dh=su[--uu],su[uu]=null,Xl=su[--uu],su[uu]=null;for(;o===Oa;)Oa=Rr[--Dr],Rr[Dr]=null,Si=Rr[--Dr],Rr[Dr]=null,Ti=Rr[--Dr],Rr[Dr]=null}function Qm(o,u){Rr[Dr++]=Ti,Rr[Dr++]=Si,Rr[Dr++]=Oa,Ti=u.id,Si=u.overflow,Oa=o}var Cn=null,It=null,Ye=!1,Na=null,Or=!1,p0=Error(n(519));function Ma(o){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kl(br(u,o)),p0}function $m(o){var u=o.stateNode,c=o.type,d=o.memoizedProps;switch(u[Kt]=o,u[vn]=d,c){case"dialog":He("cancel",u),He("close",u);break;case"iframe":case"object":case"embed":He("load",u);break;case"video":case"audio":for(c=0;c<gc.length;c++)He(gc[c],u);break;case"source":He("error",u);break;case"img":case"image":case"link":He("error",u),He("load",u);break;case"details":He("toggle",u);break;case"input":He("invalid",u),Xf(u,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":He("invalid",u);break;case"textarea":He("invalid",u),Ta(u,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||u.textContent===""+c||d.suppressHydrationWarning===!0||p2(u.textContent,c)?(d.popover!=null&&(He("beforetoggle",u),He("toggle",u)),d.onScroll!=null&&He("scroll",u),d.onScrollEnd!=null&&He("scrollend",u),d.onClick!=null&&(u.onclick=qr),u=!0):u=!1,u||Ma(o,!0)}function Zm(o){for(Cn=o.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:Cn=Cn.return}}function lu(o){if(o!==Cn)return!1;if(!Ye)return Zm(o),Ye=!0,!1;var u=o.tag,c;if((c=u!==3&&u!==27)&&((c=u===5)&&(c=o.type,c=!(c!=="form"&&c!=="button")||Np(o.type,o.memoizedProps)),c=!c),c&&It&&Ma(o),Zm(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));It=w2(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));It=w2(o)}else u===27?(u=It,Ka(o.type)?(o=Bp,Bp=null,It=o):It=u):It=Cn?Mr(o.stateNode.nextSibling):null;return!0}function Wo(){It=Cn=null,Ye=!1}function g0(){var o=Na;return o!==null&&(rr===null?rr=o:rr.push.apply(rr,o),Na=null),o}function Kl(o){Na===null?Na=[o]:Na.push(o)}var v0=j(null),Qo=null,Xi=null;function Pa(o,u,c){ge(v0,u._currentValue),u._currentValue=c}function Ki(o){o._currentValue=v0.current,ue(v0)}function m0(o,u,c){for(;o!==null;){var d=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,d!==null&&(d.childLanes|=u)):d!==null&&(d.childLanes&u)!==u&&(d.childLanes|=u),o===c)break;o=o.return}}function y0(o,u,c,d){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var y=v.dependencies;if(y!==null){var A=v.child;y=y.firstContext;e:for(;y!==null;){var I=y;y=v;for(var F=0;F<u.length;F++)if(I.context===u[F]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),m0(y.return,c,o),d||(A=null);break e}y=I.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(n(341));A.lanes|=c,y=A.alternate,y!==null&&(y.lanes|=c),m0(A,c,o),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===o){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function cu(o,u,c,d){o=null;for(var v=u,y=!1;v!==null;){if(!y){if((v.flags&524288)!==0)y=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(n(387));if(A=A.memoizedProps,A!==null){var I=v.type;fr(v.pendingProps.value,A.value)||(o!==null?o.push(I):o=[I])}}else if(v===We.current){if(A=v.alternate,A===null)throw Error(n(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Ec):o=[Ec])}v=v.return}o!==null&&y0(u,o,c,d),u.flags|=262144}function ph(o){for(o=o.firstContext;o!==null;){if(!fr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function $o(o){Qo=o,Xi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function bn(o){return Jm(Qo,o)}function gh(o,u){return Qo===null&&$o(o),Jm(o,u)}function Jm(o,u){var c=u._currentValue;if(u={context:u,memoizedValue:c,next:null},Xi===null){if(o===null)throw Error(n(308));Xi=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Xi=Xi.next=u;return c}var QS=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(c,d){o.push(d)}};this.abort=function(){u.aborted=!0,o.forEach(function(c){return c()})}},$S=r.unstable_scheduleCallback,ZS=r.unstable_NormalPriority,Qt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _0(){return{controller:new QS,data:new Map,refCount:0}}function Yl(o){o.refCount--,o.refCount===0&&$S(ZS,function(){o.controller.abort()})}var Wl=null,E0=0,fu=0,hu=null;function JS(o,u){if(Wl===null){var c=Wl=[];E0=0,fu=wp(),hu={status:"pending",value:void 0,then:function(d){c.push(d)}}}return E0++,u.then(ey,ey),u}function ey(){if(--E0===0&&Wl!==null){hu!==null&&(hu.status="fulfilled");var o=Wl;Wl=null,fu=0,hu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function eI(o,u){var c=[],d={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return o.then(function(){d.status="fulfilled",d.value=u;for(var v=0;v<c.length;v++)(0,c[v])(u)},function(v){for(d.status="rejected",d.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),d}var ty=ne.S;ne.S=function(o,u){k_=Hn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&JS(o,u),ty!==null&&ty(o,u)};var Zo=j(null);function x0(){var o=Zo.current;return o!==null?o:Tt.pooledCache}function vh(o,u){u===null?ge(Zo,Zo.current):ge(Zo,u.pool)}function ny(){var o=x0();return o===null?null:{parent:Qt._currentValue,pool:o}}var du=Error(n(460)),A0=Error(n(474)),mh=Error(n(542)),yh={then:function(){}};function ry(o){return o=o.status,o==="fulfilled"||o==="rejected"}function iy(o,u,c){switch(c=o[c],c===void 0?o.push(u):c!==u&&(u.then(qr,qr),u=c),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,oy(o),o;default:if(typeof u.status=="string")u.then(qr,qr);else{if(o=Tt,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(d){if(u.status==="pending"){var v=u;v.status="fulfilled",v.value=d}},function(d){if(u.status==="pending"){var v=u;v.status="rejected",v.reason=d}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,oy(o),o}throw es=u,du}}function Jo(o){try{var u=o._init;return u(o._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(es=c,du):c}}var es=null;function ay(){if(es===null)throw Error(n(459));var o=es;return es=null,o}function oy(o){if(o===du||o===mh)throw Error(n(483))}var pu=null,Ql=0;function _h(o){var u=Ql;return Ql+=1,pu===null&&(pu=[]),iy(pu,o,u)}function $l(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Eh(o,u){throw u.$$typeof===_?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function sy(o){function u(q,z){if(o){var W=q.deletions;W===null?(q.deletions=[z],q.flags|=16):W.push(z)}}function c(q,z){if(!o)return null;for(;z!==null;)u(q,z),z=z.sibling;return null}function d(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function v(q,z){return q=Gi(q,z),q.index=0,q.sibling=null,q}function y(q,z,W){return q.index=W,o?(W=q.alternate,W!==null?(W=W.index,W<z?(q.flags|=67108866,z):W):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function A(q){return o&&q.alternate===null&&(q.flags|=67108866),q}function I(q,z,W,oe){return z===null||z.tag!==6?(z=c0(W,q.mode,oe),z.return=q,z):(z=v(z,W),z.return=q,z)}function F(q,z,W,oe){var Te=W.type;return Te===S?ie(q,z,W.props.children,oe,W.key):z!==null&&(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&Jo(Te)===z.type)?(z=v(z,W.props),$l(z,W),z.return=q,z):(z=hh(W.type,W.key,W.props,null,q.mode,oe),$l(z,W),z.return=q,z)}function Q(q,z,W,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=f0(W,q.mode,oe),z.return=q,z):(z=v(z,W.children||[]),z.return=q,z)}function ie(q,z,W,oe,Te){return z===null||z.tag!==7?(z=Yo(W,q.mode,oe,Te),z.return=q,z):(z=v(z,W),z.return=q,z)}function se(q,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=c0(""+z,q.mode,W),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case E:return W=hh(z.type,z.key,z.props,null,q.mode,W),$l(W,z),W.return=q,W;case T:return z=f0(z,q.mode,W),z.return=q,z;case b:return z=Jo(z),se(q,z,W)}if(yt(z)||U(z))return z=Yo(z,q.mode,W,null),z.return=q,z;if(typeof z.then=="function")return se(q,_h(z),W);if(z.$$typeof===B)return se(q,gh(q,z),W);Eh(q,z)}return null}function Z(q,z,W,oe){var Te=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Te!==null?null:I(q,z,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case E:return W.key===Te?F(q,z,W,oe):null;case T:return W.key===Te?Q(q,z,W,oe):null;case b:return W=Jo(W),Z(q,z,W,oe)}if(yt(W)||U(W))return Te!==null?null:ie(q,z,W,oe,null);if(typeof W.then=="function")return Z(q,z,_h(W),oe);if(W.$$typeof===B)return Z(q,z,gh(q,W),oe);Eh(q,W)}return null}function te(q,z,W,oe,Te){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return q=q.get(W)||null,I(z,q,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case E:return q=q.get(oe.key===null?W:oe.key)||null,F(z,q,oe,Te);case T:return q=q.get(oe.key===null?W:oe.key)||null,Q(z,q,oe,Te);case b:return oe=Jo(oe),te(q,z,W,oe,Te)}if(yt(oe)||U(oe))return q=q.get(W)||null,ie(z,q,oe,Te,null);if(typeof oe.then=="function")return te(q,z,W,_h(oe),Te);if(oe.$$typeof===B)return te(q,z,W,gh(z,oe),Te);Eh(z,oe)}return null}function me(q,z,W,oe){for(var Te=null,et=null,xe=z,ke=z=0,qe=null;xe!==null&&ke<W.length;ke++){xe.index>ke?(qe=xe,xe=null):qe=xe.sibling;var tt=Z(q,xe,W[ke],oe);if(tt===null){xe===null&&(xe=qe);break}o&&xe&&tt.alternate===null&&u(q,xe),z=y(tt,z,ke),et===null?Te=tt:et.sibling=tt,et=tt,xe=qe}if(ke===W.length)return c(q,xe),Ye&&qi(q,ke),Te;if(xe===null){for(;ke<W.length;ke++)xe=se(q,W[ke],oe),xe!==null&&(z=y(xe,z,ke),et===null?Te=xe:et.sibling=xe,et=xe);return Ye&&qi(q,ke),Te}for(xe=d(xe);ke<W.length;ke++)qe=te(xe,q,ke,W[ke],oe),qe!==null&&(o&&qe.alternate!==null&&xe.delete(qe.key===null?ke:qe.key),z=y(qe,z,ke),et===null?Te=qe:et.sibling=qe,et=qe);return o&&xe.forEach(function(Za){return u(q,Za)}),Ye&&qi(q,ke),Te}function be(q,z,W,oe){if(W==null)throw Error(n(151));for(var Te=null,et=null,xe=z,ke=z=0,qe=null,tt=W.next();xe!==null&&!tt.done;ke++,tt=W.next()){xe.index>ke?(qe=xe,xe=null):qe=xe.sibling;var Za=Z(q,xe,tt.value,oe);if(Za===null){xe===null&&(xe=qe);break}o&&xe&&Za.alternate===null&&u(q,xe),z=y(Za,z,ke),et===null?Te=Za:et.sibling=Za,et=Za,xe=qe}if(tt.done)return c(q,xe),Ye&&qi(q,ke),Te;if(xe===null){for(;!tt.done;ke++,tt=W.next())tt=se(q,tt.value,oe),tt!==null&&(z=y(tt,z,ke),et===null?Te=tt:et.sibling=tt,et=tt);return Ye&&qi(q,ke),Te}for(xe=d(xe);!tt.done;ke++,tt=W.next())tt=te(xe,q,ke,tt.value,oe),tt!==null&&(o&&tt.alternate!==null&&xe.delete(tt.key===null?ke:tt.key),z=y(tt,z,ke),et===null?Te=tt:et.sibling=tt,et=tt);return o&&xe.forEach(function(fC){return u(q,fC)}),Ye&&qi(q,ke),Te}function At(q,z,W,oe){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case E:e:{for(var Te=W.key;z!==null;){if(z.key===Te){if(Te=W.type,Te===S){if(z.tag===7){c(q,z.sibling),oe=v(z,W.props.children),oe.return=q,q=oe;break e}}else if(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===b&&Jo(Te)===z.type){c(q,z.sibling),oe=v(z,W.props),$l(oe,W),oe.return=q,q=oe;break e}c(q,z);break}else u(q,z);z=z.sibling}W.type===S?(oe=Yo(W.props.children,q.mode,oe,W.key),oe.return=q,q=oe):(oe=hh(W.type,W.key,W.props,null,q.mode,oe),$l(oe,W),oe.return=q,q=oe)}return A(q);case T:e:{for(Te=W.key;z!==null;){if(z.key===Te)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){c(q,z.sibling),oe=v(z,W.children||[]),oe.return=q,q=oe;break e}else{c(q,z);break}else u(q,z);z=z.sibling}oe=f0(W,q.mode,oe),oe.return=q,q=oe}return A(q);case b:return W=Jo(W),At(q,z,W,oe)}if(yt(W))return me(q,z,W,oe);if(U(W)){if(Te=U(W),typeof Te!="function")throw Error(n(150));return W=Te.call(W),be(q,z,W,oe)}if(typeof W.then=="function")return At(q,z,_h(W),oe);if(W.$$typeof===B)return At(q,z,gh(q,W),oe);Eh(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(c(q,z.sibling),oe=v(z,W),oe.return=q,q=oe):(c(q,z),oe=c0(W,q.mode,oe),oe.return=q,q=oe),A(q)):c(q,z)}return function(q,z,W,oe){try{Ql=0;var Te=At(q,z,W,oe);return pu=null,Te}catch(xe){if(xe===du||xe===mh)throw xe;var et=hr(29,xe,null,q.mode);return et.lanes=oe,et.return=q,et}}}var ts=sy(!0),uy=sy(!1),La=!1;function w0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T0(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Va(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ba(o,u,c){var d=o.updateQueue;if(d===null)return null;if(d=d.shared,(it&2)!==0){var v=d.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),d.pending=u,u=fh(o),qm(o,null,c),u}return ch(o,d,u,c),fh(o)}function Zl(o,u,c){if(u=u.updateQueue,u!==null&&(u=u.shared,(c&4194048)!==0)){var d=u.lanes;d&=o.pendingLanes,c|=d,u.lanes=c,Sl(o,c)}}function S0(o,u){var c=o.updateQueue,d=o.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var v=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var A={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?v=y=A:y=y.next=A,c=c.next}while(c!==null);y===null?v=y=u:y=y.next=u}else v=y=u;c={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},o.updateQueue=c;return}o=c.lastBaseUpdate,o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=u}var I0=!1;function Jl(){if(I0){var o=hu;if(o!==null)throw o}}function ec(o,u,c,d){I0=!1;var v=o.updateQueue;La=!1;var y=v.firstBaseUpdate,A=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var F=I,Q=F.next;F.next=null,A===null?y=Q:A.next=Q,A=F;var ie=o.alternate;ie!==null&&(ie=ie.updateQueue,I=ie.lastBaseUpdate,I!==A&&(I===null?ie.firstBaseUpdate=Q:I.next=Q,ie.lastBaseUpdate=F))}if(y!==null){var se=v.baseState;A=0,ie=Q=F=null,I=y;do{var Z=I.lane&-536870913,te=Z!==I.lane;if(te?(Ge&Z)===Z:(d&Z)===Z){Z!==0&&Z===fu&&(I0=!0),ie!==null&&(ie=ie.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=o,be=I;Z=u;var At=c;switch(be.tag){case 1:if(me=be.payload,typeof me=="function"){se=me.call(At,se,Z);break e}se=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=be.payload,Z=typeof me=="function"?me.call(At,se,Z):me,Z==null)break e;se=m({},se,Z);break e;case 2:La=!0}}Z=I.callback,Z!==null&&(o.flags|=64,te&&(o.flags|=8192),te=v.callbacks,te===null?v.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ie===null?(Q=ie=te,F=se):ie=ie.next=te,A|=Z;if(I=I.next,I===null){if(I=v.shared.pending,I===null)break;te=I,I=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);ie===null&&(F=se),v.baseState=F,v.firstBaseUpdate=Q,v.lastBaseUpdate=ie,y===null&&(v.shared.lanes=0),ja|=A,o.lanes=A,o.memoizedState=se}}function ly(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function cy(o,u){var c=o.callbacks;if(c!==null)for(o.callbacks=null,o=0;o<c.length;o++)ly(c[o],u)}var gu=j(null),xh=j(0);function fy(o,u){o=na,ge(xh,o),ge(gu,u),na=o|u.baseLanes}function C0(){ge(xh,na),ge(gu,gu.current)}function b0(){na=xh.current,ue(gu),ue(xh)}var dr=j(null),Nr=null;function ka(o){var u=o.alternate;ge(Ht,Ht.current&1),ge(dr,o),Nr===null&&(u===null||gu.current!==null||u.memoizedState!==null)&&(Nr=o)}function R0(o){ge(Ht,Ht.current),ge(dr,o),Nr===null&&(Nr=o)}function hy(o){o.tag===22?(ge(Ht,Ht.current),ge(dr,o),Nr===null&&(Nr=o)):Fa()}function Fa(){ge(Ht,Ht.current),ge(dr,dr.current)}function pr(o){ue(dr),Nr===o&&(Nr=null),ue(Ht)}var Ht=j(0);function Ah(o){for(var u=o;u!==null;){if(u.tag===13){var c=u.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Lp(c)||Vp(c)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Yi=0,Ve=null,Et=null,$t=null,wh=!1,vu=!1,ns=!1,Th=0,tc=0,mu=null,tI=0;function Bt(){throw Error(n(321))}function D0(o,u){if(u===null)return!1;for(var c=0;c<u.length&&c<o.length;c++)if(!fr(o[c],u[c]))return!1;return!0}function O0(o,u,c,d,v,y){return Yi=y,Ve=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ne.H=o===null||o.memoizedState===null?Wy:X0,ns=!1,y=c(d,v),ns=!1,vu&&(y=py(u,c,d,v)),dy(o),y}function dy(o){ne.H=ic;var u=Et!==null&&Et.next!==null;if(Yi=0,$t=Et=Ve=null,wh=!1,tc=0,mu=null,u)throw Error(n(300));o===null||Zt||(o=o.dependencies,o!==null&&ph(o)&&(Zt=!0))}function py(o,u,c,d){Ve=o;var v=0;do{if(vu&&(mu=null),tc=0,vu=!1,25<=v)throw Error(n(301));if(v+=1,$t=Et=null,o.updateQueue!=null){var y=o.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ne.H=Qy,y=u(c,d)}while(vu);return y}function nI(){var o=ne.H,u=o.useState()[0];return u=typeof u.then=="function"?nc(u):u,o=o.useState()[0],(Et!==null?Et.memoizedState:null)!==o&&(Ve.flags|=1024),u}function N0(){var o=Th!==0;return Th=0,o}function M0(o,u,c){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~c}function P0(o){if(wh){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}wh=!1}Yi=0,$t=Et=Ve=null,vu=!1,tc=Th=0,mu=null}function qn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?Ve.memoizedState=$t=o:$t=$t.next=o,$t}function Gt(){if(Et===null){var o=Ve.alternate;o=o!==null?o.memoizedState:null}else o=Et.next;var u=$t===null?Ve.memoizedState:$t.next;if(u!==null)$t=u,Et=o;else{if(o===null)throw Ve.alternate===null?Error(n(467)):Error(n(310));Et=o,o={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},$t===null?Ve.memoizedState=$t=o:$t=$t.next=o}return $t}function Sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nc(o){var u=tc;return tc+=1,mu===null&&(mu=[]),o=iy(mu,o,u),u=Ve,($t===null?u.memoizedState:$t.next)===null&&(u=u.alternate,ne.H=u===null||u.memoizedState===null?Wy:X0),o}function Ih(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return nc(o);if(o.$$typeof===B)return bn(o)}throw Error(n(438,String(o)))}function L0(o){var u=null,c=Ve.updateQueue;if(c!==null&&(u=c.memoCache),u==null){var d=Ve.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(u={data:d.data.map(function(v){return v.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),c===null&&(c=Sh(),Ve.updateQueue=c),c.memoCache=u,c=u.data[u.index],c===void 0)for(c=u.data[u.index]=Array(o),d=0;d<o;d++)c[d]=P;return u.index++,c}function Wi(o,u){return typeof u=="function"?u(o):u}function Ch(o){var u=Gt();return V0(u,Et,o)}function V0(o,u,c){var d=o.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var v=o.baseQueue,y=d.pending;if(y!==null){if(v!==null){var A=v.next;v.next=y.next,y.next=A}u.baseQueue=v=y,d.pending=null}if(y=o.baseState,v===null)o.memoizedState=y;else{u=v.next;var I=A=null,F=null,Q=u,ie=!1;do{var se=Q.lane&-536870913;if(se!==Q.lane?(Ge&se)===se:(Yi&se)===se){var Z=Q.revertLane;if(Z===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),se===fu&&(ie=!0);else if((Yi&Z)===Z){Q=Q.next,Z===fu&&(ie=!0);continue}else se={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=se,A=y):F=F.next=se,Ve.lanes|=Z,ja|=Z;se=Q.action,ns&&c(y,se),y=Q.hasEagerState?Q.eagerState:c(y,se)}else Z={lane:se,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},F===null?(I=F=Z,A=y):F=F.next=Z,Ve.lanes|=se,ja|=se;Q=Q.next}while(Q!==null&&Q!==u);if(F===null?A=y:F.next=I,!fr(y,o.memoizedState)&&(Zt=!0,ie&&(c=hu,c!==null)))throw c;o.memoizedState=y,o.baseState=A,o.baseQueue=F,d.lastRenderedState=y}return v===null&&(d.lanes=0),[o.memoizedState,d.dispatch]}function B0(o){var u=Gt(),c=u.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=o;var d=c.dispatch,v=c.pending,y=u.memoizedState;if(v!==null){c.pending=null;var A=v=v.next;do y=o(y,A.action),A=A.next;while(A!==v);fr(y,u.memoizedState)||(Zt=!0),u.memoizedState=y,u.baseQueue===null&&(u.baseState=y),c.lastRenderedState=y}return[y,d]}function gy(o,u,c){var d=Ve,v=Gt(),y=Ye;if(y){if(c===void 0)throw Error(n(407));c=c()}else c=u();var A=!fr((Et||v).memoizedState,c);if(A&&(v.memoizedState=c,Zt=!0),v=v.queue,U0(yy.bind(null,d,v,o),[o]),v.getSnapshot!==u||A||$t!==null&&$t.memoizedState.tag&1){if(d.flags|=2048,yu(9,{destroy:void 0},my.bind(null,d,v,c,u),null),Tt===null)throw Error(n(349));y||(Yi&127)!==0||vy(d,u,c)}return c}function vy(o,u,c){o.flags|=16384,o={getSnapshot:u,value:c},u=Ve.updateQueue,u===null?(u=Sh(),Ve.updateQueue=u,u.stores=[o]):(c=u.stores,c===null?u.stores=[o]:c.push(o))}function my(o,u,c,d){u.value=c,u.getSnapshot=d,_y(u)&&Ey(o)}function yy(o,u,c){return c(function(){_y(u)&&Ey(o)})}function _y(o){var u=o.getSnapshot;o=o.value;try{var c=u();return!fr(o,c)}catch{return!0}}function Ey(o){var u=Ko(o,2);u!==null&&ir(u,o,2)}function k0(o){var u=qn();if(typeof o=="function"){var c=o;if(o=c(),ns){Ar(!0);try{c()}finally{Ar(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:o},u}function xy(o,u,c,d){return o.baseState=c,V0(o,Et,typeof d=="function"?d:Wi)}function rI(o,u,c,d,v){if(Dh(o))throw Error(n(485));if(o=u.action,o!==null){var y={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};ne.T!==null?c(!0):y.isTransition=!1,d(y),c=u.pending,c===null?(y.next=u.pending=y,Ay(u,y)):(y.next=c.next,u.pending=c.next=y)}}function Ay(o,u){var c=u.action,d=u.payload,v=o.state;if(u.isTransition){var y=ne.T,A={};ne.T=A;try{var I=c(v,d),F=ne.S;F!==null&&F(A,I),wy(o,u,I)}catch(Q){F0(o,u,Q)}finally{y!==null&&A.types!==null&&(y.types=A.types),ne.T=y}}else try{y=c(v,d),wy(o,u,y)}catch(Q){F0(o,u,Q)}}function wy(o,u,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Ty(o,u,d)},function(d){return F0(o,u,d)}):Ty(o,u,c)}function Ty(o,u,c){u.status="fulfilled",u.value=c,Sy(u),o.state=c,u=o.pending,u!==null&&(c=u.next,c===u?o.pending=null:(c=c.next,u.next=c,Ay(o,c)))}function F0(o,u,c){var d=o.pending;if(o.pending=null,d!==null){d=d.next;do u.status="rejected",u.reason=c,Sy(u),u=u.next;while(u!==d)}o.action=null}function Sy(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Iy(o,u){return u}function Cy(o,u){if(Ye){var c=Tt.formState;if(c!==null){e:{var d=Ve;if(Ye){if(It){t:{for(var v=It,y=Or;v.nodeType!==8;){if(!y){v=null;break t}if(v=Mr(v.nextSibling),v===null){v=null;break t}}y=v.data,v=y==="F!"||y==="F"?v:null}if(v){It=Mr(v.nextSibling),d=v.data==="F!";break e}}Ma(d)}d=!1}d&&(u=c[0])}}return c=qn(),c.memoizedState=c.baseState=u,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:u},c.queue=d,c=Xy.bind(null,Ve,d),d.dispatch=c,d=k0(!1),y=q0.bind(null,Ve,!1,d.queue),d=qn(),v={state:u,dispatch:null,action:o,pending:null},d.queue=v,c=rI.bind(null,Ve,v,y,c),v.dispatch=c,d.memoizedState=o,[u,c,!1]}function by(o){var u=Gt();return Ry(u,Et,o)}function Ry(o,u,c){if(u=V0(o,u,Iy)[0],o=Ch(Wi)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var d=nc(u)}catch(A){throw A===du?mh:A}else d=u;u=Gt();var v=u.queue,y=v.dispatch;return c!==u.memoizedState&&(Ve.flags|=2048,yu(9,{destroy:void 0},iI.bind(null,v,c),null)),[d,y,o]}function iI(o,u){o.action=u}function Dy(o){var u=Gt(),c=Et;if(c!==null)return Ry(u,c,o);Gt(),u=u.memoizedState,c=Gt();var d=c.queue.dispatch;return c.memoizedState=o,[u,d,!1]}function yu(o,u,c,d){return o={tag:o,create:c,deps:d,inst:u,next:null},u=Ve.updateQueue,u===null&&(u=Sh(),Ve.updateQueue=u),c=u.lastEffect,c===null?u.lastEffect=o.next=o:(d=c.next,c.next=o,o.next=d,u.lastEffect=o),o}function Oy(){return Gt().memoizedState}function bh(o,u,c,d){var v=qn();Ve.flags|=o,v.memoizedState=yu(1|u,{destroy:void 0},c,d===void 0?null:d)}function Rh(o,u,c,d){var v=Gt();d=d===void 0?null:d;var y=v.memoizedState.inst;Et!==null&&d!==null&&D0(d,Et.memoizedState.deps)?v.memoizedState=yu(u,y,c,d):(Ve.flags|=o,v.memoizedState=yu(1|u,y,c,d))}function Ny(o,u){bh(8390656,8,o,u)}function U0(o,u){Rh(2048,8,o,u)}function aI(o){Ve.flags|=4;var u=Ve.updateQueue;if(u===null)u=Sh(),Ve.updateQueue=u,u.events=[o];else{var c=u.events;c===null?u.events=[o]:c.push(o)}}function My(o){var u=Gt().memoizedState;return aI({ref:u,nextImpl:o}),function(){if((it&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Py(o,u){return Rh(4,2,o,u)}function Ly(o,u){return Rh(4,4,o,u)}function Vy(o,u){if(typeof u=="function"){o=o();var c=u(o);return function(){typeof c=="function"?c():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function By(o,u,c){c=c!=null?c.concat([o]):null,Rh(4,4,Vy.bind(null,u,o),c)}function z0(){}function ky(o,u){var c=Gt();u=u===void 0?null:u;var d=c.memoizedState;return u!==null&&D0(u,d[1])?d[0]:(c.memoizedState=[o,u],o)}function Fy(o,u){var c=Gt();u=u===void 0?null:u;var d=c.memoizedState;if(u!==null&&D0(u,d[1]))return d[0];if(d=o(),ns){Ar(!0);try{o()}finally{Ar(!1)}}return c.memoizedState=[d,u],d}function j0(o,u,c){return c===void 0||(Yi&1073741824)!==0&&(Ge&261930)===0?o.memoizedState=u:(o.memoizedState=c,o=U_(),Ve.lanes|=o,ja|=o,c)}function Uy(o,u,c,d){return fr(c,u)?c:gu.current!==null?(o=j0(o,c,d),fr(o,u)||(Zt=!0),o):(Yi&42)===0||(Yi&1073741824)!==0&&(Ge&261930)===0?(Zt=!0,o.memoizedState=c):(o=U_(),Ve.lanes|=o,ja|=o,u)}function zy(o,u,c,d,v){var y=de.p;de.p=y!==0&&8>y?y:8;var A=ne.T,I={};ne.T=I,q0(o,!1,u,c);try{var F=v(),Q=ne.S;if(Q!==null&&Q(I,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ie=eI(F,d);rc(o,u,ie,mr(o))}else rc(o,u,d,mr(o))}catch(se){rc(o,u,{then:function(){},status:"rejected",reason:se},mr())}finally{de.p=y,A!==null&&I.types!==null&&(A.types=I.types),ne.T=A}}function oI(){}function H0(o,u,c,d){if(o.tag!==5)throw Error(n(476));var v=jy(o).queue;zy(o,v,u,we,c===null?oI:function(){return Hy(o),c(d)})}function jy(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:we},next:null};var c={};return u.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:c},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Hy(o){var u=jy(o);u.next===null&&(u=o.alternate.memoizedState),rc(o,u.next.queue,{},mr())}function G0(){return bn(Ec)}function Gy(){return Gt().memoizedState}function qy(){return Gt().memoizedState}function sI(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var c=mr();o=Va(c);var d=Ba(u,o,c);d!==null&&(ir(d,u,c),Zl(d,u,c)),u={cache:_0()},o.payload=u;return}u=u.return}}function uI(o,u,c){var d=mr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Dh(o)?Ky(u,c):(c=u0(o,u,c,d),c!==null&&(ir(c,o,d),Yy(c,u,d)))}function Xy(o,u,c){var d=mr();rc(o,u,c,d)}function rc(o,u,c,d){var v={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dh(o))Ky(u,v);else{var y=o.alternate;if(o.lanes===0&&(y===null||y.lanes===0)&&(y=u.lastRenderedReducer,y!==null))try{var A=u.lastRenderedState,I=y(A,c);if(v.hasEagerState=!0,v.eagerState=I,fr(I,A))return ch(o,u,v,0),Tt===null&&lh(),!1}catch{}if(c=u0(o,u,v,d),c!==null)return ir(c,o,d),Yy(c,u,d),!0}return!1}function q0(o,u,c,d){if(d={lane:2,revertLane:wp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Dh(o)){if(u)throw Error(n(479))}else u=u0(o,c,d,2),u!==null&&ir(u,o,2)}function Dh(o){var u=o.alternate;return o===Ve||u!==null&&u===Ve}function Ky(o,u){vu=wh=!0;var c=o.pending;c===null?u.next=u:(u.next=c.next,c.next=u),o.pending=u}function Yy(o,u,c){if((c&4194048)!==0){var d=u.lanes;d&=o.pendingLanes,c|=d,u.lanes=c,Sl(o,c)}}var ic={readContext:bn,use:Ih,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt};ic.useEffectEvent=Bt;var Wy={readContext:bn,use:Ih,useCallback:function(o,u){return qn().memoizedState=[o,u===void 0?null:u],o},useContext:bn,useEffect:Ny,useImperativeHandle:function(o,u,c){c=c!=null?c.concat([o]):null,bh(4194308,4,Vy.bind(null,u,o),c)},useLayoutEffect:function(o,u){return bh(4194308,4,o,u)},useInsertionEffect:function(o,u){bh(4,2,o,u)},useMemo:function(o,u){var c=qn();u=u===void 0?null:u;var d=o();if(ns){Ar(!0);try{o()}finally{Ar(!1)}}return c.memoizedState=[d,u],d},useReducer:function(o,u,c){var d=qn();if(c!==void 0){var v=c(u);if(ns){Ar(!0);try{c(u)}finally{Ar(!1)}}}else v=u;return d.memoizedState=d.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},d.queue=o,o=o.dispatch=uI.bind(null,Ve,o),[d.memoizedState,o]},useRef:function(o){var u=qn();return o={current:o},u.memoizedState=o},useState:function(o){o=k0(o);var u=o.queue,c=Xy.bind(null,Ve,u);return u.dispatch=c,[o.memoizedState,c]},useDebugValue:z0,useDeferredValue:function(o,u){var c=qn();return j0(c,o,u)},useTransition:function(){var o=k0(!1);return o=zy.bind(null,Ve,o.queue,!0,!1),qn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,c){var d=Ve,v=qn();if(Ye){if(c===void 0)throw Error(n(407));c=c()}else{if(c=u(),Tt===null)throw Error(n(349));(Ge&127)!==0||vy(d,u,c)}v.memoizedState=c;var y={value:c,getSnapshot:u};return v.queue=y,Ny(yy.bind(null,d,y,o),[o]),d.flags|=2048,yu(9,{destroy:void 0},my.bind(null,d,y,c,u),null),c},useId:function(){var o=qn(),u=Tt.identifierPrefix;if(Ye){var c=Si,d=Ti;c=(d&~(1<<32-zt(d)-1)).toString(32)+c,u="_"+u+"R_"+c,c=Th++,0<c&&(u+="H"+c.toString(32)),u+="_"}else c=tI++,u="_"+u+"r_"+c.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:G0,useFormState:Cy,useActionState:Cy,useOptimistic:function(o){var u=qn();u.memoizedState=u.baseState=o;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=c,u=q0.bind(null,Ve,!0,c),c.dispatch=u,[o,u]},useMemoCache:L0,useCacheRefresh:function(){return qn().memoizedState=sI.bind(null,Ve)},useEffectEvent:function(o){var u=qn(),c={impl:o};return u.memoizedState=c,function(){if((it&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},X0={readContext:bn,use:Ih,useCallback:ky,useContext:bn,useEffect:U0,useImperativeHandle:By,useInsertionEffect:Py,useLayoutEffect:Ly,useMemo:Fy,useReducer:Ch,useRef:Oy,useState:function(){return Ch(Wi)},useDebugValue:z0,useDeferredValue:function(o,u){var c=Gt();return Uy(c,Et.memoizedState,o,u)},useTransition:function(){var o=Ch(Wi)[0],u=Gt().memoizedState;return[typeof o=="boolean"?o:nc(o),u]},useSyncExternalStore:gy,useId:Gy,useHostTransitionStatus:G0,useFormState:by,useActionState:by,useOptimistic:function(o,u){var c=Gt();return xy(c,Et,o,u)},useMemoCache:L0,useCacheRefresh:qy};X0.useEffectEvent=My;var Qy={readContext:bn,use:Ih,useCallback:ky,useContext:bn,useEffect:U0,useImperativeHandle:By,useInsertionEffect:Py,useLayoutEffect:Ly,useMemo:Fy,useReducer:B0,useRef:Oy,useState:function(){return B0(Wi)},useDebugValue:z0,useDeferredValue:function(o,u){var c=Gt();return Et===null?j0(c,o,u):Uy(c,Et.memoizedState,o,u)},useTransition:function(){var o=B0(Wi)[0],u=Gt().memoizedState;return[typeof o=="boolean"?o:nc(o),u]},useSyncExternalStore:gy,useId:Gy,useHostTransitionStatus:G0,useFormState:Dy,useActionState:Dy,useOptimistic:function(o,u){var c=Gt();return Et!==null?xy(c,Et,o,u):(c.baseState=o,[o,c.queue.dispatch])},useMemoCache:L0,useCacheRefresh:qy};Qy.useEffectEvent=My;function K0(o,u,c,d){u=o.memoizedState,c=c(d,u),c=c==null?u:m({},u,c),o.memoizedState=c,o.lanes===0&&(o.updateQueue.baseState=c)}var Y0={enqueueSetState:function(o,u,c){o=o._reactInternals;var d=mr(),v=Va(d);v.payload=u,c!=null&&(v.callback=c),u=Ba(o,v,d),u!==null&&(ir(u,o,d),Zl(u,o,d))},enqueueReplaceState:function(o,u,c){o=o._reactInternals;var d=mr(),v=Va(d);v.tag=1,v.payload=u,c!=null&&(v.callback=c),u=Ba(o,v,d),u!==null&&(ir(u,o,d),Zl(u,o,d))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var c=mr(),d=Va(c);d.tag=2,u!=null&&(d.callback=u),u=Ba(o,d,c),u!==null&&(ir(u,o,c),Zl(u,o,c))}};function $y(o,u,c,d,v,y,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(d,y,A):u.prototype&&u.prototype.isPureReactComponent?!Gl(c,d)||!Gl(v,y):!0}function Zy(o,u,c,d){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(c,d),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(c,d),u.state!==o&&Y0.enqueueReplaceState(u,u.state,null)}function rs(o,u){var c=u;if("ref"in u){c={};for(var d in u)d!=="ref"&&(c[d]=u[d])}if(o=o.defaultProps){c===u&&(c=m({},c));for(var v in o)c[v]===void 0&&(c[v]=o[v])}return c}function Jy(o){uh(o)}function e_(o){console.error(o)}function t_(o){uh(o)}function Oh(o,u){try{var c=o.onUncaughtError;c(u.value,{componentStack:u.stack})}catch(d){setTimeout(function(){throw d})}}function n_(o,u,c){try{var d=o.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function W0(o,u,c){return c=Va(c),c.tag=3,c.payload={element:null},c.callback=function(){Oh(o,u)},c}function r_(o){return o=Va(o),o.tag=3,o}function i_(o,u,c,d){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var y=d.value;o.payload=function(){return v(y)},o.callback=function(){n_(u,c,d)}}var A=c.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(o.callback=function(){n_(u,c,d),typeof v!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function lI(o,u,c,d,v){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(u=c.alternate,u!==null&&cu(u,c,v,!0),c=dr.current,c!==null){switch(c.tag){case 31:case 13:return Nr===null?Hh():c.alternate===null&&kt===0&&(kt=3),c.flags&=-257,c.flags|=65536,c.lanes=v,d===yh?c.flags|=16384:(u=c.updateQueue,u===null?c.updateQueue=new Set([d]):u.add(d),Ep(o,d,v)),!1;case 22:return c.flags|=65536,d===yh?c.flags|=16384:(u=c.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=u):(c=u.retryQueue,c===null?u.retryQueue=new Set([d]):c.add(d)),Ep(o,d,v)),!1}throw Error(n(435,c.tag))}return Ep(o,d,v),Hh(),!1}if(Ye)return u=dr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=v,d!==p0&&(o=Error(n(422),{cause:d}),Kl(br(o,c)))):(d!==p0&&(u=Error(n(423),{cause:d}),Kl(br(u,c))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,d=br(d,c),v=W0(o.stateNode,d,v),S0(o,v),kt!==4&&(kt=2)),!1;var y=Error(n(520),{cause:d});if(y=br(y,c),hc===null?hc=[y]:hc.push(y),kt!==4&&(kt=2),u===null)return!0;d=br(d,c),c=u;do{switch(c.tag){case 3:return c.flags|=65536,o=v&-v,c.lanes|=o,o=W0(c.stateNode,d,o),S0(c,o),!1;case 1:if(u=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ha===null||!Ha.has(y))))return c.flags|=65536,v&=-v,c.lanes|=v,v=r_(v),i_(v,o,c,d),S0(c,v),!1}c=c.return}while(c!==null);return!1}var Q0=Error(n(461)),Zt=!1;function Rn(o,u,c,d){u.child=o===null?uy(u,null,c,d):ts(u,o.child,c,d)}function a_(o,u,c,d,v){c=c.render;var y=u.ref;if("ref"in d){var A={};for(var I in d)I!=="ref"&&(A[I]=d[I])}else A=d;return $o(u),d=O0(o,u,c,A,y,v),I=N0(),o!==null&&!Zt?(M0(o,u,v),Qi(o,u,v)):(Ye&&I&&h0(u),u.flags|=1,Rn(o,u,d,v),u.child)}function o_(o,u,c,d,v){if(o===null){var y=c.type;return typeof y=="function"&&!l0(y)&&y.defaultProps===void 0&&c.compare===null?(u.tag=15,u.type=y,s_(o,u,y,d,v)):(o=hh(c.type,null,d,u,u.mode,v),o.ref=u.ref,o.return=u,u.child=o)}if(y=o.child,!ip(o,v)){var A=y.memoizedProps;if(c=c.compare,c=c!==null?c:Gl,c(A,d)&&o.ref===u.ref)return Qi(o,u,v)}return u.flags|=1,o=Gi(y,d),o.ref=u.ref,o.return=u,u.child=o}function s_(o,u,c,d,v){if(o!==null){var y=o.memoizedProps;if(Gl(y,d)&&o.ref===u.ref)if(Zt=!1,u.pendingProps=d=y,ip(o,v))(o.flags&131072)!==0&&(Zt=!0);else return u.lanes=o.lanes,Qi(o,u,v)}return $0(o,u,c,d,v)}function u_(o,u,c,d){var v=d.children,y=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((u.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,o!==null){for(d=u.child=o.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~y}else d=0,u.child=null;return l_(o,u,y,c,d)}if((c&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&vh(u,y!==null?y.cachePool:null),y!==null?fy(u,y):C0(),hy(u);else return d=u.lanes=536870912,l_(o,u,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(vh(u,y.cachePool),fy(u,y),Fa(),u.memoizedState=null):(o!==null&&vh(u,null),C0(),Fa());return Rn(o,u,v,c),u.child}function ac(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function l_(o,u,c,d,v){var y=x0();return y=y===null?null:{parent:Qt._currentValue,pool:y},u.memoizedState={baseLanes:c,cachePool:y},o!==null&&vh(u,null),C0(),hy(u),o!==null&&cu(o,u,d,!0),u.childLanes=v,null}function Nh(o,u){return u=Ph({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function c_(o,u,c){return ts(u,o.child,null,c),o=Nh(u,u.pendingProps),o.flags|=2,pr(u),u.memoizedState=null,o}function cI(o,u,c){var d=u.pendingProps,v=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(Ye){if(d.mode==="hidden")return o=Nh(u,d),u.lanes=536870912,ac(null,o);if(R0(u),(o=It)?(o=A2(o,Or),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Oa!==null?{id:Ti,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},c=Km(o),c.return=u,u.child=c,Cn=u,It=null)):o=null,o===null)throw Ma(u);return u.lanes=536870912,null}return Nh(u,d)}var y=o.memoizedState;if(y!==null){var A=y.dehydrated;if(R0(u),v)if(u.flags&256)u.flags&=-257,u=c_(o,u,c);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(n(558));else if(Zt||cu(o,u,c,!1),v=(c&o.childLanes)!==0,Zt||v){if(d=Tt,d!==null&&(A=Il(d,c),A!==0&&A!==y.retryLane))throw y.retryLane=A,Ko(o,A),ir(d,o,A),Q0;Hh(),u=c_(o,u,c)}else o=y.treeContext,It=Mr(A.nextSibling),Cn=u,Ye=!0,Na=null,Or=!1,o!==null&&Qm(u,o),u=Nh(u,d),u.flags|=4096;return u}return o=Gi(o.child,{mode:d.mode,children:d.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Mh(o,u){var c=u.ref;if(c===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(o===null||o.ref!==c)&&(u.flags|=4194816)}}function $0(o,u,c,d,v){return $o(u),c=O0(o,u,c,d,void 0,v),d=N0(),o!==null&&!Zt?(M0(o,u,v),Qi(o,u,v)):(Ye&&d&&h0(u),u.flags|=1,Rn(o,u,c,v),u.child)}function f_(o,u,c,d,v,y){return $o(u),u.updateQueue=null,c=py(u,d,c,v),dy(o),d=N0(),o!==null&&!Zt?(M0(o,u,y),Qi(o,u,y)):(Ye&&d&&h0(u),u.flags|=1,Rn(o,u,c,y),u.child)}function h_(o,u,c,d,v){if($o(u),u.stateNode===null){var y=ou,A=c.contextType;typeof A=="object"&&A!==null&&(y=bn(A)),y=new c(d,y),u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Y0,u.stateNode=y,y._reactInternals=u,y=u.stateNode,y.props=d,y.state=u.memoizedState,y.refs={},w0(u),A=c.contextType,y.context=typeof A=="object"&&A!==null?bn(A):ou,y.state=u.memoizedState,A=c.getDerivedStateFromProps,typeof A=="function"&&(K0(u,c,A,d),y.state=u.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&Y0.enqueueReplaceState(y,y.state,null),ec(u,d,y,v),Jl(),y.state=u.memoizedState),typeof y.componentDidMount=="function"&&(u.flags|=4194308),d=!0}else if(o===null){y=u.stateNode;var I=u.memoizedProps,F=rs(c,I);y.props=F;var Q=y.context,ie=c.contextType;A=ou,typeof ie=="object"&&ie!==null&&(A=bn(ie));var se=c.getDerivedStateFromProps;ie=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=u.pendingProps!==I,ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||Q!==A)&&Zy(u,y,d,A),La=!1;var Z=u.memoizedState;y.state=Z,ec(u,d,y,v),Jl(),Q=u.memoizedState,I||Z!==Q||La?(typeof se=="function"&&(K0(u,c,se,d),Q=u.memoizedState),(F=La||$y(u,c,F,d,Z,Q,A))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(u.flags|=4194308)):(typeof y.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=d,u.memoizedState=Q),y.props=d,y.state=Q,y.context=A,d=F):(typeof y.componentDidMount=="function"&&(u.flags|=4194308),d=!1)}else{y=u.stateNode,T0(o,u),A=u.memoizedProps,ie=rs(c,A),y.props=ie,se=u.pendingProps,Z=y.context,Q=c.contextType,F=ou,typeof Q=="object"&&Q!==null&&(F=bn(Q)),I=c.getDerivedStateFromProps,(Q=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==se||Z!==F)&&Zy(u,y,d,F),La=!1,Z=u.memoizedState,y.state=Z,ec(u,d,y,v),Jl();var te=u.memoizedState;A!==se||Z!==te||La||o!==null&&o.dependencies!==null&&ph(o.dependencies)?(typeof I=="function"&&(K0(u,c,I,d),te=u.memoizedState),(ie=La||$y(u,c,ie,d,Z,te,F)||o!==null&&o.dependencies!==null&&ph(o.dependencies))?(Q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,te,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,te,F)),typeof y.componentDidUpdate=="function"&&(u.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=1024),u.memoizedProps=d,u.memoizedState=te),y.props=d,y.state=te,y.context=F,d=ie):(typeof y.componentDidUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===o.memoizedProps&&Z===o.memoizedState||(u.flags|=1024),d=!1)}return y=d,Mh(o,u),d=(u.flags&128)!==0,y||d?(y=u.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),u.flags|=1,o!==null&&d?(u.child=ts(u,o.child,null,v),u.child=ts(u,null,c,v)):Rn(o,u,c,v),u.memoizedState=y.state,o=u.child):o=Qi(o,u,v),o}function d_(o,u,c,d){return Wo(),u.flags|=256,Rn(o,u,c,d),u.child}var Z0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function J0(o){return{baseLanes:o,cachePool:ny()}}function ep(o,u,c){return o=o!==null?o.childLanes&~c:0,u&&(o|=vr),o}function p_(o,u,c){var d=u.pendingProps,v=!1,y=(u.flags&128)!==0,A;if((A=y)||(A=o!==null&&o.memoizedState===null?!1:(Ht.current&2)!==0),A&&(v=!0,u.flags&=-129),A=(u.flags&32)!==0,u.flags&=-33,o===null){if(Ye){if(v?ka(u):Fa(),(o=It)?(o=A2(o,Or),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Oa!==null?{id:Ti,overflow:Si}:null,retryLane:536870912,hydrationErrors:null},c=Km(o),c.return=u,u.child=c,Cn=u,It=null)):o=null,o===null)throw Ma(u);return Vp(o)?u.lanes=32:u.lanes=536870912,null}var I=d.children;return d=d.fallback,v?(Fa(),v=u.mode,I=Ph({mode:"hidden",children:I},v),d=Yo(d,v,c,null),I.return=u,d.return=u,I.sibling=d,u.child=I,d=u.child,d.memoizedState=J0(c),d.childLanes=ep(o,A,c),u.memoizedState=Z0,ac(null,d)):(ka(u),tp(u,I))}var F=o.memoizedState;if(F!==null&&(I=F.dehydrated,I!==null)){if(y)u.flags&256?(ka(u),u.flags&=-257,u=np(o,u,c)):u.memoizedState!==null?(Fa(),u.child=o.child,u.flags|=128,u=null):(Fa(),I=d.fallback,v=u.mode,d=Ph({mode:"visible",children:d.children},v),I=Yo(I,v,c,null),I.flags|=2,d.return=u,I.return=u,d.sibling=I,u.child=d,ts(u,o.child,null,c),d=u.child,d.memoizedState=J0(c),d.childLanes=ep(o,A,c),u.memoizedState=Z0,u=ac(null,d));else if(ka(u),Vp(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var Q=A.dgst;A=Q,d=Error(n(419)),d.stack="",d.digest=A,Kl({value:d,source:null,stack:null}),u=np(o,u,c)}else if(Zt||cu(o,u,c,!1),A=(c&o.childLanes)!==0,Zt||A){if(A=Tt,A!==null&&(d=Il(A,c),d!==0&&d!==F.retryLane))throw F.retryLane=d,Ko(o,d),ir(A,o,d),Q0;Lp(I)||Hh(),u=np(o,u,c)}else Lp(I)?(u.flags|=192,u.child=o.child,u=null):(o=F.treeContext,It=Mr(I.nextSibling),Cn=u,Ye=!0,Na=null,Or=!1,o!==null&&Qm(u,o),u=tp(u,d.children),u.flags|=4096);return u}return v?(Fa(),I=d.fallback,v=u.mode,F=o.child,Q=F.sibling,d=Gi(F,{mode:"hidden",children:d.children}),d.subtreeFlags=F.subtreeFlags&65011712,Q!==null?I=Gi(Q,I):(I=Yo(I,v,c,null),I.flags|=2),I.return=u,d.return=u,d.sibling=I,u.child=d,ac(null,d),d=u.child,I=o.child.memoizedState,I===null?I=J0(c):(v=I.cachePool,v!==null?(F=Qt._currentValue,v=v.parent!==F?{parent:F,pool:F}:v):v=ny(),I={baseLanes:I.baseLanes|c,cachePool:v}),d.memoizedState=I,d.childLanes=ep(o,A,c),u.memoizedState=Z0,ac(o.child,d)):(ka(u),c=o.child,o=c.sibling,c=Gi(c,{mode:"visible",children:d.children}),c.return=u,c.sibling=null,o!==null&&(A=u.deletions,A===null?(u.deletions=[o],u.flags|=16):A.push(o)),u.child=c,u.memoizedState=null,c)}function tp(o,u){return u=Ph({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Ph(o,u){return o=hr(22,o,null,u),o.lanes=0,o}function np(o,u,c){return ts(u,o.child,null,c),o=tp(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function g_(o,u,c){o.lanes|=u;var d=o.alternate;d!==null&&(d.lanes|=u),m0(o.return,u,c)}function rp(o,u,c,d,v,y){var A=o.memoizedState;A===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:v,treeForkCount:y}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=c,A.tailMode=v,A.treeForkCount=y)}function v_(o,u,c){var d=u.pendingProps,v=d.revealOrder,y=d.tail;d=d.children;var A=Ht.current,I=(A&2)!==0;if(I?(A=A&1|2,u.flags|=128):A&=1,ge(Ht,A),Rn(o,u,d,c),d=Ye?Xl:0,!I&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&g_(o,c,u);else if(o.tag===19)g_(o,c,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(c=u.child,v=null;c!==null;)o=c.alternate,o!==null&&Ah(o)===null&&(v=c),c=c.sibling;c=v,c===null?(v=u.child,u.child=null):(v=c.sibling,c.sibling=null),rp(u,!1,v,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=u.child,u.child=null;v!==null;){if(o=v.alternate,o!==null&&Ah(o)===null){u.child=v;break}o=v.sibling,v.sibling=c,c=v,v=o}rp(u,!0,c,null,y,d);break;case"together":rp(u,!1,null,null,void 0,d);break;default:u.memoizedState=null}return u.child}function Qi(o,u,c){if(o!==null&&(u.dependencies=o.dependencies),ja|=u.lanes,(c&u.childLanes)===0)if(o!==null){if(cu(o,u,c,!1),(c&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,c=Gi(o,o.pendingProps),u.child=c,c.return=u;o.sibling!==null;)o=o.sibling,c=c.sibling=Gi(o,o.pendingProps),c.return=u;c.sibling=null}return u.child}function ip(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&ph(o)))}function fI(o,u,c){switch(u.tag){case 3:an(u,u.stateNode.containerInfo),Pa(u,Qt,o.memoizedState.cache),Wo();break;case 27:case 5:Ro(u);break;case 4:an(u,u.stateNode.containerInfo);break;case 10:Pa(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,R0(u),null;break;case 13:var d=u.memoizedState;if(d!==null)return d.dehydrated!==null?(ka(u),u.flags|=128,null):(c&u.child.childLanes)!==0?p_(o,u,c):(ka(u),o=Qi(o,u,c),o!==null?o.sibling:null);ka(u);break;case 19:var v=(o.flags&128)!==0;if(d=(c&u.childLanes)!==0,d||(cu(o,u,c,!1),d=(c&u.childLanes)!==0),v){if(d)return v_(o,u,c);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ge(Ht,Ht.current),d)break;return null;case 22:return u.lanes=0,u_(o,u,c,u.pendingProps);case 24:Pa(u,Qt,o.memoizedState.cache)}return Qi(o,u,c)}function m_(o,u,c){if(o!==null)if(o.memoizedProps!==u.pendingProps)Zt=!0;else{if(!ip(o,c)&&(u.flags&128)===0)return Zt=!1,fI(o,u,c);Zt=(o.flags&131072)!==0}else Zt=!1,Ye&&(u.flags&1048576)!==0&&Wm(u,Xl,u.index);switch(u.lanes=0,u.tag){case 16:e:{var d=u.pendingProps;if(o=Jo(u.elementType),u.type=o,typeof o=="function")l0(o)?(d=rs(o,d),u.tag=1,u=h_(null,u,o,d,c)):(u.tag=0,u=$0(null,u,o,d,c));else{if(o!=null){var v=o.$$typeof;if(v===H){u.tag=11,u=a_(null,u,o,d,c);break e}else if(v===C){u.tag=14,u=o_(null,u,o,d,c);break e}}throw u=Pe(o)||o,Error(n(306,u,""))}}return u;case 0:return $0(o,u,u.type,u.pendingProps,c);case 1:return d=u.type,v=rs(d,u.pendingProps),h_(o,u,d,v,c);case 3:e:{if(an(u,u.stateNode.containerInfo),o===null)throw Error(n(387));d=u.pendingProps;var y=u.memoizedState;v=y.element,T0(o,u),ec(u,d,null,c);var A=u.memoizedState;if(d=A.cache,Pa(u,Qt,d),d!==y.cache&&y0(u,[Qt],c,!0),Jl(),d=A.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:A.cache},u.updateQueue.baseState=y,u.memoizedState=y,u.flags&256){u=d_(o,u,d,c);break e}else if(d!==v){v=br(Error(n(424)),u),Kl(v),u=d_(o,u,d,c);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,It=Mr(o.firstChild),Cn=u,Ye=!0,Na=null,Or=!0,c=uy(u,null,d,c),u.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Wo(),d===v){u=Qi(o,u,c);break e}Rn(o,u,d,c)}u=u.child}return u;case 26:return Mh(o,u),o===null?(c=b2(u.type,null,u.pendingProps,null))?u.memoizedState=c:Ye||(c=u.type,o=u.pendingProps,d=Qh(Be.current).createElement(c),d[Kt]=u,d[vn]=o,Dn(d,c,o),Yt(d),u.stateNode=d):u.memoizedState=b2(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Ro(u),o===null&&Ye&&(d=u.stateNode=S2(u.type,u.pendingProps,Be.current),Cn=u,Or=!0,v=It,Ka(u.type)?(Bp=v,It=Mr(d.firstChild)):It=v),Rn(o,u,u.pendingProps.children,c),Mh(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Ye&&((v=d=It)&&(d=zI(d,u.type,u.pendingProps,Or),d!==null?(u.stateNode=d,Cn=u,It=Mr(d.firstChild),Or=!1,v=!0):v=!1),v||Ma(u)),Ro(u),v=u.type,y=u.pendingProps,A=o!==null?o.memoizedProps:null,d=y.children,Np(v,y)?d=null:A!==null&&Np(v,A)&&(u.flags|=32),u.memoizedState!==null&&(v=O0(o,u,nI,null,null,c),Ec._currentValue=v),Mh(o,u),Rn(o,u,d,c),u.child;case 6:return o===null&&Ye&&((o=c=It)&&(c=jI(c,u.pendingProps,Or),c!==null?(u.stateNode=c,Cn=u,It=null,o=!0):o=!1),o||Ma(u)),null;case 13:return p_(o,u,c);case 4:return an(u,u.stateNode.containerInfo),d=u.pendingProps,o===null?u.child=ts(u,null,d,c):Rn(o,u,d,c),u.child;case 11:return a_(o,u,u.type,u.pendingProps,c);case 7:return Rn(o,u,u.pendingProps,c),u.child;case 8:return Rn(o,u,u.pendingProps.children,c),u.child;case 12:return Rn(o,u,u.pendingProps.children,c),u.child;case 10:return d=u.pendingProps,Pa(u,u.type,d.value),Rn(o,u,d.children,c),u.child;case 9:return v=u.type._context,d=u.pendingProps.children,$o(u),v=bn(v),d=d(v),u.flags|=1,Rn(o,u,d,c),u.child;case 14:return o_(o,u,u.type,u.pendingProps,c);case 15:return s_(o,u,u.type,u.pendingProps,c);case 19:return v_(o,u,c);case 31:return cI(o,u,c);case 22:return u_(o,u,c,u.pendingProps);case 24:return $o(u),d=bn(Qt),o===null?(v=x0(),v===null&&(v=Tt,y=_0(),v.pooledCache=y,y.refCount++,y!==null&&(v.pooledCacheLanes|=c),v=y),u.memoizedState={parent:d,cache:v},w0(u),Pa(u,Qt,v)):((o.lanes&c)!==0&&(T0(o,u),ec(u,null,null,c),Jl()),v=o.memoizedState,y=u.memoizedState,v.parent!==d?(v={parent:d,cache:d},u.memoizedState=v,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=v),Pa(u,Qt,d)):(d=y.cache,Pa(u,Qt,d),d!==v.cache&&y0(u,[Qt],c,!0))),Rn(o,u,u.pendingProps.children,c),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function $i(o){o.flags|=4}function ap(o,u,c,d,v){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(G_())o.flags|=8192;else throw es=yh,A0}else o.flags&=-16777217}function y_(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!M2(u))if(G_())o.flags|=8192;else throw es=yh,A0}function Lh(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?zf():536870912,o.lanes|=u,Au|=u)}function oc(o,u){if(!Ye)switch(o.tailMode){case"hidden":u=o.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o.tail=null:c.sibling=null;break;case"collapsed":c=o.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:d.sibling=null}}function Ct(o){var u=o.alternate!==null&&o.alternate.child===o.child,c=0,d=0;if(u)for(var v=o.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=d,o.childLanes=c,u}function hI(o,u,c){var d=u.pendingProps;switch(d0(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(u),null;case 1:return Ct(u),null;case 3:return c=u.stateNode,d=null,o!==null&&(d=o.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),Ki(Qt),Dt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(o===null||o.child===null)&&(lu(u)?$i(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,g0())),Ct(u),null;case 26:var v=u.type,y=u.memoizedState;return o===null?($i(u),y!==null?(Ct(u),y_(u,y)):(Ct(u),ap(u,v,null,d,c))):y?y!==o.memoizedState?($i(u),Ct(u),y_(u,y)):(Ct(u),u.flags&=-16777217):(o=o.memoizedProps,o!==d&&$i(u),Ct(u),ap(u,v,o,d,c)),null;case 27:if(zs(u),c=Be.current,v=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==d&&$i(u);else{if(!d){if(u.stateNode===null)throw Error(n(166));return Ct(u),null}o=ve.current,lu(u)?$m(u):(o=S2(v,d,c),u.stateNode=o,$i(u))}return Ct(u),null;case 5:if(zs(u),v=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==d&&$i(u);else{if(!d){if(u.stateNode===null)throw Error(n(166));return Ct(u),null}if(y=ve.current,lu(u))$m(u);else{var A=Qh(Be.current);switch(y){case 1:y=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:y=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":y=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":y=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":y=A.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?A.createElement(v,{is:d.is}):A.createElement(v)}}y[Kt]=u,y[vn]=d;e:for(A=u.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===u)break e;for(;A.sibling===null;){if(A.return===null||A.return===u)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}u.stateNode=y;e:switch(Dn(y,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&$i(u)}}return Ct(u),ap(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,c),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==d&&$i(u);else{if(typeof d!="string"&&u.stateNode===null)throw Error(n(166));if(o=Be.current,lu(u)){if(o=u.stateNode,c=u.memoizedProps,d=null,v=Cn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}o[Kt]=u,o=!!(o.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||p2(o.nodeValue,c)),o||Ma(u,!0)}else o=Qh(o).createTextNode(d),o[Kt]=u,u.stateNode=o}return Ct(u),null;case 31:if(c=u.memoizedState,o===null||o.memoizedState!==null){if(d=lu(u),c!==null){if(o===null){if(!d)throw Error(n(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Kt]=u}else Wo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ct(u),o=!1}else c=g0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=c),o=!0;if(!o)return u.flags&256?(pr(u),u):(pr(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Ct(u),null;case 13:if(d=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=lu(u),d!==null&&d.dehydrated!==null){if(o===null){if(!v)throw Error(n(318));if(v=u.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Kt]=u}else Wo(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ct(u),v=!1}else v=g0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return u.flags&256?(pr(u),u):(pr(u),null)}return pr(u),(u.flags&128)!==0?(u.lanes=c,u):(c=d!==null,o=o!==null&&o.memoizedState!==null,c&&(d=u.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==v&&(d.flags|=2048)),c!==o&&c&&(u.child.flags|=8192),Lh(u,u.updateQueue),Ct(u),null);case 4:return Dt(),o===null&&Cp(u.stateNode.containerInfo),Ct(u),null;case 10:return Ki(u.type),Ct(u),null;case 19:if(ue(Ht),d=u.memoizedState,d===null)return Ct(u),null;if(v=(u.flags&128)!==0,y=d.rendering,y===null)if(v)oc(d,!1);else{if(kt!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(y=Ah(o),y!==null){for(u.flags|=128,oc(d,!1),o=y.updateQueue,u.updateQueue=o,Lh(u,o),u.subtreeFlags=0,o=c,c=u.child;c!==null;)Xm(c,o),c=c.sibling;return ge(Ht,Ht.current&1|2),Ye&&qi(u,d.treeForkCount),u.child}o=o.sibling}d.tail!==null&&Hn()>Uh&&(u.flags|=128,v=!0,oc(d,!1),u.lanes=4194304)}else{if(!v)if(o=Ah(y),o!==null){if(u.flags|=128,v=!0,o=o.updateQueue,u.updateQueue=o,Lh(u,o),oc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ye)return Ct(u),null}else 2*Hn()-d.renderingStartTime>Uh&&c!==536870912&&(u.flags|=128,v=!0,oc(d,!1),u.lanes=4194304);d.isBackwards?(y.sibling=u.child,u.child=y):(o=d.last,o!==null?o.sibling=y:u.child=y,d.last=y)}return d.tail!==null?(o=d.tail,d.rendering=o,d.tail=o.sibling,d.renderingStartTime=Hn(),o.sibling=null,c=Ht.current,ge(Ht,v?c&1|2:c&1),Ye&&qi(u,d.treeForkCount),o):(Ct(u),null);case 22:case 23:return pr(u),b0(),d=u.memoizedState!==null,o!==null?o.memoizedState!==null!==d&&(u.flags|=8192):d&&(u.flags|=8192),d?(c&536870912)!==0&&(u.flags&128)===0&&(Ct(u),u.subtreeFlags&6&&(u.flags|=8192)):Ct(u),c=u.updateQueue,c!==null&&Lh(u,c.retryQueue),c=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==c&&(u.flags|=2048),o!==null&&ue(Zo),null;case 24:return c=null,o!==null&&(c=o.memoizedState.cache),u.memoizedState.cache!==c&&(u.flags|=2048),Ki(Qt),Ct(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function dI(o,u){switch(d0(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ki(Qt),Dt(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return zs(u),null;case 31:if(u.memoizedState!==null){if(pr(u),u.alternate===null)throw Error(n(340));Wo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(pr(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Wo()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return ue(Ht),null;case 4:return Dt(),null;case 10:return Ki(u.type),null;case 22:case 23:return pr(u),b0(),o!==null&&ue(Zo),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ki(Qt),null;case 25:return null;default:return null}}function __(o,u){switch(d0(u),u.tag){case 3:Ki(Qt),Dt();break;case 26:case 27:case 5:zs(u);break;case 4:Dt();break;case 31:u.memoizedState!==null&&pr(u);break;case 13:pr(u);break;case 19:ue(Ht);break;case 10:Ki(u.type);break;case 22:case 23:pr(u),b0(),o!==null&&ue(Zo);break;case 24:Ki(Qt)}}function sc(o,u){try{var c=u.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var v=d.next;c=v;do{if((c.tag&o)===o){d=void 0;var y=c.create,A=c.inst;d=y(),A.destroy=d}c=c.next}while(c!==v)}}catch(I){ht(u,u.return,I)}}function Ua(o,u,c){try{var d=u.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var y=v.next;d=y;do{if((d.tag&o)===o){var A=d.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,v=u;var F=c,Q=I;try{Q()}catch(ie){ht(v,F,ie)}}}d=d.next}while(d!==y)}}catch(ie){ht(u,u.return,ie)}}function E_(o){var u=o.updateQueue;if(u!==null){var c=o.stateNode;try{cy(u,c)}catch(d){ht(o,o.return,d)}}}function x_(o,u,c){c.props=rs(o.type,o.memoizedProps),c.state=o.memoizedState;try{c.componentWillUnmount()}catch(d){ht(o,u,d)}}function uc(o,u){try{var c=o.ref;if(c!==null){switch(o.tag){case 26:case 27:case 5:var d=o.stateNode;break;case 30:d=o.stateNode;break;default:d=o.stateNode}typeof c=="function"?o.refCleanup=c(d):c.current=d}}catch(v){ht(o,u,v)}}function Ii(o,u){var c=o.ref,d=o.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(v){ht(o,u,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){ht(o,u,v)}else c.current=null}function A_(o){var u=o.type,c=o.memoizedProps,d=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(v){ht(o,o.return,v)}}function op(o,u,c){try{var d=o.stateNode;LI(d,o.type,c,u),d[vn]=u}catch(v){ht(o,o.return,v)}}function w_(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ka(o.type)||o.tag===4}function sp(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||w_(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ka(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function up(o,u,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,u?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(o,u):(u=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,u.appendChild(o),c=c._reactRootContainer,c!=null||u.onclick!==null||(u.onclick=qr));else if(d!==4&&(d===27&&Ka(o.type)&&(c=o.stateNode,u=null),o=o.child,o!==null))for(up(o,u,c),o=o.sibling;o!==null;)up(o,u,c),o=o.sibling}function Vh(o,u,c){var d=o.tag;if(d===5||d===6)o=o.stateNode,u?c.insertBefore(o,u):c.appendChild(o);else if(d!==4&&(d===27&&Ka(o.type)&&(c=o.stateNode),o=o.child,o!==null))for(Vh(o,u,c),o=o.sibling;o!==null;)Vh(o,u,c),o=o.sibling}function T_(o){var u=o.stateNode,c=o.memoizedProps;try{for(var d=o.type,v=u.attributes;v.length;)u.removeAttributeNode(v[0]);Dn(u,d,c),u[Kt]=o,u[vn]=c}catch(y){ht(o,o.return,y)}}var Zi=!1,Jt=!1,lp=!1,S_=typeof WeakSet=="function"?WeakSet:Set,yn=null;function pI(o,u){if(o=o.containerInfo,Dp=rd,o=Bm(o),n0(o)){if("selectionStart"in o)var c={start:o.selectionStart,end:o.selectionEnd};else e:{c=(c=o.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var v=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var A=0,I=-1,F=-1,Q=0,ie=0,se=o,Z=null;t:for(;;){for(var te;se!==c||v!==0&&se.nodeType!==3||(I=A+v),se!==y||d!==0&&se.nodeType!==3||(F=A+d),se.nodeType===3&&(A+=se.nodeValue.length),(te=se.firstChild)!==null;)Z=se,se=te;for(;;){if(se===o)break t;if(Z===c&&++Q===v&&(I=A),Z===y&&++ie===d&&(F=A),(te=se.nextSibling)!==null)break;se=Z,Z=se.parentNode}se=te}c=I===-1||F===-1?null:{start:I,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Op={focusedElem:o,selectionRange:c},rd=!1,yn=u;yn!==null;)if(u=yn,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,yn=o;else for(;yn!==null;){switch(u=yn,y=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(c=0;c<o.length;c++)v=o[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&y!==null){o=void 0,c=u,v=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var me=rs(c.type,v);o=d.getSnapshotBeforeUpdate(me,y),d.__reactInternalSnapshotBeforeUpdate=o}catch(be){ht(c,c.return,be)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,c=o.nodeType,c===9)Pp(o);else if(c===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Pp(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,yn=o;break}yn=u.return}}function I_(o,u,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ea(o,c),d&4&&sc(5,c);break;case 1:if(ea(o,c),d&4)if(o=c.stateNode,u===null)try{o.componentDidMount()}catch(A){ht(c,c.return,A)}else{var v=rs(c.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(v,u,o.__reactInternalSnapshotBeforeUpdate)}catch(A){ht(c,c.return,A)}}d&64&&E_(c),d&512&&uc(c,c.return);break;case 3:if(ea(o,c),d&64&&(o=c.updateQueue,o!==null)){if(u=null,c.child!==null)switch(c.child.tag){case 27:case 5:u=c.child.stateNode;break;case 1:u=c.child.stateNode}try{cy(o,u)}catch(A){ht(c,c.return,A)}}break;case 27:u===null&&d&4&&T_(c);case 26:case 5:ea(o,c),u===null&&d&4&&A_(c),d&512&&uc(c,c.return);break;case 12:ea(o,c);break;case 31:ea(o,c),d&4&&R_(o,c);break;case 13:ea(o,c),d&4&&D_(o,c),d&64&&(o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(c=wI.bind(null,c),HI(o,c))));break;case 22:if(d=c.memoizedState!==null||Zi,!d){u=u!==null&&u.memoizedState!==null||Jt,v=Zi;var y=Jt;Zi=d,(Jt=u)&&!y?ta(o,c,(c.subtreeFlags&8772)!==0):ea(o,c),Zi=v,Jt=y}break;case 30:break;default:ea(o,c)}}function C_(o){var u=o.alternate;u!==null&&(o.alternate=null,C_(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Xs(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Nt=null,er=!1;function Ji(o,u,c){for(c=c.child;c!==null;)b_(o,u,c),c=c.sibling}function b_(o,u,c){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(zr,c)}catch{}switch(c.tag){case 26:Jt||Ii(c,u),Ji(o,u,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Jt||Ii(c,u);var d=Nt,v=er;Ka(c.type)&&(Nt=c.stateNode,er=!1),Ji(o,u,c),mc(c.stateNode),Nt=d,er=v;break;case 5:Jt||Ii(c,u);case 6:if(d=Nt,v=er,Nt=null,Ji(o,u,c),Nt=d,er=v,Nt!==null)if(er)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(c.stateNode)}catch(y){ht(c,u,y)}else try{Nt.removeChild(c.stateNode)}catch(y){ht(c,u,y)}break;case 18:Nt!==null&&(er?(o=Nt,E2(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,c.stateNode),Du(o)):E2(Nt,c.stateNode));break;case 4:d=Nt,v=er,Nt=c.stateNode.containerInfo,er=!0,Ji(o,u,c),Nt=d,er=v;break;case 0:case 11:case 14:case 15:Ua(2,c,u),Jt||Ua(4,c,u),Ji(o,u,c);break;case 1:Jt||(Ii(c,u),d=c.stateNode,typeof d.componentWillUnmount=="function"&&x_(c,u,d)),Ji(o,u,c);break;case 21:Ji(o,u,c);break;case 22:Jt=(d=Jt)||c.memoizedState!==null,Ji(o,u,c),Jt=d;break;default:Ji(o,u,c)}}function R_(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Du(o)}catch(c){ht(u,u.return,c)}}}function D_(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Du(o)}catch(c){ht(u,u.return,c)}}function gI(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new S_),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new S_),u;default:throw Error(n(435,o.tag))}}function Bh(o,u){var c=gI(o);u.forEach(function(d){if(!c.has(d)){c.add(d);var v=TI.bind(null,o,d);d.then(v,v)}})}function tr(o,u){var c=u.deletions;if(c!==null)for(var d=0;d<c.length;d++){var v=c[d],y=o,A=u,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Ka(I.type)){Nt=I.stateNode,er=!1;break e}break;case 5:Nt=I.stateNode,er=!1;break e;case 3:case 4:Nt=I.stateNode.containerInfo,er=!0;break e}I=I.return}if(Nt===null)throw Error(n(160));b_(y,A,v),Nt=null,er=!1,y=v.alternate,y!==null&&(y.return=null),v.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)O_(u,o),u=u.sibling}var $r=null;function O_(o,u){var c=o.alternate,d=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:tr(u,o),nr(o),d&4&&(Ua(3,o,o.return),sc(3,o),Ua(5,o,o.return));break;case 1:tr(u,o),nr(o),d&512&&(Jt||c===null||Ii(c,c.return)),d&64&&Zi&&(o=o.updateQueue,o!==null&&(d=o.callbacks,d!==null&&(c=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var v=$r;if(tr(u,o),nr(o),d&512&&(Jt||c===null||Ii(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=o.memoizedState,c===null)if(d===null)if(o.stateNode===null){e:{d=o.type,c=o.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":y=v.getElementsByTagName("title")[0],(!y||y[hi]||y[Kt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=v.createElement(d),v.head.insertBefore(y,v.querySelector("head > title"))),Dn(y,d,c),y[Kt]=o,Yt(y),d=y;break e;case"link":var A=O2("link","href",v).get(d+(c.href||""));if(A){for(var I=0;I<A.length;I++)if(y=A[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){A.splice(I,1);break t}}y=v.createElement(d),Dn(y,d,c),v.head.appendChild(y);break;case"meta":if(A=O2("meta","content",v).get(d+(c.content||""))){for(I=0;I<A.length;I++)if(y=A[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){A.splice(I,1);break t}}y=v.createElement(d),Dn(y,d,c),v.head.appendChild(y);break;default:throw Error(n(468,d))}y[Kt]=o,Yt(y),d=y}o.stateNode=d}else N2(v,o.type,o.stateNode);else o.stateNode=D2(v,d,o.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?N2(v,o.type,o.stateNode):D2(v,d,o.memoizedProps)):d===null&&o.stateNode!==null&&op(o,o.memoizedProps,c.memoizedProps)}break;case 27:tr(u,o),nr(o),d&512&&(Jt||c===null||Ii(c,c.return)),c!==null&&d&4&&op(o,o.memoizedProps,c.memoizedProps);break;case 5:if(tr(u,o),nr(o),d&512&&(Jt||c===null||Ii(c,c.return)),o.flags&32){v=o.stateNode;try{Jn(v,"")}catch(me){ht(o,o.return,me)}}d&4&&o.stateNode!=null&&(v=o.memoizedProps,op(o,v,c!==null?c.memoizedProps:v)),d&1024&&(lp=!0);break;case 6:if(tr(u,o),nr(o),d&4){if(o.stateNode===null)throw Error(n(162));d=o.memoizedProps,c=o.stateNode;try{c.nodeValue=d}catch(me){ht(o,o.return,me)}}break;case 3:if(Jh=null,v=$r,$r=$h(u.containerInfo),tr(u,o),$r=v,nr(o),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Du(u.containerInfo)}catch(me){ht(o,o.return,me)}lp&&(lp=!1,N_(o));break;case 4:d=$r,$r=$h(o.stateNode.containerInfo),tr(u,o),nr(o),$r=d;break;case 12:tr(u,o),nr(o);break;case 31:tr(u,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Bh(o,d)));break;case 13:tr(u,o),nr(o),o.child.flags&8192&&o.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Fh=Hn()),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Bh(o,d)));break;case 22:v=o.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,Q=Zi,ie=Jt;if(Zi=Q||v,Jt=ie||F,tr(u,o),Jt=ie,Zi=Q,nr(o),d&8192)e:for(u=o.stateNode,u._visibility=v?u._visibility&-2:u._visibility|1,v&&(c===null||F||Zi||Jt||is(o)),c=null,u=o;;){if(u.tag===5||u.tag===26){if(c===null){F=c=u;try{if(y=F.stateNode,v)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=F.stateNode;var se=F.memoizedProps.style,Z=se!=null&&se.hasOwnProperty("display")?se.display:null;I.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(me){ht(F,F.return,me)}}}else if(u.tag===6){if(c===null){F=u;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(me){ht(F,F.return,me)}}}else if(u.tag===18){if(c===null){F=u;try{var te=F.stateNode;v?x2(te,!0):x2(F.stateNode,!1)}catch(me){ht(F,F.return,me)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}d&4&&(d=o.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Bh(o,c))));break;case 19:tr(u,o),nr(o),d&4&&(d=o.updateQueue,d!==null&&(o.updateQueue=null,Bh(o,d)));break;case 30:break;case 21:break;default:tr(u,o),nr(o)}}function nr(o){var u=o.flags;if(u&2){try{for(var c,d=o.return;d!==null;){if(w_(d)){c=d;break}d=d.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var v=c.stateNode,y=sp(o);Vh(o,y,v);break;case 5:var A=c.stateNode;c.flags&32&&(Jn(A,""),c.flags&=-33);var I=sp(o);Vh(o,I,A);break;case 3:case 4:var F=c.stateNode.containerInfo,Q=sp(o);up(o,Q,F);break;default:throw Error(n(161))}}catch(ie){ht(o,o.return,ie)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function N_(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;N_(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ea(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)I_(o,u.alternate,u),u=u.sibling}function is(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ua(4,u,u.return),is(u);break;case 1:Ii(u,u.return);var c=u.stateNode;typeof c.componentWillUnmount=="function"&&x_(u,u.return,c),is(u);break;case 27:mc(u.stateNode);case 26:case 5:Ii(u,u.return),is(u);break;case 22:u.memoizedState===null&&is(u);break;case 30:is(u);break;default:is(u)}o=o.sibling}}function ta(o,u,c){for(c=c&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var d=u.alternate,v=o,y=u,A=y.flags;switch(y.tag){case 0:case 11:case 15:ta(v,y,c),sc(4,y);break;case 1:if(ta(v,y,c),d=y,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){ht(d,d.return,Q)}if(d=y,v=d.updateQueue,v!==null){var I=d.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)ly(F[v],I)}catch(Q){ht(d,d.return,Q)}}c&&A&64&&E_(y),uc(y,y.return);break;case 27:T_(y);case 26:case 5:ta(v,y,c),c&&d===null&&A&4&&A_(y),uc(y,y.return);break;case 12:ta(v,y,c);break;case 31:ta(v,y,c),c&&A&4&&R_(v,y);break;case 13:ta(v,y,c),c&&A&4&&D_(v,y);break;case 22:y.memoizedState===null&&ta(v,y,c),uc(y,y.return);break;case 30:break;default:ta(v,y,c)}u=u.sibling}}function cp(o,u){var c=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==c&&(o!=null&&o.refCount++,c!=null&&Yl(c))}function fp(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Yl(o))}function Zr(o,u,c,d){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)M_(o,u,c,d),u=u.sibling}function M_(o,u,c,d){var v=u.flags;switch(u.tag){case 0:case 11:case 15:Zr(o,u,c,d),v&2048&&sc(9,u);break;case 1:Zr(o,u,c,d);break;case 3:Zr(o,u,c,d),v&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Yl(o)));break;case 12:if(v&2048){Zr(o,u,c,d),o=u.stateNode;try{var y=u.memoizedProps,A=y.id,I=y.onPostCommit;typeof I=="function"&&I(A,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){ht(u,u.return,F)}}else Zr(o,u,c,d);break;case 31:Zr(o,u,c,d);break;case 13:Zr(o,u,c,d);break;case 23:break;case 22:y=u.stateNode,A=u.alternate,u.memoizedState!==null?y._visibility&2?Zr(o,u,c,d):lc(o,u):y._visibility&2?Zr(o,u,c,d):(y._visibility|=2,_u(o,u,c,d,(u.subtreeFlags&10256)!==0||!1)),v&2048&&cp(A,u);break;case 24:Zr(o,u,c,d),v&2048&&fp(u.alternate,u);break;default:Zr(o,u,c,d)}}function _u(o,u,c,d,v){for(v=v&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var y=o,A=u,I=c,F=d,Q=A.flags;switch(A.tag){case 0:case 11:case 15:_u(y,A,I,F,v),sc(8,A);break;case 23:break;case 22:var ie=A.stateNode;A.memoizedState!==null?ie._visibility&2?_u(y,A,I,F,v):lc(y,A):(ie._visibility|=2,_u(y,A,I,F,v)),v&&Q&2048&&cp(A.alternate,A);break;case 24:_u(y,A,I,F,v),v&&Q&2048&&fp(A.alternate,A);break;default:_u(y,A,I,F,v)}u=u.sibling}}function lc(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var c=o,d=u,v=d.flags;switch(d.tag){case 22:lc(c,d),v&2048&&cp(d.alternate,d);break;case 24:lc(c,d),v&2048&&fp(d.alternate,d);break;default:lc(c,d)}u=u.sibling}}var cc=8192;function Eu(o,u,c){if(o.subtreeFlags&cc)for(o=o.child;o!==null;)P_(o,u,c),o=o.sibling}function P_(o,u,c){switch(o.tag){case 26:Eu(o,u,c),o.flags&cc&&o.memoizedState!==null&&tC(c,$r,o.memoizedState,o.memoizedProps);break;case 5:Eu(o,u,c);break;case 3:case 4:var d=$r;$r=$h(o.stateNode.containerInfo),Eu(o,u,c),$r=d;break;case 22:o.memoizedState===null&&(d=o.alternate,d!==null&&d.memoizedState!==null?(d=cc,cc=16777216,Eu(o,u,c),cc=d):Eu(o,u,c));break;default:Eu(o,u,c)}}function L_(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function fc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];yn=d,B_(d,o)}L_(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)V_(o),o=o.sibling}function V_(o){switch(o.tag){case 0:case 11:case 15:fc(o),o.flags&2048&&Ua(9,o,o.return);break;case 3:fc(o);break;case 12:fc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,kh(o)):fc(o);break;default:fc(o)}}function kh(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var c=0;c<u.length;c++){var d=u[c];yn=d,B_(d,o)}L_(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ua(8,u,u.return),kh(u);break;case 22:c=u.stateNode,c._visibility&2&&(c._visibility&=-3,kh(u));break;default:kh(u)}o=o.sibling}}function B_(o,u){for(;yn!==null;){var c=yn;switch(c.tag){case 0:case 11:case 15:Ua(8,c,u);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Yl(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,yn=d;else e:for(c=o;yn!==null;){d=yn;var v=d.sibling,y=d.return;if(C_(d),d===c){yn=null;break e}if(v!==null){v.return=y,yn=v;break e}yn=y}}}var vI={getCacheForType:function(o){var u=bn(Qt),c=u.data.get(o);return c===void 0&&(c=o(),u.data.set(o,c)),c},cacheSignal:function(){return bn(Qt).controller.signal}},mI=typeof WeakMap=="function"?WeakMap:Map,it=0,Tt=null,je=null,Ge=0,ft=0,gr=null,za=!1,xu=!1,hp=!1,na=0,kt=0,ja=0,as=0,dp=0,vr=0,Au=0,hc=null,rr=null,pp=!1,Fh=0,k_=0,Uh=1/0,zh=null,Ha=null,sn=0,Ga=null,wu=null,ra=0,gp=0,vp=null,F_=null,dc=0,mp=null;function mr(){return(it&2)!==0&&Ge!==0?Ge&-Ge:ne.T!==null?wp():jf()}function U_(){if(vr===0)if((Ge&536870912)===0||Ye){var o=No;No<<=1,(No&3932160)===0&&(No=262144),vr=o}else vr=536870912;return o=dr.current,o!==null&&(o.flags|=32),vr}function ir(o,u,c){(o===Tt&&(ft===2||ft===9)||o.cancelPendingCommit!==null)&&(Tu(o,0),qa(o,Ge,vr,!1)),Mo(o,c),((it&2)===0||o!==Tt)&&(o===Tt&&((it&2)===0&&(as|=c),kt===4&&qa(o,Ge,vr,!1)),Ci(o))}function z_(o,u,c){if((it&6)!==0)throw Error(n(327));var d=!c&&(u&127)===0&&(u&o.expiredLanes)===0||jr(o,u),v=d?EI(o,u):_p(o,u,!0),y=d;do{if(v===0){xu&&!d&&qa(o,u,0,!1);break}else{if(c=o.current.alternate,y&&!yI(c)){v=_p(o,u,!1),y=!1;continue}if(v===2){if(y=u,o.errorRecoveryDisabledLanes&y)var A=0;else A=o.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){u=A;e:{var I=o;v=hc;var F=I.current.memoizedState.isDehydrated;if(F&&(Tu(I,A).flags|=256),A=_p(I,A,!1),A!==2){if(hp&&!F){I.errorRecoveryDisabledLanes|=y,as|=y,v=4;break e}y=rr,rr=v,y!==null&&(rr===null?rr=y:rr.push.apply(rr,y))}v=A}if(y=!1,v!==2)continue}}if(v===1){Tu(o,0),qa(o,u,0,!0);break}e:{switch(d=o,y=v,y){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:qa(d,u,vr,!za);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(v=Fh+300-Hn(),10<v)){if(qa(d,u,vr,!za),li(d,0,!0)!==0)break e;ra=u,d.timeoutHandle=y2(j_.bind(null,d,c,rr,zh,pp,u,vr,as,Au,za,y,"Throttled",-0,0),v);break e}j_(d,c,rr,zh,pp,u,vr,as,Au,za,y,null,-0,0)}}break}while(!0);Ci(o)}function j_(o,u,c,d,v,y,A,I,F,Q,ie,se,Z,te){if(o.timeoutHandle=-1,se=u.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qr},P_(u,y,se);var me=(y&62914560)===y?Fh-Hn():(y&4194048)===y?k_-Hn():0;if(me=nC(se,me),me!==null){ra=y,o.cancelPendingCommit=me(Q_.bind(null,o,u,y,c,d,v,A,I,F,ie,se,null,Z,te)),qa(o,y,A,!Q);return}}Q_(o,u,y,c,d,v,A,I,F)}function yI(o){for(var u=o;;){var c=u.tag;if((c===0||c===11||c===15)&&u.flags&16384&&(c=u.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var v=c[d],y=v.getSnapshot;v=v.value;try{if(!fr(y(),v))return!1}catch{return!1}}if(c=u.child,u.subtreeFlags&16384&&c!==null)c.return=u,u=c;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function qa(o,u,c,d){u&=~dp,u&=~as,o.suspendedLanes|=u,o.pingedLanes&=~u,d&&(o.warmLanes|=u),d=o.expirationTimes;for(var v=u;0<v;){var y=31-zt(v),A=1<<y;d[y]=-1,v&=~A}c!==0&&Po(o,c,u)}function jh(){return(it&6)===0?(pc(0),!1):!0}function yp(){if(je!==null){if(ft===0)var o=je.return;else o=je,Xi=Qo=null,P0(o),pu=null,Ql=0,o=je;for(;o!==null;)__(o.alternate,o),o=o.return;je=null}}function Tu(o,u){var c=o.timeoutHandle;c!==-1&&(o.timeoutHandle=-1,kI(c)),c=o.cancelPendingCommit,c!==null&&(o.cancelPendingCommit=null,c()),ra=0,yp(),Tt=o,je=c=Gi(o.current,null),Ge=u,ft=0,gr=null,za=!1,xu=jr(o,u),hp=!1,Au=vr=dp=as=ja=kt=0,rr=hc=null,pp=!1,(u&8)!==0&&(u|=u&32);var d=o.entangledLanes;if(d!==0)for(o=o.entanglements,d&=u;0<d;){var v=31-zt(d),y=1<<v;u|=o[v],d&=~y}return na=u,lh(),c}function H_(o,u){Ve=null,ne.H=ic,u===du||u===mh?(u=ay(),ft=3):u===A0?(u=ay(),ft=4):ft=u===Q0?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,gr=u,je===null&&(kt=1,Oh(o,br(u,o.current)))}function G_(){var o=dr.current;return o===null?!0:(Ge&4194048)===Ge?Nr===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?o===Nr:!1}function q_(){var o=ne.H;return ne.H=ic,o===null?ic:o}function X_(){var o=ne.A;return ne.A=vI,o}function Hh(){kt=4,za||(Ge&4194048)!==Ge&&dr.current!==null||(xu=!0),(ja&134217727)===0&&(as&134217727)===0||Tt===null||qa(Tt,Ge,vr,!1)}function _p(o,u,c){var d=it;it|=2;var v=q_(),y=X_();(Tt!==o||Ge!==u)&&(zh=null,Tu(o,u)),u=!1;var A=kt;e:do try{if(ft!==0&&je!==null){var I=je,F=gr;switch(ft){case 8:yp(),A=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(u=!0);var Q=ft;if(ft=0,gr=null,Su(o,I,F,Q),c&&xu){A=0;break e}break;default:Q=ft,ft=0,gr=null,Su(o,I,F,Q)}}_I(),A=kt;break}catch(ie){H_(o,ie)}while(!0);return u&&o.shellSuspendCounter++,Xi=Qo=null,it=d,ne.H=v,ne.A=y,je===null&&(Tt=null,Ge=0,lh()),A}function _I(){for(;je!==null;)K_(je)}function EI(o,u){var c=it;it|=2;var d=q_(),v=X_();Tt!==o||Ge!==u?(zh=null,Uh=Hn()+500,Tu(o,u)):xu=jr(o,u);e:do try{if(ft!==0&&je!==null){u=je;var y=gr;t:switch(ft){case 1:ft=0,gr=null,Su(o,u,y,1);break;case 2:case 9:if(ry(y)){ft=0,gr=null,Y_(u);break}u=function(){ft!==2&&ft!==9||Tt!==o||(ft=7),Ci(o)},y.then(u,u);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:ry(y)?(ft=0,gr=null,Y_(u)):(ft=0,gr=null,Su(o,u,y,7));break;case 5:var A=null;switch(je.tag){case 26:A=je.memoizedState;case 5:case 27:var I=je;if(A?M2(A):I.stateNode.complete){ft=0,gr=null;var F=I.sibling;if(F!==null)je=F;else{var Q=I.return;Q!==null?(je=Q,Gh(Q)):je=null}break t}}ft=0,gr=null,Su(o,u,y,5);break;case 6:ft=0,gr=null,Su(o,u,y,6);break;case 8:yp(),kt=6;break e;default:throw Error(n(462))}}xI();break}catch(ie){H_(o,ie)}while(!0);return Xi=Qo=null,ne.H=d,ne.A=v,it=c,je!==null?0:(Tt=null,Ge=0,lh(),kt)}function xI(){for(;je!==null&&!W1();)K_(je)}function K_(o){var u=m_(o.alternate,o,na);o.memoizedProps=o.pendingProps,u===null?Gh(o):je=u}function Y_(o){var u=o,c=u.alternate;switch(u.tag){case 15:case 0:u=f_(c,u,u.pendingProps,u.type,void 0,Ge);break;case 11:u=f_(c,u,u.pendingProps,u.type.render,u.ref,Ge);break;case 5:P0(u);default:__(c,u),u=je=Xm(u,na),u=m_(c,u,na)}o.memoizedProps=o.pendingProps,u===null?Gh(o):je=u}function Su(o,u,c,d){Xi=Qo=null,P0(u),pu=null,Ql=0;var v=u.return;try{if(lI(o,v,u,c,Ge)){kt=1,Oh(o,br(c,o.current)),je=null;return}}catch(y){if(v!==null)throw je=v,y;kt=1,Oh(o,br(c,o.current)),je=null;return}u.flags&32768?(Ye||d===1?o=!0:xu||(Ge&536870912)!==0?o=!1:(za=o=!0,(d===2||d===9||d===3||d===6)&&(d=dr.current,d!==null&&d.tag===13&&(d.flags|=16384))),W_(u,o)):Gh(u)}function Gh(o){var u=o;do{if((u.flags&32768)!==0){W_(u,za);return}o=u.return;var c=hI(u.alternate,u,na);if(c!==null){je=c;return}if(u=u.sibling,u!==null){je=u;return}je=u=o}while(u!==null);kt===0&&(kt=5)}function W_(o,u){do{var c=dI(o.alternate,o);if(c!==null){c.flags&=32767,je=c;return}if(c=o.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!u&&(o=o.sibling,o!==null)){je=o;return}je=o=c}while(o!==null);kt=6,je=null}function Q_(o,u,c,d,v,y,A,I,F){o.cancelPendingCommit=null;do qh();while(sn!==0);if((it&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(y=u.lanes|u.childLanes,y|=s0,Z1(o,c,y,A,I,F),o===Tt&&(je=Tt=null,Ge=0),wu=u,Ga=o,ra=c,gp=y,vp=v,F_=d,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,SI(xa,function(){return t2(),null})):(o.callbackNode=null,o.callbackPriority=0),d=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||d){d=ne.T,ne.T=null,v=de.p,de.p=2,A=it,it|=4;try{pI(o,u,c)}finally{it=A,de.p=v,ne.T=d}}sn=1,$_(),Z_(),J_()}}function $_(){if(sn===1){sn=0;var o=Ga,u=wu,c=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null;var d=de.p;de.p=2;var v=it;it|=4;try{O_(u,o);var y=Op,A=Bm(o.containerInfo),I=y.focusedElem,F=y.selectionRange;if(A!==I&&I&&I.ownerDocument&&Vm(I.ownerDocument.documentElement,I)){if(F!==null&&n0(I)){var Q=F.start,ie=F.end;if(ie===void 0&&(ie=Q),"selectionStart"in I)I.selectionStart=Q,I.selectionEnd=Math.min(ie,I.value.length);else{var se=I.ownerDocument||document,Z=se&&se.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),me=I.textContent.length,be=Math.min(F.start,me),At=F.end===void 0?be:Math.min(F.end,me);!te.extend&&be>At&&(A=At,At=be,be=A);var q=Lm(I,be),z=Lm(I,At);if(q&&z&&(te.rangeCount!==1||te.anchorNode!==q.node||te.anchorOffset!==q.offset||te.focusNode!==z.node||te.focusOffset!==z.offset)){var W=se.createRange();W.setStart(q.node,q.offset),te.removeAllRanges(),be>At?(te.addRange(W),te.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),te.addRange(W))}}}}for(se=[],te=I;te=te.parentNode;)te.nodeType===1&&se.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<se.length;I++){var oe=se[I];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}rd=!!Dp,Op=Dp=null}finally{it=v,de.p=d,ne.T=c}}o.current=u,sn=2}}function Z_(){if(sn===2){sn=0;var o=Ga,u=wu,c=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||c){c=ne.T,ne.T=null;var d=de.p;de.p=2;var v=it;it|=4;try{I_(o,u.alternate,u)}finally{it=v,de.p=d,ne.T=c}}sn=3}}function J_(){if(sn===4||sn===3){sn=0,Lf();var o=Ga,u=wu,c=ra,d=F_;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?sn=5:(sn=0,wu=Ga=null,e2(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Ha=null),Ui(c),u=u.stateNode,Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(zr,u,void 0,(u.current.flags&128)===128)}catch{}if(d!==null){u=ne.T,v=de.p,de.p=2,ne.T=null;try{for(var y=o.onRecoverableError,A=0;A<d.length;A++){var I=d[A];y(I.value,{componentStack:I.stack})}}finally{ne.T=u,de.p=v}}(ra&3)!==0&&qh(),Ci(o),v=o.pendingLanes,(c&261930)!==0&&(v&42)!==0?o===mp?dc++:(dc=0,mp=o):dc=0,pc(0)}}function e2(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Yl(u)))}function qh(){return $_(),Z_(),J_(),t2()}function t2(){if(sn!==5)return!1;var o=Ga,u=gp;gp=0;var c=Ui(ra),d=ne.T,v=de.p;try{de.p=32>c?32:c,ne.T=null,c=vp,vp=null;var y=Ga,A=ra;if(sn=0,wu=Ga=null,ra=0,(it&6)!==0)throw Error(n(331));var I=it;if(it|=4,V_(y.current),M_(y,y.current,A,c),it=I,pc(0,!1),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(zr,y)}catch{}return!0}finally{de.p=v,ne.T=d,e2(o,u)}}function n2(o,u,c){u=br(c,u),u=W0(o.stateNode,u,2),o=Ba(o,u,2),o!==null&&(Mo(o,2),Ci(o))}function ht(o,u,c){if(o.tag===3)n2(o,o,c);else for(;u!==null;){if(u.tag===3){n2(u,o,c);break}else if(u.tag===1){var d=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ha===null||!Ha.has(d))){o=br(c,o),c=r_(2),d=Ba(u,c,2),d!==null&&(i_(c,d,u,o),Mo(d,2),Ci(d));break}}u=u.return}}function Ep(o,u,c){var d=o.pingCache;if(d===null){d=o.pingCache=new mI;var v=new Set;d.set(u,v)}else v=d.get(u),v===void 0&&(v=new Set,d.set(u,v));v.has(c)||(hp=!0,v.add(c),o=AI.bind(null,o,u,c),u.then(o,o))}function AI(o,u,c){var d=o.pingCache;d!==null&&d.delete(u),o.pingedLanes|=o.suspendedLanes&c,o.warmLanes&=~c,Tt===o&&(Ge&c)===c&&(kt===4||kt===3&&(Ge&62914560)===Ge&&300>Hn()-Fh?(it&2)===0&&Tu(o,0):dp|=c,Au===Ge&&(Au=0)),Ci(o)}function r2(o,u){u===0&&(u=zf()),o=Ko(o,u),o!==null&&(Mo(o,u),Ci(o))}function wI(o){var u=o.memoizedState,c=0;u!==null&&(c=u.retryLane),r2(o,c)}function TI(o,u){var c=0;switch(o.tag){case 31:case 13:var d=o.stateNode,v=o.memoizedState;v!==null&&(c=v.retryLane);break;case 19:d=o.stateNode;break;case 22:d=o.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(u),r2(o,c)}function SI(o,u){return on(o,u)}var Xh=null,Iu=null,xp=!1,Kh=!1,Ap=!1,Xa=0;function Ci(o){o!==Iu&&o.next===null&&(Iu===null?Xh=Iu=o:Iu=Iu.next=o),Kh=!0,xp||(xp=!0,CI())}function pc(o,u){if(!Ap&&Kh){Ap=!0;do for(var c=!1,d=Xh;d!==null;){if(o!==0){var v=d.pendingLanes;if(v===0)var y=0;else{var A=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-zt(42|o)+1)-1,y&=v&~(A&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,s2(d,y))}else y=Ge,y=li(d,d===Tt?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||jr(d,y)||(c=!0,s2(d,y));d=d.next}while(c);Ap=!1}}function II(){i2()}function i2(){Kh=xp=!1;var o=0;Xa!==0&&BI()&&(o=Xa);for(var u=Hn(),c=null,d=Xh;d!==null;){var v=d.next,y=a2(d,u);y===0?(d.next=null,c===null?Xh=v:c.next=v,v===null&&(Iu=c)):(c=d,(o!==0||(y&3)!==0)&&(Kh=!0)),d=v}sn!==0&&sn!==5||pc(o),Xa!==0&&(Xa=0)}function a2(o,u){for(var c=o.suspendedLanes,d=o.pingedLanes,v=o.expirationTimes,y=o.pendingLanes&-62914561;0<y;){var A=31-zt(y),I=1<<A,F=v[A];F===-1?((I&c)===0||(I&d)!==0)&&(v[A]=$1(I,u)):F<=u&&(o.expiredLanes|=I),y&=~I}if(u=Tt,c=Ge,c=li(o,o===u?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d=o.callbackNode,c===0||o===u&&(ft===2||ft===9)||o.cancelPendingCommit!==null)return d!==null&&d!==null&&Ea(d),o.callbackNode=null,o.callbackPriority=0;if((c&3)===0||jr(o,c)){if(u=c&-c,u===o.callbackPriority)return u;switch(d!==null&&Ea(d),Ui(c)){case 2:case 8:c=Tl;break;case 32:c=xa;break;case 268435456:c=Vf;break;default:c=xa}return d=o2.bind(null,o),c=on(c,d),o.callbackPriority=u,o.callbackNode=c,u}return d!==null&&d!==null&&Ea(d),o.callbackPriority=2,o.callbackNode=null,2}function o2(o,u){if(sn!==0&&sn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var c=o.callbackNode;if(qh()&&o.callbackNode!==c)return null;var d=Ge;return d=li(o,o===Tt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),d===0?null:(z_(o,d,u),a2(o,Hn()),o.callbackNode!=null&&o.callbackNode===c?o2.bind(null,o):null)}function s2(o,u){if(qh())return null;z_(o,u,!0)}function CI(){FI(function(){(it&6)!==0?on(wl,II):i2()})}function wp(){if(Xa===0){var o=fu;o===0&&(o=si,si<<=1,(si&261888)===0&&(si=256)),Xa=o}return Xa}function u2(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Qs(""+o)}function l2(o,u){var c=u.ownerDocument.createElement("input");return c.name=u.name,c.value=u.value,o.id&&c.setAttribute("form",o.id),u.parentNode.insertBefore(c,u),o=new FormData(o),c.parentNode.removeChild(c),o}function bI(o,u,c,d,v){if(u==="submit"&&c&&c.stateNode===v){var y=u2((v[vn]||null).action),A=d.submitter;A&&(u=(u=A[vn]||null)?u2(u.formAction):A.getAttribute("formAction"),u!==null&&(y=u,A=null));var I=new Ei("action","action",null,d,v);o.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Xa!==0){var F=A?l2(v,A):new FormData(v);H0(c,{pending:!0,data:F,method:v.method,action:y},null,F)}}else typeof y=="function"&&(I.preventDefault(),F=A?l2(v,A):new FormData(v),H0(c,{pending:!0,data:F,method:v.method,action:y},y,F))},currentTarget:v}]})}}for(var Tp=0;Tp<o0.length;Tp++){var Sp=o0[Tp],RI=Sp.toLowerCase(),DI=Sp[0].toUpperCase()+Sp.slice(1);Qr(RI,"on"+DI)}Qr(Um,"onAnimationEnd"),Qr(zm,"onAnimationIteration"),Qr(jm,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(XS,"onTransitionRun"),Qr(KS,"onTransitionStart"),Qr(YS,"onTransitionCancel"),Qr(Hm,"onTransitionEnd"),vi("onMouseEnter",["mouseout","mouseover"]),vi("onMouseLeave",["mouseout","mouseover"]),vi("onPointerEnter",["pointerout","pointerover"]),vi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function c2(o,u){u=(u&4)!==0;for(var c=0;c<o.length;c++){var d=o[c],v=d.event;d=d.listeners;e:{var y=void 0;if(u)for(var A=d.length-1;0<=A;A--){var I=d[A],F=I.instance,Q=I.currentTarget;if(I=I.listener,F!==y&&v.isPropagationStopped())break e;y=I,v.currentTarget=Q;try{y(v)}catch(ie){uh(ie)}v.currentTarget=null,y=F}else for(A=0;A<d.length;A++){if(I=d[A],F=I.instance,Q=I.currentTarget,I=I.listener,F!==y&&v.isPropagationStopped())break e;y=I,v.currentTarget=Q;try{y(v)}catch(ie){uh(ie)}v.currentTarget=null,y=F}}}}function He(o,u){var c=u[qs];c===void 0&&(c=u[qs]=new Set);var d=o+"__bubble";c.has(d)||(f2(u,o,2,!1),c.add(d))}function Ip(o,u,c){var d=0;u&&(d|=4),f2(c,o,d,u)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function Cp(o){if(!o[Yh]){o[Yh]=!0,Cl.forEach(function(c){c!=="selectionchange"&&(OI.has(c)||Ip(c,!1,o),Ip(c,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Yh]||(u[Yh]=!0,Ip("selectionchange",!1,u))}}function f2(o,u,c,d){switch(U2(u)){case 2:var v=aC;break;case 8:v=oC;break;default:v=jp}c=v.bind(null,u,c,o),v=void 0,!Fo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),d?v!==void 0?o.addEventListener(u,c,{capture:!0,passive:v}):o.addEventListener(u,c,!0):v!==void 0?o.addEventListener(u,c,{passive:v}):o.addEventListener(u,c,!1)}function bp(o,u,c,d,v){var y=d;if((u&1)===0&&(u&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var I=d.stateNode.containerInfo;if(I===v)break;if(A===4)for(A=d.return;A!==null;){var F=A.tag;if((F===3||F===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;I!==null;){if(A=di(I),A===null)return;if(F=A.tag,F===5||F===6||F===26||F===27){d=y=A;continue e}I=I.parentNode}}d=d.return}Ca(function(){var Q=y,ie=Tr(c),se=[];e:{var Z=Gm.get(o);if(Z!==void 0){var te=Ei,me=o;switch(o){case"keypress":if(zo(c)===0)break e;case"keydown":case"keyup":te=ah;break;case"focusin":me="focus",te=Ho;break;case"focusout":me="blur",te=Ho;break;case"beforeblur":case"afterblur":te=Ho;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Qf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=x;break;case Um:case zm:case jm:te=Zf;break;case Hm:te=R;break;case"scroll":case"scrollend":te=Fl;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=Jf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Hi;break;case"toggle":case"beforetoggle":te=Le}var be=(u&4)!==0,At=!be&&(o==="scroll"||o==="scrollend"),q=be?Z!==null?Z+"Capture":null:Z;be=[];for(var z=Q,W;z!==null;){var oe=z;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||q===null||(oe=Xr(z,q),oe!=null&&be.push(vc(z,oe,W))),At)break;z=z.return}0<be.length&&(Z=new te(Z,me,null,c,ie),se.push({event:Z,listeners:be}))}}if((u&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",te=o==="mouseout"||o==="pointerout",Z&&c!==Vl&&(me=c.relatedTarget||c.fromElement)&&(di(me)||me[fi]))break e;if((te||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(me=c.relatedTarget||c.toElement,te=Q,me=me?di(me):null,me!==null&&(At=a(me),be=me.tag,me!==At||be!==5&&be!==27&&be!==6)&&(me=null)):(te=null,me=Q),te!==me)){if(be=Ul,oe="onMouseLeave",q="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(be=Hi,oe="onPointerLeave",q="onPointerEnter",z="pointer"),At=te==null?Z:lr(te),W=me==null?Z:lr(me),Z=new be(oe,z+"leave",te,c,ie),Z.target=At,Z.relatedTarget=W,oe=null,di(ie)===Q&&(be=new be(q,z+"enter",me,c,ie),be.target=W,be.relatedTarget=At,oe=be),At=oe,te&&me)t:{for(be=NI,q=te,z=me,W=0,oe=q;oe;oe=be(oe))W++;oe=0;for(var Te=z;Te;Te=be(Te))oe++;for(;0<W-oe;)q=be(q),W--;for(;0<oe-W;)z=be(z),oe--;for(;W--;){if(q===z||z!==null&&q===z.alternate){be=q;break t}q=be(q),z=be(z)}be=null}else be=null;te!==null&&h2(se,Z,te,be,!1),me!==null&&At!==null&&h2(se,At,me,be,!0)}}e:{if(Z=Q?lr(Q):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var et=Rm;else if(Cm(Z))if(Dm)et=HS;else{et=zS;var xe=US}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&Ws(Q.elementType)&&(et=Rm):et=jS;if(et&&(et=et(o,Q))){bm(se,et,c,ie);break e}xe&&xe(o,Z,Q),o==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&Ml(Z,"number",Z.value)}switch(xe=Q?lr(Q):window,o){case"focusin":(Cm(xe)||xe.contentEditable==="true")&&(ru=xe,r0=Q,ql=null);break;case"focusout":ql=r0=ru=null;break;case"mousedown":i0=!0;break;case"contextmenu":case"mouseup":case"dragend":i0=!1,km(se,c,ie);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":km(se,c,ie)}var ke;if(rt)e:{switch(o){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else nu?Go(o,c)&&(qe="onCompositionEnd"):o==="keydown"&&c.keyCode===229&&(qe="onCompositionStart");qe&&(wi&&c.locale!=="ko"&&(nu||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&nu&&(ke=kl()):(_i=ie,Bl="value"in _i?_i.value:_i.textContent,nu=!0)),xe=Wh(Q,qe),0<xe.length&&(qe=new Ai(qe,o,null,c,ie),se.push({event:qe,listeners:xe}),ke?qe.data=ke:(ke=tu(c),ke!==null&&(qe.data=ke)))),(ke=Ir?VS(o,c):BS(o,c))&&(qe=Wh(Q,"onBeforeInput"),0<qe.length&&(xe=new Ai("onBeforeInput","beforeinput",null,c,ie),se.push({event:xe,listeners:qe}),xe.data=ke)),bI(se,o,Q,c,ie)}c2(se,u)})}function vc(o,u,c){return{instance:o,listener:u,currentTarget:c}}function Wh(o,u){for(var c=u+"Capture",d=[];o!==null;){var v=o,y=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||y===null||(v=Xr(o,c),v!=null&&d.unshift(vc(o,v,y)),v=Xr(o,u),v!=null&&d.push(vc(o,v,y))),o.tag===3)return d;o=o.return}return[]}function NI(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function h2(o,u,c,d,v){for(var y=u._reactName,A=[];c!==null&&c!==d;){var I=c,F=I.alternate,Q=I.stateNode;if(I=I.tag,F!==null&&F===d)break;I!==5&&I!==26&&I!==27||Q===null||(F=Q,v?(Q=Xr(c,y),Q!=null&&A.unshift(vc(c,Q,F))):v||(Q=Xr(c,y),Q!=null&&A.push(vc(c,Q,F)))),c=c.return}A.length!==0&&o.push({event:u,listeners:A})}var MI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function d2(o){return(typeof o=="string"?o:""+o).replace(MI,`
`).replace(PI,"")}function p2(o,u){return u=d2(u),d2(o)===u}function xt(o,u,c,d,v,y){switch(c){case"children":typeof d=="string"?u==="body"||u==="textarea"&&d===""||Jn(o,d):(typeof d=="number"||typeof d=="bigint")&&u!=="body"&&Jn(o,""+d);break;case"className":cr(o,"class",d);break;case"tabIndex":cr(o,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":cr(o,c,d);break;case"style":Ll(o,d,y);break;case"data":if(u!=="object"){cr(o,"data",d);break}case"src":case"href":if(d===""&&(u!=="a"||c!=="href")){o.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Qs(""+d),o.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){o.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(u!=="input"&&xt(o,u,"name",v.name,v,null),xt(o,u,"formEncType",v.formEncType,v,null),xt(o,u,"formMethod",v.formMethod,v,null),xt(o,u,"formTarget",v.formTarget,v,null)):(xt(o,u,"encType",v.encType,v,null),xt(o,u,"method",v.method,v,null),xt(o,u,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){o.removeAttribute(c);break}d=Qs(""+d),o.setAttribute(c,d);break;case"onClick":d!=null&&(o.onclick=qr);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(n(60));o.innerHTML=c}}break;case"multiple":o.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":o.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){o.removeAttribute("xlink:href");break}c=Qs(""+d),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""+d):o.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,""):o.removeAttribute(c);break;case"capture":case"download":d===!0?o.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?o.setAttribute(c,d):o.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?o.setAttribute(c,d):o.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?o.removeAttribute(c):o.setAttribute(c,d);break;case"popover":He("beforetoggle",o),He("toggle",o),Ks(o,"popover",d);break;case"xlinkActuate":Wt(o,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Wt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Wt(o,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Wt(o,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Wt(o,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Wt(o,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Wt(o,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Wt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Wt(o,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ks(o,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Wf.get(c)||c,Ks(o,c,d))}}function Rp(o,u,c,d,v,y){switch(c){case"style":Ll(o,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(n(60));o.innerHTML=c}}break;case"children":typeof d=="string"?Jn(o,d):(typeof d=="number"||typeof d=="bigint")&&Jn(o,""+d);break;case"onScroll":d!=null&&He("scroll",o);break;case"onScrollEnd":d!=null&&He("scrollend",o);break;case"onClick":d!=null&&(o.onclick=qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),u=c.slice(2,v?c.length-7:void 0),y=o[vn]||null,y=y!=null?y[c]:null,typeof y=="function"&&o.removeEventListener(u,y,v),typeof d=="function")){typeof y!="function"&&y!==null&&(c in o?o[c]=null:o.hasAttribute(c)&&o.removeAttribute(c)),o.addEventListener(u,d,v);break e}c in o?o[c]=d:d===!0?o.setAttribute(c,""):Ks(o,c,d)}}}function Dn(o,u,c){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",o),He("load",o);var d=!1,v=!1,y;for(y in c)if(c.hasOwnProperty(y)){var A=c[y];if(A!=null)switch(y){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:xt(o,u,y,A,c,null)}}v&&xt(o,u,"srcSet",c.srcSet,c,null),d&&xt(o,u,"src",c.src,c,null);return;case"input":He("invalid",o);var I=y=A=v=null,F=null,Q=null;for(d in c)if(c.hasOwnProperty(d)){var ie=c[d];if(ie!=null)switch(d){case"name":v=ie;break;case"type":A=ie;break;case"checked":F=ie;break;case"defaultChecked":Q=ie;break;case"value":y=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(137,u));break;default:xt(o,u,d,ie,c,null)}}Xf(o,y,I,F,Q,A,v,!1);return;case"select":He("invalid",o),d=A=y=null;for(v in c)if(c.hasOwnProperty(v)&&(I=c[v],I!=null))switch(v){case"value":y=I;break;case"defaultValue":A=I;break;case"multiple":d=I;default:xt(o,u,v,I,c,null)}u=y,c=A,o.multiple=!!d,u!=null?wa(o,!!d,u,!1):c!=null&&wa(o,!!d,c,!0);return;case"textarea":He("invalid",o),y=v=d=null;for(A in c)if(c.hasOwnProperty(A)&&(I=c[A],I!=null))switch(A){case"value":d=I;break;case"defaultValue":v=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(91));break;default:xt(o,u,A,I,c,null)}Ta(o,d,v,y);return;case"option":for(F in c)c.hasOwnProperty(F)&&(d=c[F],d!=null)&&(F==="selected"?o.selected=d&&typeof d!="function"&&typeof d!="symbol":xt(o,u,F,d,c,null));return;case"dialog":He("beforetoggle",o),He("toggle",o),He("cancel",o),He("close",o);break;case"iframe":case"object":He("load",o);break;case"video":case"audio":for(d=0;d<gc.length;d++)He(gc[d],o);break;case"image":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"embed":case"source":case"link":He("error",o),He("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in c)if(c.hasOwnProperty(Q)&&(d=c[Q],d!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:xt(o,u,Q,d,c,null)}return;default:if(Ws(u)){for(ie in c)c.hasOwnProperty(ie)&&(d=c[ie],d!==void 0&&Rp(o,u,ie,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&xt(o,u,I,d,c,null))}function LI(o,u,c,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,y=null,A=null,I=null,F=null,Q=null,ie=null;for(te in c){var se=c[te];if(c.hasOwnProperty(te)&&se!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":F=se;default:d.hasOwnProperty(te)||xt(o,u,te,null,d,se)}}for(var Z in d){var te=d[Z];if(se=c[Z],d.hasOwnProperty(Z)&&(te!=null||se!=null))switch(Z){case"type":y=te;break;case"name":v=te;break;case"checked":Q=te;break;case"defaultChecked":ie=te;break;case"value":A=te;break;case"defaultValue":I=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,u));break;default:te!==se&&xt(o,u,Z,te,d,se)}}Ys(o,A,I,F,Q,ie,y,v);return;case"select":te=A=I=Z=null;for(y in c)if(F=c[y],c.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":te=F;default:d.hasOwnProperty(y)||xt(o,u,y,null,d,F)}for(v in d)if(y=d[v],F=c[v],d.hasOwnProperty(v)&&(y!=null||F!=null))switch(v){case"value":Z=y;break;case"defaultValue":I=y;break;case"multiple":A=y;default:y!==F&&xt(o,u,v,y,d,F)}u=I,c=A,d=te,Z!=null?wa(o,!!c,Z,!1):!!d!=!!c&&(u!=null?wa(o,!!c,u,!0):wa(o,!!c,c?[]:"",!1));return;case"textarea":te=Z=null;for(I in c)if(v=c[I],c.hasOwnProperty(I)&&v!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:xt(o,u,I,null,d,v)}for(A in d)if(v=d[A],y=c[A],d.hasOwnProperty(A)&&(v!=null||y!=null))switch(A){case"value":Z=v;break;case"defaultValue":te=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==y&&xt(o,u,A,v,d,y)}Kf(o,Z,te);return;case"option":for(var me in c)Z=c[me],c.hasOwnProperty(me)&&Z!=null&&!d.hasOwnProperty(me)&&(me==="selected"?o.selected=!1:xt(o,u,me,null,d,Z));for(F in d)Z=d[F],te=c[F],d.hasOwnProperty(F)&&Z!==te&&(Z!=null||te!=null)&&(F==="selected"?o.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":xt(o,u,F,Z,d,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in c)Z=c[be],c.hasOwnProperty(be)&&Z!=null&&!d.hasOwnProperty(be)&&xt(o,u,be,null,d,Z);for(Q in d)if(Z=d[Q],te=c[Q],d.hasOwnProperty(Q)&&Z!==te&&(Z!=null||te!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,u));break;default:xt(o,u,Q,Z,d,te)}return;default:if(Ws(u)){for(var At in c)Z=c[At],c.hasOwnProperty(At)&&Z!==void 0&&!d.hasOwnProperty(At)&&Rp(o,u,At,void 0,d,Z);for(ie in d)Z=d[ie],te=c[ie],!d.hasOwnProperty(ie)||Z===te||Z===void 0&&te===void 0||Rp(o,u,ie,Z,d,te);return}}for(var q in c)Z=c[q],c.hasOwnProperty(q)&&Z!=null&&!d.hasOwnProperty(q)&&xt(o,u,q,null,d,Z);for(se in d)Z=d[se],te=c[se],!d.hasOwnProperty(se)||Z===te||Z==null&&te==null||xt(o,u,se,Z,d,te)}function g2(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function VI(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var v=c[d],y=v.transferSize,A=v.initiatorType,I=v.duration;if(y&&I&&g2(A)){for(A=0,I=v.responseEnd,d+=1;d<c.length;d++){var F=c[d],Q=F.startTime;if(Q>I)break;var ie=F.transferSize,se=F.initiatorType;ie&&g2(se)&&(F=F.responseEnd,A+=ie*(F<I?1:(I-Q)/(F-Q)))}if(--d,u+=8*(y+A)/(v.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Dp=null,Op=null;function Qh(o){return o.nodeType===9?o:o.ownerDocument}function v2(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m2(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Np(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Mp=null;function BI(){var o=window.event;return o&&o.type==="popstate"?o===Mp?!1:(Mp=o,!0):(Mp=null,!1)}var y2=typeof setTimeout=="function"?setTimeout:void 0,kI=typeof clearTimeout=="function"?clearTimeout:void 0,_2=typeof Promise=="function"?Promise:void 0,FI=typeof queueMicrotask=="function"?queueMicrotask:typeof _2<"u"?function(o){return _2.resolve(null).then(o).catch(UI)}:y2;function UI(o){setTimeout(function(){throw o})}function Ka(o){return o==="head"}function E2(o,u){var c=u,d=0;do{var v=c.nextSibling;if(o.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(d===0){o.removeChild(v),Du(u);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")mc(o.ownerDocument.documentElement);else if(c==="head"){c=o.ownerDocument.head,mc(c);for(var y=c.firstChild;y;){var A=y.nextSibling,I=y.nodeName;y[hi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=A}}else c==="body"&&mc(o.ownerDocument.body);c=v}while(c);Du(u)}function x2(o,u){var c=o;o=0;do{var d=c.nextSibling;if(c.nodeType===1?u?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(u?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(o===0)break;o--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||o++;c=d}while(c)}function Pp(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var c=u;switch(u=u.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Pp(c),Xs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}o.removeChild(c)}}function zI(o,u,c,d){for(;o.nodeType===1;){var v=c;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!d&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(d){if(!o[hi])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(y=o.getAttribute("rel"),y==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(y!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(y=o.getAttribute("src"),(y!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&y&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var y=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===y)return o}else return o;if(o=Mr(o.nextSibling),o===null)break}return null}function jI(o,u,c){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Mr(o.nextSibling),o===null))return null;return o}function A2(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Mr(o.nextSibling),o===null))return null;return o}function Lp(o){return o.data==="$?"||o.data==="$~"}function Vp(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function HI(o,u){var c=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||c.readyState!=="loading")u();else{var d=function(){u(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),o._reactRetry=d}}function Mr(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Bp=null;function w2(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="/$"||c==="/&"){if(u===0)return Mr(o.nextSibling);u--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||u++}o=o.nextSibling}return null}function T2(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var c=o.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(u===0)return o;u--}else c!=="/$"&&c!=="/&"||u++}o=o.previousSibling}return null}function S2(o,u,c){switch(u=Qh(c),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function mc(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Xs(o)}var Pr=new Map,I2=new Set;function $h(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ia=de.d;de.d={f:GI,r:qI,D:XI,C:KI,L:YI,m:WI,X:$I,S:QI,M:ZI};function GI(){var o=ia.f(),u=jh();return o||u}function qI(o){var u=wr(o);u!==null&&u.tag===5&&u.type==="form"?Hy(u):ia.r(o)}var Cu=typeof document>"u"?null:document;function C2(o,u,c){var d=Cu;if(d&&typeof u=="string"&&u){var v=Zn(u);v='link[rel="'+o+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),I2.has(v)||(I2.add(v),o={rel:o,crossOrigin:c,href:u},d.querySelector(v)===null&&(u=d.createElement("link"),Dn(u,"link",o),Yt(u),d.head.appendChild(u)))}}function XI(o){ia.D(o),C2("dns-prefetch",o,null)}function KI(o,u){ia.C(o,u),C2("preconnect",o,u)}function YI(o,u,c){ia.L(o,u,c);var d=Cu;if(d&&o&&u){var v='link[rel="preload"][as="'+Zn(u)+'"]';u==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Zn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Zn(c.imageSizes)+'"]')):v+='[href="'+Zn(o)+'"]';var y=v;switch(u){case"style":y=bu(o);break;case"script":y=Ru(o)}Pr.has(y)||(o=m({rel:"preload",href:u==="image"&&c&&c.imageSrcSet?void 0:o,as:u},c),Pr.set(y,o),d.querySelector(v)!==null||u==="style"&&d.querySelector(yc(y))||u==="script"&&d.querySelector(_c(y))||(u=d.createElement("link"),Dn(u,"link",o),Yt(u),d.head.appendChild(u)))}}function WI(o,u){ia.m(o,u);var c=Cu;if(c&&o){var d=u&&typeof u.as=="string"?u.as:"script",v='link[rel="modulepreload"][as="'+Zn(d)+'"][href="'+Zn(o)+'"]',y=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ru(o)}if(!Pr.has(y)&&(o=m({rel:"modulepreload",href:o},u),Pr.set(y,o),c.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(_c(y)))return}d=c.createElement("link"),Dn(d,"link",o),Yt(d),c.head.appendChild(d)}}}function QI(o,u,c){ia.S(o,u,c);var d=Cu;if(d&&o){var v=pi(d).hoistableStyles,y=bu(o);u=u||"default";var A=v.get(y);if(!A){var I={loading:0,preload:null};if(A=d.querySelector(yc(y)))I.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":u},c),(c=Pr.get(y))&&kp(o,c);var F=A=d.createElement("link");Yt(F),Dn(F,"link",o),F._p=new Promise(function(Q,ie){F.onload=Q,F.onerror=ie}),F.addEventListener("load",function(){I.loading|=1}),F.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Zh(A,u,d)}A={type:"stylesheet",instance:A,count:1,state:I},v.set(y,A)}}}function $I(o,u){ia.X(o,u);var c=Cu;if(c&&o){var d=pi(c).hoistableScripts,v=Ru(o),y=d.get(v);y||(y=c.querySelector(_c(v)),y||(o=m({src:o,async:!0},u),(u=Pr.get(v))&&Fp(o,u),y=c.createElement("script"),Yt(y),Dn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(v,y))}}function ZI(o,u){ia.M(o,u);var c=Cu;if(c&&o){var d=pi(c).hoistableScripts,v=Ru(o),y=d.get(v);y||(y=c.querySelector(_c(v)),y||(o=m({src:o,async:!0,type:"module"},u),(u=Pr.get(v))&&Fp(o,u),y=c.createElement("script"),Yt(y),Dn(y,"link",o),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(v,y))}}function b2(o,u,c,d){var v=(v=Be.current)?$h(v):null;if(!v)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(u=bu(c.href),c=pi(v).hoistableStyles,d=c.get(u),d||(d={type:"style",instance:null,count:0,state:null},c.set(u,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){o=bu(c.href);var y=pi(v).hoistableStyles,A=y.get(o);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(o,A),(y=v.querySelector(yc(o)))&&!y._p&&(A.instance=y,A.state.loading=5),Pr.has(o)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Pr.set(o,c),y||JI(v,o,c,A.state))),u&&d===null)throw Error(n(528,""));return A}if(u&&d!==null)throw Error(n(529,""));return null;case"script":return u=c.async,c=c.src,typeof c=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ru(c),c=pi(v).hoistableScripts,d=c.get(u),d||(d={type:"script",instance:null,count:0,state:null},c.set(u,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function bu(o){return'href="'+Zn(o)+'"'}function yc(o){return'link[rel="stylesheet"]['+o+"]"}function R2(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function JI(o,u,c,d){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?d.loading=1:(u=o.createElement("link"),d.preload=u,u.addEventListener("load",function(){return d.loading|=1}),u.addEventListener("error",function(){return d.loading|=2}),Dn(u,"link",c),Yt(u),o.head.appendChild(u))}function Ru(o){return'[src="'+Zn(o)+'"]'}function _c(o){return"script[async]"+o}function D2(o,u,c){if(u.count++,u.instance===null)switch(u.type){case"style":var d=o.querySelector('style[data-href~="'+Zn(c.href)+'"]');if(d)return u.instance=d,Yt(d),d;var v=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(o.ownerDocument||o).createElement("style"),Yt(d),Dn(d,"style",v),Zh(d,c.precedence,o),u.instance=d;case"stylesheet":v=bu(c.href);var y=o.querySelector(yc(v));if(y)return u.state.loading|=4,u.instance=y,Yt(y),y;d=R2(c),(v=Pr.get(v))&&kp(d,v),y=(o.ownerDocument||o).createElement("link"),Yt(y);var A=y;return A._p=new Promise(function(I,F){A.onload=I,A.onerror=F}),Dn(y,"link",d),u.state.loading|=4,Zh(y,c.precedence,o),u.instance=y;case"script":return y=Ru(c.src),(v=o.querySelector(_c(y)))?(u.instance=v,Yt(v),v):(d=c,(v=Pr.get(y))&&(d=m({},c),Fp(d,v)),o=o.ownerDocument||o,v=o.createElement("script"),Yt(v),Dn(v,"link",d),o.head.appendChild(v),u.instance=v);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(d=u.instance,u.state.loading|=4,Zh(d,c.precedence,o));return u.instance}function Zh(o,u,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,y=v,A=0;A<d.length;A++){var I=d[A];if(I.dataset.precedence===u)y=I;else if(y!==v)break}y?y.parentNode.insertBefore(o,y.nextSibling):(u=c.nodeType===9?c.head:c,u.insertBefore(o,u.firstChild))}function kp(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Fp(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Jh=null;function O2(o,u,c){if(Jh===null){var d=new Map,v=Jh=new Map;v.set(c,d)}else v=Jh,d=v.get(c),d||(d=new Map,v.set(c,d));if(d.has(o))return d;for(d.set(o,null),c=c.getElementsByTagName(o),v=0;v<c.length;v++){var y=c[v];if(!(y[hi]||y[Kt]||o==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(u)||"";A=o+A;var I=d.get(A);I?I.push(y):d.set(A,[y])}}return d}function N2(o,u,c){o=o.ownerDocument||o,o.head.insertBefore(c,u==="title"?o.querySelector("head > title"):null)}function eC(o,u,c){if(c===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function M2(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function tC(o,u,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=bu(d.href),y=u.querySelector(yc(v));if(y){u=y._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=ed.bind(o),u.then(o,o)),c.state.loading|=4,c.instance=y,Yt(y);return}y=u.ownerDocument||u,d=R2(d),(v=Pr.get(v))&&kp(d,v),y=y.createElement("link"),Yt(y);var A=y;A._p=new Promise(function(I,F){A.onload=I,A.onerror=F}),Dn(y,"link",d),c.instance=y}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(o.count++,c=ed.bind(o),u.addEventListener("load",c),u.addEventListener("error",c))}}var Up=0;function nC(o,u){return o.stylesheets&&o.count===0&&nd(o,o.stylesheets),0<o.count||0<o.imgCount?function(c){var d=setTimeout(function(){if(o.stylesheets&&nd(o,o.stylesheets),o.unsuspend){var y=o.unsuspend;o.unsuspend=null,y()}},6e4+u);0<o.imgBytes&&Up===0&&(Up=62500*VI());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&nd(o,o.stylesheets),o.unsuspend)){var y=o.unsuspend;o.unsuspend=null,y()}},(o.imgBytes>Up?50:800)+u);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function ed(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var td=null;function nd(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,td=new Map,u.forEach(rC,o),td=null,ed.call(o))}function rC(o,u){if(!(u.state.loading&4)){var c=td.get(o);if(c)var d=c.get(null);else{c=new Map,td.set(o,c);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<v.length;y++){var A=v[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(c.set(A.dataset.precedence,A),d=A)}d&&c.set(null,d)}v=u.instance,A=v.getAttribute("data-precedence"),y=c.get(A)||d,y===d&&c.set(null,v),c.set(A,v),this.count++,d=ed.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),y?y.parentNode.insertBefore(v,y.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),u.state.loading|=4}}var Ec={$$typeof:B,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function iC(o,u,c,d,v,y,A,I,F){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function P2(o,u,c,d,v,y,A,I,F,Q,ie,se){return o=new iC(o,u,c,A,F,Q,ie,se,I),u=1,y===!0&&(u|=24),y=hr(3,null,null,u),o.current=y,y.stateNode=o,u=_0(),u.refCount++,o.pooledCache=u,u.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:u},w0(y),o}function L2(o){return o?(o=ou,o):ou}function V2(o,u,c,d,v,y){v=L2(v),d.context===null?d.context=v:d.pendingContext=v,d=Va(u),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=Ba(o,d,u),c!==null&&(ir(c,o,u),Zl(c,o,u))}function B2(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var c=o.retryLane;o.retryLane=c!==0&&c<u?c:u}}function zp(o,u){B2(o,u),(o=o.alternate)&&B2(o,u)}function k2(o){if(o.tag===13||o.tag===31){var u=Ko(o,67108864);u!==null&&ir(u,o,67108864),zp(o,67108864)}}function F2(o){if(o.tag===13||o.tag===31){var u=mr();u=Lo(u);var c=Ko(o,u);c!==null&&ir(c,o,u),zp(o,u)}}var rd=!0;function aC(o,u,c,d){var v=ne.T;ne.T=null;var y=de.p;try{de.p=2,jp(o,u,c,d)}finally{de.p=y,ne.T=v}}function oC(o,u,c,d){var v=ne.T;ne.T=null;var y=de.p;try{de.p=8,jp(o,u,c,d)}finally{de.p=y,ne.T=v}}function jp(o,u,c,d){if(rd){var v=Hp(d);if(v===null)bp(o,u,d,id,c),z2(o,d);else if(uC(v,o,u,c,d))d.stopPropagation();else if(z2(o,d),u&4&&-1<sC.indexOf(o)){for(;v!==null;){var y=wr(v);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=ui(y.pendingLanes);if(A!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var F=1<<31-zt(A);I.entanglements[1]|=F,A&=~F}Ci(y),(it&6)===0&&(Uh=Hn()+500,pc(0))}}break;case 31:case 13:I=Ko(y,2),I!==null&&ir(I,y,2),jh(),zp(y,2)}if(y=Hp(d),y===null&&bp(o,u,d,id,c),y===v)break;v=y}v!==null&&d.stopPropagation()}else bp(o,u,d,null,c)}}function Hp(o){return o=Tr(o),Gp(o)}var id=null;function Gp(o){if(id=null,o=di(o),o!==null){var u=a(o);if(u===null)o=null;else{var c=u.tag;if(c===13){if(o=s(u),o!==null)return o;o=null}else if(c===31){if(o=l(u),o!==null)return o;o=null}else if(c===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return id=o,null}function U2(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oo()){case wl:return 2;case Tl:return 8;case xa:case Q1:return 32;case Vf:return 268435456;default:return 32}default:return 32}}var qp=!1,Ya=null,Wa=null,Qa=null,xc=new Map,Ac=new Map,$a=[],sC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z2(o,u){switch(o){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":xc.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(u.pointerId)}}function wc(o,u,c,d,v,y){return o===null||o.nativeEvent!==y?(o={blockedOn:u,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[v]},u!==null&&(u=wr(u),u!==null&&k2(u)),o):(o.eventSystemFlags|=d,u=o.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),o)}function uC(o,u,c,d,v){switch(u){case"focusin":return Ya=wc(Ya,o,u,c,d,v),!0;case"dragenter":return Wa=wc(Wa,o,u,c,d,v),!0;case"mouseover":return Qa=wc(Qa,o,u,c,d,v),!0;case"pointerover":var y=v.pointerId;return xc.set(y,wc(xc.get(y)||null,o,u,c,d,v)),!0;case"gotpointercapture":return y=v.pointerId,Ac.set(y,wc(Ac.get(y)||null,o,u,c,d,v)),!0}return!1}function j2(o){var u=di(o.target);if(u!==null){var c=a(u);if(c!==null){if(u=c.tag,u===13){if(u=s(c),u!==null){o.blockedOn=u,Hr(o.priority,function(){F2(c)});return}}else if(u===31){if(u=l(c),u!==null){o.blockedOn=u,Hr(o.priority,function(){F2(c)});return}}else if(u===3&&c.stateNode.current.memoizedState.isDehydrated){o.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ad(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var c=Hp(o.nativeEvent);if(c===null){c=o.nativeEvent;var d=new c.constructor(c.type,c);Vl=d,c.target.dispatchEvent(d),Vl=null}else return u=wr(c),u!==null&&k2(u),o.blockedOn=c,!1;u.shift()}return!0}function H2(o,u,c){ad(o)&&c.delete(u)}function lC(){qp=!1,Ya!==null&&ad(Ya)&&(Ya=null),Wa!==null&&ad(Wa)&&(Wa=null),Qa!==null&&ad(Qa)&&(Qa=null),xc.forEach(H2),Ac.forEach(H2)}function od(o,u){o.blockedOn===u&&(o.blockedOn=null,qp||(qp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,lC)))}var sd=null;function G2(o){sd!==o&&(sd=o,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){sd===o&&(sd=null);for(var u=0;u<o.length;u+=3){var c=o[u],d=o[u+1],v=o[u+2];if(typeof d!="function"){if(Gp(d||c)===null)continue;break}var y=wr(c);y!==null&&(o.splice(u,3),u-=3,H0(y,{pending:!0,data:v,method:c.method,action:d},d,v))}}))}function Du(o){function u(F){return od(F,o)}Ya!==null&&od(Ya,o),Wa!==null&&od(Wa,o),Qa!==null&&od(Qa,o),xc.forEach(u),Ac.forEach(u);for(var c=0;c<$a.length;c++){var d=$a[c];d.blockedOn===o&&(d.blockedOn=null)}for(;0<$a.length&&(c=$a[0],c.blockedOn===null);)j2(c),c.blockedOn===null&&$a.shift();if(c=(o.ownerDocument||o).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var v=c[d],y=c[d+1],A=v[vn]||null;if(typeof y=="function")A||G2(c);else if(A){var I=null;if(y&&y.hasAttribute("formAction")){if(v=y,A=y[vn]||null)I=A.formAction;else if(Gp(v)!==null)continue}else I=A.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),G2(c)}}}function q2(){function o(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function u(){v!==null&&(v(),v=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),v!==null&&(v(),v=null)}}}function Xp(o){this._internalRoot=o}ud.prototype.render=Xp.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var c=u.current,d=mr();V2(c,d,o,u,null,null)},ud.prototype.unmount=Xp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;V2(o.current,2,null,o,null,null),jh(),u[fi]=null}};function ud(o){this._internalRoot=o}ud.prototype.unstable_scheduleHydration=function(o){if(o){var u=jf();o={blockedOn:null,target:o,priority:u};for(var c=0;c<$a.length&&u!==0&&u<$a[c].priority;c++);$a.splice(c,0,o),c===0&&j2(o)}};var X2=e.version;if(X2!=="19.2.3")throw Error(n(527,X2,"19.2.3"));de.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var cC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{zr=ld.inject(cC),Sn=ld}catch{}}return Sc.createRoot=function(o,u){if(!i(o))throw Error(n(299));var c=!1,d="",v=Jy,y=e_,A=t_;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(d=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(y=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError)),u=P2(o,1,!1,null,null,c,d,null,v,y,A,q2),o[fi]=u.current,Cp(o),new Xp(u)},Sc.hydrateRoot=function(o,u,c){if(!i(o))throw Error(n(299));var d=!1,v="",y=Jy,A=e_,I=t_,F=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(A=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),u=P2(o,1,!0,u,c??null,d,v,F,y,A,I,q2),u.context=L2(null),c=u.current,d=mr(),d=Lo(d),v=Va(d),v.callback=null,Ba(c,v,d),c=d,u.current.lanes=c,Mo(u,c),Ci(u),o[fi]=u.current,Cp(o),new ud(u)},Sc.version="19.2.3",Sc}var nE;function EC(){if(nE)return Wp.exports;nE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wp.exports=_C(),Wp.exports}var xC=EC();const AC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),rE=r=>{const e=wC(r);return e.charAt(0).toUpperCase()+e.slice(1)},WA=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),TC=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var SC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const IC=_e.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...l},f)=>_e.createElement("svg",{ref:f,...SC,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:WA("lucide",i),...!a&&!TC(l)&&{"aria-hidden":"true"},...l},[...s.map(([h,p])=>_e.createElement(h,p)),...Array.isArray(a)?a:[a]]));const Ut=(r,e)=>{const t=_e.forwardRef(({className:n,...i},a)=>_e.createElement(IC,{ref:a,iconNode:e,className:WA(`lucide-${AC(rE(r))}`,`lucide-${r}`,n),...i}));return t.displayName=rE(r),t};const CC=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],bC=Ut("box",CC);const RC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],QA=Ut("circle-alert",RC);const DC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],OC=Ut("circle-check-big",DC);const NC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],MC=Ut("circle",NC);const PC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],LC=Ut("download",PC);const VC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],BC=Ut("eye-off",VC);const kC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FC=Ut("eye",kC);const UC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],zC=Ut("info",UC);const jC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mv=Ut("loader-circle",jC);const HC=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],GC=Ut("log-in",HC);const qC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$A=Ut("log-out",qC);const XC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],KC=Ut("mail",XC);const YC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],WC=Ut("moon",YC);const QC=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],iE=Ut("package",QC);const $C=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ZA=Ut("plus",$C);const ZC=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],aE=Ut("scan-barcode",ZC);const JC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oE=Ut("settings",JC);const e4=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sE=Ut("square-check-big",e4);const t4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],n4=Ut("sun",t4);const r4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],JA=Ut("trash-2",r4);const i4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],a4=Ut("user-plus",i4);const o4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ew=Ut("x",o4),s4=()=>{};var uE={};const tw=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},u4=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],s=r[t++],l=r[t++],f=((i&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(f>>10)),e[n++]=String.fromCharCode(56320+(f&1023))}else{const a=r[t++],s=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},nw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],s=i+1<r.length,l=s?r[i+1]:0,f=i+2<r.length,h=f?r[i+2]:0,p=a>>2,m=(a&3)<<4|l>>4;let _=(l&15)<<2|h>>6,E=h&63;f||(E=64,s||(_=64)),n.push(t[p],t[m],t[_],t[E])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(tw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):u4(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],l=i<r.length?t[r.charAt(i)]:0;++i;const h=i<r.length?t[r.charAt(i)]:64;++i;const m=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||l==null||h==null||m==null)throw new l4;const _=a<<2|l>>4;if(n.push(_),h!==64){const E=l<<4&240|h>>2;if(n.push(E),m!==64){const T=h<<6&192|m;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class l4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c4=function(r){const e=tw(r);return nw.encodeByteArray(e,!0)},jd=function(r){return c4(r).replace(/\./g,"")},rw=function(r){try{return nw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const f4=()=>iw().__FIREBASE_DEFAULTS__,h4=()=>{if(typeof process>"u"||typeof uE>"u")return;const r=uE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},d4=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&rw(r[1]);return e&&JSON.parse(e)},m1=()=>{try{return s4()||f4()||h4()||d4()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},aw=r=>m1()?.emulatorHosts?.[r],p4=r=>{const e=aw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},ow=()=>m1()?.config,sw=r=>m1()?.[`_${r}`];class g4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function hl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uw(r){return(await fetch(r,{credentials:"include"})).ok}function v4(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...r};return[jd(JSON.stringify(t)),jd(JSON.stringify(s)),""].join(".")}const qc={};function m4(){const r={prod:[],emulator:[]};for(const e of Object.keys(qc))qc[e]?r.emulator.push(e):r.prod.push(e);return r}function y4(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let lE=!1;function lw(r,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||qc[r]===e||qc[r]||lE)return;qc[r]=e;function t(_){return`__firebase__banner__${_}`}const n="__firebase__banner",a=m4().prod.length>0;function s(){const _=document.getElementById(n);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function f(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function h(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{lE=!0,s()},_}function p(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){const _=y4(n),E=t("text"),T=document.getElementById(E)||document.createElement("span"),S=t("learnmore"),D=document.getElementById(S)||document.createElement("a"),V=t("preprendIcon"),M=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const B=_.element;l(B),p(D,S);const H=h();f(M,V),B.append(M,T,D,H),document.body.appendChild(B)}a?(T.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function cw(){const r=m1()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x4(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function A4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w4(){const r=pn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fw(){return!cw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hw(){return!cw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dw(){try{return typeof indexedDB=="object"}catch{return!1}}function T4(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const S4="FirebaseError";class pa extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=S4,Object.setPrototypeOf(this,pa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_f.prototype.create)}}class _f{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?I4(a,n):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new pa(i,l,n)}}function I4(r,e){return r.replace(C4,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const C4=/\{\$([^}]+)}/g;function b4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Is(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],s=e[i];if(cE(a)&&cE(s)){if(!Is(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function cE(r){return r!==null&&typeof r=="object"}function Ef(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Pc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Lc(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function R4(r,e){const t=new D4(r,e);return t.subscribe.bind(t)}class D4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");O4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Jp),i.error===void 0&&(i.error=Jp),i.complete===void 0&&(i.complete=Jp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function O4(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Jp(){}function Tn(r){return r&&r._delegate?r._delegate:r}class Cs{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cs="[DEFAULT]";class N4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new g4;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P4(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&s.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:M4(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M4(r){return r===cs?void 0:r}function P4(r){return r.instantiationMode==="EAGER"}class L4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const V4={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},B4=Xe.INFO,k4={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},F4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=k4[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yv{constructor(e){this.name=e,this._logLevel=B4,this._logHandler=F4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const U4=(r,e)=>e.some(t=>r instanceof t);let fE,hE;function z4(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j4(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pw=new WeakMap,Ag=new WeakMap,gw=new WeakMap,eg=new WeakMap,_v=new WeakMap;function H4(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",s)},a=()=>{t(po(r.result)),i()},s=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&pw.set(t,r)}).catch(()=>{}),_v.set(e,r),e}function G4(r){if(Ag.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",s),r.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",s),r.addEventListener("abort",s)});Ag.set(r,e)}let wg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ag.get(r);if(e==="objectStoreNames")return r.objectStoreNames||gw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return po(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function q4(r){wg=r(wg)}function X4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(tg(this),e,...t);return gw.set(n,e.sort?e.sort():[e]),po(n)}:j4().includes(r)?function(...e){return r.apply(tg(this),e),po(pw.get(this))}:function(...e){return po(r.apply(tg(this),e))}}function K4(r){return typeof r=="function"?X4(r):(r instanceof IDBTransaction&&G4(r),U4(r,z4())?new Proxy(r,wg):r)}function po(r){if(r instanceof IDBRequest)return H4(r);if(eg.has(r))return eg.get(r);const e=K4(r);return e!==r&&(eg.set(r,e),_v.set(e,r)),e}const tg=r=>_v.get(r);function Y4(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(r,e),l=po(s);return n&&s.addEventListener("upgradeneeded",f=>{n(po(s.result),f.oldVersion,f.newVersion,po(s.transaction),f)}),t&&s.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),l.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const W4=["get","getKey","getAll","getAllKeys","count"],Q4=["put","add","delete","clear"],ng=new Map;function dE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=Q4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||W4.includes(t)))return;const a=async function(s,...l){const f=this.transaction(s,i?"readwrite":"readonly");let h=f.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&f.done]))[0]};return ng.set(e,a),a}q4(r=>({...r,get:(e,t,n)=>dE(e,t)||r.get(e,t,n),has:(e,t)=>!!dE(e,t)||r.has(e,t)}));class $4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Z4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Z4(r){return r.getComponent()?.type==="VERSION"}const Tg="@firebase/app",pE="0.14.6";const la=new yv("@firebase/app"),J4="@firebase/app-compat",eb="@firebase/analytics-compat",tb="@firebase/analytics",nb="@firebase/app-check-compat",rb="@firebase/app-check",ib="@firebase/auth",ab="@firebase/auth-compat",ob="@firebase/database",sb="@firebase/data-connect",ub="@firebase/database-compat",lb="@firebase/functions",cb="@firebase/functions-compat",fb="@firebase/installations",hb="@firebase/installations-compat",db="@firebase/messaging",pb="@firebase/messaging-compat",gb="@firebase/performance",vb="@firebase/performance-compat",mb="@firebase/remote-config",yb="@firebase/remote-config-compat",_b="@firebase/storage",Eb="@firebase/storage-compat",xb="@firebase/firestore",Ab="@firebase/ai",wb="@firebase/firestore-compat",Tb="firebase",Sb="12.6.0";const Sg="[DEFAULT]",Ib={[Tg]:"fire-core",[J4]:"fire-core-compat",[tb]:"fire-analytics",[eb]:"fire-analytics-compat",[rb]:"fire-app-check",[nb]:"fire-app-check-compat",[ib]:"fire-auth",[ab]:"fire-auth-compat",[ob]:"fire-rtdb",[sb]:"fire-data-connect",[ub]:"fire-rtdb-compat",[lb]:"fire-fn",[cb]:"fire-fn-compat",[fb]:"fire-iid",[hb]:"fire-iid-compat",[db]:"fire-fcm",[pb]:"fire-fcm-compat",[gb]:"fire-perf",[vb]:"fire-perf-compat",[mb]:"fire-rc",[yb]:"fire-rc-compat",[_b]:"fire-gcs",[Eb]:"fire-gcs-compat",[xb]:"fire-fst",[wb]:"fire-fst-compat",[Ab]:"fire-vertex","fire-js":"fire-js",[Tb]:"fire-js-all"};const Hd=new Map,Cb=new Map,Ig=new Map;function gE(r,e){try{r.container.addComponent(e)}catch(t){la.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function $u(r){const e=r.name;if(Ig.has(e))return la.debug(`There were multiple attempts to register component ${e}.`),!1;Ig.set(e,r);for(const t of Hd.values())gE(t,r);for(const t of Cb.values())gE(t,r);return!0}function Ev(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function _r(r){return r==null?!1:r.settings!==void 0}const bb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},go=new _f("app","Firebase",bb);class Rb{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw go.create("app-deleted",{appName:this._name})}}const dl=Sb;function vw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Sg,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw go.create("bad-app-name",{appName:String(i)});if(t||(t=ow()),!t)throw go.create("no-options");const a=Hd.get(i);if(a){if(Is(t,a.options)&&Is(n,a.config))return a;throw go.create("duplicate-app",{appName:i})}const s=new L4(i);for(const f of Ig.values())s.addComponent(f);const l=new Rb(t,n,s);return Hd.set(i,l),l}function mw(r=Sg){const e=Hd.get(r);if(!e&&r===Sg&&ow())return vw();if(!e)throw go.create("no-app",{appName:r});return e}function vo(r,e,t){let n=Ib[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),la.warn(s.join(" "));return}$u(new Cs(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const Db="firebase-heartbeat-database",Ob=1,tf="firebase-heartbeat-store";let rg=null;function yw(){return rg||(rg=Y4(Db,Ob,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tf)}catch(t){console.warn(t)}}}}).catch(r=>{throw go.create("idb-open",{originalErrorMessage:r.message})})),rg}async function Nb(r){try{const t=(await yw()).transaction(tf),n=await t.objectStore(tf).get(_w(r));return await t.done,n}catch(e){if(e instanceof pa)la.warn(e.message);else{const t=go.create("idb-get",{originalErrorMessage:e?.message});la.warn(t.message)}}}async function vE(r,e){try{const n=(await yw()).transaction(tf,"readwrite");await n.objectStore(tf).put(e,_w(r)),await n.done}catch(t){if(t instanceof pa)la.warn(t.message);else{const n=go.create("idb-set",{originalErrorMessage:t?.message});la.warn(n.message)}}}function _w(r){return`${r.name}!${r.options.appId}`}const Mb=1024,Pb=30;class Lb{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bb(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=mE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>Pb){const i=kb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){la.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mE(),{heartbeatsToSend:t,unsentEntries:n}=Vb(this._heartbeatsCache.heartbeats),i=jd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return la.warn(e),""}}}function mE(){return new Date().toISOString().substring(0,10)}function Vb(r,e=Mb){const t=[];let n=r.slice();for(const i of r){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),yE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yE(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Bb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dw()?T4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Nb(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function yE(r){return jd(JSON.stringify({version:2,heartbeats:r})).length}function kb(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function Fb(r){$u(new Cs("platform-logger",e=>new $4(e),"PRIVATE")),$u(new Cs("heartbeat",e=>new Lb(e),"PRIVATE")),vo(Tg,pE,r),vo(Tg,pE,"esm2020"),vo("fire-js","")}Fb("");var Ub="firebase",zb="12.7.0";vo(Ub,zb,"app");var _E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mo,Ew;(function(){var r;function e(C,b){function N(){}N.prototype=b.prototype,C.F=b.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(P,k,U){for(var L=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)L[Pe-2]=arguments[Pe];return b.prototype[k].apply(P,L)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,b,N){N||(N=0);const P=Array(16);if(typeof b=="string")for(var k=0;k<16;++k)P[k]=b.charCodeAt(N++)|b.charCodeAt(N++)<<8|b.charCodeAt(N++)<<16|b.charCodeAt(N++)<<24;else for(k=0;k<16;++k)P[k]=b[N++]|b[N++]<<8|b[N++]<<16|b[N++]<<24;b=C.g[0],N=C.g[1],k=C.g[2];let U=C.g[3],L;L=b+(U^N&(k^U))+P[0]+3614090360&4294967295,b=N+(L<<7&4294967295|L>>>25),L=U+(k^b&(N^k))+P[1]+3905402710&4294967295,U=b+(L<<12&4294967295|L>>>20),L=k+(N^U&(b^N))+P[2]+606105819&4294967295,k=U+(L<<17&4294967295|L>>>15),L=N+(b^k&(U^b))+P[3]+3250441966&4294967295,N=k+(L<<22&4294967295|L>>>10),L=b+(U^N&(k^U))+P[4]+4118548399&4294967295,b=N+(L<<7&4294967295|L>>>25),L=U+(k^b&(N^k))+P[5]+1200080426&4294967295,U=b+(L<<12&4294967295|L>>>20),L=k+(N^U&(b^N))+P[6]+2821735955&4294967295,k=U+(L<<17&4294967295|L>>>15),L=N+(b^k&(U^b))+P[7]+4249261313&4294967295,N=k+(L<<22&4294967295|L>>>10),L=b+(U^N&(k^U))+P[8]+1770035416&4294967295,b=N+(L<<7&4294967295|L>>>25),L=U+(k^b&(N^k))+P[9]+2336552879&4294967295,U=b+(L<<12&4294967295|L>>>20),L=k+(N^U&(b^N))+P[10]+4294925233&4294967295,k=U+(L<<17&4294967295|L>>>15),L=N+(b^k&(U^b))+P[11]+2304563134&4294967295,N=k+(L<<22&4294967295|L>>>10),L=b+(U^N&(k^U))+P[12]+1804603682&4294967295,b=N+(L<<7&4294967295|L>>>25),L=U+(k^b&(N^k))+P[13]+4254626195&4294967295,U=b+(L<<12&4294967295|L>>>20),L=k+(N^U&(b^N))+P[14]+2792965006&4294967295,k=U+(L<<17&4294967295|L>>>15),L=N+(b^k&(U^b))+P[15]+1236535329&4294967295,N=k+(L<<22&4294967295|L>>>10),L=b+(k^U&(N^k))+P[1]+4129170786&4294967295,b=N+(L<<5&4294967295|L>>>27),L=U+(N^k&(b^N))+P[6]+3225465664&4294967295,U=b+(L<<9&4294967295|L>>>23),L=k+(b^N&(U^b))+P[11]+643717713&4294967295,k=U+(L<<14&4294967295|L>>>18),L=N+(U^b&(k^U))+P[0]+3921069994&4294967295,N=k+(L<<20&4294967295|L>>>12),L=b+(k^U&(N^k))+P[5]+3593408605&4294967295,b=N+(L<<5&4294967295|L>>>27),L=U+(N^k&(b^N))+P[10]+38016083&4294967295,U=b+(L<<9&4294967295|L>>>23),L=k+(b^N&(U^b))+P[15]+3634488961&4294967295,k=U+(L<<14&4294967295|L>>>18),L=N+(U^b&(k^U))+P[4]+3889429448&4294967295,N=k+(L<<20&4294967295|L>>>12),L=b+(k^U&(N^k))+P[9]+568446438&4294967295,b=N+(L<<5&4294967295|L>>>27),L=U+(N^k&(b^N))+P[14]+3275163606&4294967295,U=b+(L<<9&4294967295|L>>>23),L=k+(b^N&(U^b))+P[3]+4107603335&4294967295,k=U+(L<<14&4294967295|L>>>18),L=N+(U^b&(k^U))+P[8]+1163531501&4294967295,N=k+(L<<20&4294967295|L>>>12),L=b+(k^U&(N^k))+P[13]+2850285829&4294967295,b=N+(L<<5&4294967295|L>>>27),L=U+(N^k&(b^N))+P[2]+4243563512&4294967295,U=b+(L<<9&4294967295|L>>>23),L=k+(b^N&(U^b))+P[7]+1735328473&4294967295,k=U+(L<<14&4294967295|L>>>18),L=N+(U^b&(k^U))+P[12]+2368359562&4294967295,N=k+(L<<20&4294967295|L>>>12),L=b+(N^k^U)+P[5]+4294588738&4294967295,b=N+(L<<4&4294967295|L>>>28),L=U+(b^N^k)+P[8]+2272392833&4294967295,U=b+(L<<11&4294967295|L>>>21),L=k+(U^b^N)+P[11]+1839030562&4294967295,k=U+(L<<16&4294967295|L>>>16),L=N+(k^U^b)+P[14]+4259657740&4294967295,N=k+(L<<23&4294967295|L>>>9),L=b+(N^k^U)+P[1]+2763975236&4294967295,b=N+(L<<4&4294967295|L>>>28),L=U+(b^N^k)+P[4]+1272893353&4294967295,U=b+(L<<11&4294967295|L>>>21),L=k+(U^b^N)+P[7]+4139469664&4294967295,k=U+(L<<16&4294967295|L>>>16),L=N+(k^U^b)+P[10]+3200236656&4294967295,N=k+(L<<23&4294967295|L>>>9),L=b+(N^k^U)+P[13]+681279174&4294967295,b=N+(L<<4&4294967295|L>>>28),L=U+(b^N^k)+P[0]+3936430074&4294967295,U=b+(L<<11&4294967295|L>>>21),L=k+(U^b^N)+P[3]+3572445317&4294967295,k=U+(L<<16&4294967295|L>>>16),L=N+(k^U^b)+P[6]+76029189&4294967295,N=k+(L<<23&4294967295|L>>>9),L=b+(N^k^U)+P[9]+3654602809&4294967295,b=N+(L<<4&4294967295|L>>>28),L=U+(b^N^k)+P[12]+3873151461&4294967295,U=b+(L<<11&4294967295|L>>>21),L=k+(U^b^N)+P[15]+530742520&4294967295,k=U+(L<<16&4294967295|L>>>16),L=N+(k^U^b)+P[2]+3299628645&4294967295,N=k+(L<<23&4294967295|L>>>9),L=b+(k^(N|~U))+P[0]+4096336452&4294967295,b=N+(L<<6&4294967295|L>>>26),L=U+(N^(b|~k))+P[7]+1126891415&4294967295,U=b+(L<<10&4294967295|L>>>22),L=k+(b^(U|~N))+P[14]+2878612391&4294967295,k=U+(L<<15&4294967295|L>>>17),L=N+(U^(k|~b))+P[5]+4237533241&4294967295,N=k+(L<<21&4294967295|L>>>11),L=b+(k^(N|~U))+P[12]+1700485571&4294967295,b=N+(L<<6&4294967295|L>>>26),L=U+(N^(b|~k))+P[3]+2399980690&4294967295,U=b+(L<<10&4294967295|L>>>22),L=k+(b^(U|~N))+P[10]+4293915773&4294967295,k=U+(L<<15&4294967295|L>>>17),L=N+(U^(k|~b))+P[1]+2240044497&4294967295,N=k+(L<<21&4294967295|L>>>11),L=b+(k^(N|~U))+P[8]+1873313359&4294967295,b=N+(L<<6&4294967295|L>>>26),L=U+(N^(b|~k))+P[15]+4264355552&4294967295,U=b+(L<<10&4294967295|L>>>22),L=k+(b^(U|~N))+P[6]+2734768916&4294967295,k=U+(L<<15&4294967295|L>>>17),L=N+(U^(k|~b))+P[13]+1309151649&4294967295,N=k+(L<<21&4294967295|L>>>11),L=b+(k^(N|~U))+P[4]+4149444226&4294967295,b=N+(L<<6&4294967295|L>>>26),L=U+(N^(b|~k))+P[11]+3174756917&4294967295,U=b+(L<<10&4294967295|L>>>22),L=k+(b^(U|~N))+P[2]+718787259&4294967295,k=U+(L<<15&4294967295|L>>>17),L=N+(U^(k|~b))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+b&4294967295,C.g[1]=C.g[1]+(k+(L<<21&4294967295|L>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+U&4294967295}n.prototype.v=function(C,b){b===void 0&&(b=C.length);const N=b-this.blockSize,P=this.C;let k=this.h,U=0;for(;U<b;){if(k==0)for(;U<=N;)i(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<b;)if(P[k++]=C.charCodeAt(U++),k==this.blockSize){i(this,P),k=0;break}}else for(;U<b;)if(P[k++]=C[U++],k==this.blockSize){i(this,P),k=0;break}}this.h=k,this.o+=b},n.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var b=1;b<C.length-8;++b)C[b]=0;b=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=b&255,b/=256;for(this.v(C),C=Array(16),b=0,N=0;N<4;++N)for(let P=0;P<32;P+=8)C[b++]=this.g[N]>>>P&255;return C};function a(C,b){var N=l;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=b(C)}function s(C,b){this.h=b;const N=[];let P=!0;for(let k=C.length-1;k>=0;k--){const U=C[k]|0;P&&U==b||(N[k]=U,P=!1)}this.g=N}var l={};function f(C){return-128<=C&&C<128?a(C,function(b){return new s([b|0],b<0?-1:0)}):new s([C|0],C<0?-1:0)}function h(C){if(isNaN(C)||!isFinite(C))return m;if(C<0)return D(h(-C));const b=[];let N=1;for(let P=0;C>=N;P++)b[P]=C/N|0,N*=4294967296;return new s(b,0)}function p(C,b){if(C.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(C.charAt(0)=="-")return D(p(C.substring(1),b));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(b,8));let P=m;for(let U=0;U<C.length;U+=8){var k=Math.min(8,C.length-U);const L=parseInt(C.substring(U,U+k),b);k<8?(k=h(Math.pow(b,k)),P=P.j(k).add(h(L))):(P=P.j(N),P=P.add(h(L)))}return P}var m=f(0),_=f(1),E=f(16777216);r=s.prototype,r.m=function(){if(S(this))return-D(this).m();let C=0,b=1;for(let N=0;N<this.g.length;N++){const P=this.i(N);C+=(P>=0?P:4294967296+P)*b,b*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(S(this))return"-"+D(this).toString(C);const b=h(Math.pow(C,6));var N=this;let P="";for(;;){const k=H(N,b).g;N=V(N,k.j(b));let U=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=k,T(N))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(let b=0;b<C.g.length;b++)if(C.g[b]!=0)return!1;return!0}function S(C){return C.h==-1}r.l=function(C){return C=V(this,C),S(C)?-1:T(C)?0:1};function D(C){const b=C.g.length,N=[];for(let P=0;P<b;P++)N[P]=~C.g[P];return new s(N,~C.h).add(_)}r.abs=function(){return S(this)?D(this):this},r.add=function(C){const b=Math.max(this.g.length,C.g.length),N=[];let P=0;for(let k=0;k<=b;k++){let U=P+(this.i(k)&65535)+(C.i(k)&65535),L=(U>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);P=L>>>16,U&=65535,L&=65535,N[k]=L<<16|U}return new s(N,N[N.length-1]&-2147483648?-1:0)};function V(C,b){return C.add(D(b))}r.j=function(C){if(T(this)||T(C))return m;if(S(this))return S(C)?D(this).j(D(C)):D(D(this).j(C));if(S(C))return D(this.j(D(C)));if(this.l(E)<0&&C.l(E)<0)return h(this.m()*C.m());const b=this.g.length+C.g.length,N=[];for(var P=0;P<2*b;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<C.g.length;k++){const U=this.i(P)>>>16,L=this.i(P)&65535,Pe=C.i(k)>>>16,yt=C.i(k)&65535;N[2*P+2*k]+=L*yt,M(N,2*P+2*k),N[2*P+2*k+1]+=U*yt,M(N,2*P+2*k+1),N[2*P+2*k+1]+=L*Pe,M(N,2*P+2*k+1),N[2*P+2*k+2]+=U*Pe,M(N,2*P+2*k+2)}for(C=0;C<b;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=b;C<2*b;C++)N[C]=0;return new s(N,0)};function M(C,b){for(;(C[b]&65535)!=C[b];)C[b+1]+=C[b]>>>16,C[b]&=65535,b++}function B(C,b){this.g=C,this.h=b}function H(C,b){if(T(b))throw Error("division by zero");if(T(C))return new B(m,m);if(S(C))return b=H(D(C),b),new B(D(b.g),D(b.h));if(S(b))return b=H(C,D(b)),new B(D(b.g),b.h);if(C.g.length>30){if(S(C)||S(b))throw Error("slowDivide_ only works with positive integers.");for(var N=_,P=b;P.l(C)<=0;)N=$(N),P=$(P);var k=J(N,1),U=J(P,1);for(P=J(P,2),N=J(N,2);!T(P);){var L=U.add(P);L.l(C)<=0&&(k=k.add(N),U=L),P=J(P,1),N=J(N,1)}return b=V(C,k.j(b)),new B(k,b)}for(k=m;C.l(b)>=0;){for(N=Math.max(1,Math.floor(C.m()/b.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=h(N),L=U.j(b);S(L)||L.l(C)>0;)N-=P,U=h(N),L=U.j(b);T(U)&&(U=_),k=k.add(U),C=V(C,L)}return new B(k,C)}r.B=function(C){return H(this,C).h},r.and=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)&C.i(P);return new s(N,this.h&C.h)},r.or=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)|C.i(P);return new s(N,this.h|C.h)},r.xor=function(C){const b=Math.max(this.g.length,C.g.length),N=[];for(let P=0;P<b;P++)N[P]=this.i(P)^C.i(P);return new s(N,this.h^C.h)};function $(C){const b=C.g.length+1,N=[];for(let P=0;P<b;P++)N[P]=C.i(P)<<1|C.i(P-1)>>>31;return new s(N,C.h)}function J(C,b){const N=b>>5;b%=32;const P=C.g.length-N,k=[];for(let U=0;U<P;U++)k[U]=b>0?C.i(U+N)>>>b|C.i(U+N+1)<<32-b:C.i(U+N);return new s(k,C.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Ew=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,mo=s}).apply(typeof _E<"u"?_E:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xw,Vc,Aw,wd,Cg,ww,Tw,Sw;(function(){var r,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var x=0;x<g.length;++x){var w=g[x];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var n=t(this);function i(g,x){if(x)e:{var w=n;g=g.split(".");for(var R=0;R<g.length-1;R++){var K=g[R];if(!(K in w))break e;w=w[K]}g=g[g.length-1],R=w[g],x=x(R),x!=R&&x!=null&&e(w,g,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(x){var w=[],R;for(R in x)Object.prototype.hasOwnProperty.call(x,R)&&w.push([R,x[R]]);return w}});var a=a||{},s=this||self;function l(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function f(g,x,w){return g.call.apply(g.bind,arguments)}function h(g,x,w){return h=f,h.apply(null,arguments)}function p(g,x){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),g.apply(this,R)}}function m(g,x){function w(){}w.prototype=x.prototype,g.Z=x.prototype,g.prototype=new w,g.prototype.constructor=g,g.Ob=function(R,K,ee){for(var ce=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)ce[Le-2]=arguments[Le];return x.prototype[K].apply(R,ce)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const x=g.length;if(x>0){const w=Array(x);for(let R=0;R<x;R++)w[R]=g[R];return w}return[]}function T(g,x){for(let R=1;R<arguments.length;R++){const K=arguments[R];var w=typeof K;if(w=w!="object"?w:K?Array.isArray(K)?"array":w:"null",w=="array"||w=="object"&&typeof K.length=="number"){w=g.length||0;const ee=K.length||0;g.length=w+ee;for(let ce=0;ce<ee;ce++)g[w+ce]=K[ce]}else g.push(K)}}class S{constructor(x,w){this.i=x,this.j=w,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function D(g){s.setTimeout(()=>{throw g},0)}function V(){var g=C;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class M{constructor(){this.h=this.g=null}add(x,w){const R=B.get();R.set(x,w),this.h?this.h.next=R:this.g=R,this.h=R}}var B=new S(()=>new H,g=>g.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,w){this.h=x,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let $,J=!1,C=new M,b=()=>{const g=Promise.resolve(void 0);$=()=>{g.then(N)}};function N(){for(var g;g=V();){try{g.h.call(g.g)}catch(w){D(w)}var x=B;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}J=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const w=()=>{};s.addEventListener("test",w,x),s.removeEventListener("test",w,x)}catch{}return g})();function L(g){return/^[\s\xa0]*$/.test(g)}function Pe(g,x){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}m(Pe,k),Pe.prototype.init=function(g,x){const w=this.type=g.type,R=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(w=="mouseover"?x=g.fromElement:w=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),ne=0;function de(g,x,w,R,K){this.listener=g,this.proxy=null,this.src=x,this.type=w,this.capture=!!R,this.ha=K,this.key=++ne,this.da=this.fa=!1}function we(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ze(g,x,w){for(const R in g)x.call(w,g[R],R,g)}function lt(g,x){for(const w in g)x.call(void 0,g[w],w,g)}function j(g){const x={};for(const w in g)x[w]=g[w];return x}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(g,x){let w,R;for(let K=1;K<arguments.length;K++){R=arguments[K];for(w in R)g[w]=R[w];for(let ee=0;ee<ue.length;ee++)w=ue[ee],Object.prototype.hasOwnProperty.call(R,w)&&(g[w]=R[w])}}function ve(g){this.src=g,this.g={},this.h=0}ve.prototype.add=function(g,x,w,R,K){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const ce=Be(g,x,R,K);return ce>-1?(x=g[ce],w||(x.fa=!1)):(x=new de(x,this.src,ee,!!R,K),x.fa=w,g.push(x)),x};function De(g,x){const w=x.type;if(w in g.g){var R=g.g[w],K=Array.prototype.indexOf.call(R,x,void 0),ee;(ee=K>=0)&&Array.prototype.splice.call(R,K,1),ee&&(we(x),g.g[w].length==0&&(delete g.g[w],g.h--))}}function Be(g,x,w,R){for(let K=0;K<g.length;++K){const ee=g[K];if(!ee.da&&ee.listener==x&&ee.capture==!!w&&ee.ha==R)return K}return-1}var We="closure_lm_"+(Math.random()*1e6|0),an={};function Dt(g,x,w,R,K){if(Array.isArray(x)){for(let ee=0;ee<x.length;ee++)Dt(g,x[ee],w,R,K);return null}return w=Al(w),g&&g[yt]?g.J(x,w,l(R)?!!R.capture:!1,K):Ro(g,x,w,!1,R,K)}function Ro(g,x,w,R,K,ee){if(!x)throw Error("Invalid event type");const ce=l(K)?!!K.capture:!!K;let Le=Do(g);if(Le||(g[We]=Le=new ve(g)),w=Le.add(x,w,R,ce,ee),w.proxy)return w;if(R=zs(),w.proxy=R,R.src=g,R.listener=w,g.addEventListener)U||(K=ce),K===void 0&&(K=!1),g.addEventListener(x.toString(),R,K);else if(g.attachEvent)g.attachEvent(oi(x.toString()),R);else if(g.addListener&&g.removeListener)g.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function zs(){function g(w){return x.call(g.src,g.listener,w)}const x=El;return g}function js(g,x,w,R,K){if(Array.isArray(x))for(var ee=0;ee<x.length;ee++)js(g,x[ee],w,R,K);else R=l(R)?!!R.capture:!!R,w=Al(w),g&&g[yt]?(g=g.i,ee=String(x).toString(),ee in g.g&&(x=g.g[ee],w=Be(x,w,R,K),w>-1&&(we(x[w]),Array.prototype.splice.call(x,w,1),x.length==0&&(delete g.g[ee],g.h--)))):g&&(g=Do(g))&&(x=g.g[x.toString()],g=-1,x&&(g=Be(x,w,R,K)),(w=g>-1?x[g]:null)&&Hs(w))}function Hs(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[yt])De(x.i,g);else{var w=g.type,R=g.proxy;x.removeEventListener?x.removeEventListener(w,R,g.capture):x.detachEvent?x.detachEvent(oi(w),R):x.addListener&&x.removeListener&&x.removeListener(R),(w=Do(x))?(De(w,g),w.h==0&&(w.src=null,x[We]=null)):we(g)}}}function oi(g){return g in an?an[g]:an[g]="on"+g}function El(g,x){if(g.da)g=!0;else{x=new Pe(x,this);const w=g.listener,R=g.ha||g.src;g.fa&&Hs(g),g=w.call(R,x)}return g}function Do(g){return g=g[We],g instanceof ve?g:null}var xl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Al(g){return typeof g=="function"?g:(g[xl]||(g[xl]=function(x){return g.handleEvent(x)}),g[xl])}function qt(){P.call(this),this.i=new ve(this),this.M=this,this.G=null}m(qt,P),qt.prototype[yt]=!0,qt.prototype.removeEventListener=function(g,x,w,R){js(this,g,x,w,R)};function on(g,x){var w,R=g.G;if(R)for(w=[];R;R=R.G)w.push(R);if(g=g.M,R=x.type||x,typeof x=="string")x=new k(x,g);else if(x instanceof k)x.target=x.target||g;else{var K=x;x=new k(R,g),ge(x,K)}K=!0;let ee,ce;if(w)for(ce=w.length-1;ce>=0;ce--)ee=x.g=w[ce],K=Ea(ee,R,!0,x)&&K;if(ee=x.g=g,K=Ea(ee,R,!0,x)&&K,K=Ea(ee,R,!1,x)&&K,w)for(ce=0;ce<w.length;ce++)ee=x.g=w[ce],K=Ea(ee,R,!1,x)&&K}qt.prototype.N=function(){if(qt.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const w=g.g[x];for(let R=0;R<w.length;R++)we(w[R]);delete g.g[x],g.h--}}this.G=null},qt.prototype.J=function(g,x,w,R){return this.i.add(String(g),x,!1,w,R)},qt.prototype.K=function(g,x,w,R){return this.i.add(String(g),x,!0,w,R)};function Ea(g,x,w,R){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let K=!0;for(let ee=0;ee<x.length;++ee){const ce=x[ee];if(ce&&!ce.da&&ce.capture==w){const Le=ce.listener,jt=ce.ha||ce.src;ce.fa&&De(g.i,ce),K=Le.call(jt,R)!==!1&&K}}return K&&!R.defaultPrevented}function W1(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:s.setTimeout(g,x||0)}function Lf(g){g.g=W1(()=>{g.g=null,g.i&&(g.i=!1,Lf(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class Hn extends P{constructor(x,w){super(),this.m=x,this.l=w,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Lf(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oo(g){P.call(this),this.h=g,this.g={}}m(Oo,P);var wl=[];function Tl(g){Ze(g.g,function(x,w){this.g.hasOwnProperty(w)&&Hs(x)},g),g.g={}}Oo.prototype.N=function(){Oo.Z.N.call(this),Tl(this)},Oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xa=s.JSON.stringify,Q1=s.JSON.parse,Vf=class{stringify(g){return s.JSON.stringify(g,void 0)}parse(g){return s.JSON.parse(g,void 0)}};function Bf(){}function kf(){}var zr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){k.call(this,"d")}m(Sn,k);function Ar(){k.call(this,"c")}m(Ar,k);var zt={},Ff=null;function Gs(){return Ff=Ff||new qt}zt.Ia="serverreachability";function Uf(g){k.call(this,zt.Ia,g)}m(Uf,k);function si(g){const x=Gs();on(x,new Uf(x))}zt.STAT_EVENT="statevent";function No(g,x){k.call(this,zt.STAT_EVENT,g),this.stat=x}m(No,k);function Xt(g){const x=Gs();on(x,new No(x,g))}zt.Ja="timingevent";function ui(g,x){k.call(this,zt.Ja,g),this.size=x}m(ui,k);function li(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){g()},x)}function jr(){this.g=!0}jr.prototype.ua=function(){this.g=!1};function $1(g,x,w,R,K,ee){g.info(function(){if(g.g)if(ee){var ce="",Le=ee.split("&");for(let rt=0;rt<Le.length;rt++){var jt=Le[rt].split("=");if(jt.length>1){const Ot=jt[0];jt=jt[1];const Ir=Ot.split("_");ce=Ir.length>=2&&Ir[1]=="type"?ce+(Ot+"="+jt+"&"):ce+(Ot+"=redacted&")}}}else ce=null;else ce=ee;return"XMLHTTP REQ ("+R+") [attempt "+K+"]: "+x+`
`+w+`
`+ce})}function zf(g,x,w,R,K,ee,ce){g.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+K+"]: "+x+`
`+w+`
`+ee+" "+ce})}function ci(g,x,w,R){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+Z1(g,w)+(R?" "+R:"")})}function Mo(g,x){g.info(function(){return"TIMEOUT: "+x})}jr.prototype.info=function(){};function Z1(g,x){if(!g.g)return x;if(!x)return null;try{const ee=JSON.parse(x);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var w=ee[g];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var K=R[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ce=1;ce<R.length;ce++)R[ce]=""}}}}return xa(ee)}catch{return x}}var Po={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Il;function Lo(){}m(Lo,Bf),Lo.prototype.g=function(){return new XMLHttpRequest},Il=new Lo;function Ui(g){return encodeURIComponent(String(g))}function jf(g){var x=1;g=g.split(":");const w=[];for(;x>0&&g.length;)w.push(g.shift()),x--;return g.length&&w.push(g.join(":")),w}function Hr(g,x,w,R){this.j=g,this.i=x,this.l=w,this.S=R||1,this.V=new Oo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gr}function Gr(){this.i=null,this.g="",this.h=!1}var Kt={},vn={};function fi(g,x,w){g.M=1,g.A=Vo(Wt(x)),g.u=w,g.R=!0,qs(g,null)}function qs(g,x){g.F=Date.now(),hi(g),g.B=Wt(g.A);var w=g.B,R=g.S;Array.isArray(R)||(R=[String(R)]),Ws(w.i,"t",R),g.C=0,w=g.j.L,g.h=new Gr,g.g=rh(g.j,w?x:null,!g.u),g.P>0&&(g.O=new Hn(h(g.Y,g,g.g),g.P)),x=g.V,w=g.g,R=g.ba;var K="readystatechange";Array.isArray(K)||(K&&(wl[0]=K.toString()),K=wl);for(let ee=0;ee<K.length;ee++){const ce=Dt(w,K[ee],R||x.handleEvent,!1,x.h||x);if(!ce)break;x.g[ce.key]=ce}x=g.J?j(g.J):{},g.u?(g.v||(g.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,x)):(g.v="GET",g.g.ea(g.B,g.v,null,x)),si(),$1(g.i,g.v,g.B,g.l,g.S,g.u)}Hr.prototype.ba=function(g){g=g.target;const x=this.O;x&&Kr(g)==3?x.j():this.Y(g)},Hr.prototype.Y=function(g){try{if(g==this.g)e:{const Le=Kr(this.g),jt=this.g.ya(),rt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||In(this.g)))){this.K||Le!=4||jt==7||(jt==8||rt<=0?si(3):si(2)),di(this);var x=this.g.ca();this.X=x;var w=J1(this);if(this.o=x==200,zf(this.i,this.v,this.B,this.l,this.S,Le,x),this.o){if(this.U&&!this.L){t:{if(this.g){var R,K=this.g;if((R=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(R)){var ee=R;break t}}ee=null}if(g=ee)ci(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pi(this,g);else{this.o=!1,this.m=3,Xt(12),lr(this),wr(this);break e}}if(this.R){g=!0;let Ot;for(;!this.K&&this.C<w.length;)if(Ot=Gf(this,w),Ot==vn){Le==4&&(this.m=4,Xt(14),g=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Kt){this.m=4,Xt(15),ci(this.i,this.l,w,"[Invalid Chunk]"),g=!1;break}else ci(this.i,this.l,Ot,null),pi(this,Ot);if(Hf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||w.length!=0||this.h.h||(this.m=1,Xt(16),g=!1),this.o=this.o&&g,!g)ci(this.i,this.l,w,"[Invalid Chunked Response]"),lr(this),wr(this);else if(w.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),zl(ce),ce.P=!0,Xt(11))}}else ci(this.i,this.l,w,null),pi(this,w);Le==4&&lr(this),this.o&&!this.K&&(Le==4?Jf(this.j,this):(this.o=!1,hi(this)))}else ji(this.g),x==400&&w.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),lr(this),wr(this)}}}catch{}};function J1(g){if(!Hf(g))return g.g.la();const x=In(g.g);if(x==="")return"";let w="";const R=x.length,K=Kr(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return lr(g),wr(g),"";g.h.i=new s.TextDecoder}for(let ee=0;ee<R;ee++)g.h.h=!0,w+=g.h.i.decode(x[ee],{stream:!(K&&ee==R-1)});return x.length=0,g.h.g+=w,g.C=0,g.h.g}function Hf(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Gf(g,x){var w=g.C,R=x.indexOf(`
`,w);return R==-1?vn:(w=Number(x.substring(w,R)),isNaN(w)?Kt:(R+=1,R+w>x.length?vn:(x=x.slice(R,R+w),g.C=R+w,x)))}Hr.prototype.cancel=function(){this.K=!0,lr(this)};function hi(g){g.T=Date.now()+g.H,Xs(g,g.H)}function Xs(g,x){if(g.D!=null)throw Error("WatchDog timer not null");g.D=li(h(g.aa,g),x)}function di(g){g.D&&(s.clearTimeout(g.D),g.D=null)}Hr.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Mo(this.i,this.B),this.M!=2&&(si(),Xt(17)),lr(this),this.m=2,wr(this)):Xs(this,this.T-g)};function wr(g){g.j.I==0||g.K||Jf(g.j,g)}function lr(g){di(g);var x=g.O;x&&typeof x.dispose=="function"&&x.dispose(),g.O=null,Tl(g.V),g.g&&(x=g.g,g.g=null,x.abort(),x.dispose())}function pi(g,x){try{var w=g.j;if(w.I!=0&&(w.g==g||vi(w.h,g))){if(!g.L&&vi(w.h,g)&&w.I==3){try{var R=w.Ba.g.parse(x)}catch{R=null}if(Array.isArray(R)&&R.length==3){var K=R;if(K[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<g.F)eu(w),Ra(w);else break e;Ho(w),Xt(18)}}else w.xa=K[1],0<w.xa-w.K&&K[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=li(h(w.Va,w),6e3));gi(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ai(w,11)}else if((g.L||w.g==g)&&eu(w),!L(x))for(K=w.Ba.g.parse(x),x=0;x<K.length;x++){let rt=K[x];const Ot=rt[0];if(!(Ot<=w.K))if(w.K=Ot,rt=rt[1],w.I==2)if(rt[0]=="c"){w.M=rt[1],w.ba=rt[2];const Ir=rt[3];Ir!=null&&(w.ka=Ir,w.j.info("VER="+w.ka));const wi=rt[4];wi!=null&&(w.za=wi,w.j.info("SVER="+w.za));const Yr=rt[5];Yr!=null&&typeof Yr=="number"&&Yr>0&&(R=1.5*Yr,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const Wr=g.g;if(Wr){const Go=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var ee=R.h;ee.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Rl(ee,ee.h),ee.h=null))}if(R.G){const tu=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;tu&&(R.wa=tu,ct(R.J,R.G,tu))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-g.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var ce=g;if(R.na=nh(R,R.L?R.ba:null,R.W),ce.L){Dl(R.h,ce);var Le=ce,jt=R.O;jt&&(Le.H=jt),Le.D&&(di(Le),hi(Le)),R.g=ce}else $f(R);w.i.length>0&&xi(w)}else rt[0]!="stop"&&rt[0]!="close"||Ai(w,7);else w.I==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Ai(w,7):Fl(w):rt[0]!="noop"&&w.l&&w.l.qa(rt),w.A=0)}}si(4)}catch{}}var Yt=class{constructor(g,x){this.g=g,this.map=x}};function Cl(g){this.l=g||10,s.PerformanceNavigationTiming?(g=s.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function gi(g){return g.h?1:g.g?g.g.size:0}function vi(g,x){return g.h?g.h==x:g.g?g.g.has(x):!1}function Rl(g,x){g.g?g.g.add(x):g.h=x}function Dl(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}Cl.prototype.cancel=function(){if(this.i=Ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ol(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let x=g.i;for(const w of g.g.values())x=x.concat(w.G);return x}return E(g.i)}var qf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ks(g,x){if(g){g=g.split("&");for(let w=0;w<g.length;w++){const R=g[w].indexOf("=");let K,ee=null;R>=0?(K=g[w].substring(0,R),ee=g[w].substring(R+1)):K=g[w],x(K,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function cr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;g instanceof cr?(this.l=g.l,mn(this,g.j),this.o=g.o,this.g=g.g,Aa(this,g.u),this.h=g.h,Nl(this,Wf(g.i)),this.m=g.m):g&&(x=String(g).match(qf))?(this.l=!1,mn(this,x[1]||"",!0),this.o=mi(x[2]||""),this.g=mi(x[3]||"",!0),Aa(this,x[4]),this.h=mi(x[5]||"",!0),Nl(this,x[6]||"",!0),this.m=mi(x[7]||"")):(this.l=!1,this.i=new Ta(null,this.l))}cr.prototype.toString=function(){const g=[];var x=this.j;x&&g.push(Bo(x,Ys,!0),":");var w=this.g;return(w||x=="file")&&(g.push("//"),(x=this.o)&&g.push(Bo(x,Ys,!0),"@"),g.push(Ui(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&g.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&g.push("/"),g.push(Bo(w,w.charAt(0)=="/"?Ml:Xf,!0))),(w=this.i.toString())&&g.push("?",w),(w=this.m)&&g.push("#",Bo(w,Kf)),g.join("")},cr.prototype.resolve=function(g){const x=Wt(this);let w=!!g.j;w?mn(x,g.j):w=!!g.o,w?x.o=g.o:w=!!g.g,w?x.g=g.g:w=g.u!=null;var R=g.h;if(w)Aa(x,g.u);else if(w=!!g.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var K=x.h.lastIndexOf("/");K!=-1&&(R=x.h.slice(0,K+1)+R)}if(K=R,K==".."||K==".")R="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){R=K.lastIndexOf("/",0)==0,K=K.split("/");const ee=[];for(let ce=0;ce<K.length;){const Le=K[ce++];Le=="."?R&&ce==K.length&&ee.push(""):Le==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),R&&ce==K.length&&ee.push("")):(ee.push(Le),R=!0)}R=ee.join("/")}else R=K}return w?x.h=R:w=g.i.toString()!=="",w?Nl(x,Wf(g.i)):w=!!g.m,w&&(x.m=g.m),x};function Wt(g){return new cr(g)}function mn(g,x,w){g.j=w?mi(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function Aa(g,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);g.u=x}else g.u=null}function Nl(g,x,w){x instanceof Ta?(g.i=x,Qs(g.i,g.l)):(w||(x=Bo(x,wa)),g.i=new Ta(x,g.l))}function ct(g,x,w){g.i.set(x,w)}function Vo(g){return ct(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function mi(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Bo(g,x,w){return typeof g=="string"?(g=encodeURI(g).replace(x,Zn),w&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Zn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ys=/[#\/\?@]/g,Xf=/[#\?:]/g,Ml=/[#\?]/g,wa=/[#\?@]/g,Kf=/#/g;function Ta(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function Jn(g){g.g||(g.g=new Map,g.h=0,g.i&&Ks(g.i,function(x,w){g.add(decodeURIComponent(x.replace(/\+/g," ")),w)}))}r=Ta.prototype,r.add=function(g,x){Jn(this),this.i=null,g=Sa(this,g);let w=this.g.get(g);return w||this.g.set(g,w=[]),w.push(x),this.h+=1,this};function Yf(g,x){Jn(g),x=Sa(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function Pl(g,x){return Jn(g),x=Sa(g,x),g.g.has(x)}r.forEach=function(g,x){Jn(this),this.g.forEach(function(w,R){w.forEach(function(K){g.call(x,K,R,this)},this)},this)};function Ll(g,x){Jn(g);let w=[];if(typeof x=="string")Pl(g,x)&&(w=w.concat(g.g.get(Sa(g,x))));else for(g=Array.from(g.g.values()),x=0;x<g.length;x++)w=w.concat(g[x]);return w}r.set=function(g,x){return Jn(this),this.i=null,g=Sa(this,g),Pl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},r.get=function(g,x){return g?(g=Ll(this,g),g.length>0?String(g[0]):x):x};function Ws(g,x,w){Yf(g,x),w.length>0&&(g.i=null,g.g.set(Sa(g,x),E(w)),g.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(let R=0;R<x.length;R++){var w=x[R];const K=Ui(w);w=Ll(this,w);for(let ee=0;ee<w.length;ee++){let ce=K;w[ee]!==""&&(ce+="="+Ui(w[ee])),g.push(ce)}}return this.i=g.join("&")};function Wf(g){const x=new Ta;return x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),x}function Sa(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function Qs(g,x){x&&!g.j&&(Jn(g),g.i=null,g.g.forEach(function(w,R){const K=R.toLowerCase();R!=K&&(Yf(this,R),Ws(this,K,w))},g)),g.j=x}function qr(g,x){const w=new jr;if(s.Image){const R=new Image;R.onload=p(Tr,w,"TestLoadImage: loaded",!0,x,R),R.onerror=p(Tr,w,"TestLoadImage: error",!1,x,R),R.onabort=p(Tr,w,"TestLoadImage: abort",!1,x,R),R.ontimeout=p(Tr,w,"TestLoadImage: timeout",!1,x,R),s.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=g}else x(!1)}function Vl(g,x){const w=new jr,R=new AbortController,K=setTimeout(()=>{R.abort(),Tr(w,"TestPingServer: timeout",!1,x)},1e4);fetch(g,{signal:R.signal}).then(ee=>{clearTimeout(K),ee.ok?Tr(w,"TestPingServer: ok",!0,x):Tr(w,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(K),Tr(w,"TestPingServer: error",!1,x)})}function Tr(g,x,w,R,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),R(w)}catch{}}function Ia(){this.g=new Vf}function yi(g){this.i=g.Sb||null,this.h=g.ab||!1}m(yi,Bf),yi.prototype.g=function(){return new ko(this.i,this.h)};function ko(g,x){qt.call(this),this.H=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ko,qt),r=ko.prototype,r.open=function(g,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=x,this.readyState=1,Xr(this)},r.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(x.body=g),(this.H||s).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ca(this)),this.readyState=0},r.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$s(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function $s(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}r.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?Ca(this):Xr(this),this.readyState==3&&$s(this)}},r.Oa=function(g){this.g&&(this.response=this.responseText=g,Ca(this))},r.Na=function(g){this.g&&(this.response=g,Ca(this))},r.ga=function(){this.g&&Ca(this)};function Ca(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Xr(g)}r.setRequestHeader=function(g,x){this.A.append(g,x)},r.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var w=x.next();!w.done;)w=w.value,g.push(w[0]+": "+w[1]),w=x.next();return g.join(`\r
`)};function Xr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Sr(g){let x="";return Ze(g,function(w,R){x+=R,x+=":",x+=w,x+=`\r
`}),x}function Fo(g,x,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=Sr(w),typeof g=="string"?w!=null&&Ui(w):ct(g,x,w))}function _t(g){qt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(_t,qt);var _i=/^https?$/i,Bl=["POST","PUT"];r=_t.prototype,r.Fa=function(g){this.H=g},r.ea=function(g,x,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Il.g(),this.g.onreadystatechange=_(h(this.Ca,this));try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(ee){Uo(this,ee);return}if(g=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var K in R)w.set(K,R[K]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())w.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=s.FormData&&g instanceof s.FormData,!(Array.prototype.indexOf.call(Bl,x,void 0)>=0)||R||K||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,ce]of w)this.g.setRequestHeader(ee,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){Uo(this,ee)}};function Uo(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.o=5,kl(g),zi(g)}function kl(g){g.A||(g.A=!0,on(g,"complete"),on(g,"error"))}r.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,on(this,"complete"),on(this,"abort"),zi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),_t.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?zo(this):this.Xa())},r.Xa=function(){zo(this)};function zo(g){if(g.h&&typeof a<"u"){if(g.v&&Kr(g)==4)setTimeout(g.Ca.bind(g),0);else if(on(g,"readystatechange"),Kr(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var w;if(!(w=x)){var R;if(R=ee===0){let ce=String(g.D).match(qf)[1]||null;!ce&&s.self&&s.self.location&&(ce=s.self.location.protocol.slice(0,-1)),R=!_i.test(ce?ce.toLowerCase():"")}w=R}if(w)on(g,"complete"),on(g,"success");else{g.o=6;try{var K=Kr(g)>2?g.g.statusText:""}catch{K=""}g.l=K+" ["+g.ca()+"]",kl(g)}}finally{zi(g)}}}}function zi(g,x){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const w=g.g;g.g=null,x||on(g,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Kr(g){return g.g?g.g.readyState:0}r.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(g){if(this.g){var x=this.g.responseText;return g&&x.indexOf(g)==0&&(x=x.substring(g.length)),Q1(x)}};function In(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function ji(g){const x={};g=(g.g&&Kr(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<g.length;R++){if(L(g[R]))continue;var w=jf(g[R]);const K=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ee=x[K]||[];x[K]=ee,ee.push(w)}lt(x,function(R){return R.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(g,x,w){return w&&w.internalChannelParams&&w.internalChannelParams[g]||x}function ba(g){this.za=0,this.i=[],this.j=new jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,g),this.Za=Ei("retryDelaySeedMs",1e4,g),this.Ta=Ei("forwardChannelMaxRetries",2,g),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Cl(g&&g.concurrentRequestLimit),this.Ba=new Ia,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ba.prototype,r.ka=8,r.I=1,r.connect=function(g,x,w,R){Xt(0),this.W=g,this.H=x||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=nh(this,null,this.W),xi(this)};function Fl(g){if(Zs(g),g.I==3){var x=g.V++,w=Wt(g.J);if(ct(w,"SID",g.M),ct(w,"RID",x),ct(w,"TYPE","terminate"),jo(g,w),x=new Hr(g,g.j,x),x.M=2,x.A=Vo(Wt(w)),w=!1,s.navigator&&s.navigator.sendBeacon)try{w=s.navigator.sendBeacon(x.A.toString(),"")}catch{}!w&&s.Image&&(new Image().src=x.A,w=!0),w||(x.g=rh(x.j,null),x.g.ea(x.A)),x.F=Date.now(),hi(x)}th(g)}function Ra(g){g.g&&(zl(g),g.g.cancel(),g.g=null)}function Zs(g){Ra(g),g.v&&(s.clearTimeout(g.v),g.v=null),eu(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&s.clearTimeout(g.m),g.m=null)}function xi(g){if(!bl(g.h)&&!g.m){g.m=!0;var x=g.Ea;$||b(),J||($(),J=!0),C.add(x,g),g.D=0}}function Js(g,x){return gi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=x.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=li(h(g.Ea,g,x),eh(g,g.D)),g.D++,!0)}r.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const K=new Hr(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=j(ee),ge(ee,this.U)):ee=this.U),this.u!==null||this.R||(K.J=ee,ee=null),this.S)e:{for(var x=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(x+=R,x>4096){x=w;break e}if(x===4096||w===this.i.length-1){x=w+1;break e}}x=1e3}else x=1e3;x=Qf(this,K,x),w=Wt(this.J),ct(w,"RID",g),ct(w,"CVER",22),this.G&&ct(w,"X-HTTP-Session-Id",this.G),jo(this,w),ee&&(this.R?x="headers="+Ui(Sr(ee))+"&"+x:this.u&&Fo(w,this.u,ee)),Rl(this.h,K),this.Ra&&ct(w,"TYPE","init"),this.S?(ct(w,"$req",x),ct(w,"SID","null"),K.U=!0,fi(K,w,null)):fi(K,w,x),this.I=2}}else this.I==3&&(g?Ul(this,g):this.i.length==0||bl(this.h)||Ul(this))};function Ul(g,x){var w;x?w=x.l:w=g.V++;const R=Wt(g.J);ct(R,"SID",g.M),ct(R,"RID",w),ct(R,"AID",g.K),jo(g,R),g.u&&g.o&&Fo(R,g.u,g.o),w=new Hr(g,g.j,w,g.D+1),g.u===null&&(w.J=g.o),x&&(g.i=x.G.concat(g.i)),x=Qf(g,w,1e3),w.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Rl(g.h,w),fi(w,R,x)}function jo(g,x){g.H&&Ze(g.H,function(w,R){ct(x,R,w)}),g.l&&Ze({},function(w,R){ct(x,R,w)})}function Qf(g,x,w){w=Math.min(g.i.length,w);const R=g.l?h(g.l.Ka,g.l,g):null;e:{var K=g.i;let Le=-1;for(;;){const jt=["count="+w];Le==-1?w>0?(Le=K[0].g,jt.push("ofs="+Le)):Le=0:jt.push("ofs="+Le);let rt=!0;for(let Ot=0;Ot<w;Ot++){var ee=K[Ot].g;const Ir=K[Ot].map;if(ee-=Le,ee<0)Le=Math.max(0,K[Ot].g-100),rt=!1;else try{ee="req"+ee+"_"||"";try{var ce=Ir instanceof Map?Ir:Object.entries(Ir);for(const[wi,Yr]of ce){let Wr=Yr;l(Yr)&&(Wr=xa(Yr)),jt.push(ee+wi+"="+encodeURIComponent(Wr))}}catch(wi){throw jt.push(ee+"type="+encodeURIComponent("_badmap")),wi}}catch{R&&R(Ir)}}if(rt){ce=jt.join("&");break e}}ce=void 0}return g=g.i.splice(0,w),x.G=g,ce}function $f(g){if(!g.g&&!g.v){g.Y=1;var x=g.Da;$||b(),J||($(),J=!0),C.add(x,g),g.A=0}}function Ho(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=li(h(g.Da,g),eh(g,g.A)),g.A++,!0)}r.Da=function(){if(this.v=null,Zf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=li(h(this.Wa,this),g)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),Ra(this),Zf(this))};function zl(g){g.B!=null&&(s.clearTimeout(g.B),g.B=null)}function Zf(g){g.g=new Hr(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var x=Wt(g.na);ct(x,"RID","rpc"),ct(x,"SID",g.M),ct(x,"AID",g.K),ct(x,"CI",g.F?"0":"1"),!g.F&&g.ia&&ct(x,"TO",g.ia),ct(x,"TYPE","xmlhttp"),jo(g,x),g.u&&g.o&&Fo(x,g.u,g.o),g.O&&(g.g.H=g.O);var w=g.g;g=g.ba,w.M=1,w.A=Vo(Wt(x)),w.u=null,w.R=!0,qs(w,g)}r.Va=function(){this.C!=null&&(this.C=null,Ra(this),Ho(this),Xt(19))};function eu(g){g.C!=null&&(s.clearTimeout(g.C),g.C=null)}function Jf(g,x){var w=null;if(g.g==x){eu(g),zl(g),g.g=null;var R=2}else if(vi(g.h,x))w=x.G,Dl(g.h,x),R=1;else return;if(g.I!=0){if(x.o)if(R==1){w=x.u?x.u.length:0,x=Date.now()-x.F;var K=g.D;R=Gs(),on(R,new ui(R,w)),xi(g)}else $f(g);else if(K=x.m,K==3||K==0&&x.X>0||!(R==1&&Js(g,x)||R==2&&Ho(g)))switch(w&&w.length>0&&(x=g.h,x.i=x.i.concat(w)),K){case 1:Ai(g,5);break;case 4:Ai(g,10);break;case 3:Ai(g,6);break;default:Ai(g,2)}}}function eh(g,x){let w=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(w*=2),w*x}function Ai(g,x){if(g.j.info("Error code "+x),x==2){var w=h(g.bb,g),R=g.Ua;const K=!R;R=new cr(R||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||mn(R,"https"),Vo(R),K?qr(R.toString(),w):Vl(R.toString(),w)}else Xt(2);g.I=0,g.l&&g.l.pa(x),th(g),Zs(g)}r.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function th(g){if(g.I=0,g.ja=[],g.l){const x=Ol(g.h);(x.length!=0||g.i.length!=0)&&(T(g.ja,x),T(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function nh(g,x,w){var R=w instanceof cr?Wt(w):new cr(w);if(R.g!="")x&&(R.g=x+"."+R.g),Aa(R,R.u);else{var K=s.location;R=K.protocol,x=x?x+"."+K.hostname:K.hostname,K=+K.port;const ee=new cr(null);R&&mn(ee,R),x&&(ee.g=x),K&&Aa(ee,K),w&&(ee.h=w),R=ee}return w=g.G,x=g.wa,w&&x&&ct(R,w,x),ct(R,"VER",g.ka),jo(g,R),R}function rh(g,x,w){if(x&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=g.Aa&&!g.ma?new _t(new yi({ab:w})):new _t(g.ma),x.Fa(g.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ih(){}r=ih.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Da(){}Da.prototype.g=function(g,x){return new Gn(g,x)};function Gn(g,x){qt.call(this),this.g=new ba(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(g?g["X-WebChannel-Client-Profile"]=x.sa:g={"X-WebChannel-Client-Profile":x.sa}),this.g.U=g,(g=x&&x.Qb)&&!L(g)&&(this.g.u=g),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!L(x)&&(this.g.G=x,g=this.h,g!==null&&x in g&&(g=this.h,x in g&&delete g[x])),this.j=new Hi(this)}m(Gn,qt),Gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){Fl(this.g)},Gn.prototype.o=function(g){var x=this.g;if(typeof g=="string"){var w={};w.__data__=g,g=w}else this.v&&(w={},w.__data__=xa(g),g=w);x.i.push(new Yt(x.Ya++,g)),x.I==3&&xi(x)},Gn.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,Gn.Z.N.call(this)};function ah(g){Sn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const w in x){g=w;break e}g=void 0}(this.i=g)&&(g=this.i,x=x!==null&&g in x?x[g]:void 0),this.data=x}else this.data=g}m(ah,Sn);function oh(){Ar.call(this),this.status=1}m(oh,Ar);function Hi(g){this.g=g}m(Hi,ih),Hi.prototype.ra=function(){on(this.g,"a")},Hi.prototype.qa=function(g){on(this.g,new ah(g))},Hi.prototype.pa=function(g){on(this.g,new oh)},Hi.prototype.oa=function(){on(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,Sw=function(){return new Da},Tw=function(){return Gs()},ww=zt,Cg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,wd=Po,Sl.COMPLETE="complete",Aw=Sl,kf.EventType=zr,zr.OPEN="a",zr.CLOSE="b",zr.ERROR="c",zr.MESSAGE="d",qt.prototype.listen=qt.prototype.J,Vc=kf,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,xw=_t}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const EE="@firebase/firestore",xE="4.9.3";class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let pl="12.7.0";const bs=new yv("@firebase/firestore");function ku(){return bs.logLevel}function le(r,...e){if(bs.logLevel<=Xe.DEBUG){const t=e.map(xv);bs.debug(`Firestore (${pl}): ${r}`,...t)}}function Wn(r,...e){if(bs.logLevel<=Xe.ERROR){const t=e.map(xv);bs.error(`Firestore (${pl}): ${r}`,...t)}}function Rs(r,...e){if(bs.logLevel<=Xe.WARN){const t=e.map(xv);bs.warn(`Firestore (${pl}): ${r}`,...t)}}function xv(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function ye(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,Iw(r,n,t)}function Iw(r,e,t){let n=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Wn(n),new Error(n)}function Ae(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||Iw(e,i,n)}function Ne(r,e){return r}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends pa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Cw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class Hb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Gb{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let n=this.i;const i=f=>this.i!==n?(n=this.i,t(f)):Promise.resolve();let a=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yo,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},l=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((f=>l(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?l(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ae(typeof n.accessToken=="string",31837,{l:n}),new Cw(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class qb{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xb{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new qb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const n=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Yb(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class Av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Yb(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%62))}return n}}function Oe(r,e){return r<e?-1:r>e?1:0}function bg(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),a=e.charAt(n);if(i!==a)return ig(i)===ig(a)?Oe(i,a):ig(i)?1:-1}return Oe(r.length,e.length)}const Wb=55296,Qb=57343;function ig(r){const e=r.charCodeAt(0);return e>=Wb&&e<=Qb}function Zu(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function bw(r){return r+"\0"}const wE="__name__";class bi{constructor(e,t,n){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ye(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bi?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=bi.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Oe(e.length,t.length)}static compareSegments(e,t){const n=bi.isNumericId(e),i=bi.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?bi.extractNumericId(e).compare(bi.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class st extends bi{construct(e,t,n){return new st(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new he(ae.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const $b=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends bi{construct(e,t,n){return new Lt(e,t,n)}static isValidIdentifier(e){return $b.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wE}static keyField(){return new Lt([wE])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new he(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=f,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(n+=l,i++):(a(),i++)}if(a(),s)throw new he(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}class pe{constructor(e){this.path=e}static fromPath(e){return new pe(st.fromString(e))}static fromName(e){return new pe(st.fromString(e).popFirst(5))}static empty(){return new pe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new st(e.slice()))}}function Rw(r,e,t){if(!t)throw new he(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Zb(r,e,t,n){if(e===!0&&n===!0)throw new he(ae.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function TE(r){if(!pe.isDocumentKey(r))throw new he(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function SE(r){if(pe.isDocumentKey(r))throw new he(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Dw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function y1(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ye(12329,{type:typeof r})}function ua(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=y1(r);throw new he(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function tn(r,e){const t={typeString:r};return e&&(t.value=e),t}function xf(r,e){if(!Dw(r))throw new he(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const s=r[n];if(i&&typeof s!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){t=`Expected '${n}' field to equal '${a.value}'`;break}}if(t)throw new he(ae.INVALID_ARGUMENT,t);return!0}const IE=-62135596800,CE=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*CE);return new gt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IE)throw new he(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CE}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xf(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-IE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:tn("string",gt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new gt(0,0))}static max(){return new Se(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nf=-1;class Gd{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function Rg(r){return r.fields.find((e=>e.kind===2))}function fs(r){return r.fields.filter((e=>e.kind!==2))}Gd.UNKNOWN_ID=-1;class Td{constructor(e,t){this.fieldPath=e,this.kind=t}}class rf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rf(0,xr.min())}}function Jb(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Se.fromTimestamp(n===1e9?new gt(t+1,0):new gt(t,n));return new xr(i,pe.empty(),e)}function Ow(r){return new xr(r.readTime,r.key,nf)}class xr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xr(Se.min(),pe.empty(),nf)}static max(){return new xr(Se.max(),pe.empty(),nf)}}function wv(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:Oe(r.largestBatchId,e.largestBatchId))}const Nw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ks(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==Nw)throw r;le("LocalStore","Unexpectedly lost primary lease")}class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,n)=>{t(e)}))}static reject(e){return new X(((t,n)=>{n(e)}))}static waitFor(e){return new X(((t,n)=>{let i=0,a=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++a,s&&a===i&&t()}),(f=>n(f)))})),s=!0,a===i&&t()}))}static or(e){let t=X.resolve(!1);for(const n of e)t=t.next((i=>i?X.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,a)=>{n.push(t.call(this,i,a))})),this.waitFor(n)}static mapArray(e,t){return new X(((n,i)=>{const a=e.length,s=new Array(a);let l=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((p=>{s[h]=p,++l,l===a&&n(s)}),(p=>i(p)))}}))}static doWhile(e,t){return new X(((n,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):n()};a()}))}}const yr="SimpleDb";class _1{static open(e,t,n,i){try{return new _1(t,e.transaction(i,n))}catch(a){throw new Xc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new yo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Xc(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const i=Tv(n.target.error);this.S.reject(new Xc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(yr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new t8(t)}}class _o{static delete(e){return le(yr,"Removing database:",e),ps(iw().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!dw())return!1;if(_o.F())return!0;const e=pn(),t=_o.M(e),n=0<t&&t<10,i=Pw(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,_o.M(pn())===12.2&&Wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(yr,"Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;t(s)},i.onblocked=()=>{n(new Xc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new he(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new he(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Xc(e,s))},i.onupgradeneeded=a=>{le(yr,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{le(yr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const a=t==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const l=_1.open(this.db,e,a?"readonly":"readwrite",n),f=i(l).next((h=>(l.C(),h))).catch((h=>(l.abort(h),X.reject(h)))).toPromise();return f.catch((()=>{})),await l.D,f}catch(l){const f=l,h=f.name!=="FirebaseError"&&s<3;if(le(yr,"Transaction failed with error:",f.message,"Retrying:",h),this.close(),!h)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Pw(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class e8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ps(this.U.delete())}}class Xc extends he{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Co(r){return r.name==="IndexedDbTransactionError"}class t8{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(le(yr,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(le(yr,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ps(n)}add(e){return le(yr,"ADD",this.store.name,e,e),ps(this.store.add(e))}get(e){return ps(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(yr,"GET",this.store.name,e,t),t)))}delete(e){return le(yr,"DELETE",this.store.name,e),ps(this.store.delete(e))}count(){return le(yr,"COUNT",this.store.name),ps(this.store.count())}J(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new X(((s,l)=>{a.onerror=f=>{l(f.target.error)},a.onsuccess=f=>{s(f.target.result)}}))}{const a=this.cursor(n),s=[];return this.H(a,((l,f)=>{s.push(f)})).next((()=>s))}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new X(((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}}))}Z(e,t){le(yr,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const i=this.cursor(n);return this.H(i,((a,s,l)=>l.delete()))}ee(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.H(i,t)}te(e){const t=this.cursor({});return new X(((n,i)=>{t.onerror=a=>{const s=Tv(a.target.error);i(s)},t.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():n()})):n()}}))}H(e,t){const n=[];return new X(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const f=new e8(l),h=t(l.primaryKey,l.value,f);if(h instanceof X){const p=h.catch((m=>(f.done(),X.reject(m))));n.push(p)}f.isDone?i():f.G===null?l.continue():l.continue(f.G)}})).next((()=>X.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ps(r){return new X(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=Tv(n.target.error);t(i)}}))}let bE=!1;function Tv(r){const e=_o.M(pn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bE||(bE=!0,setTimeout((()=>{throw n}),0)),n}}return r}const Kc="IndexBackfiller";class n8{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(Kc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(Kc,`Documents written: ${t}`)}catch(t){Co(t)?le(Kc,"Ignoring IndexedDB error during index backfill: ",t):await ks(t)}await this.re(6e4)}))}}class r8{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const n=new Set;let i=t,a=!0;return X.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return le(Kc,`Processing collection: ${s}`),this.oe(e,s,i).next((l=>{i-=l,n.add(s)}));a=!1})))).next((()=>t-i))}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((l=>(le(Kc,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l)))).next((()=>s.size))}))))}_e(e,t){let n=e;return t.changes.forEach(((i,a)=>{const s=Ow(a);wv(s,n)>0&&(n=s)})),new xr(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Br{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Br.ce=-1;const xs=-1;function E1(r){return r==null}function af(r){return r===0&&1/r==-1/0}function i8(r){return typeof r=="number"&&Number.isInteger(r)&&!af(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const qd="";function zn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=RE(e)),e=a8(r.get(t),e);return RE(e)}function a8(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case qd:t+="";break;default:t+=a}}return t}function RE(r){return r+qd+""}function Ri(r){const e=r.length;if(Ae(e>=2,64408,{path:r}),e===2)return Ae(r.charAt(0)===qd&&r.charAt(1)==="",56145,{path:r}),st.emptyPath();const t=e-2,n=[];let i="";for(let a=0;a<e;){const s=r.indexOf(qd,a);switch((s<0||s>t)&&ye(50515,{path:r}),r.charAt(s+1)){case"":const l=r.substring(a,s);let f;i.length===0?f=l:(i+=l,f=i,i=""),n.push(f);break;case"":i+=r.substring(a,s),i+="\0";break;case"":i+=r.substring(a,s+1);break;default:ye(61167,{path:r})}a=s+2}return new st(n)}const hs="remoteDocuments",Af="owner",Ou="owner",of="mutationQueues",o8="userId",ti="mutations",DE="batchId",ys="userMutationsIndex",OE=["userId","batchId"];function Sd(r,e){return[r,zn(e)]}function Lw(r,e,t){return[r,zn(e),t]}const s8={},Ju="documentMutations",Xd="remoteDocumentsV14",u8=["prefixPath","collectionGroup","readTime","documentId"],Id="documentKeyIndex",l8=["prefixPath","collectionGroup","documentId"],Vw="collectionGroupIndex",c8=["collectionGroup","readTime","prefixPath","documentId"],sf="remoteDocumentGlobal",Dg="remoteDocumentGlobalKey",el="targets",Bw="queryTargetsIndex",f8=["canonicalId","targetId"],tl="targetDocuments",h8=["targetId","path"],Sv="documentTargetsIndex",d8=["path","targetId"],Kd="targetGlobalKey",As="targetGlobal",uf="collectionParents",p8=["collectionId","parent"],nl="clientMetadata",g8="clientId",x1="bundles",v8="bundleId",A1="namedQueries",m8="name",Iv="indexConfiguration",y8="indexId",Og="collectionGroupIndex",_8="collectionGroup",Yc="indexState",E8=["indexId","uid"],kw="sequenceNumberIndex",x8=["uid","sequenceNumber"],Wc="indexEntries",A8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Fw="documentKeyIndex",w8=["indexId","uid","orderedDocumentKey"],w1="documentOverlays",T8=["userId","collectionPath","documentId"],Ng="collectionPathOverlayIndex",S8=["userId","collectionPath","largestBatchId"],Uw="collectionGroupOverlayIndex",I8=["userId","collectionGroup","largestBatchId"],Cv="globals",C8="name",zw=[of,ti,Ju,hs,el,Af,As,tl,nl,sf,uf,x1,A1],b8=[...zw,w1],jw=[of,ti,Ju,Xd,el,Af,As,tl,nl,sf,uf,x1,A1,w1],Hw=jw,bv=[...Hw,Iv,Yc,Wc],R8=bv,Gw=[...bv,Cv],D8=Gw;class Mg extends Mw{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function gn(r,e){const t=Ne(r);return _o.O(t.le,e)}function NE(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function bo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function qw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Pt{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new Pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fd(this.root,e,this.comparator,!0)}}class fd{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??Pn.RED,this.left=i??Pn.EMPTY,this.right=a??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new Pn(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Pn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,n,i,a){return this}insert(e,t,n){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Nu(r){return r.hasNext()?r.getNext():void 0}class sr{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new sr([])}unionWith(e){let t=new mt(Lt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zu(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class Xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Xw("Invalid base64 string: "+a):a}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const O8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(r){if(Ae(!!r,39018),typeof r=="string"){let e=0;const t=O8.exec(r);if(Ae(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Mt(r.seconds),nanos:Mt(r.nanos)}}function Mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fa(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}const Kw="server_timestamp",Yw="__type__",Ww="__previous_value__",Qw="__local_write_time__";function Rv(r){return(r?.mapValue?.fields||{})[Yw]?.stringValue===Kw}function T1(r){const e=r.mapValue.fields[Ww];return Rv(e)?T1(e):e}function lf(r){const e=ca(r.mapValue.fields[Qw].timestampValue);return new gt(e.seconds,e.nanos)}class N8{constructor(e,t,n,i,a,s,l,f,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=p}}const Yd="(default)";class Ds{constructor(e,t){this.projectId=e,this.database=t||Yd}static empty(){return new Ds("","")}get isDefaultDatabase(){return this.database===Yd}isEqual(e){return e instanceof Ds&&e.projectId===this.projectId&&e.database===this.database}}const Dv="__type__",$w="__max__",fo={mapValue:{fields:{__type__:{stringValue:$w}}}},Ov="__vector__",rl="value",Cd={nullValue:"NULL_VALUE"};function wo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rv(r)?4:Zw(r)?9007199254740991:S1(r)?10:11:ye(28295,{value:r})}function ki(r,e){if(r===e)return!0;const t=wo(r);if(t!==wo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return lf(r).isEqual(lf(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=ca(i.timestampValue),l=ca(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,a){return fa(i.bytesValue).isEqual(fa(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,a){return Mt(i.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(i.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(r,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Mt(i.integerValue)===Mt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Mt(i.doubleValue),l=Mt(a.doubleValue);return s===l?af(s)===af(l):isNaN(s)&&isNaN(l)}return!1})(r,e);case 9:return Zu(r.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},l=a.mapValue.fields||{};if(NE(s)!==NE(l))return!1;for(const f in s)if(s.hasOwnProperty(f)&&(l[f]===void 0||!ki(s[f],l[f])))return!1;return!0})(r,e);default:return ye(52216,{left:r})}}function cf(r,e){return(r.values||[]).find((t=>ki(t,e)))!==void 0}function To(r,e){if(r===e)return 0;const t=wo(r),n=wo(e);if(t!==n)return Oe(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(r.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=Mt(a.integerValue||a.doubleValue),f=Mt(s.integerValue||s.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1})(r,e);case 3:return PE(r.timestampValue,e.timestampValue);case 4:return PE(lf(r),lf(e));case 5:return bg(r.stringValue,e.stringValue);case 6:return(function(a,s){const l=fa(a),f=fa(s);return l.compareTo(f)})(r.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),f=s.split("/");for(let h=0;h<l.length&&h<f.length;h++){const p=Oe(l[h],f[h]);if(p!==0)return p}return Oe(l.length,f.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=Oe(Mt(a.latitude),Mt(s.latitude));return l!==0?l:Oe(Mt(a.longitude),Mt(s.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return LE(r.arrayValue,e.arrayValue);case 10:return(function(a,s){const l=a.fields||{},f=s.fields||{},h=l[rl]?.arrayValue,p=f[rl]?.arrayValue,m=Oe(h?.values?.length||0,p?.values?.length||0);return m!==0?m:LE(h,p)})(r.mapValue,e.mapValue);case 11:return(function(a,s){if(a===fo.mapValue&&s===fo.mapValue)return 0;if(a===fo.mapValue)return 1;if(s===fo.mapValue)return-1;const l=a.fields||{},f=Object.keys(l),h=s.fields||{},p=Object.keys(h);f.sort(),p.sort();for(let m=0;m<f.length&&m<p.length;++m){const _=bg(f[m],p[m]);if(_!==0)return _;const E=To(l[f[m]],h[p[m]]);if(E!==0)return E}return Oe(f.length,p.length)})(r.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function PE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Oe(r,e);const t=ca(r),n=ca(e),i=Oe(t.seconds,n.seconds);return i!==0?i:Oe(t.nanos,n.nanos)}function LE(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=To(t[i],n[i]);if(a)return a}return Oe(t.length,n.length)}function il(r){return Pg(r)}function Pg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=ca(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return fa(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return pe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=Pg(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${Pg(t.fields[s])}`;return i+"}"})(r.mapValue):ye(61005,{value:r})}function bd(r){switch(wo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=T1(r);return e?16+bd(e):16;case 5:return 2*r.stringValue.length;case 6:return fa(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,a)=>i+bd(a)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return bo(n.fields,((a,s)=>{i+=a.length+bd(s)})),i})(r.mapValue);default:throw ye(13486,{value:r})}}function ff(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Lg(r){return!!r&&"integerValue"in r}function hf(r){return!!r&&"arrayValue"in r}function VE(r){return!!r&&"nullValue"in r}function BE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Rd(r){return!!r&&"mapValue"in r}function S1(r){return(r?.mapValue?.fields||{})[Dv]?.stringValue===Ov}function Qc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return bo(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Qc(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qc(r.arrayValue.values[t]);return e}return{...r}}function Zw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===$w}const Jw={mapValue:{fields:{[Dv]:{stringValue:Ov},[rl]:{arrayValue:{}}}}};function M8(r){return"nullValue"in r?Cd:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?ff(Ds.empty(),pe.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?S1(r)?Jw:{mapValue:{}}:ye(35942,{value:r})}function P8(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?ff(Ds.empty(),pe.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?Jw:"mapValue"in r?S1(r)?{mapValue:{}}:fo:ye(61959,{value:r})}function kE(r,e){const t=To(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function FE(r,e){const t=To(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Rd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(t)}setAll(e){let t=Lt.emptyPath(),n={},i=[];e.forEach(((s,l)=>{if(!t.isImmediateParentOf(l)){const f=this.getFieldsMap(t);this.applyChanges(f,n,i),n={},i=[],t=l.popLast()}s?n[l.lastSegment()]=Qc(s):i.push(l.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());Rd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Rd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){bo(t,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new Un(Qc(this.value))}}function eT(r){const e=[];return bo(r.fields,((t,n)=>{const i=new Lt([t]);if(Rd(n)){const a=eT(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new sr(e)}class Ft{constructor(e,t,n,i,a,s,l){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Ft(e,0,Se.min(),Se.min(),Se.min(),Un.empty(),0)}static newFoundDocument(e,t,n,i){return new Ft(e,1,t,Se.min(),n,i,0)}static newNoDocument(e,t){return new Ft(e,2,t,Se.min(),Se.min(),Un.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Se.min(),Se.min(),Un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class al{constructor(e,t){this.position=e,this.inclusive=t}}function UE(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],s=r.position[i];if(a.field.isKeyField()?n=pe.comparator(pe.fromName(s.referenceValue),t.key):n=To(s,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function zE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ki(r.position[t],e.position[t]))return!1;return!0}class df{constructor(e,t="asc"){this.field=e,this.dir=t}}function L8(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class tT{}class Ke extends tT{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new V8(e,t,n):t==="array-contains"?new F8(e,n):t==="in"?new sT(e,n):t==="not-in"?new U8(e,n):t==="array-contains-any"?new z8(e,n):new Ke(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new B8(e,n):new k8(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(To(t,this.value)):t!==null&&wo(this.value)===wo(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends tT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return ol(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ol(r){return r.op==="and"}function Vg(r){return r.op==="or"}function Nv(r){return nT(r)&&ol(r)}function nT(r){for(const e of r.filters)if(e instanceof vt)return!1;return!0}function Bg(r){if(r instanceof Ke)return r.field.canonicalString()+r.op.toString()+il(r.value);if(Nv(r))return r.filters.map((e=>Bg(e))).join(",");{const e=r.filters.map((t=>Bg(t))).join(",");return`${r.op}(${e})`}}function rT(r,e){return r instanceof Ke?(function(n,i){return i instanceof Ke&&n.op===i.op&&n.field.isEqual(i.field)&&ki(n.value,i.value)})(r,e):r instanceof vt?(function(n,i){return i instanceof vt&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,s,l)=>a&&rT(s,i.filters[l])),!0):!1})(r,e):void ye(19439)}function iT(r,e){const t=r.filters.concat(e);return vt.create(t,r.op)}function aT(r){return r instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${il(t.value)}`})(r):r instanceof vt?(function(t){return t.op.toString()+" {"+t.getFilters().map(aT).join(" ,")+"}"})(r):"Filter"}class V8 extends Ke{constructor(e,t,n){super(e,t,n),this.key=pe.fromName(n.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class B8 extends Ke{constructor(e,t){super(e,"in",t),this.keys=oT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class k8 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=oT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function oT(r,e){return(e.arrayValue?.values||[]).map((t=>pe.fromName(t.referenceValue)))}class F8 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hf(t)&&cf(t.arrayValue,this.value)}}class sT extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cf(this.value.arrayValue,t)}}class U8 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(cf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cf(this.value.arrayValue,t)}}class z8 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>cf(this.value.arrayValue,n)))}}class j8{constructor(e,t=null,n=[],i=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=l,this.Te=null}}function kg(r,e=null,t=[],n=[],i=null,a=null,s=null){return new j8(r,e,t,n,i,a,s)}function Os(r){const e=Ne(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Bg(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),E1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>il(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>il(n))).join(",")),e.Te=t}return e.Te}function wf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!L8(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!rT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!zE(r.startAt,e.startAt)&&zE(r.endAt,e.endAt)}function Wd(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Qd(r,e){return r.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function jE(r,e,t){let n=Cd,i=!0;for(const a of Qd(r,e)){let s=Cd,l=!0;switch(a.op){case"<":case"<=":s=M8(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,l=!1;break;case"!=":case"not-in":s=Cd}kE({value:n,inclusive:i},{value:s,inclusive:l})<0&&(n=s,i=l)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const s=t.position[a];kE({value:n,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(n=s,i=t.inclusive);break}}return{value:n,inclusive:i}}function HE(r,e,t){let n=fo,i=!0;for(const a of Qd(r,e)){let s=fo,l=!0;switch(a.op){case">=":case">":s=P8(a.value),l=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,l=!1;break;case"!=":case"not-in":s=fo}FE({value:n,inclusive:i},{value:s,inclusive:l})>0&&(n=s,i=l)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const s=t.position[a];FE({value:n,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(n=s,i=t.inclusive);break}}return{value:n,inclusive:i}}class gl{constructor(e,t=null,n=[],i=[],a=null,s="F",l=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H8(r,e,t,n,i,a,s,l){return new gl(r,e,t,n,i,a,s,l)}function I1(r){return new gl(r)}function GE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function uT(r){return r.collectionGroup!==null}function $c(r){const e=Ne(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new mt(Lt.comparator);return s.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new df(a,n))})),t.has(Lt.keyField().canonicalString())||e.Ie.push(new df(Lt.keyField(),n))}return e.Ie}function Fr(r){const e=Ne(r);return e.Ee||(e.Ee=G8(e,$c(r))),e.Ee}function G8(r,e){if(r.limitType==="F")return kg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new df(i.field,a)}));const t=r.endAt?new al(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new al(r.startAt.position,r.startAt.inclusive):null;return kg(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Fg(r,e){const t=r.filters.concat([e]);return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ug(r,e,t){return new gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function C1(r,e){return wf(Fr(r),Fr(e))&&r.limitType===e.limitType}function lT(r){return`${Os(Fr(r))}|lt:${r.limitType}`}function Fu(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>aT(i))).join(", ")}]`),E1(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>il(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>il(i))).join(",")),`Target(${n})`})(Fr(r))}; limitType=${r.limitType})`}function Tf(r,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):pe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,i){for(const a of $c(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(s,l,f){const h=UE(s,l,f);return s.inclusive?h<=0:h<0})(n.startAt,$c(n),i)||n.endAt&&!(function(s,l,f){const h=UE(s,l,f);return s.inclusive?h>=0:h>0})(n.endAt,$c(n),i))})(r,e)}function q8(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cT(r){return(e,t)=>{let n=!1;for(const i of $c(r)){const a=X8(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function X8(r,e,t){const n=r.field.isKeyField()?pe.comparator(e.key,t.key):(function(a,s,l){const f=s.data.field(a),h=l.data.field(a);return f!==null&&h!==null?To(f,h):ye(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ye(19790,{direction:r.dir})}}class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,((t,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return qw(this.inner)}size(){return this.innerSize}}const K8=new Pt(pe.comparator);function Er(){return K8}const fT=new Pt(pe.comparator);function Bc(...r){let e=fT;for(const t of r)e=e.insert(t.key,t);return e}function hT(r){let e=fT;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Di(){return Zc()}function dT(){return Zc()}function Zc(){return new ga((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Y8=new Pt(pe.comparator),W8=new mt(pe.comparator);function Ue(...r){let e=W8;for(const t of r)e=e.add(t);return e}const Q8=new mt(Oe);function $8(){return Q8}function Mv(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function pT(r){return{integerValue:""+r}}function Z8(r,e){return i8(e)?pT(e):Mv(r,e)}class b1{constructor(){this._=void 0}}function J8(r,e,t){return r instanceof pf?(function(i,a){const s={fields:{[Yw]:{stringValue:Kw},[Qw]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Rv(a)&&(a=T1(a)),a&&(s.fields[Ww]=a),{mapValue:s}})(t,e):r instanceof sl?vT(r,e):r instanceof ul?mT(r,e):(function(i,a){const s=gT(i,a),l=qE(s)+qE(i.Ae);return Lg(s)&&Lg(i.Ae)?pT(l):Mv(i.serializer,l)})(r,e)}function e6(r,e,t){return r instanceof sl?vT(r,e):r instanceof ul?mT(r,e):t}function gT(r,e){return r instanceof gf?(function(n){return Lg(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class pf extends b1{}class sl extends b1{constructor(e){super(),this.elements=e}}function vT(r,e){const t=yT(e);for(const n of r.elements)t.some((i=>ki(i,n)))||t.push(n);return{arrayValue:{values:t}}}class ul extends b1{constructor(e){super(),this.elements=e}}function mT(r,e){let t=yT(e);for(const n of r.elements)t=t.filter((i=>!ki(i,n)));return{arrayValue:{values:t}}}class gf extends b1{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function qE(r){return Mt(r.integerValue||r.doubleValue)}function yT(r){return hf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class t6{constructor(e,t){this.field=e,this.transform=t}}function n6(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof sl&&i instanceof sl||n instanceof ul&&i instanceof ul?Zu(n.elements,i.elements,ki):n instanceof gf&&i instanceof gf?ki(n.Ae,i.Ae):n instanceof pf&&i instanceof pf})(r.transform,e.transform)}class r6{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dd(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class R1{}function _T(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new D1(r.key,Qn.none()):new vl(r.key,r.data,Qn.none());{const t=r.data,n=Un.empty();let i=new mt(Lt.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new va(r.key,n,new sr(i.toArray()),Qn.none())}}function i6(r,e,t){r instanceof vl?(function(i,a,s){const l=i.value.clone(),f=KE(i.fieldTransforms,a,s.transformResults);l.setAll(f),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(r,e,t):r instanceof va?(function(i,a,s){if(!Dd(i.precondition,a))return void a.convertToUnknownDocument(s.version);const l=KE(i.fieldTransforms,a,s.transformResults),f=a.data;f.setAll(ET(i)),f.setAll(l),a.convertToFoundDocument(s.version,f).setHasCommittedMutations()})(r,e,t):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Jc(r,e,t,n){return r instanceof vl?(function(a,s,l,f){if(!Dd(a.precondition,s))return l;const h=a.value.clone(),p=YE(a.fieldTransforms,f,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(r,e,t,n):r instanceof va?(function(a,s,l,f){if(!Dd(a.precondition,s))return l;const h=YE(a.fieldTransforms,f,s),p=s.data;return p.setAll(ET(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((m=>m.field)))})(r,e,t,n):(function(a,s,l){return Dd(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(r,e,t)}function a6(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),a=gT(n.transform,i||null);a!=null&&(t===null&&(t=Un.empty()),t.set(n.field,a))}return t||null}function XE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Zu(n,i,((a,s)=>n6(a,s)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class vl extends R1{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class va extends R1{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ET(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function KE(r,e,t){const n=new Map;Ae(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const a=r[i],s=a.transform,l=e.data.field(a.field);n.set(a.field,e6(s,l,t[i]))}return n}function YE(r,e,t){const n=new Map;for(const i of r){const a=i.transform,s=t.data.field(i.field);n.set(i.field,J8(a,s,e))}return n}class D1 extends R1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xT extends R1{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Pv{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&i6(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Jc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Jc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=dT();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=t.has(i.key)?null:l;const f=_T(s,l);f!==null&&n.set(i.key,f),s.isValidDocument()||s.convertToNoDocument(Se.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ue())}isEqual(e){return this.batchId===e.batchId&&Zu(this.mutations,e.mutations,((t,n)=>XE(t,n)))&&Zu(this.baseMutations,e.baseMutations,((t,n)=>XE(t,n)))}}class Lv{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Ae(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return Y8})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new Lv(e,t,n,i)}}class Vv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class o6{constructor(e,t){this.count=e,this.unchangedNames=t}}var en,Qe;function s6(r){switch(r){case ae.OK:return ye(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return ye(15467,{code:r})}}function AT(r){if(r===void 0)return Wn("GRPC error has no .code"),ae.UNKNOWN;switch(r){case en.OK:return ae.OK;case en.CANCELLED:return ae.CANCELLED;case en.UNKNOWN:return ae.UNKNOWN;case en.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case en.INTERNAL:return ae.INTERNAL;case en.UNAVAILABLE:return ae.UNAVAILABLE;case en.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case en.NOT_FOUND:return ae.NOT_FOUND;case en.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case en.ABORTED:return ae.ABORTED;case en.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case en.DATA_LOSS:return ae.DATA_LOSS;default:return ye(39323,{code:r})}}(Qe=en||(en={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function u6(){return new TextEncoder}const l6=new mo([4294967295,4294967295],0);function WE(r){const e=u6().encode(r),t=new Ew;return t.update(e),new Uint8Array(t.digest())}function QE(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([t,n],0),new mo([i,a],0)]}class Bv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new kc(`Invalid padding: ${t}`);if(n<0)throw new kc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mo.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(mo.fromNumber(n)));return i.compare(l6)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=WE(e),[n,i]=QE(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);if(!this.we(s))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new Bv(a,i,t);return n.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const t=WE(e),[n,i]=QE(t);for(let a=0;a<this.hashCount;a++){const s=this.ye(n,i,a);this.Se(s)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class O1{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new O1(Se.min(),i,new Pt(Oe),Er(),Ue())}}class Sf{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Sf(n,t,Ue(),Ue(),Ue())}}class Od{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class wT{constructor(e,t){this.targetId=e,this.Ce=t}}class TT{constructor(e,t,n=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class $E{constructor(){this.ve=0,this.Fe=ZE(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),n=Ue();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:ye(38017,{changeType:a})}})),new Sf(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=ZE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class c6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Er(),this.Je=hd(),this.He=hd(),this.Ye=new Pt(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Wd(a))if(n===0){const s=new pe(a.path);this.et(t,s,Ft.newNoDocument(s,Se.min()))}else Ae(n===1,20013,{expectedCount:n});else{const s=this._t(t);if(s!==n){const l=this.ut(e),f=l?this.ct(l,e,s):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let s,l;try{s=fa(n).toUint8Array()}catch(f){if(f instanceof Xw)return Rs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{l=new Bv(s,i,a)}catch(f){return Rs(f instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return l.ge===0?null:l}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((a=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,s)=>{const l=this.ot(s);if(l){if(a.current&&Wd(l.target)){const f=new pe(l.target.path);this.It(f).has(s)||this.Et(s,f)||this.et(s,f,Ft.newNoDocument(f,e))}a.Be&&(t.set(s,a.ke()),a.qe())}}));let n=Ue();this.He.forEach(((a,s)=>{let l=!0;s.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(n=n.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new O1(e,t,this.Ye,this.je,n);return this.je=Er(),this.Je=hd(),this.He=hd(),this.Ye=new Pt(Oe),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $E,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $E),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hd(){return new Pt(pe.comparator)}function ZE(){return new Pt(pe.comparator)}const f6={asc:"ASCENDING",desc:"DESCENDING"},h6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d6={and:"AND",or:"OR"};class p6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(r,e){return r.useProto3Json||E1(e)?e:{value:e}}function ll(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ST(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function g6(r,e){return ll(r,e.toTimestamp())}function $n(r){return Ae(!!r,49232),Se.fromTimestamp((function(t){const n=ca(t);return new gt(n.seconds,n.nanos)})(r))}function kv(r,e){return jg(r,e).canonicalString()}function jg(r,e){const t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function IT(r){const e=st.fromString(r);return Ae(LT(e),10190,{key:e.toString()}),e}function $d(r,e){return kv(r.databaseId,e.path)}function ws(r,e){const t=IT(e);if(t.get(1)!==r.databaseId.projectId)throw new he(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(RT(t))}function CT(r,e){return kv(r.databaseId,e)}function bT(r){const e=IT(r);return e.length===4?st.emptyPath():RT(e)}function Hg(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function RT(r){return Ae(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function JE(r,e,t){return{name:$d(r,e),fields:t.value.mapValue.fields}}function v6(r,e,t){const n=ws(r,e.name),i=$n(e.updateTime),a=e.createTime?$n(e.createTime):Se.min(),s=new Un({mapValue:{fields:e.fields}}),l=Ft.newFoundDocument(n,i,a,s);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function m6(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ye(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Ae(p===void 0||typeof p=="string",58123),rn.fromBase64String(p||"")):(Ae(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),rn.fromUint8Array(p||new Uint8Array))})(r,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(h){const p=h.code===void 0?ae.UNKNOWN:AT(h.code);return new he(p,h.message||"")})(s);t=new TT(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=ws(r,n.document.name),a=$n(n.document.updateTime),s=n.document.createTime?$n(n.document.createTime):Se.min(),l=new Un({mapValue:{fields:n.document.fields}}),f=Ft.newFoundDocument(i,a,s,l),h=n.targetIds||[],p=n.removedTargetIds||[];t=new Od(h,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=ws(r,n.document),a=n.readTime?$n(n.readTime):Se.min(),s=Ft.newNoDocument(i,a),l=n.removedTargetIds||[];t=new Od([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=ws(r,n.document),a=n.removedTargetIds||[];t=new Od([],a,i,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new o6(i,a),l=n.targetId;t=new wT(l,s)}}return t}function Zd(r,e){let t;if(e instanceof vl)t={update:JE(r,e.key,e.value)};else if(e instanceof D1)t={delete:$d(r,e.key)};else if(e instanceof va)t={update:JE(r,e.key,e.data),updateMask:w6(e.fieldMask)};else{if(!(e instanceof xT))return ye(16599,{Vt:e.type});t={verify:$d(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,s){const l=s.transform;if(l instanceof pf)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof sl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ul)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof gf)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw ye(20930,{transform:s.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:g6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ye(27497)})(r,e.precondition)),t}function Gg(r,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Qn.updateTime($n(a.updateTime)):a.exists!==void 0?Qn.exists(a.exists):Qn.none()})(e.currentDocument):Qn.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let f=null;if("setToServerValue"in l)Ae(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),f=new pf;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];f=new sl(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];f=new ul(p)}else"increment"in l?f=new gf(s,l.increment):ye(16584,{proto:l});const h=Lt.fromServerFormat(l.fieldPath);return new t6(h,f)})(r,i))):[];if(e.update){e.update.name;const i=ws(r,e.update.name),a=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(f){const h=f.fieldPaths||[];return new sr(h.map((p=>Lt.fromServerFormat(p))))})(e.updateMask);return new va(i,a,s,t,n)}return new vl(i,a,t,n)}if(e.delete){const i=ws(r,e.delete);return new D1(i,t)}if(e.verify){const i=ws(r,e.verify);return new xT(i,t)}return ye(1463,{proto:e})}function y6(r,e){return r&&r.length>0?(Ae(e!==void 0,14353),r.map((t=>(function(i,a){let s=i.updateTime?$n(i.updateTime):$n(a);return s.isEqual(Se.min())&&(s=$n(a)),new r6(s,i.transformResults||[])})(t,e)))):[]}function DT(r,e){return{documents:[CT(r,e.path)]}}function OT(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=CT(r,i);const a=(function(h){if(h.length!==0)return PT(vt.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(h){if(h.length!==0)return h.map((p=>(function(_){return{field:Uu(_.field),direction:E6(_.dir)}})(p)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=zg(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:i}}function NT(r){let e=bT(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Ae(n===1,65062);const p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];t.where&&(a=(function(m){const _=MT(m);return _ instanceof vt&&Nv(_)?_.getFilters():[_]})(t.where));let s=[];t.orderBy&&(s=(function(m){return m.map((_=>(function(T){return new df(zu(T.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(_)))})(t.orderBy));let l=null;t.limit&&(l=(function(m){let _;return _=typeof m=="object"?m.value:m,E1(_)?null:_})(t.limit));let f=null;t.startAt&&(f=(function(m){const _=!!m.before,E=m.values||[];return new al(E,_)})(t.startAt));let h=null;return t.endAt&&(h=(function(m){const _=!m.before,E=m.values||[];return new al(E,_)})(t.endAt)),H8(e,i,s,a,l,"F",f,h)}function _6(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MT(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=zu(t.unaryFilter.field);return Ke.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=zu(t.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=zu(t.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zu(t.unaryFilter.field);return Ke.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ke.create(zu(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return vt.create(t.compositeFilter.filters.map((n=>MT(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(r):ye(30097,{filter:r})}function E6(r){return f6[r]}function x6(r){return h6[r]}function A6(r){return d6[r]}function Uu(r){return{fieldPath:r.canonicalString()}}function zu(r){return Lt.fromServerFormat(r.fieldPath)}function PT(r){return r instanceof Ke?(function(t){if(t.op==="=="){if(BE(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NAN"}};if(VE(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BE(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NOT_NAN"}};if(VE(t.value))return{unaryFilter:{field:Uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uu(t.field),op:x6(t.op),value:t.value}}})(r):r instanceof vt?(function(t){const n=t.getFilters().map((i=>PT(i)));return n.length===1?n[0]:{compositeFilter:{op:A6(t.op),filters:n}}})(r):ye(54877,{filter:r})}function w6(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function LT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class aa{constructor(e,t,n,i,a=Se.min(),s=Se.min(),l=rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=f}withSequenceNumber(e){return new aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class VT{constructor(e){this.yt=e}}function T6(r,e){let t;if(e.document)t=v6(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=pe.fromSegments(e.noDocument.path),i=Ms(e.noDocument.readTime);t=Ft.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const n=pe.fromSegments(e.unknownDocument.path),i=Ms(e.unknownDocument.version);t=Ft.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const a=new gt(i[0],i[1]);return Se.fromTimestamp(a)})(e.readTime)),t}function ex(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,s){return{name:$d(a,s.key),fields:s.data.value.mapValue.fields,updateTime:ll(a,s.version.toTimestamp()),createTime:ll(a,s.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:Ns(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:Ns(e.version)}}return n}function Jd(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Ns(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ms(r){const e=new gt(r.seconds,r.nanoseconds);return Se.fromTimestamp(e)}function gs(r,e){const t=(e.baseMutations||[]).map((a=>Gg(r.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const l=e.mutations[a+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>Gg(r.yt,a))),i=gt.fromMillis(e.localWriteTimeMs);return new Pv(e.batchId,i,t,n)}function Fc(r){const e=Ms(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?Ms(r.lastLimboFreeSnapshotVersion):Se.min();let n;return n=(function(a){return a.documents!==void 0})(r.query)?(function(a){const s=a.documents.length;return Ae(s===1,1966,{count:s}),Fr(I1(bT(a.documents[0])))})(r.query):(function(a){return Fr(NT(a))})(r.query),new aa(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,rn.fromBase64String(r.resumeToken))}function BT(r,e){const t=Ns(e.snapshotVersion),n=Ns(e.lastLimboFreeSnapshotVersion);let i;i=Wd(e.target)?DT(r.yt,e.target):OT(r.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Os(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function kT(r){const e=NT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ug(e,e.limit,"L"):e}function ag(r,e){return new Vv(e.largestBatchId,Gg(r.yt,e.overlayMutation))}function tx(r,e){const t=e.path.lastSegment();return[r,zn(e.path.popLast()),t]}function nx(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:Ns(n.readTime),documentKey:zn(n.documentKey.path),largestBatchId:n.largestBatchId}}class S6{getBundleMetadata(e,t){return rx(e).get(t).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:Ms(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,t){return rx(e).put((function(i){return{bundleId:i.id,createTime:Ns($n(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return ix(e).get(t).next((n=>{if(n)return(function(a){return{name:a.name,query:kT(a.bundledQuery),readTime:Ms(a.readTime)}})(n)}))}saveNamedQuery(e,t){return ix(e).put((function(i){return{name:i.name,readTime:Ns($n(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function rx(r){return gn(r,x1)}function ix(r){return gn(r,A1)}class N1{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new N1(e,n)}getOverlay(e,t){return Ic(e).get(tx(this.userId,t)).next((n=>n?ag(this.serializer,n):null))}getOverlays(e,t){const n=Di();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((a,s)=>{const l=new Vv(t,s);i.push(this.St(e,l))})),X.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((s=>i.add(zn(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(Ic(e).Z(Ng,l))})),X.waitFor(a)}getOverlaysForCollection(e,t,n){const i=Di(),a=zn(t),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ic(e).J(Ng,s).next((l=>{for(const f of l){const h=ag(this.serializer,f);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const a=Di();let s;const l=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ic(e).ee({index:Uw,range:l},((f,h,p)=>{const m=ag(this.serializer,h);a.size()<i||m.largestBatchId===s?(a.set(m.getKey(),m),s=m.largestBatchId):p.done()})).next((()=>a))}St(e,t){return Ic(e).put((function(i,a,s){const[l,f,h]=tx(a,s.mutation.key);return{userId:a,collectionPath:f,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Zd(i.yt,s.mutation)}})(this.serializer,this.userId,t))}}function Ic(r){return gn(r,w1)}class I6{bt(e){return gn(e,Cv)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const n=t?.value;return n?rn.fromUint8Array(n):rn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class vs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Mt(e.integerValue));else if("doubleValue"in e){const n=Mt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),af(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=ca(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(fa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Zw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):S1(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const i of Object.keys(n))this.Ot(i,t),this.Ct(n[i],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const i=rl,a=n[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Mt(a)),this.Ot(i,t),this.Ct(n[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const i of n)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),pe.fromName(e).path.forEach((n=>{this.Ft(t,60),this.Ut(n,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}vs.Kt=new vs;const Mu=255;function C6(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function ax(r){const e=64-(function(n){let i=0;for(let a=0;a<8;++a){const s=C6(255&n[a]);if(i+=s,s!==8)break}return i})(r);return Math.ceil(e/8)}class b6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),n=ax(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),n=ax(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Mu),this.sn(255)}_n(){this.an(Mu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Mu?(this.sn(Mu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Mu?(this.an(Mu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class R6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class D6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cc{constructor(){this.cn=new b6,this.ln=new R6(this.cn),this.hn=new D6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class ms{constructor(e,t,n,i){this.Tn=e,this.In=t,this.En=n,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new ms(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Nd(this.En),directionalValue:Nd(this.dn),orderedDocumentKey:Nd(t),documentKey:n.path.toArray()}}Vn(e,t,n){const i=this.Rn(e,t,n);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Ja(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=ox(r.En,e.En),t!==0?t:(t=ox(r.dn,e.dn),t!==0?t:pe.comparator(r.In,e.In)))}function ox(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}function Nd(r){return hw()?(function(t){let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return n})(r):r}function sx(r){return typeof r!="string"?r:(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(r)}class ux{constructor(e){this.mn=new mt(((t,n)=>Lt.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Rg(e);if(t!==void 0&&!this.wn(t))return!1;const n=fs(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.wn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const f=n[a];if(!this.Sn(l,f)||!this.bn(this.fn[s++],f))return!1}++a}for(;a<n.length;++a){const l=n[a];if(s>=this.fn.length||!this.bn(this.fn[s++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new mt(Lt.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new Td(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Td(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Td(n.field,n.dir==="asc"?0:1)));return new Gd(Gd.UNKNOWN_ID,this.collectionId,t,rf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function FT(r){if(Ae(r instanceof Ke||r instanceof vt,20012),r instanceof Ke){if(r instanceof sT){const t=r.value.arrayValue?.values?.map((n=>Ke.create(r.field,"==",n)))||[];return vt.create(t,"or")}return r}const e=r.filters.map((t=>FT(t)));return vt.create(e,r.op)}function O6(r){if(r.getFilters().length===0)return[];const e=Kg(FT(r));return Ae(UT(e),7391),qg(e)||Xg(e)?[e]:e.getFilters()}function qg(r){return r instanceof Ke}function Xg(r){return r instanceof vt&&Nv(r)}function UT(r){return qg(r)||Xg(r)||(function(t){if(t instanceof vt&&Vg(t)){for(const n of t.getFilters())if(!qg(n)&&!Xg(n))return!1;return!0}return!1})(r)}function Kg(r){if(Ae(r instanceof Ke||r instanceof vt,34018),r instanceof Ke)return r;if(r.filters.length===1)return Kg(r.filters[0]);const e=r.filters.map((n=>Kg(n)));let t=vt.create(e,r.op);return t=e1(t),UT(t)?t:(Ae(t instanceof vt,64498),Ae(ol(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((n,i)=>Fv(n,i))))}function Fv(r,e){let t;return Ae(r instanceof Ke||r instanceof vt,38388),Ae(e instanceof Ke||e instanceof vt,25473),t=r instanceof Ke?e instanceof Ke?(function(i,a){return vt.create([i,a],"and")})(r,e):lx(r,e):e instanceof Ke?lx(e,r):(function(i,a){if(Ae(i.filters.length>0&&a.filters.length>0,48005),ol(i)&&ol(a))return iT(i,a.getFilters());const s=Vg(i)?i:a,l=Vg(i)?a:i,f=s.filters.map((h=>Fv(h,l)));return vt.create(f,"or")})(r,e),e1(t)}function lx(r,e){if(ol(e))return iT(e,r.getFilters());{const t=e.filters.map((n=>Fv(r,n)));return vt.create(t,"or")}}function e1(r){if(Ae(r instanceof Ke||r instanceof vt,11850),r instanceof Ke)return r;const e=r.getFilters();if(e.length===1)return e1(e[0]);if(nT(r))return r;const t=e.map((i=>e1(i))),n=[];return t.forEach((i=>{i instanceof Ke?n.push(i):i instanceof vt&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:vt.create(n,r.op)}class N6{constructor(){this.Cn=new Uv}addToCollectionParentIndex(e,t){return this.Cn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(xr.min())}updateCollectionGroup(e,t,n){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class Uv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new mt(st.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new mt(st.comparator)).toArray()}}const cx="IndexedDbIndexManager",dd=new Uint8Array(0);class M6{constructor(e,t){this.databaseId=t,this.vn=new Uv,this.Fn=new ga((n=>Os(n)),((n,i)=>wf(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:n,parent:zn(i)};return fx(e).put(a)}return X.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[bw(t),""],!1,!0);return fx(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==t)break;n.push(Ri(s.parent))}return n}))}addFieldIndex(e,t){const n=bc(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete i.indexId;const a=n.add(i);if(t.indexState){const s=Lu(e);return a.next((l=>{s.put(nx(l,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const n=bc(e),i=Lu(e),a=Pu(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=bc(e),n=Pu(e),i=Lu(e);return t.Z().next((()=>n.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return X.forEach(this.Mn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const a=new ux(n).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const n=Pu(e);let i=!0;const a=new Map;return X.forEach(this.Mn(t),(s=>this.xn(e,s).next((l=>{i&&(i=!!l),a.set(s,l)})))).next((()=>{if(i){let s=Ue();const l=[];return X.forEach(a,((f,h)=>{le(cx,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(f)} to execute ${Os(t)}`);const p=(function(B,H){const $=Rg(H);if($===void 0)return null;for(const J of Qd(B,$.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(h,f),m=(function(B,H){const $=new Map;for(const J of fs(H))for(const C of Qd(B,J.fieldPath))switch(C.op){case"==":case"in":$.set(J.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return $.set(J.fieldPath.canonicalString(),C.value),Array.from($.values())}return null})(h,f),_=(function(B,H){const $=[];let J=!0;for(const C of fs(H)){const b=C.kind===0?jE(B,C.fieldPath,B.startAt):HE(B,C.fieldPath,B.startAt);$.push(b.value),J&&(J=b.inclusive)}return new al($,J)})(h,f),E=(function(B,H){const $=[];let J=!0;for(const C of fs(H)){const b=C.kind===0?HE(B,C.fieldPath,B.endAt):jE(B,C.fieldPath,B.endAt);$.push(b.value),J&&(J=b.inclusive)}return new al($,J)})(h,f),T=this.On(f,h,_),S=this.On(f,h,E),D=this.Nn(f,h,m),V=this.Bn(f.indexId,p,T,_.inclusive,S,E.inclusive,D);return X.forEach(V,(M=>n.Y(M,t.limit).next((B=>{B.forEach((H=>{const $=pe.fromSegments(H.documentKey);s.has($)||(s=s.add($),l.push($))}))}))))})).next((()=>l))}return X.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=O6(vt.create(e.filters,"and")).map((n=>kg(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,n,i,a,s,l){const f=(t!=null?t.length:1)*Math.max(n.length,a.length),h=f/(t!=null?t.length:1),p=[];for(let m=0;m<f;++m){const _=t?this.Ln(t[m/h]):dd,E=this.kn(e,_,n[m%h],i),T=this.qn(e,_,a[m%h],s),S=l.map((D=>this.kn(e,_,D,!0)));p.push(...this.createRange(E,T,S))}return p}kn(e,t,n,i){const a=new ms(e,pe.empty(),t,n);return i?a:a.An()}qn(e,t,n,i){const a=new ms(e,pe.empty(),t,n);return i?a.An():a}xn(e,t){const n=new ux(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const l of a)n.yn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,t){let n=2;const i=this.Mn(t);return X.forEach(i,(a=>this.xn(e,a).next((s=>{s?n!==0&&s.fields.length<(function(f){let h=new mt(Lt.comparator),p=!1;for(const m of f.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||(_.op==="array-contains"||_.op==="array-contains-any"?p=!0:h=h.add(_.field));for(const m of f.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(t)&&i.length>1&&n===2?1:n))}Qn(e,t){const n=new Cc;for(const i of fs(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const s=n.Pn(i.kind);vs.Kt.Dt(a,s)}return n.un()}Ln(e){const t=new Cc;return vs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Cc;return vs.Kt.Dt(ff(this.databaseId,t),n.Pn((function(a){const s=fs(a);return s.length===0?0:s[s.length-1].kind})(e))),n.un()}Nn(e,t,n){if(n===null)return[];let i=[];i.push(new Cc);let a=0;for(const s of fs(e)){const l=n[a++];for(const f of i)if(this.Un(t,s.fieldPath)&&hf(l))i=this.Kn(i,s,l);else{const h=f.Pn(s.kind);vs.Kt.Dt(l,h)}}return this.Wn(i)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const l of i){const f=new Cc;f.seed(l.un()),vs.Kt.Dt(s,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((n=>n instanceof Ke&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=bc(e),i=Lu(e);return(t?n.J(Og,IDBKeyRange.bound(t,t)):n.J()).next((a=>{const s=[];return X.forEach(a,(l=>i.get([l.indexId,this.uid]).next((f=>{s.push((function(p,m){const _=m?new rf(m.sequenceNumber,new xr(Ms(m.readTime),new pe(Ri(m.documentKey)),m.largestBatchId)):rf.empty(),E=p.fields.map((([T,S])=>new Td(Lt.fromServerFormat(T),S)));return new Gd(p.indexId,p.collectionGroup,E,_)})(l,f))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Oe(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=bc(e),a=Lu(e);return this.Gn(e).next((s=>i.J(Og,IDBKeyRange.bound(t,t)).next((l=>X.forEach(l,(f=>a.put(nx(f.indexId,this.uid,s,n))))))))}updateIndexEntries(e,t){const n=new Map;return X.forEach(t,((i,a)=>{const s=n.get(i.collectionGroup);return(s?X.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(n.set(i.collectionGroup,l),X.forEach(l,(f=>this.zn(e,i,f).next((h=>{const p=this.jn(a,f);return h.isEqual(p)?X.resolve():this.Jn(e,a,f,h,p)})))))))}))}Hn(e,t,n,i){return Pu(e).put(i.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,i){return Pu(e).delete(i.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const i=Pu(e);let a=new mt(Ja);return i.ee({index:Fw,range:IDBKeyRange.only([n.indexId,this.uid,Nd(this.$n(n,t))])},((s,l)=>{a=a.add(new ms(n.indexId,t,sx(l.arrayValue),sx(l.directionalValue)))})).next((()=>a))}jn(e,t){let n=new mt(Ja);const i=this.Qn(t,e);if(i==null)return n;const a=Rg(t);if(a!=null){const s=e.data.field(a.fieldPath);if(hf(s))for(const l of s.arrayValue.values||[])n=n.add(new ms(t.indexId,e.key,this.Ln(l),i))}else n=n.add(new ms(t.indexId,e.key,dd,i));return n}Jn(e,t,n,i,a){le(cx,"Updating index entries for document '%s'",t.key);const s=[];return(function(f,h,p,m,_){const E=f.getIterator(),T=h.getIterator();let S=Nu(E),D=Nu(T);for(;S||D;){let V=!1,M=!1;if(S&&D){const B=p(S,D);B<0?M=!0:B>0&&(V=!0)}else S!=null?M=!0:V=!0;V?(m(D),D=Nu(T)):M?(_(S),S=Nu(E)):(S=Nu(E),D=Nu(T))}})(i,a,Ja,(l=>{s.push(this.Hn(e,t,n,l))}),(l=>{s.push(this.Yn(e,t,n,l))})),X.waitFor(s)}Gn(e){let t=1;return Lu(e).ee({index:kw,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((s,l)=>Ja(s,l))).filter(((s,l,f)=>!l||Ja(s,f[l-1])!==0));const i=[];i.push(e);for(const s of n){const l=Ja(s,e),f=Ja(s,t);if(l===0)i[0]=e.An();else if(l>0&&f<0)i.push(s),i.push(s.An());else if(f>0)break}i.push(t);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const l=i[s].Vn(this.uid,dd,pe.empty()),f=i[s+1].Vn(this.uid,dd,pe.empty());a.push(IDBKeyRange.bound(l,f))}return a}Zn(e,t){return Ja(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hx)}getMinOffset(e,t){return X.mapArray(this.Mn(t),(n=>this.xn(e,n).next((i=>i||ye(44426))))).next(hx)}}function fx(r){return gn(r,uf)}function Pu(r){return gn(r,Wc)}function bc(r){return gn(r,Iv)}function Lu(r){return gn(r,Yc)}function hx(r){Ae(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;wv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xr(e.readTime,e.documentKey,t)}const dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zT=41943040;class Fn{static withCacheSize(e){return new Fn(e,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function jT(r,e,t){const n=r.store(ti),i=r.store(Ju),a=[],s=IDBKeyRange.only(t.batchId);let l=0;const f=n.ee({range:s},((p,m,_)=>(l++,_.delete())));a.push(f.next((()=>{Ae(l===1,47070,{batchId:t.batchId})})));const h=[];for(const p of t.mutations){const m=Lw(e,p.key.path,t.batchId);a.push(i.delete(m)),h.push(p.key)}return X.waitFor(a).next((()=>h))}function t1(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw ye(14731);e=r.noDocument}return JSON.stringify(e).length}Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(zT,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);class M1{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Xn={}}static wt(e,t,n,i){Ae(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new M1(a,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eo(e).ee({index:ys,range:n},((i,a,s)=>{t=!1,s.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const a=ju(e),s=eo(e);return s.add({}).next((l=>{Ae(typeof l=="number",49019);const f=new Pv(l,t,n,i),h=(function(E,T,S){const D=S.baseMutations.map((M=>Zd(E.yt,M))),V=S.mutations.map((M=>Zd(E.yt,M)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:D,mutations:V}})(this.serializer,this.userId,f),p=[];let m=new mt(((_,E)=>Oe(_.canonicalString(),E.canonicalString())));for(const _ of i){const E=Lw(this.userId,_.key.path,l);m=m.add(_.key.path.popLast()),p.push(s.put(h)),p.push(a.put(E,s8))}return m.forEach((_=>{p.push(this.indexManager.addToCollectionParentIndex(e,_))})),e.addOnCommittedListener((()=>{this.Xn[l]=f.keys()})),X.waitFor(p).next((()=>f))}))}lookupMutationBatch(e,t){return eo(e).get(t).next((n=>n?(Ae(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),gs(this.serializer,n)):null))}er(e,t){return this.Xn[t]?X.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return eo(e).ee({index:ys,range:i},((s,l,f)=>{l.userId===this.userId&&(Ae(l.batchId>=n,47524,{tr:n}),a=gs(this.serializer,l)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=xs;return eo(e).ee({index:ys,range:t,reverse:!0},((i,a,s)=>{n=a.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,xs],[this.userId,Number.POSITIVE_INFINITY]);return eo(e).J(ys,t).next((n=>n.map((i=>gs(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Sd(this.userId,t.path),i=IDBKeyRange.lowerBound(n),a=[];return ju(e).ee({range:i},((s,l,f)=>{const[h,p,m]=s,_=Ri(p);if(h===this.userId&&t.path.isEqual(_))return eo(e).get(m).next((E=>{if(!E)throw ye(61480,{nr:s,batchId:m});Ae(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:m}),a.push(gs(this.serializer,E))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(Oe);const i=[];return t.forEach((a=>{const s=Sd(this.userId,a.path),l=IDBKeyRange.lowerBound(s),f=ju(e).ee({range:l},((h,p,m)=>{const[_,E,T]=h,S=Ri(E);_===this.userId&&a.path.isEqual(S)?n=n.add(T):m.done()}));i.push(f)})),X.waitFor(i).next((()=>this.rr(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,a=Sd(this.userId,n),s=IDBKeyRange.lowerBound(a);let l=new mt(Oe);return ju(e).ee({range:s},((f,h,p)=>{const[m,_,E]=f,T=Ri(_);m===this.userId&&n.isPrefixOf(T)?T.length===i&&(l=l.add(E)):p.done()})).next((()=>this.rr(e,l)))}rr(e,t){const n=[],i=[];return t.forEach((a=>{i.push(eo(e).get(a).next((s=>{if(s===null)throw ye(35274,{batchId:a});Ae(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),n.push(gs(this.serializer,s))})))})),X.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return jT(e.le,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),X.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return X.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return ju(e).ee({range:n},((a,s,l)=>{if(a[0]===this.userId){const f=Ri(a[1]);i.push(f)}else l.done()})).next((()=>{Ae(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return HT(e,this.userId,t)}_r(e){return GT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:xs,lastStreamToken:""}))}}function HT(r,e,t){const n=Sd(e,t.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return ju(r).ee({range:a,X:!0},((l,f,h)=>{const[p,m,_]=l;p===e&&m===i&&(s=!0),h.done()})).next((()=>s))}function eo(r){return gn(r,ti)}function ju(r){return gn(r,Ju)}function GT(r){return gn(r,of)}class Ps{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ps(0)}static cr(){return new Ps(-1)}}class P6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const n=new Ps(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Se.fromTimestamp(new gt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Vu(e).delete(t.targetId))).next((()=>this.lr(e))).next((n=>(Ae(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n))))}removeTargets(e,t,n){let i=0;const a=[];return Vu(e).ee(((s,l)=>{const f=Fc(l);f.sequenceNumber<=t&&n.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))})).next((()=>X.waitFor(a))).next((()=>i))}forEachTarget(e,t){return Vu(e).ee(((n,i)=>{const a=Fc(i);t(a)}))}lr(e){return px(e).get(Kd).next((t=>(Ae(t!==null,2888),t)))}hr(e,t){return px(e).put(Kd,t)}Pr(e,t){return Vu(e).put(BT(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const n=Os(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return Vu(e).ee({range:i,index:Bw},((s,l,f)=>{const h=Fc(l);wf(t,h.target)&&(a=h,f.done())})).next((()=>a))}addMatchingKeys(e,t,n){const i=[],a=oo(e);return t.forEach((s=>{const l=zn(s.path);i.push(a.put({targetId:n,path:l})),i.push(this.referenceDelegate.addReference(e,n,s))})),X.waitFor(i)}removeMatchingKeys(e,t,n){const i=oo(e);return X.forEach(t,(a=>{const s=zn(a.path);return X.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,t){const n=oo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=oo(e);let a=Ue();return i.ee({range:n,X:!0},((s,l,f)=>{const h=Ri(s[1]),p=new pe(h);a=a.add(p)})).next((()=>a))}containsKey(e,t){const n=zn(t.path),i=IDBKeyRange.bound([n],[bw(n)],!1,!0);let a=0;return oo(e).ee({index:Sv,X:!0,range:i},(([s,l],f,h)=>{s!==0&&(a++,h.done())})).next((()=>a>0))}At(e,t){return Vu(e).get(t).next((n=>n?Fc(n):null))}}function Vu(r){return gn(r,el)}function px(r){return gn(r,As)}function oo(r){return gn(r,tl)}const gx="LruGarbageCollector",L6=1048576;function vx([r,e],[t,n]){const i=Oe(r,t);return i===0?Oe(e,n):i}class V6{constructor(e){this.Ir=e,this.buffer=new mt(vx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();vx(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qT{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(gx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Co(t)?le(gx,"Ignoring IndexedDB error during garbage collection: ",t):await ks(t)}await this.Vr(3e5)}))}}class B6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Br.ce);const n=new V6(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(dx)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,a,s,l,f,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(n=m,l=Date.now(),this.removeTargets(e,n,t)))).next((m=>(a=m,f=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),ku()<=Xe.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${a} targets in `+(f-l)+`ms
	Removed ${m} documents in `+(h-f)+`ms
Total Duration: ${h-p}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m}))))}}function XT(r,e){return new B6(r,e)}class k6{constructor(e,t){this.db=e,this.garbageCollector=XT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((n,i)=>t(i)))}addReference(e,t,n){return pd(e,n)}removeReference(e,t,n){return pd(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return pd(e,t)}br(e,t){return(function(i,a){let s=!1;return GT(i).te((l=>HT(i,l,a).next((f=>(f&&(s=!0),X.resolve(!f)))))).next((()=>s))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,l)=>{if(l<=t){const f=this.br(e,s).next((h=>{if(!h)return a++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Se.min()),oo(e).delete((function(m){return[0,zn(m.path)]})(s)))))}));i.push(f)}})).next((()=>X.waitFor(i))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return pd(e,t)}Sr(e,t){const n=oo(e);let i,a=Br.ce;return n.ee({index:Sv},(([s,l],{path:f,sequenceNumber:h})=>{s===0?(a!==Br.ce&&t(new pe(Ri(i)),a),a=h,i=f):a=Br.ce})).next((()=>{a!==Br.ce&&t(new pe(Ri(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pd(r,e){return oo(r).put((function(n,i){return{targetId:0,path:zn(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}class KT{constructor(){this.changes=new ga((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?X.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class F6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return os(e).put(n)}removeEntry(e,t,n){return os(e).delete((function(a,s){const l=a.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Jd(s),l[l.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Dr(e,n))))}getEntry(e,t){let n=Ft.newInvalidDocument(t);return os(e).ee({index:Id,range:IDBKeyRange.only(Rc(t))},((i,a)=>{n=this.Cr(t,a)})).next((()=>n))}vr(e,t){let n={size:0,document:Ft.newInvalidDocument(t)};return os(e).ee({index:Id,range:IDBKeyRange.only(Rc(t))},((i,a)=>{n={document:this.Cr(t,a),size:t1(a)}})).next((()=>n))}getEntries(e,t){let n=Er();return this.Fr(e,t,((i,a)=>{const s=this.Cr(i,a);n=n.insert(i,s)})).next((()=>n))}Mr(e,t){let n=Er(),i=new Pt(pe.comparator);return this.Fr(e,t,((a,s)=>{const l=this.Cr(a,s);n=n.insert(a,l),i=i.insert(a,t1(s))})).next((()=>({documents:n,Or:i})))}Fr(e,t,n){if(t.isEmpty())return X.resolve();let i=new mt(_x);t.forEach((f=>i=i.add(f)));const a=IDBKeyRange.bound(Rc(i.first()),Rc(i.last())),s=i.getIterator();let l=s.getNext();return os(e).ee({index:Id,range:a},((f,h,p)=>{const m=pe.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&_x(l,m)<0;)n(l,null),l=s.getNext();l&&l.isEqual(m)&&(n(l,h),l=s.hasNext()?s.getNext():null),l?p.j(Rc(l)):p.done()})).next((()=>{for(;l;)n(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,a){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),Jd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],f=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return os(e).J(IDBKeyRange.bound(l,f,!0)).next((h=>{a?.incrementDocumentReadCount(h.length);let p=Er();for(const m of h){const _=this.Cr(pe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Tf(t,_)||i.has(_.key))&&(p=p.insert(_.key,_))}return p}))}getAllFromCollectionGroup(e,t,n,i){let a=Er();const s=yx(t,n),l=yx(t,xr.max());return os(e).ee({index:Vw,range:IDBKeyRange.bound(s,l,!0)},((f,h,p)=>{const m=this.Cr(pe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(m.key,m),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(e){return new U6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return mx(e).get(Dg).next((t=>(Ae(!!t,20021),t)))}Dr(e,t){return mx(e).put(Dg,t)}Cr(e,t){if(t){const n=T6(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Se.min())))return n}return Ft.newInvalidDocument(e)}}function YT(r){return new F6(r)}class U6 extends KT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ga((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new mt(((a,s)=>Oe(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const l=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,l.readTime)),s.isValidDocument()){const f=ex(this.Nr.serializer,s);i=i.add(a.path.popLast());const h=t1(f);n+=h-l.size,t.push(this.Nr.addEntry(e,a,f))}else if(n-=l.size,this.trackRemovals){const f=ex(this.Nr.serializer,s.convertToNoDocument(Se.min()));t.push(this.Nr.addEntry(e,a,f))}})),i.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,n)),X.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:n,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:n.get(a).readTime})})),n)))}}function mx(r){return gn(r,sf)}function os(r){return gn(r,Xd)}function Rc(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yx(r,e){const t=e.documentKey.path.toArray();return[r,Jd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function _x(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(i=Oe(t[a],n[a]),i)return i;return i=Oe(t.length,n.length),i||(i=Oe(t[t.length-2],n[n.length-2]),i||Oe(t[t.length-1],n[n.length-1]))}class z6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WT{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&Jc(n.mutation,i,sr.empty(),gt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ue()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ue()){const i=Di();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((a=>{let s=Bc();return a.forEach(((l,f)=>{s=s.insert(l,f.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const n=Di();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ue())))}populateOverlays(e,t,n){const i=[];return n.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,l)=>{t.set(s,l)}))}))}computeViews(e,t,n,i){let a=Er();const s=Zc(),l=(function(){return Zc()})();return t.forEach(((f,h)=>{const p=n.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof va)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),Jc(p.mutation,h,p.mutation.getFieldMask(),gt.now())):s.set(h.key,sr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,p)=>s.set(h,p))),t.forEach(((h,p)=>l.set(h,new z6(p,s.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,t){const n=Zc();let i=new Pt(((s,l)=>s-l)),a=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const l of s)l.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let p=n.get(f)||sr.empty();p=l.applyToLocalView(h,p),n.set(f,p);const m=(i.get(l.batchId)||Ue()).add(f);i=i.insert(l.batchId,m)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const f=l.getNext(),h=f.key,p=f.value,m=dT();p.forEach((_=>{if(!a.has(_)){const E=_T(t.get(_),n.get(_));E!==null&&m.set(_,E),a=a.add(_)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return X.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):X.resolve(Di());let l=nf,f=a;return s.next((h=>X.forEach(h,((p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(p)?X.resolve():this.remoteDocumentCache.getEntry(e,p).next((_=>{f=f.insert(p,_)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Ue()))).next((p=>({batchId:l,changes:hT(p)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((n=>{let i=Bc();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let s=Bc();return this.indexManager.getCollectionParents(e,a).next((l=>X.forEach(l,(f=>{const h=(function(m,_){return new gl(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,n,i).next((p=>{p.forEach(((m,_)=>{s=s.insert(m,_)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i)))).next((s=>{a.forEach(((f,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,Ft.newInvalidDocument(p)))}));let l=Bc();return s.forEach(((f,h)=>{const p=a.get(f);p!==void 0&&Jc(p.mutation,h,sr.empty(),gt.now()),Tf(t,h)&&(l=l.insert(f,h))})),l}))}}class j6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return X.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:kT(i.bundledQuery),readTime:$n(i.readTime)}})(t)),X.resolve()}}class H6{constructor(){this.overlays=new Pt(pe.comparator),this.qr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Di();return X.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,a)=>{this.St(e,t,a)})),X.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(n)),X.resolve()}getOverlaysForCollection(e,t,n){const i=Di(),a=t.length+1,s=new pe(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const f=l.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>n&&i.set(f.getKey(),f)}return X.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new Pt(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>n){let p=a.get(h.largestBatchId);p===null&&(p=Di(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Di(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return X.resolve(l)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new Vv(t,n));let a=this.qr.get(t);a===void 0&&(a=Ue(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}class G6{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}class zv{constructor(){this.Qr=new mt(xn.$r),this.Ur=new mt(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new xn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new xn(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new pe(new st([])),n=new xn(t,e),i=new xn(t,e+1),a=[];return this.Ur.forEachInRange([n,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pe(new st([])),n=new xn(t,e),i=new xn(t,e+1);let a=Ue();return this.Ur.forEachInRange([n,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new xn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class xn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pe.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||pe.comparator(e.key,t.key)}}class q6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(xn.$r)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Pv(a,t,n,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new xn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return X.resolve(s)}lookupMutationBatch(e,t){return X.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),a=i<0?0:i;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?xs:this.tr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xn(t,0),i=new xn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,i],(s=>{const l=this.Xr(s.Yr);a.push(l)})),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(Oe);return t.forEach((i=>{const a=new xn(i,0),s=new xn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(l=>{n=n.add(l.Yr)}))})),X.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;pe.isDocumentKey(a)||(a=a.child(""));const s=new xn(new pe(a),0);let l=new mt(Oe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!n.isPrefixOf(h)&&(h.length===i&&(l=l.add(f.Yr)),!0)}),s),X.resolve(this.ti(l))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ae(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return X.forEach(t.mutations,(i=>{const a=new xn(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new xn(t,0),i=this.Zr.firstAfterOrEqual(n);return X.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class X6{constructor(e){this.ri=e,this.docs=(function(){return new Pt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return X.resolve(n?n.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let n=Er();return t.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Ft.newInvalidDocument(i))})),X.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=Er();const s=t.path,l=new pe(s.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:h,value:{document:p}}=f.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||wv(Ow(p),n)<=0||(i.has(p.key)||Tf(t,p))&&(a=a.insert(p.key,p.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,n,i){ye(9500)}ii(e,t){return X.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new K6(this)}getSize(e){return X.resolve(this.size)}}class K6 extends KT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),X.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Y6{constructor(e){this.persistence=e,this.si=new ga((t=>Os(t)),wf),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new zv,this.targetCount=0,this.ai=Ps.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),X.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ps(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.Pr(t),X.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),X.waitFor(a).next((()=>i))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return X.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),X.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return X.resolve(n)}containsKey(e,t){return X.resolve(this._i.containsKey(t))}}class jv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Br(0),this.li=!1,this.li=!0,this.hi=new G6,this.referenceDelegate=e(this),this.Pi=new Y6(this),this.indexManager=new N6,this.remoteDocumentCache=(function(i){return new X6(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new VT(t),this.Ii=new j6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new H6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new q6(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){le("MemoryPersistence","Starting transaction:",e);const i=new W6(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return X.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class W6 extends Mw{constructor(e){super(),this.currentSequenceNumber=e}}class P1{constructor(e){this.persistence=e,this.Ri=new zv,this.Vi=null}static mi(e){return new P1(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),X.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.fi,(n=>{const i=pe.fromPath(n);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class n1{constructor(e,t){this.persistence=e,this.pi=new ga((n=>zn(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=XT(this,t)}static mi(e,t){return new n1(e,t)}Ei(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return X.forEach(this.pi,((n,i)=>this.br(e,n,i).next((a=>a?X.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((l=>{l||(n++,a.removeEntry(s,Se.min()))})))).next((()=>a.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),X.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}br(e,t,n){return X.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return X.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Q6{constructor(e){this.serializer=e}k(e,t,n,i){const a=new _1("createOrUpgrade",t);n<1&&i>=1&&((function(f){f.createObjectStore(Af)})(e),(function(f){f.createObjectStore(of,{keyPath:o8}),f.createObjectStore(ti,{keyPath:DE,autoIncrement:!0}).createIndex(ys,OE,{unique:!0}),f.createObjectStore(Ju)})(e),Ex(e),(function(f){f.createObjectStore(hs)})(e));let s=X.resolve();return n<3&&i>=3&&(n!==0&&((function(f){f.deleteObjectStore(tl),f.deleteObjectStore(el),f.deleteObjectStore(As)})(e),Ex(e)),s=s.next((()=>(function(f){const h=f.store(As),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return h.put(Kd,p)})(a)))),n<4&&i>=4&&(n!==0&&(s=s.next((()=>(function(f,h){return h.store(ti).J().next((m=>{f.deleteObjectStore(ti),f.createObjectStore(ti,{keyPath:DE,autoIncrement:!0}).createIndex(ys,OE,{unique:!0});const _=h.store(ti),E=m.map((T=>_.put(T)));return X.waitFor(E)}))})(e,a)))),s=s.next((()=>{(function(f){f.createObjectStore(nl,{keyPath:g8})})(e)}))),n<5&&i>=5&&(s=s.next((()=>this.yi(a)))),n<6&&i>=6&&(s=s.next((()=>((function(f){f.createObjectStore(sf)})(e),this.wi(a))))),n<7&&i>=7&&(s=s.next((()=>this.Si(a)))),n<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),n<9&&i>=9&&(s=s.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(s=s.next((()=>this.Di(a)))),n<11&&i>=11&&(s=s.next((()=>{(function(f){f.createObjectStore(x1,{keyPath:v8})})(e),(function(f){f.createObjectStore(A1,{keyPath:m8})})(e)}))),n<12&&i>=12&&(s=s.next((()=>{(function(f){const h=f.createObjectStore(w1,{keyPath:T8});h.createIndex(Ng,S8,{unique:!1}),h.createIndex(Uw,I8,{unique:!1})})(e)}))),n<13&&i>=13&&(s=s.next((()=>(function(f){const h=f.createObjectStore(Xd,{keyPath:u8});h.createIndex(Id,l8),h.createIndex(Vw,c8)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(hs)))),n<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),n<15&&i>=15&&(s=s.next((()=>(function(f){f.createObjectStore(Iv,{keyPath:y8,autoIncrement:!0}).createIndex(Og,_8,{unique:!1}),f.createObjectStore(Yc,{keyPath:E8}).createIndex(kw,x8,{unique:!1}),f.createObjectStore(Wc,{keyPath:A8}).createIndex(Fw,w8,{unique:!1})})(e)))),n<16&&i>=16&&(s=s.next((()=>{t.objectStore(Yc).clear()})).next((()=>{t.objectStore(Wc).clear()}))),n<17&&i>=17&&(s=s.next((()=>{(function(f){f.createObjectStore(Cv,{keyPath:C8})})(e)}))),n<18&&i>=18&&hw()&&(s=s.next((()=>{t.objectStore(Yc).clear()})).next((()=>{t.objectStore(Wc).clear()}))),s}wi(e){let t=0;return e.store(hs).ee(((n,i)=>{t+=t1(i)})).next((()=>{const n={byteSize:t};return e.store(sf).put(Dg,n)}))}yi(e){const t=e.store(of),n=e.store(ti);return t.J().next((i=>X.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,xs],[a.userId,a.lastAcknowledgedBatchId]);return n.J(ys,s).next((l=>X.forEach(l,(f=>{Ae(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const h=gs(this.serializer,f);return jT(e,a.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(tl),n=e.store(hs);return e.store(As).get(Kd).next((i=>{const a=[];return n.ee(((s,l)=>{const f=new st(s),h=(function(m){return[0,zn(m)]})(f);a.push(t.get(h).next((p=>p?X.resolve():(m=>t.put({targetId:0,path:zn(m),sequenceNumber:i.highestListenSequenceNumber}))(f))))})).next((()=>X.waitFor(a)))}))}bi(e,t){e.createObjectStore(uf,{keyPath:p8});const n=t.store(uf),i=new Uv,a=s=>{if(i.add(s)){const l=s.lastSegment(),f=s.popLast();return n.put({collectionId:l,parent:zn(f)})}};return t.store(hs).ee({X:!0},((s,l)=>{const f=new st(s);return a(f.popLast())})).next((()=>t.store(Ju).ee({X:!0},(([s,l,f],h)=>{const p=Ri(l);return a(p.popLast())}))))}Di(e){const t=e.store(el);return t.ee(((n,i)=>{const a=Fc(i),s=BT(this.serializer,a);return t.put(s)}))}Ci(e,t){const n=t.store(hs),i=[];return n.ee(((a,s)=>{const l=t.store(Xd),f=(function(m){return m.document?new pe(st.fromString(m.document.name).popFirst(5)):m.noDocument?pe.fromSegments(m.noDocument.path):m.unknownDocument?pe.fromSegments(m.unknownDocument.path):ye(36783)})(s).path.toArray(),h={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(h))})).next((()=>X.waitFor(i)))}Fi(e,t){const n=t.store(ti),i=YT(this.serializer),a=new jv(P1.mi,this.serializer.yt);return n.J().next((s=>{const l=new Map;return s.forEach((f=>{let h=l.get(f.userId)??Ue();gs(this.serializer,f).keys().forEach((p=>h=h.add(p))),l.set(f.userId,h)})),X.forEach(l,((f,h)=>{const p=new Mn(h),m=N1.wt(this.serializer,p),_=a.getIndexManager(p),E=M1.wt(p,this.serializer,_,a.referenceDelegate);return new WT(i,E,m,_).recalculateAndSaveOverlaysForDocumentKeys(new Mg(t,Br.ce),f).next()}))}))}}function Ex(r){r.createObjectStore(tl,{keyPath:h8}).createIndex(Sv,d8,{unique:!0}),r.createObjectStore(el,{keyPath:"targetId"}).createIndex(Bw,f8,{unique:!0}),r.createObjectStore(As)}const to="IndexedDbPersistence",og=18e5,sg=5e3,ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$6="main";class Hv{constructor(e,t,n,i,a,s,l,f,h,p,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=a,this.window=s,this.document=l,this.xi=h,this.Oi=p,this.Ni=m,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=_=>Promise.resolve(),!Hv.v())throw new he(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k6(this,i),this.$i=t+$6,this.serializer=new VT(f),this.Ui=new _o(this.$i,this.Ni,new Q6(this.serializer)),this.hi=new I6,this.Pi=new P6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YT(this.serializer),this.Ii=new S6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Wn(to,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ae.FAILED_PRECONDITION,ug);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Br(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Co(e))return le(to,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(to,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Dc(e).get(Ou).next((t=>X.resolve(this.es(t))))}ts(e){return gd(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,og)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gn(t,nl);return n.J().next((i=>{const a=this.ss(i,og),s=i.filter((l=>a.indexOf(l)===-1));return X.forEach(s,(l=>n.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?X.resolve(!0):Dc(e).get(Ou).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sg)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new he(ae.FAILED_PRECONDITION,ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||gd(e).J().next((n=>this.ss(n,sg).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(a||s&&l)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(to,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Af,nl],(e=>{const t=new Mg(e,Br.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>gd(e).J().next((t=>this.ss(t,og).map((n=>n.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return M1.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new M6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return N1.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){le(to,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?D8:f===17?Gw:f===16?R8:f===15?bv:f===14?Hw:f===13?jw:f===12?b8:f===11?zw:void ye(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(l=>(s=new Mg(l,this.ci?this.ci.next():Br.ce),t==="readwrite-primary"?this.Hi(s).next((f=>!!f||this.Yi(s))).next((f=>{if(!f)throw Wn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new he(ae.FAILED_PRECONDITION,Nw);return n(s)})).next((f=>this.Xi(s).next((()=>f)))):this.Is(s).next((()=>n(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Is(e){return Dc(e).get(Ou).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,sg)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ae.FAILED_PRECONDITION,ug)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dc(e).put(Ou,t)}static v(){return _o.v()}Zi(e){const t=Dc(e);return t.get(Ou).next((n=>this.es(n)?(le(to,"Releasing primary lease."),t.delete(Ou)):X.resolve()))}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Wn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;fw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(to,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Wn(to,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Wn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dc(r){return gn(r,Af)}function gd(r){return gn(r,nl)}function Z6(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Gv{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Ue(),i=Ue();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Gv(e,t.fromCache,n,i)}}class J6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class QT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fw()?8:Pw(pn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.ys(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,t,i,n).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new J6;return this.Ss(e,t,s).next((l=>{if(a.result=l,this.Vs)return this.bs(e,t,s,l.size)}))})).next((()=>a.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(ku()<=Xe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Fu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),X.resolve()):(ku()<=Xe.DEBUG&&le("QueryEngine","Query:",Fu(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(ku()<=Xe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Fu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):X.resolve())}ys(e,t){if(GE(t))return X.resolve(null);let n=Fr(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Ug(t,null,"F"),n=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const s=Ue(...a);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,n).next((f=>{const h=this.Ds(t,l);return this.Cs(t,h,s,f.readTime)?this.ys(e,Ug(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,n,i){return GE(t)||i.isEqual(Se.min())?X.resolve(null):this.ps.getDocuments(e,n).next((a=>{const s=this.Ds(t,a);return this.Cs(t,s,n,i)?X.resolve(null):(ku()<=Xe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fu(t)),this.vs(e,s,t,Jb(i,nf)).next((l=>l)))}))}Ds(e,t){let n=new mt(cT(e));return t.forEach(((i,a)=>{Tf(e,a)&&(n=n.add(a))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,n){return ku()<=Xe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Fu(t)),this.ps.getDocumentsMatchingQuery(e,t,xr.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}const qv="LocalStore",eR=3e8;class tR{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Pt(Oe),this.xs=new ga((a=>Os(a)),wf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $T(r,e,t,n){return new tR(r,e,t,n)}async function ZT(r,e){const t=Ne(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const s=[],l=[];let f=Ue();for(const h of i){s.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)f=f.add(p.key)}return t.localDocuments.getDocuments(n,f).next((h=>({Ls:h,removedBatchIds:s,addedBatchIds:l})))}))}))}function nR(r,e){const t=Ne(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,f,h,p){const m=h.batch,_=m.keys();let E=X.resolve();return _.forEach((T=>{E=E.next((()=>p.getEntry(f,T))).next((S=>{const D=h.docVersions.get(T);Ae(D!==null,48541),S.version.compareTo(D)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(f,m)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(l){let f=Ue();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(f=f.add(l.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function JT(r){const e=Ne(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function rR(r,e){const t=Ne(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const l=[];e.targetChanges.forEach(((p,m)=>{const _=i.get(m);if(!_)return;l.push(t.Pi.removeMatchingKeys(a,p.removedDocuments,m).next((()=>t.Pi.addMatchingKeys(a,p.addedDocuments,m))));let E=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(rn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,n)),i=i.insert(m,E),(function(S,D,V){return S.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=eR?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(_,E,p)&&l.push(t.Pi.updateTargetData(a,E))}));let f=Er(),h=Ue();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(iR(a,s,e.documentUpdates).next((p=>{f=p.ks,h=p.qs}))),!n.isEqual(Se.min())){const p=t.Pi.getLastRemoteSnapshotVersion(a).next((m=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n)));l.push(p)}return X.waitFor(l).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function iR(r,e,t){let n=Ue(),i=Ue();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let s=Er();return t.forEach(((l,f)=>{const h=a.get(l);f.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),f.isNoDocument()&&f.version.isEqual(Se.min())?(e.removeEntry(l,f.readTime),s=s.insert(l,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),s=s.insert(l,f)):le(qv,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",f.version)})),{ks:s,qs:i}}))}function aR(r,e){const t=Ne(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=xs),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function oR(r,e){const t=Ne(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((a=>a?(i=a,X.resolve(i)):t.Pi.allocateTargetId(n).next((s=>(i=new aa(e,s,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function Yg(r,e,t){const n=Ne(r),i=n.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Co(s))throw s;le(qv,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function xx(r,e,t){const n=Ne(r);let i=Se.min(),a=Ue();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(f,h,p){const m=Ne(f),_=m.xs.get(p);return _!==void 0?X.resolve(m.Ms.get(_)):m.Pi.getTargetData(h,p)})(n,s,Fr(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,l.targetId).next((f=>{a=f}))})).next((()=>n.Fs.getDocumentsMatchingQuery(s,e,t?i:Se.min(),t?a:Ue()))).next((l=>(sR(n,q8(e),l),{documents:l,Qs:a})))))}function sR(r,e,t){let n=r.Os.get(e)||Se.min();t.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.Os.set(e,n)}class Ax{constructor(){this.activeTargetIds=$8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e3{constructor(){this.Mo=new Ax,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ax,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uR{Oo(e){}shutdown(){}}const wx="ConnectivityMonitor";class Tx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(wx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(wx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let vd=null;function Wg(){return vd===null?vd=(function(){return 268435456+Math.round(2147483648*Math.random())})():vd++,"0x"+vd.toString(16)}const lg="RestConnection",lR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===Yd?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,a){const s=Wg(),l=this.zo(e,t.toUriEncodedString());le(lg,`Sending RPC '${e}' ${s}:`,l,n);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:h}=new URL(l),p=hl(h);return this.Jo(e,l,f,n,p).then((m=>(le(lg,`Received RPC '${e}' ${s}: `,m),m)),(m=>{throw Rs(lg,`RPC '${e}' ${s} failed with error: `,m,"url: ",l,"request:",n),m}))}Ho(e,t,n,i,a,s){return this.Go(e,t,n,i,a)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),n&&n.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const n=lR[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class fR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Bn="WebChannelConnection";class hR extends cR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,a){const s=Wg();return new Promise(((l,f)=>{const h=new xw;h.setWithCredentials(!0),h.listenOnce(Aw.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case wd.NO_ERROR:const m=h.getResponseJson();le(Bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),l(m);break;case wd.TIMEOUT:le(Bn,`RPC '${e}' ${s} timed out`),f(new he(ae.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const _=h.getStatus();if(le(Bn,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const T=E?.error;if(T&&T.status&&T.message){const S=(function(V){const M=V.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(M)>=0?M:ae.UNKNOWN})(T.status);f(new he(S,T.message))}else f(new he(ae.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new he(ae.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:s,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{le(Bn,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(i);le(Bn,`RPC '${e}' ${s} sending request:`,i),h.send(t,"POST",p,n,15)}))}T_(e,t,n){const i=Wg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Sw(),l=Tw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,n),f.encodeInitMessageHeaders=!0;const p=a.join("");le(Bn,`Creating RPC '${e}' stream ${i}: ${p}`,f);const m=s.createWebChannel(p,f);this.I_(m);let _=!1,E=!1;const T=new fR({Yo:D=>{E?le(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(_||(le(Bn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),le(Bn,`RPC '${e}' stream ${i} sending:`,D),m.send(D))},Zo:()=>m.close()}),S=(D,V,M)=>{D.listen(V,(B=>{try{M(B)}catch(H){setTimeout((()=>{throw H}),0)}}))};return S(m,Vc.EventType.OPEN,(()=>{E||(le(Bn,`RPC '${e}' stream ${i} transport opened.`),T.o_())})),S(m,Vc.EventType.CLOSE,(()=>{E||(E=!0,le(Bn,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(m))})),S(m,Vc.EventType.ERROR,(D=>{E||(E=!0,Rs(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),T.a_(new he(ae.UNAVAILABLE,"The operation could not be completed")))})),S(m,Vc.EventType.MESSAGE,(D=>{if(!E){const V=D.data[0];Ae(!!V,16349);const M=V,B=M?.error||M[0]?.error;if(B){le(Bn,`RPC '${e}' stream ${i} received error:`,B);const H=B.status;let $=(function(b){const N=en[b];if(N!==void 0)return AT(N)})(H),J=B.message;$===void 0&&($=ae.INTERNAL,J="Unknown error status: "+H+" with message "+B.message),E=!0,T.a_(new he($,J)),m.close()}else le(Bn,`RPC '${e}' stream ${i} received:`,V),T.u_(V)}})),S(l,ww.STAT_EVENT,(D=>{D.stat===Cg.PROXY?le(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===Cg.NOPROXY&&le(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.__()}),0),T}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function dR(){return typeof window<"u"?window:null}function Md(){return typeof document<"u"?document:null}function L1(r){return new p6(r,!0)}class t3{constructor(e,t,n=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Sx="PersistentStream";class n3{constructor(e,t,n,i,a,s,l,f){this.Mi=e,this.S_=n,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new t3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Wn(t.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new he(ae.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(Sx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(Sx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pR extends n3{constructor(e,t,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=m6(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Se.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Se.min():s.readTime?$n(s.readTime):Se.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Hg(this.serializer),t.addTarget=(function(a,s){let l;const f=s.target;if(l=Wd(f)?{documents:DT(a,f)}:{query:OT(a,f).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=ST(a,s.resumeToken);const h=zg(a,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(Se.min())>0){l.readTime=ll(a,s.snapshotVersion.toTimestamp());const h=zg(a,s.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const n=_6(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.q_(t)}}class gR extends n3{constructor(e,t,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=y6(e.writeResults,e.commitTime),n=$n(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Hg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>Zd(this.serializer,n)))};this.q_(t)}}class vR{}class mR extends vR{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new he(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,jg(t,n),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ae.UNKNOWN,a.toString())}))}Ho(e,t,n,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,jg(t,n),i,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(ae.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wn(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ls="RemoteStore";class _R{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{n.enqueueAndForget((async()=>{Fs(this)&&(le(Ls,"Restarting streams for network reachability change."),await(async function(f){const h=Ne(f);h.Ea.add(4),await If(h),h.Ra.set("Unknown"),h.Ea.delete(4),await V1(h)})(this))}))})),this.Ra=new yR(n,i)}}async function V1(r){if(Fs(r))for(const e of r.da)await e(!0)}async function If(r){for(const e of r.da)await e(!1)}function r3(r,e){const t=Ne(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Wv(t)?Yv(t):ml(t).O_()&&Kv(t,e))}function Xv(r,e){const t=Ne(r),n=ml(t);t.Ia.delete(e),n.O_()&&i3(t,e),t.Ia.size===0&&(n.O_()?n.L_():Fs(t)&&t.Ra.set("Unknown"))}function Kv(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ml(r).Y_(e)}function i3(r,e){r.Va.Ue(e),ml(r).Z_(e)}function Yv(r){r.Va=new c6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ml(r).start(),r.Ra.ua()}function Wv(r){return Fs(r)&&!ml(r).x_()&&r.Ia.size>0}function Fs(r){return Ne(r).Ea.size===0}function a3(r){r.Va=void 0}async function ER(r){r.Ra.set("Online")}async function xR(r){r.Ia.forEach(((e,t)=>{Kv(r,e)}))}async function AR(r,e){a3(r),Wv(r)?(r.Ra.ha(e),Yv(r)):r.Ra.set("Unknown")}async function wR(r,e,t){if(r.Ra.set("Online"),e instanceof TT&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(r,e)}catch(n){le(Ls,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await r1(r,n)}else if(e instanceof Od?r.Va.Ze(e):e instanceof wT?r.Va.st(e):r.Va.tt(e),!t.isEqual(Se.min()))try{const n=await JT(r.localStore);t.compareTo(n)>=0&&await(function(a,s){const l=a.Va.Tt(s);return l.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(f.resumeToken,s))}})),l.targetMismatches.forEach(((f,h)=>{const p=a.Ia.get(f);if(!p)return;a.Ia.set(f,p.withResumeToken(rn.EMPTY_BYTE_STRING,p.snapshotVersion)),i3(a,f);const m=new aa(p.target,f,h,p.sequenceNumber);Kv(a,m)})),a.remoteSyncer.applyRemoteEvent(l)})(r,t)}catch(n){le(Ls,"Failed to raise snapshot:",n),await r1(r,n)}}async function r1(r,e,t){if(!Co(e))throw e;r.Ea.add(1),await If(r),r.Ra.set("Offline"),t||(t=()=>JT(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{le(Ls,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await V1(r)}))}function o3(r,e){return e().catch((t=>r1(r,t,e)))}async function Cf(r){const e=Ne(r),t=So(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xs;for(;TR(e);)try{const i=await aR(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,SR(e,i)}catch(i){await r1(e,i)}s3(e)&&u3(e)}function TR(r){return Fs(r)&&r.Ta.length<10}function SR(r,e){r.Ta.push(e);const t=So(r);t.O_()&&t.X_&&t.ea(e.mutations)}function s3(r){return Fs(r)&&!So(r).x_()&&r.Ta.length>0}function u3(r){So(r).start()}async function IR(r){So(r).ra()}async function CR(r){const e=So(r);for(const t of r.Ta)e.ea(t.mutations)}async function bR(r,e,t){const n=r.Ta.shift(),i=Lv.from(n,e,t);await o3(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Cf(r)}async function RR(r,e){e&&So(r).X_&&await(async function(n,i){if((function(s){return s6(s)&&s!==ae.ABORTED})(i.code)){const a=n.Ta.shift();So(n).B_(),await o3(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Cf(n)}})(r,e),s3(r)&&u3(r)}async function Ix(r,e){const t=Ne(r);t.asyncQueue.verifyOperationInProgress(),le(Ls,"RemoteStore received new credentials");const n=Fs(t);t.Ea.add(3),await If(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await V1(t)}async function DR(r,e){const t=Ne(r);e?(t.Ea.delete(2),await V1(t)):e||(t.Ea.add(2),await If(t),t.Ra.set("Unknown"))}function ml(r){return r.ma||(r.ma=(function(t,n,i){const a=Ne(t);return a.sa(),new pR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(r.datastore,r.asyncQueue,{Xo:ER.bind(null,r),t_:xR.bind(null,r),r_:AR.bind(null,r),H_:wR.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Wv(r)?Yv(r):r.Ra.set("Unknown")):(await r.ma.stop(),a3(r))}))),r.ma}function So(r){return r.fa||(r.fa=(function(t,n,i){const a=Ne(t);return a.sa(),new gR(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:IR.bind(null,r),r_:RR.bind(null,r),ta:CR.bind(null,r),na:bR.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Cf(r)):(await r.fa.stop(),r.Ta.length>0&&(le(Ls,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Qv{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const s=Date.now()+n,l=new Qv(e,t,s,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(r,e){if(Wn("AsyncQueue",`${e}: ${r}`),Co(r))return new he(ae.UNAVAILABLE,`${e}: ${r}`);throw r}class Xu{static emptySet(e){return new Xu(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pe.comparator(t.key,n.key):(t,n)=>pe.comparator(t.key,n.key),this.keyedMap=Bc(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Xu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Cx{constructor(){this.ga=new Pt(pe.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class cl{constructor(e,t,n,i,a,s,l,f,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,n,i,a){const s=[];return t.forEach((l=>{s.push({type:0,doc:l})})),new cl(e,t,Xu.emptySet(t),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&C1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class OR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class NR{constructor(){this.queries=bx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=Ne(t),a=i.queries;i.queries=bx(),a.forEach(((s,l)=>{for(const f of l.Sa)f.onError(n)}))})(this,new he(ae.ABORTED,"Firestore shutting down"))}}function bx(){return new ga((r=>lT(r)),C1)}async function MR(r,e){const t=Ne(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(n=2):(a=new OR,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const l=$v(s,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Zv(t)}async function PR(r,e){const t=Ne(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function LR(r,e){const t=Ne(r);let n=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const l of s.Sa)l.Fa(i)&&(n=!0);s.wa=i}}n&&Zv(t)}function VR(r,e,t){const n=Ne(r),i=n.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);n.queries.delete(e)}function Zv(r){r.Ca.forEach((e=>{e.next()}))}var Qg,Rx;(Rx=Qg||(Qg={})).Ma="default",Rx.Cache="cache";class BR{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new cl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}class l3{constructor(e){this.key=e}}class c3{constructor(e){this.key=e}}class kR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=cT(e),this.tu=new Xu(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Cx,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,l=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,m)=>{const _=i.get(p),E=Tf(this.query,m)?m:null,T=!!_&&this.mutatedKeys.has(_.key),S=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;_&&E?_.data.isEqual(E.data)?T!==S&&(n.track({type:3,doc:E}),D=!0):this.su(_,E)||(n.track({type:2,doc:E}),D=!0,(f&&this.eu(E,f)>0||h&&this.eu(E,h)<0)&&(l=!0)):!_&&E?(n.track({type:0,doc:E}),D=!0):_&&!E&&(n.track({type:1,doc:_}),D=!0,(f||h)&&(l=!0)),D&&(E?(s=s.add(E),a=S?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),n.track({type:1,doc:p})}return{tu:s,iu:n,Cs:l,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,m)=>(function(E,T){const S=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:D})}};return S(E)-S(T)})(p.type,m.type)||this.eu(p.doc,m.doc))),this.ou(n),i=i??!1;const l=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,h=f!==this.Za;return this.Za=f,s.length!==0||h?{snapshot:new cl(this.query,e.tu,a,s,e.mutatedKeys,f===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Cx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new c3(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new l3(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jv="SyncEngine";class FR{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class UR{constructor(e){this.key=e,this.hu=!1}}class zR{constructor(e,t,n,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ga((l=>lT(l)),C1),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(pe.comparator),this.Au=new Map,this.Ru=new zv,this.Vu={},this.mu=new Map,this.fu=Ps.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jR(r,e,t=!0){const n=v3(r);let i;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await f3(n,e,t,!0),i}async function HR(r,e){const t=v3(r);await f3(t,e,!0,!1)}async function f3(r,e,t,n){const i=await oR(r.localStore,Fr(e)),a=i.targetId,s=r.sharedClientState.addLocalQueryTarget(a,t);let l;return n&&(l=await GR(r,e,a,s==="current",i.resumeToken)),r.isPrimaryClient&&t&&r3(r.remoteStore,i),l}async function GR(r,e,t,n,i){r.pu=(m,_,E)=>(async function(S,D,V,M){let B=D.view.ru(V);B.Cs&&(B=await xx(S.localStore,D.query,!1).then((({documents:C})=>D.view.ru(C,B))));const H=M&&M.targetChanges.get(D.targetId),$=M&&M.targetMismatches.get(D.targetId)!=null,J=D.view.applyChanges(B,S.isPrimaryClient,H,$);return Ox(S,D.targetId,J.au),J.snapshot})(r,m,_,E);const a=await xx(r.localStore,e,!0),s=new kR(e,a.Qs),l=s.ru(a.documents),f=Sf.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),h=s.applyChanges(l,r.isPrimaryClient,f);Ox(r,t,h.au);const p=new FR(e,t,s);return r.Tu.set(e,p),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),h.snapshot}async function qR(r,e,t){const n=Ne(r),i=n.Tu.get(e),a=n.Iu.get(i.targetId);if(a.length>1)return n.Iu.set(i.targetId,a.filter((s=>!C1(s,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Yg(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Xv(n.remoteStore,i.targetId),$g(n,i.targetId)})).catch(ks)):($g(n,i.targetId),await Yg(n.localStore,i.targetId,!0))}async function XR(r,e){const t=Ne(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Xv(t.remoteStore,n.targetId))}async function KR(r,e,t){const n=m3(r);try{const i=await(function(s,l){const f=Ne(s),h=gt.now(),p=l.reduce(((E,T)=>E.add(T.key)),Ue());let m,_;return f.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let T=Er(),S=Ue();return f.Ns.getEntries(E,p).next((D=>{T=D,T.forEach(((V,M)=>{M.isValidDocument()||(S=S.add(V))}))})).next((()=>f.localDocuments.getOverlayedDocuments(E,T))).next((D=>{m=D;const V=[];for(const M of l){const B=a6(M,m.get(M.key).overlayedDocument);B!=null&&V.push(new va(M.key,B,eT(B.value.mapValue),Qn.exists(!0)))}return f.mutationQueue.addMutationBatch(E,h,V,l)})).next((D=>{_=D;const V=D.applyToLocalDocumentSet(m,S);return f.documentOverlayCache.saveOverlays(E,D.batchId,V)}))})).then((()=>({batchId:_.batchId,changes:hT(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,l,f){let h=s.Vu[s.currentUser.toKey()];h||(h=new Pt(Oe)),h=h.insert(l,f),s.Vu[s.currentUser.toKey()]=h})(n,i.batchId,t),await bf(n,i.changes),await Cf(n.remoteStore)}catch(i){const a=$v(i,"Failed to persist write");t.reject(a)}}async function h3(r,e){const t=Ne(r);try{const n=await rR(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=t.Au.get(a);s&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ae(s.hu,14607):i.removedDocuments.size>0&&(Ae(s.hu,42227),s.hu=!1))})),await bf(t,n,e)}catch(n){await ks(n)}}function Dx(r,e,t){const n=Ne(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((a,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const f=Ne(s);f.onlineState=l;let h=!1;f.queries.forEach(((p,m)=>{for(const _ of m.Sa)_.va(l)&&(h=!0)})),h&&Zv(f)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function YR(r,e,t){const n=Ne(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),a=i&&i.key;if(a){let s=new Pt(pe.comparator);s=s.insert(a,Ft.newNoDocument(a,Se.min()));const l=Ue().add(a),f=new O1(Se.min(),new Map,new Pt(Oe),s,l);await h3(n,f),n.du=n.du.remove(a),n.Au.delete(e),em(n)}else await Yg(n.localStore,e,!1).then((()=>$g(n,e,t))).catch(ks)}async function WR(r,e){const t=Ne(r),n=e.batch.batchId;try{const i=await nR(t.localStore,e);p3(t,n,null),d3(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await bf(t,i)}catch(i){await ks(i)}}async function QR(r,e,t){const n=Ne(r);try{const i=await(function(s,l){const f=Ne(s);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return f.mutationQueue.lookupMutationBatch(h,l).next((m=>(Ae(m!==null,37113),p=m.keys(),f.mutationQueue.removeMutationBatch(h,m)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>f.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);p3(n,e,t),d3(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await bf(n,i)}catch(i){await ks(i)}}function d3(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function p3(r,e,t){const n=Ne(r);let i=n.Vu[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function $g(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||g3(r,n)}))}function g3(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Xv(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),em(r))}function Ox(r,e,t){for(const n of t)n instanceof l3?(r.Ru.addReference(n.key,e),$R(r,n)):n instanceof c3?(le(Jv,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||g3(r,n.key)):ye(19791,{wu:n})}function $R(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(le(Jv,"New document in limbo: "+t),r.Eu.add(n),em(r))}function em(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new pe(st.fromString(e)),n=r.fu.next();r.Au.set(n,new UR(t)),r.du=r.du.insert(t,n),r3(r.remoteStore,new aa(Fr(I1(t.path)),n,"TargetPurposeLimboResolution",Br.ce))}}async function bf(r,e,t){const n=Ne(r),i=[],a=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach(((l,f)=>{s.push(n.pu(f,e,t).then((h=>{if((h||t)&&n.isPrimaryClient){const p=h?!h.fromCache:t?.targetChanges.get(f.targetId)?.current;n.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Gv.As(f.targetId,h);a.push(p)}})))})),await Promise.all(s),n.Pu.H_(i),await(async function(f,h){const p=Ne(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>X.forEach(h,(_=>X.forEach(_.Es,(E=>p.persistence.referenceDelegate.addReference(m,_.targetId,E))).next((()=>X.forEach(_.ds,(E=>p.persistence.referenceDelegate.removeReference(m,_.targetId,E)))))))))}catch(m){if(!Co(m))throw m;le(qv,"Failed to update sequence numbers: "+m)}for(const m of h){const _=m.targetId;if(!m.fromCache){const E=p.Ms.get(_),T=E.snapshotVersion,S=E.withLastLimboFreeSnapshotVersion(T);p.Ms=p.Ms.insert(_,S)}}})(n.localStore,a))}async function ZR(r,e){const t=Ne(r);if(!t.currentUser.isEqual(e)){le(Jv,"User change. New user:",e.toKey());const n=await ZT(t.localStore,e);t.currentUser=e,(function(a,s){a.mu.forEach((l=>{l.forEach((f=>{f.reject(new he(ae.CANCELLED,s))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await bf(t,n.Ls)}}function JR(r,e){const t=Ne(r),n=t.Au.get(e);if(n&&n.hu)return Ue().add(n.key);{let i=Ue();const a=t.Iu.get(e);if(!a)return i;for(const s of a){const l=t.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}function v3(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.Pu.H_=LR.bind(null,e.eventManager),e.Pu.yu=VR.bind(null,e.eventManager),e}function m3(r){const e=Ne(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QR.bind(null,e),e}class vf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=L1(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $T(this.persistence,new QT,e.initialUser,this.serializer)}Cu(e){return new jv(P1.mi,this.serializer)}Du(e){return new e3}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vf.provider={build:()=>new vf};class eD extends vf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof n1,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new qT(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new jv((n=>n1.mi(n,t)),this.serializer)}}class tD extends vf{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await m3(this.xu.syncEngine),await Cf(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return $T(this.persistence,new QT,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new qT(n,e.asyncQueue,t)}Mu(e,t){const n=new r8(t,this.persistence);return new n8(e.asyncQueue,n)}Cu(e){const t=Z6(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new Hv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dR(),Md(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new e3}}class i1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Dx(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZR.bind(null,this.syncEngine),await DR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NR})()}createDatastore(e){const t=L1(e.databaseInfo.databaseId),n=(function(a){return new hR(a)})(e.databaseInfo);return(function(a,s,l,f){return new mR(a,s,l,f)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,a,s,l){return new _R(n,i,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(t=>Dx(this.syncEngine,t,0)),(function(){return Tx.v()?new Tx:new uR})())}createSyncEngine(e,t){return(function(i,a,s,l,f,h,p){const m=new zR(i,a,s,l,f,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ne(t);le(Ls,"RemoteStore shutting down."),n.Ea.add(5),await If(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}i1.provider={build:()=>new i1};class nD{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Io="FirestoreClient";class rD{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Mn.UNAUTHENTICATED,this.clientId=Av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async s=>{le(Io,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(le(Io,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$v(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function cg(r,e){r.asyncQueue.verifyOperationInProgress(),le(Io,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await ZT(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Nx(r,e){r.asyncQueue.verifyOperationInProgress();const t=await iD(r);le(Io,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>Ix(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>Ix(e.remoteStore,i))),r._onlineComponents=e}async function iD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){le(Io,"Using user provided OfflineComponentProvider");try{await cg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Rs("Error using user provided cache. Falling back to memory cache: "+t),await cg(r,new vf)}}else le(Io,"Using default OfflineComponentProvider"),await cg(r,new eD(void 0));return r._offlineComponents}async function y3(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(le(Io,"Using user provided OnlineComponentProvider"),await Nx(r,r._uninitializedComponentsProvider._online)):(le(Io,"Using default OnlineComponentProvider"),await Nx(r,new i1))),r._onlineComponents}function aD(r){return y3(r).then((e=>e.syncEngine))}async function Mx(r){const e=await y3(r),t=e.eventManager;return t.onListen=jR.bind(null,e.syncEngine),t.onUnlisten=qR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XR.bind(null,e.syncEngine),t}function _3(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Px=new Map;const E3="firestore.googleapis.com",Lx=!0;class Vx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E3,this.ssl=Lx}else this.host=e.host,this.ssl=e.ssl??Lx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L6)throw new he(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_3(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new he(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new he(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new he(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class B1{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new jb;switch(n.type){case"firstParty":return new Xb(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new he(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=Px.get(t);n&&(le("ComponentProvider","Removing Datastore"),Px.delete(t),n.terminate())})(this),Promise.resolve()}}function oD(r,e,t,n={}){r=ua(r,B1);const i=hl(e),a=r._getSettings(),s={...a,emulatorOptions:r._getEmulatorOptions()},l=`${e}:${t}`;i&&(uw(`https://${l}`),lw("Firestore",!0)),a.host!==E3&&a.host!==l&&Rs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:l,ssl:i,emulatorOptions:n};if(!Is(f,s)&&(r._setSettings(f),n.mockUserToken)){let h,p;if(typeof n.mockUserToken=="string")h=n.mockUserToken,p=Mn.MOCK_USER;else{h=v4(n.mockUserToken,r._app?.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new he(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mn(m)}r._authCredentials=new Hb(new Cw(h,p))}}class Us{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class nn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(xf(t,nn._jsonSchema))return new nn(e,n||null,new pe(st.fromString(t.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:tn("string",nn._jsonSchemaVersion),referencePath:tn("string")};class Eo extends Us{constructor(e,t,n){super(e,t,I1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new pe(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function a1(r,e,...t){if(r=Tn(r),Rw("collection","path",e),r instanceof B1){const n=st.fromString(e,...t);return SE(n),new Eo(r,null,n)}{if(!(r instanceof nn||r instanceof Eo))throw new he(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(st.fromString(e,...t));return SE(n),new Eo(r.firestore,null,n)}}function o1(r,e,...t){if(r=Tn(r),arguments.length===1&&(e=Av.newId()),Rw("doc","path",e),r instanceof B1){const n=st.fromString(e,...t);return TE(n),new nn(r,null,new pe(n))}{if(!(r instanceof nn||r instanceof Eo))throw new he(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(st.fromString(e,...t));return TE(n),new nn(r.firestore,r instanceof Eo?r.converter:null,new pe(n))}}const Bx="AsyncQueue";class kx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new t3(this,"async_queue_retry"),this._c=()=>{const n=Md();n&&le(Bx,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Md();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Md();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Co(e))throw e;le(Bx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Wn("INTERNAL UNHANDLED ERROR: ",Fx(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Qv.createAndSchedule(this,e,t,n,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&ye(47125,{Pc:Fx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Fx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function Ux(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(r,["next","error","complete"])}class Vs extends B1{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new kx,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kx(e),this._firestoreClient=void 0,await e}}}function sD(r,e){const t=typeof r=="object"?r:mw(),n=typeof r=="string"?r:Yd,i=Ev(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=p4("firestore");a&&oD(i,...a)}return i}function x3(r){if(r._terminated)throw new he(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||A3(r),r._firestoreClient}function A3(r){const e=r._freezeSettings(),t=(function(i,a,s,l){return new N8(i,a,s,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,_3(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new rD(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}})(r._componentsProvider))}function uD(r,e){Rs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return lD(r,i1.provider,{build:n=>new tD(n,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function lD(r,e,t){if((r=ua(r,Vs))._firestoreClient||r._terminated)throw new he(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new he(ae.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},A3(r)}class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(rn.fromBase64String(e))}catch(t){throw new he(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xf(e,Vr._jsonSchema))return Vr.fromBase64String(e.bytes)}}Vr._jsonSchemaVersion="firestore/bytes/1.0",Vr._jsonSchema={type:tn("string",Vr._jsonSchemaVersion),bytes:tn("string")};class k1{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tm{constructor(e){this._methodName=e}}class Ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(xf(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:tn("string",Ni._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};class Mi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xf(e,Mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mi(e.vectorValues);throw new he(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mi._jsonSchemaVersion="firestore/vectorValue/1.0",Mi._jsonSchema={type:tn("string",Mi._jsonSchemaVersion),vectorValues:tn("object")};const cD=/^__.*__$/;class fD{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class w3{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function T3(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:r})}}class nm{constructor(e,t,n,i,a,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new nm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return s1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(T3(this.Ac)&&cD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class hD{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||L1(e)}Cc(e,t,n,i=!1){return new nm({Ac:e,methodName:t,Dc:n,path:Lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rm(r){const e=r._freezeSettings(),t=L1(r._databaseId);return new hD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function dD(r,e,t,n,i,a={}){const s=r.Cc(a.merge||a.mergeFields?2:0,e,t,i);im("Data must be an object, but it was:",s,n);const l=S3(n,s);let f,h;if(a.merge)f=new sr(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const m of a.mergeFields){const _=Zg(e,m,t);if(!s.contains(_))throw new he(ae.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);C3(p,_)||p.push(_)}f=new sr(p),h=s.fieldTransforms.filter((m=>f.covers(m.field)))}else f=null,h=s.fieldTransforms;return new fD(new Un(l),f,h)}class F1 extends tm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof F1}}function pD(r,e,t,n){const i=r.Cc(1,e,t);im("Data must be an object, but it was:",i,n);const a=[],s=Un.empty();bo(n,((f,h)=>{const p=am(e,f,t);h=Tn(h);const m=i.yc(p);if(h instanceof F1)a.push(p);else{const _=Rf(h,m);_!=null&&(a.push(p),s.set(p,_))}}));const l=new sr(a);return new w3(s,l,i.fieldTransforms)}function gD(r,e,t,n,i,a){const s=r.Cc(1,e,t),l=[Zg(e,n,t)],f=[i];if(a.length%2!=0)throw new he(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)l.push(Zg(e,a[_])),f.push(a[_+1]);const h=[],p=Un.empty();for(let _=l.length-1;_>=0;--_)if(!C3(h,l[_])){const E=l[_];let T=f[_];T=Tn(T);const S=s.yc(E);if(T instanceof F1)h.push(E);else{const D=Rf(T,S);D!=null&&(h.push(E),p.set(E,D))}}const m=new sr(h);return new w3(p,m,s.fieldTransforms)}function vD(r,e,t,n=!1){return Rf(t,r.Cc(n?4:3,e))}function Rf(r,e){if(I3(r=Tn(r)))return im("Unsupported field value:",e,r),S3(r,e);if(r instanceof tm)return(function(n,i){if(!T3(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const a=[];let s=0;for(const l of n){let f=Rf(l,i.wc(s));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),s++}return{arrayValue:{values:a}}})(r,e)}return(function(n,i){if((n=Tn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Z8(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=gt.fromDate(n);return{timestampValue:ll(i.serializer,a)}}if(n instanceof gt){const a=new gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ll(i.serializer,a)}}if(n instanceof Ni)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Vr)return{bytesValue:ST(i.serializer,n._byteString)};if(n instanceof nn){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:kv(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Mi)return(function(s,l){return{mapValue:{fields:{[Dv]:{stringValue:Ov},[rl]:{arrayValue:{values:s.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Mv(l.serializer,h)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${y1(n)}`)})(r,e)}function S3(r,e){const t={};return qw(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(r,((n,i)=>{const a=Rf(i,e.mc(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function I3(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof Ni||r instanceof Vr||r instanceof nn||r instanceof tm||r instanceof Mi)}function im(r,e,t){if(!I3(t)||!Dw(t)){const n=y1(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function Zg(r,e,t){if((e=Tn(e))instanceof k1)return e._internalPath;if(typeof e=="string")return am(r,e);throw s1("Field path arguments must be of type string or ",r,!1,void 0,t)}const mD=new RegExp("[~\\*/\\[\\]]");function am(r,e,t){if(e.search(mD)>=0)throw s1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new k1(...e.split("."))._internalPath}catch{throw s1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function s1(r,e,t,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let f="";return(a||s)&&(f+=" (found",a&&(f+=` in field ${n}`),s&&(f+=` in document ${i}`),f+=")"),new he(ae.INVALID_ARGUMENT,l+r+f)}function C3(r,e){return r.some((t=>t.isEqual(e)))}class b3{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(U1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yD extends b3{data(){return super.data()}}function U1(r,e){return typeof e=="string"?am(r,e):e instanceof k1?e._internalPath:e._delegate._internalPath}function _D(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class om{}class R3 extends om{}function D3(r,e,...t){let n=[];e instanceof om&&n.push(e),n=n.concat(t),(function(a){const s=a.filter((f=>f instanceof sm)).length,l=a.filter((f=>f instanceof z1)).length;if(s>1||s>0&&l>0)throw new he(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class z1 extends R3{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new z1(e,t,n)}_apply(e){const t=this._parse(e);return M3(e._query,t),new Us(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=rm(e.firestore);return(function(a,s,l,f,h,p,m){let _;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new he(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){jx(m,p);const T=[];for(const S of m)T.push(zx(f,a,S));_={arrayValue:{values:T}}}else _=zx(f,a,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||jx(m,p),_=vD(l,s,m,p==="in"||p==="not-in");return Ke.create(h,p,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function O3(r,e,t){const n=e,i=U1("where",r);return z1._create(i,n,t)}class sm extends om{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sm(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let s=i;const l=a.getFlattenedFilters();for(const f of l)M3(s,f),s=Fg(s,f)})(e._query,t),new Us(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class um extends R3{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new um(e,t)}_apply(e){const t=(function(i,a,s){if(i.startAt!==null)throw new he(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new df(a,s)})(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new gl(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function N3(r,e="asc"){const t=e,n=U1("orderBy",r);return um._create(n,t)}function zx(r,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new he(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uT(e)&&t.indexOf("/")!==-1)throw new he(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(st.fromString(t));if(!pe.isDocumentKey(n))throw new he(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ff(r,new pe(n))}if(t instanceof nn)return ff(r,t._key);throw new he(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${y1(t)}.`)}function jx(r,e){if(!Array.isArray(r)||r.length===0)throw new he(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M3(r,e){const t=(function(i,a){for(const s of i)for(const l of s.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class ED{convertValue(e,t="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return bo(e,((i,a)=>{n[i]=this.convertValue(a,t)})),n}convertVectorValue(e){const t=e.fields?.[rl].arrayValue?.values?.map((n=>Mt(n.doubleValue)));return new Mi(t)}convertGeoPoint(e){return new Ni(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=T1(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(lf(e));default:return null}}convertTimestamp(e){const t=ca(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=st.fromString(e);Ae(LT(n),9688,{name:e});const i=new Ds(n.get(1),n.get(3)),a=new pe(n.popFirst(5));return i.isEqual(t)||Wn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function xD(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends b3{constructor(e,t,n,i,a,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(U1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ts._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ts._jsonSchema={type:tn("string",Ts._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Pd extends Ts{data(e={}){return super.data(e)}}class Ku{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Uc(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Pd(this._firestore,this._userDataWriter,n.key,n,new Uc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const f=new Pd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Uc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:f,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const f=new Pd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Uc(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:AD(l.type),doc:f,oldIndex:h,newIndex:p}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ku._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Av.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:r})}}Ku._jsonSchemaVersion="firestore/querySnapshot/1.0",Ku._jsonSchema={type:tn("string",Ku._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class P3 extends ED{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function wD(r,e,t,...n){r=ua(r,nn);const i=ua(r.firestore,Vs),a=rm(i);let s;return s=typeof(e=Tn(e))=="string"||e instanceof k1?gD(a,"updateDoc",r._key,e,t,n):pD(a,"updateDoc",r._key,e),lm(i,[s.toMutation(r._key,Qn.exists(!0))])}function L3(r){return lm(ua(r.firestore,Vs),[new D1(r._key,Qn.none())])}function V3(r,e){const t=ua(r.firestore,Vs),n=o1(r),i=xD(r.converter,e);return lm(t,[dD(rm(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Qn.exists(!1))]).then((()=>n))}function B3(r,...e){r=Tn(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||Ux(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Ux(e[n])){const f=e[n];e[n]=f.next?.bind(f),e[n+1]=f.error?.bind(f),e[n+2]=f.complete?.bind(f)}let a,s,l;if(r instanceof nn)s=ua(r.firestore,Vs),l=I1(r._key.path),a={next:f=>{e[n]&&e[n](TD(s,r,f))},error:e[n+1],complete:e[n+2]};else{const f=ua(r,Us);s=ua(f.firestore,Vs),l=f._query;const h=new P3(s);a={next:p=>{e[n]&&e[n](new Ku(s,h,f,p))},error:e[n+1],complete:e[n+2]},_D(r._query)}return(function(h,p,m,_){const E=new nD(_),T=new BR(p,E,m);return h.asyncQueue.enqueueAndForget((async()=>MR(await Mx(h),T))),()=>{E.Nu(),h.asyncQueue.enqueueAndForget((async()=>PR(await Mx(h),T)))}})(x3(s),l,i,a)}function lm(r,e){return(function(n,i){const a=new yo;return n.asyncQueue.enqueueAndForget((async()=>KR(await aD(n),i,a))),a.promise})(x3(r),e)}function TD(r,e,t){const n=t.docs.get(e._key),i=new P3(r);return new Ts(r,i,e._key,n,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){pl=i})(dl),$u(new Cs("firestore",((n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),l=new Vs(new Gb(n.getProvider("auth-internal")),new Kb(s,n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new he(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(h.options.projectId,p)})(s,i),s);return a={useFetchStreams:t,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),vo(EE,xE,e),vo(EE,xE,"esm2020")})();function k3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SD=k3,F3=new _f("auth","Firebase",k3());const u1=new yv("@firebase/auth");function ID(r,...e){u1.logLevel<=Xe.WARN&&u1.warn(`Auth (${dl}): ${r}`,...e)}function Ld(r,...e){u1.logLevel<=Xe.ERROR&&u1.error(`Auth (${dl}): ${r}`,...e)}function ai(r,...e){throw cm(r,...e)}function Pi(r,...e){return cm(r,...e)}function U3(r,e,t){const n={...SD(),[e]:t};return new _f("auth","Firebase",n).create(e,{appName:r.name})}function Li(r){return U3(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cm(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return F3.create(r,...e)}function Re(r,e,...t){if(!r)throw cm(e,...t)}function oa(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ld(e),new Error(e)}function ha(r,e){r||oa(e)}function Jg(){return typeof self<"u"&&self.location?.href||""}function CD(){return Hx()==="http:"||Hx()==="https:"}function Hx(){return typeof self<"u"&&self.location?.protocol||null}function bD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CD()||x4()||"connection"in navigator)?navigator.onLine:!0}function RD(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Df{constructor(e,t){this.shortDelay=e,this.longDelay=t,ha(t>e,"Short delay should be less than long delay!"),this.isMobile=_4()||A4()}get(){return bD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fm(r,e){ha(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class z3{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const DD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const OD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ND=new Df(3e4,6e4);function ma(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ya(r,e,t,n,i={}){return j3(r,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const l=Ef({key:r.config.apiKey,...s}).slice(1),f=await r._getAdditionalHeaders();f["Content-Type"]="application/json",r.languageCode&&(f["X-Firebase-Locale"]=r.languageCode);const h={method:e,headers:f,...a};return E4()||(h.referrerPolicy="no-referrer"),r.emulatorConfig&&hl(r.emulatorConfig.host)&&(h.credentials="include"),z3.fetch()(await H3(r,r.config.apiHost,t,l),h)})}async function j3(r,e,t){r._canInitEmulator=!1;const n={...DD,...e};try{const i=new PD(r),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw md(r,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[f,h]=l.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(r,"credential-already-in-use",s);if(f==="EMAIL_EXISTS")throw md(r,"email-already-in-use",s);if(f==="USER_DISABLED")throw md(r,"user-disabled",s);const p=n[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw U3(r,p,h);ai(r,p)}}catch(i){if(i instanceof pa)throw i;ai(r,"network-request-failed",{message:String(i)})}}async function Of(r,e,t,n,i={}){const a=await ya(r,e,t,n,i);return"mfaPendingCredential"in a&&ai(r,"multi-factor-auth-required",{_serverResponse:a}),a}async function H3(r,e,t,n){const i=`${e}${t}?${n}`,a=r,s=a.config.emulator?fm(r.config,i):`${r.config.apiScheme}://${i}`;return OD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function MD(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Pi(this.auth,"network-request-failed")),ND.get())})}}function md(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Pi(r,e,n);return i.customData._tokenResponse=t,i}function Gx(r){return r!==void 0&&r.enterprise!==void 0}class LD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VD(r,e){return ya(r,"GET","/v2/recaptchaConfig",ma(r,e))}async function BD(r,e){return ya(r,"POST","/v1/accounts:delete",e)}async function l1(r,e){return ya(r,"POST","/v1/accounts:lookup",e)}function ef(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kD(r,e=!1){const t=Tn(r),n=await t.getIdToken(e),i=hm(n);Re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a?.sign_in_provider;return{claims:i,token:n,authTime:ef(fg(i.auth_time)),issuedAtTime:ef(fg(i.iat)),expirationTime:ef(fg(i.exp)),signInProvider:s||null,signInSecondFactor:a?.sign_in_second_factor||null}}function fg(r){return Number(r)*1e3}function hm(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Ld("JWT malformed, contained fewer than 3 sections"),null;try{const i=rw(t);return i?JSON.parse(i):(Ld("Failed to decode base64 JWT payload"),null)}catch(i){return Ld("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qx(r){const e=hm(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mf(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof pa&&FD(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function FD({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class UD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ev{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ef(this.lastLoginAt),this.creationTime=ef(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function c1(r){const e=r.auth,t=await r.getIdToken(),n=await mf(r,l1(e,{idToken:t}));Re(n?.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const a=i.providerUserInfo?.length?G3(i.providerUserInfo):[],s=jD(r.providerData,a),l=r.isAnonymous,f=!(r.email&&i.passwordHash)&&!s?.length,h=l?f:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ev(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(r,p)}async function zD(r){const e=Tn(r);await c1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jD(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function G3(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function HD(r,e){const t=await j3(r,{},async()=>{const n=Ef({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=r.config,s=await H3(r,i,"/v1/token",`key=${a}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:l,body:n};return r.emulatorConfig&&hl(r.emulatorConfig.host)&&(f.credentials="include"),z3.fetch()(s,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GD(r,e){return ya(r,"POST","/v2/accounts:revokeToken",ma(r,e))}class Yu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=qx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:a}=await HD(e,t);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:a}=t,s=new Yu;return n&&(Re(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Re(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yu,this.toJSON())}_performRefresh(){return oa("not implemented")}}function no(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new UD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ev(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await mf(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kD(this,e)}reload(){return zD(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await c1(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_r(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await mf(this,BD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,s=t.photoURL??void 0,l=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:m,emailVerified:_,isAnonymous:E,providerData:T,stsTokenManager:S}=t;Re(m&&S,e,"internal-error");const D=Yu.fromJSON(this.name,S);Re(typeof m=="string",e,"internal-error"),no(n,e.name),no(i,e.name),Re(typeof _=="boolean",e,"internal-error"),Re(typeof E=="boolean",e,"internal-error"),no(a,e.name),no(s,e.name),no(l,e.name),no(f,e.name),no(h,e.name),no(p,e.name);const V=new ii({uid:m,auth:e,email:i,emailVerified:_,displayName:n,isAnonymous:E,photoURL:s,phoneNumber:a,tenantId:l,stsTokenManager:D,createdAt:h,lastLoginAt:p});return T&&Array.isArray(T)&&(V.providerData=T.map(M=>({...M}))),f&&(V._redirectEventId=f),V}static async _fromIdTokenResponse(e,t,n=!1){const i=new Yu;i.updateFromServerResponse(t);const a=new ii({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await c1(a),a}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Re(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?G3(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!a?.length,l=new Yu;l.updateFromIdToken(n);const f=new ii({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ev(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,h),f}}const Xx=new Map;function sa(r){ha(r instanceof Function,"Expected a class definition");let e=Xx.get(r);return e?(ha(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Xx.set(r,e),e)}class q3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}q3.type="NONE";const Kx=q3;function Vd(r,e,t){return`firebase:${r}:${e}:${t}`}class Wu{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Vd(this.userKey,i.apiKey,a),this.fullPersistenceKey=Vd("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await l1(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Wu(sa(Kx),e,n);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||sa(Kx);const s=Vd(n,e.config.apiKey,e.name);let l=null;for(const h of t)try{const p=await h._get(s);if(p){let m;if(typeof p=="string"){const _=await l1(e,{idToken:p}).catch(()=>{});if(!_)break;m=await ii._fromGetAccountInfoResponse(e,_,p)}else m=ii._fromJSON(e,p);h!==a&&(l=m),a=h;break}}catch{}const f=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Wu(a,e,n):(a=f[0],l&&await a._set(s,l.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new Wu(a,e,n))}}function Yx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($3(e))return"Blackberry";if(Z3(e))return"Webos";if(K3(e))return"Safari";if((e.includes("chrome/")||Y3(e))&&!e.includes("edge/"))return"Chrome";if(Q3(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function X3(r=pn()){return/firefox\//i.test(r)}function K3(r=pn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y3(r=pn()){return/crios\//i.test(r)}function W3(r=pn()){return/iemobile/i.test(r)}function Q3(r=pn()){return/android/i.test(r)}function $3(r=pn()){return/blackberry/i.test(r)}function Z3(r=pn()){return/webos/i.test(r)}function dm(r=pn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function qD(r=pn()){return dm(r)&&!!window.navigator?.standalone}function XD(){return w4()&&document.documentMode===10}function J3(r=pn()){return dm(r)||Q3(r)||Z3(r)||$3(r)||/windows phone/i.test(r)||W3(r)}function eS(r,e=[]){let t;switch(r){case"Browser":t=Yx(pn());break;case"Worker":t=`${Yx(pn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${n}`}class KD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((s,l)=>{try{const f=e(a);s(f)}catch(f){l(f)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function YD(r,e={}){return ya(r,"GET","/v2/passwordPolicy",ma(r,e))}const WD=6;class QD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??WD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class $D{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wx(this),this.idTokenSubscription=new Wx(this),this.beforeStateQueue=new KD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await l1(this,{idToken:e}),n=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_r(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,s=n?._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===s)&&l?.user&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await c1(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_r(this.app))return Promise.reject(Li(this));const t=e?Tn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _r(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _r(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YD(this),t=new QD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _f("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await GD(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sa(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Wu.create(this,[sa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,n,i);return()=>{s=!0,f()}}else{const f=e.addObserver(t);return()=>{s=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(_r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ID(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _a(r){return Tn(r)}class Wx{constructor(e){this.auth=e,this.observer=null,this.addObserver=R4(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let j1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZD(r){j1=r}function tS(r){return j1.loadJS(r)}function JD(){return j1.recaptchaEnterpriseScript}function eO(){return j1.gapiScript}function tO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class nO{constructor(){this.enterprise=new rO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const iO="recaptcha-enterprise",nS="NO_RECAPTCHA";class aO{constructor(e){this.type=iO,this.auth=_a(e)}async verify(e="verify",t=!1){async function n(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,l)=>{VD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new LD(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,s(h.siteKey)}}).catch(f=>{l(f)})})}function i(a,s,l){const f=window.grecaptcha;Gx(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{s(h)}).catch(()=>{s(nS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nO().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{n(this.auth).then(l=>{if(!t&&Gx(window.grecaptcha))i(l,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let f=JD();f.length!==0&&(f+=l),tS(f).then(()=>{i(l,a,s)}).catch(h=>{s(h)})}}).catch(l=>{s(l)})})}}async function Qx(r,e,t,n=!1,i=!1){const a=new aO(r);let s;if(i)s=nS;else try{s=await a.verify(t)}catch{s=await a.verify(t,!0)}const l={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const f=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const f=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function f1(r,e,t,n,i){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Qx(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Qx(r,e,t,t==="getOobCode");return n(r,s)}else return Promise.reject(a)})}function oO(r,e){const t=Ev(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(Is(a,e??{}))return i;ai(i,"already-initialized")}return t.initialize({options:e})}function sO(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(sa);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function uO(r,e,t){const n=_a(r);Re(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=rS(e),{host:s,port:l}=lO(e),f=l===null?"":`:${l}`,h={url:`${a}//${s}${f}/`},p=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){Re(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Re(Is(h,n.config.emulator)&&Is(p,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=h,n.emulatorConfig=p,n.settings.appVerificationDisabledForTesting=!0,hl(s)?(uw(`${a}//${s}${f}`),lw("Auth",!0)):cO()}function rS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function lO(r){const e=rS(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:$x(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:$x(s)}}}function $x(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function cO(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class pm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,t){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}async function fO(r,e){return ya(r,"POST","/v1/accounts:signUp",e)}async function hO(r,e){return Of(r,"POST","/v1/accounts:signInWithPassword",ma(r,e))}async function dO(r,e){return ya(r,"POST","/v1/accounts:sendOobCode",ma(r,e))}async function pO(r,e){return dO(r,e)}async function gO(r,e){return Of(r,"POST","/v1/accounts:signInWithEmailLink",ma(r,e))}async function vO(r,e){return Of(r,"POST","/v1/accounts:signInWithEmailLink",ma(r,e))}class yf extends pm{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new yf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new yf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f1(e,t,"signInWithPassword",hO);case"emailLink":return gO(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f1(e,n,"signUpPassword",fO);case"emailLink":return vO(e,{idToken:t,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Qu(r,e){return Of(r,"POST","/v1/accounts:signInWithIdp",ma(r,e))}const mO="http://localhost";class Bs extends pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...a}=t;if(!n||!i)return null;const s=new Bs(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Qu(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Qu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qu(e,t)}buildRequest(){const e={requestUri:mO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ef(t)}return e}}function yO(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _O(r){const e=Pc(Lc(r)).link,t=e?Pc(Lc(e)).deep_link_id:null,n=Pc(Lc(r)).deep_link_id;return(n?Pc(Lc(n)).link:null)||n||t||e||r}class gm{constructor(e){const t=Pc(Lc(e)),n=t.apiKey??null,i=t.oobCode??null,a=yO(t.mode??null);Re(n&&i&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_O(e);try{return new gm(t)}catch{return null}}}class yl{constructor(){this.providerId=yl.PROVIDER_ID}static credential(e,t){return yf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=gm.parseLink(t);return Re(n,"argument-error"),yf._fromEmailAndCode(e,n.code,n.tenantId)}}yl.PROVIDER_ID="password";yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nf extends iS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class so extends Nf{constructor(){super("facebook.com")}static credential(e){return Bs._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";class uo extends Nf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bs._fromParams({providerId:uo.PROVIDER_ID,signInMethod:uo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return uo.credentialFromTaggedObject(e)}static credentialFromError(e){return uo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return uo.credential(t,n)}catch{return null}}}uo.GOOGLE_SIGN_IN_METHOD="google.com";uo.PROVIDER_ID="google.com";class lo extends Nf{constructor(){super("github.com")}static credential(e){return Bs._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lo.credential(e.oauthAccessToken)}catch{return null}}}lo.GITHUB_SIGN_IN_METHOD="github.com";lo.PROVIDER_ID="github.com";class co extends Nf{constructor(){super("twitter.com")}static credential(e,t){return Bs._fromParams({providerId:co.PROVIDER_ID,signInMethod:co.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return co.credentialFromTaggedObject(e)}static credentialFromError(e){return co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return co.credential(t,n)}catch{return null}}}co.TWITTER_SIGN_IN_METHOD="twitter.com";co.PROVIDER_ID="twitter.com";async function aS(r,e){return Of(r,"POST","/v1/accounts:signUp",ma(r,e))}class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const a=await ii._fromIdTokenResponse(e,n,i),s=Zx(n);return new da({user:a,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Zx(n);return new da({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Zx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function EO(r){if(_r(r.app))return Promise.reject(Li(r));const e=_a(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new da({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await aS(e,{returnSecureToken:!0}),n=await da._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(n.user),n}class h1 extends pa{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,h1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new h1(e,t,n,i)}}function oS(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?h1._fromErrorAndOperation(r,a,e,n):a})}async function xO(r,e,t=!1){const n=await mf(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return da._forOperation(r,"link",n)}async function AO(r,e,t=!1){const{auth:n}=r;if(_r(n.app))return Promise.reject(Li(n));const i="reauthenticate";try{const a=await mf(r,oS(n,i,e,r),t);Re(a.idToken,n,"internal-error");const s=hm(a.idToken);Re(s,n,"internal-error");const{sub:l}=s;return Re(r.uid===l,n,"user-mismatch"),da._forOperation(r,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&ai(n,"user-mismatch"),a}}async function sS(r,e,t=!1){if(_r(r.app))return Promise.reject(Li(r));const n="signIn",i=await oS(r,n,e),a=await da._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(a.user),a}async function wO(r,e){return sS(_a(r),e)}async function uS(r){const e=_a(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TO(r,e,t){const n=_a(r);await f1(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pO)}async function SO(r,e,t){if(_r(r.app))return Promise.reject(Li(r));const n=_a(r),s=await f1(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aS).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&uS(r),f}),l=await da._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(l.user),l}function IO(r,e,t){return _r(r.app)?Promise.reject(Li(r)):wO(Tn(r),yl.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&uS(r),n})}function CO(r,e,t,n){return Tn(r).onIdTokenChanged(e,t,n)}function bO(r,e,t){return Tn(r).beforeAuthStateChanged(e,t)}function RO(r,e,t,n){return Tn(r).onAuthStateChanged(e,t,n)}const d1="__sak";class lS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(d1,"1"),this.storage.removeItem(d1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const DO=1e3,OO=10;class cS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,l,f)=>{this.notifyListeners(s,f)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!t&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);XD()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,OO):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},DO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}cS.type="LOCAL";const NO=cS;class fS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fS.type="SESSION";const hS=fS;function MO(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class H1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new H1(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(s).map(async h=>h(t.origin,a)),f=await MO(l);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}H1.receivers=[];function vm(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class PO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((l,f)=>{const h=vm("",20);i.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(m){const _=m;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(_.data.response);break;default:clearTimeout(p),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Vi(){return window}function LO(r){Vi().location.href=r}function dS(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function VO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BO(){return navigator?.serviceWorker?.controller||null}function kO(){return dS()?self:null}const pS="firebaseLocalStorageDb",FO=1,p1="firebaseLocalStorage",gS="fbase_key";class Mf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function G1(r,e){return r.transaction([p1],e?"readwrite":"readonly").objectStore(p1)}function UO(){const r=indexedDB.deleteDatabase(pS);return new Mf(r).toPromise()}function tv(){const r=indexedDB.open(pS,FO);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(p1,{keyPath:gS})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(p1)?e(n):(n.close(),await UO(),e(await tv()))})})}async function Jx(r,e,t){const n=G1(r,!0).put({[gS]:e,value:t});return new Mf(n).toPromise()}async function zO(r,e){const t=G1(r,!1).get(e),n=await new Mf(t).toPromise();return n===void 0?null:n.value}function eA(r,e){const t=G1(r,!0).delete(e);return new Mf(t).toPromise()}const jO=800,HO=3;class vS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>HO)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=H1._getInstance(kO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await VO(),!this.activeServiceWorker)return;this.sender=new PO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tv();return await Jx(e,d1,"1"),await eA(e,d1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jx(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>zO(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=G1(i,!1).getAll();return new Mf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vS.type="LOCAL";const GO=vS;new Df(3e4,6e4);function qO(r,e){return e?sa(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class mm extends pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XO(r){return sS(r.auth,new mm(r),r.bypassAuthState)}function KO(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),AO(t,new mm(r),r.bypassAuthState)}async function YO(r){const{auth:e,user:t}=r;return Re(t,e,"internal-error"),xO(t,new mm(r),r.bypassAuthState)}class mS{constructor(e,t,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const f={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XO;case"linkViaPopup":case"linkViaRedirect":return YO;case"reauthViaPopup":case"reauthViaRedirect":return KO;default:ai(this.auth,"internal-error")}}resolve(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const WO=new Df(2e3,1e4);class Hu extends mS{constructor(e,t,n,i,a){super(e,t,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Hu.currentPopupAction&&Hu.currentPopupAction.cancel(),Hu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const e=vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WO.get())};e()}}Hu.currentPopupAction=null;const QO="pendingRedirect",Bd=new Map;class $O extends mS{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const n=await ZO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZO(r,e){const t=t5(e),n=e5(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function JO(r,e){Bd.set(r._key(),e)}function e5(r){return sa(r._redirectPersistence)}function t5(r){return Vd(QO,r.config.apiKey,r.name)}async function n5(r,e,t=!1){if(_r(r.app))return Promise.reject(Li(r));const n=_a(r),i=qO(n,e),s=await new $O(n,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}const r5=600*1e3;class i5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!yS(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Pi(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tA(e))}saveEventToCache(e){this.cachedEventUids.add(tA(e)),this.lastProcessedEventTime=Date.now()}}function tA(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function yS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function a5(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yS(r);default:return!1}}async function o5(r,e={}){return ya(r,"GET","/v1/projects",e)}const s5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,u5=/^https?/;async function l5(r){if(r.config.emulator)return;const{authorizedDomains:e}=await o5(r);for(const t of e)try{if(c5(t))return}catch{}ai(r,"unauthorized-domain")}function c5(r){const e=Jg(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const s=new URL(r);return s.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===n}if(!u5.test(t))return!1;if(s5.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}const f5=new Df(3e4,6e4);function nA(){const r=Vi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function h5(r){return new Promise((e,t)=>{function n(){nA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nA(),t(Pi(r,"network-request-failed"))},timeout:f5.get()})}if(Vi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Vi().gapi?.load)n();else{const i=tO("iframefcb");return Vi()[i]=()=>{gapi.load?n():t(Pi(r,"network-request-failed"))},tS(`${eO()}?onload=${i}`).catch(a=>t(a))}}).catch(e=>{throw kd=null,e})}let kd=null;function d5(r){return kd=kd||h5(r),kd}const p5=new Df(5e3,15e3),g5="__/auth/iframe",v5="emulator/auth/iframe",m5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _5(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?fm(e,v5):`https://${r.config.authDomain}/${g5}`,n={apiKey:e.apiKey,appName:r.name,v:dl},i=y5.get(r.config.apiHost);i&&(n.eid=i);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${Ef(n).slice(1)}`}async function E5(r){const e=await d5(r),t=Vi().gapi;return Re(t,r,"internal-error"),e.open({where:document.body,url:_5(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m5,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Pi(r,"network-request-failed"),l=Vi().setTimeout(()=>{a(s)},p5.get());function f(){Vi().clearTimeout(l),i(n)}n.ping(f).then(f,()=>{a(s)})}))}const x5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A5=500,w5=600,T5="_blank",S5="http://localhost";class rA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I5(r,e,t,n=A5,i=w5){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const f={...x5,width:n.toString(),height:i.toString(),top:a,left:s},h=pn().toLowerCase();t&&(l=Y3(h)?T5:t),X3(h)&&(e=e||S5,f.scrollbars="yes");const p=Object.entries(f).reduce((_,[E,T])=>`${_}${E}=${T},`,"");if(qD(h)&&l!=="_self")return C5(e||"",l),new rA(null);const m=window.open(e||"",l,p);Re(m,r,"popup-blocked");try{m.focus()}catch{}return new rA(m)}function C5(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const b5="__/auth/handler",R5="emulator/auth/handler",D5=encodeURIComponent("fac");async function iA(r,e,t,n,i,a){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const s={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:dl,eventId:i};if(e instanceof iS){e.setDefaultLanguage(r.languageCode),s.providerId=e.providerId||"",b4(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof Nf){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}r.tenantId&&(s.tid=r.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const f=await r._getAppCheckToken(),h=f?`#${D5}=${encodeURIComponent(f)}`:"";return`${O5(r)}?${Ef(l).slice(1)}${h}`}function O5({config:r}){return r.emulator?fm(r,R5):`https://${r.authDomain}/${b5}`}const hg="webStorageSupport";class N5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hS,this._completeRedirectFn=n5,this._overrideRedirectResult=JO}async _openPopup(e,t,n,i){ha(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await iA(e,t,n,Jg(),i);return I5(e,a,vm())}async _openRedirect(e,t,n,i){await this._originValidation(e);const a=await iA(e,t,n,Jg(),i);return LO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(ha(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await E5(e),n=new i5(e);return t.register("authEvent",i=>(Re(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hg,{type:hg},i=>{const a=i?.[0]?.[hg];a!==void 0&&t(!!a),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=l5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return J3()||K3()||dm()}}const M5=N5;var aA="@firebase/auth",oA="1.12.0";class P5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function L5(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V5(r){$u(new Cs("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=n.options;Re(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const f={apiKey:s,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eS(r)},h=new $D(n,i,a,f);return sO(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$u(new Cs("auth-internal",e=>{const t=_a(e.getProvider("auth").getImmediate());return(n=>new P5(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vo(aA,oA,L5(r)),vo(aA,oA,"esm2020")}const B5=300,k5=sw("authIdTokenMaxAge")||B5;let sA=null;const F5=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>k5)return;const i=t?.token;sA!==i&&(sA=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function U5(r=mw()){const e=Ev(r,"auth");if(e.isInitialized())return e.getImmediate();const t=oO(r,{popupRedirectResolver:M5,persistence:[GO,NO,hS]}),n=sw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=F5(a.toString());bO(t,s,()=>s(t.currentUser)),CO(t,l=>s(l))}}const i=aw("auth");return i&&uO(t,`http://${i}`),t}function z5(){return document.getElementsByTagName("head")?.[0]??document}ZD({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const a=Pi("internal-error");a.customData=i,t(a)},n.type="text/javascript",n.charset="UTF-8",z5().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V5("Browser");const j5={apiKey:"AIzaSyDFJKoHEhMnpjt2bqTPpzru1qdA_rUOEdk",authDomain:"bitlkhzin-8d5c8.firebaseapp.com",projectId:"bitlkhzin-8d5c8",storageBucket:"bitlkhzin-8d5c8.firebasestorage.app",messagingSenderId:"862517672946",appId:"1:862517672946:web:66efa0f33cd67f0751896b"},_S=vw(j5),ho=sD(_S),_s=U5(_S);uD(ho).catch(r=>{r.code=="failed-precondition"?console.warn("Persistence failed: Multiple tabs open"):r.code=="unimplemented"&&console.warn("Persistence failed: Browser not supported")});const H5=({children:r,currentView:e="inventory",onNavigate:t})=>G.jsxs("div",{className:"layout-container",style:{display:"flex",minHeight:"100vh"},children:[G.jsxs("aside",{className:"glass-panel sidebar desktop-only",style:{width:"280px",margin:"20px",height:"calc(100vh - 40px)",position:"sticky",top:"20px",display:"flex",flexDirection:"column",padding:"24px"},children:[G.jsxs("div",{style:{marginBottom:"40px",display:"flex",alignItems:"center",gap:"12px"},children:[G.jsx("div",{style:{width:"40px",height:"40px",background:"hsl(var(--color-primary))",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:G.jsx(bC,{size:24,strokeWidth:2.5})}),G.jsx("h1",{style:{fontSize:"1.25rem",fontWeight:"800"},children:"Bit Khzin"})]}),G.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:"8px",flex:1},children:[G.jsx(ss,{icon:G.jsx(iE,{size:20}),label:"Inventory",active:e==="inventory",onClick:()=>t?.("inventory")}),G.jsx(ss,{icon:G.jsx(sE,{size:20}),label:"To-Do",active:e==="todo",onClick:()=>t?.("todo")}),G.jsx(ss,{icon:G.jsx(oE,{size:20}),label:"Settings",active:e==="settings",onClick:()=>t?.("settings")})]}),G.jsx("div",{style:{paddingTop:"20px",borderTop:"1px solid var(--glass-border)"},children:G.jsx(ss,{icon:G.jsx($A,{size:20}),label:"Sign Out",onClick:()=>_s.signOut(),active:!1})})]}),G.jsx("main",{style:{flex:1,padding:"20px",maxWidth:"100%",paddingBottom:"90px"},children:r}),G.jsxs("nav",{className:"mobile-nav glass-panel mobile-only",style:{position:"fixed",bottom:"0",left:"0",right:"0",padding:"12px 20px",display:"flex",justifyContent:"space-around",zIndex:50,background:"var(--glass-bg)",backdropFilter:"blur(20px)",borderTop:"1px solid var(--glass-border)",borderRadius:"20px 20px 0 0",boxShadow:"0 -4px 20px rgba(0,0,0,0.1)"},children:[G.jsx(ss,{icon:G.jsx(iE,{size:24}),label:"Inventory",active:e==="inventory",onClick:()=>t?.("inventory"),vertical:!0}),G.jsx(ss,{icon:G.jsx(sE,{size:24}),label:"To-Do",active:e==="todo",onClick:()=>t?.("todo"),vertical:!0}),G.jsx(ss,{icon:G.jsx(oE,{size:24}),label:"Settings",active:e==="settings",onClick:()=>t?.("settings"),vertical:!0})]}),G.jsx("style",{children:`
        @media (max-width: 768px) {
          .desktop-only { display: none !important; }
        }
        @media (min-width: 769px) {
          .mobile-only { display: none !important; }
        }
      `})]}),ss=({icon:r,label:e,active:t=!1,onClick:n,vertical:i=!1})=>G.jsxs("button",{onClick:n,style:{display:"flex",flexDirection:i?"column":"row",alignItems:"center",gap:i?"4px":"12px",padding:"12px 16px",width:i?"auto":"100%",borderRadius:"var(--radius-sm)",border:"none",background:!i&&t?"rgba(59, 130, 246, 0.1)":"transparent",color:t?"hsl(var(--color-primary))":"inherit",cursor:"pointer",fontWeight:600,transition:"all 0.2s",textAlign:i?"center":"left",fontSize:i?"0.75rem":"1rem",opacity:!t&&i?.6:1},children:[r,e&&G.jsx("span",{children:e})]}),q1=({children:r,className:e="",hoverEffect:t=!1,style:n,...i})=>G.jsx("div",{className:`glass-panel ${e}`,style:{padding:"24px",transition:"transform 0.3s ease, box-shadow 0.3s ease",cursor:t?"pointer":"default",...t?{":hover":{transform:"translateY(-4px)"}}:{},...n},...i,children:r}),Bi=({children:r,variant:e="primary",size:t="md",isLoading:n,className:i="",disabled:a,...s})=>{const l=()=>{switch(e){case"primary":return"btn-primary";case"secondary":return"btn-secondary";case"danger":return"btn-primary";case"ghost":return"btn-ghost";default:return"btn-primary"}},f=()=>{switch(t){case"sm":return{padding:"8px 16px",fontSize:"0.875rem"};case"lg":return{padding:"16px 32px",fontSize:"1.25rem"};default:return{}}},h=l();return G.jsxs("button",{className:`${h} ${i}`,disabled:n||a,style:{...f(),opacity:n||a?.7:1,cursor:n||a?"not-allowed":"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",...s.style},...s,children:[n&&G.jsx("svg",{className:"animate-spin",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",strokeDasharray:"30 60"})}),r]})},G5=({items:r,onAddItem:e,onDeleteItem:t})=>G.jsxs("div",{className:"animate-fade-in",children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[G.jsx("h2",{className:"text-title",style:{margin:0},children:"My Items"}),G.jsx("div",{style:{display:"flex",gap:"12px"},children:G.jsxs(Bi,{onClick:e,children:[G.jsx(ZA,{size:18})," ",G.jsx("span",{className:"desktop-only",children:"Add Item"})]})})]}),r.length===0?G.jsx("div",{style:{textAlign:"center",padding:"48px",opacity:.6},children:G.jsx("p",{children:"No items found. Add your first item!"})}):G.jsx("div",{className:"inventory-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:"16px"},children:r.map((n,i)=>G.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${i*50}ms`},children:G.jsxs(q1,{hoverEffect:!0,className:"inventory-card",style:{height:"100%",display:"flex",flexDirection:"column"},children:[G.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:G.jsx("span",{style:{fontSize:"2rem"},children:q5(n.category)})}),G.jsxs("div",{style:{flex:1,marginBottom:"12px"},children:[G.jsx("h3",{style:{fontWeight:"bold",fontSize:"1.1rem",marginBottom:"4px"},children:n.name}),G.jsx("p",{className:"text-muted",style:{fontSize:"0.85rem"},children:n.location})]}),G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginTop:"auto"},children:[G.jsx("span",{style:{fontWeight:"600",color:"hsl(var(--color-primary))"},children:n.value?`$${n.value}`:"-"}),G.jsx("button",{onClick:a=>{a.stopPropagation(),t(n.id)},className:"icon-button danger",style:{padding:"6px"},children:G.jsx(JA,{size:16})})]})]})},n.id))})]}),q5=r=>{switch(r){case"Electronics":return"";case"Furniture":return"";case"Clothing":return"";case"Kitchen":return"";case"Tools":return"";default:return""}},uA=["Electronics","Furniture","Clothing","Kitchen","Tools","Other"],lA=["Living Room","Bedroom","Kitchen","Garage","Office","Storage"];function X5(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function K5(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var Y5=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),W5=(function(r){Y5(e,r);function e(t,n){var i=this.constructor,a=r.call(this,t,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),X5(a,i.prototype),K5(a),a}return e})(Error),Q5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ur=(function(r){Q5(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(W5),$5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ei=(function(r){$5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})(ur),Z5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ce=(function(r){Z5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(ur),J5=(function(){function r(e){if(this.binarizer=e,e===null)throw new Ce("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var a=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(a))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),eN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),An=(function(r){eN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(ur),tN=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),St=(function(){function r(){}return r.arraycopy=function(e,t,n,i,a){for(;a--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),nN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ym=(function(r){nN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(ur),rN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),cA=(function(r){rN(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(ym),iN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hn=(function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var a=t;a<n;a++)e[a]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new Ce("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new cA(t);if(n>e)throw new cA(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var a=iN(e),s=a.next();!s.done;s=a.next()){var l=s.value;i=31*i+l}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,a=new Int32Array(i);return St.arraycopy(e,t,a,0,i),a},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,a=e.length-1;i<=a;){var s=a+i>>1,l=n(t,e[s]);if(l>0)i=s+1;else if(l<0)a=s-1;else return s}return-i-1},r.numberComparator=function(e,t){return e-t},r})(),ze=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),wn=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);St.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var s=n.length;a===0;){if(++i===s)return t;a=n[i]}var l=i*32+ze.numberOfTrailingZeros(a);return l>t?t:l},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var s=n.length;a===0;){if(++i===s)return t;a=~n[i]}var l=i*32+ze.numberOfTrailingZeros(a);return l>t?t:l},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ce;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),a=this.bits,s=n;s<=i;s++){var l=s>n?0:e&31,f=s<i?31:t&31,h=(2<<f)-(1<<l);a[s]|=h}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new Ce;if(t===e)return!0;t--;for(var i=Math.floor(e/32),a=Math.floor(t/32),s=this.bits,l=i;l<=a;l++){var f=l>i?0:e&31,h=l<a?31:t&31,p=(2<<h)-(1<<f)&4294967295;if((s[l]&p)!==(n?p:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ce("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new Ce("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var a=0;a<i;a++){for(var s=0,l=0;l<8;l++)this.get(e)&&(s|=1<<7-l),e++;t[n+a]=s}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,a=0;a<n;a++){var s=i[a];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-a]=s}if(this.size!==n*32){for(var l=n*32-this.size,f=e[0]>>>l,a=1;a<n;a++){var h=e[a];f|=h<<32-l,e[a-1]=f,f=h>>>l}e[n-1]=f}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&hn.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+hn.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),nv;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ASSUME_GS1=7]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(nv||(nv={}));const Vt=nv;var aN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fe=(function(r){aN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(ur),oN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(dt||(dt={}));var fn=(function(){function r(e,t,n){for(var i,a,s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var f=this.values,h=0,p=f.length;h!==p;h++){var m=f[h];r.VALUES_TO_ECI.set(m,this)}try{for(var _=oN(s),E=_.next();!E.done;E=_.next()){var T=E.value;r.NAME_TO_ECI.set(T,this)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new fe("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new fe("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new fe("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(dt.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(dt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(dt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(dt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(dt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(dt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(dt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(dt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(dt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(dt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(dt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(dt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(dt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(dt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(dt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(dt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(dt.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(dt.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(dt.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(dt.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(dt.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(dt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(dt.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(dt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(dt.Big5,28,"Big5"),r.GB18030=new r(dt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(dt.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),sN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Fd=(function(r){sN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(ur),Ur=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof fn?e:fn.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",a=0,s=e.length;a<s;a++){var l=e[a].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(n.equals(fn.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Fd("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(fn.UTF8)||e.equals(fn.ISO8859_1)||e.equals(fn.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},r})(),$e=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return Ur.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(Vt.CHARACTER_SET)!==void 0)return t.get(Vt.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,s=!0,l=0,f=0,h=0,p=0,m=0,_=0,E=0,T=0,S=0,D=0,V=0,M=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,B=0;B<n&&(i||a||s);B++){var H=e[B]&255;s&&(l>0?(H&128)===0?s=!1:l--:(H&128)!==0&&((H&64)===0?s=!1:(l++,(H&32)===0?f++:(l++,(H&16)===0?h++:(l++,(H&8)===0?p++:s=!1))))),i&&(H>127&&H<160?i=!1:H>159&&(H<192||H===215||H===247)&&V++),a&&(m>0?H<64||H===127||H>252?a=!1:m--:H===128||H===160||H>239?a=!1:H>160&&H<224?(_++,T=0,E++,E>S&&(S=E)):H>127?(m++,E=0,T++,T>D&&(D=T)):(E=0,T=0))}return s&&l>0&&(s=!1),a&&m>0&&(a=!1),s&&(M||f+h+p>0)?r.UTF8:a&&(r.ASSUME_SHIFT_JIS||S>=3||D>=3)?r.SHIFT_JIS:i&&a?S===2&&_===2||V*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:a?r.SHIFT_JIS:s?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function a(l,f,h,p,m,_){if(l==="%%")return"%";if(t[++i]!==void 0){l=p?parseInt(p.substr(1)):void 0;var E=m?parseInt(m.substr(1)):void 0,T;switch(_){case"s":T=t[i];break;case"c":T=t[i][0];break;case"f":T=parseFloat(t[i]).toFixed(l);break;case"p":T=parseFloat(t[i]).toPrecision(l);break;case"e":T=parseFloat(t[i]).toExponential(l);break;case"x":T=parseInt(t[i]).toString(E||16);break;case"d":T=parseFloat(parseInt(t[i],E||10).toPrecision(l)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(E);for(var S=parseInt(h),D=h&&h[0]+""=="0"?"0":" ";T.length<S;)T=f!==void 0?T+D:D+T;return T}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},r.getBytes=function(e,t){return Ur.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=fn.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=fn.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=fn.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),Fe=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=$e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),Fi=(function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ce("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),a=0;a<t;a++)for(var s=e[a],l=0;l<n;l++)s[l]&&i.set(l,a);return i},r.parseFromString=function(e,t,n){if(e===null)throw new Ce("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,s=0,l=-1,f=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new Ce("row lengths do not match");s=a,f++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[a]=!0,a++;else if(e.substring(h,h+n.length)===n)h+=n.length,i[a]=!1,a++;else throw new Ce("illegal character encountered: "+e.substring(h));if(a>s){if(l===-1)l=a-s;else if(a-s!==l)throw new Ce("row lengths do not match");f++}for(var p=new r(l,f),m=0;m<a;m++)i[m]&&p.set(Math.floor(m%l),Math.floor(m/l));return p},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ce("input matrix dimensions do not match");for(var t=new wn(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,s=this.height;a<s;a++)for(var l=a*n,f=e.getRow(a,t).getBitArray(),h=0;h<n;h++)i[l+h]^=f[h]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new Ce("Left and top must be nonnegative");if(i<1||n<1)throw new Ce("Height and width must be at least 1");var a=e+n,s=t+i;if(s>this.height||a>this.width)throw new Ce("The region must fit inside the matrix");for(var l=this.rowSize,f=this.bits,h=t;h<s;h++)for(var p=h*l,m=e;m<a;m++)f[p+Math.floor(m/32)]|=1<<(m&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new wn(this.width):t.clear();for(var n=this.rowSize,i=this.bits,a=e*n,s=0;s<n;s++)t.setBulk(s*32,i[a+s]);return t},r.prototype.setRow=function(e,t){St.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new wn(e),i=new wn(e),a=0,s=Math.floor((t+1)/2);a<s;a++)n=this.getRow(a,n),i=this.getRow(t-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(t-1-a,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,a=e,s=t,l=-1,f=-1,h=0;h<t;h++)for(var p=0;p<n;p++){var m=i[h*n+p];if(m!==0){if(h<s&&(s=h),h>f&&(f=h),p*32<a){for(var _=0;(m<<31-_&4294967295)===0;)_++;p*32+_<a&&(a=p*32+_)}if(p*32+31>l){for(var _=31;!(m>>>_);)_--;p*32+_>l&&(l=p*32+_)}}}return l<a||f<s?null:Int32Array.from([a,s,l-a+1,f-s+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,a=n%e*32,s=t[n],l=0;(s<<31-l&4294967295)===0;)l++;return a+=l,Int32Array.from([a,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,s=t[n],l=31;!(s>>>l);)l--;return a+=l,Int32Array.from([a,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&hn.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+hn.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Fe,a=0,s=this.height;a<s;a++){for(var l=0,f=this.width;l<f;l++)i.append(this.get(l,a)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),uN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),re=(function(r){uN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(ur),lN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),cN=(function(r){lN(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new wn(a):n.clear(),this.initArrays(a);for(var s=i.getRow(t,this.luminances),l=this.buckets,f=0;f<a;f++)l[(s[f]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(l);if(a<3)for(var f=0;f<a;f++)(s[f]&255)<h&&n.set(f);else for(var p=s[0]&255,m=s[1]&255,f=1;f<a-1;f++){var _=s[f+1]&255;(m*4-p-_)/2<h&&n.set(f),p=m,m=_}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),a=new Fi(n,i);this.initArrays(n);for(var s=this.buckets,l=1;l<5;l++)for(var f=Math.floor(i*l/5),h=t.getRow(f,this.luminances),p=Math.floor(n*4/5),m=Math.floor(n/5);m<p;m++){var _=h[m]&255;s[_>>e.LUMINANCE_SHIFT]++}for(var E=e.estimateBlackPoint(s),T=t.getMatrix(),l=0;l<i;l++)for(var S=l*n,m=0;m<n;m++){var _=T[S+m]&255;_<E&&a.set(m,l)}return a},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,a=0,s=0,l=0;l<n;l++)t[l]>s&&(a=l,s=t[l]),t[l]>i&&(i=t[l]);for(var f=0,h=0,l=0;l<n;l++){var p=l-a,m=t[l]*p*p;m>h&&(f=l,h=m)}if(a>f){var _=a;a=f,f=_}if(f-a<=n/16)throw new re;for(var E=f-1,T=-1,l=f-1;l>a;l--){var S=l-a,m=S*S*(f-l)*(i-t[l]);m>T&&(E=l,T=m)}return E<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(tN),fN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),hN=(function(r){fN(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=t.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&s++;var l=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&l++;var f=e.calculateBlackPoints(a,s,l,n,i),h=new Fi(n,i);e.calculateThresholdForBlock(a,s,l,n,i,f,h),this.matrix=h}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,a,s,l,f){for(var h=s-e.BLOCK_SIZE,p=a-e.BLOCK_SIZE,m=0;m<i;m++){var _=m<<e.BLOCK_SIZE_POWER;_>h&&(_=h);for(var E=e.cap(m,2,i-3),T=0;T<n;T++){var S=T<<e.BLOCK_SIZE_POWER;S>p&&(S=p);for(var D=e.cap(T,2,n-3),V=0,M=-2;M<=2;M++){var B=l[E+M];V+=B[D-2]+B[D-1]+B[D]+B[D+1]+B[D+2]}var H=V/25;e.thresholdBlock(t,S,_,H,a,f)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,a,s,l){for(var f=0,h=i*s+n;f<e.BLOCK_SIZE;f++,h+=s)for(var p=0;p<e.BLOCK_SIZE;p++)(t[h+p]&255)<=a&&l.set(n+p,i+f)},e.calculateBlackPoints=function(t,n,i,a,s){for(var l=s-e.BLOCK_SIZE,f=a-e.BLOCK_SIZE,h=new Array(i),p=0;p<i;p++){h[p]=new Int32Array(n);var m=p<<e.BLOCK_SIZE_POWER;m>l&&(m=l);for(var _=0;_<n;_++){var E=_<<e.BLOCK_SIZE_POWER;E>f&&(E=f);for(var T=0,S=255,D=0,V=0,M=m*a+E;V<e.BLOCK_SIZE;V++,M+=a){for(var B=0;B<e.BLOCK_SIZE;B++){var H=t[M+B]&255;T+=H,H<S&&(S=H),H>D&&(D=H)}if(D-S>e.MIN_DYNAMIC_RANGE)for(V++,M+=a;V<e.BLOCK_SIZE;V++,M+=a)for(var B=0;B<e.BLOCK_SIZE;B++)T+=t[M+B]&255}var $=T>>e.BLOCK_SIZE_POWER*2;if(D-S<=e.MIN_DYNAMIC_RANGE&&($=S/2,p>0&&_>0)){var J=(h[p-1][_]+2*h[p][_-1]+h[p-1][_-1])/4;S<J&&($=J)}h[p][_]=$}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(cN),X1=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new Fd("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new Fd("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new Fd("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Fe,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var s=i[a]&255,l=void 0;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()},r})(),dN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_m=(function(r){dN(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),a=this.getWidth(),s=0;s<a;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(t[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,a){return new e(this.delegate.crop(t,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(X1),pN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gN=(function(r){pN(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(n.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,i){var a=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var s=0,l=0,f=t.length;s<f;s+=4,l++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var m=t[s],_=t[s+1],E=t[s+2];h=306*m+601*_+117*E+512>>10}a[l]=h}else for(var s=0,l=0,T=t.length;s<T;s+=4,l++){var h=void 0,p=t[s+3];if(p===0)h=255;else{var m=t[s],_=t[s+1],E=t[s+2];h=306*m+601*_+117*E+512>>10}a[l]=255-h}return a},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth(),a=t*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return r.prototype.crop.call(this,t,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,l=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(a))*s+Math.abs(Math.sin(a))*l),h=Math.ceil(Math.abs(Math.sin(a))*s+Math.abs(Math.cos(a))*l);return n.width=f,n.height=h,i.translate(f/2,h/2),i.rotate(a),i.drawImage(this.canvas,s/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new _m(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(X1),vN=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),Xn=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(p){try{h(n.next(p))}catch(m){s(m)}}function f(p){try{h(n.throw(p))}catch(m){s(m)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((n=n.apply(r,e||[])).next())})},Kn=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(p){h=[6,p],i=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},mN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_l=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return Xn(this,void 0,void 0,function(){var e,t,n,i,a,s,l,f,h,p,m,_;return Kn(this,function(E){switch(E.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=E.sent(),t=[];try{for(n=mN(e),i=n.next();!i.done;i=n.next())a=i.value,s=a.kind==="video"?"videoinput":a.kind,s==="videoinput"&&(l=a.deviceId||a.id,f=a.label||"Video device "+(t.length+1),h=a.groupId,p={deviceId:l,label:f,kind:s,groupId:h},t.push(p))}catch(T){m={error:T}}finally{try{i&&!i.done&&(_=n.return)&&_.call(n)}finally{if(m)throw m.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return Xn(this,void 0,void 0,function(){var e;return Kn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new vN(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return Xn(this,void 0,void 0,function(){var t;return Kn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return Xn(this,void 0,void 0,function(){return Kn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Xn(this,void 0,void 0,function(){var n,i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,a.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Xn(this,void 0,void 0,function(){var n;return Kn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Xn(this,void 0,void 0,function(){var n,i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Xn(this,void 0,void 0,function(){return Kn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Xn(this,void 0,void 0,function(){var i,a;return Kn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,t,n)];case 1:return[2,s.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Xn(this,void 0,void 0,function(){var i;return Kn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,a.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return Xn(this,void 0,void 0,function(){var i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return Xn(this,void 0,void 0,function(){var n;return Kn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return Xn(this,void 0,void 0,function(){return Kn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new ei("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new ei("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ei("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ei("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new ei("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new ei("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ei("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new ei("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ei("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ei("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return Xn(this,void 0,void 0,function(){return Kn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return Xn(this,void 0,void 0,function(){return Kn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(s,l){if(i._stopAsyncDecode){l(new re("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var f=i.decode(e);s(f)}catch(_){var h=t&&_ instanceof re,p=_ instanceof An||_ instanceof fe,m=p&&n;if(h||m)return setTimeout(a,i._timeBetweenDecodingAttempts,s,l);l(_)}};return new Promise(function(s,l){return a(s,l)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);t(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(f){t(null,f);var s=f instanceof An||f instanceof fe,l=f instanceof re;(s||l)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var t=this.getCaptureCanvas(e),n=new gN(t),i=new hN(n);return new J5(i)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),jn=(function(){function r(e,t,n,i,a,s){n===void 0&&(n=t==null?0:8*t.length),s===void 0&&(s=St.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,s==null?this.timestamp=St.currentTimeMillis():this.timestamp=s}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);St.arraycopy(t,0,n,0,t.length),St.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),rv;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(rv||(rv={}));const Ie=rv;var iv;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(iv||(iv={}));const Ln=iv;var K1=(function(){function r(e,t,n,i,a,s){a===void 0&&(a=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),zc=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),xo=(function(){function r(e,t){if(t.length===0)throw new Ce;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,a=t.length;i!==a;i++){var s=t[i];n=zc.addOrSubtract(n,s)}return n}n=t[0];for(var l=t.length,f=this.field,i=1;i<l;i++)n=zc.addOrSubtract(f.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),s=n.length-t.length;St.arraycopy(n,0,a,0,s);for(var l=s;l<n.length;l++)a[l]=zc.addOrSubtract(t[l-s],n[l]);return new r(this.field,a)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,s=new Int32Array(n+a-1),l=this.field,f=0;f<n;f++)for(var h=t[f],p=0;p<a;p++)s[f+p]=zc.addOrSubtract(s[f+p],l.multiply(h,i[p]));return new r(l,s)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),a=this.coefficients,s=0;s<t;s++)i[s]=n.multiply(a[s],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),s=this.field,l=0;l<i;l++)a[l]=s.multiply(n[l],t);return new r(s,a)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ce("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ce("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,a=e.getCoefficient(e.getDegree()),s=t.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var l=i.getDegree()-e.getDegree(),f=t.multiply(i.getCoefficient(i.getDegree()),s),h=e.multiplyByMonomial(l,f),p=t.buildMonomial(l,f);n=n.addOrSubtract(p),i=i.addOrSubtract(h)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),yN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ES=(function(r){yN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(ur),_N=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),or=(function(r){_N(e,r);function e(t,n,i){var a=r.call(this)||this;a.primitive=t,a.size=n,a.generatorBase=i;for(var s=new Int32Array(n),l=1,f=0;f<n;f++)s[f]=l,l*=2,l>=n&&(l^=t,l&=n-1);a.expTable=s;for(var h=new Int32Array(n),f=0;f<n-1;f++)h[s[f]]=f;return a.logTable=h,a.zero=new xo(a,Int32Array.from([0])),a.one=new xo(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new Ce;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new xo(this,i)},e.prototype.inverse=function(t){if(t===0)throw new ES;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ze.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(zc),EN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),yd=(function(r){EN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(ur),xN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Pf=(function(r){xN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(ur),Y1=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new xo(n,e),a=new Int32Array(t),s=!0,l=0;l<t;l++){var f=i.evaluateAt(n.exp(l+n.getGeneratorBase()));a[a.length-1-l]=f,f!==0&&(s=!1)}if(!s)for(var h=new xo(n,a),p=this.runEuclideanAlgorithm(n.buildMonomial(t,1),h,t),m=p[0],_=p[1],E=this.findErrorLocations(m),T=this.findErrorMagnitudes(_,E),l=0;l<E.length;l++){var S=e.length-1-n.log(E[l]);if(S<0)throw new yd("Bad error location");e[S]=or.addOrSubtract(e[S],T[l])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=this.field,s=e,l=t,f=a.getZero(),h=a.getOne();l.getDegree()>=(n/2|0);){var p=s,m=f;if(s=l,f=h,s.isZero())throw new yd("r_{i-1} was zero");l=p;for(var _=a.getZero(),E=s.getCoefficient(s.getDegree()),T=a.inverse(E);l.getDegree()>=s.getDegree()&&!l.isZero();){var S=l.getDegree()-s.getDegree(),D=a.multiply(l.getCoefficient(l.getDegree()),T);_=_.addOrSubtract(a.buildMonomial(S,D)),l=l.addOrSubtract(s.multiplyByMonomial(S,D))}if(h=_.multiply(f).addOrSubtract(m),l.getDegree()>=s.getDegree())throw new Pf("Division algorithm failed to reduce polynomial?")}var V=h.getCoefficient(0);if(V===0)throw new yd("sigmaTilde(0) was zero");var M=a.inverse(V),B=h.multiplyScalar(M),H=l.multiplyScalar(M);return[B,H]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,a=this.field,s=1;s<a.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(n[i]=a.inverse(s),i++);if(i!==t)throw new yd("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),a=this.field,s=0;s<n;s++){for(var l=a.inverse(t[s]),f=1,h=0;h<n;h++)if(s!==h){var p=a.multiply(t[h],l),m=(p&1)===0?p|1:p&-2;f=a.multiply(f,m)}i[s]=a.multiply(e.evaluateAt(l),a.inverse(f)),a.getGeneratorBase()!==0&&(i[s]=a.multiply(i[s],l))}return i},r})(),On;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(On||(On={}));var fA=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),a=r.convertBoolArrayToByteArray(i),s=r.getEncodedData(i),l=new K1(a,s,null,null);return l.setNumBits(i.length),l},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=On.UPPER,i=On.UPPER,a="",s=0;s<t;)if(i===On.BINARY){if(t-s<5)break;var l=r.readCode(e,s,5);if(s+=5,l===0){if(t-s<11)break;l=r.readCode(e,s,11)+31,s+=11}for(var f=0;f<l;f++){if(t-s<8){s=t;break}var h=r.readCode(e,s,8);a+=$e.castAsNonUtf8Char(h),s+=8}i=n}else{var p=i===On.DIGIT?4:5;if(t-s<p)break;var h=r.readCode(e,s,p);s+=p;var m=r.getCharacter(i,h);m.startsWith("CTRL_")?(n=i,i=r.getTable(m.charAt(5)),m.charAt(6)==="L"&&(n=i)):(a+=m,i=n)}return a},r.getTable=function(e){switch(e){case"L":return On.LOWER;case"P":return On.PUNCT;case"M":return On.MIXED;case"D":return On.DIGIT;case"B":return On.BINARY;default:return On.UPPER}},r.getCharacter=function(e,t){switch(e){case On.UPPER:return r.UPPER_TABLE[t];case On.LOWER:return r.LOWER_TABLE[t];case On.MIXED:return r.MIXED_TABLE[t];case On.PUNCT:return r.PUNCT_TABLE[t];case On.DIGIT:return r.DIGIT_TABLE[t];default:throw new Pf("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=or.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=or.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=or.AZTEC_DATA_10):(n=12,t=or.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new fe;for(var s=e.length%n,l=new Int32Array(a),f=0;f<a;f++,s+=n)l[f]=r.readCode(e,s,n);try{var h=new Y1(t);h.decode(l,a-i)}catch(D){throw new fe(D)}for(var p=(1<<n)-1,m=0,f=0;f<i;f++){var _=l[f];if(_===0||_===p)throw new fe;(_===1||_===p-1)&&m++}for(var E=new Array(i*n-m),T=0,f=0;f<i;f++){var _=l[f];if(_===1||_===p-1)E.fill(_>1,T,T+n-1),T+=n-1;else for(var S=n-1;S>=0;--S)E[T++]=(_&1<<S)!==0}return E},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,a=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(var l=0;l<a.length;l++)a[l]=l;else for(var f=i+1+2*ze.truncDivision(ze.truncDivision(i,2)-1,15),h=i/2,p=ze.truncDivision(f,2),l=0;l<h;l++){var m=l+ze.truncDivision(l,15);a[h-l-1]=p-m-1,a[h+l]=p+m+1}for(var l=0,_=0;l<n;l++){for(var E=(n-l)*4+(t?9:12),T=l*2,S=i-1-T,D=0;D<E;D++)for(var V=D*2,M=0;M<2;M++)s[_+V+M]=e.get(a[T+M],a[T+D]),s[_+2*E+V+M]=e.get(a[T+D],a[S-M]),s[_+4*E+V+M]=e.get(a[S-M],a[S-D]),s[_+6*E+V+M]=e.get(a[S-D],a[T+M]);_+=E*8}return s},r.readCode=function(e,t,n){for(var i=0,a=t;a<t+n;a++)i<<=1,e[a]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),nt=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var a=e-n,s=t-i;return Math.sqrt(a*a+s*s)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var a=e[n];t+=a}return t},r})(),av=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),Ee=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*av.floatToIntBits(this.x)+av.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,s,l;if(n>=t&&n>=i?(s=e[0],a=e[1],l=e[2]):i>=n&&i>=t?(s=e[1],a=e[0],l=e[2]):(s=e[2],a=e[0],l=e[1]),this.crossProductZ(a,s,l)<0){var f=a;a=l,l=f}e[0]=a,e[1]=s,e[2]=l},r.distance=function(e,t){return nt.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,a=t.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},r})(),Em=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),AN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wN=(function(r){AN(e,r);function e(t,n,i,a,s){var l=r.call(this,t,n)||this;return l.compact=i,l.nbDatablocks=a,l.nbLayers=s,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Em),ov=(function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=t/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,a=!1,s=!0,l=!1,f=!1,h=!1,p=!1,m=!1,_=this.width,E=this.height;s;){s=!1;for(var T=!0;(T||!f)&&t<_;)T=this.containsBlackPoint(n,i,t,!1),T?(t++,s=!0,f=!0):f||t++;if(t>=_){a=!0;break}for(var S=!0;(S||!h)&&i<E;)S=this.containsBlackPoint(e,t,i,!0),S?(i++,s=!0,h=!0):h||i++;if(i>=E){a=!0;break}for(var D=!0;(D||!p)&&e>=0;)D=this.containsBlackPoint(n,i,e,!1),D?(e--,s=!0,p=!0):p||e--;if(e<0){a=!0;break}for(var V=!0;(V||!m)&&n>=0;)V=this.containsBlackPoint(e,t,n,!0),V?(n--,s=!0,m=!0):m||n--;if(n<0){a=!0;break}s&&(l=!0)}if(!a&&l){for(var M=t-e,B=null,H=1;B===null&&H<M;H++)B=this.getBlackPointOnSegment(e,i-H,e+H,i);if(B==null)throw new re;for(var $=null,H=1;$===null&&H<M;H++)$=this.getBlackPointOnSegment(e,n+H,e+H,n);if($==null)throw new re;for(var J=null,H=1;J===null&&H<M;H++)J=this.getBlackPointOnSegment(t,n+H,t-H,n);if(J==null)throw new re;for(var C=null,H=1;C===null&&H<M;H++)C=this.getBlackPointOnSegment(t,i-H,t-H,i);if(C==null)throw new re;return this.centerEdges(C,B,J,$)}else throw new re},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var a=nt.round(nt.distance(e,t,n,i)),s=(n-e)/a,l=(i-t)/a,f=this.image,h=0;h<a;h++){var p=nt.round(e+h*s),m=nt.round(t+h*l);if(f.get(p,m))return new Ee(p,m)}return null},r.prototype.centerEdges=function(e,t,n,i){var a=e.getX(),s=e.getY(),l=t.getX(),f=t.getY(),h=n.getX(),p=n.getY(),m=i.getX(),_=i.getY(),E=r.CORR;return a<this.width/2?[new Ee(m-E,_+E),new Ee(l+E,f+E),new Ee(h-E,p-E),new Ee(a+E,s-E)]:[new Ee(m+E,_+E),new Ee(l+E,f-E),new Ee(h-E,p+E),new Ee(a-E,s-E)]},r.prototype.containsBlackPoint=function(e,t,n,i){var a=this.image;if(i){for(var s=e;s<=t;s++)if(a.get(s,n))return!0}else for(var l=e;l<=t;l++)if(a.get(n,l))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),hA=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),a=!0,s=0;s<t.length&&a;s+=2){var l=Math.floor(t[s]),f=Math.floor(t[s+1]);if(l<-1||l>n||f<-1||f>i)throw new re;a=!1,l===-1?(t[s]=0,a=!0):l===n&&(t[s]=n-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}a=!0;for(var s=t.length-2;s>=0&&a;s-=2){var l=Math.floor(t[s]),f=Math.floor(t[s+1]);if(l<-1||l>n||f<-1||f>i)throw new re;a=!1,l===-1?(t[s]=0,a=!0):l===n&&(t[s]=n-1,a=!0),f===-1?(t[s+1]=0,a=!0):f===i&&(t[s+1]=i-1,a=!0)}},r})(),xS=(function(){function r(e,t,n,i,a,s,l,f,h){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=a,this.a32=s,this.a13=l,this.a23=f,this.a33=h}return r.quadrilateralToQuadrilateral=function(e,t,n,i,a,s,l,f,h,p,m,_,E,T,S,D){var V=r.quadrilateralToSquare(e,t,n,i,a,s,l,f),M=r.squareToQuadrilateral(h,p,m,_,E,T,S,D);return M.times(V)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,f=this.a23,h=this.a31,p=this.a32,m=this.a33,_=0;_<t;_+=2){var E=e[_],T=e[_+1],S=a*E+f*T+m;e[_]=(n*E+s*T+h)/S,e[_+1]=(i*E+l*T+p)/S}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,a=this.a13,s=this.a21,l=this.a22,f=this.a23,h=this.a31,p=this.a32,m=this.a33,_=e.length,E=0;E<_;E++){var T=e[E],S=t[E],D=a*T+f*S+m;e[E]=(n*T+s*S+h)/D,t[E]=(i*T+l*S+p)/D}},r.squareToQuadrilateral=function(e,t,n,i,a,s,l,f){var h=e-n+a-l,p=t-i+s-f;if(h===0&&p===0)return new r(n-e,a-n,e,i-t,s-i,t,0,0,1);var m=n-a,_=l-a,E=i-s,T=f-s,S=m*T-_*E,D=(h*T-_*p)/S,V=(m*p-h*E)/S;return new r(n-e+D*n,l-e+V*l,e,i-t+D*i,f-t+V*f,t,D,V,1)},r.quadrilateralToSquare=function(e,t,n,i,a,s,l,f){return r.squareToQuadrilateral(e,t,n,i,a,s,l,f).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),TN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),SN=(function(r){TN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,a,s,l,f,h,p,m,_,E,T,S,D,V,M,B,H){var $=xS.quadrilateralToQuadrilateral(a,s,l,f,h,p,m,_,E,T,S,D,V,M,B,H);return this.sampleGridWithTransform(t,n,i,$)},e.prototype.sampleGridWithTransform=function(t,n,i,a){if(n<=0||i<=0)throw new re;for(var s=new Fi(n,i),l=new Float32Array(2*n),f=0;f<i;f++){for(var h=l.length,p=f+.5,m=0;m<h;m+=2)l[m]=m/2+.5,l[m+1]=p;a.transformPoints(l),hA.checkAndNudgePoints(t,l);try{for(var m=0;m<h;m+=2)t.get(Math.floor(l[m]),Math.floor(l[m+1]))&&s.set(m/2,f)}catch{throw new re}}return s},e})(hA),xm=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new SN,r})(),ar=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new Ee(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),IN=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new wN(a,s,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new re;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,a=0;a<4;a++){var s=n[(this.shift+a)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(a,s,l){var f=(a>>t-2<<1)+(a&1);n=(n<<3)+f}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(ze.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new re},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var a=n-i,s=new Int32Array(n),l=n-1;l>=0;--l)s[l]=e&15,e>>=4;try{var f=new Y1(or.AZTEC_PARAM);f.decode(s,a)}catch{throw new re}for(var h=0,l=0;l<i;l++)h=(h<<4)+s[l];return h},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,a=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(t,s,1,-1),f=this.getFirstDifferent(n,s,1,1),h=this.getFirstDifferent(i,s,-1,1),p=this.getFirstDifferent(a,s,-1,-1);if(this.nbCenterLayers>2){var m=this.distancePoint(p,l)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(m<.75||m>1.25||!this.isWhiteOrBlackRectangle(l,f,h,p))break}t=l,n=f,i=h,a=p,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;var _=new Ee(t.getX()+.5,t.getY()-.5),E=new Ee(n.getX()+.5,n.getY()+.5),T=new Ee(i.getX()-.5,i.getY()+.5),S=new Ee(a.getX()-.5,a.getY()-.5);return this.expandSquare([_,E,T,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var a=new ov(this.image).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{var s=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new ar(s+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ar(s+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ar(s-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ar(s-7,l-7),!1,-1,-1).toResultPoint()}var f=nt.round((e.getX()+i.getX()+t.getX()+n.getX())/4),h=nt.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var a=new ov(this.image,15,f,h).detect();e=a[0],t=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new ar(f+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new ar(f+7,h+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ar(f-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ar(f-7,h-7),!1,-1,-1).toResultPoint()}return f=nt.round((e.getX()+i.getX()+t.getX()+n.getX())/4),h=nt.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new ar(f,h)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,a){var s=xm.getInstance(),l=this.getDimension(),f=l/2-this.nbCenterLayers,h=l/2+this.nbCenterLayers;return s.sampleGrid(e,l,l,f,f,h,f,h,h,f,h,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,a=this.distanceResultPoint(e,t),s=a/n,l=e.getX(),f=e.getY(),h=s*(t.getX()-e.getX())/a,p=s*(t.getY()-e.getY())/a,m=0;m<n;m++)this.image.get(nt.round(l+m*h),nt.round(f+m*p))&&(i|=1<<n-m-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var a=3;e=new ar(e.getX()-a,e.getY()+a),t=new ar(t.getX()-a,t.getY()-a),n=new ar(n.getX()+a,n.getY()-a),i=new ar(i.getX()+a,i.getY()+a);var s=this.getColor(i,e);if(s===0)return!1;var l=this.getColor(e,t);return l!==s||(l=this.getColor(t,n),l!==s)?!1:(l=this.getColor(n,i),l===s)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,a=(t.getY()-e.getY())/n,s=0,l=e.getX(),f=e.getY(),h=this.image.get(e.getX(),e.getY()),p=Math.ceil(n),m=0;m<p;m++)l+=i,f+=a,this.image.get(nt.round(l),nt.round(f))!==h&&s++;var _=s/n;return _>.1&&_<.9?0:_<=.1===h?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var a=e.getX()+n,s=e.getY()+i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n,s+=i;for(a-=n,s-=i;this.isValid(a,s)&&this.image.get(a,s)===t;)a+=n;for(a-=n;this.isValid(a,s)&&this.image.get(a,s)===t;)s+=i;return s-=i,new ar(a,s)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),a=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,h=new Ee(l+i*a,f+i*s),p=new Ee(l-i*a,f-i*s);a=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;var m=new Ee(l+i*a,f+i*s),_=new Ee(l-i*a,f-i*s),E=[h,m,p,_];return E},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=nt.round(e.getX()),n=nt.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return nt.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ze.truncDivision(this.nbLayers-4,8)+1)+15},r})(),sv=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new IN(e.getBlackMatrix()),a=null,s=null;try{var l=i.detectMirror(!1);a=l.getPoints(),this.reportFoundResultPoints(t,a),s=new fA().decode(l)}catch(m){n=m}if(s==null)try{var l=i.detectMirror(!0);a=l.getPoints(),this.reportFoundResultPoints(t,a),s=new fA().decode(l)}catch(m){throw n??m}var f=new jn(s.getText(),s.getRawBytes(),s.getNumBits(),a,Ie.AZTEC,St.currentTimeMillis()),h=s.getByteSegments();h!=null&&f.putMetadata(Ln.BYTE_SEGMENTS,h);var p=s.getECLevel();return p!=null&&f.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p),f},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(Vt.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,a,s){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r})(),CN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){CN(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new sv,t)||this}return e})(_l);var dn=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(Vt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,t),s=a.getResultMetadata(),l=270;s!==null&&s.get(Ln.ORIENTATION)===!0&&(l=l+s.get(Ln.ORIENTATION)%360),a.putMetadata(Ln.ORIENTATION,l);var f=a.getResultPoints();if(f!==null)for(var h=i.getHeight(),p=0;p<f.length;p++)f[p]=new Ee(h-f[p].getY()-1,f[p].getX());return a}else throw new re}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),a=new wn(n),s=t&&t.get(Vt.TRY_HARDER)===!0,l=Math.max(1,i>>(s?8:5)),f;s?f=i:f=15;for(var h=Math.trunc(i/2),p=0;p<f;p++){var m=Math.trunc((p+1)/2),_=(p&1)===0,E=h+l*(_?m:-m);if(E<0||E>=i)break;try{a=e.getBlackRow(E,a)}catch{continue}for(var T=function(M){if(M===1&&(a.reverse(),t&&t.get(Vt.NEED_RESULT_POINT_CALLBACK)===!0)){var B=new Map;t.forEach(function(J,C){return B.set(C,J)}),B.delete(Vt.NEED_RESULT_POINT_CALLBACK),t=B}try{var H=S.decodeRow(E,a,t);if(M===1){H.putMetadata(Ln.ORIENTATION,180);var $=H.getResultPoints();$!==null&&($[0]=new Ee(n-$[0].getX()-1,$[0].getY()),$[1]=new Ee(n-$[1].getX()-1,$[1].getY()))}return{value:H}}catch{}},S=this,D=0;D<2;D++){var V=T(D);if(typeof V=="object")return V.value}}throw new re},r.recordPattern=function(e,t,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var s=e.getSize();if(t>=s)throw new re;for(var l=!e.get(t),f=0,h=t;h<s;){if(e.get(h)!==l)n[f]++;else{if(++f===i)break;n[f]=1,l=!l}h++}if(!(f===i||f===i-1&&h===s))throw new re},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,a=e.get(t);t>0&&i>=0;)e.get(--t)!==a&&(i--,a=!a);if(i>=0)throw new re;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,s=0,l=0;l<i;l++)a+=e[l],s+=t[l];if(a<s)return Number.POSITIVE_INFINITY;var f=a/s;n*=f;for(var h=0,p=0;p<i;p++){var m=e[p],_=t[p]*f,E=m>_?m-_:_-m;if(E>n)return Number.POSITIVE_INFINITY;h+=E}return h/a},r})(),bN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dA=(function(r){bN(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),a=0,s=Int32Array.from([0,0,0,0,0,0]),l=i,f=!1,h=6,p=i;p<n;p++)if(t.get(p)!==f)s[a]++;else{if(a===h-1){for(var m=e.MAX_AVG_VARIANCE,_=-1,E=e.CODE_START_A;E<=e.CODE_START_C;E++){var T=dn.patternMatchVariance(s,e.CODE_PATTERNS[E],e.MAX_INDIVIDUAL_VARIANCE);T<m&&(m=T,_=E)}if(_>=0&&t.isRange(Math.max(0,l-(p-l)/2),l,!1))return Int32Array.from([l,p,_]);l+=s[0]+s[1],s=s.slice(2,s.length-1),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,f=!f}throw new re},e.decodeCode=function(t,n,i){dn.recordPattern(t,i,n);for(var a=e.MAX_AVG_VARIANCE,s=-1,l=0;l<e.CODE_PATTERNS.length;l++){var f=e.CODE_PATTERNS[l],h=this.patternMatchVariance(n,f,e.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,s=l)}if(s>=0)return s;throw new re},e.prototype.decodeRow=function(t,n,i){var a=i&&i.get(Vt.ASSUME_GS1)===!0,s=e.findStartPattern(n),l=s[2],f=0,h=new Uint8Array(20);h[f++]=l;var p;switch(l){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new fe}for(var m=!1,_=!1,E="",T=s[0],S=s[1],D=Int32Array.from([0,0,0,0,0,0]),V=0,M=0,B=l,H=0,$=!0,J=!1,C=!1;!m;){var b=_;switch(_=!1,V=M,M=e.decodeCode(n,D,S),h[f++]=M,M!==e.CODE_STOP&&($=!0),M!==e.CODE_STOP&&(H++,B+=H*M),T=S,S+=D.reduce(function(de,we){return de+we},0),M){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new fe}switch(p){case e.CODE_CODE_A:if(M<64)C===J?E+=String.fromCharCode(32+M):E+=String.fromCharCode(32+M+128),C=!1;else if(M<96)C===J?E+=String.fromCharCode(M-64):E+=String.fromCharCode(M+64),C=!1;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!J&&C?(J=!0,C=!1):J&&C?(J=!1,C=!1):C=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_B:if(M<96)C===J?E+=String.fromCharCode(32+M):E+=String.fromCharCode(32+M+128),C=!1;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!J&&C?(J=!0,C=!1):J&&C?(J=!1,C=!1):C=!0;break;case e.CODE_SHIFT:_=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_C:if(M<100)M<10&&(E+="0"),E+=M;else switch(M!==e.CODE_STOP&&($=!1),M){case e.CODE_FNC_1:a&&(E.length===0?E+="]C1":E+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:m=!0;break}break}b&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=S-T;if(S=n.getNextUnset(S),!n.isRange(S,Math.min(n.getSize(),S+(S-T)/2),!1))throw new re;if(B-=H*V,B%103!==V)throw new An;var P=E.length;if(P===0)throw new re;P>0&&$&&(p===e.CODE_CODE_C?E=E.substring(0,P-2):E=E.substring(0,P-1));for(var k=(s[1]+s[0])/2,U=T+N/2,L=h.length,Pe=new Uint8Array(L),yt=0;yt<L;yt++)Pe[yt]=h[yt];var ne=[new Ee(k,t),new Ee(U,t)];return new jn(E,Pe,0,ne,Ie.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(dn),RN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pA=(function(r){RN(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var a,s,l,f,h=this.counters;h.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(n,h),m=n.getNextSet(p[1]),_=n.getSize(),E,T;do{e.recordPattern(n,m,h);var S=e.toNarrowWidePattern(h);if(S<0)throw new re;E=e.patternToChar(S),this.decodeRowResult+=E,T=m;try{for(var D=(a=void 0,dg(h)),V=D.next();!V.done;V=D.next()){var M=V.value;m+=M}}catch(L){a={error:L}}finally{try{V&&!V.done&&(s=D.return)&&s.call(D)}finally{if(a)throw a.error}}m=n.getNextSet(m)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var H=dg(h),$=H.next();!$.done;$=H.next()){var M=$.value;B+=M}}catch(L){l={error:L}}finally{try{$&&!$.done&&(f=H.return)&&f.call(H)}finally{if(l)throw l.error}}var J=m-T-B;if(m!==_&&J*2<B)throw new re;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,b=0,N=0;N<C;N++)b+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(b%43))throw new An;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new re;var P;this.extendedMode?P=e.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;var k=(p[1]+p[0])/2,U=T+B/2;return new jn(P,null,0,[new Ee(k,t),new Ee(U,t)],Ie.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),a=t.getNextSet(0),s=0,l=a,f=!1,h=n.length,p=a;p<i;p++)if(t.get(p)!==f)n[s]++;else{if(s===h-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,l-Math.floor((p-l)/2)),l,!1))return[l,p];l+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,f=!f}throw new re},e.toNarrowWidePattern=function(t){var n,i,a=t.length,s=0,l;do{var f=2147483647;try{for(var h=(n=void 0,dg(t)),p=h.next();!p.done;p=h.next()){var m=p.value;m<f&&m>s&&(f=m)}}catch(S){n={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}s=f,l=0;for(var _=0,E=0,T=0;T<a;T++){var m=t[T];m>s&&(E|=1<<a-1-T,l++,_+=m)}if(l===3){for(var T=0;T<a&&l>0;T++){var m=t[T];if(m>s&&(l--,m*2>=_))return-1}return E}}while(l>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new re},e.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var s=t.charAt(a);if(s==="+"||s==="$"||s==="%"||s==="/"){var l=t.charAt(a+1),f="\0";switch(s){case"+":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new fe;break;case"$":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new fe;break;case"%":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l==="X"||l==="Y"||l==="Z")f="";else throw new fe;break;case"/":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new fe;break}i+=f,a++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(dn),DN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gA=(function(r){DN(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var a,s,l,f,h=this.findAsteriskPattern(n),p=n.getNextSet(h[1]),m=n.getSize(),_=this.counters;_.fill(0),this.decodeRowResult="";var E,T;do{e.recordPattern(n,p,_);var S=this.toPattern(_);if(S<0)throw new re;E=this.patternToChar(S),this.decodeRowResult+=E,T=p;try{for(var D=(a=void 0,pg(_)),V=D.next();!V.done;V=D.next()){var M=V.value;p+=M}}catch(N){a={error:N}}finally{try{V&&!V.done&&(s=D.return)&&s.call(D)}finally{if(a)throw a.error}}p=n.getNextSet(p)}while(E!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var B=0;try{for(var H=pg(_),$=H.next();!$.done;$=H.next()){var M=$.value;B+=M}}catch(N){l={error:N}}finally{try{$&&!$.done&&(f=H.return)&&f.call(H)}finally{if(l)throw l.error}}if(p===m||!n.get(p))throw new re;if(this.decodeRowResult.length<2)throw new re;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var J=this.decodeExtended(this.decodeRowResult),C=(h[1]+h[0])/2,b=T+B/2;return new jn(J,null,0,[new Ee(C,t),new Ee(b,t)],Ie.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var a=this.counters,s=i,l=!1,f=a.length,h=0,p=i;p<n;p++)if(t.get(p)!==l)a[h]++;else{if(h===f-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([s,p]);s+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,l=!l}throw new re},e.prototype.toPattern=function(t){var n,i,a=0;try{for(var s=pg(t),l=s.next();!l.done;l=s.next()){var f=l.value;a+=f}}catch(T){n={error:T}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}for(var h=0,p=t.length,m=0;m<p;m++){var _=Math.round(t[m]*9/a);if(_<1||_>4)return-1;if((m&1)===0)for(var E=0;E<_;E++)h=h<<1|1;else h<<=_}return h},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new re},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",a=0;a<n;a++){var s=t.charAt(a);if(s>="a"&&s<="d"){if(a>=n-1)throw new fe;var l=t.charAt(a+1),f="\0";switch(s){case"d":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)+32);else throw new fe;break;case"a":if(l>="A"&&l<="Z")f=String.fromCharCode(l.charCodeAt(0)-64);else throw new fe;break;case"b":if(l>="A"&&l<="E")f=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")f=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")f=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")f="\0";else if(l==="V")f="@";else if(l==="W")f="`";else if(l>="X"&&l<="Z")f="";else throw new fe;break;case"c":if(l>="A"&&l<="O")f=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")f=":";else throw new fe;break}i+=f,a++}else i+=s}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var a=1,s=0,l=n-1;l>=0;l--)s+=a*e.ALPHABET_STRING.indexOf(t.charAt(l)),++a>i&&(a=1);if(t.charAt(n)!==e.ALPHABET_STRING[s%47])throw new An},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(dn),ON=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),NN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vA=(function(r){ON(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var a,s,l=this.decodeStart(n),f=this.decodeEnd(n),h=new Fe;e.decodeMiddle(n,l[1],f[0],h);var p=h.toString(),m=null;i!=null&&(m=i.get(Vt.ALLOWED_LENGTHS)),m==null&&(m=e.DEFAULT_ALLOWED_LENGTHS);var _=p.length,E=!1,T=0;try{for(var S=NN(m),D=S.next();!D.done;D=S.next()){var V=D.value;if(_===V){E=!0;break}V>T&&(T=V)}}catch(H){a={error:H}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}if(!E&&_>T&&(E=!0),!E)throw new fe;var M=[new Ee(l[1],t),new Ee(f[0],t)],B=new jn(p,null,0,M,Ie.ITF,new Date().getTime());return B},e.decodeMiddle=function(t,n,i,a){var s=new Int32Array(10),l=new Int32Array(5),f=new Int32Array(5);for(s.fill(0),l.fill(0),f.fill(0);n<i;){dn.recordPattern(t,n,s);for(var h=0;h<5;h++){var p=2*h;l[h]=s[p],f[h]=s[p+1]}var m=e.decodeDigit(l);a.append(m.toString()),m=this.decodeDigit(f),a.append(m.toString()),s.forEach(function(_){n+=_})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!t.get(a);a--)i--;if(i!==0)throw new re},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new re;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof re&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var a=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-a,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var a=i.length,s=new Int32Array(a),l=t.getSize(),f=!1,h=0,p=n;s.fill(0);for(var m=n;m<l;m++)if(t.get(m)!==f)s[h]++;else{if(h===a-1){if(dn.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,m];p+=s[0]+s[1],St.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,f=!f}throw new re},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,s=0;s<a;s++){var l=e.PATTERNS[s],f=dn.patternMatchVariance(t,l,e.MAX_INDIVIDUAL_VARIANCE);f<n?(n=f,i=s):f===n&&(i=-1)}if(i>=0)return i%10;throw new re},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(dn),MN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fl=(function(r){MN(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,a=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,a,!1,this.START_END_PATTERN,s);var l=i[0];a=i[1];var f=l-(a-l);f>=0&&(n=t.isRange(f,l,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}i*=3;for(var a=n-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,a){return this.findGuardPattern(t,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(t,n,i,a,s){var l=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var f=0,h=n,p=a.length,m=i,_=n;_<l;_++)if(t.get(_)!==m)s[f]++;else{if(f===p-1){if(dn.patternMatchVariance(s,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,_]);h+=s[0]+s[1];for(var E=s.slice(2,s.length),T=0;T<f-1;T++)s[T]=E[T];s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,m=!m}throw new re},e.decodeDigit=function(t,n,i,a){this.recordPattern(t,i,n);for(var s=this.MAX_AVG_VARIANCE,l=-1,f=a.length,h=0;h<f;h++){var p=a[h],m=dn.patternMatchVariance(n,p,e.MAX_INDIVIDUAL_VARIANCE);m<s&&(s=m,l=h)}if(l>=0)return l;throw new re},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(dn),PN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LN=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),s=i.toString(),l=r.parseExtensionString(s),f=[new Ee((n[0]+n[1])/2,e),new Ee(a,e)],h=new jn(s,null,0,f,Ie.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},r.prototype.decodeMiddle=function(e,t,n){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),f=t[1],h=0,p=0;p<5&&f<l;p++){var m=fl.decodeDigit(e,s,f,fl.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);try{for(var _=(i=void 0,PN(s)),E=_.next();!E.done;E=_.next()){var T=E.value;f+=T}}catch(D){i={error:D}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}m>=10&&(h|=1<<4-p),p!==4&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(n.length!==5)throw new re;var S=this.determineCheckDigit(h);if(r.extensionChecksum(n.toString())!==S)throw new re;return f},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new re},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Ln.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,s=a<10?"0"+a:a.toString();return t+i+"."+s},r})(),VN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BN=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(t,n,i),s=i.toString(),l=r.parseExtensionString(s),f=[new Ee((n[0]+n[1])/2,e),new Ee(a,e)],h=new jn(s,null,0,f,Ie.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},r.prototype.decodeMiddle=function(e,t,n){var i,a,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),f=t[1],h=0,p=0;p<2&&f<l;p++){var m=fl.decodeDigit(e,s,f,fl.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);try{for(var _=(i=void 0,VN(s)),E=_.next();!E.done;E=_.next()){var T=E.value;f+=T}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}m>=10&&(h|=1<<1-p),p!==1&&(f=e.getNextSet(f),f=e.getNextUnset(f))}if(n.length!==2)throw new re;if(parseInt(n.toString())%4!==h)throw new re;return f},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ln.ISSUE_NUMBER,parseInt(e)]])},r})(),kN=(function(){function r(){}return r.decodeRow=function(e,t,n){var i=fl.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new LN;return a.decodeRow(e,t,i)}catch{var s=new BN;return s.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),FN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),cn=(function(r){FN(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),s=0;s<i.length;s++)a[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[n]=a}return t}return e.prototype.decodeRow=function(t,n,i){var a=e.findStartGuardPattern(n),s=i==null?null:i.get(Vt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var l=new Ee((a[0]+a[1])/2,t);s.foundPossibleResultPoint(l)}var f=this.decodeMiddle(n,a,this.decodeRowStringBuffer),h=f.rowOffset,p=f.resultString;if(s!=null){var m=new Ee(h,t);s.foundPossibleResultPoint(m)}var _=e.decodeEnd(n,h);if(s!=null){var E=new Ee((_[0]+_[1])/2,t);s.foundPossibleResultPoint(E)}var T=_[1],S=T+(T-_[0]);if(S>=n.getSize()||!n.isRange(T,S,!1))throw new re;var D=p.toString();if(D.length<8)throw new fe;if(!e.checkChecksum(D))throw new An;var V=(a[1]+a[0])/2,M=(_[1]+_[0])/2,B=this.getBarcodeFormat(),H=[new Ee(V,t),new Ee(M,t)],$=new jn(D,null,0,H,B,new Date().getTime()),J=0;try{var C=kN.decodeRow(t,n,_[1]);$.putMetadata(Ln.UPC_EAN_EXTENSION,C.getText()),$.putAllMetadata(C.getResultMetadata()),$.addResultPoints(C.getResultPoints()),J=C.getText().length}catch{}var b=i==null?null:i.get(Vt.ALLOWED_EAN_EXTENSIONS);if(b!=null){var N=!1;for(var P in b)if(J.toString()===P){N=!0;break}if(!N)throw new re}return B===Ie.EAN_13||Ie.UPC_A,$},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,a=n-1;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}i*=3;for(var a=n-2;a>=0;a-=2){var s=t.charAt(a).charCodeAt(0)-48;if(s<0||s>9)throw new fe;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(fl),UN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uv=(function(r){UN(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,l,f,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),m=n[1],_=0,E=0;E<6&&m<p;E++){var T=cn.decodeDigit(t,h,m,cn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+T%10);try{for(var S=(a=void 0,mA(h)),D=S.next();!D.done;D=S.next()){var V=D.value;m+=V}}catch($){a={error:$}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}T>=10&&(_|=1<<5-E)}i=e.determineFirstDigit(i,_);var M=cn.findGuardPattern(t,m,!0,cn.MIDDLE_PATTERN,new Int32Array(cn.MIDDLE_PATTERN.length).fill(0));m=M[1];for(var E=0;E<6&&m<p;E++){var T=cn.decodeDigit(t,h,m,cn.L_PATTERNS);i+=String.fromCharCode(48+T);try{for(var B=(l=void 0,mA(h)),H=B.next();!H.done;H=B.next()){var V=H.value;m+=V}}catch(C){l={error:C}}finally{try{H&&!H.done&&(f=B.return)&&f.call(B)}finally{if(l)throw l.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ie.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new re},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(cn),zN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),yA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_A=(function(r){zN(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,l,f,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var p=t.getSize(),m=n[1],_=0;_<4&&m<p;_++){var E=cn.decodeDigit(t,h,m,cn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var T=(a=void 0,yA(h)),S=T.next();!S.done;S=T.next()){var D=S.value;m+=D}}catch(H){a={error:H}}finally{try{S&&!S.done&&(s=T.return)&&s.call(T)}finally{if(a)throw a.error}}}var V=cn.findGuardPattern(t,m,!0,cn.MIDDLE_PATTERN,new Int32Array(cn.MIDDLE_PATTERN.length).fill(0));m=V[1];for(var _=0;_<4&&m<p;_++){var E=cn.decodeDigit(t,h,m,cn.L_PATTERNS);i+=String.fromCharCode(48+E);try{for(var M=(l=void 0,yA(h)),B=M.next();!B.done;B=M.next()){var D=B.value;m+=D}}catch(J){l={error:J}}finally{try{B&&!B.done&&(f=M.return)&&f.call(M)}finally{if(l)throw l.error}}}return{rowOffset:m,resultString:i}},e.prototype.getBarcodeFormat=function(){return Ie.EAN_8},e})(cn),jN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),EA=(function(r){jN(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new uv,t}return e.prototype.getBarcodeFormat=function(){return Ie.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new jn(n.substring(1),null,null,t.getResultPoints(),Ie.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new re},e.prototype.reset=function(){this.ean13Reader.reset()},e})(cn),HN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),GN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xA=(function(r){HN(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var a,s,l=this.decodeMiddleCounters.map(function(D){return D});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var f=t.getSize(),h=n[1],p=0,m=0;m<6&&h<f;m++){var _=e.decodeDigit(t,l,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+_%10);try{for(var E=(a=void 0,GN(l)),T=E.next();!T.done;T=E.next()){var S=T.value;h+=S}}catch(D){a={error:D}}finally{try{T&&!T.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}_>=10&&(p|=1<<5-m)}return e.determineNumSysAndCheckDigit(new Fe(i),p),h},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return cn.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){t.insert(0,"0"+i),t.append("0"+a);return}throw re.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Ie.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Fe;i.append(t.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(cn),qN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),AA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gg=(function(r){qN(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(Vt.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Ie.EAN_13)>-1&&a.push(new uv),i.indexOf(Ie.UPC_A)>-1&&a.push(new EA),i.indexOf(Ie.EAN_8)>-1&&a.push(new _A),i.indexOf(Ie.UPC_E)>-1&&a.push(new xA)),a.length===0&&(a.push(new uv),a.push(new EA),a.push(new _A),a.push(new xA)),n.readers=a,n}return e.prototype.decodeRow=function(t,n,i){var a,s;try{for(var l=AA(this.readers),f=l.next();!f.done;f=l.next()){var h=f.value;try{var p=h.decodeRow(t,n,i),m=p.getBarcodeFormat()===Ie.EAN_13&&p.getText().charAt(0)==="0",_=i==null?null:i.get(Vt.POSSIBLE_FORMATS),E=_==null||_.includes(Ie.UPC_A);if(m&&E){var T=p.getRawBytes(),S=new jn(p.getText().substring(1),T,T?T.length:null,p.getResultPoints(),Ie.UPC_A);return S.putAllMetadata(p.getResultMetadata()),S}return p}catch{}}}catch(D){a={error:D}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}throw new re},e.prototype.reset=function(){var t,n;try{for(var i=AA(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;s.reset()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e})(dn),XN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),KN=(function(r){XN(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var a=this.getValidRowData(n);if(!a)throw new re;var s=this.codaBarDecodeRow(a.row);if(!s)throw new re;return new jn(s,null,0,[new Ee(a.left,t),new Ee(a.right,t)],Ie.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var s=[],l=n[0],f=1,h=1;h<n.length;h++)n[h]===l?f++:(l=n[h],s.push(f),f=1);return s.push(f),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:a}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(f,h){return(f+h)/2},0));t.length>0;){var a=t.splice(0,8).splice(0,7),s=a.map(function(f){return f<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var l=n.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(dn),YN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),WN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ds=(function(r){YN(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(dn.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new re},e.count=function(t){return nt.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,a=n[0],s=1;s<t.length;s++)n[s]>a&&(a=n[s],i=s);t[i]++},e.decrement=function(t,n){for(var i=0,a=n[0],s=1;s<t.length;s++)n[s]<a&&(a=n[s],i=s);t[i]--},e.isFinderPattern=function(t){var n,i,a=t[0]+t[1],s=a+t[2]+t[3],l=a/s;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var p=WN(t),m=p.next();!m.done;m=p.next()){var _=m.value;_>h&&(h=_),_<f&&(f=_)}}catch(E){n={error:E}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return h<10*f}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(dn),g1=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),AS=(function(){function r(e,t,n,i,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Ee(n,a)),this.resultPoints.push(new Ee(i,a))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),QN=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gu=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,a,s=0;try{for(var l=QN(e),f=l.next();!f.done;f=l.next()){var h=f.value;s+=h}}catch(M){i={error:M}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}for(var p=0,m=0,_=e.length,E=0;E<_-1;E++){var T=void 0;for(T=1,m|=1<<E;T<e[E];T++,m&=~(1<<E)){var S=r.combins(s-T-1,_-E-2);if(n&&m===0&&s-T-(_-E-1)>=_-E-1&&(S-=r.combins(s-T-(_-E),_-E-2)),_-E-1>1){for(var D=0,V=s-T-(_-E-2);V>t;V--)D+=r.combins(s-T-V-1,_-E-3);S-=D*(_-1-E)}else s-T>t&&S--;p+=S}s-=T}return p},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var a=1,s=1,l=e;l>n;l--)a*=l,s<=i&&(a/=s,s++);for(;s<=i;)a/=s,s++;return a},r})(),$N=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new wn(n),a=0,s=e[0],l=s.getRightChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&i.set(a),a++;for(var f=1;f<e.length;++f){for(var h=e[f],p=h.getLeftChar().getValue(),m=11;m>=0;--m)(p&1<<m)!==0&&i.set(a),a++;if(h.getRightChar()!==null)for(var _=h.getRightChar().getValue(),m=11;m>=0;--m)(_&1<<m)!==0&&i.set(a),a++}return i},r})(),us=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),Am=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),ZN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Jr=(function(r){ZN(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Am),JN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ls=(function(r){JN(e,r);function e(t,n,i){var a=r.call(this,t)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Am),e9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Bu=(function(r){e9(e,r);function e(t,n,i){var a=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new fe;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Am),_d=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t9=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,a,s,l,f,h;if(!e)return null;if(e.length<2)throw new re;var p=e.substring(0,2);try{for(var m=_d(r.TWO_DIGIT_DATA_LENGTH),_=m.next();!_.done;_=m.next()){var E=_.value;if(E[0]===p)return E[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,E[2],e):r.processFixedAI(2,E[1],e)}}catch(J){t={error:J}}finally{try{_&&!_.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}if(e.length<3)throw new re;var T=e.substring(0,3);try{for(var S=_d(r.THREE_DIGIT_DATA_LENGTH),D=S.next();!D.done;D=S.next()){var E=D.value;if(E[0]===T)return E[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,E[2],e):r.processFixedAI(3,E[1],e)}}catch(J){i={error:J}}finally{try{D&&!D.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}try{for(var V=_d(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),M=V.next();!M.done;M=V.next()){var E=M.value;if(E[0]===T)return E[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,E[2],e):r.processFixedAI(4,E[1],e)}}catch(J){s={error:J}}finally{try{M&&!M.done&&(l=V.return)&&l.call(V)}finally{if(s)throw s.error}}if(e.length<4)throw new re;var B=e.substring(0,4);try{for(var H=_d(r.FOUR_DIGIT_DATA_LENGTH),$=H.next();!$.done;$=H.next()){var E=$.value;if(E[0]===B)return E[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,E[2],e):r.processFixedAI(4,E[1],e)}}catch(J){f={error:J}}finally{try{$&&!$.done&&(h=H.return)&&h.call(H)}finally{if(f)throw f.error}}throw new re},r.processFixedAI=function(e,t,n){if(n.length<e)throw new re;var i=n.substring(0,e);if(n.length<e+t)throw new re;var a=n.substring(e,e+t),s=n.substring(e+t),l="("+i+")"+a,f=r.parseFieldsInGeneralPurpose(s);return f==null?l:l+f},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),a;n.length<e+t?a=n.length:a=e+t;var s=n.substring(e,a),l=n.substring(a),f="("+i+")"+s,h=r.parseFieldsInGeneralPurpose(l);return h==null?f:f+h},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),Ud=(function(){function r(e){this.buffer=new Fe,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var a=this.decodeGeneralPurposeField(n,i),s=t9.parseFieldsInGeneralPurpose(a.getNewString());if(s!=null&&e.append(s),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Bu(this.information.getSize(),Bu.FNC1,Bu.FNC1):new Bu(this.information.getSize(),t-1,Bu.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new Bu(e+7,i,a)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,a=0;a<n;++a)e.get(t+a)&&(i|=1<<n-a-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new ls(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ls(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new ls(this.current.getPosition(),this.buffer.toString()):t=new ls(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new us(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new ls(this.current.getPosition(),this.buffer.toString());return new us(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new us(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ls(this.current.getPosition(),this.buffer.toString());return new us(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new us(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ls(this.current.getPosition(),this.buffer.toString());return new us(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new us(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Jr(e+5,Jr.FNC1);if(t>=5&&t<15)return new Jr(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Jr(e+7,""+(n+1));if(n>=90&&n<116)return new Jr(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new fe}return new Jr(e+8,a)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Jr(e+5,Jr.FNC1);if(t>=5&&t<15)return new Jr(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Jr(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Pf("Decoding invalid alphanumeric value: "+n)}return new Jr(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),wS=(function(){function r(e){this.information=e,this.generalDecoder=new Ud(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),n9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ni=(function(r){n9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var a=0;a<4;++a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,a=0;a<13;a++){var s=t.charAt(a+n).charCodeAt(0)-48;i+=(a&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(wS),r9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),i9=(function(r){r9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Fe;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(ni),a9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),o9=(function(r){a9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Fe;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(wS),s9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zd=(function(r){s9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,a);for(var s=this.checkWeight(a),l=1e5,f=0;f<5;++f)s/l===0&&t.append("0"),l/=10;t.append(s)},e})(ni),u9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),TS=(function(r){u9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+zd.GTIN_SIZE+e.WEIGHT_SIZE)throw new re;var t=new Fe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+zd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(zd),l9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),c9=(function(r){l9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(TS),f9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),h9=(function(r){f9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(TS),d9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),p9=(function(r){d9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ni.GTIN_SIZE)throw new re;var t=new Fe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ni.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ni.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(ni),g9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),v9=(function(r){g9(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ni.GTIN_SIZE)throw new re;var t=new Fe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ni.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ni.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ni.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(ni),m9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ro=(function(r){m9(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new re;var t=new Fe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var a=i%32;i/=32;var s=i%12+1;i/=12;var l=i;l/10===0&&t.append("0"),t.append(l),s/10===0&&t.append("0"),t.append(s),a/10===0&&t.append("0"),t.append(a)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(zd);function y9(r){try{if(r.get(1))return new i9(r);if(!r.get(2))return new o9(r);var e=Ud.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new c9(r);case 5:return new h9(r)}var t=Ud.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new p9(r);case 13:return new v9(r)}var n=Ud.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new ro(r,"310","11");case 57:return new ro(r,"320","11");case 58:return new ro(r,"310","13");case 59:return new ro(r,"320","13");case 60:return new ro(r,"310","15");case 61:return new ro(r,"320","15");case 62:return new ro(r,"310","17");case 63:return new ro(r,"320","17")}}catch(i){throw console.log(i),new Pf("unknown decoder: "+r)}}var wA=(function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),_9=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,a){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),E9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),io=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x9=(function(r){E9(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(l){if(l instanceof re){if(!this.pairs.length)throw new re;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(t,!1),a){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new re},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,a,s=n;s<this.rows.length;s++){var l=this.rows[s];this.pairs.length=0;try{for(var f=(i=void 0,io(t)),h=f.next();!h.done;h=f.next()){var p=h.value;this.pairs.push(p.getPairs())}}catch(_){i={error:_}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var m=new Array(t);m.push(l);try{return this.checkRows(m,s+1)}catch(_){console.log(_)}}}throw new re},e.isValidSequence=function(t){var n,i;try{for(var a=io(e.FINDER_PATTERN_SEQUENCES),s=a.next();!s.done;s=a.next()){var l=s.value;if(!(t.length>l.length)){for(var f=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==l[h]){f=!1;break}if(f)return!0}}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,a=!1,s=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>t){s=l.isEquivalent(this.pairs);break}a=l.isEquivalent(this.pairs),i++}s||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new _9(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,a,s,l,f,h;try{for(var p=io(n),m=p.next();!m.done;m=p.next()){var _=m.value;if(_.getPairs().length!==t.length){var E=!0;try{for(var T=(s=void 0,io(_.getPairs())),S=T.next();!S.done;S=T.next()){var D=S.value,V=!1;try{for(var M=(f=void 0,io(t)),B=M.next();!B.done;B=M.next()){var H=B.value;if(wA.equals(D,H)){V=!0;break}}}catch($){f={error:$}}finally{try{B&&!B.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}V||(E=!1)}}catch($){s={error:$}}finally{try{S&&!S.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}}}}catch($){i={error:$}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,a,s,l,f,h;try{for(var p=io(n),m=p.next();!m.done;m=p.next()){var _=m.value,E=!0;try{for(var T=(s=void 0,io(t)),S=T.next();!S.done;S=T.next()){var D=S.value,V=!1;try{for(var M=(f=void 0,io(_.getPairs())),B=M.next();!B.done;B=M.next()){var H=B.value;if(D.equals(H)){V=!0;break}}}catch($){f={error:$}}finally{try{B&&!B.done&&(h=M.return)&&h.call(M)}finally{if(f)throw f.error}}if(!V){E=!1;break}}}catch($){s={error:$}}finally{try{S&&!S.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}if(E)return!0}}catch($){i={error:$}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=$N.buildBitArray(t),i=y9(n),a=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),l=t[t.length-1].getFinderPattern().getResultPoints(),f=[s[0],s[1],l[0],l[1]];return new jn(a,null,null,f,Ie.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),s=2,l=1;l<this.pairs.size();++l){var f=this.pairs.get(l);a+=f.getLeftChar().getChecksumPortion(),s++;var h=f.getRightChar();h!=null&&(a+=h.getChecksumPortion(),s++)}a%=211;var p=211*(s-4)+a;return p===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var s,l=!0,f=-1;do this.findNextPair(t,n,f),s=this.parseFoundFinderPattern(t,i,a),s===null?f=e.getNextSecondBar(t,this.startEnd[0]):l=!1;while(l);var h=this.decodeDataCharacter(t,s,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new re;var p;try{p=this.decodeDataCharacter(t,s,a,!1)}catch(m){p=null,console.log(m)}return new wA(h,p,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var s=t.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(n))l=0;else{var f=n[n.length-1];l=f.getFinderPattern().getStartEnd()[1]}var h=n.length%2!==0;this.startFromEven&&(h=!h);for(var p=!1;l<s&&(p=!t.get(l),!!p);)l++;for(var m=0,_=l,E=l;E<s;E++)if(t.get(E)!==p)a[m]++;else{if(m===3){if(h&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=_,this.startEnd[1]=E;return}h&&e.reverseCounters(a),_+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,m--}else m++;a[m]=1,p=!p}throw new re},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(t,n,i){var a,s,l;if(i){for(var f=this.startEnd[0]-1;f>=0&&!t.get(f);)f--;f++,a=this.startEnd[0]-f,s=f,l=this.startEnd[1]}else s=this.startEnd[0],l=t.getNextUnset(this.startEnd[1]+1),a=l-this.startEnd[1];var h=this.getDecodeFinderCounters();St.arraycopy(h,0,h,1,h.length-1),h[0]=a;var p;try{p=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new AS(p,[s,l],s,l,n)},e.prototype.decodeDataCharacter=function(t,n,i,a){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(a)e.recordPatternInReverse(t,n.getStartEnd()[0],s);else{e.recordPattern(t,n.getStartEnd()[1],s);for(var f=0,h=s.length-1;f<h;f++,h--){var p=s[f];s[f]=s[h],s[h]=p}}var m=17,_=nt.sum(new Int32Array(s))/m,E=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(_-E)/E>.3)throw new re;for(var T=this.getOddCounts(),S=this.getEvenCounts(),D=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors(),f=0;f<s.length;f++){var M=1*s[f]/_,B=M+.5;if(B<1){if(M<.3)throw new re;B=1}else if(B>8){if(M>8.7)throw new re;B=8}var H=f/2;(f&1)===0?(T[H]=B,D[H]=M-B):(S[H]=B,V[H]=M-B)}this.adjustOddEvenCounts(m);for(var $=4*n.getValue()+(i?0:2)+(a?0:1)-1,J=0,C=0,f=T.length-1;f>=0;f--){if(e.isNotA1left(n,i,a)){var b=e.WEIGHTS[$][2*f];C+=T[f]*b}J+=T[f]}for(var N=0,f=S.length-1;f>=0;f--)if(e.isNotA1left(n,i,a)){var b=e.WEIGHTS[$][2*f+1];N+=S[f]*b}var P=C+N;if((J&1)!==0||J>13||J<4)throw new re;var k=(13-J)/2,U=e.SYMBOL_WIDEST[k],L=9-U,Pe=Gu.getRSSvalue(T,U,!0),yt=Gu.getRSSvalue(S,L,!1),ne=e.EVEN_TOTAL_SUBSET[k],de=e.GSUM[k],we=Pe*ne+yt+de;return new g1(we,P)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1;n>13?s=!0:n<4&&(a=!0);var l=!1,f=!1;i>13?f=!0:i<4&&(l=!0);var h=n+i-t,p=(n&1)===1,m=(i&1)===0;if(h===1)if(p){if(m)throw new re;s=!0}else{if(!m)throw new re;f=!0}else if(h===-1)if(p){if(m)throw new re;a=!0}else{if(!m)throw new re;l=!0}else if(h===0){if(p){if(!m)throw new re;n<i?(a=!0,f=!0):(s=!0,l=!0)}else if(m)throw new re}else throw new re;if(a){if(s)throw new re;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(f)throw new re;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(ds),A9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),w9=(function(r){A9(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(g1),T9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TA=(function(r){T9(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var a,s,l,f,h=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),n.reverse();var p=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,p),n.reverse();try{for(var m=vg(this.possibleLeftPairs),_=m.next();!_.done;_=m.next()){var E=_.value;if(E.getCount()>1)try{for(var T=(l=void 0,vg(this.possibleRightPairs)),S=T.next();!S.done;S=T.next()){var D=S.value;if(D.getCount()>1&&e.checkChecksum(E,D))return e.constructResult(E,D)}}catch(V){l={error:V}}finally{try{S&&!S.done&&(f=T.return)&&f.call(T)}finally{if(l)throw l.error}}}}catch(V){a={error:V}}finally{try{_&&!_.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}throw new re},e.addOrTally=function(t,n){var i,a;if(n!=null){var s=!1;try{for(var l=vg(t),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getValue()===n.getValue()){h.incrementCount(),s=!0;break}}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}s||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),a=new String(i).toString(),s=new Fe,l=13-a.length;l>0;l--)s.append("0");s.append(a);for(var f=0,l=0;l<13;l++){var h=s.charAt(l).charCodeAt(0)-48;f+=(l&1)===0?3*h:h}f=10-f%10,f===10&&(f=0),s.append(f.toString());var p=t.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new jn(s.toString(),null,0,[p[0],p[1],m[0],m[1]],Ie.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(t,n,i,a){try{var s=this.findFinderPattern(t,n),l=this.parseFoundFinderPattern(t,i,n,s),f=a==null?null:a.get(Vt.NEED_RESULT_POINT_CALLBACK);if(f!=null){var h=(s[0]+s[1])/2;n&&(h=t.getSize()-1-h),f.foundPossibleResultPoint(new Ee(h,i))}var p=this.decodeDataCharacter(t,l,!0),m=this.decodeDataCharacter(t,l,!1);return new w9(1597*p.getValue()+m.getValue(),p.getChecksumPortion()+4*m.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)dn.recordPatternInReverse(t,n.getStartEnd()[0],a);else{dn.recordPattern(t,n.getStartEnd()[1]+1,a);for(var l=0,f=a.length-1;l<f;l++,f--){var h=a[l];a[l]=a[f],a[f]=h}}for(var p=i?16:15,m=nt.sum(new Int32Array(a))/p,_=this.getOddCounts(),E=this.getEvenCounts(),T=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var D=a[l]/m,V=Math.floor(D+.5);V<1?V=1:V>8&&(V=8);var M=Math.floor(l/2);(l&1)===0?(_[M]=V,T[M]=D-V):(E[M]=V,S[M]=D-V)}this.adjustOddEvenCounts(i,p);for(var B=0,H=0,l=_.length-1;l>=0;l--)H*=9,H+=_[l],B+=_[l];for(var $=0,J=0,l=E.length-1;l>=0;l--)$*=9,$+=E[l],J+=E[l];var C=H+3*$;if(i){if((B&1)!==0||B>12||B<4)throw new re;var b=(12-B)/2,N=e.OUTSIDE_ODD_WIDEST[b],P=9-N,k=Gu.getRSSvalue(_,N,!1),U=Gu.getRSSvalue(E,P,!0),L=e.OUTSIDE_EVEN_TOTAL_SUBSET[b],Pe=e.OUTSIDE_GSUM[b];return new g1(k*L+U+Pe,C)}else{if((J&1)!==0||J>10||J<4)throw new re;var b=(10-J)/2,N=e.INSIDE_ODD_WIDEST[b],P=9-N,k=Gu.getRSSvalue(_,N,!0),U=Gu.getRSSvalue(E,P,!1),yt=e.INSIDE_ODD_TOTAL_SUBSET[b],Pe=e.INSIDE_GSUM[b];return new g1(U*yt+k+Pe,C)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=t.getSize(),s=!1,l=0;l<a&&(s=!t.get(l),n!==s);)l++;for(var f=0,h=l,p=l;p<a;p++)if(t.get(p)!==s)i[f]++;else{if(f===3){if(ds.isFinderPattern(i))return[h,p];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,s=!s}throw new re},e.prototype.parseFoundFinderPattern=function(t,n,i,a){for(var s=t.get(a[0]),l=a[0]-1;l>=0&&s!==t.get(l);)l--;l++;var f=a[0]-l,h=this.getDecodeFinderCounters(),p=new Int32Array(h.length);St.arraycopy(h,0,p,1,h.length-1),p[0]=f;var m=this.parseFinderValue(p,e.FINDER_PATTERNS),_=l,E=a[1];return i&&(_=t.getSize()-1-_,E=t.getSize()-1-E),new AS(m,[l,a[1]],_,E,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=nt.sum(new Int32Array(this.getOddCounts())),a=nt.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1,f=!1,h=!1;t?(i>12?l=!0:i<4&&(s=!0),a>12?h=!0:a<4&&(f=!0)):(i>11?l=!0:i<5&&(s=!0),a>10?h=!0:a<4&&(f=!0));var p=i+a-n,m=(i&1)===(t?1:0),_=(a&1)===1;if(p===1)if(m){if(_)throw new re;l=!0}else{if(!_)throw new re;h=!0}else if(p===-1)if(m){if(_)throw new re;s=!0}else{if(!_)throw new re;f=!0}else if(p===0){if(m){if(!_)throw new re;i<a?(s=!0,h=!0):(l=!0,f=!0)}else if(_)throw new re}else throw new re;if(s){if(l)throw new re;ds.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ds.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new re;ds.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ds.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(ds),S9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jc=(function(r){S9(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(Vt.POSSIBLE_FORMATS):null,a=t&&t.get(Vt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return i&&((i.includes(Ie.EAN_13)||i.includes(Ie.UPC_A)||i.includes(Ie.EAN_8)||i.includes(Ie.UPC_E))&&n.readers.push(new gg(t)),i.includes(Ie.CODE_39)&&n.readers.push(new pA(a)),i.includes(Ie.CODE_93)&&n.readers.push(new gA),i.includes(Ie.CODE_128)&&n.readers.push(new dA),i.includes(Ie.ITF)&&n.readers.push(new vA),i.includes(Ie.CODABAR)&&n.readers.push(new KN),i.includes(Ie.RSS_14)&&n.readers.push(new TA),i.includes(Ie.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new x9))),n.readers.length===0&&(n.readers.push(new gg(t)),n.readers.push(new pA),n.readers.push(new gA),n.readers.push(new gg(t)),n.readers.push(new dA),n.readers.push(new vA),n.readers.push(new TA)),n}return e.prototype.decodeRow=function(t,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(t,n,i)}catch{}throw new re},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(dn),I9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){I9(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new jc(n),t,n)||this}return e})(_l);var SA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),at=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),C9=(function(){function r(e,t,n,i,a,s){var l,f;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=s;var h=0,p=s.getECCodewords(),m=s.getECBlocks();try{for(var _=SA(m),E=_.next();!E.done;E=_.next()){var T=E.value;h+=T.getCount()*(T.getDataCodewords()+p)}}catch(S){l={error:S}}finally{try{E&&!E.done&&(f=_.return)&&f.call(_)}finally{if(l)throw l.error}}this.totalCodewords=h}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new fe;try{for(var a=SA(r.VERSIONS),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===t)return l}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new fe},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new ut(5,new at(1,3))),new r(2,12,12,10,10,new ut(7,new at(1,5))),new r(3,14,14,12,12,new ut(10,new at(1,8))),new r(4,16,16,14,14,new ut(12,new at(1,12))),new r(5,18,18,16,16,new ut(14,new at(1,18))),new r(6,20,20,18,18,new ut(18,new at(1,22))),new r(7,22,22,20,20,new ut(20,new at(1,30))),new r(8,24,24,22,22,new ut(24,new at(1,36))),new r(9,26,26,24,24,new ut(28,new at(1,44))),new r(10,32,32,14,14,new ut(36,new at(1,62))),new r(11,36,36,16,16,new ut(42,new at(1,86))),new r(12,40,40,18,18,new ut(48,new at(1,114))),new r(13,44,44,20,20,new ut(56,new at(1,144))),new r(14,48,48,22,22,new ut(68,new at(1,174))),new r(15,52,52,24,24,new ut(42,new at(2,102))),new r(16,64,64,14,14,new ut(56,new at(2,140))),new r(17,72,72,16,16,new ut(36,new at(4,92))),new r(18,80,80,18,18,new ut(48,new at(4,114))),new r(19,88,88,20,20,new ut(56,new at(4,144))),new r(20,96,96,22,22,new ut(68,new at(4,174))),new r(21,104,104,24,24,new ut(56,new at(6,136))),new r(22,120,120,18,18,new ut(68,new at(6,175))),new r(23,132,132,20,20,new ut(62,new at(8,163))),new r(24,144,144,22,22,new ut(62,new at(8,156),new at(2,155))),new r(25,8,18,6,16,new ut(7,new at(1,5))),new r(26,8,32,6,14,new ut(11,new at(1,10))),new r(27,12,26,10,24,new ut(14,new at(1,16))),new r(28,12,36,10,16,new ut(18,new at(1,22))),new r(29,16,36,14,16,new ut(24,new at(1,32))),new r(30,16,48,14,22,new ut(28,new at(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),b9=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new fe;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Fi(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return C9.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,f=!1,h=!1,p=!1;do if(n===a&&i===0&&!l)e[t++]=this.readCorner1(a,s)&255,n-=2,i+=2,l=!0;else if(n===a-2&&i===0&&(s&3)!==0&&!f)e[t++]=this.readCorner2(a,s)&255,n-=2,i+=2,f=!0;else if(n===a+4&&i===2&&(s&7)===0&&!h)e[t++]=this.readCorner3(a,s)&255,n-=2,i+=2,h=!0;else if(n===a-2&&i===0&&(s&7)===4&&!p)e[t++]=this.readCorner4(a,s)&255,n-=2,i+=2,p=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,s)&255),n-=2,i+=2;while(n>=0&&i<s);n+=1,i+=3;do n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,a,s)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<s);if(t!==this.version.getTotalCodewords())throw new fe;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var a=0;return this.readModule(e-2,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,t,n,i)&&(a|=1),a<<=1,this.readModule(e,t-2,n,i)&&(a|=1),a<<=1,this.readModule(e,t-1,n,i)&&(a|=1),a<<=1,this.readModule(e,t,n,i)&&(a|=1),a},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ce("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),s=t/i|0,l=n/a|0,f=s*i,h=l*a,p=new Fi(h,f),m=0;m<s;++m)for(var _=m*i,E=0;E<l;++E)for(var T=E*a,S=0;S<i;++S)for(var D=m*(i+2)+1+S,V=_+S,M=0;M<a;++M){var B=E*(a+2)+1+M;if(e.get(B,D)){var H=T+M;p.set(H,V)}}return p},r})(),IA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R9=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,a,s,l=t.getECBlocks(),f=0,h=l.getECBlocks();try{for(var p=IA(h),m=p.next();!m.done;m=p.next()){var _=m.value;f+=_.getCount()}}catch(Pe){n={error:Pe}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}var E=new Array(f),T=0;try{for(var S=IA(h),D=S.next();!D.done;D=S.next())for(var _=D.value,V=0;V<_.getCount();V++){var M=_.getDataCodewords(),B=l.getECCodewords()+M;E[T++]=new r(M,new Uint8Array(B))}}catch(Pe){a={error:Pe}}finally{try{D&&!D.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}for(var H=E[0].codewords.length,$=H-l.getECCodewords(),J=$-1,C=0,V=0;V<J;V++)for(var b=0;b<T;b++)E[b].codewords[V]=e[C++];for(var N=t.getVersionNumber()===24,P=N?8:T,b=0;b<P;b++)E[b].codewords[$-1]=e[C++];for(var k=E[0].codewords.length,V=$;V<k;V++)for(var b=0;b<T;b++){var U=N?(b+8)%T:b,L=N&&U>7?V-1:V;E[U].codewords[L]=e[C++]}if(C!==e.length)throw new Ce;return E},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),SS=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ce(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var s=8-n,l=e<s?e:s,f=s-l,h=255>>8-l<<f;t=(a[i]&h)>>f,e-=l,n+=l,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|a[i]&255,i++,e-=8;if(e>0){var f=8-e,h=255>>f<<f;t=t<<e|(a[i]&h)>>f,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),un;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(un||(un={}));var D9=(function(){function r(){}return r.decode=function(e){var t=new SS(e),n=new Fe,i=new Fe,a=new Array,s=un.ASCII_ENCODE;do if(s===un.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case un.C40_ENCODE:this.decodeC40Segment(t,n);break;case un.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case un.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case un.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case un.BASE256_ENCODE:this.decodeBase256Segment(t,n,a);break;default:throw new fe}s=un.ASCII_ENCODE}while(s!==un.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new K1(e,n.toString(),a.length===0?null:a,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new fe;if(a<=128)return i&&(a+=128),t.append(String.fromCharCode(a-1)),un.ASCII_ENCODE;if(a===129)return un.PAD_ENCODE;if(a<=229){var s=a-130;s<10&&t.append("0"),t.append(""+s)}else switch(a){case 230:return un.C40_ENCODE;case 231:return un.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return un.ANSIX12_ENCODE;case 239:return un.TEXT_ENCODE;case 240:return un.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new fe;break}}while(e.available()>0);return un.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else throw new fe;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new fe}a=0;break;case 3:n?(t.append(String.fromCharCode(f+224)),n=!1):t.append(String.fromCharCode(f+96)),a=0;break;default:throw new fe}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],a=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var f=i[l];switch(a){case 0:if(f<3)a=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else throw new fe;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),a=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h)}else switch(f){case 27:t.append("");break;case 30:n=!0;break;default:throw new fe}a=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[f];n?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),n=!1):t.append(h),a=0}else throw new fe;break;default:throw new fe}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var s=n[a];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new fe;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),s;if(a===0?s=e.available()/8|0:a<250?s=a:s=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new fe;for(var l=new Uint8Array(s),f=0;f<s;f++){if(e.available()<8)throw new fe;l[f]=this.unrandomize255State(e.readBits(8),i++)}n.push(l);try{t.append(Ur.decode(l,$e.ISO88591))}catch(h){throw new Pf("Platform does not support required encoding: "+h.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),O9=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N9=(function(){function r(){this.rsDecoder=new Y1(or.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new b9(e),a=i.getVersion(),s=i.readCodewords(),l=R9.getDataBlocks(s,a),f=0;try{for(var h=O9(l),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch(B){t={error:B}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}for(var _=new Uint8Array(f),E=l.length,T=0;T<E;T++){var S=l[T],D=S.getCodewords(),V=S.getNumDataCodewords();this.correctErrors(D,V);for(var M=0;M<V;M++)_[M*E+T]=D[M]}return D9.decode(_)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=n[i]},r})(),M9=(function(){function r(e){this.image=e,this.rectangleDetector=new ov(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new re;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],a=t[2],s=t[3],l=this.transitionsBetween(n,s)+1,f=this.transitionsBetween(a,s)+1;(l&1)===1&&(l+=1),(f&1)===1&&(f+=1),4*l<7*f&&4*f<7*l&&(l=f=Math.max(l,f));var h=r.sampleGrid(this.image,n,i,a,s,l,f);return new Em(h,[n,i,a,s])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),a=(t.getY()-e.getY())/(n+1);return new Ee(e.getX()+i,e.getY()+a)},r.moveAway=function(e,t,n){var i=e.getX(),a=e.getY();return i<t?i-=1:i+=1,a<n?a-=1:a+=1,new Ee(i,a)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],a=e[2],s=this.transitionsBetween(t,n),l=this.transitionsBetween(n,i),f=this.transitionsBetween(i,a),h=this.transitionsBetween(a,t),p=s,m=[a,t,n,i];return p>l&&(p=l,m[0]=t,m[1]=n,m[2]=i,m[3]=a),p>f&&(p=f,m[0]=n,m[1]=i,m[2]=a,m[3]=t),p>h&&(m[0]=i,m[1]=a,m[2]=t,m[3]=n),m},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),l=r.shiftPoint(n,i,(s+1)*4),f=r.shiftPoint(i,n,(s+1)*4),h=this.transitionsBetween(l,t),p=this.transitionsBetween(f,a);return h<p?(e[0]=t,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a),l=this.transitionsBetween(n,a),f=r.shiftPoint(t,n,(l+1)*4),h=r.shiftPoint(i,n,(s+1)*4);s=this.transitionsBetween(f,a),l=this.transitionsBetween(h,a);var p=new Ee(a.getX()+(i.getX()-n.getX())/(s+1),a.getY()+(i.getY()-n.getY())/(s+1)),m=new Ee(a.getX()+(t.getX()-n.getX())/(l+1),a.getY()+(t.getY()-n.getY())/(l+1));if(!this.isValid(p))return this.isValid(m)?m:null;if(!this.isValid(m))return p;var _=this.transitionsBetween(f,p)+this.transitionsBetween(h,p),E=this.transitionsBetween(f,m)+this.transitionsBetween(h,m);return _>E?p:m},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],a=e[3],s=this.transitionsBetween(t,a)+1,l=this.transitionsBetween(i,a)+1,f=r.shiftPoint(t,n,l*4),h=r.shiftPoint(i,n,s*4);s=this.transitionsBetween(f,a)+1,l=this.transitionsBetween(h,a)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);var p=(t.getX()+n.getX()+i.getX()+a.getX())/4,m=(t.getY()+n.getY()+i.getY()+a.getY())/4;t=r.moveAway(t,p,m),n=r.moveAway(n,p,m),i=r.moveAway(i,p,m),a=r.moveAway(a,p,m);var _,E;return f=r.shiftPoint(t,n,l*4),f=r.shiftPoint(f,a,s*4),_=r.shiftPoint(n,t,l*4),_=r.shiftPoint(_,i,s*4),h=r.shiftPoint(i,a,l*4),h=r.shiftPoint(h,n,s*4),E=r.shiftPoint(a,i,l*4),E=r.shiftPoint(E,t,s*4),[f,_,h,E]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,a,s,l){var f=xm.getInstance();return f.sampleGrid(e,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,t.getX(),t.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.abs(s-i)>Math.abs(a-n);if(l){var f=n;n=i,i=f,f=a,a=s,s=f}for(var h=Math.abs(a-n),p=Math.abs(s-i),m=-h/2,_=i<s?1:-1,E=n<a?1:-1,T=0,S=this.image.get(l?i:n,l?n:i),D=n,V=i;D!==a;D+=E){var M=this.image.get(l?V:D,l?D:V);if(M!==S&&(T++,S=M),m+=p,m>0){if(V===s)break;V+=_,m-=h}}return T},r})(),lv=(function(){function r(){this.decoder=new N9}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(Vt.PURE_BARCODE)){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=r.NO_POINTS}else{var s=new M9(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),i=s.getPoints()}var l=n.getRawBytes(),f=new jn(n.getText(),l,8*l.length,i,Ie.DATA_MATRIX,St.currentTimeMillis()),h=n.getByteSegments();h!=null&&f.putMetadata(Ln.BYTE_SEGMENTS,h);var p=n.getECLevel();return p!=null&&f.putMetadata(Ln.ERROR_CORRECTION_LEVEL,p),f},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new re;var i=this.moduleSize(t,e),a=t[1],s=n[1],l=t[0],f=n[0],h=(f-l+1)/i,p=(s-a+1)/i;if(h<=0||p<=0)throw new re;var m=i/2;a+=m,l+=m;for(var _=new Fi(h,p),E=0;E<p;E++)for(var T=a+E*i,S=0;S<h;S++)e.get(l+S*i,T)&&_.set(S,E);return _},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],a=e[1];i<n&&t.get(i,a);)i++;if(i===n)throw new re;var s=i-e[0];if(s===0)throw new re;return s},r.NO_POINTS=[],r})(),P9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){P9(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new lv,t)||this}return e})(_l);var qu;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(qu||(qu={}));var L9=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new ei(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new Ce;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(qu.L,"L",1),r.M=new r(qu.M,"M",0),r.Q=new r(qu.Q,"Q",3),r.H=new r(qu.H,"H",2),r})(),V9=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},IS=(function(){function r(e){this.errorCorrectionLevel=L9.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return ze.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,a=Number.MAX_SAFE_INTEGER,s=0;try{for(var l=V9(r.FORMAT_INFO_DECODE_LOOKUP),f=l.next();!f.done;f=l.next()){var h=f.value,p=h[0];if(p===e||p===t)return new r(h[1]);var m=r.numBitsDiffering(e,p);m<a&&(s=h[1],a=m),e!==t&&(m=r.numBitsDiffering(t,p),m<a&&(s=h[1],a=m))}}catch(_){n={error:_}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return a<=3?new r(s):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),B9=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var a=B9(i),s=a.next();!s.done;s=a.next()){var l=s.value;n+=l.getCount()}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),O=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),k9=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ss=(function(){function r(e,t){for(var n,i,a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=a;var l=0,f=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();try{for(var p=k9(h),m=p.next();!m.done;m=p.next()){var _=m.value;l+=_.getCount()*(_.getDataCodewords()+f)}}catch(E){n={error:E}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}this.totalCodewords=l}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new fe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new fe}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new Ce;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var a=r.VERSION_DECODE_INFO[i];if(a===e)return r.getVersionForNumber(i+7);var s=IS.numBitsDiffering(e,a);s<t&&(n=i+7,t=s)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Fi(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,s=0;s<n;s++)i===0&&(s===0||s===n-1)||i===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,a,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new Y(7,new O(1,19)),new Y(10,new O(1,16)),new Y(13,new O(1,13)),new Y(17,new O(1,9))),new r(2,Int32Array.from([6,18]),new Y(10,new O(1,34)),new Y(16,new O(1,28)),new Y(22,new O(1,22)),new Y(28,new O(1,16))),new r(3,Int32Array.from([6,22]),new Y(15,new O(1,55)),new Y(26,new O(1,44)),new Y(18,new O(2,17)),new Y(22,new O(2,13))),new r(4,Int32Array.from([6,26]),new Y(20,new O(1,80)),new Y(18,new O(2,32)),new Y(26,new O(2,24)),new Y(16,new O(4,9))),new r(5,Int32Array.from([6,30]),new Y(26,new O(1,108)),new Y(24,new O(2,43)),new Y(18,new O(2,15),new O(2,16)),new Y(22,new O(2,11),new O(2,12))),new r(6,Int32Array.from([6,34]),new Y(18,new O(2,68)),new Y(16,new O(4,27)),new Y(24,new O(4,19)),new Y(28,new O(4,15))),new r(7,Int32Array.from([6,22,38]),new Y(20,new O(2,78)),new Y(18,new O(4,31)),new Y(18,new O(2,14),new O(4,15)),new Y(26,new O(4,13),new O(1,14))),new r(8,Int32Array.from([6,24,42]),new Y(24,new O(2,97)),new Y(22,new O(2,38),new O(2,39)),new Y(22,new O(4,18),new O(2,19)),new Y(26,new O(4,14),new O(2,15))),new r(9,Int32Array.from([6,26,46]),new Y(30,new O(2,116)),new Y(22,new O(3,36),new O(2,37)),new Y(20,new O(4,16),new O(4,17)),new Y(24,new O(4,12),new O(4,13))),new r(10,Int32Array.from([6,28,50]),new Y(18,new O(2,68),new O(2,69)),new Y(26,new O(4,43),new O(1,44)),new Y(24,new O(6,19),new O(2,20)),new Y(28,new O(6,15),new O(2,16))),new r(11,Int32Array.from([6,30,54]),new Y(20,new O(4,81)),new Y(30,new O(1,50),new O(4,51)),new Y(28,new O(4,22),new O(4,23)),new Y(24,new O(3,12),new O(8,13))),new r(12,Int32Array.from([6,32,58]),new Y(24,new O(2,92),new O(2,93)),new Y(22,new O(6,36),new O(2,37)),new Y(26,new O(4,20),new O(6,21)),new Y(28,new O(7,14),new O(4,15))),new r(13,Int32Array.from([6,34,62]),new Y(26,new O(4,107)),new Y(22,new O(8,37),new O(1,38)),new Y(24,new O(8,20),new O(4,21)),new Y(22,new O(12,11),new O(4,12))),new r(14,Int32Array.from([6,26,46,66]),new Y(30,new O(3,115),new O(1,116)),new Y(24,new O(4,40),new O(5,41)),new Y(20,new O(11,16),new O(5,17)),new Y(24,new O(11,12),new O(5,13))),new r(15,Int32Array.from([6,26,48,70]),new Y(22,new O(5,87),new O(1,88)),new Y(24,new O(5,41),new O(5,42)),new Y(30,new O(5,24),new O(7,25)),new Y(24,new O(11,12),new O(7,13))),new r(16,Int32Array.from([6,26,50,74]),new Y(24,new O(5,98),new O(1,99)),new Y(28,new O(7,45),new O(3,46)),new Y(24,new O(15,19),new O(2,20)),new Y(30,new O(3,15),new O(13,16))),new r(17,Int32Array.from([6,30,54,78]),new Y(28,new O(1,107),new O(5,108)),new Y(28,new O(10,46),new O(1,47)),new Y(28,new O(1,22),new O(15,23)),new Y(28,new O(2,14),new O(17,15))),new r(18,Int32Array.from([6,30,56,82]),new Y(30,new O(5,120),new O(1,121)),new Y(26,new O(9,43),new O(4,44)),new Y(28,new O(17,22),new O(1,23)),new Y(28,new O(2,14),new O(19,15))),new r(19,Int32Array.from([6,30,58,86]),new Y(28,new O(3,113),new O(4,114)),new Y(26,new O(3,44),new O(11,45)),new Y(26,new O(17,21),new O(4,22)),new Y(26,new O(9,13),new O(16,14))),new r(20,Int32Array.from([6,34,62,90]),new Y(28,new O(3,107),new O(5,108)),new Y(26,new O(3,41),new O(13,42)),new Y(30,new O(15,24),new O(5,25)),new Y(28,new O(15,15),new O(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new Y(28,new O(4,116),new O(4,117)),new Y(26,new O(17,42)),new Y(28,new O(17,22),new O(6,23)),new Y(30,new O(19,16),new O(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new Y(28,new O(2,111),new O(7,112)),new Y(28,new O(17,46)),new Y(30,new O(7,24),new O(16,25)),new Y(24,new O(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new Y(30,new O(4,121),new O(5,122)),new Y(28,new O(4,47),new O(14,48)),new Y(30,new O(11,24),new O(14,25)),new Y(30,new O(16,15),new O(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new Y(30,new O(6,117),new O(4,118)),new Y(28,new O(6,45),new O(14,46)),new Y(30,new O(11,24),new O(16,25)),new Y(30,new O(30,16),new O(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new Y(26,new O(8,106),new O(4,107)),new Y(28,new O(8,47),new O(13,48)),new Y(30,new O(7,24),new O(22,25)),new Y(30,new O(22,15),new O(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new Y(28,new O(10,114),new O(2,115)),new Y(28,new O(19,46),new O(4,47)),new Y(28,new O(28,22),new O(6,23)),new Y(30,new O(33,16),new O(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new Y(30,new O(8,122),new O(4,123)),new Y(28,new O(22,45),new O(3,46)),new Y(30,new O(8,23),new O(26,24)),new Y(30,new O(12,15),new O(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new Y(30,new O(3,117),new O(10,118)),new Y(28,new O(3,45),new O(23,46)),new Y(30,new O(4,24),new O(31,25)),new Y(30,new O(11,15),new O(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new Y(30,new O(7,116),new O(7,117)),new Y(28,new O(21,45),new O(7,46)),new Y(30,new O(1,23),new O(37,24)),new Y(30,new O(19,15),new O(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new Y(30,new O(5,115),new O(10,116)),new Y(28,new O(19,47),new O(10,48)),new Y(30,new O(15,24),new O(25,25)),new Y(30,new O(23,15),new O(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new Y(30,new O(13,115),new O(3,116)),new Y(28,new O(2,46),new O(29,47)),new Y(30,new O(42,24),new O(1,25)),new Y(30,new O(23,15),new O(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new Y(30,new O(17,115)),new Y(28,new O(10,46),new O(23,47)),new Y(30,new O(10,24),new O(35,25)),new Y(30,new O(19,15),new O(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new Y(30,new O(17,115),new O(1,116)),new Y(28,new O(14,46),new O(21,47)),new Y(30,new O(29,24),new O(19,25)),new Y(30,new O(11,15),new O(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new Y(30,new O(13,115),new O(6,116)),new Y(28,new O(14,46),new O(23,47)),new Y(30,new O(44,24),new O(7,25)),new Y(30,new O(59,16),new O(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new Y(30,new O(12,121),new O(7,122)),new Y(28,new O(12,47),new O(26,48)),new Y(30,new O(39,24),new O(14,25)),new Y(30,new O(22,15),new O(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new Y(30,new O(6,121),new O(14,122)),new Y(28,new O(6,47),new O(34,48)),new Y(30,new O(46,24),new O(10,25)),new Y(30,new O(2,15),new O(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new Y(30,new O(17,122),new O(4,123)),new Y(28,new O(29,46),new O(14,47)),new Y(30,new O(49,24),new O(10,25)),new Y(30,new O(24,15),new O(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new Y(30,new O(4,122),new O(18,123)),new Y(28,new O(13,46),new O(32,47)),new Y(30,new O(48,24),new O(14,25)),new Y(30,new O(42,15),new O(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new Y(30,new O(20,117),new O(4,118)),new Y(28,new O(40,47),new O(7,48)),new Y(30,new O(43,24),new O(22,25)),new Y(30,new O(10,15),new O(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new Y(30,new O(19,118),new O(6,119)),new Y(28,new O(18,47),new O(31,48)),new Y(30,new O(34,24),new O(34,25)),new Y(30,new O(20,15),new O(61,16)))],r})(),_n;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(_n||(_n={}));var CA=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[_n.DATA_MASK_000,new r(_n.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[_n.DATA_MASK_001,new r(_n.DATA_MASK_001,function(e,t){return(e&1)===0})],[_n.DATA_MASK_010,new r(_n.DATA_MASK_010,function(e,t){return t%3===0})],[_n.DATA_MASK_011,new r(_n.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[_n.DATA_MASK_100,new r(_n.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[_n.DATA_MASK_101,new r(_n.DATA_MASK_101,function(e,t){return e*t%6===0})],[_n.DATA_MASK_110,new r(_n.DATA_MASK_110,function(e,t){return e*t%6<3})],[_n.DATA_MASK_111,new r(_n.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),F9=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new fe;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,s=i-7,n=i-1;n>=s;n--)a=this.copyBit(8,n,a);for(var t=i-8;t<i;t++)a=this.copyBit(t,8,a);if(this.parsedFormatInfo=IS.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new fe},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Ss.getVersionForNumber(t);for(var n=0,i=e-11,a=5;a>=0;a--)for(var s=e-9;s>=i;s--)n=this.copyBit(s,a,n);var l=Ss.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var s=5;s>=0;s--)for(var a=e-9;a>=i;a--)n=this.copyBit(s,a,n);if(l=Ss.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new fe},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=CA.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=t.buildFunctionPattern(),s=!0,l=new Uint8Array(t.getTotalCodewords()),f=0,h=0,p=0,m=i-1;m>0;m-=2){m===6&&m--;for(var _=0;_<i;_++)for(var E=s?i-1-_:_,T=0;T<2;T++)a.get(m-T,E)||(p++,h<<=1,this.bitMatrix.get(m-T,E)&&(h|=1),p===8&&(l[f++]=h,p=0,h=0));s=!s}if(f!==t.getTotalCodewords())throw new fe;return l},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=CA.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,a=e.getHeight();i<a;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r})(),bA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U9=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,a,s,l;if(e.length!==t.getTotalCodewords())throw new Ce;var f=t.getECBlocksForLevel(n),h=0,p=f.getECBlocks();try{for(var m=bA(p),_=m.next();!_.done;_=m.next()){var E=_.value;h+=E.getCount()}}catch(L){i={error:L}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}var T=new Array(h),S=0;try{for(var D=bA(p),V=D.next();!V.done;V=D.next())for(var E=V.value,M=0;M<E.getCount();M++){var B=E.getDataCodewords(),H=f.getECCodewordsPerBlock()+B;T[S++]=new r(B,new Uint8Array(H))}}catch(L){s={error:L}}finally{try{V&&!V.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}for(var $=T[0].codewords.length,J=T.length-1;J>=0;){var C=T[J].codewords.length;if(C===$)break;J--}J++;for(var b=$-f.getECCodewordsPerBlock(),N=0,M=0;M<b;M++)for(var P=0;P<S;P++)T[P].codewords[M]=e[N++];for(var P=J;P<S;P++)T[P].codewords[b]=e[N++];for(var k=T[0].codewords.length,M=b;M<k;M++)for(var P=0;P<S;P++){var U=P<J?M:M+1;T[P].codewords[U]=e[N++]}return T},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),Lr;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(Lr||(Lr={}));var Rt=(function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new Ce;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(Lr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(Lr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(Lr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(Lr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(Lr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(Lr.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(Lr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(Lr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(Lr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(Lr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),z9=(function(){function r(){}return r.decode=function(e,t,n,i){var a=new SS(e),s=new Fe,l=new Array,f=-1,h=-1;try{var p=null,m=!1,_=void 0;do{if(a.available()<4)_=Rt.TERMINATOR;else{var E=a.readBits(4);_=Rt.forBits(E)}switch(_){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:m=!0;break;case Rt.STRUCTURED_APPEND:if(a.available()<16)throw new fe;f=a.readBits(8),h=a.readBits(8);break;case Rt.ECI:var T=r.parseECIValue(a);if(p=fn.getCharacterSetECIByValue(T),p===null)throw new fe;break;case Rt.HANZI:var S=a.readBits(4),D=a.readBits(_.getCharacterCountBits(t));S===r.GB2312_SUBSET&&r.decodeHanziSegment(a,s,D);break;default:var V=a.readBits(_.getCharacterCountBits(t));switch(_){case Rt.NUMERIC:r.decodeNumericSegment(a,s,V);break;case Rt.ALPHANUMERIC:r.decodeAlphanumericSegment(a,s,V,m);break;case Rt.BYTE:r.decodeByteSegment(a,s,V,p,l,i);break;case Rt.KANJI:r.decodeKanjiSegment(a,s,V);break;default:throw new fe}break}}while(_!==Rt.TERMINATOR)}catch{throw new fe}return new K1(e,s.toString(),l.length===0?null:l,n===null?null:n.toString(),f,h)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new fe;for(var i=new Uint8Array(2*n),a=0;n>0;){var s=e.readBits(13),l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,i[a]=l>>8&255,i[a+1]=l&255,a+=2,n--}try{t.append(Ur.decode(i,$e.GB2312))}catch(f){throw new fe(f)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new fe;for(var i=new Uint8Array(2*n),a=0;n>0;){var s=e.readBits(13),l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,i[a]=l>>8,i[a+1]=l,a+=2,n--}try{t.append(Ur.decode(i,$e.SHIFT_JIS))}catch(f){throw new fe(f)}},r.decodeByteSegment=function(e,t,n,i,a,s){if(8*n>e.available())throw new fe;for(var l=new Uint8Array(n),f=0;f<n;f++)l[f]=e.readBits(8);var h;i===null?h=$e.guessEncoding(l,s):h=i.getName();try{t.append(Ur.decode(l,h))}catch(p){throw new fe(p)}a.push(l)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new fe;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var a=t.length();n>1;){if(e.available()<11)throw new fe;var s=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(s/45))),t.append(r.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new fe;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var l=a;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new fe;var i=e.readBits(10);if(i>=1e3)throw new fe;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new fe;var a=e.readBits(7);if(a>=100)throw new fe;t.append(r.toAlphaNumericChar(Math.floor(a/10))),t.append(r.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new fe;var s=e.readBits(4);if(s>=10)throw new fe;t.append(r.toAlphaNumericChar(s))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new fe},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),CS=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),RA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j9=(function(){function r(){this.rsDecoder=new Y1(or.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Fi.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new F9(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(s){i=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,t);return a.setOther(new CS(!0)),a}catch(s){throw i!==null?i:s}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,a,s,l=e.readVersion(),f=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),p=U9.getDataBlocks(h,l,f),m=0;try{for(var _=RA(p),E=_.next();!E.done;E=_.next()){var T=E.value;m+=T.getNumDataCodewords()}}catch(J){n={error:J}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}var S=new Uint8Array(m),D=0;try{for(var V=RA(p),M=V.next();!M.done;M=V.next()){var T=M.value,B=T.getCodewords(),H=T.getNumDataCodewords();this.correctErrors(B,H);for(var $=0;$<H;$++)S[D++]=B[$]}}catch(J){a={error:J}}finally{try{M&&!M.done&&(s=V.return)&&s.call(V)}finally{if(a)throw a.error}}return z9.decode(S,l,f,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new An}for(var i=0;i<t;i++)e[i]=n[i]},r})(),H9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),G9=(function(r){H9(e,r);function e(t,n,i){var a=r.call(this,t,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=(this.getX()+n)/2,s=(this.getY()+t)/2,l=(this.estimatedModuleSize+i)/2;return new e(a,s,l)},e})(Ee),q9=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X9=(function(){function r(e,t,n,i,a,s,l){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=a,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,a=this.startY+t/2,s=new Int32Array(3),l=this.image,f=0;f<t;f++){var h=a+((f&1)===0?Math.floor((f+1)/2):-Math.floor((f+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var p=e;p<i&&!l.get(p,h);)p++;for(var m=0;p<i;){if(l.get(p,h))if(m===1)s[1]++;else if(m===2){if(this.foundPatternCross(s)){var _=this.handlePossibleCenter(s,h,p);if(_!==null)return _}s[0]=s[2],s[1]=1,s[2]=0,m=1}else s[++m]++;else m===1&&m++,s[m]++;p++}if(this.foundPatternCross(s)){var _=this.handlePossibleCenter(s,h,i);if(_!==null)return _}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var a=this.image,s=a.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var f=e;f>=0&&a.get(t,f)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&!a.get(t,f)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<s&&a.get(t,f)&&l[1]<=n;)l[1]++,f++;if(f===s||l[1]>n)return NaN;for(;f<s&&!a.get(t,f)&&l[2]<=n;)l[2]++,f++;if(l[2]>n)return NaN;var h=l[0]+l[1]+l[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(l)?r.centerFromEnd(l,f):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,a,s=e[0]+e[1]+e[2],l=r.centerFromEnd(e,n),f=this.crossCheckVertical(t,l,2*e[1],s);if(!isNaN(f)){var h=(e[0]+e[1]+e[2])/3;try{for(var p=q9(this.possibleCenters),m=p.next();!m.done;m=p.next()){var _=m.value;if(_.aboutEquals(h,f,l))return _.combineEstimate(f,l,h)}}catch(T){i={error:T}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}var E=new G9(l,f,h);this.possibleCenters.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return null},r})(),K9=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Y9=(function(r){K9(e,r);function e(t,n,i,a){var s=r.call(this,t,n)||this;return s.estimatedModuleSize=i,s.count=a,a===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var a=Math.abs(t-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var a=this.count+1,s=(this.count*this.getX()+n)/a,l=(this.count*this.getY()+t)/a,f=(this.count*this.estimatedModuleSize+i)/a;return new e(s,l,f,a)},e})(Ee),W9=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),Oc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q9=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(Vt.TRY_HARDER)!==void 0,n=e!=null&&e.get(Vt.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),s=i.getWidth(),l=Math.floor(3*a/(4*r.MAX_MODULES));(l<r.MIN_SKIP||t)&&(l=r.MIN_SKIP);for(var f=!1,h=new Int32Array(5),p=l-1;p<a&&!f;p+=l){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var m=0,_=0;_<s;_++)if(i.get(_,p))(m&1)===1&&m++,h[m]++;else if((m&1)===0)if(m===4)if(r.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,_,n);if(E===!0)if(l=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{var T=this.findRowSkip();T>h[2]&&(p+=T-h[2]-l,_=s-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,m=3;continue}m=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,m=3;else h[++m]++;else h[m]++;if(r.foundPatternCross(h)){var E=this.handlePossibleCenter(h,p,s,n);E===!0&&(l=h[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}}var S=this.selectBestPatterns();return Ee.orderBestPatterns(S),new W9(S)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var a=t/7,s=a/2;return Math.abs(a-e[0])<s&&Math.abs(a-e[1])<s&&Math.abs(3*a-e[2])<3*s&&Math.abs(a-e[3])<s&&Math.abs(a-e[4])<s},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var a=this.getCrossCheckStateCount(),s=0,l=this.image;e>=s&&t>=s&&l.get(t-s,e-s);)a[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!l.get(t-s,e-s)&&a[1]<=n;)a[1]++,s++;if(e<s||t<s||a[1]>n)return!1;for(;e>=s&&t>=s&&l.get(t-s,e-s)&&a[0]<=n;)a[0]++,s++;if(a[0]>n)return!1;var f=l.getHeight(),h=l.getWidth();for(s=1;e+s<f&&t+s<h&&l.get(t+s,e+s);)a[2]++,s++;if(e+s>=f||t+s>=h)return!1;for(;e+s<f&&t+s<h&&!l.get(t+s,e+s)&&a[3]<n;)a[3]++,s++;if(e+s>=f||t+s>=h||a[3]>=n)return!1;for(;e+s<f&&t+s<h&&l.get(t+s,e+s)&&a[4]<n;)a[4]++,s++;if(a[4]>=n)return!1;var p=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(p-i)<2*i&&r.foundPatternCross(a)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var a=this.image,s=a.getHeight(),l=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(t,f);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(t,f)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&a.get(t,f)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<s&&a.get(t,f);)l[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(t,f)&&l[3]<n;)l[3]++,f++;if(f===s||l[3]>=n)return NaN;for(;f<s&&a.get(t,f)&&l[4]<n;)l[4]++,f++;if(l[4]>=n)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=2*i?NaN:r.foundPatternCross(l)?r.centerFromEnd(l,f):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var a=this.image,s=a.getWidth(),l=this.getCrossCheckStateCount(),f=e;f>=0&&a.get(f,t);)l[2]++,f--;if(f<0)return NaN;for(;f>=0&&!a.get(f,t)&&l[1]<=n;)l[1]++,f--;if(f<0||l[1]>n)return NaN;for(;f>=0&&a.get(f,t)&&l[0]<=n;)l[0]++,f--;if(l[0]>n)return NaN;for(f=e+1;f<s&&a.get(f,t);)l[2]++,f++;if(f===s)return NaN;for(;f<s&&!a.get(f,t)&&l[3]<n;)l[3]++,f++;if(f===s||l[3]>=n)return NaN;for(;f<s&&a.get(f,t)&&l[4]<n;)l[4]++,f++;if(l[4]>=n)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=i?NaN:r.foundPatternCross(l)?r.centerFromEnd(l,f):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],s=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,Math.floor(s),e[2],a);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),e[2],a),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),e[2],a)))){for(var f=a/7,h=!1,p=this.possibleCenters,m=0,_=p.length;m<_;m++){var E=p[m];if(E.aboutEquals(f,l,s)){p[m]=E.combineEstimate(l,s,f),h=!0;break}}if(!h){var T=new Y9(s,l,f);p.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=Oc(this.possibleCenters),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.getCount()>=r.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,a=0,s=0,l=this.possibleCenters.length;try{for(var f=Oc(this.possibleCenters),h=f.next();!h.done;h=f.next()){var p=h.value;p.getCount()>=r.CENTER_QUORUM&&(a++,s+=p.getEstimatedModuleSize())}}catch(S){e={error:S}}finally{try{h&&!h.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}if(a<3)return!1;var m=s/l,_=0;try{for(var E=Oc(this.possibleCenters),T=E.next();!T.done;T=E.next()){var p=T.value;_+=Math.abs(p.getEstimatedModuleSize()-m)}}catch(S){n={error:S}}finally{try{T&&!T.done&&(i=E.return)&&i.call(E)}finally{if(n)throw n.error}}return _<=.05*s},r.prototype.selectBestPatterns=function(){var e,t,n,i,a=this.possibleCenters.length;if(a<3)throw new re;var s=this.possibleCenters,l;if(a>3){var f=0,h=0;try{for(var p=Oc(this.possibleCenters),m=p.next();!m.done;m=p.next()){var _=m.value,E=_.getEstimatedModuleSize();f+=E,h+=E*E}}catch($){e={error:$}}finally{try{m&&!m.done&&(t=p.return)&&t.call(p)}finally{if(e)throw e.error}}l=f/a;var T=Math.sqrt(h/a-l*l);s.sort(function($,J){var C=Math.abs(J.getEstimatedModuleSize()-l),b=Math.abs($.getEstimatedModuleSize()-l);return C<b?-1:C>b?1:0});for(var S=Math.max(.2*l,T),D=0;D<s.length&&s.length>3;D++){var V=s[D];Math.abs(V.getEstimatedModuleSize()-l)>S&&(s.splice(D,1),D--)}}if(s.length>3){var f=0;try{for(var M=Oc(s),B=M.next();!B.done;B=M.next()){var H=B.value;f+=H.getEstimatedModuleSize()}}catch(J){n={error:J}}finally{try{B&&!B.done&&(i=M.return)&&i.call(M)}finally{if(n)throw n.error}}l=f/s.length,s.sort(function(J,C){if(C.getCount()===J.getCount()){var b=Math.abs(C.getEstimatedModuleSize()-l),N=Math.abs(J.getEstimatedModuleSize()-l);return b<N?1:b>N?-1:0}else return C.getCount()-J.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),$9=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Vt.NEED_RESULT_POINT_CALLBACK);var t=new Q9(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(t,n,i);if(a<1)throw new re("No pattern found in proccess finder.");var s=r.computeDimension(t,n,i,a),l=Ss.getProvisionalVersionForDimension(s),f=l.getDimensionForVersion()-7,h=null;if(l.getAlignmentPatternCenters().length>0)for(var p=n.getX()-t.getX()+i.getX(),m=n.getY()-t.getY()+i.getY(),_=1-3/f,E=Math.floor(t.getX()+_*(p-t.getX())),T=Math.floor(t.getY()+_*(m-t.getY())),S=4;S<=16;S<<=1)try{h=this.findAlignmentInRegion(a,E,T,S);break}catch(B){if(!(B instanceof re))throw B}var D=r.createTransform(t,n,i,h,s),V=r.sampleGrid(this.image,D,s),M;return h===null?M=[i,t,n]:M=[i,t,n,h],new Em(V,M)},r.createTransform=function(e,t,n,i,a){var s=a-3.5,l,f,h,p;return i!==null?(l=i.getX(),f=i.getY(),h=s-3,p=h):(l=t.getX()-e.getX()+n.getX(),f=t.getY()-e.getY()+n.getY(),h=s,p=s),xS.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,h,p,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),l,f,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=xm.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var a=nt.round(Ee.distance(e,t)/i),s=nt.round(Ee.distance(e,n)/i),l=Math.floor((a+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new re("Dimensions could be not found.")}return l},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,l=e-(n-e);l<0?(s=e/(e-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var f=Math.floor(t-(i-t)*s);return s=1,f<0?(s=t/(t-f),f=0):f>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),l=Math.floor(e+(l-e)*s),a+=this.sizeOfBlackWhiteBlackRun(e,t,l,f),a-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var a=Math.abs(i-t)>Math.abs(n-e);if(a){var s=e;e=t,t=s,s=n,n=i,i=s}for(var l=Math.abs(n-e),f=Math.abs(i-t),h=-l/2,p=e<n?1:-1,m=t<i?1:-1,_=0,E=n+p,T=e,S=t;T!==E;T+=p){var D=a?S:T,V=a?T:S;if(_===1===this.image.get(D,V)){if(_===2)return nt.distance(T,S,e,t);_++}if(h+=f,h>0){if(S===i)break;S+=m,h-=l}}return _===2?nt.distance(n+p,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var a=Math.floor(i*e),s=Math.max(0,t-a),l=Math.min(this.image.getWidth()-1,t+a);if(l-s<e*3)throw new re("Alignment top exceeds estimated module size.");var f=Math.max(0,n-a),h=Math.min(this.image.getHeight()-1,n+a);if(h-f<e*3)throw new re("Alignment bottom exceeds estimated module size.");var p=new X9(this.image,s,f,l-s,h-f,e,this.resultPointCallback);return p.find()},r})(),cv=(function(){function r(){this.decoder=new j9}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(Vt.PURE_BARCODE)!==void 0){var a=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),i=r.NO_POINTS}else{var s=new $9(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}n.getOther()instanceof CS&&n.getOther().applyMirroredCorrection(i);var l=new jn(n.getText(),n.getRawBytes(),void 0,i,Ie.QR_CODE,void 0),f=n.getByteSegments();f!==null&&l.putMetadata(Ln.BYTE_SEGMENTS,f);var h=n.getECLevel();return h!==null&&l.putMetadata(Ln.ERROR_CORRECTION_LEVEL,h),n.hasStructuredAppend()&&(l.putMetadata(Ln.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Ln.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new re;var i=this.moduleSize(t,e),a=t[1],s=n[1],l=t[0],f=n[0];if(l>=f||a>=s)throw new re;if(s-a!==f-l&&(f=l+(s-a),f>=e.getWidth()))throw new re;var h=Math.round((f-l+1)/i),p=Math.round((s-a+1)/i);if(h<=0||p<=0)throw new re;if(p!==h)throw new re;var m=Math.floor(i/2);a+=m,l+=m;var _=l+Math.floor((h-1)*i)-f;if(_>0){if(_>m)throw new re;l-=_}var E=a+Math.floor((p-1)*i)-s;if(E>0){if(E>m)throw new re;a-=E}for(var T=new Fi(h,p),S=0;S<p;S++)for(var D=a+Math.floor(S*i),V=0;V<h;V++)e.get(l+Math.floor(V*i),D)&&T.set(V,S);return T},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),a=e[0],s=e[1],l=!0,f=0;a<i&&s<n;){if(l!==t.get(a,s)){if(++f===5)break;l=!l}a++,s++}if(a===i||s===n)throw new re;return(a-e[0])/7},r.NO_POINTS=new Array,r})(),Z9=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Je=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return nt.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var s=Z9(e),l=s.next();!l.done;l=s.next()){var f=l.value;i[a++]=f}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=hn.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),J9=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),e7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t7=(function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),a=r.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=r.detect(n,i)),new J9(i,a)},r.detect=function(e,t){for(var n,i,a=new Array,s=0,l=0,f=!1;s<t.getHeight();){var h=r.findVertices(t,s,l);if(h[0]==null&&h[3]==null){if(!f)break;f=!1,l=0;try{for(var p=(n=void 0,e7(a)),m=p.next();!m.done;m=p.next()){var _=m.value;_[1]!=null&&(s=Math.trunc(Math.max(s,_[1].getY()))),_[3]!=null&&(s=Math.max(s,Math.trunc(_[3].getY())))}}catch(E){n={error:E}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}s+=r.ROW_STEP;continue}if(f=!0,a.push(h),!e)break;h[2]!=null?(l=Math.trunc(h[2].getX()),s=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY()))}return a},r.findVertices=function(e,t,n){var i=e.getHeight(),a=e.getWidth(),s=new Array(8);return r.copyToResult(s,r.findRowsWithPattern(e,i,a,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),r.copyToResult(s,r.findRowsWithPattern(e,i,a,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),s},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,a,s){for(var l=new Array(4),f=!1,h=new Int32Array(s.length);i<t;i+=r.ROW_STEP){var p=r.findGuardPattern(e,a,i,n,!1,s,h);if(p!=null){for(;i>0;){var m=r.findGuardPattern(e,a,--i,n,!1,s,h);if(m!=null)p=m;else{i++;break}}l[0]=new Ee(p[0],i),l[1]=new Ee(p[1],i),f=!0;break}}var _=i+1;if(f){for(var E=0,m=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);_<t;_++){var p=r.findGuardPattern(e,m[0],_,n,!1,s,h);if(p!=null&&Math.abs(m[0]-p[0])<r.MAX_PATTERN_DRIFT&&Math.abs(m[1]-p[1])<r.MAX_PATTERN_DRIFT)m=p,E=0;else{if(E>r.SKIPPED_ROW_COUNT_MAX)break;E++}}_-=E+1,l[2]=new Ee(m[0],_),l[3]=new Ee(m[1],_)}return _-i<r.BARCODE_MIN_HEIGHT&&hn.fill(l,null),l},r.findGuardPattern=function(e,t,n,i,a,s,l){hn.fillWithin(l,0,l.length,0);for(var f=t,h=0;e.get(f,n)&&f>0&&h++<r.MAX_PIXEL_DRIFT;)f--;for(var p=f,m=0,_=s.length,E=a;p<i;p++){var T=e.get(p,n);if(T!==E)l[m]++;else{if(m===_-1){if(r.patternMatchVariance(l,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([f,p]);f+=l[0]+l[1],St.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,E=!E}}return m===_-1&&r.patternMatchVariance(l,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([f,p-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,a=0,s=0,l=0;l<i;l++)a+=e[l],s+=t[l];if(a<s)return 1/0;var f=a/s;n*=f;for(var h=0,p=0;p<i;p++){var m=e[p],_=t[p]*f,E=m>_?m-_:_-m;if(E>n)return 1/0;h+=E}return h/a},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),n7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Es=(function(){function r(e,t){if(t.length===0)throw new Ce;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),St.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=n7(this.coefficients),s=a.next();!s.done;s=a.next()){var l=s.value;i=this.field.add(i,l)}}catch(m){t={error:m}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}for(var f=this.coefficients[0],h=this.coefficients.length,p=1;p<h;p++)f=this.field.add(this.field.multiply(e,f),this.coefficients[p]);return f},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var a=new Int32Array(n.length),s=n.length-t.length;St.arraycopy(n,0,a,0,s);for(var l=s;l<n.length;l++)a[l]=this.field.add(t[l-s],n[l]);return new r(this.field,a)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ce("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,a=i.length,s=new Int32Array(n+a-1),l=0;l<n;l++)for(var f=t[l],h=0;h<a;h++)s[l+h]=this.field.add(s[l+h],this.field.multiply(f,i[h]));return new r(this.field,s)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ce;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Fe,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),r7=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new Ce;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new ES;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),i7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),a7=(function(r){i7(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var a=1,s=0;s<t;s++)i.expTable[s]=a,a=a*n%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Es(i,new Int32Array([0])),i.one=new Es(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new Ce;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new Es(this,i)},e.PDF417_GF=new e(Je.NUMBER_OF_CODEWORDS,3),e})(r7),o7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s7=(function(){function r(){this.field=a7.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,a,s=new Es(this.field,e),l=new Int32Array(t),f=!1,h=t;h>0;h--){var p=s.evaluateAt(this.field.exp(h));l[t-h]=p,p!==0&&(f=!0)}if(!f)return 0;var m=this.field.getOne();if(n!=null)try{for(var _=o7(n),E=_.next();!E.done;E=_.next()){var T=E.value,S=this.field.exp(e.length-1-T),D=new Es(this.field,new Int32Array([this.field.subtract(0,S),1]));m=m.multiply(D)}}catch(b){i={error:b}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}for(var V=new Es(this.field,l),M=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),V,t),B=M[0],H=M[1],$=this.findErrorLocations(B),J=this.findErrorMagnitudes(H,B,$),h=0;h<$.length;h++){var C=e.length-1-this.field.log($[h]);if(C<0)throw An.getChecksumInstance();e[C]=this.field.subtract(e[C],J[h])}return $.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var a=e,s=t,l=this.field.getZero(),f=this.field.getOne();s.getDegree()>=Math.round(n/2);){var h=a,p=l;if(a=s,l=f,a.isZero())throw An.getChecksumInstance();s=h;for(var m=this.field.getZero(),_=a.getCoefficient(a.getDegree()),E=this.field.inverse(_);s.getDegree()>=a.getDegree()&&!s.isZero();){var T=s.getDegree()-a.getDegree(),S=this.field.multiply(s.getCoefficient(s.getDegree()),E);m=m.add(this.field.buildMonomial(T,S)),s=s.subtract(a.multiplyByMonomial(T,S))}f=m.multiply(l).subtract(p).negative()}var D=f.getCoefficient(0);if(D===0)throw An.getChecksumInstance();var V=this.field.inverse(D),M=f.multiply(V),B=s.multiply(V);return[M,B]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,a=1;a<this.field.getSize()&&i<t;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==t)throw An.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),a=new Int32Array(i),s=1;s<=i;s++)a[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var l=new Es(this.field,a),f=n.length,h=new Int32Array(f),s=0;s<f;s++){var p=this.field.inverse(n[s]),m=this.field.subtract(0,e.evaluateAt(p)),_=this.field.inverse(l.evaluateAt(p));h[s]=this.field.multiply(m,_)}return h},r})(),fv=(function(){function r(e,t,n,i,a){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,a)}return r.prototype.constructor_1=function(e,t,n,i,a){var s=t==null||n==null,l=i==null||a==null;if(s&&l)throw new re;s?(t=new Ee(0,i.getY()),n=new Ee(0,a.getY())):l&&(i=new Ee(e.getWidth()-1,t.getY()),a=new Ee(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,a=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(e>0){var f=n?this.topLeft:this.topRight,h=Math.trunc(f.getY()-e);h<0&&(h=0);var p=new Ee(f.getX(),h);n?i=p:s=p}if(t>0){var m=n?this.bottomLeft:this.bottomRight,_=Math.trunc(m.getY()+t);_>=this.image.getHeight()&&(_=this.image.getHeight()-1);var E=new Ee(m.getX(),_);n?a=E:l=E}return new r(this.image,i,a,s,l)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),u7=(function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),wm=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(s,l,f,h,p,m){if(s==="%%")return"%";if(t[++n]!==void 0){s=h?parseInt(h.substr(1)):void 0;var _=p?parseInt(p.substr(1)):void 0,E;switch(m){case"s":E=t[n];break;case"c":E=t[n][0];break;case"f":E=parseFloat(t[n]).toFixed(s);break;case"p":E=parseFloat(t[n]).toPrecision(s);break;case"e":E=parseFloat(t[n]).toExponential(s);break;case"x":E=parseInt(t[n]).toString(_||16);break;case"d":E=parseFloat(parseInt(t[n],_||10).toPrecision(s)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(_);for(var T=parseInt(f),S=f&&f[0]+""=="0"?"0":" ";E.length<T;)E=l!==void 0?E+S:S+E;return E}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),l7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bS=(function(){function r(e){this.boundingBox=new fv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new wm,i=0;try{for(var a=l7(this.codewords),s=a.next();!s.done;s=a.next()){var l=s.value;if(l==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),c7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f7=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,a=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a},Hc=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,a=function(m,_){var E={getKey:function(){return m},getValue:function(){return _}};E.getValue()>n?(n=E.getValue(),i=[],i.push(E.getKey())):E.getValue()===n&&i.push(E.getKey())};try{for(var s=c7(this.values.entries()),l=s.next();!l.done;l=s.next()){var f=f7(l.value,2),h=f[0],p=f[1];a(h,p)}}catch(m){e={error:m}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Je.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),h7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},DA=(function(r){h7(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=mg(this.getCodewords()),a=i.next();!a.done;a=i.next()){var s=a.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=-1,p=1,m=0,_=l;_<f;_++)if(n[_]!=null){var E=n[_],T=E.getRowNumber()-h;if(T===0)m++;else if(T===1)p=Math.max(p,m),m=1,h=E.getRowNumber();else if(T<0||E.getRowNumber()>=t.getRowCount()||T>_)n[_]=null;else{var S=void 0;p>2?S=(p-2)*T:S=T;for(var D=S>=_,V=1;V<=S&&!D;V++)D=n[_-V]!=null;D?n[_]=null:(h=E.getRowNumber(),m=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var s=mg(this.getCodewords()),l=s.next();!l.done;l=s.next()){var f=l.value;if(f!=null){var h=f.getRowNumber();if(h>=a.length)continue;a[h]++}}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.getCodewords(),h=-1,p=s;p<l;p++)if(f[p]!=null){var m=f[p];m.setRowNumberAsRowIndicatorColumn();var _=m.getRowNumber()-h;_===0||(_===1?h=m.getRowNumber():m.getRowNumber()>=t.getRowCount()?f[p]=null:h=m.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),a=new Hc,s=new Hc,l=new Hc,f=new Hc;try{for(var h=mg(i),p=h.next();!p.done;p=h.next()){var m=p.value;if(m!=null){m.setRowNumberAsRowIndicatorColumn();var _=m.getValue()%30,E=m.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:s.setValue(_*3+1);break;case 1:f.setValue(_/3),l.setValue(_%3);break;case 2:a.setValue(_+1);break}}}}catch(S){t={error:S}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}if(a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;var T=new u7(a.getValue()[0],s.getValue()[0],l.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,T),T},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var a=t[i];if(t[i]!=null){var s=a.getValue()%30,l=a.getRowNumber();if(l>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(bS),d7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p7=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Je.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,s=this.barcodeColumnCount+1;s>0&&a<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(a=r.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),a=0,s=1;s<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[n];l!=null&&(a=r.adjustRowNumberIfValid(i,a,l),l.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var s=n[t],l=this.detectionResultColumns[e-1].getCodewords(),f=l;this.detectionResultColumns[e+1]!=null&&(f=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=l[t],h[3]=f[t],t>0&&(h[0]=n[t-1],h[4]=l[t-1],h[5]=f[t-1]),t>1&&(h[8]=n[t-2],h[10]=l[t-2],h[11]=f[t-2]),t<n.length-1&&(h[1]=n[t+1],h[6]=l[t+1],h[7]=f[t+1]),t<n.length-2&&(h[9]=n[t+2],h[12]=l[t+2],h[13]=f[t+2]);try{for(var p=d7(h),m=p.next();!m.done;m=p.next()){var _=m.value;if(r.adjustRowNumber(s,_))return}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new wm,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()},r})(),g7=(function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),v7=(function(){function r(){}return r.initialize=function(){for(var e=0;e<Je.SYMBOL_TABLE.length;e++)for(var t=Je.SYMBOL_TABLE[e],n=t&1,i=0;i<Je.BARS_IN_MODULE;i++){for(var a=0;(t&1)===n;)a+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Je.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Je.BARS_IN_MODULE-i-1]=Math.fround(a/Je.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=nt.sum(e),n=new Int32Array(Je.BARS_IN_MODULE),i=0,a=0,s=0;s<Je.MODULES_IN_CODEWORD;s++){var l=t/(2*Je.MODULES_IN_CODEWORD)+s*t/Je.MODULES_IN_CODEWORD;a+e[i]<=l&&(a+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Je.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=nt.sum(e),n=new Array(Je.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var a=av.MAX_VALUE,s=-1;this.bSymbolTableReady||r.initialize();for(var l=0;l<r.RATIOS_TABLE.length;l++){for(var f=0,h=r.RATIOS_TABLE[l],p=0;p<Je.BARS_IN_MODULE;p++){var m=Math.fround(h[p]-n[p]);if(f+=Math.fround(m*m),f>=a)break}f<a&&(a=f,s=Je.SYMBOL_TABLE[l])}return s},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(function(e){return new Array(Je.BARS_IN_MODULE)}),r})(),m7=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),OA=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),y7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_7=(function(r){y7(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})(ur),E7=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new _7;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new ym;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),x7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),A7=(function(r){x7(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(ur),w7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),T7=(function(r){w7(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new Ce("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new A7;i=ze.MAX_VALUE}this.buf=hn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new ym;this.ensureCapacity(this.count+i),St.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return hn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(E7),wt;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(wt||(wt={}));function RS(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Ed;function ao(r){if(typeof Ed>"u"&&(Ed=RS()),Ed===null)throw new Error("BigInt is not supported!");return Ed(r)}function S7(){var r=[];r[0]=ao(1);var e=ao(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var I7=(function(){function r(){}return r.decode=function(e,t){var n=new Fe(""),i=fn.ISO8859_1;n.enableDecoding(i);for(var a=1,s=e[a++],l=new m7;a<e[0];){switch(s){case r.TEXT_COMPACTION_MODE_LATCH:a=r.textCompaction(e,a,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:a=r.byteCompaction(s,e,i,a,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:a=r.numericCompaction(e,a,n);break;case r.ECI_CHARSET:fn.getCharacterSetECIByValue(e[a++]);break;case r.ECI_GENERAL_PURPOSE:a+=2;break;case r.ECI_USER_DEFINED:a++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=r.decodeMacroBlock(e,a,l);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new fe;default:a--,a=r.textCompaction(e,a,n);break}if(a<e.length)s=e[a++];else throw fe.getFormatInstance()}if(n.length()===0)throw fe.getFormatInstance();var f=new K1(null,n.toString(),null,t);return f.setOther(l),f},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw fe.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<r.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)i[a]=e[t];n.setSegmentIndex(ze.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Fe;t=r.textCompaction(e,t,s),n.setFileId(s.toString());var l=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var f=new Fe;t=r.textCompaction(e,t+1,f),n.setFileName(f.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new Fe;t=r.textCompaction(e,t+1,h),n.setSender(h.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Fe;t=r.textCompaction(e,t+1,p),n.setAddressee(p.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var m=new Fe;t=r.numericCompaction(e,t+1,m),n.setSegmentCount(ze.parseInt(m.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var _=new Fe;t=r.numericCompaction(e,t+1,_),n.setTimestamp(OA.parseLong(_.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var E=new Fe;t=r.numericCompaction(e,t+1,E),n.setChecksum(ze.parseInt(E.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var T=new Fe;t=r.numericCompaction(e,t+1,T),n.setFileSize(OA.parseLong(T.toString()));break;default:throw fe.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw fe.getFormatInstance()}if(l!==-1){var S=t-l;n.isLastSegment()&&S--,n.setOptionalData(hn.copyOfRange(e,l,l+S))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),s=0,l=!1;t<e[0]&&!l;){var f=e[t++];if(f<r.TEXT_COMPACTION_MODE_LATCH)i[s]=f/30,i[s+1]=f%30,s+=2;else switch(f){case r.TEXT_COMPACTION_MODE_LATCH:i[s++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],a[s]=f,s++;break}}return r.decodeTextCompaction(i,a,s,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var a=wt.ALPHA,s=wt.ALPHA,l=0;l<n;){var f=e[l],h="";switch(a){case wt.ALPHA:if(f<26)h=String.fromCharCode(65+f);else switch(f){case 26:h=" ";break;case r.LL:a=wt.LOWER;break;case r.ML:a=wt.MIXED;break;case r.PS:s=a,a=wt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.LOWER:if(f<26)h=String.fromCharCode(97+f);else switch(f){case 26:h=" ";break;case r.AS:s=a,a=wt.ALPHA_SHIFT;break;case r.ML:a=wt.MIXED;break;case r.PS:s=a,a=wt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.MIXED:if(f<r.PL)h=r.MIXED_CHARS[f];else switch(f){case r.PL:a=wt.PUNCT;break;case 26:h=" ";break;case r.LL:a=wt.LOWER;break;case r.AL:a=wt.ALPHA;break;case r.PS:s=a,a=wt.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.PUNCT:if(f<r.PAL)h=r.PUNCT_CHARS[f];else switch(f){case r.PAL:a=wt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.ALPHA_SHIFT:if(a=s,f<26)h=String.fromCharCode(65+f);else switch(f){case 26:h=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break;case wt.PUNCT_SHIFT:if(a=s,f<r.PAL)h=r.PUNCT_CHARS[f];else switch(f){case r.PAL:a=wt.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case r.TEXT_COMPACTION_MODE_LATCH:a=wt.ALPHA;break}break}h!==""&&i.append(h),l++}},r.byteCompaction=function(e,t,n,i,a){var s=new T7,l=0,f=0,h=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),m=t[i++];i<t[0]&&!h;)switch(p[l++]=m,f=900*f+m,m=t[i++],m){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(l%5===0&&l>0){for(var _=0;_<6;++_)s.write(Number(ao(f)>>ao(8*(5-_))));f=0,l=0}break}i===t[0]&&m<r.TEXT_COMPACTION_MODE_LATCH&&(p[l++]=m);for(var E=0;E<l;E++)s.write(p[E]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var T=t[i++];if(T<r.TEXT_COMPACTION_MODE_LATCH)l++,f=900*f+T;else switch(T){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(l%5===0&&l>0){for(var _=0;_<6;++_)s.write(Number(ao(f)>>ao(8*(5-_))));f=0,l=0}}break}return a.append(Ur.decode(s.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,a=!1,s=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!a;){var l=e[t++];if(t===e[0]&&(a=!0),l<r.TEXT_COMPACTION_MODE_LATCH)s[i]=l,i++;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||l===r.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(r.decodeBase900toBase10(s,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=ao(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*ao(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new fe;return a.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=RS()?S7():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),Nc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C7=(function(){function r(){}return r.decode=function(e,t,n,i,a,s,l){for(var f=new fv(e,t,n,i,a),h=null,p=null,m,_=!0;;_=!1){if(t!=null&&(h=r.getRowIndicatorColumn(e,f,t,!0,s,l)),i!=null&&(p=r.getRowIndicatorColumn(e,f,i,!1,s,l)),m=r.merge(h,p),m==null)throw re.getNotFoundInstance();var E=m.getBoundingBox();if(_&&E!=null&&(E.getMinY()<f.getMinY()||E.getMaxY()>f.getMaxY()))f=E;else break}m.setBoundingBox(f);var T=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,h),m.setDetectionResultColumn(T,p);for(var S=h!=null,D=1;D<=T;D++){var V=S?D:T-D;if(m.getDetectionResultColumn(V)===void 0){var M=void 0;V===0||V===T?M=new DA(f,V===0):M=new bS(f),m.setDetectionResultColumn(V,M);for(var B=-1,H=B,$=f.getMinY();$<=f.getMaxY();$++){if(B=r.getStartColumn(m,V,$,S),B<0||B>f.getMaxX()){if(H===-1)continue;B=H}var J=r.detectCodeword(e,f.getMinX(),f.getMaxX(),S,B,$,s,l);J!=null&&(M.setCodeword($,J),H=B,s=Math.min(s,J.getWidth()),l=Math.max(l,J.getWidth()))}}}return r.createDecoderResult(m)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=fv.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new p7(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=r.getMax(i),s=0;try{for(var l=Nc(i),f=l.next();!f.done;f=l.next()){var h=f.value;if(s+=a-h,h>0)break}}catch(E){t={error:E}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}for(var p=e.getCodewords(),m=0;s>0&&p[m]==null;m++)s--;for(var _=0,m=i.length-1;m>=0&&(_+=a-i[m],!(i[m]>0));m--);for(var m=p.length-1;_>0&&p[m]==null;m--)_--;return e.getBoundingBox().addMissingRows(s,_,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var a=Nc(e),s=a.next();!s.done;s=a.next()){var l=s.value;i=Math.max(i,l)}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,a,s){for(var l=new DA(t,i),f=0;f<2;f++)for(var h=f===0?1:-1,p=Math.trunc(Math.trunc(n.getX())),m=Math.trunc(Math.trunc(n.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=h){var _=r.detectCodeword(e,0,e.getWidth(),i,p,m,a,s);_!=null&&(l.setCodeword(m,_),i?p=_.getStartX():p=_.getEndX())}return l},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Je.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],s=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var f=0;f<e.getBarcodeColumnCount();f++){var h=t[l][f+1].getValue(),p=l*e.getBarcodeColumnCount()+f;h.length===0?n.push(p):h.length===1?i[p]=h[0]:(s.push(p),a.push(h))}for(var m=new Array(a.length),_=0;_<m.length;_++)m[_]=a[_];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Je.toIntArray(n),Je.toIntArray(s),m)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,a){for(var s=new Int32Array(i.length),l=100;l-- >0;){for(var f=0;f<s.length;f++)t[i[f]]=a[f][s[f]];try{return r.decodeCodewords(t,e,n)}catch(p){var h=p instanceof An;if(!h)throw p}if(s.length===0)throw An.getChecksumInstance();for(var f=0;f<s.length;f++)if(s[f]<a[f].length-1){s[f]++;break}else if(s[f]=0,f===s.length-1)throw An.getChecksumInstance()}throw An.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,a,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<s.length;l++)for(var f=0;f<s[l].length;f++)s[l][f]=new Hc;var h=0;try{for(var p=Nc(e.getDetectionResultColumns()),m=p.next();!m.done;m=p.next()){var _=m.value;if(_!=null)try{for(var E=(i=void 0,Nc(_.getCodewords())),T=E.next();!T.done;T=E.next()){var S=T.value;if(S!=null){var D=S.getRowNumber();if(D>=0){if(D>=s.length)continue;s[D][h].setValue(S.getValue())}}}}catch(V){i={error:V}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(i)throw i.error}}h++}}catch(V){t={error:V}}finally{try{m&&!m.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}return s},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var a,s,l=i?1:-1,f=null;if(r.isValidBarcodeColumn(e,t-l)&&(f=e.getDetectionResultColumn(t-l).getCodeword(n)),f!=null)return i?f.getEndX():f.getStartX();if(f=e.getDetectionResultColumn(t).getCodewordNearby(n),f!=null)return i?f.getStartX():f.getEndX();if(r.isValidBarcodeColumn(e,t-l)&&(f=e.getDetectionResultColumn(t-l).getCodewordNearby(n)),f!=null)return i?f.getEndX():f.getStartX();for(var h=0;r.isValidBarcodeColumn(e,t-l);){t-=l;try{for(var p=(a=void 0,Nc(e.getDetectionResultColumn(t).getCodewords())),m=p.next();!m.done;m=p.next()){var _=m.value;if(_!=null)return(i?_.getEndX():_.getStartX())+l*h*(_.getEndX()-_.getStartX())}}catch(E){a={error:E}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,a,s,l,f){a=r.adjustCodewordStartColumn(e,t,n,i,a,s);var h=r.getModuleBitCount(e,t,n,i,a,s);if(h==null)return null;var p,m=nt.sum(h);if(i)p=a+m;else{for(var _=0;_<h.length/2;_++){var E=h[_];h[_]=h[h.length-1-_],h[h.length-1-_]=E}p=a,a=p-m}if(!r.checkCodewordSkew(m,l,f))return null;var T=v7.getDecodedValue(h),S=Je.getCodeword(T);return S===-1?null:new g7(a,p,r.getCodewordBucketNumber(T),S)},r.getModuleBitCount=function(e,t,n,i,a,s){for(var l=a,f=new Int32Array(8),h=0,p=i?1:-1,m=i;(i?l<n:l>=t)&&h<f.length;)e.get(l,s)===m?(f[h]++,l+=p):(h++,m=!m);return h===f.length||l===(i?n:t)&&h===f.length-1?f:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,a,s){for(var l=a,f=i?-1:1,h=0;h<2;h++){for(;(i?l>=t:l<n)&&i===e.get(l,s);){if(Math.abs(a-l)>r.CODEWORD_SKEW_SIZE)return a;l+=f}f=-f,i=!i}return l},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw fe.getFormatInstance();var i=1<<t+1,a=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var s=I7.decode(e,""+t);return s.setErrorsCorrected(a),s.setErasures(n.length),s},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw An.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw fe.getFormatInstance();var n=e[0];if(n>e.length)throw fe.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw fe.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new wm,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new s7,r})(),b7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hv=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw re.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof fe||n instanceof An?re.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,a,s=new Array,l=t7.detectMultiple(e,t,n);try{for(var f=b7(l.getPoints()),h=f.next();!h.done;h=f.next()){var p=h.value,m=C7.decode(l.getBits(),p[4],p[5],p[6],p[7],r.getMinCodewordWidth(p),r.getMaxCodewordWidth(p)),_=new jn(m.getText(),m.getRawBytes(),void 0,p,Ie.PDF_417);_.putMetadata(Ln.ERROR_CORRECTION_LEVEL,m.getECLevel());var E=m.getOther();E!=null&&_.putMetadata(Ln.PDF417_EXTRA_METADATA,E),s.push(_)}}catch(T){i={error:T}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return s.map(function(T){return T})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?ze.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),R7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),NA=(function(r){R7(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})(ur),MA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D7=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Vt.TRY_HARDER)!==void 0,n=e==null?null:e.get(Vt.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(s){return s===Ie.UPC_A||s===Ie.UPC_E||s===Ie.EAN_13||s===Ie.EAN_8||s===Ie.CODABAR||s===Ie.CODE_39||s===Ie.CODE_93||s===Ie.CODE_128||s===Ie.ITF||s===Ie.RSS_14||s===Ie.RSS_EXPANDED});a&&!t&&i.push(new jc(e)),n.includes(Ie.QR_CODE)&&i.push(new cv),n.includes(Ie.DATA_MATRIX)&&i.push(new lv),n.includes(Ie.AZTEC)&&i.push(new sv),n.includes(Ie.PDF_417)&&i.push(new hv),a&&t&&i.push(new jc(e))}i.length===0&&(t||i.push(new jc(e)),i.push(new cv),i.push(new lv),i.push(new sv),i.push(new hv),t&&i.push(new jc(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=MA(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new NA("No readers where selected, nothing can be read.");try{for(var i=MA(this.readers),a=i.next();!a.done;a=i.next()){var s=a.value;try{return s.decode(e,this.hints)}catch(l){if(l instanceof NA)continue}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new re("No MultiFormat Readers were able to detect the code.")},r})(),O7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),N7=(function(r){O7(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,a=new D7;return a.setHints(t),i=r.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(_l),M7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){M7(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new hv,t)||this}return e})(_l);var P7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){P7(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new cv,t)||this}return e})(_l);var dv;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(dv||(dv={}));const xd=dv;var DS=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new xo(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,a=t.length;a<=e;a++){var s=n.multiply(new xo(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));t.push(s),n=s}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new Ce("No error correction bytes");var n=e.length-t;if(n<=0)throw new Ce("No data bytes provided");var i=this.buildGenerator(t),a=new Int32Array(n);St.arraycopy(e,0,a,0,n);var s=new xo(this.field,a);s=s.multiplyByMonomial(t,1);for(var l=s.divide(i)[1],f=l.getCoefficients(),h=t-f.length,p=0;p<h;p++)e[n+p]=0;St.arraycopy(f,0,e,n+h,f.length)},r})(),Gc=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a-1;s++)for(var l=n[s],f=0;f<i-1;f++){var h=l[f];h===l[f+1]&&h===n[s+1][f]&&h===n[s+1][f+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var l=0;l<i;l++){var f=n[s];l+6<i&&f[l]===1&&f[l+1]===0&&f[l+2]===1&&f[l+3]===1&&f[l+4]===1&&f[l+5]===0&&f[l+6]===1&&(r.isWhiteHorizontal(f,l-4,l)||r.isWhiteHorizontal(f,l+7,l+11))&&t++,s+6<a&&n[s][l]===1&&n[s+1][l]===0&&n[s+2][l]===1&&n[s+3][l]===1&&n[s+4][l]===1&&n[s+5][l]===0&&n[s+6][l]===1&&(r.isWhiteVertical(n,l,s-4,s)||r.isWhiteVertical(n,l,s+7,s+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),s=0;s<a;s++)for(var l=n[s],f=0;f<i;f++)l[f]===1&&t++;var h=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(t*2-h)*10/h);return p*r.N4},r.getDataMaskBit=function(e,t,n){var i,a;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:a=n*t,i=(a&1)+a%3;break;case 6:a=n*t,i=(a&1)+a%3&1;break;case 7:a=n*t,i=a%3+(n+t&1)&1;break;default:throw new Ce("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),s=e.getArray(),l=0;l<i;l++){for(var f=0,h=-1,p=0;p<a;p++){var m=t?s[l][p]:s[p][l];m===h?f++:(f>=5&&(n+=r.N1+(f-5)),f=1,h=m)}f>=5&&(n+=r.N1+(f-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),L7=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V7=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=L7(this.bytes),a=i.next();!a.done;a=i.next()){var s=a.value;hn.fill(s,e)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],s=t.bytes[n],l=0,f=this.width;l<f;++l)if(a[l]!==s[l])return!1;return!0},r.prototype.toString=function(){for(var e=new Fe,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],a=0,s=this.width;a<s;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),pv=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Fe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),B7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),bt=(function(r){B7(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})(ur),PA=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,a){r.clearMatrix(a),r.embedBasicPatterns(n,a),r.embedTypeInfo(t,i,a),r.maybeEmbedVersionInfo(n,a),r.embedDataBits(e,i,a)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new wn;r.makeTypeInfoBits(e,t,i);for(var a=0,s=i.getSize();a<s;++a){var l=i.get(i.getSize()-1-a),f=r.TYPE_INFO_COORDINATES[a],h=f[0],p=f[1];if(n.setBoolean(h,p,l),a<8){var m=n.getWidth()-a-1,_=8;n.setBoolean(m,_,l)}else{var m=8,_=n.getHeight()-7+(a-8);n.setBoolean(m,_,l)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new wn;r.makeVersionInfoBits(e,n);for(var i=17,a=0;a<6;++a)for(var s=0;s<3;++s){var l=n.get(i);i--,t.setBoolean(a,t.getHeight()-11+s,l),t.setBoolean(t.getHeight()-11+s,a,l)}}},r.embedDataBits=function(e,t,n){for(var i=0,a=-1,s=n.getWidth()-1,l=n.getHeight()-1;s>0;){for(s===6&&(s-=1);l>=0&&l<n.getHeight();){for(var f=0;f<2;++f){var h=s-f;if(r.isEmpty(n.get(h,l))){var p=void 0;i<e.getSize()?(p=e.get(i),++i):p=!1,t!==255&&Gc.getDataMaskBit(t,h,l)&&(p=!p),n.setBoolean(h,l,p)}}l+=a}a=-a,l+=a,s-=2}if(i!==e.getSize())throw new bt("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-ze.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new Ce("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!pv.isValidMaskPattern(t))throw new bt("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var a=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(a,10);var s=new wn;if(s.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new bt("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new bt("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new bt;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new bt;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new bt;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var a=r.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)n.setNumber(e+s,t+i,a[s])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var a=r.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)n.setNumber(e+s,t+i,a[s])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,s=i.length;a!==s;a++){var l=i[a];if(l>=0)for(var f=0;f!==s;f++){var h=i[f];h>=0&&r.isEmpty(t.get(h,l))&&r.embedPositionAdjustmentPattern(h-2,l-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),k7=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),LA=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Gc.applyMaskPenaltyRule1(e)+Gc.applyMaskPenaltyRule2(e)+Gc.applyMaskPenaltyRule3(e)+Gc.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(xd.CHARACTER_SET)!==void 0;a&&(i=n.get(xd.CHARACTER_SET).toString());var s=this.chooseMode(e,i),l=new wn;if(s===Rt.BYTE&&(a||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var f=fn.getCharacterSetECIByName(i);f!==void 0&&this.appendECI(f,l)}this.appendModeInfo(s,l);var h=new wn;this.appendBytes(e,s,h,i);var p;if(n!==null&&n.get(xd.QR_VERSION)!==void 0){var m=Number.parseInt(n.get(xd.QR_VERSION).toString(),10);p=Ss.getVersionForNumber(m);var _=this.calculateBitsNeeded(s,l,h,p);if(!this.willFit(_,p,t))throw new bt("Data too big for requested version")}else p=this.recommendVersion(t,s,l,h);var E=new wn;E.appendBitArray(l);var T=s===Rt.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(T,p,s,E),E.appendBitArray(h);var S=p.getECBlocksForLevel(t),D=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(D,E);var V=this.interleaveWithECBytes(E,p.getTotalCodewords(),D,S.getNumBlocks()),M=new pv;M.setECLevel(t),M.setMode(s),M.setVersion(p);var B=p.getDimensionForVersion(),H=new V7(B,B),$=this.chooseMaskPattern(V,t,p,H);return M.setMaskPattern($),PA.buildMatrix(V,t,p,$,H),M.setMatrix(H),M},r.recommendVersion=function(e,t,n,i){var a=this.calculateBitsNeeded(t,n,i,Ss.getVersionForNumber(1)),s=this.chooseVersion(a,e),l=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(l,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),fn.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Rt.KANJI;for(var n=!1,i=!1,a=0,s=e.length;a<s;++a){var l=e.charAt(a);if(r.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return Rt.BYTE}return i?Rt.ALPHANUMERIC:n?Rt.NUMERIC:Rt.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=Ur.encode(e,fn.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=t[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var a=Number.MAX_SAFE_INTEGER,s=-1,l=0;l<pv.NUM_MASK_PATTERNS;l++){PA.buildMatrix(e,t,n,l,i);var f=this.calculateMaskPenalty(i);f<a&&(a=f,s=l)}return s},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=Ss.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new bt("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),a=t.getECBlocksForLevel(n),s=a.getTotalECCodewords(),l=i-s,f=(e+7)/8;return l>=f},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new bt("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var a=t.getSize()&7;if(a>0)for(var i=a;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new bt("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,a,s){if(i>=n)throw new bt("Block ID too large");var l=e%n,f=n-l,h=Math.floor(e/n),p=h+1,m=Math.floor(t/n),_=m+1,E=h-m,T=p-_;if(E!==T)throw new bt("EC bytes mismatch");if(n!==f+l)throw new bt("RS blocks mismatch");if(e!==(m+E)*f+(_+T)*l)throw new bt("Total bytes mismatch");i<f?(a[0]=m,s[0]=E):(a[0]=_,s[0]=T)},r.interleaveWithECBytes=function(e,t,n,i){var a,s,l,f;if(e.getSizeInBytes()!==n)throw new bt("Number of bits and data bytes does not match");for(var h=0,p=0,m=0,_=new Array,E=0;E<i;++E){var T=new Int32Array(1),S=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,E,T,S);var D=T[0],V=new Uint8Array(D);e.toBytes(8*h,V,0,D);var M=r.generateECBytes(V,S[0]);_.push(new k7(V,M)),p=Math.max(p,D),m=Math.max(m,M.length),h+=T[0]}if(n!==h)throw new bt("Data bytes does not match offset");for(var B=new wn,E=0;E<p;++E)try{for(var H=(a=void 0,LA(_)),$=H.next();!$.done;$=H.next()){var J=$.value,V=J.getDataBytes();E<V.length&&B.appendBits(V[E],8)}}catch(P){a={error:P}}finally{try{$&&!$.done&&(s=H.return)&&s.call(H)}finally{if(a)throw a.error}}for(var E=0;E<m;++E)try{for(var C=(l=void 0,LA(_)),b=C.next();!b.done;b=C.next()){var J=b.value,M=J.getErrorCorrectionBytes();E<M.length&&B.appendBits(M[E],8)}}catch(P){l={error:P}}finally{try{b&&!b.done&&(f=C.return)&&f.call(C)}finally{if(l)throw l.error}}if(t!==B.getSizeInBytes())throw new bt("Interleaving error: "+t+" and "+B.getSizeInBytes()+" differ.");return B},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),a=0;a<n;a++)i[a]=e[a]&255;new DS(or.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),a=0;a<t;a++)s[a]=i[n+a];return s},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var a=n.getCharacterCountBits(t);if(e>=1<<a)throw new bt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},r.appendBytes=function(e,t,n,i){switch(t){case Rt.NUMERIC:r.appendNumericBytes(e,n);break;case Rt.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case Rt.BYTE:r.append8BitBytes(e,n,i);break;case Rt.KANJI:r.appendKanjiBytes(e,n);break;default:throw new bt("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getDigit(e.charAt(i));if(i+2<n){var s=r.getDigit(e.charAt(i+1)),l=r.getDigit(e.charAt(i+2));t.appendBits(a*100+s*10+l,10),i+=3}else if(i+1<n){var s=r.getDigit(e.charAt(i+1));t.appendBits(a*10+s,7),i+=2}else t.appendBits(a,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var a=r.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new bt;if(i+1<n){var s=r.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new bt;t.appendBits(a*45+s,11),i+=2}else t.appendBits(a,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=Ur.encode(e,n)}catch(f){throw new bt(f)}for(var a=0,s=i.length;a!==s;a++){var l=i[a];t.appendBits(l,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=Ur.encode(e,fn.SJIS)}catch(m){throw new bt(m)}for(var i=n.length,a=0;a<i;a+=2){var s=n[a]&255,l=n[a+1]&255,f=s<<8&4294967295|l,h=-1;if(f>=33088&&f<=40956?h=f-33088:f>=57408&&f<=60351&&(h=f-49472),h===-1)throw new bt("Invalid byte sequence");var p=(h>>8)*192+(h&255);t.appendBits(p,13)}},r.appendECI=function(e,t){t.appendBits(Rt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=fn.UTF8.getName(),r})();var F7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){F7(e,r);function e(t,n,i,a,s,l,f,h){var p=r.call(this,l,f)||this;if(p.yuvData=t,p.dataWidth=n,p.dataHeight=i,p.left=a,p.top=s,a+l>n||s+f>i)throw new Ce("Crop rectangle does not fit within image data.");return h&&p.reverseHorizontal(l,f),p}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.yuvData,s,a,0,i),a;for(var l=0;l<n;l++){var f=l*t;St.arraycopy(this.yuvData,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),a=this.yuvData,s=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var f=l*t,h=0;h<t;h++){var p=a[s+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[f+h]=4278190080|p*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,a=0,s=this.top*this.dataWidth+this.left;a<n;a++,s+=this.dataWidth)for(var l=s+t/2,f=s,h=s+t-1;f<l;f++,h--){var p=i[f];i[f]=i[h],i[h]=p}},e.prototype.invert=function(){return new _m(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(X1);var U7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){U7(e,r);function e(t,n,i,a,s,l,f){var h=r.call(this,n,i)||this;if(h.dataWidth=a,h.dataHeight=s,h.left=l,h.top=f,t.BYTES_PER_ELEMENT===4){for(var p=n*i,m=new Uint8ClampedArray(p),_=0;_<p;_++){var E=t[_],T=E>>16&255,S=E>>7&510,D=E&255;m[_]=(T+S+D)/4&255}h.luminances=m}else h.luminances=t;if(a===void 0&&(h.dataWidth=n),s===void 0&&(h.dataHeight=i),l===void 0&&(h.left=0),f===void 0&&(h.top=0),h.left+n>h.dataWidth||h.top+i>h.dataHeight)throw new Ce("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new Ce("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(t+this.top)*this.dataWidth+this.left;return St.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,a=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return St.arraycopy(this.luminances,s,a,0,i),a;for(var l=0;l<n;l++){var f=l*t;St.arraycopy(this.luminances,s,a,f,t),s+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new _m(this)},e})(X1);var z7=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),j7=(function(r){z7(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(fn),H7=(function(){function r(){}return r.ISO_8859_1=fn.ISO8859_1,r})(),gv,G7=301,q7=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=G7);return{LOG:r,ALOG:e}};gv=q7([],[]),gv.LOG;gv.ALOG;var VA;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(VA||(VA={}));var BA=129,OS=230,X7=231,K7=235,Y7=236,W7=237,Q7=238,$7=239,Z7=240,yg=254,J7=254,kA="[)>05",FA="[)>06",UA="",pt=0,Nn=1,Yn=2,ln=3,En=4,kn=5,eM=(function(){function r(){}return r.prototype.getEncodingMode=function(){return pt},r.prototype.encode=function(e){var t=ri.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case kn:e.writeCodeword(X7),e.signalEncoderChange(kn);return;case Nn:e.writeCodeword(OS),e.signalEncoderChange(Nn);return;case ln:e.writeCodeword(Q7),e.signalEncoderChange(ln);break;case Yn:e.writeCodeword($7),e.signalEncoderChange(Yn);break;case En:e.writeCodeword(Z7),e.signalEncoderChange(En);break;default:throw new Error("Illegal mode: "+i)}else ri.isExtendedASCII(n)?(e.writeCodeword(K7),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(ri.isDigit(e)&&ri.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),tM=(function(){function r(){}return r.prototype.getEncodingMode=function(){return kn},r.prototype.encode=function(e){var t=new Fe;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}var a=t.length()-1,s=1,l=e.getCodewordCount()+a+s;e.updateSymbolInfo(l);var f=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||f)if(a<=249)t.setCharAt(0,$e.getCharAt(a));else if(a<=1555)t.setCharAt(0,$e.getCharAt(Math.floor(a/250)+249)),t.insert(1,$e.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var h=0,n=t.length();h<n;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r})(),Tm=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Nn},r.prototype.encodeMaximal=function(e){for(var t=new Fe,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,a=t.length())}if(a!==t.length()){var l=Math.floor(t.length()/3*2),f=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(f);var h=e.getSymbolInfo().getDataCapacity()-f,p=Math.floor(t.length()%3);(p===2&&h!==2||p===1&&(n>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(OS),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Fe;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),a=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var f=new Fe;for(t.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(e,t,f,i));t.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(e,t,f,i);break}var h=t.length();if(h%3===0){var p=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var a=t.length(),s=t.toString().substring(0,a-i);t.setLengthToZero(),t.append(s),e.pos--;var l=e.getCurrentChar();return i=this.encodeChar(l,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(yg)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(yg),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(yg)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(pt)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,a=new Fe;return a.append(n),a.append(i),a.toString()},r})(),nM=(function(){function r(){}return r.prototype.getEncodingMode=function(){return En},r.prototype.encode=function(e){for(var t=new Fe;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var a=t.toString().substring(4);t.setLengthToZero(),t.append(a);var s=ri.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(pt);break}}}t.append($e.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,l=this.encodeToCodewords(t.toString()),f=!e.hasMoreCharacters(),h=f&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}h?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(l)}finally{e.signalEncoderChange(pt)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append($e.getCharAt(e-64)):ri.illegalCharacter($e.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,a=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,l=(n<<18)+(i<<12)+(a<<6)+s,f=l>>16&255,h=l>>8&255,p=l&255,m=new Fe;return m.append(f),t>=2&&m.append(h),t>=3&&m.append(p),m.toString()},r})(),rM=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),iM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ot=(function(){function r(e,t,n,i,a,s,l,f){l===void 0&&(l=0),f===void 0&&(f=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=s,this.rsBlockData=l,this.rsBlockError=f}return r.lookup=function(e,t,n,i,a){var s,l;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var f=iM(oM),h=f.next();!h.done;h=f.next()){var p=h.value;if(!(t===1&&p.rectangular)&&!(t===2&&!p.rectangular)&&!(n!=null&&(p.getSymbolWidth()<n.getWidth()||p.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(p.getSymbolWidth()>i.getWidth()||p.getSymbolHeight()>i.getHeight()))&&e<=p.dataCapacity)return p}}catch(m){s={error:m}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),aM=(function(r){rM(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(ot),oM=[new ot(!1,3,5,8,8,1),new ot(!1,5,7,10,10,1),new ot(!0,5,7,16,6,1),new ot(!1,8,10,12,12,1),new ot(!0,10,11,14,6,2),new ot(!1,12,12,14,14,1),new ot(!0,16,14,24,10,1),new ot(!1,18,14,16,16,1),new ot(!1,22,18,18,18,1),new ot(!0,22,18,16,10,2),new ot(!1,30,20,20,20,1),new ot(!0,32,24,16,14,2),new ot(!1,36,24,22,22,1),new ot(!1,44,28,24,24,1),new ot(!0,49,28,22,14,2),new ot(!1,62,36,14,14,4),new ot(!1,86,42,16,16,4),new ot(!1,114,48,18,18,4),new ot(!1,144,56,20,20,4),new ot(!1,174,68,22,22,4),new ot(!1,204,84,24,24,4,102,42),new ot(!1,280,112,14,14,16,140,56),new ot(!1,368,144,16,16,16,92,36),new ot(!1,456,192,18,18,16,114,48),new ot(!1,576,224,20,20,16,144,56),new ot(!1,696,272,22,22,16,174,68),new ot(!1,816,336,24,24,16,136,56),new ot(!1,1050,408,18,18,36,175,68),new ot(!1,1304,496,20,20,36,163,62),new aM],sM=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(l){return l.charCodeAt(0)}),n=new Fe,i=0,a=t.length;i<a;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new Fe,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=ot.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),uM=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),lM=(function(r){uM(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ln},e.prototype.encode=function(t){for(var n=new Fe;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(t,n);var s=ri.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(pt);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):ri.illegalCharacter($e.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),a=n.length();t.pos-=a,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(J7),t.getNewEncoding()<0&&t.signalEncoderChange(pt)},e})(Tm),cM=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fM=(function(r){cM(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Yn},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e})(Tm),ri=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=BA+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,a){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var s=new Tm,l=[new eM,s,new fM,new lM,new nM,new tM],f=new sM(e);f.setSymbolShape(t),f.setSizeConstraints(n,i),e.startsWith(kA)&&e.endsWith(UA)?(f.writeCodeword(Y7),f.setSkipAtEnd(2),f.pos+=kA.length):e.startsWith(FA)&&e.endsWith(UA)&&(f.writeCodeword(W7),f.setSkipAtEnd(2),f.pos+=FA.length);var h=pt;for(a&&(s.encodeMaximal(f),h=f.getNewEncoding(),f.resetEncoderSignal());f.hasMoreCharacters();)l[h].encode(f),f.getNewEncoding()>=0&&(h=f.getNewEncoding(),f.resetEncoderSignal());var p=f.getCodewordCount();f.updateSymbolInfo();var m=f.getSymbolInfo().getDataCapacity();p<m&&h!==pt&&h!==kn&&h!==En&&f.writeCodeword("");var _=f.getCodewords();for(_.length()<m&&_.append(BA);_.length()<m;)_.append(this.randomize253State(_.length()+1));return f.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===ln&&i===ln){for(var a=Math.min(t+3,e.length),s=t;s<a;s++)if(!this.isNativeX12(e.charCodeAt(s)))return pt}else if(n===En&&i===En){for(var a=Math.min(t+4,e.length),s=t;s<a;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return pt}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===pt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,s=new Uint8Array(6),l=[];;){if(t+a===e.length){hn.fill(s,0),hn.fill(l,0);var f=this.findMinimums(i,l,ze.MAX_VALUE,s),h=this.getMinimumCount(s);if(l[pt]===f)return pt;if(h===1){if(s[kn]>0)return kn;if(s[En]>0)return En;if(s[Yn]>0)return Yn;if(s[ln]>0)return ln}return Nn}var p=e.charCodeAt(t+a);if(a++,this.isDigit(p)?i[pt]+=.5:this.isExtendedASCII(p)?(i[pt]=Math.ceil(i[pt]),i[pt]+=2):(i[pt]=Math.ceil(i[pt]),i[pt]++),this.isNativeC40(p)?i[Nn]+=2/3:this.isExtendedASCII(p)?i[Nn]+=8/3:i[Nn]+=4/3,this.isNativeText(p)?i[Yn]+=2/3:this.isExtendedASCII(p)?i[Yn]+=8/3:i[Yn]+=4/3,this.isNativeX12(p)?i[ln]+=2/3:this.isExtendedASCII(p)?i[ln]+=13/3:i[ln]+=10/3,this.isNativeEDIFACT(p)?i[En]+=3/4:this.isExtendedASCII(p)?i[En]+=17/4:i[En]+=13/4,this.isSpecialB256(p)?i[kn]+=4:i[kn]++,a>=4){if(hn.fill(s,0),hn.fill(l,0),this.findMinimums(i,l,ze.MAX_VALUE,s),l[pt]<this.min(l[kn],l[Nn],l[Yn],l[ln],l[En]))return pt;if(l[kn]<l[pt]||l[kn]+1<this.min(l[Nn],l[Yn],l[ln],l[En]))return kn;if(l[En]+1<this.min(l[kn],l[Nn],l[Yn],l[ln],l[pt]))return En;if(l[Yn]+1<this.min(l[kn],l[Nn],l[En],l[ln],l[pt]))return Yn;if(l[ln]+1<this.min(l[kn],l[Nn],l[En],l[Yn],l[pt]))return ln;if(l[Nn]+1<this.min(l[pt],l[kn],l[En],l[Yn])){if(l[Nn]<l[ln])return Nn;if(l[Nn]===l[ln]){for(var m=t+a+1;m<e.length;){var _=e.charCodeAt(m);if(this.isX12TermSep(_))return ln;if(!this.isNativeX12(_))break;m++}return Nn}}}}},r.min=function(e,t,n,i,a){var s=Math.min(e,Math.min(t,Math.min(n,i)));return a===void 0?s:Math.min(s,a)},r.findMinimums=function(e,t,n,i){for(var a=0;a<6;a++){var s=t[a]=Math.ceil(e[a]);n>s&&(n=s,hn.fill(i,0)),n===s&&(i[a]=i[a]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=ze.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),_g=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zA=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return Ur.encode(e,this.charset)!=null}catch{return!1}},r})(),hM=(function(){function r(e,t,n){var i,a,s,l,f,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new zA(j7.forName(N))}),this.encoders=[];var p=[];p.push(new zA(H7.ISO_8859_1));for(var m=t!=null&&t.name.startsWith("UTF"),_=0;_<e.length;_++){var E=!1;try{for(var T=(i=void 0,_g(p)),S=T.next();!S.done;S=T.next()){var D=S.value,V=e.charAt(_),M=V.charCodeAt(0);if(M===n||D.canEncode(V)){E=!0;break}}}catch(N){i={error:N}}finally{try{S&&!S.done&&(a=T.return)&&a.call(T)}finally{if(i)throw i.error}}if(!E)try{for(var B=(s=void 0,_g(this.ENCODERS)),H=B.next();!H.done;H=B.next()){var D=H.value;if(D.canEncode(e.charAt(_))){p.push(D),E=!0;break}}}catch(N){s={error:N}}finally{try{H&&!H.done&&(l=B.return)&&l.call(B)}finally{if(s)throw s.error}}E||(m=!0)}if(p.length===1&&!m)this.encoders=[p[0]];else{this.encoders=[];var $=0;try{for(var J=_g(p),C=J.next();!C.done;C=J.next()){var D=C.value;this.encoders[$++]=D}}catch(N){f={error:N}}finally{try{C&&!C.done&&(h=J.return)&&h.call(J)}finally{if(f)throw f.error}}}var b=-1;if(t!=null){for(var _=0;_<this.encoders.length;_++)if(this.encoders[_]!=null&&t.name===this.encoders[_].name){b=_;break}}this.priorityEncoderIndex=b}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Ur.encode($e.getCharAt(e),this.encoders[t].name)},r})(),dM=3,pM=(function(){function r(e,t,n){this.fnc1=n;var i=new hM(e,t,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var s=e.charAt(a).charCodeAt(0);this.bytes[a]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Fe,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,a,s){var l=e.charAt(i).charCodeAt(0),f=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(l===s||t.canEncode(l,t.getPriorityEncoderIndex()))&&(f=t.getPriorityEncoderIndex(),h=f+1);for(var p=f;p<h;p++)(l===s||t.canEncode(l,p))&&this.addEdge(n,i+1,new jA(l,t,p,a,s))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,a=new jA[i+1][t.length()];this.addEdges(e,t,a,0,null,n);for(var s=1;s<=i;s++){for(var l=0;l<t.length();l++)a[s][l]!=null&&s<i&&this.addEdges(e,t,a,s,a[s][l],n);for(var l=0;l<t.length();l++)a[s-1][l]=null}for(var f=-1,h=ze.MAX_VALUE,l=0;l<t.length();l++)if(a[i][l]!=null){var p=a[i][l];p.cachedTotalSize<h&&(h=p.cachedTotalSize,f=l)}if(f<0)throw new Error('Failed to encode "'+e+'"');for(var m=[],_=a[i][f];_!=null;){if(_.isFNC1())m.unshift(1e3);else for(var E=t.encode(_.c,_.encoderIndex),s=E.length-1;s>=0;s--)m.unshift(E[s]&255);var T=_.previous===null?0:_.previous.encoderIndex;T!==_.encoderIndex&&m.unshift(256+t.getECIValue(_.encoderIndex)),_=_.previous}for(var S=[],s=0;s<S.length;s++)S[s]=m[s];return S},r})(),jA=(function(){function r(e,t,n,i,a){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var s=this.isFNC1()?1:t.encode(e,n).length,l=i===null?0:i.encoderIndex;l!==n&&(s+=dM),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),gM=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var HA;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(HA||(HA={}));(function(r){gM(e,r);function e(t,n,i,a,s){var l=r.call(this,t,n,i)||this;return l.shape=a,l.macroId=s,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(pM);var vM=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),GA=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),mM=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),yM=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Sm=(function(r){yM(e,r);function e(t,n,i){var a=r.call(this,t)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+ze.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(mM),_M=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),EM=(function(r){_M(e,r);function e(t,n,i){var a=r.call(this,t,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Sm);function xM(r,e,t){return new EM(r,e,t)}function Mc(r,e,t){return new Sm(r,e,t)}var AM=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ao=0,v1=1,kr=2,NS=3,Oi=4,wM=new Sm(null,0,0),Eg=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],TM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function SM(r){var e,t;try{for(var n=TM(r),i=n.next();!i.done;i=n.next()){var a=i.value;hn.fill(a,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[Ao][Oi]=0,r[v1][Oi]=0,r[v1][Ao]=28,r[NS][Oi]=0,r[kr][Oi]=0,r[kr][Ao]=15,r}var MS=SM(hn.createInt32Array(6,6)),IM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CM=(function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=Eg[this.mode][e];i=Mc(i,a&65535,a>>16),n+=a>>16}var s=e===kr?4:5;return i=Mc(i,t,s),new r(i,e,0,n+s)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===kr?4:5;return n=Mc(n,MS[this.mode][e],i),n=Mc(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===Oi||this.mode===kr){var a=Eg[n][Ao];t=Mc(t,a&65535,a>>16),i+=a>>16,n=Ao}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new r(t,n,this.binaryShiftByteCount+1,i+s);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=xM(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Eg[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var s=new wn;try{for(var l=IM(i),f=l.next();!f.done;f=l.next()){var h=f.value;h.appendTo(s,e)}}catch(p){t={error:p}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s},r.prototype.toString=function(){return $e.format("%s bits=%d bytes=%d",AM[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(wM,Ao,0,0),r})();function bM(r){var e=$e.getCharCode(" "),t=$e.getCharCode("."),n=$e.getCharCode(",");r[Ao][e]=1;for(var i=$e.getCharCode("Z"),a=$e.getCharCode("A"),s=a;s<=i;s++)r[Ao][s]=s-a+2;r[v1][e]=1;for(var l=$e.getCharCode("z"),f=$e.getCharCode("a"),s=f;s<=l;s++)r[v1][s]=s-f+2;r[kr][e]=1;for(var h=$e.getCharCode("9"),p=$e.getCharCode("0"),s=p;s<=h;s++)r[kr][s]=s-p+2;r[kr][n]=12,r[kr][t]=13;for(var m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],_=0;_<m.length;_++)r[NS][$e.getCharCode(m[_])]=_;for(var E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],_=0;_<E.length;_++)$e.getCharCode(E[_])>0&&(r[Oi][$e.getCharCode(E[_])]=_);return r}var xg=bM(hn.createInt32Array(5,256)),Ad=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RM=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=$e.getCharCode(" "),t=$e.getCharCode(`
`),n=GA.singletonList(CM.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case $e.getCharCode("\r"):a=s===t?2:0;break;case $e.getCharCode("."):a=s===e?3:0;break;case $e.getCharCode(","):a=s===e?4:0;break;case $e.getCharCode(":"):a=s===e?5:0;break;default:a=0}a>0?(n=r.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var l=GA.min(n,function(f,h){return f.getBitCount()-h.getBitCount()});return l.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,a=[];try{for(var s=Ad(e),l=s.next();!l.done;l=s.next()){var f=l.value;this.updateStateForChar(f,t,a)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r.simplifyStates(a)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,a=xg[e.getMode()][i]>0,s=null,l=0;l<=Oi;l++){var f=xg[l][i];if(f>0){if(s==null&&(s=e.endBinaryShift(t)),!a||l===e.getMode()||l===kr){var h=s.latchAndAppend(l,f);n.push(h)}if(!a&&MS[e.getMode()][l]>=0){var p=s.shiftAndAppend(l,f);n.push(p)}}}if(e.getBinaryShiftByteCount()>0||xg[e.getMode()][i]===0){var m=e.addBinaryShiftChar(t);n.push(m)}},r.updateStateListForPair=function(e,t,n){var i,a,s=[];try{for(var l=Ad(e),f=l.next();!f.done;f=l.next()){var h=f.value;this.updateStateForPair(h,t,n,s)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(s)},r.updateStateForPair=function(e,t,n,i){var a=e.endBinaryShift(t);if(i.push(a.latchAndAppend(Oi,n)),e.getMode()!==Oi&&i.push(a.shiftAndAppend(Oi,n)),n===3||n===4){var s=a.latchAndAppend(kr,16-n).latchAndAppend(kr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(l)}},r.simplifyStates=function(e){var t,n,i,a,s=[];try{for(var l=Ad(e),f=l.next();!f.done;f=l.next()){var h=f.value,p=!0,m=function(D){if(D.isBetterThanOrEqualTo(h))return p=!1,"break";h.isBetterThanOrEqualTo(D)&&(s=s.filter(function(V){return V!==D}))};try{for(var _=(i=void 0,Ad(s)),E=_.next();!E.done;E=_.next()){var T=E.value,S=m(T);if(S==="break")break}}catch(D){i={error:D}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}p&&s.push(h)}}catch(D){t={error:D}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s},r})(),DM=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new RM(e).encode(),a=ze.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+a,l,f,h,p,m;if(n!==r.DEFAULT_AZTEC_LAYERS){if(l=n<0,f=Math.abs(n),f>(l?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new Ce($e.format("Illegal value %s for layers",n));h=r.totalBitsInLayer(f,l),p=r.WORD_SIZE[f];var _=h-h%p;if(m=r.stuffBits(i,p),m.getSize()+a>_)throw new Ce("Data to large for user specified layer");if(l&&m.getSize()>p*64)throw new Ce("Data to large for user specified layer")}else{p=0,m=null;for(var E=0;;E++){if(E>r.MAX_NB_BITS)throw new Ce("Data too large for an Aztec code");if(l=E<=3,f=l?E+1:E,h=r.totalBitsInLayer(f,l),!(s>h)){(m==null||p!==r.WORD_SIZE[f])&&(p=r.WORD_SIZE[f],m=r.stuffBits(i,p));var _=h-h%p;if(!(l&&m.getSize()>p*64)&&m.getSize()+a<=_)break}}}var T=r.generateCheckWords(m,h,p),S=m.getSize()/p,D=r.generateModeMessage(l,f,S),V=(l?11:14)+f*4,M=new Int32Array(V),B;if(l){B=V;for(var E=0;E<M.length;E++)M[E]=E}else{B=V+1+2*ze.truncDivision(ze.truncDivision(V,2)-1,15);for(var H=ze.truncDivision(V,2),$=ze.truncDivision(B,2),E=0;E<H;E++){var J=E+ze.truncDivision(E,15);M[H-E-1]=$-J-1,M[H+E]=$+J+1}}for(var C=new Fi(B),E=0,b=0;E<f;E++){for(var N=(f-E)*4+(l?9:12),P=0;P<N;P++)for(var k=P*2,U=0;U<2;U++)T.get(b+k+U)&&C.set(M[E*2+U],M[E*2+P]),T.get(b+N*2+k+U)&&C.set(M[E*2+P],M[V-1-E*2-U]),T.get(b+N*4+k+U)&&C.set(M[V-1-E*2-U],M[V-1-E*2-P]),T.get(b+N*6+k+U)&&C.set(M[V-1-E*2-P],M[E*2+U]);b+=N*8}if(r.drawModeMessage(C,l,B,D),l)r.drawBullsEye(C,ze.truncDivision(B,2),5);else{r.drawBullsEye(C,ze.truncDivision(B,2),7);for(var E=0,P=0;E<ze.truncDivision(V,2)-1;E+=15,P+=16)for(var U=ze.truncDivision(B,2)&1;U<B;U+=2)C.set(ze.truncDivision(B,2)-P,U),C.set(ze.truncDivision(B,2)+P,U),C.set(U,ze.truncDivision(B,2)-P),C.set(U,ze.truncDivision(B,2)+P)}var L=new vM;return L.setCompact(l),L.setSize(B),L.setLayers(f),L.setCodeWords(S),L.setMatrix(C),L},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var a=t-i;a<=t+i;a++)e.set(a,t-i),e.set(a,t+i),e.set(t-i,a),e.set(t+i,a);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new wn;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var a=ze.truncDivision(n,2);if(t)for(var s=0;s<7;s++){var l=a-3+s;i.get(s)&&e.set(l,a-5),i.get(s+7)&&e.set(a+5,l),i.get(20-s)&&e.set(l,a+5),i.get(27-s)&&e.set(a-5,l)}else for(var s=0;s<10;s++){var l=a-5+s+ze.truncDivision(s,5);i.get(s)&&e.set(l,a-7),i.get(s+10)&&e.set(a+7,l),i.get(29-s)&&e.set(l,a+7),i.get(39-s)&&e.set(a-7,l)}},r.generateCheckWords=function(e,t,n){var i,a,s=e.getSize()/n,l=new DS(r.getGF(n)),f=ze.truncDivision(t,n),h=r.bitsToWords(e,n,f);l.encode(h,f-s);var p=t%n,m=new wn;m.appendBits(0,p);try{for(var _=DM(Array.from(h)),E=_.next();!E.done;E=_.next()){var T=E.value;m.appendBits(T,n)}}catch(S){i={error:S}}finally{try{E&&!E.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}return m},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),a,s;for(a=0,s=e.getSize()/t;a<s;a++){for(var l=0,f=0;f<t;f++)l|=e.get(a*t+f)?1<<t-f-1:0;i[a]=l}return i},r.getGF=function(e){switch(e){case 4:return or.AZTEC_PARAM;case 6:return or.AZTEC_DATA_6;case 8:return or.AZTEC_DATA_8;case 10:return or.AZTEC_DATA_10;case 12:return or.AZTEC_DATA_12;default:throw new Ce("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new wn,i=e.getSize(),a=(1<<t)-2,s=0;s<i;s+=t){for(var l=0,f=0;f<t;f++)(s+f>=i||e.get(s+f))&&(l|=1<<t-1-f);(l&a)===a?(n.appendBits(l&a,t),s--):(l&a)===0?(n.appendBits(l|1,t),s--):n.appendBits(l,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var OM={audio:!1,video:{facingMode:"environment"}},NM=300,MM=function(r){var e=r===void 0?{}:r,t=e.timeBetweenDecodingAttempts,n=t===void 0?NM:t,i=e.hints;return _e.useMemo(function(){var a=new N7(i);return a.timeBetweenDecodingAttempts=n,a},[i,n])},qA=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(p){try{h(n.next(p))}catch(m){s(m)}}function f(p){try{h(n.throw(p))}catch(m){s(m)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((n=n.apply(r,e||[])).next())})},XA=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(p){h=[6,p],i=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},PM=function(r){var e=r.resetStream,t=_e.useState(!1),n=t[0],i=t[1],a=_e.useState(null),s=a[0],l=a[1],f=_e.useRef(null),h=_e.useRef(e),p=_e.useCallback(function(E){f.current=E,l(typeof E.getCapabilities=="function"?E.getCapabilities().torch!==void 0:!1)},[]),m=_e.useCallback(function(){return qA(void 0,void 0,void 0,function(){return XA(this,function(E){switch(E.label){case 0:return!f.current||!s?[2]:[4,f.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return E.sent(),i(!0),[2]}})})},[s]),_=_e.useCallback(function(){return qA(void 0,void 0,void 0,function(){return XA(this,function(E){switch(E.label){case 0:return!f.current||!s?[2]:(f.current=null,l(null),i(!1),[4,h.current()]);case 1:return E.sent(),[2]}})})},[s]);return _e.useEffect(function(){h.current=e},[e]),{init:p,isOn:n,isAvailable:s,on:m,off:_}},LM=function(r,e){return JSON.stringify(r)===JSON.stringify(e)},KA=function(r,e,t,n){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(p){try{h(n.next(p))}catch(m){s(m)}}function f(p){try{h(n.throw(p))}catch(m){s(m)}}function h(p){p.done?a(p.value):i(p.value).then(l,f)}h((n=n.apply(r,e||[])).next())})},YA=function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(p){return f([h,p])}}function f(h){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(a=h[0]&2?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(p){h=[6,p],i=0}finally{n=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},VM=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t},BM=function(r){r===void 0&&(r={});var e=r.paused,t=e===void 0?!1:e,n=r.hints,i=r.timeBetweenDecodingAttempts,a=r.onDecodeResult,s=a===void 0?function(){}:a,l=r.onDecodeError,f=l===void 0?function(){}:l,h=r.onError,p=h===void 0?function(){}:h,m="deviceId"in r?r.deviceId:void 0,_=_e.useState("constraints"in r?r.constraints:void 0),E=_[0],T=_[1],S=_e.useRef(s),D=_e.useRef(f),V=_e.useRef(p),M=_e.useRef(null),B=MM({hints:n,timeBetweenDecodingAttempts:i}),H=PM({resetStream:function(){return KA(void 0,void 0,void 0,function(){return YA(this,function(P){switch(P.label){case 0:return N(),[4,b()];case 1:return P.sent(),[2]}})})}}),$=H.init,J=VM(H,["init"]),C=_e.useCallback(function(P,k){P&&S.current(P),k&&D.current(k)},[]),b=_e.useCallback(function(){return KA(void 0,void 0,void 0,function(){var P,k,U;return YA(this,function(L){switch(L.label){case 0:if(!M.current)return[2];if(t)return[2];L.label=1;case 1:return L.trys.push([1,6,,7]),m?[4,B.decodeFromVideoDevice(m,M.current,C)]:[3,3];case 2:return L.sent(),[3,5];case 3:return[4,B.decodeFromConstraints(E??OM,M.current,C)];case 4:L.sent(),L.label=5;case 5:return[3,7];case 6:return P=L.sent(),V.current(P),[2];case 7:return M.current?(k=M.current.srcObject,U=k.getVideoTracks()[0],U&&$(U),[2]):[2]}})})},[B,m,E,t,C,$]),N=_e.useCallback(function(){B.reset()},[B]);return _e.useEffect(function(){S.current=s},[s]),_e.useEffect(function(){D.current=f},[f]),_e.useEffect(function(){V.current=p},[p]),_e.useEffect(function(){var P=LM(E,r.constraints);P||T(r.constraints)},[E,r]),_e.useEffect(function(){return b(),function(){N()}},[b,N]),{ref:M,torch:J}};const kM=({onResult:r,onClose:e})=>{const[t,n]=_e.useState(null),{ref:i}=BM({onDecodeResult(a){r(a.getText())},onError(a){a instanceof DOMException&&a.name==="NotAllowedError"&&n("Camera access denied. Please allow camera permissions.")}});return G.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.9)",zIndex:1e3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"20px"},children:[G.jsxs("div",{style:{position:"relative",width:"100%",maxWidth:"400px",background:"#000",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.5)"},children:[G.jsx("button",{onClick:e,style:{position:"absolute",top:"16px",right:"16px",background:"rgba(0,0,0,0.5)",border:"none",color:"white",borderRadius:"50%",padding:"8px",cursor:"pointer",zIndex:10},children:G.jsx(ew,{size:24})}),G.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70%",height:"50%",border:"2px solid rgba(255, 255, 255, 0.6)",borderRadius:"12px",pointerEvents:"none",zIndex:5}}),t?G.jsxs("div",{style:{padding:"40px",color:"white",textAlign:"center"},children:[G.jsx(QA,{size:48,style:{marginBottom:"16px",color:"#ff4444"}}),G.jsx("p",{children:t})]}):G.jsx("video",{ref:i,style:{width:"100%",display:"block"}})]}),G.jsx("p",{style:{color:"white",marginTop:"20px",textAlign:"center"},children:"Point your camera at a barcode to scan."})]})},PS=({message:r,type:e="info",isVisible:t,onClose:n,duration:i=3e3})=>{if(_e.useEffect(()=>{if(t&&i>0){const l=setTimeout(()=>{n()},i);return()=>clearTimeout(l)}},[t,i,n]),!t)return null;const a=()=>{switch(e){case"success":return G.jsx(OC,{size:20,color:"#4ade80"});case"error":return G.jsx(QA,{size:20,color:"#f87171"});default:return G.jsx(zC,{size:20,color:"#60a5fa"})}},s=()=>{switch(e){case"success":return"rgba(74, 222, 128, 0.5)";case"error":return"rgba(248, 113, 113, 0.5)";default:return"rgba(96, 165, 250, 0.5)"}};return G.jsxs("div",{style:{position:"fixed",top:"24px",left:"50%",transform:"translateX(-50%)",zIndex:2e3,display:"flex",alignItems:"center",gap:"12px",padding:"12px 20px",background:"rgba(20, 20, 30, 0.95)",backdropFilter:"blur(12px)",border:`1px solid ${s()}`,borderRadius:"99px",color:"white",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",maxWidth:"90%",width:"max-content",animation:"slideDownFade 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[a(),G.jsx("span",{style:{fontSize:"0.9rem",fontWeight:500},children:r}),G.jsx("button",{onClick:n,style:{background:"none",border:"none",padding:"4px",cursor:"pointer",color:"rgba(255,255,255,0.6)",display:"flex"},children:G.jsx(ew,{size:16})}),G.jsx("style",{children:`
                @keyframes slideDownFade {
                    from { opacity: 0; transform: translate(-50%, -20px); }
                    to { opacity: 1; transform: translate(-50%, 0); }
                }
            `})]})},FM=({onSubmit:r,onCancel:e})=>{const[t,n]=_e.useState(""),[i,a]=_e.useState(uA[0]),[s,l]=_e.useState(lA[0]),[f,h]=_e.useState(1),[p,m]=_e.useState(""),[_,E]=_e.useState(""),[T,S]=_e.useState(!1),[D,V]=_e.useState(!1),[M,B]=_e.useState({msg:"",type:"info",show:!1}),H=(P,k)=>{B({msg:P,type:k,show:!0})},$=async P=>{E(P),V(!0);try{const U=await(await fetch(`https://world.openfoodfacts.org/api/v0/product/${P}.json`)).json();if(U.status===1&&U.product){const L=U.product;n(L.product_name||"");const Pe=L.categories||"";Pe.toLowerCase().includes("electronic")||Pe.toLowerCase().includes("device")?a("Electronics"):Pe.toLowerCase().includes("kitchen")||Pe.toLowerCase().includes("food")||Pe.toLowerCase().includes("cooking")?a("Kitchen"):a("Other"),H("Product found!","success")}else H("Product details not found, but barcode saved.","info")}catch(k){console.error("Error fetching product info:",k),H("Network error. Please enter details manually.","error")}finally{V(!1)}},J=P=>{S(!1),$(P)},C=P=>{P.preventDefault(),r({name:t,category:i,location:s,quantity:f,value:p?parseFloat(p):0,barcode:_})},b={display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},N={fontWeight:600,fontSize:"0.875rem"};return G.jsxs("div",{className:"animate-slide-up",children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[G.jsx("h2",{className:"text-title",style:{margin:0},children:"Add New Item"}),G.jsxs(Bi,{variant:"secondary",onClick:()=>S(!0),disabled:D,children:[D?G.jsx(mv,{size:18,className:"animate-spin"}):G.jsx(aE,{size:18}),G.jsx("span",{style:{marginLeft:"8px"},children:"Scan Barcode"})]})]}),T&&G.jsx(kM,{onResult:J,onClose:()=>S(!1)}),G.jsx(q1,{children:G.jsxs("form",{onSubmit:C,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[G.jsxs("div",{style:b,children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[G.jsx("label",{style:N,children:"Item Name"}),_&&G.jsxs("span",{style:{fontSize:"0.75rem",color:"hsl(var(--color-primary))",display:"flex",alignItems:"center",gap:"4px"},children:[G.jsx(aE,{size:12})," ",_]})]}),G.jsx("input",{required:!0,type:"text",value:t,onChange:P=>n(P.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)"},placeholder:"e.g. Sony Bravia TV"})]}),G.jsxs("div",{className:"form-row",children:[G.jsxs("div",{style:b,children:[G.jsx("label",{style:N,children:"Category"}),G.jsx("select",{value:i,onChange:P=>a(P.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:uA.map(P=>G.jsx("option",{value:P,children:P},P))})]}),G.jsxs("div",{style:b,children:[G.jsx("label",{style:N,children:"Location"}),G.jsx("select",{value:s,onChange:P=>l(P.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},children:lA.map(P=>G.jsx("option",{value:P,children:P},P))})]})]}),G.jsxs("div",{className:"form-row",children:[G.jsxs("div",{style:b,children:[G.jsx("label",{style:N,children:"Quantity"}),G.jsx("input",{type:"number",min:"1",value:f,onChange:P=>h(parseInt(P.target.value)),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"}})]}),G.jsxs("div",{style:b,children:[G.jsx("label",{style:N,children:"Value ($)"}),G.jsx("input",{type:"number",min:"0",step:"0.01",value:p,onChange:P=>m(P.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"0.00"})]})]}),G.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end"},children:[G.jsx(Bi,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),G.jsx(Bi,{type:"submit",children:"Save Item"})]})]})}),G.jsx(PS,{message:M.msg,type:M.type,isVisible:M.show,onClose:()=>B({...M,show:!1})})]})},LS=_e.createContext({user:null,loading:!0}),Im=()=>_e.useContext(LS),UM=({children:r})=>{const[e,t]=_e.useState(null),[n,i]=_e.useState(!0);return _e.useEffect(()=>{const a=RO(_s,s=>{t(s),i(!1)});return()=>a()},[]),G.jsx(LS.Provider,{value:{user:e,loading:n},children:r})},zM=()=>{const[r,e]=_e.useState([]),{user:t}=Im();return _e.useEffect(()=>{if(!t){e([]);return}const s=D3(a1(ho,"todos"),O3("userId","==",t.uid),N3("createdAt","desc")),l=B3(s,f=>{const h=f.docs.map(p=>({id:p.id,...p.data()}));e(h)});return()=>l()},[t]),{todos:r,addTodo:async s=>{if(!(!s.trim()||!t))try{await V3(a1(ho,"todos"),{text:s,userId:t.uid,completed:!1,createdAt:Date.now()})}catch(l){console.error("Error adding todo:",l)}},toggleTodo:async s=>{const l=r.find(f=>f.id===s);if(l)try{await wD(o1(ho,"todos",s),{completed:!l.completed})}catch(f){console.error("Error toggling todo:",f)}},deleteTodo:async s=>{try{await L3(o1(ho,"todos",s))}catch(l){console.error("Error deleting todo:",l)}}}},jM=()=>{const{todos:r,addTodo:e,toggleTodo:t,deleteTodo:n}=zM(),[i,a]=_e.useState(""),s=l=>{l?.preventDefault(),i.trim()&&(e(i),a(""))};return G.jsxs("div",{className:"animate-slide-up",children:[G.jsx("h2",{className:"text-title",children:"To-Do List"}),G.jsxs("form",{onSubmit:s,style:{marginBottom:"24px",display:"flex",gap:"12px"},children:[G.jsx("input",{type:"text",value:i,onChange:l=>a(l.target.value),placeholder:"Add a new task...",className:"glass-panel",style:{flex:1,padding:"16px",background:"rgba(255,255,255,0.5)",border:"1px solid var(--glass-border)",borderRadius:"var(--radius-md)",fontSize:"1rem",outline:"none"}}),G.jsx(Bi,{type:"submit",style:{borderRadius:"var(--radius-md)"},children:G.jsx(ZA,{})})]}),G.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[r.length===0&&G.jsx("div",{style:{textAlign:"center",padding:"40px",opacity:.5},children:G.jsx("p",{children:"No tasks yet. Enjoy your day! "})}),r.map(l=>G.jsxs("div",{className:"glass-panel",style:{display:"flex",alignItems:"center",padding:"16px",gap:"16px",transition:"all 0.2s",opacity:l.completed?.6:1,background:l.completed?"rgba(255,255,255,0.05)":"var(--glass-bg)"},children:[G.jsx("button",{onClick:()=>t(l.id),style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",color:l.completed?"hsl(var(--color-primary))":"gray"},children:l.completed?G.jsx(HM,{}):G.jsx(MC,{size:24})}),G.jsx("span",{style:{flex:1,fontSize:"1.1rem",textDecoration:l.completed?"line-through":"none",color:l.completed?"var(--color-text-muted)":"inherit"},children:l.text}),G.jsx("button",{onClick:()=>n(l.id),style:{background:"none",border:"none",opacity:.3,cursor:"pointer",color:"#ef4444"},onMouseEnter:f=>f.currentTarget.style.opacity="1",onMouseLeave:f=>f.currentTarget.style.opacity="0.3",children:G.jsx(JA,{size:18})})]},l.id))]})]})},HM=()=>G.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:G.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"})}),GM=()=>{const[r,e]=_e.useState([]),[t,n]=_e.useState(!0),{user:i}=Im();return _e.useEffect(()=>{if(!i){e([]),n(!1);return}const l=D3(a1(ho,"inventory"),O3("userId","==",i.uid),N3("createdAt","desc")),f=B3(l,h=>{const p=h.docs.map(m=>({id:m.id,...m.data()}));e(p),n(!1)},h=>{console.error("Error fetching inventory:",h),n(!1)});return()=>f()},[i]),{items:r,loading:t,addItem:async l=>{try{if(!i)return;await V3(a1(ho,"inventory"),{...l,userId:i.uid,createdAt:Date.now(),updatedAt:Date.now()})}catch(f){console.error("Error adding item:",f)}},deleteItem:async l=>{try{await L3(o1(ho,"inventory",l))}catch(f){console.error("Error deleting item:",f)}}}},qM=()=>{const[r,e]=_e.useState(null),[t,n]=_e.useState(!1);return _e.useEffect(()=>{const a=s=>{s.preventDefault(),e(s),n(!0)};return window.addEventListener("beforeinstallprompt",a),()=>{window.removeEventListener("beforeinstallprompt",a)}},[]),{isInstallable:t,promptToInstall:async()=>{if(!r)return;await r.prompt();const{outcome:a}=await r.userChoice;console.log(a==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),e(null),n(!1)}}},XM=()=>{const[r,e]=_e.useState(!0),[t,n]=_e.useState(!1),[i,a]=_e.useState(""),[s,l]=_e.useState(""),[f,h]=_e.useState(!1),[p,m]=_e.useState(!1),[_,E]=_e.useState({msg:"",type:"info",show:!1}),T=(M,B)=>{E({msg:M,type:B,show:!0})},S=async M=>{M.preventDefault(),m(!0);try{r?await IO(_s,i,s):await SO(_s,i,s)}catch(B){console.error(B);let H="Authentication failed";B.code==="auth/invalid-credential"&&(H="Invalid email or password."),B.code==="auth/email-already-in-use"&&(H="Email already in use."),B.code==="auth/weak-password"&&(H="Password should be at least 6 characters."),B.code==="auth/operation-not-allowed"&&(H="Enable Email/Password in Firebase Console!"),T(H,"error"),m(!1)}},D=async()=>{m(!0);try{await EO(_s)}catch(M){console.error(M),T("Failed to sign in anonymously.","error"),m(!1)}},V=async M=>{if(M.preventDefault(),!i){T("Please enter your email address.","info");return}m(!0);try{await TO(_s,i),T("Password reset email sent! Check your inbox.","success"),n(!1)}catch(B){console.error(B);let H="Failed to send reset email.";B.code==="auth/user-not-found"&&(H="No account found with this email."),B.code==="auth/invalid-email"&&(H="Invalid email address."),T(H,"error")}finally{m(!1)}};return G.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",background:"radial-gradient(circle at 50% 10%, rgba(37, 99, 235, 0.1) 0%, transparent 50%)"},children:[G.jsxs("div",{className:"animate-fade-in",style:{width:"100%",maxWidth:"400px"},children:[G.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[G.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:800,marginBottom:"8px",background:"linear-gradient(135deg, hsl(var(--color-primary)) 0%, #a855f7 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Bitlkhzin"}),G.jsx("p",{className:"text-muted",children:"Your smart inventory companion."})]}),G.jsx(q1,{children:G.jsxs("form",{onSubmit:t?V:S,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[G.jsx("h2",{className:"text-title",style:{fontSize:"1.5rem",textAlign:"center"},children:t?"Reset Password":r?"Welcome Back":"Create Account"}),G.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[G.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem",marginBottom:"8px"},children:"Email"}),G.jsx("input",{type:"email",required:!0,value:i,onChange:M=>a(M.target.value),className:"glass-panel",style:{padding:"12px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:"you@example.com"})]}),!t&&G.jsxs("div",{className:"form-row",style:{display:"flex",flexDirection:"column"},children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[G.jsx("label",{style:{fontWeight:600,fontSize:"0.875rem"},children:"Password"}),r&&G.jsx("button",{type:"button",onClick:()=>n(!0),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontSize:"0.75rem",cursor:"pointer",fontWeight:500},children:"Forgot Password?"})]}),G.jsxs("div",{style:{position:"relative"},children:[G.jsx("input",{type:f?"text":"password",required:!0,minLength:6,value:s,onChange:M=>l(M.target.value),className:"glass-panel",style:{padding:"12px",paddingRight:"40px",background:"rgba(255,255,255,0.5)",width:"100%"},placeholder:""}),G.jsx("button",{type:"button",onClick:()=>h(!f),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--color-text-light)",opacity:.6,display:"flex",alignItems:"center"},children:f?G.jsx(BC,{size:18}):G.jsx(FC,{size:18})})]})]}),G.jsxs(Bi,{type:"submit",style:{marginTop:"8px",display:"flex",justifyContent:"center",gap:"8px"},disabled:p,children:[p?G.jsx(mv,{className:"animate-spin"}):t?G.jsx(KC,{size:18}):r?G.jsx(GC,{size:18}):G.jsx(a4,{size:18}),t?"Send Reset Link":r?"Sign In":"Create Account"]}),G.jsx("div",{style:{textAlign:"center",marginTop:"16px"},children:G.jsx("p",{className:"text-muted",style:{fontSize:"0.9rem"},children:t?G.jsx("button",{type:"button",onClick:()=>n(!1),style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer"},children:"Back to Login"}):G.jsxs(G.Fragment,{children:[r?"Don't have an account? ":"Already have an account? ",G.jsx("button",{type:"button",onClick:()=>{e(!r),a(""),l("")},style:{background:"none",border:"none",color:"hsl(var(--color-primary))",fontWeight:600,cursor:"pointer",textDecoration:"underline"},children:r?"Sign Up":"Log In"})]})})}),!t&&G.jsxs(G.Fragment,{children:[G.jsxs("div",{style:{position:"relative",margin:"20px 0",textAlign:"center"},children:[G.jsx("hr",{style:{borderColor:"var(--glass-border)",opacity:.5}}),G.jsx("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--color-surface-light)",padding:"0 10px",fontSize:"0.8rem",color:"var(--color-text-light)",opacity:.6},children:"OR"})]}),G.jsx(Bi,{type:"button",variant:"secondary",onClick:D,disabled:p,style:{width:"100%"},children:"Continue as Guest"})]})]})})]}),G.jsx(PS,{message:_.msg,type:_.type,isVisible:_.show,onClose:()=>E({..._,show:!1})})]})};function KM(){const[r,e]=_e.useState("inventory"),[t,n]=_e.useState(!1),{items:i,addItem:a,deleteItem:s}=GM(),{isInstallable:l,promptToInstall:f}=qM(),{user:h,loading:p}=Im();if(_e.useEffect(()=>{const _=document.querySelector('meta[name="theme-color"]');t?(document.documentElement.classList.add("dark"),_&&_.setAttribute("content","#14171f")):(document.documentElement.classList.remove("dark"),_&&_.setAttribute("content","#f9fafb"))},[t]),p)return G.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:G.jsx(mv,{className:"animate-spin",size:48,color:"hsl(var(--color-primary))"})});if(!h)return G.jsx(XM,{});const m=()=>{switch(r){case"add":return G.jsx(FM,{onSubmit:_=>{a(_),e("inventory")},onCancel:()=>e("inventory")});case"settings":return G.jsxs("div",{className:"animate-fade-in",children:[G.jsx("h2",{className:"text-title",children:"Settings"}),G.jsxs(q1,{children:[G.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[G.jsx("h3",{style:{margin:0},children:"Appearance"}),G.jsxs(Bi,{variant:"secondary",onClick:()=>n(!t),style:{display:"flex",alignItems:"center",gap:"8px"},children:[t?G.jsx(n4,{size:18}):G.jsx(WC,{size:18}),t?"Light Mode":"Dark Mode"]})]}),G.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),G.jsxs("div",{style:{opacity:.6},children:[G.jsx("p",{children:"App Version: 1.1.0"}),G.jsxs("p",{children:["Account: ",h.email]}),G.jsx("p",{children:"Sync Status: Cloud (Firebase)"})]}),G.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),G.jsxs(Bi,{variant:"secondary",onClick:()=>_s.signOut(),style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px",color:"#f87171",borderColor:"rgba(248, 113, 113, 0.3)"},children:[G.jsx($A,{size:18}),"Log Out"]}),l&&G.jsxs(G.Fragment,{children:[G.jsx("hr",{style:{margin:"16px 0",borderColor:"var(--glass-border)",opacity:.3}}),G.jsxs(Bi,{onClick:f,style:{width:"100%",display:"flex",justifyContent:"center",gap:"8px"},children:[G.jsx(LC,{size:18}),"Install App"]})]})]})]});case"todo":return G.jsx(jM,{});default:return G.jsx("div",{className:"animate-fade-in",children:G.jsx(G5,{items:i,onAddItem:()=>e("add"),onDeleteItem:s})})}};return G.jsx(H5,{currentView:r,onNavigate:_=>e(_),children:m()})}xC.createRoot(document.getElementById("root")).render(G.jsx(_e.StrictMode,{children:G.jsx(UM,{children:G.jsx(KM,{})})}));
